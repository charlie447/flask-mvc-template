if(function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(t,e){e=e||J;var n=e.createElement("script");n.text=t,e.head.appendChild(n).parentNode.removeChild(n)}function i(t){var e=!!t&&"length"in t&&t.length,n=dt.type(t);return"function"!==n&&!dt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t,e,n){if(dt.isFunction(e))return dt.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return dt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(_t.test(e))return dt.filter(e,t,n);e=dt.filter(e,t)}return dt.grep(t,function(t){return rt.call(e,t)>-1!==n&&1===t.nodeType})}function o(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function a(t){var e={};return dt.each(t.match(Et)||[],function(t,n){e[n]=!0}),e}function s(t){return t}function l(t){throw t}function u(t,e,n){var i;try{t&&dt.isFunction(i=t.promise)?i.call(t).done(e).fail(n):t&&dt.isFunction(i=t.then)?i.call(t,e,n):e.call(void 0,t)}catch(t){n.call(void 0,t)}}function c(){J.removeEventListener("DOMContentLoaded",c),t.removeEventListener("load",c),dt.ready()}function h(){this.expando=dt.expando+h.uid++}function d(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Lt,"-$&").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:zt.test(n)?JSON.parse(n):n)}catch(r){}Nt.set(t,e,n)}else n=void 0;return n}function f(t,e,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return dt.css(t,e,"")},l=s(),u=n&&n[3]||(dt.cssNumber[e]?"":"px"),c=(dt.cssNumber[e]||"px"!==u&&+l)&&Ht.exec(dt.css(t,e));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do o=o||".5",c/=o,dt.style(t,e,c+u);while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}function p(t){var e,n=t.ownerDocument,i=t.nodeName,r=Wt[i];return r?r:(e=n.body.appendChild(n.createElement(i)),r=dt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Wt[i]=r,r)}function g(t,e){for(var n,i,r=[],o=0,a=t.length;o<a;o++)i=t[o],i.style&&(n=i.style.display,e?("none"===n&&(r[o]=Pt.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&Ft(i)&&(r[o]=p(i))):"none"!==n&&(r[o]="none",Pt.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}function m(t,e){var n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&dt.nodeName(t,e)?dt.merge([t],n):n}function v(t,e){for(var n=0,i=t.length;n<i;n++)Pt.set(t[n],"globalEval",!e||Pt.get(e[n],"globalEval"))}function y(t,e,n,i,r){for(var o,a,s,l,u,c,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if(o=t[f],o||0===o)if("object"===dt.type(o))dt.merge(d,o.nodeType?[o]:o);else if(Xt.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(Vt.exec(o)||["",""])[1].toLowerCase(),l=qt[s]||qt._default,a.innerHTML=l[1]+dt.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;dt.merge(d,a.childNodes),a=h.firstChild,a.textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(i&&dt.inArray(o,i)>-1)r&&r.push(o);else if(u=dt.contains(o.ownerDocument,o),a=m(h.appendChild(o),"script"),u&&v(a),n)for(c=0;o=a[c++];)Ut.test(o.type||"")&&n.push(o);return h}function b(){return!0}function w(){return!1}function x(){try{return J.activeElement}catch(t){}}function _(t,e,n,i,r,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(s in e)_(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=w;else if(!r)return t;return 1===o&&(a=r,r=function(t){return dt().off(t),a.apply(this,arguments)},r.guid=a.guid||(a.guid=dt.guid++)),t.each(function(){dt.event.add(this,e,r,i,n)})}function k(t,e){return dt.nodeName(t,"table")&&dt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t:t}function C(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function S(t){var e=ee.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function M(t,e){var n,i,r,o,a,s,l,u;if(1===e.nodeType){if(Pt.hasData(t)&&(o=Pt.access(t),a=Pt.set(e,o),u=o.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;n<i;n++)dt.event.add(e,r,u[r][n])}Nt.hasData(t)&&(s=Nt.access(t),l=dt.extend({},s),Nt.set(e,l))}}function T(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Yt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function E(t,e,i,r){e=nt.apply([],e);var o,a,s,l,u,c,h=0,d=t.length,f=d-1,p=e[0],g=dt.isFunction(p);if(g||d>1&&"string"==typeof p&&!ct.checkClone&&te.test(p))return t.each(function(n){var o=t.eq(n);g&&(e[0]=p.call(this,n,o.html())),E(o,e,i,r)});if(d&&(o=y(e,t[0].ownerDocument,!1,t,r),a=o.firstChild,1===o.childNodes.length&&(o=a),a||r)){for(s=dt.map(m(o,"script"),C),l=s.length;h<d;h++)u=o,h!==f&&(u=dt.clone(u,!0,!0),l&&dt.merge(s,m(u,"script"))),i.call(t[h],u,h);if(l)for(c=s[s.length-1].ownerDocument,dt.map(s,S),h=0;h<l;h++)u=s[h],Ut.test(u.type||"")&&!Pt.access(u,"globalEval")&&dt.contains(c,u)&&(u.src?dt._evalUrl&&dt._evalUrl(u.src):n(u.textContent.replace(ne,""),c))}return t}function O(t,e,n){for(var i,r=e?dt.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||dt.cleanData(m(i)),i.parentNode&&(n&&dt.contains(i.ownerDocument,i)&&v(m(i,"script")),i.parentNode.removeChild(i));return t}function A(t,e,n){var i,r,o,a,s=t.style;return n=n||oe(t),n&&(a=n.getPropertyValue(e)||n[e],""!==a||dt.contains(t.ownerDocument,t)||(a=dt.style(t,e)),!ct.pixelMarginRight()&&re.test(a)&&ie.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function D(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function R(t){if(t in ce)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ue.length;n--;)if(t=ue[n]+e,t in ce)return t}function P(t,e,n){var i=Ht.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function N(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=dt.css(t,n+jt[o],!0,r)),i?("content"===n&&(a-=dt.css(t,"padding"+jt[o],!0,r)),"margin"!==n&&(a-=dt.css(t,"border"+jt[o]+"Width",!0,r))):(a+=dt.css(t,"padding"+jt[o],!0,r),"padding"!==n&&(a+=dt.css(t,"border"+jt[o]+"Width",!0,r)));return a}function z(t,e,n){var i,r=!0,o=oe(t),a="border-box"===dt.css(t,"boxSizing",!1,o);if(t.getClientRects().length&&(i=t.getBoundingClientRect()[e]),i<=0||null==i){if(i=A(t,e,o),(i<0||null==i)&&(i=t.style[e]),re.test(i))return i;r=a&&(ct.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+N(t,e,n||(a?"border":"content"),r,o)+"px"}function L(t,e,n,i,r){return new L.prototype.init(t,e,n,i,r)}function I(){de&&(t.requestAnimationFrame(I),dt.fx.tick())}function H(){return t.setTimeout(function(){he=void 0}),he=dt.now()}function j(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)n=jt[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function F(t,e,n){for(var i,r=(Y.tweeners[e]||[]).concat(Y.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function B(t,e,n){var i,r,o,a,s,l,u,c,h="width"in e||"height"in e,d=this,f={},p=t.style,m=t.nodeType&&Ft(t),v=Pt.get(t,"fxshow");n.queue||(a=dt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,dt.queue(t,"fx").length||a.empty.fire()})}));for(i in e)if(r=e[i],fe.test(r)){if(delete e[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!v||void 0===v[i])continue;m=!0}f[i]=v&&v[i]||dt.style(t,i)}if(l=!dt.isEmptyObject(e),l||!dt.isEmptyObject(f)){h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=v&&v.display,null==u&&(u=Pt.get(t,"display")),c=dt.css(t,"display"),"none"===c&&(u?c=u:(g([t],!0),u=t.style.display||u,c=dt.css(t,"display"),g([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===dt.css(t,"float")&&(l||(d.done(function(){p.display=u}),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1;for(i in f)l||(v?"hidden"in v&&(m=v.hidden):v=Pt.access(t,"fxshow",{display:u}),o&&(v.hidden=!m),m&&g([t],!0),d.done(function(){m||g([t]),Pt.remove(t,"fxshow");for(i in f)dt.style(t,i,f[i])})),l=F(m?v[i]:0,i,d),i in v||(v[i]=l.start,m&&(l.end=l.start,l.start=0))}}function W(t,e){var n,i,r,o,a;for(n in t)if(i=dt.camelCase(n),r=e[i],o=t[n],dt.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),a=dt.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function Y(t,e,n){var i,r,o=0,a=Y.prefilters.length,s=dt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=he||H(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,o=1-i,a=0,l=u.tweens.length;a<l;a++)u.tweens[a].run(o);return s.notifyWith(t,[u,o,n]),o<1&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:dt.extend({},e),opts:dt.extend(!0,{specialEasing:{},easing:dt.easing._default},n),originalProperties:e,originalOptions:n,startTime:he||H(),duration:n.duration,tweens:[],createTween:function(e,n){var i=dt.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(W(c,u.opts.specialEasing);o<a;o++)if(i=Y.prefilters[o].call(u,t,c,u.opts))return dt.isFunction(i.stop)&&(dt._queueHooks(u.elem,u.opts.queue).stop=dt.proxy(i.stop,i)),i;return dt.map(c,F,u),dt.isFunction(u.opts.start)&&u.opts.start.call(t,u),dt.fx.timer(dt.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function V(t){return t.getAttribute&&t.getAttribute("class")||""}function U(t,e,n,i){var r;if(dt.isArray(e))dt.each(e,function(e,r){n||Me.test(t)?i(t,r):U(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==dt.type(e))i(t,e);else for(r in e)U(t+"["+r+"]",e[r],n,i)}function q(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(Et)||[];if(dt.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function X(t,e,n,i){function r(s){var l;return o[s]=!0,dt.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var o={},a=t===He;return r(e.dataTypes[0])||!o["*"]&&r("*")}function G(t,e){var n,i,r=dt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&dt.extend(!0,t,i),t}function $(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function K(t,e,n,i){var r,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function Z(t){return dt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var Q=[],J=t.document,tt=Object.getPrototypeOf,et=Q.slice,nt=Q.concat,it=Q.push,rt=Q.indexOf,ot={},at=ot.toString,st=ot.hasOwnProperty,lt=st.toString,ut=lt.call(Object),ct={},ht="3.1.0",dt=function(t,e){return new dt.fn.init(t,e)},ft=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pt=/^-ms-/,gt=/-([a-z])/g,mt=function(t,e){return e.toUpperCase()};dt.fn=dt.prototype={jquery:ht,constructor:dt,length:0,toArray:function(){return et.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:et.call(this)},pushStack:function(t){var e=dt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return dt.each(this,t)},map:function(t){return this.pushStack(dt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(et.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:it,sort:Q.sort,splice:Q.splice},dt.extend=dt.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||dt.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],i=t[e],a!==i&&(u&&i&&(dt.isPlainObject(i)||(r=dt.isArray(i)))?(r?(r=!1,o=n&&dt.isArray(n)?n:[]):o=n&&dt.isPlainObject(n)?n:{},a[e]=dt.extend(u,o,i)):void 0!==i&&(a[e]=i));return a},dt.extend({expando:"jQuery"+(ht+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===dt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=dt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==at.call(t))&&(!(e=tt(t))||(n=st.call(e,"constructor")&&e.constructor,"function"==typeof n&&lt.call(n)===ut))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?ot[at.call(t)]||"object":typeof t},globalEval:function(t){n(t)},camelCase:function(t){return t.replace(pt,"ms-").replace(gt,mt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,r=0;if(i(t))for(n=t.length;r<n&&e.call(t[r],r,t[r])!==!1;r++);else for(r in t)if(e.call(t[r],r,t[r])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(ft,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?dt.merge(n,"string"==typeof t?[t]:t):it.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:rt.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,a=t.length,s=!n;o<a;o++)i=!e(t[o],o),i!==s&&r.push(t[o]);return r},map:function(t,e,n){var r,o,a=0,s=[];if(i(t))for(r=t.length;a<r;a++)o=e(t[a],a,n),null!=o&&s.push(o);else for(a in t)o=e(t[a],a,n),null!=o&&s.push(o);return nt.apply([],s)},guid:1,proxy:function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),dt.isFunction(t))return i=et.call(arguments,2),r=function(){return t.apply(e||this,i.concat(et.call(arguments)))},r.guid=t.guid=t.guid||dt.guid++,r},now:Date.now,support:ct}),"function"==typeof Symbol&&(dt.fn[Symbol.iterator]=Q[Symbol.iterator]),dt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){ot["[object "+e+"]"]=e.toLowerCase()});var vt=function(t){function e(t,e,n,i){var r,o,a,s,l,u,c,d=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!i&&((e?e.ownerDocument||e:B)!==P&&R(e),e=e||P,z)){if(11!==p&&(l=vt.exec(t)))if(r=l[1]){if(9===p){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(d&&(a=d.getElementById(r))&&j(e,a)&&a.id===r)return n.push(a),n}else{if(l[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&_.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(r)),n}if(_.qsa&&!q[t+" "]&&(!L||!L.test(t))){if(1!==p)d=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(xt,_t):e.setAttribute("id",s=F),u=M(t),o=u.length;o--;)u[o]="#"+s+" "+f(u[o]);c=u.join(","),d=yt.test(t)&&h(e.parentNode)||e}if(c)try{return Q.apply(n,d.querySelectorAll(c)),n}catch(g){}finally{s===F&&e.removeAttribute("id")}}}return E(t.replace(st,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>k.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[F]=!0,t}function r(t){var e=P.createElement("fieldset");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=n.length;i--;)k.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return function(e){return"label"in e&&e.disabled===t||"form"in e&&e.disabled===t||"form"in e&&e.disabled===!1&&(e.isDisabled===t||e.isDisabled!==!t&&("label"in e||!Ct(e))!==t)}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function h(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function d(){}function f(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,r=e.next,o=r||i,a=n&&"parentNode"===o,s=Y++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r)}:function(e,n,l){var u,c,h,d=[W,s];if(l){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(h=e[F]||(e[F]={}),c=h[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((u=c[o])&&u[0]===W&&u[1]===s)return d[2]=u[2];if(c[o]=d,d[2]=t(e,n,l))return!0}}}function g(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var r=0,o=n.length;r<o;r++)e(t,n[r],i);return i}function v(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),u&&e.push(s)));return a}function y(t,e,n,r,o,a){return r&&!r[F]&&(r=y(r)),o&&!o[F]&&(o=y(o,a)),i(function(i,a,s,l){var u,c,h,d=[],f=[],p=a.length,g=i||m(e||"*",s.nodeType?[s]:s,[]),y=!t||!i&&e?g:v(g,d,t,s,l),b=n?o||(i?t:p||r)?[]:a:y;if(n&&n(y,b,s,l),r)for(u=v(b,f),r(u,[],s,l),c=u.length;c--;)(h=u[c])&&(b[f[c]]=!(y[f[c]]=h));if(i){if(o||t){if(o){for(u=[],c=b.length;c--;)(h=b[c])&&u.push(y[c]=h);o(null,b=[],u,l)}for(c=b.length;c--;)(h=b[c])&&(u=o?tt(i,h):d[c])>-1&&(i[u]=!(a[u]=h))}}else b=v(b===a?b.splice(p,b.length):b),o?o(null,a,b,l):Q.apply(a,b)})}function b(t){for(var e,n,i,r=t.length,o=k.relative[t[0].type],a=o||k.relative[" "],s=o?1:0,l=p(function(t){return t===e},a,!0),u=p(function(t){return tt(e,t)>-1},a,!0),c=[function(t,n,i){var r=!o&&(i||n!==O)||((e=n).nodeType?l(t,n,i):u(t,n,i));return e=null,r}];s<r;s++)if(n=k.relative[t[s].type])c=[p(g(c),n)];else{if(n=k.filter[t[s].type].apply(null,t[s].matches),n[F]){for(i=++s;i<r&&!k.relative[t[i].type];i++);return y(s>1&&g(c),s>1&&f(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),n,s<i&&b(t.slice(s,i)),i<r&&b(t=t.slice(i)),i<r&&f(t))}c.push(n)}return g(c)}function w(t,n){var r=n.length>0,o=t.length>0,a=function(i,a,s,l,u){var c,h,d,f=0,p="0",g=i&&[],m=[],y=O,b=i||o&&k.find.TAG("*",u),w=W+=null==y?1:Math.random()||.1,x=b.length;for(u&&(O=a===P||a||u);p!==x&&null!=(c=b[p]);p++){if(o&&c){for(h=0,a||c.ownerDocument===P||(R(c),s=!z);d=t[h++];)if(d(c,a||P,s)){l.push(c);break}u&&(W=w)}r&&((c=!d&&c)&&f--,i&&g.push(c))}if(f+=p,r&&p!==f){for(h=0;d=n[h++];)d(g,m,a,s);if(i){if(f>0)for(;p--;)g[p]||m[p]||(m[p]=K.call(l));m=v(m)}Q.apply(l,m),u&&!i&&m.length>0&&f+n.length>1&&e.uniqueSort(l)}return u&&(W=w,O=y),g};return r?i(a):a}var x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F="sizzle"+1*new Date,B=t.document,W=0,Y=0,V=n(),U=n(),q=n(),X=function(t,e){return t===e&&(D=!0),0},G={}.hasOwnProperty,$=[],K=$.pop,Z=$.push,Q=$.push,J=$.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(ot),dt=new RegExp("^"+it+"$"),ft={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,_t=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},kt=function(){R()},Ct=p(function(t){return t.disabled===!0},{dir:"parentNode",next:"legend"});try{Q.apply($=J.call(B.childNodes),B.childNodes),$[B.childNodes.length].nodeType}catch(St){Q={apply:$.length?function(t,e){Z.apply(t,J.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}_=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},R=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:B;return i!==P&&9===i.nodeType&&i.documentElement?(P=i,N=P.documentElement,z=!S(P),B!==P&&(n=P.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",kt,!1):n.attachEvent&&n.attachEvent("onunload",kt)),_.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=r(function(t){return t.appendChild(P.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=mt.test(P.getElementsByClassName),_.getById=r(function(t){return N.appendChild(t).id=F,!P.getElementsByName||!P.getElementsByName(F).length}),_.getById?(k.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&z){var n=e.getElementById(t);return n?[n]:[]}},k.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}}):(delete k.find.ID,k.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),k.find.TAG=_.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):_.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},k.find.CLASS=_.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&z)return e.getElementsByClassName(t)},I=[],L=[],(_.qsa=mt.test(P.querySelectorAll))&&(r(function(t){N.appendChild(t).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+F+"-]").length||L.push("~="),t.querySelectorAll(":checked").length||L.push(":checked"),t.querySelectorAll("a#"+F+"+*").length||L.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=P.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+nt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&L.push(":enabled",":disabled"),N.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(_.matchesSelector=mt.test(H=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(t){_.disconnectedMatch=H.call(t,"*"),H.call(t,"[s!='']:x"),I.push("!=",ot)}),L=L.length&&new RegExp(L.join("|")),I=I.length&&new RegExp(I.join("|")),e=mt.test(N.compareDocumentPosition),j=e||mt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},X=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!_.sortDetached&&e.compareDocumentPosition(t)===n?t===P||t.ownerDocument===B&&j(B,t)?-1:e===P||e.ownerDocument===B&&j(B,e)?1:A?tt(A,t)-tt(A,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],l=[e];if(!r||!o)return t===P?-1:e===P?1:r?-1:o?1:A?tt(A,t)-tt(A,e):0;if(r===o)return a(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?a(s[i],l[i]):s[i]===B?-1:l[i]===B?1:0},P):P},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==P&&R(t),n=n.replace(ct,"='$1']"),_.matchesSelector&&z&&!q[n+" "]&&(!I||!I.test(n))&&(!L||!L.test(n)))try{var i=H.call(t,n);if(i||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&R(t),j(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&R(t);var n=k.attrHandle[e.toLowerCase()],i=n&&G.call(k.attrHandle,e.toLowerCase())?n(t,e,!z):void 0;return void 0!==i?i:_.attributes||!z?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(xt,_t)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(D=!_.detectDuplicates,A=!_.sortStable&&t.slice(0),t.sort(X),D){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return A=null,t},C=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=C(e);return n},k=e.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=M(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=V[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&V(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(at," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,f,p,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(m){if(o){for(;g;){for(d=e;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(d=m,h=d[F]||(d[F]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),u=c[t]||[],f=u[0]===W&&u[1],b=f&&u[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===e){c[t]=[W,f,b];break}}else if(y&&(d=e,h=d[F]||(d[F]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),u=c[t]||[],f=u[0]===W&&u[1],b=f),b===!1)for(;(d=++f&&d&&d[g]||(b=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&(h=d[F]||(d[F]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),c[t]=[W,b]),d!==e)););return b-=r,b===i||b%i===0&&b/i>=0}}},PSEUDO:function(t,n){var r,o=k.pseudos[t]||k.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[F]?o(n):o.length>1?(r=[t,t,"",n],k.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),a=r.length;a--;)i=tt(t,r[a]),t[i]=!(e[i]=r[a])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=T(t.replace(st,"$1"));return r[F]?i(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(bt,wt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:i(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,wt).toLowerCase(),function(e){var n;do if(n=z?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){
for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!k.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[n<0?n+e:n]}),even:c(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},k.pseudos.nth=k.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})k.pseudos[x]=l(x);return d.prototype=k.filters=k.pseudos,k.setFilters=new d,M=e.tokenize=function(t,n){var i,r,o,a,s,l,u,c=U[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=k.preFilter;s;){i&&!(r=lt.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=ut.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(st," ")}),s=s.slice(i.length));for(a in k.filter)!(r=ft[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):U(t,l).slice(0)},T=e.compile=function(t,e){var n,i=[],r=[],o=q[t+" "];if(!o){for(e||(e=M(t)),n=e.length;n--;)o=b(e[n]),o[F]?i.push(o):r.push(o);o=q(t,w(r,i)),o.selector=t}return o},E=e.select=function(t,e,n,i){var r,o,a,s,l,u="function"==typeof t&&t,c=!i&&M(t=u.selector||t);if(n=n||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&_.getById&&9===e.nodeType&&z&&k.relative[o[1].type]){if(e=(k.find.ID(a.matches[0].replace(bt,wt),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=ft.needsContext.test(t)?0:o.length;r--&&(a=o[r],!k.relative[s=a.type]);)if((l=k.find[s])&&(i=l(a.matches[0].replace(bt,wt),yt.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&f(o),!t)return Q.apply(n,i),n;break}}return(u||T(t,c))(i,e,!z,n,!e||yt.test(t)&&h(e.parentNode)||e),n},_.sortStable=F.split("").sort(X).join("")===F,_.detectDuplicates=!!D,R(),_.sortDetached=r(function(t){return 1&t.compareDocumentPosition(P.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var i;if(!n)return t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);dt.find=vt,dt.expr=vt.selectors,dt.expr[":"]=dt.expr.pseudos,dt.uniqueSort=dt.unique=vt.uniqueSort,dt.text=vt.getText,dt.isXMLDoc=vt.isXML,dt.contains=vt.contains,dt.escapeSelector=vt.escape;var yt=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&dt(t).is(n))break;i.push(t)}return i},bt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},wt=dt.expr.match.needsContext,xt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,_t=/^.[^:#\[\.,]*$/;dt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?dt.find.matchesSelector(i,t)?[i]:[]:dt.find.matches(t,dt.grep(e,function(t){return 1===t.nodeType}))},dt.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(dt(t).filter(function(){for(e=0;e<i;e++)if(dt.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)dt.find(t,r[e],n);return i>1?dt.uniqueSort(n):n},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&wt.test(t)?dt(t):t||[],!1).length}});var kt,Ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,St=dt.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||kt,"string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Ct.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof dt?e[0]:e,dt.merge(this,dt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:J,!0)),xt.test(i[1])&&dt.isPlainObject(e))for(i in e)dt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return r=J.getElementById(i[2]),r&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):dt.isFunction(t)?void 0!==n.ready?n.ready(t):t(dt):dt.makeArray(t,this)};St.prototype=dt.fn,kt=dt(J);var Mt=/^(?:parents|prev(?:Until|All))/,Tt={children:!0,contents:!0,next:!0,prev:!0};dt.fn.extend({has:function(t){var e=dt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(dt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&dt(t);if(!wt.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&dt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?dt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?rt.call(dt(t),this[0]):rt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(dt.uniqueSort(dt.merge(this.get(),dt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),dt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return yt(t,"parentNode")},parentsUntil:function(t,e,n){return yt(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return yt(t,"nextSibling")},prevAll:function(t){return yt(t,"previousSibling")},nextUntil:function(t,e,n){return yt(t,"nextSibling",n)},prevUntil:function(t,e,n){return yt(t,"previousSibling",n)},siblings:function(t){return bt((t.parentNode||{}).firstChild,t)},children:function(t){return bt(t.firstChild)},contents:function(t){return t.contentDocument||dt.merge([],t.childNodes)}},function(t,e){dt.fn[t]=function(n,i){var r=dt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=dt.filter(i,r)),this.length>1&&(Tt[t]||dt.uniqueSort(r),Mt.test(t)&&r.reverse()),this.pushStack(r)}});var Et=/\S+/g;dt.Callbacks=function(t){t="string"==typeof t?a(t):dt.extend({},t);var e,n,i,r,o=[],s=[],l=-1,u=function(){for(r=t.once,i=e=!0;s.length;l=-1)for(n=s.shift();++l<o.length;)o[l].apply(n[0],n[1])===!1&&t.stopOnFalse&&(l=o.length,n=!1);t.memory||(n=!1),e=!1,r&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(l=o.length-1,s.push(n)),function i(e){dt.each(e,function(e,n){dt.isFunction(n)?t.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==dt.type(n)&&i(n)})}(arguments),n&&!e&&u()),this},remove:function(){return dt.each(arguments,function(t,e){for(var n;(n=dt.inArray(e,o,n))>-1;)o.splice(n,1),n<=l&&l--}),this},has:function(t){return t?dt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=s=[],n||e||(o=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},dt.extend({Deferred:function(e){var n=[["notify","progress",dt.Callbacks("memory"),dt.Callbacks("memory"),2],["resolve","done",dt.Callbacks("once memory"),dt.Callbacks("once memory"),0,"resolved"],["reject","fail",dt.Callbacks("once memory"),dt.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(t){return r.then(null,t)},pipe:function(){var t=arguments;return dt.Deferred(function(e){dt.each(n,function(n,i){var r=dt.isFunction(t[i[4]])&&t[i[4]];o[i[1]](function(){var t=r&&r.apply(this,arguments);t&&dt.isFunction(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,i,r){function o(e,n,i,r){return function(){var u=this,c=arguments,h=function(){var t,h;if(!(e<a)){if(t=i.apply(u,c),t===n.promise())throw new TypeError("Thenable self-resolution");h=t&&("object"==typeof t||"function"==typeof t)&&t.then,dt.isFunction(h)?r?h.call(t,o(a,n,s,r),o(a,n,l,r)):(a++,h.call(t,o(a,n,s,r),o(a,n,l,r),o(a,n,s,n.notifyWith))):(i!==s&&(u=void 0,c=[t]),(r||n.resolveWith)(u,c))}},d=r?h:function(){try{h()}catch(t){dt.Deferred.exceptionHook&&dt.Deferred.exceptionHook(t,d.stackTrace),e+1>=a&&(i!==l&&(u=void 0,c=[t]),n.rejectWith(u,c))}};e?d():(dt.Deferred.getStackHook&&(d.stackTrace=dt.Deferred.getStackHook()),t.setTimeout(d))}}var a=0;return dt.Deferred(function(t){n[0][3].add(o(0,t,dt.isFunction(r)?r:s,t.notifyWith)),n[1][3].add(o(0,t,dt.isFunction(e)?e:s)),n[2][3].add(o(0,t,dt.isFunction(i)?i:l))}).promise()},promise:function(t){return null!=t?dt.extend(t,r):r}},o={};return dt.each(n,function(t,e){var a=e[2],s=e[5];r[e[1]]=a.add,s&&a.add(function(){i=s},n[3-t][2].disable,n[0][2].lock),a.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=et.call(arguments),o=dt.Deferred(),a=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?et.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(u(t,o.done(a(n)).resolve,o.reject),"pending"===o.state()||dt.isFunction(r[n]&&r[n].then)))return o.then();for(;n--;)u(r[n],a(n),o.reject);return o.promise()}});var Ot=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;dt.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&Ot.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},dt.readyException=function(e){t.setTimeout(function(){throw e})};var At=dt.Deferred();dt.fn.ready=function(t){return At.then(t)["catch"](function(t){dt.readyException(t)}),this},dt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?dt.readyWait++:dt.ready(!0)},ready:function(t){(t===!0?--dt.readyWait:dt.isReady)||(dt.isReady=!0,t!==!0&&--dt.readyWait>0||At.resolveWith(J,[dt]))}}),dt.ready.then=At.then,"complete"===J.readyState||"loading"!==J.readyState&&!J.documentElement.doScroll?t.setTimeout(dt.ready):(J.addEventListener("DOMContentLoaded",c),t.addEventListener("load",c));var Dt=function(t,e,n,i,r,o,a){var s=0,l=t.length,u=null==n;if("object"===dt.type(n)){r=!0;for(s in n)Dt(t,e,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,dt.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(dt(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):o},Rt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};h.uid=1,h.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Rt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[dt.camelCase(e)]=n;else for(i in e)r[dt.camelCase(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][dt.camelCase(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){dt.isArray(e)?e=e.map(dt.camelCase):(e=dt.camelCase(e),e=e in i?[e]:e.match(Et)||[]),n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||dt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!dt.isEmptyObject(e)}};var Pt=new h,Nt=new h,zt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Lt=/[A-Z]/g;dt.extend({hasData:function(t){return Nt.hasData(t)||Pt.hasData(t)},data:function(t,e,n){return Nt.access(t,e,n)},removeData:function(t,e){Nt.remove(t,e)},_data:function(t,e,n){return Pt.access(t,e,n)},_removeData:function(t,e){Pt.remove(t,e)}}),dt.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=Nt.get(o),1===o.nodeType&&!Pt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=dt.camelCase(i.slice(5)),d(o,i,r[i])));Pt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Nt.set(this,t)}):Dt(this,function(e){var n;if(o&&void 0===e){if(n=Nt.get(o,t),void 0!==n)return n;if(n=d(o,t),void 0!==n)return n}else this.each(function(){Nt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Nt.remove(this,t)})}}),dt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Pt.get(t,e),n&&(!i||dt.isArray(n)?i=Pt.access(t,e,dt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=dt.queue(t,e),i=n.length,r=n.shift(),o=dt._queueHooks(t,e),a=function(){dt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Pt.get(t,n)||Pt.access(t,n,{empty:dt.Callbacks("once memory").add(function(){Pt.remove(t,[e+"queue",n])})})}}),dt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?dt.queue(this[0],t):void 0===e?this:this.each(function(){var n=dt.queue(this,t,e);dt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&dt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){dt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=dt.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=Pt.get(o[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var It=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ht=new RegExp("^(?:([+-])=|)("+It+")([a-z%]*)$","i"),jt=["Top","Right","Bottom","Left"],Ft=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&dt.contains(t.ownerDocument,t)&&"none"===dt.css(t,"display")},Bt=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=a[o];return r},Wt={};dt.fn.extend({show:function(){return g(this,!0)},hide:function(){return g(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ft(this)?dt(this).show():dt(this).hide()})}});var Yt=/^(?:checkbox|radio)$/i,Vt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ut=/^$|\/(?:java|ecma)script/i,qt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qt.optgroup=qt.option,qt.tbody=qt.tfoot=qt.colgroup=qt.caption=qt.thead,qt.th=qt.td;var Xt=/<|&#?\w+;/;!function(){var t=J.createDocumentFragment(),e=t.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),ct.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",ct.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Gt=J.documentElement,$t=/^key/,Kt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Zt=/^([^.]*)(?:\.(.+)|)/;dt.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,f,p,g,m=Pt.get(t);if(m)for(n.handler&&(o=n,n=o.handler,r=o.selector),r&&dt.find.matchesSelector(Gt,r),n.guid||(n.guid=dt.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(e){return"undefined"!=typeof dt&&dt.event.triggered!==e.type?dt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Et)||[""],u=e.length;u--;)s=Zt.exec(e[u])||[],f=g=s[1],p=(s[2]||"").split(".").sort(),f&&(h=dt.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=dt.event.special[f]||{},c=dt.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&dt.expr.match.needsContext.test(r),namespace:p.join(".")},o),(d=l[f])||(d=l[f]=[],d.delegateCount=0,h.setup&&h.setup.call(t,i,p,a)!==!1||t.addEventListener&&t.addEventListener(f,a)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),dt.event.global[f]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,f,p,g,m=Pt.hasData(t)&&Pt.get(t);if(m&&(l=m.events)){for(e=(e||"").match(Et)||[""],u=e.length;u--;)if(s=Zt.exec(e[u])||[],f=g=s[1],p=(s[2]||"").split(".").sort(),f){for(h=dt.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,d=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!r&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));a&&!d.length&&(h.teardown&&h.teardown.call(t,p,m.handle)!==!1||dt.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)dt.event.remove(t,f+e[u],n,i,!0);dt.isEmptyObject(l)&&Pt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=dt.event.fix(t),l=new Array(arguments.length),u=(Pt.get(this,"events")||{})[s.type]||[],c=dt.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,s)!==!1){for(a=dt.event.handlers.call(this,s,u),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,i=((dt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l),void 0!==i&&(s.result=i)===!1&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(i=[],n=0;n<s;n++)o=e[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?dt(r,this).index(l)>-1:dt.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&a.push({elem:l,handlers:i})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},addProp:function(t,e){Object.defineProperty(dt.Event.prototype,t,{enumerable:!0,configurable:!0,get:dt.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[dt.expando]?t:new dt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==x()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===x()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&dt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return dt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},dt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},dt.Event=function(t,e){return this instanceof dt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?b:w,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&dt.extend(this,e),this.timeStamp=t&&t.timeStamp||dt.now(),void(this[dt.expando]=!0)):new dt.Event(t,e)},dt.Event.prototype={constructor:dt.Event,isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=b,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=b,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=b,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},dt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&$t.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Kt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},dt.event.addProp),dt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){dt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===i||dt.contains(i,r))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),dt.fn.extend({on:function(t,e,n,i){return _(this,t,e,n,i)},one:function(t,e,n,i){return _(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,dt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return e!==!1&&"function"!=typeof e||(n=e,e=void 0),n===!1&&(n=w),this.each(function(){dt.event.remove(this,t,n,e)})}});var Qt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Jt=/<script|<style|<link/i,te=/checked\s*(?:[^=]|=\s*.checked.)/i,ee=/^true\/(.*)/,ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;dt.extend({htmlPrefilter:function(t){return t.replace(Qt,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),l=dt.contains(t.ownerDocument,t);if(!(ct.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||dt.isXMLDoc(t)))for(a=m(s),o=m(t),i=0,r=o.length;i<r;i++)T(o[i],a[i]);if(e)if(n)for(o=o||m(t),a=a||m(s),i=0,r=o.length;i<r;i++)M(o[i],a[i]);else M(t,s);return a=m(s,"script"),a.length>0&&v(a,!l&&m(t,"script")),s},cleanData:function(t){for(var e,n,i,r=dt.event.special,o=0;void 0!==(n=t[o]);o++)if(Rt(n)){if(e=n[Pt.expando]){if(e.events)for(i in e.events)r[i]?dt.event.remove(n,i):dt.removeEvent(n,i,e.handle);n[Pt.expando]=void 0}n[Nt.expando]&&(n[Nt.expando]=void 0)}}}),dt.fn.extend({detach:function(t){return O(this,t,!0)},remove:function(t){return O(this,t)},text:function(t){return Dt(this,function(t){return void 0===t?dt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return E(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=k(this,t);e.appendChild(t)}})},prepend:function(){return E(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=k(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return E(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return E(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(dt.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return dt.clone(this,t,e)})},html:function(t){return Dt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Jt.test(t)&&!qt[(Vt.exec(t)||["",""])[1].toLowerCase()]){t=dt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(dt.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return E(this,arguments,function(e){var n=this.parentNode;dt.inArray(this,t)<0&&(dt.cleanData(m(this)),n&&n.replaceChild(e,this))},t)}}),dt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){dt.fn[t]=function(t){for(var n,i=[],r=dt(t),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),dt(r[a])[e](n),it.apply(i,n.get());return this.pushStack(i)}});var ie=/^margin/,re=new RegExp("^("+It+")(?!px)[a-z%]+$","i"),oe=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)};!function(){function e(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Gt.appendChild(a);var e=t.getComputedStyle(s);n="1%"!==e.top,o="2px"===e.marginLeft,i="4px"===e.width,s.style.marginRight="50%",r="4px"===e.marginRight,Gt.removeChild(a),s=null}}var n,i,r,o,a=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",ct.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),dt.extend(ct,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),r},reliableMarginLeft:function(){return e(),o}}))}();var ae=/^(none|table(?!-c[ea]).+)/,se={position:"absolute",visibility:"hidden",display:"block"},le={letterSpacing:"0",fontWeight:"400"},ue=["Webkit","Moz","ms"],ce=J.createElement("div").style;dt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=A(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=dt.camelCase(e),l=t.style;return e=dt.cssProps[s]||(dt.cssProps[s]=R(s)||s),a=dt.cssHooks[e]||dt.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:l[e]:(o=typeof n,"string"===o&&(r=Ht.exec(n))&&r[1]&&(n=f(t,e,r),o="number"),null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(dt.cssNumber[s]?"":"px")),ct.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l[e]=n)),void 0)}},css:function(t,e,n,i){var r,o,a,s=dt.camelCase(e);return e=dt.cssProps[s]||(dt.cssProps[s]=R(s)||s),a=dt.cssHooks[e]||dt.cssHooks[s],a&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=A(t,e,i)),"normal"===r&&e in le&&(r=le[e]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),dt.each(["height","width"],function(t,e){dt.cssHooks[e]={get:function(t,n,i){if(n)return!ae.test(dt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?z(t,e,i):Bt(t,se,function(){return z(t,e,i)})},set:function(t,n,i){var r,o=i&&oe(t),a=i&&N(t,e,i,"border-box"===dt.css(t,"boxSizing",!1,o),o);return a&&(r=Ht.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=dt.css(t,e)),P(t,n,a)}}}),dt.cssHooks.marginLeft=D(ct.reliableMarginLeft,function(t,e){if(e)return(parseFloat(A(t,"marginLeft"))||t.getBoundingClientRect().left-Bt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),dt.each({margin:"",padding:"",border:"Width"},function(t,e){dt.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+jt[i]+e]=o[i]||o[i-2]||o[0];return r}},ie.test(t)||(dt.cssHooks[t+e].set=P)}),dt.fn.extend({css:function(t,e){return Dt(this,function(t,e,n){var i,r,o={},a=0;if(dt.isArray(e)){for(i=oe(t),r=e.length;a<r;a++)o[e[a]]=dt.css(t,e[a],!1,i);return o}return void 0!==n?dt.style(t,e,n):dt.css(t,e)},t,e,arguments.length>1)}}),dt.Tween=L,L.prototype={constructor:L,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||dt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(dt.cssNumber[n]?"":"px")},cur:function(){var t=L.propHooks[this.prop];return t&&t.get?t.get(this):L.propHooks._default.get(this)},run:function(t){var e,n=L.propHooks[this.prop];return this.options.duration?this.pos=e=dt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=dt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){dt.fx.step[t.prop]?dt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[dt.cssProps[t.prop]]&&!dt.cssHooks[t.prop]?t.elem[t.prop]=t.now:dt.style(t.elem,t.prop,t.now+t.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},dt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},dt.fx=L.prototype.init,dt.fx.step={};var he,de,fe=/^(?:toggle|show|hide)$/,pe=/queueHooks$/;dt.Animation=dt.extend(Y,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return f(n.elem,t,Ht.exec(e),n),n}]},tweener:function(t,e){dt.isFunction(t)?(e=t,t=["*"]):t=t.match(Et);for(var n,i=0,r=t.length;i<r;i++)n=t[i],Y.tweeners[n]=Y.tweeners[n]||[],Y.tweeners[n].unshift(e)},prefilters:[B],prefilter:function(t,e){e?Y.prefilters.unshift(t):Y.prefilters.push(t)}}),dt.speed=function(t,e,n){var i=t&&"object"==typeof t?dt.extend({},t):{complete:n||!n&&e||dt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!dt.isFunction(e)&&e};return dt.fx.off||J.hidden?i.duration=0:i.duration="number"==typeof i.duration?i.duration:i.duration in dt.fx.speeds?dt.fx.speeds[i.duration]:dt.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){dt.isFunction(i.old)&&i.old.call(this),i.queue&&dt.dequeue(this,i.queue)},i},dt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ft).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=dt.isEmptyObject(t),o=dt.speed(e,n,i),a=function(){var e=Y(this,dt.extend({},t),o);(r||Pt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=dt.timers,a=Pt.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&pe.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||dt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=Pt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=dt.timers,a=i?i.length:0;for(n.finish=!0,dt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),
o.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),dt.each(["toggle","show","hide"],function(t,e){var n=dt.fn[e];dt.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(j(e,!0),t,i,r)}}),dt.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){dt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),dt.timers=[],dt.fx.tick=function(){var t,e=0,n=dt.timers;for(he=dt.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||dt.fx.stop(),he=void 0},dt.fx.timer=function(t){dt.timers.push(t),t()?dt.fx.start():dt.timers.pop()},dt.fx.interval=13,dt.fx.start=function(){de||(de=t.requestAnimationFrame?t.requestAnimationFrame(I):t.setInterval(dt.fx.tick,dt.fx.interval))},dt.fx.stop=function(){t.cancelAnimationFrame?t.cancelAnimationFrame(de):t.clearInterval(de),de=null},dt.fx.speeds={slow:600,fast:200,_default:400},dt.fn.delay=function(e,n){return e=dt.fx?dt.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},function(){var t=J.createElement("input"),e=J.createElement("select"),n=e.appendChild(J.createElement("option"));t.type="checkbox",ct.checkOn=""!==t.value,ct.optSelected=n.selected,t=J.createElement("input"),t.value="t",t.type="radio",ct.radioValue="t"===t.value}();var ge,me=dt.expr.attrHandle;dt.fn.extend({attr:function(t,e){return Dt(this,dt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){dt.removeAttr(this,t)})}}),dt.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?dt.prop(t,e,n):(1===o&&dt.isXMLDoc(t)||(r=dt.attrHooks[e.toLowerCase()]||(dt.expr.match.bool.test(e)?ge:void 0)),void 0!==n?null===n?void dt.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=dt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!ct.radioValue&&"radio"===e&&dt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(Et);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),ge={set:function(t,e,n){return e===!1?dt.removeAttr(t,n):t.setAttribute(n,n),n}},dt.each(dt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=me[e]||dt.find.attr;me[e]=function(t,e,i){var r,o,a=e.toLowerCase();return i||(o=me[a],me[a]=r,r=null!=n(t,e,i)?a:null,me[a]=o),r}});var ve=/^(?:input|select|textarea|button)$/i,ye=/^(?:a|area)$/i;dt.fn.extend({prop:function(t,e){return Dt(this,dt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[dt.propFix[t]||t]})}}),dt.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&dt.isXMLDoc(t)||(e=dt.propFix[e]||e,r=dt.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=dt.find.attr(t,"tabindex");return e?parseInt(e,10):ve.test(t.nodeName)||ye.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ct.optSelected||(dt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),dt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){dt.propFix[this.toLowerCase()]=this});var be=/[\t\r\n\f]/g;dt.fn.extend({addClass:function(t){var e,n,i,r,o,a,s,l=0;if(dt.isFunction(t))return this.each(function(e){dt(this).addClass(t.call(this,e,V(this)))});if("string"==typeof t&&t)for(e=t.match(Et)||[];n=this[l++];)if(r=V(n),i=1===n.nodeType&&(" "+r+" ").replace(be," ")){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=dt.trim(i),r!==s&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,o,a,s,l=0;if(dt.isFunction(t))return this.each(function(e){dt(this).removeClass(t.call(this,e,V(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Et)||[];n=this[l++];)if(r=V(n),i=1===n.nodeType&&(" "+r+" ").replace(be," ")){for(a=0;o=e[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=dt.trim(i),r!==s&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):dt.isFunction(t)?this.each(function(n){dt(this).toggleClass(t.call(this,n,V(this),e),e)}):this.each(function(){var e,i,r,o;if("string"===n)for(i=0,r=dt(this),o=t.match(Et)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||(e=V(this),e&&Pt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Pt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+V(n)+" ").replace(be," ").indexOf(e)>-1)return!0;return!1}});var we=/\r/g,xe=/[\x20\t\r\n\f]+/g;dt.fn.extend({val:function(t){var e,n,i,r=this[0];{if(arguments.length)return i=dt.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,dt(this).val()):t,null==r?r="":"number"==typeof r?r+="":dt.isArray(r)&&(r=dt.map(r,function(t){return null==t?"":t+""})),e=dt.valHooks[this.type]||dt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=dt.valHooks[r.type]||dt.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(we,""):null==n?"":n)}}}),dt.extend({valHooks:{option:{get:function(t){var e=dt.find.attr(t,"value");return null!=e?e:dt.trim(dt.text(t)).replace(xe," ")}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type,a=o?null:[],s=o?r+1:i.length,l=r<0?s:o?r:0;l<s;l++)if(n=i[l],(n.selected||l===r)&&!n.disabled&&(!n.parentNode.disabled||!dt.nodeName(n.parentNode,"optgroup"))){if(e=dt(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=dt.makeArray(e),a=r.length;a--;)i=r[a],(i.selected=dt.inArray(dt.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),dt.each(["radio","checkbox"],function(){dt.valHooks[this]={set:function(t,e){if(dt.isArray(e))return t.checked=dt.inArray(dt(t).val(),e)>-1}},ct.checkOn||(dt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var _e=/^(?:focusinfocus|focusoutblur)$/;dt.extend(dt.event,{trigger:function(e,n,i,r){var o,a,s,l,u,c,h,d=[i||J],f=st.call(e,"type")?e.type:e,p=st.call(e,"namespace")?e.namespace.split("."):[];if(a=s=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!_e.test(f+dt.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),u=f.indexOf(":")<0&&"on"+f,e=e[dt.expando]?e:new dt.Event(f,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:dt.makeArray(n,[e]),h=dt.event.special[f]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!dt.isWindow(i)){for(l=h.delegateType||f,_e.test(l+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(i.ownerDocument||J)&&d.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=d[o++])&&!e.isPropagationStopped();)e.type=o>1?l:h.bindType||f,c=(Pt.get(a,"events")||{})[e.type]&&Pt.get(a,"handle"),c&&c.apply(a,n),c=u&&a[u],c&&c.apply&&Rt(a)&&(e.result=c.apply(a,n),e.result===!1&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!Rt(i)||u&&dt.isFunction(i[f])&&!dt.isWindow(i)&&(s=i[u],s&&(i[u]=null),dt.event.triggered=f,i[f](),dt.event.triggered=void 0,s&&(i[u]=s)),e.result}},simulate:function(t,e,n){var i=dt.extend(new dt.Event,n,{type:t,isSimulated:!0});dt.event.trigger(i,null,e)}}),dt.fn.extend({trigger:function(t,e){return this.each(function(){dt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return dt.event.trigger(t,e,n,!0)}}),dt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){dt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),dt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),ct.focusin="onfocusin"in t,ct.focusin||dt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){dt.event.simulate(e,t.target,dt.event.fix(t))};dt.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=Pt.access(i,e);r||i.addEventListener(t,n,!0),Pt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Pt.access(i,e)-1;r?Pt.access(i,e,r):(i.removeEventListener(t,n,!0),Pt.remove(i,e))}}});var ke=t.location,Ce=dt.now(),Se=/\?/;dt.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(i){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||dt.error("Invalid XML: "+e),n};var Me=/\[\]$/,Te=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;dt.param=function(t,e){var n,i=[],r=function(t,e){var n=dt.isFunction(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(dt.isArray(t)||t.jquery&&!dt.isPlainObject(t))dt.each(t,function(){r(this.name,this.value)});else for(n in t)U(n,t[n],e,r);return i.join("&")},dt.fn.extend({serialize:function(){return dt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=dt.prop(this,"elements");return t?dt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!dt(this).is(":disabled")&&Oe.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!Yt.test(t))}).map(function(t,e){var n=dt(this).val();return null==n?null:dt.isArray(n)?dt.map(n,function(t){return{name:e.name,value:t.replace(Te,"\r\n")}}):{name:e.name,value:n.replace(Te,"\r\n")}}).get()}});var Ae=/%20/g,De=/#.*$/,Re=/([?&])_=[^&]*/,Pe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ne=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ze=/^(?:GET|HEAD)$/,Le=/^\/\//,Ie={},He={},je="*/".concat("*"),Fe=J.createElement("a");Fe.href=ke.href,dt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ke.href,type:"GET",isLocal:Ne.test(ke.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":dt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?G(G(t,dt.ajaxSettings),e):G(dt.ajaxSettings,t)},ajaxPrefilter:q(Ie),ajaxTransport:q(He),ajax:function(e,n){function i(e,n,i,s){var u,d,f,w,x,_=n;c||(c=!0,l&&t.clearTimeout(l),r=void 0,a=s||"",k.readyState=e>0?4:0,u=e>=200&&e<300||304===e,i&&(w=$(p,k,i)),w=K(p,w,k,u),u?(p.ifModified&&(x=k.getResponseHeader("Last-Modified"),x&&(dt.lastModified[o]=x),x=k.getResponseHeader("etag"),x&&(dt.etag[o]=x)),204===e||"HEAD"===p.type?_="nocontent":304===e?_="notmodified":(_=w.state,d=w.data,f=w.error,u=!f)):(f=_,!e&&_||(_="error",e<0&&(e=0))),k.status=e,k.statusText=(n||_)+"",u?v.resolveWith(g,[d,_,k]):v.rejectWith(g,[k,_,f]),k.statusCode(b),b=void 0,h&&m.trigger(u?"ajaxSuccess":"ajaxError",[k,p,u?d:f]),y.fireWith(g,[k,_]),h&&(m.trigger("ajaxComplete",[k,p]),--dt.active||dt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,o,a,s,l,u,c,h,d,f,p=dt.ajaxSetup({},n),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?dt(g):dt.event,v=dt.Deferred(),y=dt.Callbacks("once memory"),b=p.statusCode||{},w={},x={},_="canceled",k={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Pe.exec(a);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(t,e){return null==c&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)k.always(t[k.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||_;return r&&r.abort(e),i(0,e),this}};if(v.promise(k),p.url=((e||p.url||ke.href)+"").replace(Le,ke.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Et)||[""],null==p.crossDomain){u=J.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=Fe.protocol+"//"+Fe.host!=u.protocol+"//"+u.host}catch(C){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=dt.param(p.data,p.traditional)),X(Ie,p,n,k),c)return k;h=dt.event&&p.global,h&&0===dt.active++&&dt.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!ze.test(p.type),o=p.url.replace(De,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ae,"+")):(f=p.url.slice(o.length),p.data&&(o+=(Se.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(o=o.replace(Re,""),f=(Se.test(o)?"&":"?")+"_="+Ce++ +f),p.url=o+f),p.ifModified&&(dt.lastModified[o]&&k.setRequestHeader("If-Modified-Since",dt.lastModified[o]),dt.etag[o]&&k.setRequestHeader("If-None-Match",dt.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&k.setRequestHeader("Content-Type",p.contentType),k.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+je+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)k.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(g,k,p)===!1||c))return k.abort();if(_="abort",y.add(p.complete),k.done(p.success),k.fail(p.error),r=X(He,p,n,k)){if(k.readyState=1,h&&m.trigger("ajaxSend",[k,p]),c)return k;p.async&&p.timeout>0&&(l=t.setTimeout(function(){k.abort("timeout")},p.timeout));try{c=!1,r.send(w,i)}catch(C){if(c)throw C;i(-1,C)}}else i(-1,"No Transport");return k},getJSON:function(t,e,n){return dt.get(t,e,n,"json")},getScript:function(t,e){return dt.get(t,void 0,e,"script")}}),dt.each(["get","post"],function(t,e){dt[e]=function(t,n,i,r){return dt.isFunction(n)&&(r=r||i,i=n,n=void 0),dt.ajax(dt.extend({url:t,type:e,dataType:r,data:n,success:i},dt.isPlainObject(t)&&t))}}),dt._evalUrl=function(t){return dt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},dt.fn.extend({wrapAll:function(t){var e;return this[0]&&(dt.isFunction(t)&&(t=t.call(this[0])),e=dt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return dt.isFunction(t)?this.each(function(e){dt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=dt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=dt.isFunction(t);return this.each(function(n){dt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){dt(this).replaceWith(this.childNodes)}),this}}),dt.expr.pseudos.hidden=function(t){return!dt.expr.pseudos.visible(t)},dt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},dt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Be={0:200,1223:204},We=dt.ajaxSettings.xhr();ct.cors=!!We&&"withCredentials"in We,ct.ajax=We=!!We,dt.ajaxTransport(function(e){var n,i;if(ct.cors||We&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);n=function(t){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Be[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}}),dt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),dt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return dt.globalEval(t),t}}}),dt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),dt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=dt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),J.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ye=[],Ve=/(=)\?(?=&|$)|\?\?/;dt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||dt.expando+"_"+Ce++;return this[t]=!0,t}}),dt.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,a,s=e.jsonp!==!1&&(Ve.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ve.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=dt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ve,"$1"+r):e.jsonp!==!1&&(e.url+=(Se.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||dt.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},i.always(function(){void 0===o?dt(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,Ye.push(r)),a&&dt.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),ct.createHTMLDocument=function(){var t=J.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),dt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,r,o;return e||(ct.createHTMLDocument?(e=J.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=J.location.href,e.head.appendChild(i)):e=J),r=xt.exec(t),o=!n&&[],r?[e.createElement(r[1])]:(r=y([t],e,o),o&&o.length&&dt(o).remove(),dt.merge([],r.childNodes))},dt.fn.load=function(t,e,n){var i,r,o,a=this,s=t.indexOf(" ");return s>-1&&(i=dt.trim(t.slice(s)),t=t.slice(0,s)),dt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&dt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?dt("<div>").append(dt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},dt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){dt.fn[e]=function(t){return this.on(e,t)}}),dt.expr.pseudos.animated=function(t){return dt.grep(dt.timers,function(e){return t===e.elem}).length},dt.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,u,c=dt.css(t,"position"),h=dt(t),d={};"static"===c&&(t.style.position="relative"),s=h.offset(),o=dt.css(t,"top"),l=dt.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(i=h.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),dt.isFunction(e)&&(e=e.call(t,n,dt.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):h.css(d)}},dt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){dt.offset.setOffset(this,t,e)});var e,n,i,r,o=this[0];if(o)return o.getClientRects().length?(i=o.getBoundingClientRect(),i.width||i.height?(r=o.ownerDocument,n=Z(r),e=r.documentElement,{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):{top:0,left:0}},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===dt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),dt.nodeName(t[0],"html")||(i=t.offset()),i={top:i.top+dt.css(t[0],"borderTopWidth",!0),left:i.left+dt.css(t[0],"borderLeftWidth",!0)}),{top:e.top-i.top-dt.css(n,"marginTop",!0),left:e.left-i.left-dt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===dt.css(t,"position");)t=t.offsetParent;return t||Gt})}}),dt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;dt.fn[t]=function(i){return Dt(this,function(t,i,r){var o=Z(t);return void 0===r?o?o[e]:t[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r)},t,i,arguments.length)}}),dt.each(["top","left"],function(t,e){dt.cssHooks[e]=D(ct.pixelPosition,function(t,n){if(n)return n=A(t,e),re.test(n)?dt(t).position()[e]+"px":n})}),dt.each({Height:"height",Width:"width"},function(t,e){dt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){dt.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||o===!0?"margin":"border");return Dt(this,function(e,n,r){var o;return dt.isWindow(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?dt.css(e,n,s):dt.style(e,n,r,s)},e,a?r:void 0,a)}})}),dt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),dt.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return dt});var Ue=t.jQuery,qe=t.$;return dt.noConflict=function(e){return t.$===dt&&(t.$=qe),e&&t.jQuery===dt&&(t.jQuery=Ue),dt},e||(t.jQuery=t.$=dt),dt}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}function n(t){for(var e,n;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=r(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function r(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",n,function(){t(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&t(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&t(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",n,o)}function o(){t.datepicker._isDisabledDatepicker(m.inline?m.dpDiv.parent()[0]:m.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&t(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&t(this).addClass("ui-datepicker-next-hover"))}function a(e,n){t.extend(e,n);for(var i in n)null==n[i]&&(e[i]=n[i]);return e}function s(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.ui=t.ui||{};var l=(t.ui.version="1.12.1",0),u=Array.prototype.slice;t.cleanData=function(e){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=t._data(r,"events"),i&&i.remove&&t(r).triggerHandler("remove")}catch(a){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var r,o,a,s={},l=e.split(".")[0];e=e.split(".")[1];var u=l+"-"+e;return i||(i=n,n=t.Widget),t.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i))),t.expr[":"][u.toLowerCase()]=function(e){return!!t.data(e,u)},t[l]=t[l]||{},r=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),a=new n,a.options=t.widget.extend({},a.options),t.each(i,function(e,i){return t.isFunction(i)?void(s[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function r(t){return n.prototype[e].apply(this,t)}return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=o,e}}()):void(s[e]=i)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||e:e},s,{constructor:o,namespace:l,widgetName:e,widgetFullName:u}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var n,i,r=u.call(arguments,1),o=0,a=r.length;o<a;o++)for(n in r[o])i=r[o][n],r[o].hasOwnProperty(n)&&void 0!==i&&(t.isPlainObject(i)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],i):t.widget.extend({},i):e[n]=i);return e},t.widget.bridge=function(e,n){var i=n.prototype.widgetFullName||e;t.fn[e]=function(r){var o="string"==typeof r,a=u.call(arguments,1),s=this;return o?this.length||"instance"!==r?this.each(function(){var n,o=t.data(this,i);return"instance"===r?(s=o,!1):o?t.isFunction(o[r])&&"_"!==r.charAt(0)?(n=o[r].apply(o,a),n!==o&&void 0!==n?(s=n&&n.jquery?s.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+r+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")}):s=void 0:(a.length&&(r=t.widget.extend.apply(null,[r].concat(a))),this.each(function(){var e=t.data(this,i);e?(e.option(r||{}),e._init&&e._init()):t.data(this,i,new n(r,this))})),s}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,n){e._removeClass(n,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,r,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},i=e.split("."),e=i.shift(),i.length){for(r=a[e]=t.widget.extend({},this.options[e]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,i,r;for(n in e)r=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&r&&r.length&&(i=t(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function n(n,o){var a,s;for(s=0;s<n.length;s++)a=r.classesElementLookup[n[s]]||t(),a=t(e.add?t.unique(a.get().concat(e.element.get())):a.not(e.element).get()),r.classesElementLookup[n[s]]=a,i.push(n[s]),o&&e.classes[n[s]]&&i.push(e.classes[n[s]])}var i=[],r=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&n(e.keys.match(/\S+/g)||[],!0),e.extra&&n(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,function(i,r){t.inArray(e.target,r)!==-1&&(n.classesElementLookup[i]=t(r.not(e.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){
return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof t||null===t,o={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(e,n,i){var r,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,a){function s(){if(e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?r.on(u,c,s):n.on(u,s)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var r,o,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}});t.widget;!function(){function e(t,e,n){return[parseFloat(t[0])*(h.test(t[0])?e/100:1),parseFloat(t[1])*(h.test(t[1])?n/100:1)]}function n(e,n){return parseInt(t.css(e,n),10)||0}function i(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var r,o=Math.max,a=Math.abs,s=/left|center|right/,l=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,h=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==r)return r;var e,n,i=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return t("body").append(i),e=o.offsetWidth,i.css("overflow","scroll"),n=o.offsetWidth,e===n&&(n=i[0].clientWidth),i.remove(),r=e-n},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,o="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType,o=!i&&!r;return{element:n,isWindow:i,isDocument:r,offset:o?t(e).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},t.fn.position=function(r){if(!r||!r.of)return d.apply(this,arguments);r=t.extend({},r);var h,f,p,g,m,v,y=t(r.of),b=t.position.getWithinInfo(r.within),w=t.position.getScrollInfo(b),x=(r.collision||"flip").split(" "),_={};return v=i(y),y[0].preventDefault&&(r.at="left top"),f=v.width,p=v.height,g=v.offset,m=t.extend({},g),t.each(["my","at"],function(){var t,e,n=(r[this]||"").split(" ");1===n.length&&(n=s.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=s.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",t=u.exec(n[0]),e=u.exec(n[1]),_[this]=[t?t[0]:0,e?e[0]:0],r[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===r.at[0]?m.left+=f:"center"===r.at[0]&&(m.left+=f/2),"bottom"===r.at[1]?m.top+=p:"center"===r.at[1]&&(m.top+=p/2),h=e(_.at,f,p),m.left+=h[0],m.top+=h[1],this.each(function(){var i,s,l=t(this),u=l.outerWidth(),c=l.outerHeight(),d=n(this,"marginLeft"),v=n(this,"marginTop"),k=u+d+n(this,"marginRight")+w.width,C=c+v+n(this,"marginBottom")+w.height,S=t.extend({},m),M=e(_.my,l.outerWidth(),l.outerHeight());"right"===r.my[0]?S.left-=u:"center"===r.my[0]&&(S.left-=u/2),"bottom"===r.my[1]?S.top-=c:"center"===r.my[1]&&(S.top-=c/2),S.left+=M[0],S.top+=M[1],i={marginLeft:d,marginTop:v},t.each(["left","top"],function(e,n){t.ui.position[x[e]]&&t.ui.position[x[e]][n](S,{targetWidth:f,targetHeight:p,elemWidth:u,elemHeight:c,collisionPosition:i,collisionWidth:k,collisionHeight:C,offset:[h[0]+M[0],h[1]+M[1]],my:r.my,at:r.at,within:b,elem:l})}),r.using&&(s=function(t){var e=g.left-S.left,n=e+f-u,i=g.top-S.top,s=i+p-c,h={target:{element:y,left:g.left,top:g.top,width:f,height:p},element:{element:l,left:S.left,top:S.top,width:u,height:c},horizontal:n<0?"left":e>0?"right":"center",vertical:s<0?"top":i>0?"bottom":"middle"};f<u&&a(e+n)<f&&(h.horizontal="center"),p<c&&a(i+s)<p&&(h.vertical="middle"),o(a(e),a(n))>o(a(i),a(s))?h.important="horizontal":h.important="vertical",r.using.call(this,t,h)}),l.offset(t.extend(S,{using:s}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,s=t.left-e.collisionPosition.marginLeft,l=r-s,u=s+e.collisionWidth-a-r;e.collisionWidth>a?l>0&&u<=0?(n=t.left+l+e.collisionWidth-a-r,t.left+=l-n):u>0&&l<=0?t.left=r:l>u?t.left=r+a-e.collisionWidth:t.left=r:l>0?t.left+=l:u>0?t.left-=u:t.left=o(t.left-s,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,a=e.within.height,s=t.top-e.collisionPosition.marginTop,l=r-s,u=s+e.collisionHeight-a-r;e.collisionHeight>a?l>0&&u<=0?(n=t.top+l+e.collisionHeight-a-r,t.top+=l-n):u>0&&l<=0?t.top=r:l>u?t.top=r+a-e.collisionHeight:t.top=r:l>0?t.top+=l:u>0?t.top-=u:t.top=o(t.top-s,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=t.left-e.collisionPosition.marginLeft,c=u-l,h=u+e.collisionWidth-s-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];c<0?(n=t.left+d+f+p+e.collisionWidth-s-o,(n<0||n<a(c))&&(t.left+=d+f+p)):h>0&&(i=t.left-e.collisionPosition.marginLeft+d+f+p-l,(i>0||a(i)<h)&&(t.left+=d+f+p))},top:function(t,e){var n,i,r=e.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=t.top-e.collisionPosition.marginTop,c=u-l,h=u+e.collisionHeight-s-l,d="top"===e.my[1],f=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];c<0?(i=t.top+f+p+g+e.collisionHeight-s-o,(i<0||i<a(c))&&(t.top+=f+p+g)):h>0&&(n=t.top-e.collisionPosition.marginTop+f+p+g-l,(n>0||a(n)<h)&&(t.top+=f+p+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}();var c=(t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),"ui-effects-"),h="ui-effects-style",d="ui-effects-animated",f=t;t.effects={effect:{}},function(t,e){function n(t,e,n){var i=h[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:0>t?0:i.max<t?i.max:t)}function i(e){var n=u(),i=n._rgba=[];return e=e.toLowerCase(),p(l,function(t,r){var o,a=r.re.exec(e),s=a&&r.parse(a),l=r.space||"rgba";if(s)return o=n[l](s),n[c[l].cache]=o[c[l].cache],i=n._rgba=o._rgba,!1}),i.length?("0,0,0,0"===i.join()&&t.extend(i,o.transparent),n):o[e]}function r(t,e,n){return n=(n+1)%1,6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],u=t.Color=function(e,n,i,r){return new t.Color.fn.parse(e,n,i,r)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=u.support={},f=t("<p>")[0],p=t.each;f.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),u.fn=t.extend(u.prototype,{parse:function(r,a,s,l){if(r===e)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=t(r).css(a),a=e);var h=this,d=t.type(r),f=this._rgba=[];return a!==e&&(r=[r,a,s,l],d="array"),"string"===d?this.parse(i(r)||o._default):"array"===d?(p(c.rgba.props,function(t,e){f[e.idx]=n(r[e.idx],e)}),this):"object"===d?(r instanceof u?p(c,function(t,e){r[e.cache]&&(h[e.cache]=r[e.cache].slice())}):p(c,function(e,i){var o=i.cache;p(i.props,function(t,e){if(!h[o]&&i.to){if("alpha"===t||null==r[t])return;h[o]=i.to(h._rgba)}h[o][e.idx]=n(r[t],e,!0)}),h[o]&&t.inArray(null,h[o].slice(0,3))<0&&(h[o][3]=1,i.from&&(h._rgba=i.from(h[o])))}),this):void 0},is:function(t){var e=u(t),n=!0,i=this;return p(c,function(t,r){var o,a=e[r.cache];return a&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],p(r.props,function(t,e){if(null!=a[e.idx])return n=a[e.idx]===o[e.idx]})),n}),n},_space:function(){var t=[],e=this;return p(c,function(n,i){e[i.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var i=u(t),r=i._space(),o=c[r],a=0===this.alpha()?u("transparent"):this,s=a[o.cache]||o.to(a._rgba),l=s.slice();return i=i[o.cache],p(o.props,function(t,r){var o=r.idx,a=s[o],u=i[o],c=h[r.type]||{};null!==u&&(null===a?l[o]=u:(c.mod&&(u-a>c.mod/2?a+=c.mod:a-u>c.mod/2&&(a-=c.mod)),l[o]=n((u-a)*e+a,r)))}),this[r](l)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=u(e)._rgba;return u(t.map(n,function(t,e){return(1-i)*r[e]+i*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,a=t[3],s=Math.max(i,r,o),l=Math.min(i,r,o),u=s-l,c=s+l,h=.5*c;return e=l===s?0:i===s?60*(r-o)/u+360:r===s?60*(o-i)/u+120:60*(i-r)/u+240,n=0===u?0:h<=.5?u/c:u/(2-c),[Math.round(e)%360,n,h,null==a?1:a]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],o=t[3],a=i<=.5?i*(1+n):i+n-i*n,s=2*i-a;return[Math.round(255*r(s,a,e+1/3)),Math.round(255*r(s,a,e)),Math.round(255*r(s,a,e-1/3)),o]},p(c,function(i,r){var o=r.props,a=r.cache,l=r.to,c=r.from;u.fn[i]=function(i){if(l&&!this[a]&&(this[a]=l(this._rgba)),i===e)return this[a].slice();var r,s=t.type(i),h="array"===s||"object"===s?i:arguments,d=this[a].slice();return p(o,function(t,e){var i=h["object"===s?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=n(i,e)}),c?(r=u(c(d)),r[a]=d,r):u(d)},p(o,function(e,n){u.fn[e]||(u.fn[e]=function(r){var o,a=t.type(r),l="alpha"===e?this._hsla?"hsla":"rgba":i,u=this[l](),c=u[n.idx];return"undefined"===a?c:("function"===a&&(r=r.call(this,c),a=t.type(r)),null==r&&n.empty?this:("string"===a&&(o=s.exec(r),o&&(r=c+parseFloat(o[2])*("+"===o[1]?1:-1))),u[n.idx]=r,this[l](u)))})})}),u.hook=function(e){var n=e.split(" ");p(n,function(e,n){t.cssHooks[n]={set:function(e,r){var o,a,s="";if("transparent"!==r&&("string"!==t.type(r)||(o=i(r)))){if(r=u(o||r),!d.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===n?e.parentNode:e;(""===s||"transparent"===s)&&a&&a.style;)try{s=t.css(a,"backgroundColor"),a=a.parentNode}catch(l){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=u(e.elem,n),e.end=u(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},u.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return p(["Top","Right","Bottom","Left"],function(n,i){e["border"+i+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(f),function(){function e(e){var n,i,r=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(o[t.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}function n(e,n){var i,o,a={};for(i in n)o=n[i],e[i]!==o&&(r[i]||!t.fx.step[i]&&isNaN(parseFloat(o))||(a[i]=o));return a}var i=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(f.style(t.elem,n,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(r,o,a,s){var l=t.speed(o,a,s);return this.queue(function(){var o,a=t(this),s=a.attr("class")||"",u=l.children?a.find("*").addBack():a;u=u.map(function(){var n=t(this);return{el:n,start:e(this)}}),o=function(){t.each(i,function(t,e){r[e]&&a[e+"Class"](r[e])})},o(),u=u.map(function(){return this.end=e(this.el[0]),this.diff=n(this.start,this.end),this}),a.attr("class",s),u=u.map(function(){var e=this,n=t.Deferred(),i=t.extend({},l,{queue:!1,complete:function(){n.resolve(e)}});return this.el.animate(this.diff,i),n.promise()}),t.when.apply(t,u.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(n,i,r,o){return i?t.effects.animateClass.call(this,{add:n},i,r,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(n,i,r,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:n},i,r,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(n,i,r,o,a){return"boolean"==typeof i||void 0===i?r?t.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,a):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},i,r,o)}}(t.fn.toggleClass),switchClass:function(e,n,i,r,o){return t.effects.animateClass.call(this,{add:n,remove:e},i,r,o)}})}(),function(){function e(e,n,i,r){return t.isPlainObject(e)&&(n=e,e=e.effect),e={effect:e},null==n&&(n={}),t.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||t.fx.speeds[n])&&(r=i,i=n,n={}),t.isFunction(i)&&(r=i,i=null),n&&t.extend(e,n),i=i||n.duration,e.duration=t.fx.off?0:"number"==typeof i?i:i in t.fx.speeds?t.fx.speeds[i]:t.fx.speeds._default,e.complete=r||n.complete,e}function n(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}function i(t,e){var n=e.outerWidth(),i=e.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,o=r.exec(t)||["",0,n,i,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?n:parseFloat(o[2]),bottom:"auto"===o[3]?i:parseFloat(o[3]),left:parseFloat(o[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(e){return function(n){return!!t(n).data(d)||e(n)}}(t.expr.filters.animated)),t.uiBackCompat!==!1&&t.extend(t.effects,{save:function(t,e){for(var n=0,i=e.length;n<i;n++)null!==e[n]&&t.data(c+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,i=0,r=e.length;i<r;i++)null!==e[i]&&(n=t.data(c+e[i]),t.css(e[i],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},i=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(i),(e[0]===o||t.contains(e[0],o))&&t(o).trigger("focus"),i=e.parent(),"static"===e.css("position")?(i.css({position:"relative"}),e.css({position:"relative"})):(t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,i){n[i]=e.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(r),i.css(n).show()},removeWrapper:function(e){var n=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,n,i){return i||(i=n,n="effect"),t.effects.effect[e]=i,t.effects.effect[e].mode=n,i},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(e||100)/100:1,r="vertical"!==n?(e||100)/100:1;return{height:t.height()*r,width:t.width()*i,outerHeight:t.outerHeight()*r,outerWidth:t.outerWidth()*i}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var i=t.queue();e>1&&i.splice.apply(i,[1,0].concat(i.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data(h,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(h)||"",t.removeData(h)},mode:function(t,e){var n=t.is(":hidden");return"toggle"===e&&(e=n?"show":"hide"),(n?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createPlaceholder:function(e){var n,i=e.css("position"),r=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",n=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),"float":e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(c+"placeholder",n)),e.css({position:i,left:r.left,top:r.top}),n},removePlaceholder:function(t){var e=c+"placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,n,i,r){return r=r||{},t.each(n,function(t,n){var o=e.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),t.fn.extend({effect:function(){function n(e){function n(){s.removeData(d),t.effects.cleanUp(s),"hide"===i.mode&&s.hide(),a()}function a(){t.isFunction(l)&&l.call(s[0]),t.isFunction(e)&&e()}var s=t(this);i.mode=c.shift(),t.uiBackCompat===!1||o?"none"===i.mode?(s[u](),a()):r.call(s[0],i,n):(s.is(":hidden")?"hide"===u:"show"===u)?(s[u](),a()):r.call(s[0],i,a)}var i=e.apply(this,arguments),r=t.effects.effect[i.effect],o=r.mode,a=i.queue,s=a||"fx",l=i.complete,u=i.mode,c=[],h=function(e){var n=t(this),i=t.effects.mode(n,u)||o;n.data(d,!0),c.push(i),o&&("show"===i||i===o&&"hide"===i)&&n.show(),o&&"none"===i||t.effects.saveStyle(n),t.isFunction(e)&&e()};return t.fx.off||!r?u?this[u](i.duration,l):this.each(function(){l&&l.call(this)}):a===!1?this.each(h).each(n):this.queue(s,h).queue(s,n)},show:function(t){return function(i){if(n(i))return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="show",this.effect.call(this,r)}}(t.fn.show),hide:function(t){return function(i){if(n(i))return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="hide",this.effect.call(this,r)}}(t.fn.hide),toggle:function(t){return function(i){if(n(i)||"boolean"==typeof i)return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="toggle",this.effect.call(this,r)}}(t.fn.toggle),cssUnit:function(e){var n=this.css(e),i=[];return t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(i=[parseFloat(n),e])}),i},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):i(this.css("clip"),this)},transfer:function(e,n){var i=t(this),r=t(e.to),o="fixed"===r.css("position"),a=t("body"),s=o?a.scrollTop():0,l=o?a.scrollLeft():0,u=r.offset(),c={top:u.top-s,left:u.left-l,height:r.innerHeight(),width:r.innerWidth()},h=i.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:h.top-s,left:h.left-l,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),t.isFunction(n)&&n()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=i(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,n){t.easing["easeIn"+e]=n,t.easing["easeOut"+e]=function(t){return 1-n(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?n(2*t)/2:1-n(t*-2+2)/2}})}();var p,p=t.effects;t.effects.define("blind","hide",function(e,n){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},r=t(this),o=e.direction||"up",a=r.cssClip(),s={clip:t.extend({},a)},l=t.effects.createPlaceholder(r);s.clip[i[o][0]]=s.clip[i[o][1]],"show"===e.mode&&(r.cssClip(s.clip),l&&l.css(t.effects.clipToBox(s)),s.clip=a),l&&l.animate(t.effects.clipToBox(s),e.duration,e.easing),r.animate(s,{queue:!1,duration:e.duration,easing:e.easing,complete:n})}),t.effects.define("bounce",function(e,n){var i,r,o,a=t(this),s=e.mode,l="hide"===s,u="show"===s,c=e.direction||"up",h=e.distance,d=e.times||5,f=2*d+(u||l?1:0),p=e.duration/f,g=e.easing,m="up"===c||"down"===c?"top":"left",v="up"===c||"left"===c,y=0,b=a.queue().length;for(t.effects.createPlaceholder(a),o=a.css(m),h||(h=a["top"===m?"outerHeight":"outerWidth"]()/3),u&&(r={opacity:1},r[m]=o,a.css("opacity",0).css(m,v?2*-h:2*h).animate(r,p,g)),l&&(h/=Math.pow(2,d-1)),r={},r[m]=o;y<d;y++)i={},i[m]=(v?"-=":"+=")+h,a.animate(i,p,g).animate(r,p,g),h=l?2*h:h/2;l&&(i={opacity:0},i[m]=(v?"-=":"+=")+h,a.animate(i,p,g)),a.queue(n),t.effects.unshift(a,b,f+1)}),t.effects.define("clip","hide",function(e,n){var i,r={},o=t(this),a=e.direction||"vertical",s="both"===a,l=s||"horizontal"===a,u=s||"vertical"===a;i=o.cssClip(),r.clip={top:u?(i.bottom-i.top)/2:i.top,right:l?(i.right-i.left)/2:i.right,bottom:u?(i.bottom-i.top)/2:i.bottom,left:l?(i.right-i.left)/2:i.left},t.effects.createPlaceholder(o),"show"===e.mode&&(o.cssClip(r.clip),r.clip=i),o.animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:n})}),t.effects.define("drop","hide",function(e,n){var i,r=t(this),o=e.mode,a="show"===o,s=e.direction||"left",l="up"===s||"down"===s?"top":"left",u="up"===s||"left"===s?"-=":"+=",c="+="===u?"-=":"+=",h={opacity:0};t.effects.createPlaceholder(r),i=e.distance||r["top"===l?"outerHeight":"outerWidth"](!0)/2,h[l]=u+i,a&&(r.css(h),h[l]=c+i,h.opacity=1),r.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:n})}),t.effects.define("explode","hide",function(e,n){function i(){b.push(this),b.length===h*d&&r()}function r(){f.css({visibility:"visible"}),t(b).remove(),n()}var o,a,s,l,u,c,h=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=h,f=t(this),p=e.mode,g="show"===p,m=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/d),y=Math.ceil(f.outerHeight()/h),b=[];for(o=0;o<h;o++)for(l=m.top+o*y,c=o-(h-1)/2,a=0;a<d;a++)s=m.left+a*v,u=a-(d-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-o*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:s+(g?u*v:0),top:l+(g?c*y:0),opacity:g?0:1}).animate({left:s+(g?0:u*v),top:l+(g?0:c*y),opacity:g?1:0},e.duration||500,e.easing,i)}),t.effects.define("fade","toggle",function(e,n){var i="show"===e.mode;t(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:n})}),t.effects.define("fold","hide",function(e,n){var i=t(this),r=e.mode,o="show"===r,a="hide"===r,s=e.size||15,l=/([0-9]+)%/.exec(s),u=!!e.horizFirst,c=u?["right","bottom"]:["bottom","right"],h=e.duration/2,d=t.effects.createPlaceholder(i),f=i.cssClip(),p={clip:t.extend({},f)},g={clip:t.extend({},f)},m=[f[c[0]],f[c[1]]],v=i.queue().length;l&&(s=parseInt(l[1],10)/100*m[a?0:1]),p.clip[c[0]]=s,g.clip[c[0]]=s,g.clip[c[1]]=0,o&&(i.cssClip(g.clip),d&&d.css(t.effects.clipToBox(g)),g.clip=f),i.queue(function(n){d&&d.animate(t.effects.clipToBox(p),h,e.easing).animate(t.effects.clipToBox(g),h,e.easing),n()}).animate(p,h,e.easing).animate(g,h,e.easing).queue(n),t.effects.unshift(i,v,4)}),t.effects.define("highlight","show",function(e,n){var i=t(this),r={backgroundColor:i.css("backgroundColor")};"hide"===e.mode&&(r.opacity=0),t.effects.saveStyle(i),i.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:n})}),t.effects.define("size",function(e,n){var i,r,o,a=t(this),s=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=e.mode,h="effect"!==c,d=e.scale||"both",f=e.origin||["middle","center"],p=a.css("position"),g=a.position(),m=t.effects.scaledDimensions(a),v=e.from||m,y=e.to||t.effects.scaledDimensions(a,0);t.effects.createPlaceholder(a),"show"===c&&(o=v,v=y,y=o),r={from:{y:v.height/m.height,x:v.width/m.width},to:{y:y.height/m.height,x:y.width/m.width}},"box"!==d&&"both"!==d||(r.from.y!==r.to.y&&(v=t.effects.setTransition(a,l,r.from.y,v),y=t.effects.setTransition(a,l,r.to.y,y)),r.from.x!==r.to.x&&(v=t.effects.setTransition(a,u,r.from.x,v),y=t.effects.setTransition(a,u,r.to.x,y))),"content"!==d&&"both"!==d||r.from.y!==r.to.y&&(v=t.effects.setTransition(a,s,r.from.y,v),y=t.effects.setTransition(a,s,r.to.y,y)),f&&(i=t.effects.getBaseline(f,m),v.top=(m.outerHeight-v.outerHeight)*i.y+g.top,v.left=(m.outerWidth-v.outerWidth)*i.x+g.left,y.top=(m.outerHeight-y.outerHeight)*i.y+g.top,y.left=(m.outerWidth-y.outerWidth)*i.x+g.left),a.css(v),"content"!==d&&"both"!==d||(l=l.concat(["marginTop","marginBottom"]).concat(s),u=u.concat(["marginLeft","marginRight"]),a.find("*[width]").each(function(){var n=t(this),i=t.effects.scaledDimensions(n),o={height:i.height*r.from.y,width:i.width*r.from.x,outerHeight:i.outerHeight*r.from.y,outerWidth:i.outerWidth*r.from.x},a={height:i.height*r.to.y,width:i.width*r.to.x,outerHeight:i.height*r.to.y,outerWidth:i.width*r.to.x};r.from.y!==r.to.y&&(o=t.effects.setTransition(n,l,r.from.y,o),a=t.effects.setTransition(n,l,r.to.y,a)),r.from.x!==r.to.x&&(o=t.effects.setTransition(n,u,r.from.x,o),a=t.effects.setTransition(n,u,r.to.x,a)),h&&t.effects.saveStyle(n),n.css(o),n.animate(a,e.duration,e.easing,function(){h&&t.effects.restoreStyle(n)})})),a.animate(y,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=a.offset();0===y.opacity&&a.css("opacity",v.opacity),h||(a.css("position","static"===p?"relative":p).offset(e),t.effects.saveStyle(a)),n()}})}),t.effects.define("scale",function(e,n){var i=t(this),r=e.mode,o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"effect"!==r?0:100),a=t.extend(!0,{from:t.effects.scaledDimensions(i),to:t.effects.scaledDimensions(i,o,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(a.from.opacity=1,a.to.opacity=0),t.effects.effect.size.call(this,a,n)}),t.effects.define("puff","hide",function(e,n){var i=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,i,n)}),t.effects.define("pulsate","show",function(e,n){var i=t(this),r=e.mode,o="show"===r,a="hide"===r,s=o||a,l=2*(e.times||5)+(s?1:0),u=e.duration/l,c=0,h=1,d=i.queue().length;for(!o&&i.is(":visible")||(i.css("opacity",0).show(),c=1);h<l;h++)i.animate({opacity:c},u,e.easing),c=1-c;i.animate({opacity:c},u,e.easing),i.queue(n),t.effects.unshift(i,d,l+1)}),t.effects.define("shake",function(e,n){
var i=1,r=t(this),o=e.direction||"left",a=e.distance||20,s=e.times||3,l=2*s+1,u=Math.round(e.duration/l),c="up"===o||"down"===o?"top":"left",h="up"===o||"left"===o,d={},f={},p={},g=r.queue().length;for(t.effects.createPlaceholder(r),d[c]=(h?"-=":"+=")+a,f[c]=(h?"+=":"-=")+2*a,p[c]=(h?"-=":"+=")+2*a,r.animate(d,u,e.easing);i<s;i++)r.animate(f,u,e.easing).animate(p,u,e.easing);r.animate(f,u,e.easing).animate(d,u/2,e.easing).queue(n),t.effects.unshift(r,g,l+1)}),t.effects.define("slide","show",function(e,n){var i,r,o=t(this),a={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=e.mode,l=e.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,h=e.distance||o["top"===u?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(o),i=o.cssClip(),r=o.position()[u],d[u]=(c?-1:1)*h+r,d.clip=o.cssClip(),d.clip[a[l][1]]=d.clip[a[l][0]],"show"===s&&(o.cssClip(d.clip),o.css(u,d[u]),d.clip=i,d[u]=r),o.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:n})});t.uiBackCompat!==!1&&(p=t.effects.define("transfer",function(e,n){t(this).transfer(e,n)}));t.ui.focusable=function(n,i){var r,o,a,s,l,u=n.nodeName.toLowerCase();return"area"===u?(r=n.parentNode,o=r.name,!(!n.href||!o||"map"!==r.nodeName.toLowerCase())&&(a=t("img[usemap='#"+o+"']"),a.length>0&&a.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(u)?(s=!n.disabled,s&&(l=t(n).closest("fieldset")[0],l&&(s=!l.disabled))):s="a"===u?n.href||i:i,s&&t(n).is(":visible")&&e(t(n)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}});t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var n=e.data("ui-form-reset-instances");t.each(n,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};"1.7"===t.fn.jquery.substring(0,3)&&(t.each(["Width","Height"],function(e,n){function i(e,n,i,o){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(e){return void 0===e?a["inner"+n].call(this):this.each(function(){t(this).css(o,i(this,e)+"px")})},t.fn["outer"+n]=function(e,r){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(o,i(this,e,!0,r)+"px")})}}),t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))});t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=function(){var t=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}(),t.fn.labels=function(){var e,n,i,r,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),i=this.attr("id"),i&&(e=this.eq(0).parents().last(),o=e.add(e.length?e.siblings():this.siblings()),n="label[for='"+t.ui.escapeSelector(i)+"']",r=r.add(o.find(n).addBack(n))),this.pushStack(r))},t.fn.scrollParent=function(e){var n=this.css("position"),i="absolute"===n,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return(!i||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var n=t.attr(e,"tabindex"),i=null!=n;return(!i||n>=0)&&t.ui.focusable(e,i)}}),t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,n,i=this.options.icons;i&&(e=t("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+i.header),e.prependTo(this.headers),n=this.active.children(".ui-accordion-header-icon"),this._removeClass(n,i.header)._addClass(n,null,i.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),void("icons"===t&&(this._destroyIcons(),e&&this._createIcons())))},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var n=t.ui.keyCode,i=this.headers.length,r=this.headers.index(e.target),o=!1;switch(e.keyCode){case n.RIGHT:case n.DOWN:o=this.headers[(r+1)%i];break;case n.LEFT:case n.UP:o=this.headers[(r-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(e);break;case n.HOME:o=this.headers[0];break;case n.END:o=this.headers[i-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),t(o).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,n=this.options,i=n.heightStyle,r=this.element.parent();this.active=this._findActive(n.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var e=t(this),n=e.uniqueId().attr("id"),i=e.next(),r=i.uniqueId().attr("id");e.attr("aria-controls",r),i.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===i?(e=r.height(),this.element.siblings(":visible").each(function(){var n=t(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(e-=n.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===i&&(e=0,this.headers.next().each(function(){var n=t(this).is(":visible");n||t(this).show(),e=Math.max(e,t(this).css("height","").height()),n||t(this).hide()}).height(e))},_activate:function(e){var n=this._findActive(e)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var n={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var n,i,r=this.options,o=this.active,a=t(e.currentTarget),s=a[0]===o[0],l=s&&r.collapsible,u=l?t():a.next(),c=o.next(),h={oldHeader:o,oldPanel:c,newHeader:l?t():a,newPanel:u};e.preventDefault(),s&&!r.collapsible||this._trigger("beforeActivate",e,h)===!1||(r.active=!l&&this.headers.index(a),this.active=s?t():a,this._toggle(h),this._removeClass(o,"ui-accordion-header-active","ui-state-active"),r.icons&&(n=o.children(".ui-accordion-header-icon"),this._removeClass(n,null,r.icons.activeHeader)._addClass(n,null,r.icons.header)),s||(this._removeClass(a,"ui-accordion-header-collapsed")._addClass(a,"ui-accordion-header-active","ui-state-active"),r.icons&&(i=a.children(".ui-accordion-header-icon"),this._removeClass(i,null,r.icons.header)._addClass(i,null,r.icons.activeHeader)),this._addClass(a.next(),"ui-accordion-content-active")))},_toggle:function(e){var n=e.newPanel,i=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,e):(i.hide(),n.show(),this._toggleComplete(e)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,n){var i,r,o,a=this,s=0,l=t.css("box-sizing"),u=t.length&&(!e.length||t.index()<e.index()),c=this.options.animate||{},h=u&&c.down||c,d=function(){a._toggleComplete(n)};return"number"==typeof h&&(o=h),"string"==typeof h&&(r=h),r=r||h.easing||c.easing,o=o||h.duration||c.duration,e.length?t.length?(i=t.show().outerHeight(),e.animate(this.hideProps,{duration:o,easing:r,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:o,easing:r,complete:d,step:function(t,n){n.now=Math.round(t),"height"!==n.prop?"content-box"===l&&(s+=n.now):"content"!==a.options.heightStyle&&(n.now=Math.round(i-e.outerHeight()-s),s=0)}})):e.animate(this.hideProps,o,r,d):t.animate(this.showProps,o,r,d)},_toggleComplete:function(t){var e=t.oldPanel,n=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(n,"ui-accordion-header-active")._addClass(n,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(n){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var n=t(e.target),i=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var n=t(e.target).closest(".ui-menu-item"),i=t(e.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){var n=!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]));n&&this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),n=e.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),n.children().each(function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var n,i,r,o,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,i=this.previousFilter||"",o=!1,r=e.keyCode>=96&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),r===i?o=!0:r=i+r,n=this._filterMenuItems(r),n=o&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(r=String.fromCharCode(e.keyCode),n=this._filterMenuItems(r)),n.length?(this.focus(e,n),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n,i,r,o,a=this,s=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.prev(),i=t("<span>").data("ui-menu-submenu-caret",!0);a._addClass(i,"ui-menu-icon","ui-icon "+s),n.attr("aria-haspopup","true").prepend(i),e.attr("aria-labelledby",n.attr("id"))}),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),e=l.add(this.element),n=e.find(this.options.items),n.not(".ui-menu-item").each(function(){var e=t(this);a._isDivider(e)&&a._addClass(e,"ui-menu-divider","ui-widget-content")}),r=n.not(".ui-menu-item, .ui-menu-divider"),o=r.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(r,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var n,i,r;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=e.children(".ui-menu"),n.length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,r,o,a,s;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,r=e.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),s=e.outerHeight(),r<0?this.activeMenu.scrollTop(o+r):r+s>a&&this.activeMenu.scrollTop(o+r-a+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this._removeClass(i.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=i},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]()),this.focus(n,i)},nextPage:function(e){var n,i,r;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i-r<0}),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var n,i,r;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i+r>0}),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items).first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)},_filterMenuItems:function(e){var n=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))})}});t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,n,i,r=this.element[0].nodeName.toLowerCase(),o="textarea"===r,a="input"===r;this.isMultiLine=o||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return e=!0,i=!0,void(n=!0);e=!1,i=!1,n=!1;var o=t.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",r);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",r);break;case o.UP:e=!0,this._keyEvent("previous",r);break;case o.DOWN:e=!0,this._keyEvent("next",r);break;case o.ENTER:this.menu.active&&(e=!0,r.preventDefault(),this.menu.select(r));break;case o.TAB:this.menu.active&&this.menu.select(r);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(r),r.preventDefault());break;default:n=!0,this._searchTimeout(r)}},keypress:function(i){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var r=t.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i)}}},input:function(t){return i?(i=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,n){var i,r;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)})):(r=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:r})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(r.value),i=n.item.attr("aria-label")||r.value,void(i&&t.trim(i).length&&(this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))))},menuselect:function(e,n){var i=n.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var n=this.menu.element[0];return e.target===this.element[0]||e.target===n||t.contains(n,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,n,i=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(n,i){i(t.ui.autocomplete.filter(e,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,r){i.xhr&&i.xhr.abort(),i.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){r(t)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),n=this.menu.element.is(":visible"),i=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||n||i)||(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var n=this.menu.element.empty();this._renderMenu(n,e),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var i=this;t.each(n,function(t,n){i._renderItemData(e,n)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").append(t("<div>").text(n.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var i=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,function(t){return i.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))}});var g=(t.ui.autocomplete,/ui-corner-([a-z]){2,6}/g);t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,n=[];t.each(this.options.items,function(i,r){var o,a={};if(r)return"controlgroupLabel"===i?(o=e.element.find(r),o.each(function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),e._addClass(o,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(o.get()))):void(t.fn[i]&&(a=e["_"+i+"Options"]?e["_"+i+"Options"]("middle"):{classes:{}},e.element.find(r).each(function(){
var r=t(this),o=r[i]("instance"),s=t.widget.extend({},a);if("button"!==i||!r.parent(".ui-spinner").length){o||(o=r[i]()[i]("instance")),o&&(s.classes=e._resolveClassesValues(s.classes,o)),r[i](s);var l=r[i]("widget");t.data(l[0],"ui-controlgroup-data",o?o:r[i]("instance")),n.push(l[0])}})))}),this.childWidgets=t(t.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var n=t(this),i=n.data("ui-controlgroup-data");i&&i[e]&&i[e]()})},_updateCornerClass:function(t,e){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",i=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,n),this._addClass(t,null,i)},_buildSimpleOptions:function(t,e){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[e]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[t],i},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,n){var i={};return t.each(e,function(r){var o=n.options.classes[r]||"";o=t.trim(o.replace(g,"")),i[r]=(o+" "+e[r]).replace(/\s+/g," ")}),i},_setOption:function(t,e){return"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?void this._callChildMethod(e?"disable":"enable"):void this.refresh()},refresh:function(){var e,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],function(t,i){var r=e[i]().data("ui-controlgroup-data");if(r&&n["_"+r.widgetName+"Options"]){var o=n["_"+r.widgetName+"Options"](1===e.length?"only":i);o.classes=n._resolveClassesValues(o.classes,r),r.element[r.widgetName](o)}else n._updateCornerClass(e[i](),i)}),this._callChildMethod("refresh"))}});t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,n,i=this,r=this._super()||{};return this._readType(),n=this.element.labels(),this.label=t(n[n.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){i.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML}),this.originalLabel&&(r.label=this.originalLabel),e=this.element[0].disabled,null!=e&&(r.disabled=e),r},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e,n=this.element[0].name,i="input[name='"+t.ui.escapeSelector(n)+"']";return n?(e=this.form.length?t(this.form[0].elements).filter(i):t(i).filter(function(){return 0===t(this).form().length}),e.not(this.element)):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each(function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e)return this._super(t,e),"disabled"===t?(this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e)):void this.refresh()},_updateIcon:function(e){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]);t.ui.checkboxradio;t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),t=this.element[0].disabled,null!=t&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,n){var i="iconPosition"!==e,r=i?this.options.iconPosition:n,o="top"===r||"bottom"===r;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,n),this._attachIcon(r),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,n=void 0===t.icon?this.options.icon:t.icon;e||n||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),t.uiBackCompat!==!1&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){return"text"===t?void this._super("showLabel",e):("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),t.fn.button=function(e){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(t.fn.button),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});t.ui.button;t.extend(t.ui,{datepicker:{version:"1.12.1"}});var m;t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var i,r,o;i=e.nodeName.toLowerCase(),r="div"===i||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),r),o.settings=t.extend({},n||{}),"input"===i?this._connectDatepicker(e,o):r&&this._inlineDatepicker(e,o)},_newInst:function(e,n){var i=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?r(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]),n.trigger=t([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(n),t.data(e,"datepicker",n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var i,r,o,a=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),a&&(n.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[s?"before":"after"](n.append)),e.off("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),"focus"!==i&&"both"!==i||e.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(r=this._get(n,"buttonText"),o=this._get(n,"buttonImage"),n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:r,title:r}):r)),e[s?"before":"after"](n.trigger),n.trigger.on("click",function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,r,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(n=0,i=0,r=0;r<t.length;r++)t[r].length>n&&(n=t[r].length,i=r);return i},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,n){var i=t(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),t.data(e,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,i,r,o){var s,l,u,c,h,d=this._dialogInst;return d||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),a(d.settings,r||{}),n=n&&n.constructor===Date?this._formatDate(d,n):n,this._dialogInput.val(n),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,u=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+c,u/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var n,i=t(e),r=t.data(e,"datepicker");i.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===n?(r.append.remove(),r.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==n&&"span"!==n||i.removeClass(this.markerClassName).empty(),m===r&&(m=null))},_enableDatepicker:function(e){var n,i,r=t(e),o=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==n&&"span"!==n||(i=r.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var n,i,r=t(e),o=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==n&&"span"!==n||(i=r.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,n,i){var r,o,s,l,u=this._getInst(e);return 2===arguments.length&&"string"==typeof n?"defaults"===n?t.extend({},t.datepicker._defaults):u?"all"===n?t.extend({},u.settings):this._get(u,n):null:(r=n||{},"string"==typeof n&&(r={},r[n]=i),void(u&&(this._curInst===u&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),s=this._getMinMaxDate(u,"min"),l=this._getMinMaxDate(u,"max"),a(u.settings,r),null!==s&&void 0!==r.dateFormat&&void 0===r.minDate&&(u.settings.minDate=this._formatDate(u,s)),null!==l&&void 0!==r.dateFormat&&void 0===r.maxDate&&(u.settings.maxDate=this._formatDate(u,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),u),this._autoSize(u),this._setDate(u,o),this._updateAlternate(u),this._updateDatepicker(u))))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,i,r,o=t.datepicker._getInst(e.target),a=!0,s=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return r=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),r[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,r[0]),n=t.datepicker._get(o,"onSelect"),n?(i=t.datepicker._formatDate(o),n.apply(o.input?o.input[0]:null,[i,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,i,r=t.datepicker._getInst(e.target);if(t.datepicker._get(r,"constrainInput"))return n=t.datepicker._possibleChars(t.datepicker._get(r,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||i<" "||!n||n.indexOf(i)>-1},_doKeyUp:function(e){var n,i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{n=t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i)),n&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(r){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,r,o,s,l,u,c;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),r=t.datepicker._get(i,"beforeShow"),o=r?r.apply(e,[e,i]):{},o!==!1&&(a(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),s=!1,t(e).parents().each(function(){return s|="fixed"===t(this).css("position"),!s}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),l=t.datepicker._checkOffset(i,l,s),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":s?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),i.inline||(u=t.datepicker._get(i,"showAnim"),c=t.datepicker._get(i,"duration"),i.dpDiv.css("z-index",n(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[u]?i.dpDiv.show(u,t.datepicker._get(i,"showOptions"),c):i.dpDiv[u||"show"](u?c:null),t.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,m=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n,i=this._getNumberOfMonths(e),r=i[1],a=17,s=e.dpDiv.find("."+this._dayOverClass+" a");s.length>0&&o.apply(s.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",a*r+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var r=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),u=document.documentElement.clientHeight+(i?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?r-a:0,n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=i&&n.top===e.input.offset().top+s?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0),n.top-=Math.min(n.top,n.top+o>u&&u>o?Math.abs(o+s):0),n},_findPos:function(e){for(var n,i=this._getInst(e),r=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[r?"previousSibling":"nextSibling"];return n=t(e).offset(),[n.left,n.top]},_hideDatepicker:function(e){var n,i,r,o,a=this._curInst;!a||e&&a!==t.data(e,"datepicker")||this._datepickerShowing&&(n=this._get(a,"showAnim"),i=this._get(a,"duration"),r=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[n]||t.effects[n])?a.dpDiv.hide(n,t.datepicker._get(a,"showOptions"),i,r):a.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),i=t.datepicker._getInst(n[0]);(n[0].id===t.datepicker._mainDivId||0!==n.parents("#"+t.datepicker._mainDivId).length||n.hasClass(t.datepicker.markerClassName)||n.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!n.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===i)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,i){var r=t(e),o=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(o,n+("M"===i?this._get(o,"showCurrentAtPos"):0),i),this._updateDatepicker(o))},_gotoToday:function(e){var n,i=t(e),r=this._getInst(i[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(i)},_selectMonthYear:function(e,n,i){var r=t(e),o=this._getInst(r[0]);o["selected"+("M"===i?"Month":"Year")]=o["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(r)},_selectDay:function(e,n,i,r){var o,a=t(e);t(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",r).html(),o.selectedMonth=o.currentMonth=n,o.selectedYear=o.currentYear=i,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,r=t(e),o=this._getInst(r[0]);n=null!=n?n:this._formatDate(o),o.input&&o.input.val(n),this._updateAlternate(o),i=this._get(o,"onSelect"),i?i.apply(o.input?o.input[0]:null,[n,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var n,i,r,o=this._get(e,"altField");o&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),r=this.formatDate(n,i,this._getFormatConfig(e)),t(o).val(r))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(null==e||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var r,o,a,s,l=0,u=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,d=(i?i.dayNames:null)||this._defaults.dayNames,f=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,p=(i?i.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,b=!1,w=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},x=function(t){var e=w(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,r="y"===t?i:1,o=new RegExp("^\\d{"+r+","+i+"}"),a=n.substring(l).match(o);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},_=function(e,i,r){var o=-1,a=t.map(w(e)?r:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var i=e[1];if(n.substr(l,i.length).toLowerCase()===i.toLowerCase())return o=e[0],l+=i.length,!1}),o!==-1)return o+1;throw"Unknown name at position "+l},k=function(){if(n.charAt(l)!==e.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;r<e.length;r++)if(b)"'"!==e.charAt(r)||w("'")?k():b=!1;else switch(e.charAt(r)){case"d":v=x("d");break;case"D":_("D",h,d);break;case"o":y=x("o");break;case"m":m=x("m");break;case"M":m=_("M",f,p);break;case"y":g=x("y");break;case"@":s=new Date(x("@")),g=s.getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"!":s=new Date((x("!")-this._ticksTo1970)/1e4),g=s.getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"'":w("'")?k():b=!0;break;default:k()}if(l<n.length&&(a=n.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(g===-1?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=c?0:-100)),y>-1)for(m=1,v=y;;){if(o=this._getDaysInMonth(g,m-1),v<=o)break;m++,v-=o}if(s=this._daylightSavingAdjust(new Date(g,m-1,v)),s.getFullYear()!==g||s.getMonth()+1!==m||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,a=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},u=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},c=function(t,e,n,i){return l(t)?i[e]:n[e]},h="",d=!1;if(e)for(i=0;i<t.length;i++)if(d)"'"!==t.charAt(i)||l("'")?h+=t.charAt(i):d=!1;else switch(t.charAt(i)){case"d":h+=u("d",e.getDate(),2);break;case"D":h+=c("D",e.getDay(),r,o);break;case"o":h+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=u("m",e.getMonth()+1,2);break;case"M":h+=c("M",e.getMonth(),a,s);break;case"y":h+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=t.charAt(i)}return h},_possibleChars:function(t){var e,n="",i=!1,r=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;
return i&&e++,i};for(e=0;e<t.length;e++)if(i)"'"!==t.charAt(e)||r("'")?n+=t.charAt(e):i=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),o=r,a=this._getFormatConfig(t);try{o=this.parseDate(n,i,a)||r}catch(s){i=e?"":i}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=i?o.getDate():0,t.currentMonth=i?o.getMonth():0,t.currentYear=i?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,i){var r=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(i){}for(var r=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=r.getFullYear(),a=r.getMonth(),s=r.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=l.exec(n);u;){switch(u[2]||"d"){case"d":case"D":s+=parseInt(u[1],10);break;case"w":case"W":s+=7*parseInt(u[1],10);break;case"m":case"M":a+=parseInt(u[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(u[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(o,a))}u=l.exec(n)}return new Date(o,a,s)},a=null==n||""===n?i:"string"==typeof n?o(n):"number"==typeof n?isNaN(n)?i:r(n):new Date(n.getTime());return a=a&&"Invalid Date"===a.toString()?i:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,r=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),r===t.selectedMonth&&o===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){return t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(i,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F=new Date,B=this._daylightSavingAdjust(new Date(F.getFullYear(),F.getMonth(),F.getDate())),W=this._get(t,"isRTL"),Y=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),U=this._get(t,"navigationAsDateFormat"),q=this._getNumberOfMonths(t),X=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),$=1!==q[0]||1!==q[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),J=t.drawMonth-X,tt=t.drawYear;if(J<0&&(J+=12,tt--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-q[0]*q[1]+1,Q.getDate())),e=Z&&e<Z?Z:e;this._daylightSavingAdjust(new Date(tt,J,1))>e;)J--,J<0&&(J=11,tt--);for(t.drawMonth=J,t.drawYear=tt,n=this._get(t,"prevText"),n=U?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,J-G,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+n+"</span></a>",r=this._get(t,"nextText"),r=U?this.formatDate(r,this._daylightSavingAdjust(new Date(tt,J+G,1)),this._getFormatConfig(t)):r,o=this._canAdjustMonth(t,1,tt,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+r+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+r+"</span></a>",a=this._get(t,"currentText"),s=this._get(t,"gotoCurrent")&&t.currentDay?K:B,a=U?this.formatDate(a,s,this._getFormatConfig(t)):a,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",u=Y?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(W?l:"")+(this._isInRange(t,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(W?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,h=this._get(t,"showWeek"),d=this._get(t,"dayNames"),f=this._get(t,"dayNamesMin"),p=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),w="",_=0;_<q[0];_++){for(k="",this.maxRows=4,C=0;C<q[1];C++){if(S=this._daylightSavingAdjust(new Date(tt,J,t.selectedDay)),M=" ui-corner-all",T="",$){if(T+="<div class='ui-datepicker-group",q[1]>1)switch(C){case 0:T+=" ui-datepicker-group-first",M=" ui-corner-"+(W?"right":"left");break;case q[1]-1:T+=" ui-datepicker-group-last",M=" ui-corner-"+(W?"left":"right");break;default:T+=" ui-datepicker-group-middle",M=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+M+"'>"+(/all|left/.test(M)&&0===_?W?o:i:"")+(/all|right/.test(M)&&0===_?W?i:o:"")+this._generateMonthYearHeader(t,J,tt,Z,Q,_>0||C>0,p,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",E=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",x=0;x<7;x++)O=(x+c)%7,E+="<th scope='col'"+((x+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[O]+"'>"+f[O]+"</span></th>";for(T+=E+"</tr></thead><tbody>",A=this._getDaysInMonth(tt,J),tt===t.selectedYear&&J===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,A)),D=(this._getFirstDayOfMonth(tt,J)-c+7)%7,R=Math.ceil((D+A)/7),P=$&&this.maxRows>R?this.maxRows:R,this.maxRows=P,N=this._daylightSavingAdjust(new Date(tt,J,1-D)),z=0;z<P;z++){for(T+="<tr>",L=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(N)+"</td>":"",x=0;x<7;x++)I=m?m.apply(t.input?t.input[0]:null,[N]):[!0,""],H=N.getMonth()!==J,j=H&&!y||!I[0]||Z&&N<Z||Q&&N>Q,L+="<td class='"+((x+c+6)%7>=5?" ui-datepicker-week-end":"")+(H?" ui-datepicker-other-month":"")+(N.getTime()===S.getTime()&&J===t.selectedMonth&&t._keyEvent||b.getTime()===N.getTime()&&b.getTime()===S.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(H&&!v?"":" "+I[1]+(N.getTime()===K.getTime()?" "+this._currentClass:"")+(N.getTime()===B.getTime()?" ui-datepicker-today":""))+"'"+(H&&!v||!I[2]?"":" title='"+I[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(H&&!v?"&#xa0;":j?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===B.getTime()?" ui-state-highlight":"")+(N.getTime()===K.getTime()?" ui-state-active":"")+(H?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);T+=L+"</tr>"}J++,J>11&&(J=0,tt++),T+="</tbody></table>"+($?"</div>"+(q[0]>0&&C===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=T}w+=k}return w+=u,t._keyEvent=!1,w},_generateMonthYearHeader:function(t,e,n,i,r,o,a,s){var l,u,c,h,d,f,p,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(o||!m)w+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(l=i&&i.getFullYear()===n,u=r&&r.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=i.getMonth())&&(!u||c<=r.getMonth())&&(w+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+s[c]+"</option>");w+="</select>"}if(y||(b+=w+(!o&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),f=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},p=f(h[0]),g=Math.max(p,f(h[1]||"")),p=i?Math.max(p,i.getFullYear()):p,g=r?Math.min(g,r.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=g;p++)t.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!o&&m&&v?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(t,e,n){var i=t.selectedYear+("Y"===n?e:0),r=t.selectedMonth+("M"===n?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(i,r))+("D"===n?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,r,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),r=n&&e<n?n:e;return i&&r>i?i:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var r=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(n,i+(e<0?e:r[0]*r[1]),1));return e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var n,i,r=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,s=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),a=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(a+=i),n[1].match(/[+\-].*/)&&(s+=i)),(!r||e.getTime()>=r.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!s||e.getFullYear()<=s)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1";var v=(t.datepicker,t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),!1);t(document).on("mouseup",function(){v=!1});t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!v){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,i=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(i&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),v=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,v=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,n,i){var r,o=t.ui[e].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(t,e,n,i){var r,o=t.plugins[e];if(o&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,n)}},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")};t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var n=this.options;return!(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=t.ui.safeActiveElement(this.document[0]),i=t(e.target);i.closest(n).length||t.ui.safeBlur(n)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper),r=i?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options,o=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=t(r.containment),i=n[0],void(i&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=t.pageX,u=t.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var r=t.extend({},n,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each(function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,r))})},stop:function(e,n,i){var r=t.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,r))})},drag:function(e,n,i){t.each(i.sortables,function(){var r=!1,o=this;o.positionAbs=i.positionAbs,o.helperProportions=i.helperProportions,o.offset.click=i.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,t.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(r=!1),r})),r?(o.isOver||(o.isOver=1,i._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=i.offset.click.top,o.offset.click.left=i.offset.click.left,o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top,i._trigger("toSortable",e),i.dropped=o.element,t.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,o.fromOutside=i),o.currentItem&&(o._mouseDrag(e),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(e),n.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var r=t("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(e,n,i){var r=i.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var r=t(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(e,n,i){var r=i.options;r._opacity&&t(n.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,i){var r=i.options,o=!1,a=i.scrollParentNotHidden[0],s=i.document[0];a!==s&&"HTML"!==a.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+a.offsetHeight-e.pageY<r.scrollSensitivity?a.scrollTop=o=a.scrollTop+r.scrollSpeed:e.pageY-i.overflowOffset.top<r.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+a.offsetWidth-e.pageX<r.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+r.scrollSpeed:e.pageX-i.overflowOffset.left<r.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(s).scrollTop()<r.scrollSensitivity?o=t(s).scrollTop(t(s).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(s).scrollTop())<r.scrollSensitivity&&(o=t(s).scrollTop(t(s).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(s).scrollLeft()<r.scrollSensitivity?o=t(s).scrollLeft(t(s).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(s).scrollLeft())<r.scrollSensitivity&&(o=t(s).scrollLeft(t(s).scrollLeft()+r.scrollSpeed)))),
o!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var r=i.options;i.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(e,n,i){var r,o,a,s,l,u,c,h,d,f,p=i.options,g=p.snapTolerance,m=n.offset.left,v=m+i.helperProportions.width,y=n.offset.top,b=y+i.helperProportions.height;for(d=i.snapElements.length-1;d>=0;d--)l=i.snapElements[d].left-i.margins.left,u=l+i.snapElements[d].width,c=i.snapElements[d].top-i.margins.top,h=c+i.snapElements[d].height,v<l-g||m>u+g||b<c-g||y>h+g||!t.contains(i.snapElements[d].item.ownerDocument,i.snapElements[d].item)?(i.snapElements[d].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(r=Math.abs(c-b)<=g,o=Math.abs(h-y)<=g,a=Math.abs(l-v)<=g,s=Math.abs(u-m)<=g,r&&(n.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u}).left)),f=r||o||a||s,"outer"!==p.snapMode&&(r=Math.abs(c-y)<=g,o=Math.abs(h-b)<=g,a=Math.abs(l-m)<=g,s=Math.abs(u-v)<=g,r&&(n.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left)),!i.snapElements[d].snapping&&(r||o||a||s||f)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=r||o||a||s||f)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var r,o=i.options,a=t.makeArray(t(o.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});a.length&&(r=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",r+e)}),this.css("zIndex",r+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var r=t(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(e,n,i){var r=i.options;r._zIndex&&t(n.helper).css("zIndex",r._zIndex)}});t.ui.draggable;t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return e[i]>0||(e[i]=1,r=e[i]>0,e[i]=0,r)},_create:function(){var e,n=this.options,i=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),n.autoHide&&t(this.element).on("mouseenter",function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,n,i,r,o,a=this.options,s=this;if(this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)e=t.trim(i[n]),r="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+r),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var n,i,r,o;e=e||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=t(this.handles[n]),this._on(this.handles[n],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=t(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),e.css(r,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var n,i,r=!1;for(n in this.handles)i=t(this.handles[n])[0],(i===e.target||t.contains(i,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(e){var n,i,r,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(n+=t(o.containment).scrollLeft()||0,i+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===r?this.axis+"-resize":r),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var n,i,r=this.originalMousePosition,o=this.axis,a=e.pageX-r.left||0,s=e.pageY-r.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[e,a,s]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e)),n=this._respectSize(n,e),this._updateCache(n),this._propagate("resize",e),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var n,i,r,o,a,s,l,u=this.options,c=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),r=i&&this._hasScroll(n[0],"left")?0:c.sizeDiff.height,o=i?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-r},s=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,u.animate||this.element.css(t.extend(a,{top:l,left:s})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!u.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,n,i,r,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),r<o.maxHeight&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===i&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===i&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,s=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),i&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),o&&u&&(t.left=s-e.minWidth),i&&u&&(t.left=s-e.maxWidth),a&&c&&(t.top=l-e.minHeight),r&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],r=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)n[e]=parseFloat(i[e])||0,n[e]+=parseFloat(r[e])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,n=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize,i=this.originalPosition;return{left:i.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).resizable("instance"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&n._hasScroll(r[0],"left")?0:n.sizeDiff.height,s=o?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-a},u=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,c=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,c&&u?{top:c,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};r&&r.length&&t(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,n,i,r,o,a,s,l=t(this).resizable("instance"),u=l.options,c=l.element,h=u.containment,d=h instanceof t?h.get(0):/parent/.test(h)?c.parent().get(0):h;d&&(l.containerElement=t(d),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),n=[],t(["Top","Right","Left","Bottom"]).each(function(t,i){n[t]=l._num(e.css("padding"+i))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-n[3],width:e.innerWidth()-n[1]},i=l.containerOffset,r=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(d,"left")?d.scrollWidth:o,s=l._hasScroll(d)?d.scrollHeight:r,l.parentData={element:d,left:i.left,top:i.top,width:a,height:s}))},resize:function(e){var n,i,r,o,a=t(this).resizable("instance"),s=a.options,l=a.containerOffset,u=a.position,c=a._aspectRatio||e.shiftKey,h={top:0,left:0},d=a.containerElement,f=!0;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),u.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-h.left),c&&(a.size.height=a.size.width/a.aspectRatio,f=!1),a.position.left=s.helper?l.left:0),u.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,f=!1),a.position.top=a._helper?l.top:0),r=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),r&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),n=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-h.left:a.offset.left-l.left)),i=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-h.top:a.offset.top-l.top)),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,c&&(a.size.height=a.size.width/a.aspectRatio,f=!1)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,c&&(a.size.width=a.size.height*a.aspectRatio,f=!1)),f||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),n=e.options,i=e.containerOffset,r=e.containerPosition,o=e.containerElement,a=t(e.helper),s=a.offset(),l=a.outerWidth()-e.sizeDiff.width,u=a.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(o.css("position"))&&t(this).css({left:s.left-r.left-i.left,width:l,height:u}),e._helper&&!n.animate&&/static/.test(o.css("position"))&&t(this).css({left:s.left-r.left-i.left,width:l,height:u})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),n=e.options;t(n.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,n){var i=t(this).resizable("instance"),r=i.options,o=i.originalSize,a=i.originalPosition,s={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0};t(r.alsoResize).each(function(){var e=t(this),i=t(this).data("ui-resizable-alsoresize"),r={},o=e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var n=(i[e]||0)+(s[e]||0);n&&n>=0&&(r[e]=n||null)}),e.css(r)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,n=t(this).resizable("instance"),i=n.options,r=n.size,o=n.originalSize,a=n.originalPosition,s=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,u=l[0]||1,c=l[1]||1,h=Math.round((r.width-o.width)/u)*u,d=Math.round((r.height-o.height)/c)*c,f=o.width+h,p=o.height+d,g=i.maxWidth&&i.maxWidth<f,m=i.maxHeight&&i.maxHeight<p,v=i.minWidth&&i.minWidth>f,y=i.minHeight&&i.minHeight>p;i.grid=l,v&&(f+=u),y&&(p+=c),g&&(f-=u),m&&(p-=c),/^(se|s|e)$/.test(s)?(n.size.width=f,n.size.height=p):/^(ne)$/.test(s)?(n.size.width=f,n.size.height=p,n.position.top=a.top-d):/^(sw)$/.test(s)?(n.size.width=f,n.size.height=p,n.position.left=a.left-h):((p-c<=0||f-u<=0)&&(e=n._getPaddingPlusBorderDimensions(this)),p-c>0?(n.size.height=p,n.position.top=a.top-d):(p=c-e.height,n.size.height=p,n.position.top=a.top+o.height-p),f-u>0?(n.size.width=f,n.position.left=a.left-h):(f=u-e.width,n.size.width=f,n.position.left=a.left+o.width-f))}});t.ui.resizable;t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;n<0&&t(this).css("top",e.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var n=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,n){var i=!1,r=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),o=Math.max.apply(null,r);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),i=!0),i&&!n&&this._trigger("focus",e),i},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function n(){var e=t.ui.safeActiveElement(this.document[0]),n=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);n||this._focusTabbable()}e.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");e.target!==r[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){r.trigger("focus")}),e.preventDefault()):(this._delay(function(){i.trigger("focus")}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(n)||t.isArray(n)&&!n.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(n,function(n,i){var r,o;i=t.isFunction(i)?{click:i,text:n}:i,i=t.extend({type:"button"},i),r=i.click,o={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text},delete i.click,delete i.icon,delete i.iconPosition,delete i.showLabel,delete i.icons,"boolean"==typeof i.text&&delete i.text,t("<button></button>",i).button(o).appendTo(e.uiButtonSet).on("click",function(){r.apply(e.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){n._addClass(t(this),"ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,e(r))},drag:function(t,i){n._trigger("drag",t,e(i))},stop:function(r,o){var a=o.offset.left-n.document.scrollLeft(),s=o.offset.top-n.document.scrollTop();i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(s>=0?"+":"")+s,of:n.window},n._removeClass(t(this),"ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",r,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var n=this,i=this.options,r=i.resizable,o=this.uiDialog.css("position"),a="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:a,start:function(i,r){n._addClass(t(this),"ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,e(r))},resize:function(t,i){n._trigger("resize",t,e(i))},stop:function(r,o){var a=n.uiDialog.offset(),s=a.left-n.document.scrollLeft(),l=a.top-n.document.scrollTop();i.height=n.uiDialog.height(),i.width=n.uiDialog.width(),i.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(l>=0?"+":"")+l,of:n.window},n._removeClass(t(this),"ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",r,e(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),n=t.inArray(this,e);n!==-1&&e.splice(n,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var n=this,i=!1,r={};t.each(e,function(t,e){n._setOption(t,e),t in n.sizeRelatedOptions&&(i=!0),t in n.resizableRelatedOptions&&(r[t]=e)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,n){var i,r,o=this.uiDialog;"disabled"!==e&&(this._super(e,n),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&(i=o.is(":data(ui-draggable)"),i&&!n&&o.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(r=o.is(":data(ui-resizable)"),r&&!n&&o.resizable("destroy"),r&&"string"==typeof n&&o.resizable("option","handles",n),r||n===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",
width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}});t.ui.dialog;t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,n){if("accept"===e)this.accept=t.isFunction(n)?n:function(t){return t.is(n)};else if("scope"===e){var i=t.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(e,n)},_activate:function(e){var n=t.ui.ddmanager.current;this._addActiveClass(),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this._removeActiveClass(),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var i=n||t.ui.ddmanager.current,r=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=t(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===i.options.scope&&n.accept.call(n.element[0],i.currentItem||i.element)&&y(i,t.extend(n,{offset:n.element.offset()}),n.options.tolerance,e))return r=!0,!1}),!r&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(i)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var y=t.ui.intersect=function(){function t(t,e,n){return t>=e&&t<e+n}return function(e,n,i,r){if(!n.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,s=o+e.helperProportions.width,l=a+e.helperProportions.height,u=n.offset.left,c=n.offset.top,h=u+n.proportions().width,d=c+n.proportions().height;switch(i){case"fit":return u<=o&&s<=h&&c<=a&&l<=d;case"intersect":return u<o+e.helperProportions.width/2&&s-e.helperProportions.width/2<h&&c<a+e.helperProportions.height/2&&l-e.helperProportions.height/2<d;case"pointer":return t(r.pageY,c,n.proportions().height)&&t(r.pageX,u,n.proportions().width);case"touch":return(a>=c&&a<=d||l>=c&&l<=d||a<c&&l>d)&&(o>=u&&o<=h||s>=u&&s<=h||o<u&&s>h);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,n){var i,r,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=n?n.type:null,s=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<o.length;i++)if(!(o[i].options.disabled||e&&!o[i].accept.call(o[i].element[0],e.currentItem||e.element))){for(r=0;r<s.length;r++)if(s[r]===o[i].element[0]){o[i].proportions().height=0;continue t}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===a&&o[i]._activate.call(o[i],n),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(e,n){var i=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&y(e,this,this.options.tolerance,n)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(e,n){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,r,o,a=y(e,this,this.options.tolerance,n),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(r=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===r}),o.length&&(i=t(o[0]).droppable("instance"),i.greedyChild="isover"===s)),i&&"isover"===s&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),i&&"isout"===s&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(e,n){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}},t.uiBackCompat!==!1&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});t.ui.droppable,t.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=t("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){return void 0===t?this.options.value:(this.options.value=this._constrainedValue(t),void this._refreshValue())},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(n.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each(function(){var n=t(this),i=n.offset(),r={left:i.left-e.elementPos.left,top:i.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:n,left:r.left,top:r.top,right:r.left+n.outerWidth(),bottom:r.top+n.outerHeight(),startselected:!1,selected:n.hasClass("ui-selected"),selecting:n.hasClass("ui-selecting"),unselecting:n.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var n=this,i=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(i.filter,this.element[0]),this._trigger("start",e),t(i.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=t.data(this,"selectable-item");i.startselected=!0,e.metaKey||e.ctrlKey||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element}))}),t(e.target).parents().addBack().each(function(){var i,r=t.data(this,"selectable-item");if(r)return i=!e.metaKey&&!e.ctrlKey||!r.$element.hasClass("ui-selected"),n._removeClass(r.$element,i?"ui-unselecting":"ui-selected")._addClass(r.$element,i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",e,{selecting:r.element}):n._trigger("unselecting",e,{unselecting:r.element}),!1}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var n,i=this,r=this.options,o=this.opos[0],a=this.opos[1],s=e.pageX,l=e.pageY;return o>s&&(n=s,s=o,o=n),a>l&&(n=l,l=a,a=n),this.helper.css({left:o,top:a,width:s-o,height:l-a}),this.selectees.each(function(){var n=t.data(this,"selectable-item"),u=!1,c={};n&&n.element!==i.element[0]&&(c.left=n.left+i.elementPos.left,c.right=n.right+i.elementPos.left,c.top=n.top+i.elementPos.top,c.bottom=n.bottom+i.elementPos.top,"touch"===r.tolerance?u=!(c.left>s||c.right<o||c.top>l||c.bottom<a):"fit"===r.tolerance&&(u=c.left>o&&c.right<s&&c.top>a&&c.bottom<l),u?(n.selected&&(i._removeClass(n.$element,"ui-selected"),n.selected=!1),n.unselecting&&(i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1),n.selecting||(i._addClass(n.$element,"ui-selecting"),n.selecting=!0,i._trigger("selecting",e,{selecting:n.element}))):(n.selecting&&((e.metaKey||e.ctrlKey)&&n.startselected?(i._removeClass(n.$element,"ui-selecting"),n.selecting=!1,i._addClass(n.$element,"ui-selected"),n.selected=!0):(i._removeClass(n.$element,"ui-selecting"),n.selecting=!1,n.startselected&&(i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",e,{unselecting:n.element}))),n.selected&&(e.metaKey||e.ctrlKey||n.startselected||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",e,{unselected:i.element})}),t(".ui-selecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");n._removeClass(i.$element,"ui-selecting")._addClass(i.$element,"ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",e,{selected:i.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.selectmenu",[t.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=t()},_drawButton:function(){var e,n=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=t("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=t("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){n._rendered||n._refreshMenu()})},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=t("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,n){t.preventDefault(),e._setSelection(),e._select(n.item.data("ui-selectmenu-item"),t)},focus:function(t,n){var i=n.item.data("ui-selectmenu-item");null!=e.focusIndex&&i.index!==e.focusIndex&&(e._trigger("focus",t,{item:i}),e.isOpen||e._select(i,t)),e.focusIndex=i.index,e.button.attr("aria-activedescendant",e.menuItems.eq(i.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var n=t("<span>");return this._setText(n,e.label),this._addClass(n,"ui-selectmenu-text"),n},_renderMenu:function(e,n){var i=this,r="";t.each(n,function(n,o){var a;o.optgroup!==r&&(a=t("<li>",{text:o.optgroup}),i._addClass(a,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),a.appendTo(e),r=o.optgroup),i._renderItemData(e,o)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,n){var i=t("<li>"),r=t("<div>",{title:n.element.attr("title")});return n.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(r,n.label),i.append(r).appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var n,i,r=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex).parent("li"):(n=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),r+=":not(.ui-state-disabled)"),i="first"===t||"last"===t?n["first"===t?"prevAll":"nextAll"](r).eq(-1):n[t+"All"](r).eq(0),i.length&&this.menuInstance.focus(e,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?(t=window.getSelection(),t.removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(".ui-selectmenu-menu, #"+t.ui.escapeSelector(this.ids.button)).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection(),t.rangeCount&&(this.range=t.getRangeAt(0))):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var n=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),n=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),n=!1}n&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==n&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;return t===!1?void this.button.css("width",""):(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(t))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(e){var n=this,i=[];e.each(function(e,r){i.push(n._parseOption(t(r),e))}),this.items=i},_parseOption:function(t,e){var n=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,r=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",a=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),e=r.length;e<n;e++)a.push(o);this.handles=r.add(t(a.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var n,i,r,o,a,s,l,u,c=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(i-c.values(e));(r>n||r===n&&(e===c._lastChangedValue||c.values(e)===h.min))&&(r=n,o=t(this),a=e)}),s=this._start(e,a),s!==!1&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),l=o.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-l.left-o.width()/2,top:e.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,r,o;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/e,i>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_uiHash:function(t,e,n){var i={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==e?e:this.values(t),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,n){var i,r,o=this.value(),a=this.values();this._hasMultipleValues()&&(r=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&this.options.range===!0&&(n=0===e?Math.min(r,n):Math.max(r,n)),a[e]=n),n!==o&&(i=this._trigger("slide",t,this._uiHash(e,n,a)),i!==!1&&(this._hasMultipleValues()?this.values(e,n):this.value(n)))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var i,r,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(i=this.options.values,r=arguments[0],o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,n){var i,r=0;switch("range"===e&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(r=this.options.values.length),this._super(e,n),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(n),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=r-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step,i=Math.round((t-e)/n)*n;t=i+e,t>this.options.max&&(t-=n),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return n===-1?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,n,i,r,o,a=this.options.range,s=this.options,l=this,u=!this._animateOff&&s.animate,c={};this._hasMultipleValues()?this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[u?"animate":"css"](c,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[u?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[u?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n}):(i=this.value(),r=this._valueMin(),o=this._valueMax(),n=o!==r?(i-r)/(o-r)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](c,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},s.animate),
"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:100-n+"%"},s.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:100-n+"%"},s.animate))},_handleEvents:{keydown:function(e){var n,i,r,o,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),n=this._start(e,a),n===!1))return}switch(o=this.options.step,i=r=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:r=this._valueMin();break;case t.ui.keyCode.END:r=this._valueMax();break;case t.ui.keyCode.PAGE_UP:r=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;r=this._trimAlignValue(i+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;r=this._trimAlignValue(i-o)}this._slide(e,a,r)},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,n){var i=null,r=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,o.widgetName+"-item")===o)return i=t(this),!1}),t.data(e.target,o.widgetName+"-item")===o&&(i=t(e.target)),!!i&&(!(this.options.handle&&!n&&(t(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(r=!0)}),!r))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,n,i){var r,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,i,r,o,a=this.options,s=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),s!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],o=this._intersectsWithPointer(i),o&&i.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===r||t.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],r))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=t.left,a=o+t.width,s=t.top,l=s+t.height,u=this.offset.click.top,c=this.offset.click.left,h="x"===this.options.axis||i+u>s&&i+u<l,d="y"===this.options.axis||e+c>o&&e+c<a,f=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:o<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=i&&r;return!!o&&(e=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function n(){s.push(this)}var i,r,o,a,s=[],l=[],u=this._connectWith();if(u&&e)for(i=u.length-1;i>=0;i--)for(o=t(u[i],this.document[0]),r=o.length-1;r>=0;r--)a=t.data(o[r],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,i,r,o,a,s,l,u,c=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(r=t(d[n],this.document[0]),i=r.length-1;i>=0;i--)o=t.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(h.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(n=h.length-1;n>=0;n--)for(a=h[n][1],s=h[n][0],i=0,u=s.length;i<u;i++)l=t(s[i]),l.data(this.widgetName+"-item",a),c.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=e.currentItem[0].nodeName.toLowerCase(),r=t("<"+i+">",e.document[0]);return e._addClass(r,"ui-sortable-placeholder",n||e.currentItem[0].className)._removeClass(r,"ui-sortable-helper"),"tbody"===i?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(r)):"tr"===i?e._createTrPlaceholder(e.currentItem,r):"img"===i&&r.attr("src",e.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(t,r){n&&!i.forcePlaceholderSize||(r.height()||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,n){var i=this;e.children().each(function(){t("<td>&#160;</td>",i.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(e){var n,i,r,o,a,s,l,u,c,h,d=null,f=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&t.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],f=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(r=1e4,o=null,c=d.floating||this._isFloating(this.currentItem),a=c?"left":"top",s=c?"width":"height",h=c?"pageX":"pageY",i=this.items.length-1;i>=0;i--)t.contains(this.containers[f].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[a],u=!1,e[h]-l>this.items[i][s]/2&&(u=!0),Math.abs(e[h]-l)<r&&(r=Math.abs(e[h]-l),o=this.items[i],this.direction=u?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[f].element,!0),this._trigger("change",e,this._uiHash()),this.containers[f]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===r.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===r.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=t(r.containment)[0],n=t(r.containment).offset(),i="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(e){var n,i,r=this.options,o=e.pageX,a=e.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(t,e,n){return function(i){n._trigger(t,i,e._uiHash(e))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}});t.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e=this._super(),n=this.element;return t.each(["min","max","step"],function(t,i){var r=n.attr(i);null!=r&&r.length&&(e[i]=r)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function n(){var e=this.element[0]===t.ui.safeActiveElement(this.document[0]);e||(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(t(e.currentTarget).hasClass("ui-state-active"))return this._start(e)!==!1&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var n=this.options,i=t.ui.keyCode;switch(e.keyCode){case i.UP:return this._repeat(null,1,e),!0;case i.DOWN:return this._repeat(null,-1,e),!0;case i.PAGE_UP:return this._repeat(null,n.page,e),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,e),!0}return!1},_start:function(t){return!(!this.spinning&&this._trigger("start",t)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,n){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,n)},t),this._spin(e*this.options.step,n)},_spin:function(t,e){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(e){var n=this.options.incremental;return n?t.isFunction(n)?n(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return n===-1?0:e.length-n-1},_adjustValue:function(t){var e,n,i=this.options;return e=null!==i.min?i.min:0,n=t-e,n=Math.round(n/i.step)*i.step,t=e+n,t=parseFloat(t.toFixed(this._precision())),null!==i.max&&t>i.max?i.max:null!==i.min&&t<i.min?i.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var n,i,r;return"culture"===t||"numberFormat"===t?(n=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(n))):("max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,e.up),r=this.buttons.last().find(".ui-icon"),this._removeClass(r,null,this.options.icons.down),this._addClass(r,null,e.down)),void this._super(t,e))},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:s(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,
"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var n;""!==t&&(n=this._parse(t),null!==n&&(e||(n=this._adjustValue(n)),t=this._format(n))),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:s(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:s(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:s(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:s(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void s(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),t.uiBackCompat!==!1&&t.widget("ui.spinner",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});t.ui.spinner;t.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var t=/#.*$/;return function(e){var n,i;n=e.href.replace(t,""),i=location.href.replace(t,"");try{n=decodeURIComponent(n)}catch(r){}try{i=decodeURIComponent(i)}catch(r){}return e.hash.length>1&&n===i}}(),_create:function(){var e=this,n=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,n.collapsible),this._processTabs(),n.active=this._initialActive(),t.isArray(n.disabled)&&(n.disabled=t.unique(n.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=t(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var e=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===e&&(i&&this.tabs.each(function(n,r){if(t(r).attr("aria-controls")===i)return e=n,!1}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==e&&e!==-1||(e=!!this.tabs.length&&0)),e!==!1&&(e=this.tabs.index(this.tabs.eq(e)),e===-1&&(e=!n&&0)),!n&&e===!1&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var n=t(t.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(n),r=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:i++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:r=!1,i--;break;case t.ui.keyCode.END:i=this.anchors.length-1;break;case t.ui.keyCode.HOME:i=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}e.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,r),e.ctrlKey||e.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,n){function i(){return e>r&&(e=0),e<0&&(e=r),e}for(var r=this.tabs.length-1;t.inArray(i(),this.options.disabled)!==-1;)e=n?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){return"active"===t?void this._activate(e):(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,n=this.tablist.children(":has(a[href])");e.disabled=t.map(n.filter(".ui-state-disabled"),function(t){return n.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,n=this.tabs,i=this.anchors,r=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=t(),this.anchors.each(function(n,i){var r,o,a,s=t(i).uniqueId().attr("id"),l=t(i).closest("li"),u=l.attr("aria-controls");e._isLocal(i)?(r=i.hash,a=r.substring(1),o=e.element.find(e._sanitizeSelector(r))):(a=l.attr("aria-controls")||t({}).uniqueId()[0].id,r="#"+a,o=e.element.find(r),o.length||(o=e._createPanel(a),o.insertAfter(e.panels[n-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),u&&l.data("ui-tabs-aria-controls",u),l.attr({"aria-controls":a,"aria-labelledby":s}),o.attr("aria-labelledby",s)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),n&&(this._off(n.not(this.tabs)),this._off(i.not(this.anchors)),this._off(r.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var n,i,r;for(t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),r=0;i=this.tabs[r];r++)n=t(i),e===!0||t.inArray(r,e)!==-1?(n.attr("aria-disabled","true"),this._addClass(n,null,"ui-state-disabled")):(n.removeAttr("aria-disabled"),this._removeClass(n,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,e===!0)},_setupEvents:function(e){var n={};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var n,i=this.element.parent();"fill"===e?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),i=e.css("position");"absolute"!==i&&"fixed"!==i&&(n-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,n-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(n=0,this.panels.each(function(){n=Math.max(n,t(this).height("").height())}).height(n))},_eventHandler:function(e){var n=this.options,i=this.active,r=t(e.currentTarget),o=r.closest("li"),a=o[0]===i[0],s=a&&n.collapsible,l=s?t():this._getPanelForTab(o),u=i.length?this._getPanelForTab(i):t(),c={oldTab:i,oldPanel:u,newTab:s?t():o,newPanel:l};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!n.collapsible||this._trigger("beforeActivate",e,c)===!1||(n.active=!s&&this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),u.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,n){function i(){o.running=!1,o._trigger("activate",e,n)}function r(){o._addClass(n.newTab.closest("li"),"ui-tabs-active","ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,i):(a.show(),i())}var o=this,a=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){o._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r()}):(this._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s.hide(),r()),s.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&s.length?n.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var n,i=this._findActive(e);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+t.ui.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var e=t(this),n=e.data("ui-tabs-aria-controls");n?e.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var n=this.options.disabled;n!==!1&&(void 0===e?n=!1:(e=this._getIndex(e),n=t.isArray(n)?t.map(n,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,n){return n!==e?n:null})),this._setOptionDisabled(n))},disable:function(e){var n=this.options.disabled;if(n!==!0){if(void 0===e)n=!0;else{if(e=this._getIndex(e),t.inArray(e,n)!==-1)return;n=t.isArray(n)?t.merge([e],n).sort():[e]}this._setOptionDisabled(n)}},load:function(e,n){e=this._getIndex(e);var i=this,r=this.tabs.eq(e),o=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),s={tab:r,panel:a},l=function(t,e){"abort"===e&&i.panels.stop(!1,!0),i._removeClass(r,"ui-tabs-loading"),a.removeAttr("aria-busy"),t===i.xhr&&delete i.xhr};this._isLocal(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,n,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(r,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(t,e,r){setTimeout(function(){a.html(t),i._trigger("load",n,s),l(r,e)},1)}).fail(function(t,e){setTimeout(function(){l(t,e)},1)})))},_ajaxSettings:function(e,n,i){var r=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,o){return r._trigger("beforeLoad",n,t.extend({jqXHR:e,ajaxSettings:o},i))}}},_getPanelForTab:function(e){var n=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),t.uiBackCompat!==!1&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});t.ui.tabs;t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,n){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(n),e.data("ui-tooltip-id",n).attr("aria-describedby",t.trim(i.join(" ")))},_removeDescribedBy:function(e){var n=e.data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/),r=t.inArray(n,i);r!==-1&&i.splice(r,1),e.removeData("ui-tooltip-id"),i=t.trim(i.join(" ")),i?e.attr("aria-describedby",i):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,n){var i=this;this._super(e,n),"content"===e&&t.each(this.tooltips,function(t,e){i._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,function(n,i){var r=t.Event("blur");r.target=r.currentTarget=i.element[0],e.close(r,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=t(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))}),this.disabledTitles=t([])},open:function(e){var n=this,i=t(e?e.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&i.parents().each(function(){var e,i=t(this);i.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,n.close(e,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._registerCloseHandlers(e,i),this._updateContent(i,e))},_updateContent:function(t,e){var n,i=this.options.content,r=this,o=e?e.type:null;return"string"==typeof i||i.nodeType||i.jquery?this._open(e,t,i):(n=i.call(t[0],function(n){r._delay(function(){t.data("ui-tooltip-open")&&(e&&(e.type=o),this._open(e,t,n))})}),void(n&&this._open(e,t,n)))},_open:function(e,n,i){function r(t){u.of=t,a.is(":hidden")||a.position(u)}var o,a,s,l,u=t.extend({},this.options.position);if(i){if(o=this._find(n))return void o.tooltip.find(".ui-tooltip-content").html(i);n.is("[title]")&&(e&&"mouseover"===e.type?n.attr("title",""):n.removeAttr("title")),o=this._tooltip(n),a=o.tooltip,this._addDescribedBy(n,a.attr("id")),a.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),l=t("<div>").html(a.find(".ui-tooltip-content").html()),l.removeAttr("name").find("[name]").removeAttr("name"),l.removeAttr("id").find("[id]").removeAttr("id"),l.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:r}),r(e)):a.position(t.extend({of:n},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval(function(){a.is(":visible")&&(r(u.of),clearInterval(s))},t.fx.interval)),this._trigger("open",e,{tooltip:a})}},_registerCloseHandlers:function(e,n){var i={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=n[0],this.close(i,!0)}}};n[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(n).tooltip)}),e&&"mouseover"!==e.type||(i.mouseleave="close"),e&&"focusin"!==e.type||(i.focusout="close"),this._on(!0,n,i)},close:function(e){var n,i=this,r=t(e?e.currentTarget:this.element),o=this._find(r);return o?(n=o.tooltip,void(o.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&!r.attr("title")&&r.attr("title",r.data("ui-tooltip-title")),this._removeDescribedBy(r),o.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){i._removeTooltip(t(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,n){t(n.element).attr("title",n.title),delete i.parents[e]}),o.closing=!0,this._trigger("close",e,{tooltip:n}),o.hiding||(o.closing=!1)))):void r.removeData("ui-tooltip-open")},_tooltip:function(e){var n=t("<div>").attr("role","tooltip"),i=t("<div>").appendTo(n),r=n.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(n,"ui-tooltip","ui-widget ui-widget-content"),n.appendTo(this._appendTo(e)),this.tooltips[r]={element:e,tooltip:n}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var e=this;t.each(this.tooltips,function(n,i){var r=t.Event("blur"),o=i.element;r.target=r.currentTarget=o[0],e.close(r,!0),t("#"+n).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),t.uiBackCompat!==!1&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}});t.ui.tooltip}),function(t){"object"==typeof exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";var e={},n=Math.max,i=Math.min;e.c={},e.c.d=t(document),e.c.t=function(t){return t.originalEvent.touches.length-1},e.o=function(){var n=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.w=0,this.h=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.scale=1,this.relative=!1,this.relativeWidth=!1,this.relativeHeight=!1,this.$div=null,this.run=function(){var e=function(t,e){var i;for(i in e)n.o[i]=e[i];n._carve().init(),n._configure()._draw()};if(!this.$.data("kontroled")){if(this.$.data("kontroled",!0),this.extend(),this.o=t.extend({min:void 0!==this.$.data("min")?this.$.data("min"):0,max:void 0!==this.$.data("max")?this.$.data("max"):100,stopper:!0,readOnly:this.$.data("readonly")||"readonly"===this.$.attr("readonly"),cursor:this.$.data("cursor")===!0&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:null==this.$.data("displayinput")||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:!1,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(t){return t},parse:function(t){return parseFloat(t)}},this.o),this.o.flip="anticlockwise"===this.o.rotation||"acw"===this.o.rotation,this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(e){var i=t(this);n.i[e]=i,n.v[e]=n.o.parse(i.val()),i.bind("change blur",function(){var t={};t[e]=i.val(),n.val(n._validate(t))})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),""===this.v&&(this.v=this.o.min),this.$.bind("change blur",function(){n.val(n._validate(n.o.parse(n.$.val())))})),!this.o.displayInput&&this.$.hide(),this.$c=t(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$div=t('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>'),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null,!this.c)throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=this.o.width%1!==0&&this.o.width.indexOf("%"),this.relativeHeight=this.o.height%1!==0&&this.o.height.indexOf("%"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",e).parent().bind("configure",e),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}},this._carve=function(){if(this.relative){var t=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),e=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(t,e)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+"px",height:this.h+"px"}),this.$c.attr({width:this.w,height:this.h}),1!==this.scale&&(this.$c[0].width=this.$c[0].width*this.scale,this.$c[0].height=this.$c[0].height*this.scale,this.$c.width(this.w),this.$c.height(this.h)),this},this._draw=function(){var t=!0;n.g=n.c,n.clear(),n.dH&&(t=n.dH()),t!==!1&&n.draw()},this._touch=function(t){var i=function(t){var e=n.xy2val(t.originalEvent.touches[n.t].pageX,t.originalEvent.touches[n.t].pageY);e!=n.cv&&(n.cH&&n.cH(e)===!1||(n.change(n._validate(e)),n._draw()))};return this.t=e.c.t(t),i(t),e.c.d.bind("touchmove.k",i).bind("touchend.k",function(){e.c.d.unbind("touchmove.k touchend.k"),n.val(n.cv)}),this},this._mouse=function(t){var i=function(t){var e=n.xy2val(t.pageX,t.pageY);e!=n.cv&&(n.cH&&n.cH(e)===!1||(n.change(n._validate(e)),n._draw()))};return i(t),e.c.d.bind("mousemove.k",i).bind("keyup.k",function(t){if(27===t.keyCode){if(e.c.d.unbind("mouseup.k mousemove.k keyup.k"),n.eH&&n.eH()===!1)return;n.cancel()}}).bind("mouseup.k",function(t){e.c.d.unbind("mousemove.k mouseup.k keyup.k"),n.val(n.cv)}),this},this._xy=function(){var t=this.$c.offset();return this.x=t.left,this.y=t.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(t){t.preventDefault(),n._xy()._mouse(t)}).bind("touchstart",function(t){t.preventDefault(),n._xy()._touch(t)}),this.listen()),this.relative&&t(window).resize(function(){n._carve().init(),n._draw()}),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(t){var e=~~((t<0?-.5:.5)+t/this.o.step)*this.o.step;return Math.round(100*e)/100},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(t){},this.val=function(t){},this.xy2val=function(t,e){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(t,e){var n;return t=t.substring(1,7),n=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)],"rgba("+n[0]+","+n[1]+","+n[2]+","+e+")"},this.copy=function(t,e){for(var n in t)e[n]=t[n]}},e.Dial=function(){e.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=t.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(t,e){return null==t?this.v:(t=this.o.parse(t),void(e!==!1&&t!=this.v&&this.rH&&this.rH(t)===!1||(this.cv=this.o.stopper?n(i(t,this.o.max),this.o.min):t,this.v=this.cv,this.$.val(this.o.format(this.v)),this._draw())))},this.xy2val=function(t,e){var r,o;return r=Math.atan2(t-(this.x+this.w2),-(e-this.y-this.w2))-this.angleOffset,this.o.flip&&(r=this.angleArc-r-this.PI2),this.angleArc!=this.PI2&&r<0&&r>-.5?r=0:r<0&&(r+=this.PI2),o=r*(this.o.max-this.o.min)/this.angleArc+this.o.min,this.o.stopper&&(o=n(i(o,this.o.max),this.o.min)),o},this.listen=function(){var e,r,o,a,s=this,l=function(t){t.preventDefault();var o=t.originalEvent,a=o.detail||o.wheelDeltaX,l=o.detail||o.wheelDeltaY,u=s._validate(s.o.parse(s.$.val()))+(a>0||l>0?s.o.step:a<0||l<0?-s.o.step:0);u=n(i(u,s.o.max),s.o.min),s.val(u,!1),s.rH&&(clearTimeout(e),e=setTimeout(function(){s.rH(u),e=null},100),r||(r=setTimeout(function(){e&&s.rH(u),r=null},200)))},u=1,c={37:-s.o.step,38:s.o.step,39:s.o.step,40:-s.o.step};this.$.bind("keydown",function(e){var r=e.keyCode;if(r>=96&&r<=105&&(r=e.keyCode=r-48),o=parseInt(String.fromCharCode(r)),isNaN(o)&&(13!==r&&8!==r&&9!==r&&189!==r&&(190!==r||s.$.val().match(/\./))&&e.preventDefault(),t.inArray(r,[37,38,39,40])>-1)){e.preventDefault();var l=s.o.parse(s.$.val())+c[r]*u;s.o.stopper&&(l=n(i(l,s.o.max),s.o.min)),s.change(s._validate(l)),s._draw(),a=window.setTimeout(function(){u*=2},30)}}).bind("keyup",function(t){isNaN(o)?a&&(window.clearTimeout(a),a=null,u=1,s.val(s.$.val())):s.$.val()>s.o.max&&s.$.val(s.o.max)||s.$.val()<s.o.min&&s.$.val(s.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",l),this.$.bind("mousewheel DOMMouseScroll",l)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.w/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2*this.scale,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var t=n(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(3*this.w/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/t>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(t){this.cv=t,this.$.val(this.o.format(t))},this.angle=function(t){return(t-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.arc=function(t){var e,n;return t=this.angle(t),this.o.flip?(e=this.endAngle+1e-5,n=e-t-1e-5):(e=this.startAngle-1e-5,n=e+t+1e-5),this.o.cursor&&(e=n-this.cursorExt)&&(n+=this.cursorExt),{s:e,e:n,d:this.o.flip&&!this.o.cursor}},this.draw=function(){var t,e=this.g,n=this.arc(this.cv),i=1;e.lineWidth=this.lineWidth,e.lineCap=this.lineCap,"none"!==this.o.bgColor&&(e.beginPath(),e.strokeStyle=this.o.bgColor,e.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),e.stroke()),this.o.displayPrevious&&(t=this.arc(this.v),e.beginPath(),e.strokeStyle=this.pColor,e.arc(this.xy,this.xy,this.radius,t.s,t.e,t.d),e.stroke(),i=this.cv==this.v),e.beginPath(),e.strokeStyle=i?this.o.fgColor:this.fgColor,e.arc(this.xy,this.xy,this.radius,n.s,n.e,n.d),e.stroke()},this.cancel=function(){this.val(this.v)}},t.fn.dial=t.fn.knob=function(n){return this.each(function(){var i=new e.Dial;i.o=n,i.$=t(this),i.run()}).parent()}}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof e&&r[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){a.detach().trigger("closed.bs.alert").remove()}var r=t(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=t("#"===o?[]:o);e&&e.preventDefault(),a.length||(a=r.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var r=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.button"),o="object"==typeof e&&e;r||i.data("bs.button",r=new n(this,o)),"toggle"==e?r.toggle():e&&r.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.7",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();
e+="Text",null==o.resetText&&i.data("resetText",i[r]()),setTimeout(t.proxy(function(){i[r](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target).closest(".btn");e.call(i,"toggle"),t(n.target).is('input[type="radio"], input[type="checkbox"]')||(n.preventDefault(),i.is("input,button")?i.trigger("focus"):i.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.carousel"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),a="string"==typeof e?e:o.slide;r||i.data("bs.carousel",r=new n(this,o)),"number"==typeof e?r.to(e):a?r[a]():o.interval&&r.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),i="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(i&&!this.options.wrap)return e;var r="prev"==t?-1:1,o=(n+r)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(e,i){var r=this.$element.find(".item.active"),o=i||this.getItemForDirection(e,r),a=this.interval,s="next"==e?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var u=o[0],c=t.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,r.addClass(s),o.addClass(s),r.one("bsTransitionEnd",function(){o.removeClass([e,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),a&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var r=function(n){var i,r=t(this),o=t(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=t.extend({},o.data(),r.data()),s=r.attr("data-slide-to");s&&(a.interval=!1),e.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),r=n.data("bs.collapse"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!r&&o.toggle&&/show|hide/.test(e)&&(o.toggle=!1),r||n.data("bs.collapse",r=new i(this,o)),"string"==typeof e&&r[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.7",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(e=r.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),e||r.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION):r.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var r=t(i);this.addAriaAndCollapsedClass(e(r),r)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=r,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var r=t(this);r.attr("data-target")||i.preventDefault();var o=e(r),a=o.data("bs.collapse"),s=a?"toggle":r.data();n.call(o,s)})}(jQuery),+function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function n(n){n&&3===n.which||(t(r).remove(),t(o).each(function(){var i=t(this),r=e(i),o={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(r[0],n.target)||(r.trigger(n=t.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger(t.Event("hidden.bs.dropdown",o)))))}))}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof e&&i[e].call(n)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var o=e(r),a=o.hasClass("open");if(n(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var s={relatedTarget:this};if(o.trigger(i=t.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(t.Event("shown.bs.dropdown",s))}return!1}},a.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var r=e(i),a=r.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&r.find(o).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=r.find(".dropdown-menu"+s);if(l.length){var u=l.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,i){return this.each(function(){var r=t(this),o=r.data("bs.modal"),a=t.extend({},n.DEFAULTS,r.data(),"object"==typeof e&&e);o||r.data("bs.modal",o=new n(this,a)),"string"==typeof e?o[e](i):a.show&&o.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,r=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&r;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),r=i.attr("href"),o=t(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},o.data(),i.data());i.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(o,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),o="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||i.data("bs.tooltip",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue())return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=o[0].offsetWidth,d=o[0].offsetHeight;if(u){var f=s,p=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+d>p.bottom?"top":"top"==s&&c.top-d<p.top?"bottom":"right"==s&&c.right+h>p.width?"left":"left"==s&&c.left-h<p.left?"right":s,o.removeClass(f).addClass(s)}var g=this.getCalculatedOffset(s,c,h,d);this.applyPlacement(g,s);var m=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top+=a,e.left+=s,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=o&&(e.top=e.top+o-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(n),d=h?2*c.left-r+l:2*c.top-o+u,f=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][f],h)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=r.hoverState&&o.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}var r=this,o=t(this.$tip),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=window.SVGElement&&n instanceof window.SVGElement,a=i?{top:0,left:0}:o?null:e.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,s,l,a)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-a.scroll,l=e.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var u=e.left-o,c=e.left+o+n;u<a.left?r.left=a.left-u:c>a.right&&(r.left=a.left+a.width-c)}return r},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.popover"),o="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||i.data("bs.popover",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new e(this,o)),"string"==typeof n&&r[n]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),r=e.data("target")||e.attr("href"),o=/^#./.test(r)&&t(r);return o&&o.length&&o.is(":visible")&&[[o[n]().top+i,r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return a!=(t=o[o.length-1])&&this.activate(t);if(a&&e<r[0])return this.activeTarget=null,this.clear();for(t=r.length;t--;)a!=o[t]&&e>=r[t]&&(void 0===r[t+1]||e<r[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof e&&r[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),e.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=t(i);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(e,i,r){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var a=i.find("> .active"),s=r&&t.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var r=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r);
}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.affix"),o="object"==typeof e&&e;r||i.data("bs.affix",r=new n(this,o)),"string"==typeof e&&r[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.7",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var r=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return r<n&&"top";if("bottom"==this.affixed)return null!=n?!(r+this.unpin<=o.top)&&"bottom":!(r+a<=t-i)&&"bottom";var s=null==this.affixed,l=s?r:o.top,u=s?a:e;return null!=n&&r<=n?"top":null!=i&&l+u>=t-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,r=i.top,o=i.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof i&&(o=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof o&&(o=i.bottom(this.$element));var s=this.getState(a,e,r,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),u=t.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-e-o})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function r(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function o(t){return function(){return this[t].apply(this,arguments)}}function a(t){return t&&!isNaN(t.getTime())}function s(e,n){function i(t,e){return e.toLowerCase()}var r,o=t(e).data(),a={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var l in o)n.test(l)&&(r=l.replace(s,i),a[r]=o[l]);return a}function l(e){var n={};if(m[e]||(e=e.split("-")[0],m[e])){var i=m[e];return t.each(g,function(t,e){e in i&&(n[e]=i[e])}),n}}var u=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;i>n;n++)if(this[n].valueOf()===e)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new u;return t.replace(this),t}};return function(){var n=[];return n.push.apply(n,arguments),t.extend(n,e),n}}(),c=function(e,n){t(e).data("datepicker",this),this._process_options(n),this.dates=new u,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.inputField.length,this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=t(v.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_resolveViewName:function(t,n){return 0===t||"days"===t||"month"===t?0:1===t||"months"===t||"year"===t?1:2===t||"years"===t||"decade"===t?2:3===t||"decades"===t||"century"===t?3:4===t||"centuries"===t||"millennium"===t?4:n!==e&&n},_check_template:function(n){try{if(n===e||""===n)return!1;if((n.match(/[<>]/g)||[]).length<=0)return!0;var i=t(n);return i.length>0}catch(r){return!1}},_process_options:function(e){this._o=t.extend({},this._o,e);var r=this.o=t.extend({},this._o),o=r.language;m[o]||(o=o.split("-")[0],m[o]||(o=p.language)),r.language=o,r.startView=this._resolveViewName(r.startView,0),r.minViewMode=this._resolveViewName(r.minViewMode,0),r.maxViewMode=this._resolveViewName(r.maxViewMode,4),r.startView=Math.min(r.startView,r.maxViewMode),r.startView=Math.max(r.startView,r.minViewMode),r.multidate!==!0&&(r.multidate=Number(r.multidate)||!1,r.multidate!==!1&&(r.multidate=Math.max(0,r.multidate))),r.multidateSeparator=String(r.multidateSeparator),r.weekStart%=7,r.weekEnd=(r.weekStart+6)%7;var a=v.parseFormat(r.format);r.startDate!==-(1/0)&&(r.startDate?r.startDate instanceof Date?r.startDate=this._local_to_utc(this._zero_time(r.startDate)):r.startDate=v.parseDate(r.startDate,a,r.language,r.assumeNearbyYear):r.startDate=-(1/0)),r.endDate!==1/0&&(r.endDate?r.endDate instanceof Date?r.endDate=this._local_to_utc(this._zero_time(r.endDate)):r.endDate=v.parseDate(r.endDate,a,r.language,r.assumeNearbyYear):r.endDate=1/0),r.daysOfWeekDisabled=r.daysOfWeekDisabled||[],t.isArray(r.daysOfWeekDisabled)||(r.daysOfWeekDisabled=r.daysOfWeekDisabled.split(/[,\s]*/)),r.daysOfWeekDisabled=t.map(r.daysOfWeekDisabled,function(t){return parseInt(t,10)}),r.daysOfWeekHighlighted=r.daysOfWeekHighlighted||[],t.isArray(r.daysOfWeekHighlighted)||(r.daysOfWeekHighlighted=r.daysOfWeekHighlighted.split(/[,\s]*/)),r.daysOfWeekHighlighted=t.map(r.daysOfWeekHighlighted,function(t){return parseInt(t,10)}),r.datesDisabled=r.datesDisabled||[],t.isArray(r.datesDisabled)||(r.datesDisabled=[r.datesDisabled]),r.datesDisabled=t.map(r.datesDisabled,function(t){return v.parseDate(t,a,r.language,r.assumeNearbyYear)});var s=String(r.orientation).toLowerCase().split(/\s+/g),l=r.orientation.toLowerCase();if(s=t.grep(s,function(t){return/^auto|left|right|top|bottom$/.test(t)}),r.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===s.length)switch(s[0]){case"top":case"bottom":r.orientation.y=s[0];break;case"left":case"right":r.orientation.x=s[0]}else l=t.grep(s,function(t){return/^left|right$/.test(t)}),r.orientation.x=l[0]||"auto",l=t.grep(s,function(t){return/^top|bottom$/.test(t)}),r.orientation.y=l[0]||"auto";if(r.defaultViewDate){var u=r.defaultViewDate.year||(new Date).getFullYear(),c=r.defaultViewDate.month||0,h=r.defaultViewDate.day||1;r.defaultViewDate=n(u,c,h)}else r.defaultViewDate=i()},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(i=e,r=t[o][1]):3===t[o].length&&(i=t[o][1],r=t[o][2]),n.on(r,i)},_unapplyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(r=e,i=t[o][1]):3===t[o].length&&(r=t[o][1],i=t[o][2]),n.off(i,r)},_buildEvents:function(){var e={keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};this.o.showOnFocus===!0&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.hasInput?this._events=[[this.inputField,e],[this.component,{click:t.proxy(this.show,this)}]]:this._events=[[this.element,{click:t.proxy(this.show,this),keydown:t.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy(function(t){this.update(t.date)},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),r=this._utc_to_local(i);this.element.trigger({type:e,date:r,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return v.formatDate(n,e,this.o.language)},this)})},show:function(){return this.inputField.prop("disabled")||this.inputField.prop("readonly")&&this.o.enableOnReadonly===!1?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this)},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var n;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==t.inArray("text/plain",e.originalEvent.clipboardData.types))n=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),e.preventDefault()},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return"undefined"!=typeof t?new Date(t):null},clearDates:function(){this.inputField&&this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),remove:o("destroy"),setValue:function(){var t=this.getFormattedDate();return this.inputField.val(t),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return v.formatDate(t,n,i)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){this._process_options({datesDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,r=t(this.o.container),o=r.width(),a="body"===this.o.container?t(document).scrollTop():r.scrollTop(),s=r.offset(),l=[];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==e&&l.push(parseInt(e))});var u=Math.max.apply(Math,l)+this.o.zIndexOffset,c=this.component?this.component.parent().offset():this.element.offset(),h=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),f=c.left-s.left,p=c.top-s.top;"body"!==this.o.container&&(p+=a),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(f-=e-d)):c.left<0?(this.picker.addClass("datepicker-orient-left"),f-=c.left-i):f+e>o?(this.picker.addClass("datepicker-orient-right"),f+=d-e):this.picker.addClass("datepicker-orient-left");var g,m=this.o.orientation.y;if("auto"===m&&(g=-a+p-n,m=0>g?"bottom":"top"),this.picker.addClass("datepicker-orient-"+m),"top"===m?p-=n+parseInt(this.picker.css("padding-top")):p+=h,this.o.rtl){var v=o-(f+d);this.picker.css({top:p,right:v,zIndex:u})}else this.picker.css({top:p,left:f,zIndex:u});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],i=!1;return arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy(function(t){return v.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),n=t.grep(n,t.proxy(function(t){return!this.dateWithinRange(t)||!t},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,i?this.setValue():n.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this},fillDow:function(){var e=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(t,e){return parseInt(e)+1}),n+='<th class="cw">&#160;</th>');e<this.o.weekStart+7;)n+='<th class="dow',t.inArray(e,this.o.daysOfWeekDisabled)>-1&&(n+=" disabled"),n+='">'+m[this.o.language].daysMin[e++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),e="",n=0;12>n;){var i=t&&t.getMonth()===n?" focused":"";e+='<span class="month'+i+'">'+m[this.o.language].monthsShort[n++]+"</span>"}this.picker.find(".datepicker-months td").html(e)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),o=new Date;return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<r?n.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>r)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===o.getFullYear()&&e.getUTCMonth()===o.getMonth()&&e.getUTCDate()===o.getDate()&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),this.dateWithinRange(e)||n.push("disabled"),this.dateIsDisabled(e)&&n.push("disabled","disabled-date"),-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected"),e.valueOf()===this.range[0]&&n.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,i,r,o,a,s,l,u){var c,h,d,f,p,g,m,v,y,b,w;for(c="",h=this.picker.find(n),d=parseInt(a/r,10)*r,p=parseInt(s/o,10)*o,g=parseInt(l/o,10)*o,f=t.map(this.dates,function(t){return parseInt(t.getUTCFullYear()/o,10)*o}),h.find(".datepicker-switch").text(d+"-"+(d+9*o)),m=d-o,v=-1;11>v;v+=1)y=[i],b=null,-1===v?y.push("old"):10===v&&y.push("new"),-1!==t.inArray(m,f)&&y.push("active"),(p>m||m>g)&&y.push("disabled"),m===this.viewDate.getFullYear()&&y.push("focused"),u!==t.noop&&(w=u(new Date(m,0,1)),w===e?w={}:"boolean"==typeof w?w={enabled:w}:"string"==typeof w&&(w={classes:w}),w.enabled===!1&&y.push("disabled"),w.classes&&(y=y.concat(w.classes.split(/\s+/))),w.tooltip&&(b=w.tooltip)),c+='<span class="'+y.join(" ")+'"'+(b?' title="'+b+'"':"")+">"+m+"</span>",m+=o;h.find("td").html(c)},fill:function(){var i,r,o=new Date(this.viewDate),a=o.getUTCFullYear(),s=o.getUTCMonth(),l=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),u=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,d=m[this.o.language].today||m.en.today||"",f=m[this.o.language].clear||m.en.clear||"",p=m[this.o.language].titleFormat||m.en.titleFormat;if(!isNaN(a)&&!isNaN(s)){this.picker.find(".datepicker-days .datepicker-switch").text(v.formatDate(o,p,this.o.language)),this.picker.find("tfoot .today").text(d).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(f).toggle(this.o.clearBtn!==!1),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var g=n(a,s-1,28),y=v.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(y),g.setUTCDate(y-(g.getUTCDay()-this.o.weekStart+7)%7);var b=new Date(g);g.getUTCFullYear()<100&&b.setUTCFullYear(g.getUTCFullYear()),b.setUTCDate(b.getUTCDate()+42),b=b.valueOf();for(var w,x=[];g.valueOf()<b;){if(g.getUTCDay()===this.o.weekStart&&(x.push("<tr>"),this.o.calendarWeeks)){var _=new Date(+g+(this.o.weekStart-g.getUTCDay()-7)%7*864e5),k=new Date(Number(_)+(11-_.getUTCDay())%7*864e5),C=new Date(Number(C=n(k.getUTCFullYear(),0,1))+(11-C.getUTCDay())%7*864e5),S=(k-C)/864e5/7+1;x.push('<td class="cw">'+S+"</td>")}w=this.getClassNames(g),w.push("day"),this.o.beforeShowDay!==t.noop&&(r=this.o.beforeShowDay(this._utc_to_local(g)),r===e?r={}:"boolean"==typeof r?r={enabled:r}:"string"==typeof r&&(r={classes:r}),r.enabled===!1&&w.push("disabled"),r.classes&&(w=w.concat(r.classes.split(/\s+/))),r.tooltip&&(i=r.tooltip)),w=t.isFunction(t.uniqueSort)?t.uniqueSort(w):t.unique(w),x.push('<td class="'+w.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+g.getUTCDate()+"</td>"),i=null,g.getUTCDay()===this.o.weekEnd&&x.push("</tr>"),g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(x.join(""));var M=m[this.o.language].monthsTitle||m.en.monthsTitle||"Months",T=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?M:a).end().find("span").removeClass("active");if(t.each(this.dates,function(t,e){e.getUTCFullYear()===a&&T.eq(e.getUTCMonth()).addClass("active")}),(l>a||a>c)&&T.addClass("disabled"),a===l&&T.slice(0,u).addClass("disabled"),a===c&&T.slice(h+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var E=this;t.each(T,function(n,i){var r=new Date(a,n,1),o=E.o.beforeShowMonth(r);o===e?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),o.enabled!==!1||t(i).hasClass("disabled")||t(i).addClass("disabled"),o.classes&&t(i).addClass(o.classes),o.tooltip&&t(i).prop("title",o.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,1,a,l,c,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,10,a,l,c,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,100,a,l,c,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:case 3:case 4:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault(),e.stopPropagation();var r,o,a,s,l,u,c;r=t(e.target),r.hasClass("datepicker-switch")&&this.showMode(1);var h=r.closest(".prev, .next");h.length>0&&(o=v.modes[this.viewMode].navStep*(h.hasClass("prev")?-1:1),0===this.viewMode?(this.viewDate=this.moveMonth(this.viewDate,o),this._trigger("changeMonth",this.viewDate)):(this.viewDate=this.moveYear(this.viewDate,o),1===this.viewMode&&this._trigger("changeYear",this.viewDate)),this.fill()),r.hasClass("today")&&!r.hasClass("day")&&(this.showMode(-2),this._setDate(i(),"linked"===this.o.todayBtn?null:"view")),r.hasClass("clear")&&this.clearDates(),r.hasClass("disabled")||(r.hasClass("day")&&(a=parseInt(r.text(),10)||1,s=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),r.hasClass("old")&&(0===l?(l=11,s-=1,u=!0,c=!0):(l-=1,u=!0)),r.hasClass("new")&&(11===l?(l=0,s+=1,u=!0,c=!0):(l+=1,u=!0)),this._setDate(n(s,l,a)),c&&this._trigger("changeYear",this.viewDate),u&&this._trigger("changeMonth",this.viewDate)),r.hasClass("month")&&(this.viewDate.setUTCDate(1),a=1,l=r.parent().find("span").index(r),s=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(l),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(n(s,l,a)),this.showMode()):this.showMode(-1),this.fill()),(r.hasClass("year")||r.hasClass("decade")||r.hasClass("century"))&&(this.viewDate.setUTCDate(1),a=1,l=0,s=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(s),r.hasClass("year")&&(this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(s,l,a))),r.hasClass("decade")&&(this._trigger("changeDecade",this.viewDate),3===this.o.minViewMode&&this._setDate(n(s,l,a))),r.hasClass("century")&&(this._trigger("changeCentury",this.viewDate),4===this.o.minViewMode&&this._setDate(n(s,l,a))),this.showMode(-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):this.o.multidate===!1?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.inputField&&this.inputField.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var n=new Date(t);return n.setUTCDate(t.getUTCDate()+e),n},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!a(t))return this.o.defaultViewDate;if(!e)return t;var n,i,r=new Date(t.valueOf()),o=r.getUTCDate(),s=r.getUTCMonth(),l=Math.abs(e);if(e=e>0?1:-1,1===l)i=-1===e?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==n},n=s+e,r.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var u=0;l>u;u++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(o),i=function(){return n!==r.getUTCMonth()}}for(;i();)r.setUTCDate(--o),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,n){do{if(t=this[n](t,e),!this.dateWithinRange(t))return!1;n="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(e){return-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||t.grep(this.o.datesDisabled,function(t){return r(e,t)}).length>0},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(!this.picker.is(":visible"))return void((40===t.keyCode||27===t.keyCode)&&(this.show(),t.stopPropagation()));var e,n,i=!1,r=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,0===this.viewMode?t.ctrlKey?(n=this.moveAvailableDate(r,e,"moveYear"),n&&this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveAvailableDate(r,e,"moveMonth"),n&&this._trigger("changeMonth",this.viewDate)):37===t.keyCode||39===t.keyCode?n=this.moveAvailableDate(r,e,"moveDay"):this.weekOfDateIsDisabled(r)||(n=this.moveAvailableDate(r,e,"moveWeek")):1===this.viewMode?((38===t.keyCode||40===t.keyCode)&&(e=4*e),n=this.moveAvailableDate(r,e,"moveMonth")):2===this.viewMode&&((38===t.keyCode||40===t.keyCode)&&(e=4*e),n=this.moveAvailableDate(r,e,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(r),i=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}i&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField&&this.inputField.change())},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+t))),this.picker.children("div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};var h=function(e,n){t(e).data("datepicker",this),this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,f.call(t(this.inputs),n).on("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};h.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var n=t(e.target).data("datepicker");if("undefined"!=typeof n){var i=n.getUTCDate(),r=t.inArray(e.target,this.inputs),o=r-1,a=r+1,s=this.inputs.length;if(-1!==r){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(i)}),i<this.dates[o])for(;o>=0&&i<this.dates[o];)this.pickers[o--].setUTCDate(i);else if(i>this.dates[a])for(;s>a&&i>this.dates[a];)this.pickers[a++].setUTCDate(i);this.updateDates(),delete this.updating}}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var d=t.fn.datepicker,f=function(n){var i=Array.apply(null,arguments);i.shift();var r;if(this.each(function(){var e=t(this),o=e.data("datepicker"),a="object"==typeof n&&n;if(!o){var u=s(this,"date"),d=t.extend({},p,u,a),f=l(d.language),g=t.extend({},p,f,u,a);e.hasClass("input-daterange")||g.inputs?(t.extend(g,{inputs:g.inputs||e.find("input").toArray()}),o=new h(this,g)):o=new c(this,g),e.data("datepicker",o)}"string"==typeof n&&"function"==typeof o[n]&&(r=o[n].apply(o,i))}),r===e||r instanceof c||r instanceof h)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return r};t.fn.datepicker=f;var p=t.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,beforeShowDecade:t.noop,beforeShowCentury:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&laquo;",rightArrow:"&raquo;"}},g=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=c;var m=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"decades",navFnc:"FullDecade",navStep:100},{clsName:"centuries",navFnc:"FullCentury",navStep:1e3}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,v.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e];
},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(r,o,a,s){function l(t,e){return e===!0&&(e=10),100>t&&(t+=2e3,t>(new Date).getFullYear()+e&&(t-=100)),t}function u(){var t=this.slice(0,y[f].length),e=y[f].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(!r)return e;if(r instanceof Date)return r;if("string"==typeof o&&(o=v.parseFormat(o)),o.toValue)return o.toValue(r,o,a);var h,d,f,p,g=/([\-+]\d+)([dmwy])/,y=r.match(/([\-+]\d+)([dmwy])/g),b={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},w={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(r)){for(r=new Date,f=0;f<y.length;f++)h=g.exec(y[f]),d=parseInt(h[1]),p=b[h[2]],r=c.prototype[p](r,d);return n(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate())}if("undefined"!=typeof w[r]&&(r=w[r],y=r.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(r))){for(r=new Date,f=0;f<y.length;f++)h=g.exec(y[f]),d=parseInt(h[1]),p=b[h[2]],r=c.prototype[p](r,d);return n(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate())}y=r&&r.match(this.nonpunctuation)||[],r=new Date;var x,_,k={},C=["yyyy","yy","M","MM","m","mm","d","dd"],S={yyyy:function(t,e){return t.setUTCFullYear(s?l(e,s):e)},yy:function(t,e){return t.setUTCFullYear(s?l(e,s):e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};S.M=S.MM=S.mm=S.m,S.dd=S.d,r=i();var M=o.parts.slice();if(y.length!==M.length&&(M=t(M).filter(function(e,n){return-1!==t.inArray(n,C)}).toArray()),y.length===M.length){var T;for(f=0,T=M.length;T>f;f++){if(x=parseInt(y[f],10),h=M[f],isNaN(x))switch(h){case"MM":_=t(m[a].months).filter(u),x=t.inArray(_[0],m[a].months)+1;break;case"M":_=t(m[a].monthsShort).filter(u),x=t.inArray(_[0],m[a].monthsShort)+1}k[h]=x}var E,O;for(f=0;f<C.length;f++)O=C[f],O in k&&!isNaN(k[O])&&(E=new Date(r),S[O](E,k[O]),isNaN(E)||(r=E))}return r},formatDate:function(e,n,i){if(!e)return"";if("string"==typeof n&&(n=v.parseFormat(n)),n.toDisplay)return n.toDisplay(e,n,i);var r={d:e.getUTCDate(),D:m[i].daysShort[e.getUTCDay()],DD:m[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:m[i].monthsShort[e.getUTCMonth()],MM:m[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,e=[];for(var o=t.extend([],n.separators),a=0,s=n.parts.length;s>=a;a++)o.length&&e.push(o.shift()),e.push(r[n.parts[a]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=v,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=d,this},t.fn.datepicker.version="1.6.4",t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),f.call(n,"show"))}),t(function(){f.call(t('[data-provide="datepicker-inline"]'))})}),function(t){function e(e){if("string"==typeof e.data){var n=e.handler,i=e.data.toLowerCase().split(" "),r=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color"];e.handler=function(e){if(this===e.target||!(/textarea|select/i.test(e.target.nodeName)||t.inArray(e.target.type,r)>-1)){var o="keypress"!==e.type&&t.hotkeys.specialKeys[e.which],a=String.fromCharCode(e.which).toLowerCase(),s="",l={};e.altKey&&"alt"!==o&&(s+="alt+"),e.ctrlKey&&"ctrl"!==o&&(s+="ctrl+"),e.metaKey&&!e.ctrlKey&&"meta"!==o&&(s+="meta+"),e.shiftKey&&"shift"!==o&&(s+="shift+"),o?l[s+o]=!0:(l[s+a]=!0,l[s+t.hotkeys.shiftNums[a]]=!0,"shift+"===s&&(l[t.hotkeys.shiftNums[a]]=!0));for(var u=0,c=i.length;u<c;u++)if(l[i[u]])return n.apply(this,arguments)}}}}t.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},t.each(["keydown","keyup","keypress"],function(){t.event.special[this]={add:e}})}(jQuery),function(t,e){return"function"==typeof define&&define.amd?define(["jquery"],function(n){return t.Tour=e(n)}):"object"==typeof exports?module.exports=e(require("jQuery")):t.Tour=e(t.jQuery)}(window,function(t){var e,n;return n=window.document,e=function(){function e(e){var n;try{n=window.localStorage}catch(i){n=!1}this._options=t.extend({name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:n,debug:!1,backdrop:!1,backdropContainer:"body",backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; Prev</button> <button class="btn btn-sm btn-default" data-role="next">Next &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm btn-default" data-role="end">End tour</button> </div> </div>',afterSetState:function(t,e){},afterGetState:function(t,e){},afterRemoveState:function(t){},onStart:function(t){},onEnd:function(t){},onShow:function(t){},onShown:function(t){},onHide:function(t){},onHidden:function(t){},onNext:function(t){},onPrev:function(t){},onPause:function(t,e){},onResume:function(t,e){},onRedirectError:function(t){}},e),this._force=!1,this._inited=!1,this._current=null,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return e.prototype.addSteps=function(t){var e,n,i;for(n=0,i=t.length;n<i;n++)e=t[n],this.addStep(e);return this},e.prototype.addStep=function(t){return this._options.steps.push(t),this},e.prototype.getStep=function(e){if(null!=this._options.steps[e])return t.extend({id:"step-"+e,path:"",host:"",placement:"right",title:"",content:"<p></p>",next:e===this._options.steps.length-1?-1:e+1,prev:e-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropContainer:this._options.backdropContainer,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,reflexElement:this._options.steps[e].element,backdropElement:this._options.steps[e].element,orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume,onRedirectError:this._options.onRedirectError},this._options.steps[e])},e.prototype.init=function(t){return this._force=t,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(t){return function(){return t.showStep(t._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},e.prototype.start=function(t){var e;return null==t&&(t=!1),this._inited||this.init(t),null===this._current&&(e=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(e,this.showStep,0)),this},e.prototype.next=function(){var t;return t=this.hideStep(this._current,this._current+1),this._callOnPromiseDone(t,this._showNextStep)},e.prototype.prev=function(){var t;return t=this.hideStep(this._current,this._current-1),this._callOnPromiseDone(t,this._showPrevStep)},e.prototype.goTo=function(t){var e;return e=this.hideStep(this._current,t),this._callOnPromiseDone(e,this.showStep,t)},e.prototype.end=function(){var e,i;return e=function(e){return function(i){if(t(n).off("click.tour-"+e._options.name),t(n).off("keyup.tour-"+e._options.name),t(window).off("resize.tour-"+e._options.name),e._setState("end","yes"),e._inited=!1,e._force=!1,e._clearTimer(),null!=e._options.onEnd)return e._options.onEnd(e)}}(this),i=this.hideStep(this._current),this._callOnPromiseDone(i,e)},e.prototype.ended=function(){return!this._force&&!!this._getState("end")},e.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this._removeState("redirect_to"),this.start()},e.prototype.pause=function(){var t;return t=this.getStep(this._current),t&&t.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,window.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=t.onPause?t.onPause(this,this._duration):void 0):this},e.prototype.resume=function(){var t;return t=this.getStep(this._current),t&&t.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||t.duration,this._timer=window.setTimeout(function(t){return function(){return t._isLast()?t.next():t.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=t.onResume&&this._duration!==t.duration?t.onResume(this,this._duration):void 0):this},e.prototype.hideStep=function(e,n){var i,r,o,a;if(a=this.getStep(e))return this._clearTimer(),o=this._makePromise(null!=a.onHide?a.onHide(this,e):void 0),r=function(i){return function(r){var o,s;if(o=t(a.element),o.data("bs.popover")||o.data("popover")||(o=t("body")),o.popover("destroy").removeClass("tour-"+i._options.name+"-element tour-"+i._options.name+"-"+e+"-element").removeData("bs.popover").focus(),a.reflex&&t(a.reflexElement).removeClass("tour-step-element-reflex").off(""+i._reflexEvent(a.reflex)+".tour-"+i._options.name),a.backdrop&&(s=null!=n&&i.getStep(n),s&&s.backdrop&&s.backdropElement===a.backdropElement||i._hideBackdrop()),null!=a.onHidden)return a.onHidden(i)}}(this),i=a.delay.hide||a.delay,"[object Number]"==={}.toString.call(i)&&i>0?(this._debug("Wait "+i+" milliseconds to hide the step "+(this._current+1)),window.setTimeout(function(t){return function(){return t._callOnPromiseDone(o,r)}}(this),i)):this._callOnPromiseDone(o,r),o},e.prototype.showStep=function(t){var e,i,r,o,a,s;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(s=this.getStep(t),s&&(a=t<this._current,i=this._makePromise(null!=s.onShow?s.onShow(this,t):void 0),this.setCurrentStep(t),e=function(){switch({}.toString.call(s.path)){case"[object Function]":return s.path();case"[object String]":return this._options.basePath+s.path;default:return s.path}}.call(this),!s.redirect||!this._isRedirect(s.host,e,n.location)||(this._redirect(s,t,e),this._isJustPathHashDifferent(s.host,e,n.location)))?(o=function(e){return function(n){var i;if(e._isOrphan(s)){if(s.orphan===!1)return e._debug("Skip the orphan step "+(e._current+1)+".\nOrphan option is false and the element does not exist or is hidden."),void(a?e._showPrevStep():e._showNextStep());e._debug("Show the orphan step "+(e._current+1)+". Orphans option is true.")}if(s.backdrop&&e._showBackdrop(s),i=function(){if(e.getCurrentStep()===t&&!e.ended())return null!=s.element&&s.backdrop&&e._showOverlayElement(s,!0),e._showPopover(s,t),null!=s.onShown&&s.onShown(e),e._debug("Step "+(e._current+1)+" of "+e._options.steps.length)},s.autoscroll?e._scrollIntoView(s,i):i(),s.duration)return e.resume()}}(this),r=s.delay.show||s.delay,"[object Number]"==={}.toString.call(r)&&r>0?(this._debug("Wait "+r+" milliseconds to show the step "+(this._current+1)),window.setTimeout(function(t){return function(){return t._callOnPromiseDone(i,o)}}(this),r)):this._callOnPromiseDone(i,o),i):void 0)},e.prototype.getCurrentStep=function(){return this._current},e.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this._setState("current_step",t)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},e.prototype.redraw=function(){return this._showOverlayElement(this.getStep(this.getCurrentStep()).element,!0)},e.prototype._setState=function(t,e){var n,i;if(this._options.storage){i=""+this._options.name+"_"+t;try{this._options.storage.setItem(i,e)}catch(r){n=r,n.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(i,e)}return null==this._state&&(this._state={}),this._state[t]=e},e.prototype._removeState=function(t){var e;return this._options.storage?(e=""+this._options.name+"_"+t,this._options.storage.removeItem(e),this._options.afterRemoveState(e)):null!=this._state?delete this._state[t]:void 0},e.prototype._getState=function(t){var e,n;return this._options.storage?(e=""+this._options.name+"_"+t,n=this._options.storage.getItem(e)):null!=this._state&&(n=this._state[t]),void 0!==n&&"null"!==n||(n=null),this._options.afterGetState(t,n),n},e.prototype._showNextStep=function(){var t,e,n;return n=this.getStep(this._current),e=function(t){return function(e){return t.showStep(n.next)}}(this),t=this._makePromise(null!=n.onNext?n.onNext(this):void 0),this._callOnPromiseDone(t,e)},e.prototype._showPrevStep=function(){var t,e,n;return n=this.getStep(this._current),e=function(t){return function(e){return t.showStep(n.prev)}}(this),t=this._makePromise(null!=n.onPrev?n.onPrev(this):void 0),this._callOnPromiseDone(t,e)},e.prototype._debug=function(t){if(this._options.debug)return window.console.log("Bootstrap Tour '"+this._options.name+"' | "+t)},e.prototype._isRedirect=function(t,e,n){var i;return!(null==t||""===t||!("[object RegExp]"==={}.toString.call(t)&&!t.test(n.origin)||"[object String]"==={}.toString.call(t)&&this._isHostDifferent(t,n)))||(i=[n.pathname,n.search,n.hash].join(""),null!=e&&""!==e&&("[object RegExp]"==={}.toString.call(e)&&!e.test(i)||"[object String]"==={}.toString.call(e)&&this._isPathDifferent(e,i)))},e.prototype._isHostDifferent=function(t,e){switch({}.toString.call(t)){case"[object RegExp]":return!t.test(e.origin);case"[object String]":return this._getProtocol(t)!==this._getProtocol(e.href)||this._getHost(t)!==this._getHost(e.href);default:return!0}},e.prototype._isPathDifferent=function(t,e){return this._getPath(t)!==this._getPath(e)||!this._equal(this._getQuery(t),this._getQuery(e))||!this._equal(this._getHash(t),this._getHash(e))},e.prototype._isJustPathHashDifferent=function(t,e,n){var i;return(null==t||""===t||!this._isHostDifferent(t,n))&&(i=[n.pathname,n.search,n.hash].join(""),"[object String]"==={}.toString.call(e)&&(this._getPath(e)===this._getPath(i)&&this._equal(this._getQuery(e),this._getQuery(i))&&!this._equal(this._getHash(e),this._getHash(i))))},e.prototype._redirect=function(e,i,r){var o;return t.isFunction(e.redirect)?e.redirect.call(this,r):(o="[object String]"==={}.toString.call(e.host)?""+e.host+r:r,this._debug("Redirect to "+o),this._getState("redirect_to")!==""+i?(this._setState("redirect_to",""+i),n.location.href=o):(this._debug("Error redirection loop to "+r),this._removeState("redirect_to"),null!=e.onRedirectError?e.onRedirectError(this):void 0))},e.prototype._isOrphan=function(e){return null==e.element||!t(e.element).length||t(e.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==t(e.element)[0].namespaceURI},e.prototype._isLast=function(){return this._current<this._options.steps.length-1},e.prototype._showPopover=function(e,n){var i,r,o,a,s;if(t(".tour-"+this._options.name).remove(),a=t.extend({},this._options),o=this._isOrphan(e),e.template=this._template(e,n),o&&(e.element="body",e.placement="top"),i=t(e.element),i.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+n+"-element"),e.options&&t.extend(a,e.options),e.reflex&&!o&&t(e.reflexElement).addClass("tour-step-element-reflex").off(""+this._reflexEvent(e.reflex)+".tour-"+this._options.name).on(""+this._reflexEvent(e.reflex)+".tour-"+this._options.name,function(t){return function(){return t._isLast()?t.next():t.end()}}(this)),s=e.smartPlacement===!0&&e.placement.search(/auto/i)===-1,i.popover({placement:s?"auto "+e.placement:e.placement,trigger:"manual",title:e.title,content:e.content,html:!0,animation:e.animation,container:e.container,template:e.template,selector:e.element}).popover("show"),r=i.data("bs.popover")?i.data("bs.popover").tip():i.data("popover").tip(),r.attr("id",e.id),this._focus(r,i,e.next<0),this._reposition(r,e),o)return this._center(r)},e.prototype._template=function(e,n){var i,r,o,a,s,l;return l=e.template,this._isOrphan(e)&&"[object Boolean]"!=={}.toString.call(e.orphan)&&(l=e.orphan),s=t(t.isFunction(l)?l(n,e):l),i=s.find(".popover-navigation"),o=i.find('[data-role="prev"]'),r=i.find('[data-role="next"]'),a=i.find('[data-role="pause-resume"]'),this._isOrphan(e)&&s.addClass("orphan"),s.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+n),e.reflex&&s.addClass("tour-"+this._options.name+"-reflex"),e.prev<0&&o.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),e.next<0&&r.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),e.duration||a.remove(),s.clone().wrap("<div>").parent().html()},e.prototype._reflexEvent=function(t){return"[object Boolean]"==={}.toString.call(t)?"click":t},e.prototype._focus=function(t,e,n){var i,r;return r=n?"end":"next",i=t.find("[data-role='"+r+"']"),e.on("shown.bs.popover",function(){return i.focus()})},e.prototype._reposition=function(e,i){var r,o,a,s,l,u,c;if(s=e[0].offsetWidth,o=e[0].offsetHeight,c=e.offset(),l=c.left,u=c.top,r=t(n).outerHeight()-c.top-e.outerHeight(),r<0&&(c.top=c.top+r),a=t("html").outerWidth()-c.left-e.outerWidth(),a<0&&(c.left=c.left+a),c.top<0&&(c.top=0),c.left<0&&(c.left=0),e.offset(c),"bottom"===i.placement||"top"===i.placement){if(l!==c.left)return this._replaceArrow(e,2*(c.left-l),s,"left")}else if(u!==c.top)return this._replaceArrow(e,2*(c.top-u),o,"top")},e.prototype._center=function(e){return e.css("top",t(window).outerHeight()/2-e.outerHeight()/2)},e.prototype._replaceArrow=function(t,e,n,i){return t.find(".arrow").css(i,e?50*(1-e/n)+"%":"")},e.prototype._scrollIntoView=function(e,n){var i,r,o,a,s,l,u;if(i=t(e.element),!i.length)return n();switch(r=t(window),s=i.offset().top,a=i.outerHeight(),u=r.height(),l=0,e.placement){case"top":l=Math.max(0,s-u/2);break;case"left":case"right":l=Math.max(0,s+a/2-u/2);break;case"bottom":l=Math.max(0,s+a-u/2)}return this._debug("Scroll into view. ScrollTop: "+l+". Element offset: "+s+". Window height: "+u+"."),o=0,t("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(l)},function(t){return function(){if(2===++o)return n(),t._debug("Scroll into view.\nAnimation end element offset: "+i.offset().top+".\nWindow height: "+r.height()+".")}}(this))},e.prototype._onResize=function(e,n){return t(window).on("resize.tour-"+this._options.name,function(){return clearTimeout(n),n=setTimeout(e,100)})},e.prototype._initMouseNavigation=function(){var e;return e=this,t(n).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(t){return function(e){return e.preventDefault(),t.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(t){return function(e){if(e.preventDefault(),t._current>0)return t.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(t){return function(e){return e.preventDefault(),t.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(n){var i;return n.preventDefault(),i=t(this),i.text(e._paused?i.data("pause-text"):i.data("resume-text")),e._paused?e.resume():e.pause()})},e.prototype._initKeyboardNavigation=function(){if(this._options.keyboard)return t(n).on("keyup.tour-"+this._options.name,function(t){return function(e){if(e.which)switch(e.which){case 39:return e.preventDefault(),t._isLast()?t.next():t.end();case 37:if(e.preventDefault(),t._current>0)return t.prev()}}}(this))},e.prototype._makePromise=function(e){return e&&t.isFunction(e.then)?e:null},e.prototype._callOnPromiseDone=function(t,e,n){return t?t.then(function(t){return function(i){return e.call(t,n)}}(this)):e.call(this,n)},e.prototype._showBackdrop=function(e){if(!this.backdrop.backgroundShown)return this.backdrop=t("<div>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,t(e.backdropContainer).append(this.backdrop)},e.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},e.prototype._hideBackground=function(){if(this.backdrop&&this.backdrop.remove)return this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1},e.prototype._showOverlayElement=function(e,n){var i,r,o;if(r=t(e.element),i=t(e.backdropElement),r&&0!==r.length&&(!this.backdrop.overlayElementShown||n))return this.backdrop.overlayElementShown||(this.backdrop.$element=i.addClass("tour-step-backdrop"),this.backdrop.$background=t("<div>",{"class":"tour-step-background"}),this.backdrop.$background.appendTo(e.backdropContainer),this.backdrop.overlayElementShown=!0),o={width:i.innerWidth(),height:i.innerHeight(),offset:i.offset()},e.backdropPadding&&(o=this._applyBackdropPadding(e.backdropPadding,o)),this.backdrop.$background.width(o.width).height(o.height).offset(o.offset)},e.prototype._hideOverlayElement=function(){if(this.backdrop.overlayElementShown)return this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1},e.prototype._applyBackdropPadding=function(t,e){return"object"==typeof t?(null==t.top&&(t.top=0),null==t.right&&(t.right=0),null==t.bottom&&(t.bottom=0),null==t.left&&(t.left=0),e.offset.top=e.offset.top-t.top,e.offset.left=e.offset.left-t.left,e.width=e.width+t.left+t.right,e.height=e.height+t.top+t.bottom):(e.offset.top=e.offset.top-t,e.offset.left=e.offset.left-t,e.width=e.width+2*t,e.height=e.height+2*t),e},e.prototype._clearTimer=function(){return window.clearTimeout(this._timer),this._timer=null,this._duration=null},e.prototype._getProtocol=function(t){return t=t.split("://"),t.length>1?t[0]:"http"},e.prototype._getHost=function(t){return t=t.split("//"),t=t.length>1?t[1]:t[0],t.split("/")[0]},e.prototype._getPath=function(t){return t.replace(/\/?$/,"").split("?")[0].split("#")[0]},e.prototype._getQuery=function(t){return this._getParams(t,"?")},e.prototype._getHash=function(t){return this._getParams(t,"#")},e.prototype._getParams=function(t,e){var n,i,r,o,a;if(i=t.split(e),1===i.length)return{};for(i=i[1].split("&"),r={},o=0,a=i.length;o<a;o++)n=i[o],n=n.split("="),r[n[0]]=n[1]||"";return r},e.prototype._equal=function(t,e){var n,i,r,o,a,s;if("[object Object]"==={}.toString.call(t)&&"[object Object]"==={}.toString.call(e)){if(i=Object.keys(t),r=Object.keys(e),i.length!==r.length)return!1;for(n in t)if(o=t[n],!this._equal(e[n],o))return!1;return!0}if("[object Array]"==={}.toString.call(t)&&"[object Array]"==={}.toString.call(e)){if(t.length!==e.length)return!1;for(n=a=0,s=t.length;a<s;n=++a)if(o=t[n],!this._equal(o,e[n]))return!1;return!0}return t===e},e}()}),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),o="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||i.data("bs.tooltip",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue())return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=o[0].offsetWidth,d=o[0].offsetHeight;if(u){var f=s,p=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+d>p.bottom?"top":"top"==s&&c.top-d<p.top?"bottom":"right"==s&&c.right+h>p.width?"left":"left"==s&&c.left-h<p.left?"right":s,o.removeClass(f).addClass(s)}var g=this.getCalculatedOffset(s,c,h,d);this.applyPlacement(g,s);var m=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top+=a,e.left+=s,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=o&&(e.top=e.top+o-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(n),d=h?2*c.left-r+l:2*c.top-o+u,f=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][f],h)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=r.hoverState&&o.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}var r=this,o=t(this.$tip),a=t.Event("hide.bs."+this.type);
if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=window.SVGElement&&n instanceof window.SVGElement,a=i?{top:0,left:0}:o?null:e.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,s,l,a)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-a.scroll,l=e.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var u=e.left-o,c=e.left+o+n;u<a.left?r.left=a.left-u:c>a.right&&(r.left=a.left+a.width-c)}return r},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.popover"),o="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||i.data("bs.popover",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),function(t,e){return"function"==typeof define&&define.amd?define(["jquery"],function(n){return t.Tour=e(n)}):"object"==typeof exports?module.exports=e(require("jQuery")):t.Tour=e(t.jQuery)}(window,function(t){var e,n;return n=window.document,e=function(){function e(e){var n;try{n=window.localStorage}catch(i){n=!1}this._options=t.extend({name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:n,debug:!1,backdrop:!1,backdropContainer:"body",backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; Prev</button> <button class="btn btn-sm btn-default" data-role="next">Next &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm btn-default" data-role="end">End tour</button> </div> </div>',afterSetState:function(t,e){},afterGetState:function(t,e){},afterRemoveState:function(t){},onStart:function(t){},onEnd:function(t){},onShow:function(t){},onShown:function(t){},onHide:function(t){},onHidden:function(t){},onNext:function(t){},onPrev:function(t){},onPause:function(t,e){},onResume:function(t,e){},onRedirectError:function(t){}},e),this._force=!1,this._inited=!1,this._current=null,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return e.prototype.addSteps=function(t){var e,n,i;for(n=0,i=t.length;n<i;n++)e=t[n],this.addStep(e);return this},e.prototype.addStep=function(t){return this._options.steps.push(t),this},e.prototype.getStep=function(e){if(null!=this._options.steps[e])return t.extend({id:"step-"+e,path:"",host:"",placement:"right",title:"",content:"<p></p>",next:e===this._options.steps.length-1?-1:e+1,prev:e-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropContainer:this._options.backdropContainer,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,reflexElement:this._options.steps[e].element,backdropElement:this._options.steps[e].element,orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume,onRedirectError:this._options.onRedirectError},this._options.steps[e])},e.prototype.init=function(t){return this._force=t,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(t){return function(){return t.showStep(t._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},e.prototype.start=function(t){var e;return null==t&&(t=!1),this._inited||this.init(t),null===this._current&&(e=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(e,this.showStep,0)),this},e.prototype.next=function(){var t;return t=this.hideStep(this._current,this._current+1),this._callOnPromiseDone(t,this._showNextStep)},e.prototype.prev=function(){var t;return t=this.hideStep(this._current,this._current-1),this._callOnPromiseDone(t,this._showPrevStep)},e.prototype.goTo=function(t){var e;return e=this.hideStep(this._current,t),this._callOnPromiseDone(e,this.showStep,t)},e.prototype.end=function(){var e,i;return e=function(e){return function(i){if(t(n).off("click.tour-"+e._options.name),t(n).off("keyup.tour-"+e._options.name),t(window).off("resize.tour-"+e._options.name),e._setState("end","yes"),e._inited=!1,e._force=!1,e._clearTimer(),null!=e._options.onEnd)return e._options.onEnd(e)}}(this),i=this.hideStep(this._current),this._callOnPromiseDone(i,e)},e.prototype.ended=function(){return!this._force&&!!this._getState("end")},e.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this._removeState("redirect_to"),this.start()},e.prototype.pause=function(){var t;return t=this.getStep(this._current),t&&t.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,window.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=t.onPause?t.onPause(this,this._duration):void 0):this},e.prototype.resume=function(){var t;return t=this.getStep(this._current),t&&t.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||t.duration,this._timer=window.setTimeout(function(t){return function(){return t._isLast()?t.next():t.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=t.onResume&&this._duration!==t.duration?t.onResume(this,this._duration):void 0):this},e.prototype.hideStep=function(e,n){var i,r,o,a;if(a=this.getStep(e))return this._clearTimer(),o=this._makePromise(null!=a.onHide?a.onHide(this,e):void 0),r=function(i){return function(r){var o,s;if(o=t(a.element),o.data("bs.popover")||o.data("popover")||(o=t("body")),o.popover("destroy").removeClass("tour-"+i._options.name+"-element tour-"+i._options.name+"-"+e+"-element").removeData("bs.popover").focus(),a.reflex&&t(a.reflexElement).removeClass("tour-step-element-reflex").off(""+i._reflexEvent(a.reflex)+".tour-"+i._options.name),a.backdrop&&(s=null!=n&&i.getStep(n),s&&s.backdrop&&s.backdropElement===a.backdropElement||i._hideBackdrop()),null!=a.onHidden)return a.onHidden(i)}}(this),i=a.delay.hide||a.delay,"[object Number]"==={}.toString.call(i)&&i>0?(this._debug("Wait "+i+" milliseconds to hide the step "+(this._current+1)),window.setTimeout(function(t){return function(){return t._callOnPromiseDone(o,r)}}(this),i)):this._callOnPromiseDone(o,r),o},e.prototype.showStep=function(t){var e,i,r,o,a,s;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(s=this.getStep(t),s&&(a=t<this._current,i=this._makePromise(null!=s.onShow?s.onShow(this,t):void 0),this.setCurrentStep(t),e=function(){switch({}.toString.call(s.path)){case"[object Function]":return s.path();case"[object String]":return this._options.basePath+s.path;default:return s.path}}.call(this),!s.redirect||!this._isRedirect(s.host,e,n.location)||(this._redirect(s,t,e),this._isJustPathHashDifferent(s.host,e,n.location)))?(o=function(e){return function(n){var i;if(e._isOrphan(s)){if(s.orphan===!1)return e._debug("Skip the orphan step "+(e._current+1)+".\nOrphan option is false and the element does not exist or is hidden."),void(a?e._showPrevStep():e._showNextStep());e._debug("Show the orphan step "+(e._current+1)+". Orphans option is true.")}if(s.backdrop&&e._showBackdrop(s),i=function(){if(e.getCurrentStep()===t&&!e.ended())return null!=s.element&&s.backdrop&&e._showOverlayElement(s,!0),e._showPopover(s,t),null!=s.onShown&&s.onShown(e),e._debug("Step "+(e._current+1)+" of "+e._options.steps.length)},s.autoscroll?e._scrollIntoView(s,i):i(),s.duration)return e.resume()}}(this),r=s.delay.show||s.delay,"[object Number]"==={}.toString.call(r)&&r>0?(this._debug("Wait "+r+" milliseconds to show the step "+(this._current+1)),window.setTimeout(function(t){return function(){return t._callOnPromiseDone(i,o)}}(this),r)):this._callOnPromiseDone(i,o),i):void 0)},e.prototype.getCurrentStep=function(){return this._current},e.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this._setState("current_step",t)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},e.prototype.redraw=function(){return this._showOverlayElement(this.getStep(this.getCurrentStep()).element,!0)},e.prototype._setState=function(t,e){var n,i;if(this._options.storage){i=""+this._options.name+"_"+t;try{this._options.storage.setItem(i,e)}catch(r){n=r,n.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(i,e)}return null==this._state&&(this._state={}),this._state[t]=e},e.prototype._removeState=function(t){var e;return this._options.storage?(e=""+this._options.name+"_"+t,this._options.storage.removeItem(e),this._options.afterRemoveState(e)):null!=this._state?delete this._state[t]:void 0},e.prototype._getState=function(t){var e,n;return this._options.storage?(e=""+this._options.name+"_"+t,n=this._options.storage.getItem(e)):null!=this._state&&(n=this._state[t]),void 0!==n&&"null"!==n||(n=null),this._options.afterGetState(t,n),n},e.prototype._showNextStep=function(){var t,e,n;return n=this.getStep(this._current),e=function(t){return function(e){return t.showStep(n.next)}}(this),t=this._makePromise(null!=n.onNext?n.onNext(this):void 0),this._callOnPromiseDone(t,e)},e.prototype._showPrevStep=function(){var t,e,n;return n=this.getStep(this._current),e=function(t){return function(e){return t.showStep(n.prev)}}(this),t=this._makePromise(null!=n.onPrev?n.onPrev(this):void 0),this._callOnPromiseDone(t,e)},e.prototype._debug=function(t){if(this._options.debug)return window.console.log("Bootstrap Tour '"+this._options.name+"' | "+t)},e.prototype._isRedirect=function(t,e,n){var i;return!(null==t||""===t||!("[object RegExp]"==={}.toString.call(t)&&!t.test(n.origin)||"[object String]"==={}.toString.call(t)&&this._isHostDifferent(t,n)))||(i=[n.pathname,n.search,n.hash].join(""),null!=e&&""!==e&&("[object RegExp]"==={}.toString.call(e)&&!e.test(i)||"[object String]"==={}.toString.call(e)&&this._isPathDifferent(e,i)))},e.prototype._isHostDifferent=function(t,e){switch({}.toString.call(t)){case"[object RegExp]":return!t.test(e.origin);case"[object String]":return this._getProtocol(t)!==this._getProtocol(e.href)||this._getHost(t)!==this._getHost(e.href);default:return!0}},e.prototype._isPathDifferent=function(t,e){return this._getPath(t)!==this._getPath(e)||!this._equal(this._getQuery(t),this._getQuery(e))||!this._equal(this._getHash(t),this._getHash(e))},e.prototype._isJustPathHashDifferent=function(t,e,n){var i;return(null==t||""===t||!this._isHostDifferent(t,n))&&(i=[n.pathname,n.search,n.hash].join(""),"[object String]"==={}.toString.call(e)&&(this._getPath(e)===this._getPath(i)&&this._equal(this._getQuery(e),this._getQuery(i))&&!this._equal(this._getHash(e),this._getHash(i))))},e.prototype._redirect=function(e,i,r){var o;return t.isFunction(e.redirect)?e.redirect.call(this,r):(o="[object String]"==={}.toString.call(e.host)?""+e.host+r:r,this._debug("Redirect to "+o),this._getState("redirect_to")!==""+i?(this._setState("redirect_to",""+i),n.location.href=o):(this._debug("Error redirection loop to "+r),this._removeState("redirect_to"),null!=e.onRedirectError?e.onRedirectError(this):void 0))},e.prototype._isOrphan=function(e){return null==e.element||!t(e.element).length||t(e.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==t(e.element)[0].namespaceURI},e.prototype._isLast=function(){return this._current<this._options.steps.length-1},e.prototype._showPopover=function(e,n){var i,r,o,a,s;if(t(".tour-"+this._options.name).remove(),a=t.extend({},this._options),o=this._isOrphan(e),e.template=this._template(e,n),o&&(e.element="body",e.placement="top"),i=t(e.element),i.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+n+"-element"),e.options&&t.extend(a,e.options),e.reflex&&!o&&t(e.reflexElement).addClass("tour-step-element-reflex").off(""+this._reflexEvent(e.reflex)+".tour-"+this._options.name).on(""+this._reflexEvent(e.reflex)+".tour-"+this._options.name,function(t){return function(){return t._isLast()?t.next():t.end()}}(this)),s=e.smartPlacement===!0&&e.placement.search(/auto/i)===-1,i.popover({placement:s?"auto "+e.placement:e.placement,trigger:"manual",title:e.title,content:e.content,html:!0,animation:e.animation,container:e.container,template:e.template,selector:e.element}).popover("show"),r=i.data("bs.popover")?i.data("bs.popover").tip():i.data("popover").tip(),r.attr("id",e.id),this._focus(r,i,e.next<0),this._reposition(r,e),o)return this._center(r)},e.prototype._template=function(e,n){var i,r,o,a,s,l;return l=e.template,this._isOrphan(e)&&"[object Boolean]"!=={}.toString.call(e.orphan)&&(l=e.orphan),s=t(t.isFunction(l)?l(n,e):l),i=s.find(".popover-navigation"),o=i.find('[data-role="prev"]'),r=i.find('[data-role="next"]'),a=i.find('[data-role="pause-resume"]'),this._isOrphan(e)&&s.addClass("orphan"),s.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+n),e.reflex&&s.addClass("tour-"+this._options.name+"-reflex"),e.prev<0&&o.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),e.next<0&&r.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),e.duration||a.remove(),s.clone().wrap("<div>").parent().html()},e.prototype._reflexEvent=function(t){return"[object Boolean]"==={}.toString.call(t)?"click":t},e.prototype._focus=function(t,e,n){var i,r;return r=n?"end":"next",i=t.find("[data-role='"+r+"']"),e.on("shown.bs.popover",function(){return i.focus()})},e.prototype._reposition=function(e,i){var r,o,a,s,l,u,c;if(s=e[0].offsetWidth,o=e[0].offsetHeight,c=e.offset(),l=c.left,u=c.top,r=t(n).outerHeight()-c.top-e.outerHeight(),r<0&&(c.top=c.top+r),a=t("html").outerWidth()-c.left-e.outerWidth(),a<0&&(c.left=c.left+a),c.top<0&&(c.top=0),c.left<0&&(c.left=0),e.offset(c),"bottom"===i.placement||"top"===i.placement){if(l!==c.left)return this._replaceArrow(e,2*(c.left-l),s,"left")}else if(u!==c.top)return this._replaceArrow(e,2*(c.top-u),o,"top")},e.prototype._center=function(e){return e.css("top",t(window).outerHeight()/2-e.outerHeight()/2)},e.prototype._replaceArrow=function(t,e,n,i){return t.find(".arrow").css(i,e?50*(1-e/n)+"%":"")},e.prototype._scrollIntoView=function(e,n){var i,r,o,a,s,l,u;if(i=t(e.element),!i.length)return n();switch(r=t(window),s=i.offset().top,a=i.outerHeight(),u=r.height(),l=0,e.placement){case"top":l=Math.max(0,s-u/2);break;case"left":case"right":l=Math.max(0,s+a/2-u/2);break;case"bottom":l=Math.max(0,s+a-u/2)}return this._debug("Scroll into view. ScrollTop: "+l+". Element offset: "+s+". Window height: "+u+"."),o=0,t("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(l)},function(t){return function(){if(2===++o)return n(),t._debug("Scroll into view.\nAnimation end element offset: "+i.offset().top+".\nWindow height: "+r.height()+".")}}(this))},e.prototype._onResize=function(e,n){return t(window).on("resize.tour-"+this._options.name,function(){return clearTimeout(n),n=setTimeout(e,100)})},e.prototype._initMouseNavigation=function(){var e;return e=this,t(n).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(t){return function(e){return e.preventDefault(),t.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(t){return function(e){if(e.preventDefault(),t._current>0)return t.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(t){return function(e){return e.preventDefault(),t.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(n){var i;return n.preventDefault(),i=t(this),i.text(e._paused?i.data("pause-text"):i.data("resume-text")),e._paused?e.resume():e.pause()})},e.prototype._initKeyboardNavigation=function(){if(this._options.keyboard)return t(n).on("keyup.tour-"+this._options.name,function(t){return function(e){if(e.which)switch(e.which){case 39:return e.preventDefault(),t._isLast()?t.next():t.end();case 37:if(e.preventDefault(),t._current>0)return t.prev()}}}(this))},e.prototype._makePromise=function(e){return e&&t.isFunction(e.then)?e:null},e.prototype._callOnPromiseDone=function(t,e,n){return t?t.then(function(t){return function(i){return e.call(t,n)}}(this)):e.call(this,n)},e.prototype._showBackdrop=function(e){if(!this.backdrop.backgroundShown)return this.backdrop=t("<div>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,t(e.backdropContainer).append(this.backdrop)},e.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},e.prototype._hideBackground=function(){if(this.backdrop&&this.backdrop.remove)return this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1},e.prototype._showOverlayElement=function(e,n){var i,r,o;if(r=t(e.element),i=t(e.backdropElement),r&&0!==r.length&&(!this.backdrop.overlayElementShown||n))return this.backdrop.overlayElementShown||(this.backdrop.$element=i.addClass("tour-step-backdrop"),this.backdrop.$background=t("<div>",{"class":"tour-step-background"}),this.backdrop.$background.appendTo(e.backdropContainer),this.backdrop.overlayElementShown=!0),o={width:i.innerWidth(),height:i.innerHeight(),offset:i.offset()},e.backdropPadding&&(o=this._applyBackdropPadding(e.backdropPadding,o)),this.backdrop.$background.width(o.width).height(o.height).offset(o.offset)},e.prototype._hideOverlayElement=function(){if(this.backdrop.overlayElementShown)return this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1},e.prototype._applyBackdropPadding=function(t,e){return"object"==typeof t?(null==t.top&&(t.top=0),null==t.right&&(t.right=0),null==t.bottom&&(t.bottom=0),null==t.left&&(t.left=0),e.offset.top=e.offset.top-t.top,e.offset.left=e.offset.left-t.left,e.width=e.width+t.left+t.right,e.height=e.height+t.top+t.bottom):(e.offset.top=e.offset.top-t,e.offset.left=e.offset.left-t,e.width=e.width+2*t,e.height=e.height+2*t),e},e.prototype._clearTimer=function(){return window.clearTimeout(this._timer),this._timer=null,this._duration=null},e.prototype._getProtocol=function(t){return t=t.split("://"),t.length>1?t[0]:"http"},e.prototype._getHost=function(t){return t=t.split("//"),t=t.length>1?t[1]:t[0],t.split("/")[0]},e.prototype._getPath=function(t){return t.replace(/\/?$/,"").split("?")[0].split("#")[0]},e.prototype._getQuery=function(t){return this._getParams(t,"?")},e.prototype._getHash=function(t){return this._getParams(t,"#")},e.prototype._getParams=function(t,e){var n,i,r,o,a;if(i=t.split(e),1===i.length)return{};for(i=i[1].split("&"),r={},o=0,a=i.length;o<a;o++)n=i[o],n=n.split("="),r[n[0]]=n[1]||"";return r},e.prototype._equal=function(t,e){var n,i,r,o,a,s;if("[object Object]"==={}.toString.call(t)&&"[object Object]"==={}.toString.call(e)){if(i=Object.keys(t),r=Object.keys(e),i.length!==r.length)return!1;for(n in t)if(o=t[n],!this._equal(e[n],o))return!1;return!0}if("[object Array]"==={}.toString.call(t)&&"[object Array]"==={}.toString.call(e)){if(t.length!==e.length)return!1;for(n=a=0,s=t.length;a<s;n=++a)if(o=t[n],!this._equal(o,e[n]))return!1;return!0}return t===e},e}()}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Ti.apply(null,arguments)}function e(t){Ti=t}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function r(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function o(t){return void 0===t}function a(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function s(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function l(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var n in e)u(e,n)&&(t[n]=e[n]);return u(e,"toString")&&(t.toString=e.toString),u(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e,n,i){return Ce(t,e,n,i,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(t){return null==t._pf&&(t._pf=d()),t._pf}function p(t){if(null==t._isValid){var e=f(t),n=Ei.call(e.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function g(t){var e=h(NaN);return null!=t?c(f(e),t):f(e).userInvalidated=!0,e}function m(t,e){var n,i,r;if(o(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),o(e._i)||(t._i=e._i),o(e._f)||(t._f=e._f),o(e._l)||(t._l=e._l),o(e._strict)||(t._strict=e._strict),o(e._tzm)||(t._tzm=e._tzm),o(e._isUTC)||(t._isUTC=e._isUTC),o(e._offset)||(t._offset=e._offset),o(e._pf)||(t._pf=f(e)),o(e._locale)||(t._locale=e._locale),Oi.length>0)for(n=0;n<Oi.length;n++)i=Oi[n],r=e[i],o(r)||(t[i]=r);return t}function v(e){m(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Ai===!1&&(Ai=!0,t.updateOffset(this),Ai=!1)}function y(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function b(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function w(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=b(e)),n}function x(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&w(t[i])!==w(e[i]))&&a++;return a+o}function _(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function k(e,n){var i=!0;return c(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),i){for(var r,o=[],a=0;a<arguments.length;a++){if(r="","object"==typeof arguments[a]){r+="\n["+a+"] ";for(var s in arguments[0])r+=s+": "+arguments[0][s]+", ";r=r.slice(0,-2)}else r=arguments[a];o.push(r)}_(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),i=!1}return n.apply(this,arguments)},n)}function C(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),Di[e]||(_(n),Di[e]=!0)}function S(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function M(t){var e,n;for(n in t)e=t[n],S(e)?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function T(t,e){var n,r=c({},t);for(n in e)u(e,n)&&(i(t[n])&&i(e[n])?(r[n]={},c(r[n],t[n]),c(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)u(t,n)&&!u(e,n)&&i(t[n])&&(r[n]=c({},r[n]));return r}function E(t){null!=t&&this.set(t)}function O(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return S(i)?i.call(e,n):i}function A(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function D(){return this._invalidDate}function R(t){return this._ordinal.replace("%d",t)}function P(t,e,n,i){var r=this._relativeTime[n];return S(r)?r(t,e,n,i):r.replace(/%d/i,t)}function N(t,e){var n=this._relativeTime[t>0?"future":"past"];return S(n)?n(e):n.replace(/%s/i,e)}function z(t,e){var n=t.toLowerCase();ji[n]=ji[n+"s"]=ji[e]=t}function L(t){return"string"==typeof t?ji[t]||ji[t.toLowerCase()]:void 0}function I(t){var e,n,i={};for(n in t)u(t,n)&&(e=L(n),e&&(i[e]=t[n]));return i}function H(t,e){Fi[t]=e}function j(t){var e=[];for(var n in t)e.push({unit:n,priority:Fi[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}function F(t,e,n){var i=""+Math.abs(t),r=e-i.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function B(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(Vi[t]=r),e&&(Vi[e[0]]=function(){return F(r.apply(this,arguments),e[1],e[2])}),n&&(Vi[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function W(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Y(t){var e,n,i=t.match(Bi);for(e=0,n=i.length;e<n;e++)Vi[i[e]]?i[e]=Vi[i[e]]:i[e]=W(i[e]);return function(e){var r,o="";for(r=0;r<n;r++)o+=S(i[r])?i[r].call(e,t):i[r];return o}}function V(t,e){return t.isValid()?(e=U(e,t.localeData()),Yi[e]=Yi[e]||Y(e),Yi[e](t)):t.localeData().invalidDate()}function U(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Wi.lastIndex=0;i>=0&&Wi.test(t);)t=t.replace(Wi,n),Wi.lastIndex=0,i-=1;return t}function q(t,e,n){lr[t]=S(e)?e:function(t,i){return t&&n?n:e}}function X(t,e){return u(lr,t)?lr[t](e._strict,e._locale):new RegExp(G(t))}function G(t){return $(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r}))}function $(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),a(e)&&(i=function(t,n){n[e]=w(t)}),n=0;n<t.length;n++)ur[t[n]]=i}function Z(t,e){K(t,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function Q(t,e,n){null!=e&&u(ur,t)&&ur[t](e,n._a,n,t)}function J(t){return tt(t)?366:365}function tt(t){return t%4===0&&t%100!==0||t%400===0}function et(){return tt(this.year())}function nt(e,n){return function(i){return null!=i?(rt(this,e,i),t.updateOffset(this,n),this):it(this,e)}}function it(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function rt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&tt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),lt(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function ot(t){return t=L(t),S(this[t])?this[t]():this}function at(t,e){if("object"==typeof t){t=I(t);for(var n=j(t),i=0;i<n.length;i++)this[n[i].unit](t[n[i].unit])}else if(t=L(t),S(this[t]))return this[t](e);return this}function st(t,e){return(t%e+e)%e}function lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=st(e,12);return t+=(e-n)/12,1===n?tt(t)?29:28:31-n%7%2}function ut(t,e){return t?n(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||xr).test(e)?"format":"standalone"][t.month()]:n(this._months)?this._months:this._months.standalone}function ct(t,e){return t?n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[xr.test(e)?"format":"standalone"][t.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ht(t,e,n){var i,r,o,a=t.toLocaleLowerCase();
if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=h([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?(r=br.call(this._shortMonthsParse,a),r!==-1?r:null):(r=br.call(this._longMonthsParse,a),r!==-1?r:null):"MMM"===e?(r=br.call(this._shortMonthsParse,a),r!==-1?r:(r=br.call(this._longMonthsParse,a),r!==-1?r:null)):(r=br.call(this._longMonthsParse,a),r!==-1?r:(r=br.call(this._shortMonthsParse,a),r!==-1?r:null))}function dt(t,e,n){var i,r,o;if(this._monthsParseExact)return ht.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=h([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function ft(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=w(e);else if(e=t.localeData().monthsParse(e),!a(e))return t;return n=Math.min(t.date(),lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function pt(e){return null!=e?(ft(this,e),t.updateOffset(this,!0),this):it(this,"Month")}function gt(){return lt(this.year(),this.month())}function mt(t){return this._monthsParseExact?(u(this,"_monthsRegex")||yt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Cr),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function vt(t){return this._monthsParseExact?(u(this,"_monthsRegex")||yt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=Sr),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function yt(){function t(t,e){return e.length-t.length}var e,n,i=[],r=[],o=[];for(e=0;e<12;e++)n=h([2e3,e]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(t),r.sort(t),o.sort(t),e=0;e<12;e++)i[e]=$(i[e]),r[e]=$(r[e]);for(e=0;e<24;e++)o[e]=$(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function bt(t,e,n,i,r,o,a){var s=new Date(t,e,n,i,r,o,a);return t<100&&t>=0&&isFinite(s.getFullYear())&&s.setFullYear(t),s}function wt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function xt(t,e,n){var i=7+e-n,r=(7+wt(t,0,i).getUTCDay()-e)%7;return-r+i-1}function _t(t,e,n,i,r){var o,a,s=(7+n-i)%7,l=xt(t,i,r),u=1+7*(e-1)+s+l;return u<=0?(o=t-1,a=J(o)+u):u>J(t)?(o=t+1,a=u-J(t)):(o=t,a=u),{year:o,dayOfYear:a}}function kt(t,e,n){var i,r,o=xt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?(r=t.year()-1,i=a+Ct(r,e,n)):a>Ct(t.year(),e,n)?(i=a-Ct(t.year(),e,n),r=t.year()+1):(r=t.year(),i=a),{week:i,year:r}}function Ct(t,e,n){var i=xt(t,e,n),r=xt(t+1,e,n);return(J(t)-i+r)/7}function St(t){return kt(t,this._week.dow,this._week.doy).week}function Mt(){return this._week.dow}function Tt(){return this._week.doy}function Et(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ot(t){var e=kt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function At(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Dt(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Rt(t,e){return t?n(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone}function Pt(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Nt(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function zt(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=h([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?(r=br.call(this._weekdaysParse,a),r!==-1?r:null):"ddd"===e?(r=br.call(this._shortWeekdaysParse,a),r!==-1?r:null):(r=br.call(this._minWeekdaysParse,a),r!==-1?r:null):"dddd"===e?(r=br.call(this._weekdaysParse,a),r!==-1?r:(r=br.call(this._shortWeekdaysParse,a),r!==-1?r:(r=br.call(this._minWeekdaysParse,a),r!==-1?r:null))):"ddd"===e?(r=br.call(this._shortWeekdaysParse,a),r!==-1?r:(r=br.call(this._weekdaysParse,a),r!==-1?r:(r=br.call(this._minWeekdaysParse,a),r!==-1?r:null))):(r=br.call(this._minWeekdaysParse,a),r!==-1?r:(r=br.call(this._weekdaysParse,a),r!==-1?r:(r=br.call(this._shortWeekdaysParse,a),r!==-1?r:null)))}function Lt(t,e,n){var i,r,o;if(this._weekdaysParseExact)return zt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=h([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function It(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=At(t,this.localeData()),this.add(t-e,"d")):e}function Ht(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function jt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Dt(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Ft(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=Ar),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Bt(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Dr),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Wt(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Rr),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Yt(){function t(t,e){return e.length-t.length}var e,n,i,r,o,a=[],s=[],l=[],u=[];for(e=0;e<7;e++)n=h([2e3,1]).day(e),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(i),s.push(r),l.push(o),u.push(i),u.push(r),u.push(o);for(a.sort(t),s.sort(t),l.sort(t),u.sort(t),e=0;e<7;e++)s[e]=$(s[e]),l[e]=$(l[e]),u[e]=$(u[e]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Vt(){return this.hours()%12||12}function Ut(){return this.hours()||24}function qt(t,e){B(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Xt(t,e){return e._meridiemParse}function Gt(t){return"p"===(t+"").toLowerCase().charAt(0)}function $t(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function Kt(t){return t?t.toLowerCase().replace("_","-"):t}function Zt(t){for(var e,n,i,r,o=0;o<t.length;){for(r=Kt(t[o]).split("-"),e=r.length,n=Kt(t[o+1]),n=n?n.split("-"):null;e>0;){if(i=Qt(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&x(r,n,!0)>=e-1)break;e--}o++}return null}function Qt(t){var e=null;if(!Ir[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Pr._abbr;var n=require;n("./locale/"+t),Jt(e)}catch(i){}return Ir[t]}function Jt(t,e){var n;return t&&(n=o(e)?ne(t):te(t,e),n&&(Pr=n)),Pr._abbr}function te(t,e){if(null!==e){var n=Lr;if(e.abbr=t,null!=Ir[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Ir[t]._config;else if(null!=e.parentLocale){if(null==Ir[e.parentLocale])return Hr[e.parentLocale]||(Hr[e.parentLocale]=[]),Hr[e.parentLocale].push({name:t,config:e}),null;n=Ir[e.parentLocale]._config}return Ir[t]=new E(T(n,e)),Hr[t]&&Hr[t].forEach(function(t){te(t.name,t.config)}),Jt(t),Ir[t]}return delete Ir[t],null}function ee(t,e){if(null!=e){var n,i,r=Lr;i=Qt(t),null!=i&&(r=i._config),e=T(r,e),n=new E(e),n.parentLocale=Ir[t],Ir[t]=n,Jt(t)}else null!=Ir[t]&&(null!=Ir[t].parentLocale?Ir[t]=Ir[t].parentLocale:null!=Ir[t]&&delete Ir[t]);return Ir[t]}function ne(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Pr;if(!n(t)){if(e=Qt(t))return e;t=[t]}return Zt(t)}function ie(){return Ri(Ir)}function re(t){var e,n=t._a;return n&&f(t).overflow===-2&&(e=n[hr]<0||n[hr]>11?hr:n[dr]<1||n[dr]>lt(n[cr],n[hr])?dr:n[fr]<0||n[fr]>24||24===n[fr]&&(0!==n[pr]||0!==n[gr]||0!==n[mr])?fr:n[pr]<0||n[pr]>59?pr:n[gr]<0||n[gr]>59?gr:n[mr]<0||n[mr]>999?mr:-1,f(t)._overflowDayOfYear&&(e<cr||e>dr)&&(e=dr),f(t)._overflowWeeks&&e===-1&&(e=vr),f(t)._overflowWeekday&&e===-1&&(e=yr),f(t).overflow=e),t}function oe(t,e,n){return null!=t?t:null!=e?e:n}function ae(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function se(t){var e,n,i,r,o,a=[];if(!t._d){for(i=ae(t),t._w&&null==t._a[dr]&&null==t._a[hr]&&le(t),null!=t._dayOfYear&&(o=oe(t._a[cr],i[cr]),(t._dayOfYear>J(o)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),n=wt(o,0,t._dayOfYear),t._a[hr]=n.getUTCMonth(),t._a[dr]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[fr]&&0===t._a[pr]&&0===t._a[gr]&&0===t._a[mr]&&(t._nextDay=!0,t._a[fr]=0),t._d=(t._useUTC?wt:bt).apply(null,a),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[fr]=24),t._w&&"undefined"!=typeof t._w.d&&t._w.d!==r&&(f(t).weekdayMismatch=!0)}}function le(t){var e,n,i,r,o,a,s,l;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)o=1,a=4,n=oe(e.GG,t._a[cr],kt(Se(),1,4).year),i=oe(e.W,1),r=oe(e.E,1),(r<1||r>7)&&(l=!0);else{o=t._locale._week.dow,a=t._locale._week.doy;var u=kt(Se(),o,a);n=oe(e.gg,t._a[cr],u.year),i=oe(e.w,u.week),null!=e.d?(r=e.d,(r<0||r>6)&&(l=!0)):null!=e.e?(r=e.e+o,(e.e<0||e.e>6)&&(l=!0)):r=o}i<1||i>Ct(n,o,a)?f(t)._overflowWeeks=!0:null!=l?f(t)._overflowWeekday=!0:(s=_t(n,i,r,o,a),t._a[cr]=s.year,t._dayOfYear=s.dayOfYear)}function ue(t){var e,n,i,r,o,a,s=t._i,l=jr.exec(s)||Fr.exec(s);if(l){for(f(t).iso=!0,e=0,n=Wr.length;e<n;e++)if(Wr[e][1].exec(l[1])){r=Wr[e][0],i=Wr[e][2]!==!1;break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,n=Yr.length;e<n;e++)if(Yr[e][1].exec(l[3])){o=(l[2]||" ")+Yr[e][0];break}if(null==o)return void(t._isValid=!1)}if(!i&&null!=o)return void(t._isValid=!1);if(l[4]){if(!Br.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=r+(o||"")+(a||""),ve(t)}else t._isValid=!1}function ce(t,e,n,i,r,o){var a=[he(t),kr.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return o&&a.push(parseInt(o,10)),a}function he(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function de(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function fe(t,e,n){if(t){var i=Er.indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r)return f(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function pe(t,e,n){if(t)return qr[t];if(e)return 0;var i=parseInt(n,10),r=i%100,o=(i-r)/100;return 60*o+r}function ge(t){var e=Ur.exec(de(t._i));if(e){var n=ce(e[4],e[3],e[2],e[5],e[6],e[7]);if(!fe(e[1],n,t))return;t._a=n,t._tzm=pe(e[8],e[9],e[10]),t._d=wt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0}else t._isValid=!1}function me(e){var n=Vr.exec(e._i);return null!==n?void(e._d=new Date((+n[1]))):(ue(e),void(e._isValid===!1&&(delete e._isValid,ge(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e)))))}function ve(e){if(e._f===t.ISO_8601)return void ue(e);if(e._f===t.RFC_2822)return void ge(e);e._a=[],f(e).empty=!0;var n,i,r,o,a,s=""+e._i,l=s.length,u=0;for(r=U(e._f,e._locale).match(Bi)||[],n=0;n<r.length;n++)o=r[n],i=(s.match(X(o,e))||[])[0],i&&(a=s.substr(0,s.indexOf(i)),a.length>0&&f(e).unusedInput.push(a),s=s.slice(s.indexOf(i)+i.length),u+=i.length),Vi[o]?(i?f(e).empty=!1:f(e).unusedTokens.push(o),Q(o,i,e)):e._strict&&!i&&f(e).unusedTokens.push(o);f(e).charsLeftOver=l-u,s.length>0&&f(e).unusedInput.push(s),e._a[fr]<=12&&f(e).bigHour===!0&&e._a[fr]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[fr]=ye(e._locale,e._a[fr],e._meridiem),se(e),re(e)}function ye(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&e<12&&(e+=12),i||12!==e||(e=0),e):e}function be(t){var e,n,i,r,o;if(0===t._f.length)return f(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],ve(e),p(e)&&(o+=f(e).charsLeftOver,o+=10*f(e).unusedTokens.length,f(e).score=o,(null==i||o<i)&&(i=o,n=e));c(t,n||e)}function we(t){if(!t._d){var e=I(t._i);t._a=l([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),se(t)}}function xe(t){var e=new v(re(_e(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function _e(t){var e=t._i,i=t._f;return t._locale=t._locale||ne(t._l),null===e||void 0===i&&""===e?g({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),y(e)?new v(re(e)):(s(e)?t._d=e:n(i)?be(t):i?ve(t):ke(t),p(t)||(t._d=null),t))}function ke(e){var r=e._i;o(r)?e._d=new Date(t.now()):s(r)?e._d=new Date(r.valueOf()):"string"==typeof r?me(e):n(r)?(e._a=l(r.slice(0),function(t){return parseInt(t,10)}),se(e)):i(r)?we(e):a(r)?e._d=new Date(r):t.createFromInputFallback(e)}function Ce(t,e,o,a,s){var l={};return o!==!0&&o!==!1||(a=o,o=void 0),(i(t)&&r(t)||n(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=o,l._i=t,l._f=e,l._strict=a,xe(l)}function Se(t,e,n,i){return Ce(t,e,n,i,!1)}function Me(t,e){var i,r;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return Se();for(i=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](i)||(i=e[r]);return i}function Te(){var t=[].slice.call(arguments,0);return Me("isBefore",t)}function Ee(){var t=[].slice.call(arguments,0);return Me("isAfter",t)}function Oe(t){for(var e in t)if(br.call(Kr,e)===-1||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,i=0;i<Kr.length;++i)if(t[Kr[i]]){if(n)return!1;parseFloat(t[Kr[i]])!==w(t[Kr[i]])&&(n=!0)}return!0}function Ae(){return this._isValid}function De(){return Ke(NaN)}function Re(t){var e=I(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||0,a=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=Oe(e),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=ne(),this._bubble()}function Pe(t){return t instanceof Re}function Ne(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function ze(t,e){B(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+F(~~(t/60),2)+e+F(~~t%60,2)})}function Le(t,e){var n=(e||"").match(t);if(null===n)return null;var i=n[n.length-1]||[],r=(i+"").match(Zr)||["-",0,0],o=+(60*r[1])+w(r[2]);return 0===o?0:"+"===r[0]?o:-o}function Ie(e,n){var i,r;return n._isUTC?(i=n.clone(),r=(y(e)||s(e)?e.valueOf():Se(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+r),t.updateOffset(i,!1),i):Se(e).local()}function He(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function je(e,n,i){var r,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(e=Le(or,e),null===e)return this}else Math.abs(e)<16&&!i&&(e=60*e);return!this._isUTC&&n&&(r=He(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==e&&(!n||this._changeInProgress?en(this,Ke(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:He(this)}function Fe(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Be(t){return this.utcOffset(0,t)}function We(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(He(this),"m")),this}function Ye(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Le(rr,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Ve(t){return!!this.isValid()&&(t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function Ue(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qe(){if(!o(this._isDSTShifted))return this._isDSTShifted;var t={};if(m(t,this),t=_e(t),t._a){var e=t._isUTC?h(t._a):Se(t._a);this._isDSTShifted=this.isValid()&&x(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Xe(){return!!this.isValid()&&!this._isUTC}function Ge(){return!!this.isValid()&&this._isUTC}function $e(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ke(t,e){var n,i,r,o=t,s=null;return Pe(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:a(t)?(o={},e?o[e]=t:o.milliseconds=t):(s=Qr.exec(t))?(n="-"===s[1]?-1:1,o={y:0,d:w(s[dr])*n,h:w(s[fr])*n,m:w(s[pr])*n,s:w(s[gr])*n,ms:w(Ne(1e3*s[mr]))*n}):(s=Jr.exec(t))?(n="-"===s[1]?-1:("+"===s[1],1),o={y:Ze(s[2],n),M:Ze(s[3],n),w:Ze(s[4],n),d:Ze(s[5],n),h:Ze(s[6],n),m:Ze(s[7],n),s:Ze(s[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Je(Se(o.from),Se(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),i=new Re(o),Pe(t)&&u(t,"_locale")&&(i._locale=t._locale),i}function Ze(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Qe(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Je(t,e){var n;return t.isValid()&&e.isValid()?(e=Ie(e,t),t.isBefore(e)?n=Qe(t,e):(n=Qe(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function tn(t,e){return function(n,i){var r,o;return null===i||isNaN(+i)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=Ke(n,i),en(this,r,t),this}}function en(e,n,i,r){var o=n._milliseconds,a=Ne(n._days),s=Ne(n._months);e.isValid()&&(r=null==r||r,s&&ft(e,it(e,"Month")+s*i),a&&rt(e,"Date",it(e,"Date")+a*i),o&&e._d.setTime(e._d.valueOf()+o*i),r&&t.updateOffset(e,a||s))}function nn(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function rn(e,n){var i=e||Se(),r=Ie(i,this).startOf("day"),o=t.calendarFormat(this,r)||"sameElse",a=n&&(S(n[o])?n[o].call(this,i):n[o]);return this.format(a||this.localeData().calendar(o,this,Se(i)))}function on(){return new v(this)}function an(t,e){var n=y(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&(e=L(o(e)?"millisecond":e),"millisecond"===e?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function sn(t,e){var n=y(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&(e=L(o(e)?"millisecond":e),"millisecond"===e?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function ln(t,e,n,i){return i=i||"()",("("===i[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===i[1]?this.isBefore(e,n):!this.isAfter(e,n))}function un(t,e){var n,i=y(t)?t:Se(t);return!(!this.isValid()||!i.isValid())&&(e=L(e||"millisecond"),"millisecond"===e?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function cn(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function hn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function dn(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(i=Ie(t,this),!i.isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),e=L(e)){case"year":o=fn(this,i)/12;break;case"month":o=fn(this,i);break;case"quarter":o=fn(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:b(o)}function fn(t,e){var n,i,r=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(r,"months");return e-o<0?(n=t.clone().add(r-1,"months"),i=(e-o)/(o-n)):(n=t.clone().add(r+1,"months"),i=(e-o)/(n-o)),-(r+i)||0}function pn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function gn(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?V(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):S(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",V(n,"Z")):V(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function mn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]';return this.format(n+i+r+o)}function vn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=V(this,e);return this.localeData().postformat(n)}function yn(t,e){return this.isValid()&&(y(t)&&t.isValid()||Se(t).isValid())?Ke({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function bn(t){return this.from(Se(),t)}function wn(t,e){return this.isValid()&&(y(t)&&t.isValid()||Se(t).isValid())?Ke({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function xn(t){return this.to(Se(),t)}function _n(t){var e;return void 0===t?this._locale._abbr:(e=ne(t),null!=e&&(this._locale=e),this)}function kn(){return this._locale}function Cn(t){switch(t=L(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function Sn(t){return t=L(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Mn(){return this._d.valueOf()-6e4*(this._offset||0)}function Tn(){return Math.floor(this.valueOf()/1e3)}function En(){return new Date(this.valueOf())}function On(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function An(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Dn(){return this.isValid()?this.toISOString():null}function Rn(){return p(this)}function Pn(){return c({},f(this))}function Nn(){return f(this).overflow}function zn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ln(t,e){B(0,[t,t.length],0,e)}function In(t){return Bn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Hn(t){return Bn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function jn(){return Ct(this.year(),1,4)}function Fn(){var t=this.localeData()._week;return Ct(this.year(),t.dow,t.doy)}function Bn(t,e,n,i,r){var o;return null==t?kt(this,i,r).year:(o=Ct(t,i,r),e>o&&(e=o),Wn.call(this,t,e,n,i,r))}function Wn(t,e,n,i,r){var o=_t(t,e,n,i,r),a=wt(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Yn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Vn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Un(t,e){e[mr]=w(1e3*("0."+t))}function qn(){return this._isUTC?"UTC":""}function Xn(){return this._isUTC?"Coordinated Universal Time":""}function Gn(t){return Se(1e3*t)}function $n(){return Se.apply(null,arguments).parseZone()}function Kn(t){return t}function Zn(t,e,n,i){var r=ne(),o=h().set(i,e);return r[n](o,t)}function Qn(t,e,n){if(a(t)&&(e=t,t=void 0),t=t||"",null!=e)return Zn(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=Zn(t,i,n,"month");return r}function Jn(t,e,n,i){"boolean"==typeof t?(a(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,a(e)&&(n=e,e=void 0),e=e||"");var r=ne(),o=t?r._week.dow:0;if(null!=n)return Zn(e,(n+o)%7,i,"day");var s,l=[];for(s=0;s<7;s++)l[s]=Zn(e,(s+o)%7,i,"day");return l}function ti(t,e){return Qn(t,e,"months")}function ei(t,e){return Qn(t,e,"monthsShort")}function ni(t,e,n){return Jn(t,e,n,"weekdays")}function ii(t,e,n){return Jn(t,e,n,"weekdaysShort")}function ri(t,e,n){return Jn(t,e,n,"weekdaysMin")}function oi(){var t=this._data;return this._milliseconds=co(this._milliseconds),this._days=co(this._days),this._months=co(this._months),t.milliseconds=co(t.milliseconds),t.seconds=co(t.seconds),t.minutes=co(t.minutes),t.hours=co(t.hours),t.months=co(t.months),t.years=co(t.years),this}function ai(t,e,n,i){var r=Ke(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function si(t,e){return ai(this,t,e,1)}function li(t,e){return ai(this,t,e,-1)}function ui(t){return t<0?Math.floor(t):Math.ceil(t)}function ci(){var t,e,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*ui(di(s)+a),a=0,s=0),l.milliseconds=o%1e3,t=b(o/1e3),l.seconds=t%60,e=b(t/60),l.minutes=e%60,n=b(e/60),l.hours=n%24,a+=b(n/24),r=b(hi(a)),s+=r,a-=ui(di(r)),i=b(s/12),s%=12,l.days=a,l.months=s,l.years=i,this}function hi(t){return 4800*t/146097}function di(t){return 146097*t/4800}function fi(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if(t=L(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+hi(e),"month"===t?n:n/12;switch(e=this._days+Math.round(di(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function pi(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN}function gi(t){return function(){return this.as(t)}}function mi(){return Ke(this)}function vi(t){return t=L(t),this.isValid()?this[t+"s"]():NaN}function yi(t){return function(){return this.isValid()?this._data[t]:NaN}}function bi(){return b(this.days()/7)}function wi(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function xi(t,e,n){var i=Ke(t).abs(),r=To(i.as("s")),o=To(i.as("m")),a=To(i.as("h")),s=To(i.as("d")),l=To(i.as("M")),u=To(i.as("y")),c=r<=Eo.ss&&["s",r]||r<Eo.s&&["ss",r]||o<=1&&["m"]||o<Eo.m&&["mm",o]||a<=1&&["h"]||a<Eo.h&&["hh",a]||s<=1&&["d"]||s<Eo.d&&["dd",s]||l<=1&&["M"]||l<Eo.M&&["MM",l]||u<=1&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=n,wi.apply(null,c)}function _i(t){return void 0===t?To:"function"==typeof t&&(To=t,!0)}function ki(t,e){return void 0!==Eo[t]&&(void 0===e?Eo[t]:(Eo[t]=e,"s"===t&&(Eo.ss=e-1),!0))}function Ci(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),n=xi(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Si(t){return(t>0)-(t<0)||+t}function Mi(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,i=Oo(this._milliseconds)/1e3,r=Oo(this._days),o=Oo(this._months);t=b(i/60),e=b(t/60),i%=60,t%=60,n=b(o/12),o%=12;var a=n,s=o,l=r,u=e,c=t,h=i?i.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var f=d<0?"-":"",p=Si(this._months)!==Si(d)?"-":"",g=Si(this._days)!==Si(d)?"-":"",m=Si(this._milliseconds)!==Si(d)?"-":"";return f+"P"+(a?p+a+"Y":"")+(s?p+s+"M":"")+(l?g+l+"D":"")+(u||c||h?"T":"")+(u?m+u+"H":"")+(c?m+c+"M":"")+(h?m+h+"S":"")}var Ti,Ei;Ei=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};var Oi=t.momentProperties=[],Ai=!1,Di={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Ri;Ri=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)u(t,e)&&n.push(e);return n};var Pi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ni={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},zi="Invalid date",Li="%d",Ii=/\d{1,2}/,Hi={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ji={},Fi={},Bi=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Wi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Yi={},Vi={},Ui=/\d/,qi=/\d\d/,Xi=/\d{3}/,Gi=/\d{4}/,$i=/[+-]?\d{6}/,Ki=/\d\d?/,Zi=/\d\d\d\d?/,Qi=/\d\d\d\d\d\d?/,Ji=/\d{1,3}/,tr=/\d{1,4}/,er=/[+-]?\d{1,6}/,nr=/\d+/,ir=/[+-]?\d+/,rr=/Z|[+-]\d\d:?\d\d/gi,or=/Z|[+-]\d\d(?::?\d\d)?/gi,ar=/[+-]?\d+(\.\d{1,3})?/,sr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,lr={},ur={},cr=0,hr=1,dr=2,fr=3,pr=4,gr=5,mr=6,vr=7,yr=8;B("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),B(0,["YY",2],0,function(){return this.year()%100}),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),z("year","y"),H("year",1),q("Y",ir),q("YY",Ki,qi),q("YYYY",tr,Gi),q("YYYYY",er,$i),q("YYYYYY",er,$i),K(["YYYYY","YYYYYY"],cr),K("YYYY",function(e,n){n[cr]=2===e.length?t.parseTwoDigitYear(e):w(e)}),K("YY",function(e,n){n[cr]=t.parseTwoDigitYear(e)}),K("Y",function(t,e){e[cr]=parseInt(t,10);
}),t.parseTwoDigitYear=function(t){return w(t)+(w(t)>68?1900:2e3)};var br,wr=nt("FullYear",!0);br=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},B("M",["MM",2],"Mo",function(){return this.month()+1}),B("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),B("MMMM",0,0,function(t){return this.localeData().months(this,t)}),z("month","M"),H("month",8),q("M",Ki),q("MM",Ki,qi),q("MMM",function(t,e){return e.monthsShortRegex(t)}),q("MMMM",function(t,e){return e.monthsRegex(t)}),K(["M","MM"],function(t,e){e[hr]=w(t)-1}),K(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[hr]=r:f(n).invalidMonth=t});var xr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,_r="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),kr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Cr=sr,Sr=sr;B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),H("week",5),H("isoWeek",5),q("w",Ki),q("ww",Ki,qi),q("W",Ki),q("WW",Ki,qi),Z(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=w(t)});var Mr={dow:0,doy:6};B("d",0,"do","day"),B("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),B("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),B("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),H("day",11),H("weekday",11),H("isoWeekday",11),q("d",Ki),q("e",Ki),q("E",Ki),q("dd",function(t,e){return e.weekdaysMinRegex(t)}),q("ddd",function(t,e){return e.weekdaysShortRegex(t)}),q("dddd",function(t,e){return e.weekdaysRegex(t)}),Z(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:f(n).invalidWeekday=t}),Z(["d","e","E"],function(t,e,n,i){e[i]=w(t)});var Tr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Er="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Or="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ar=sr,Dr=sr,Rr=sr;B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Vt),B("k",["kk",2],0,Ut),B("hmm",0,0,function(){return""+Vt.apply(this)+F(this.minutes(),2)}),B("hmmss",0,0,function(){return""+Vt.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),B("Hmm",0,0,function(){return""+this.hours()+F(this.minutes(),2)}),B("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)}),qt("a",!0),qt("A",!1),z("hour","h"),H("hour",13),q("a",Xt),q("A",Xt),q("H",Ki),q("h",Ki),q("k",Ki),q("HH",Ki,qi),q("hh",Ki,qi),q("kk",Ki,qi),q("hmm",Zi),q("hmmss",Qi),q("Hmm",Zi),q("Hmmss",Qi),K(["H","HH"],fr),K(["k","kk"],function(t,e,n){var i=w(t);e[fr]=24===i?0:i}),K(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),K(["h","hh"],function(t,e,n){e[fr]=w(t),f(n).bigHour=!0}),K("hmm",function(t,e,n){var i=t.length-2;e[fr]=w(t.substr(0,i)),e[pr]=w(t.substr(i)),f(n).bigHour=!0}),K("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[fr]=w(t.substr(0,i)),e[pr]=w(t.substr(i,2)),e[gr]=w(t.substr(r)),f(n).bigHour=!0}),K("Hmm",function(t,e,n){var i=t.length-2;e[fr]=w(t.substr(0,i)),e[pr]=w(t.substr(i))}),K("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[fr]=w(t.substr(0,i)),e[pr]=w(t.substr(i,2)),e[gr]=w(t.substr(r))});var Pr,Nr=/[ap]\.?m?\.?/i,zr=nt("Hours",!0),Lr={calendar:Pi,longDateFormat:Ni,invalidDate:zi,ordinal:Li,dayOfMonthOrdinalParse:Ii,relativeTime:Hi,months:_r,monthsShort:kr,week:Mr,weekdays:Tr,weekdaysMin:Or,weekdaysShort:Er,meridiemParse:Nr},Ir={},Hr={},jr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Br=/Z|[+-]\d\d(?::?\d\d)?/,Wr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Yr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Vr=/^\/?Date\((\-?\d+)/i,Ur=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,qr={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Xr=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:g()}),Gr=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:g()}),$r=function(){return Date.now?Date.now():+new Date},Kr=["year","quarter","month","week","day","hour","minute","second","millisecond"];ze("Z",":"),ze("ZZ",""),q("Z",or),q("ZZ",or),K(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Le(or,t)});var Zr=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Qr=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Jr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Ke.fn=Re.prototype,Ke.invalid=De;var to=tn(1,"add"),eo=tn(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var no=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});B(0,["gg",2],0,function(){return this.weekYear()%100}),B(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ln("gggg","weekYear"),Ln("ggggg","weekYear"),Ln("GGGG","isoWeekYear"),Ln("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),H("weekYear",1),H("isoWeekYear",1),q("G",ir),q("g",ir),q("GG",Ki,qi),q("gg",Ki,qi),q("GGGG",tr,Gi),q("gggg",tr,Gi),q("GGGGG",er,$i),q("ggggg",er,$i),Z(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=w(t)}),Z(["gg","GG"],function(e,n,i,r){n[r]=t.parseTwoDigitYear(e)}),B("Q",0,"Qo","quarter"),z("quarter","Q"),H("quarter",7),q("Q",Ui),K("Q",function(t,e){e[hr]=3*(w(t)-1)}),B("D",["DD",2],"Do","date"),z("date","D"),H("date",9),q("D",Ki),q("DD",Ki,qi),q("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),K(["D","DD"],dr),K("Do",function(t,e){e[dr]=w(t.match(Ki)[0])});var io=nt("Date",!0);B("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),H("dayOfYear",4),q("DDD",Ji),q("DDDD",Xi),K(["DDD","DDDD"],function(t,e,n){n._dayOfYear=w(t)}),B("m",["mm",2],0,"minute"),z("minute","m"),H("minute",14),q("m",Ki),q("mm",Ki,qi),K(["m","mm"],pr);var ro=nt("Minutes",!1);B("s",["ss",2],0,"second"),z("second","s"),H("second",15),q("s",Ki),q("ss",Ki,qi),K(["s","ss"],gr);var oo=nt("Seconds",!1);B("S",0,0,function(){return~~(this.millisecond()/100)}),B(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,function(){return 10*this.millisecond()}),B(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),B(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),B(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),B(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),B(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),H("millisecond",16),q("S",Ji,Ui),q("SS",Ji,qi),q("SSS",Ji,Xi);var ao;for(ao="SSSS";ao.length<=9;ao+="S")q(ao,nr);for(ao="S";ao.length<=9;ao+="S")K(ao,Un);var so=nt("Milliseconds",!1);B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var lo=v.prototype;lo.add=to,lo.calendar=rn,lo.clone=on,lo.diff=dn,lo.endOf=Sn,lo.format=vn,lo.from=yn,lo.fromNow=bn,lo.to=wn,lo.toNow=xn,lo.get=ot,lo.invalidAt=Nn,lo.isAfter=an,lo.isBefore=sn,lo.isBetween=ln,lo.isSame=un,lo.isSameOrAfter=cn,lo.isSameOrBefore=hn,lo.isValid=Rn,lo.lang=no,lo.locale=_n,lo.localeData=kn,lo.max=Gr,lo.min=Xr,lo.parsingFlags=Pn,lo.set=at,lo.startOf=Cn,lo.subtract=eo,lo.toArray=On,lo.toObject=An,lo.toDate=En,lo.toISOString=gn,lo.inspect=mn,lo.toJSON=Dn,lo.toString=pn,lo.unix=Tn,lo.valueOf=Mn,lo.creationData=zn,lo.year=wr,lo.isLeapYear=et,lo.weekYear=In,lo.isoWeekYear=Hn,lo.quarter=lo.quarters=Yn,lo.month=pt,lo.daysInMonth=gt,lo.week=lo.weeks=Et,lo.isoWeek=lo.isoWeeks=Ot,lo.weeksInYear=Fn,lo.isoWeeksInYear=jn,lo.date=io,lo.day=lo.days=It,lo.weekday=Ht,lo.isoWeekday=jt,lo.dayOfYear=Vn,lo.hour=lo.hours=zr,lo.minute=lo.minutes=ro,lo.second=lo.seconds=oo,lo.millisecond=lo.milliseconds=so,lo.utcOffset=je,lo.utc=Be,lo.local=We,lo.parseZone=Ye,lo.hasAlignedHourOffset=Ve,lo.isDST=Ue,lo.isLocal=Xe,lo.isUtcOffset=Ge,lo.isUtc=$e,lo.isUTC=$e,lo.zoneAbbr=qn,lo.zoneName=Xn,lo.dates=k("dates accessor is deprecated. Use date instead.",io),lo.months=k("months accessor is deprecated. Use month instead",pt),lo.years=k("years accessor is deprecated. Use year instead",wr),lo.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Fe),lo.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",qe);var uo=E.prototype;uo.calendar=O,uo.longDateFormat=A,uo.invalidDate=D,uo.ordinal=R,uo.preparse=Kn,uo.postformat=Kn,uo.relativeTime=P,uo.pastFuture=N,uo.set=M,uo.months=ut,uo.monthsShort=ct,uo.monthsParse=dt,uo.monthsRegex=vt,uo.monthsShortRegex=mt,uo.week=St,uo.firstDayOfYear=Tt,uo.firstDayOfWeek=Mt,uo.weekdays=Rt,uo.weekdaysMin=Nt,uo.weekdaysShort=Pt,uo.weekdaysParse=Lt,uo.weekdaysRegex=Ft,uo.weekdaysShortRegex=Bt,uo.weekdaysMinRegex=Wt,uo.isPM=Gt,uo.meridiem=$t,Jt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===w(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),t.lang=k("moment.lang is deprecated. Use moment.locale instead.",Jt),t.langData=k("moment.langData is deprecated. Use moment.localeData instead.",ne);var co=Math.abs,ho=gi("ms"),fo=gi("s"),po=gi("m"),go=gi("h"),mo=gi("d"),vo=gi("w"),yo=gi("M"),bo=gi("y"),wo=yi("milliseconds"),xo=yi("seconds"),_o=yi("minutes"),ko=yi("hours"),Co=yi("days"),So=yi("months"),Mo=yi("years"),To=Math.round,Eo={ss:44,s:45,m:45,h:22,d:26,M:11},Oo=Math.abs,Ao=Re.prototype;return Ao.isValid=Ae,Ao.abs=oi,Ao.add=si,Ao.subtract=li,Ao.as=fi,Ao.asMilliseconds=ho,Ao.asSeconds=fo,Ao.asMinutes=po,Ao.asHours=go,Ao.asDays=mo,Ao.asWeeks=vo,Ao.asMonths=yo,Ao.asYears=bo,Ao.valueOf=pi,Ao._bubble=ci,Ao.clone=mi,Ao.get=vi,Ao.milliseconds=wo,Ao.seconds=xo,Ao.minutes=_o,Ao.hours=ko,Ao.days=Co,Ao.weeks=bi,Ao.months=So,Ao.years=Mo,Ao.humanize=Ci,Ao.toISOString=Mi,Ao.toString=Mi,Ao.toJSON=Mi,Ao.locale=_n,Ao.localeData=kn,Ao.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mi),Ao.lang=no,B("X",0,0,"unix"),B("x",0,0,"valueOf"),q("x",ir),q("X",ar),K("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),K("x",function(t,e,n){n._d=new Date(w(t))}),t.version="2.20.1",e(Se),t.fn=lo,t.min=Te,t.max=Ee,t.now=$r,t.utc=h,t.unix=Gn,t.months=ti,t.isDate=s,t.locale=Jt,t.invalid=g,t.duration=Ke,t.isMoment=y,t.weekdays=ni,t.parseZone=$n,t.localeData=ne,t.isDuration=Pe,t.monthsShort=ei,t.weekdaysMin=ri,t.defineLocale=te,t.updateLocale=ee,t.locales=ie,t.weekdaysShort=ii,t.normalizeUnits=L,t.relativeTimeRounding=_i,t.relativeTimeThreshold=ki,t.calendarFormat=nn,t.prototype=lo,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},t}),!function(t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)module.exports=t(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";t(jQuery,moment)}}(function(t,e){"use strict";if(!e)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var n=function(n,i){var r,o,a,s,l,u,c,h={},d=!0,f=!1,p=!1,g=0,m=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],v=["days","months","years","decades"],y=["top","bottom","auto"],b=["left","right","auto"],w=["default","top","bottom"],x={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},_={},k=function(){return void 0!==e.tz&&void 0!==i.timeZone&&null!==i.timeZone&&""!==i.timeZone},C=function(t){var n;return n=void 0===t||null===t?e():e.isDate(t)||e.isMoment(t)?e(t):k()?e.tz(t,u,i.useStrict,i.timeZone):e(t,u,i.useStrict),k()&&n.tz(i.timeZone),n},S=function(t){if("string"!=typeof t||t.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(t){case"y":return l.indexOf("Y")!==-1;case"M":return l.indexOf("M")!==-1;case"d":return l.toLowerCase().indexOf("d")!==-1;case"h":case"H":return l.toLowerCase().indexOf("h")!==-1;case"m":return l.indexOf("m")!==-1;case"s":return l.indexOf("s")!==-1;default:return!1}},M=function(){return S("h")||S("m")||S("s")},T=function(){return S("y")||S("M")||S("d")},E=function(){var e=t("<thead>").append(t("<tr>").append(t("<th>").addClass("prev").attr("data-action","previous").append(t("<span>").addClass(i.icons.previous))).append(t("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",i.calendarWeeks?"6":"5")).append(t("<th>").addClass("next").attr("data-action","next").append(t("<span>").addClass(i.icons.next)))),n=t("<tbody>").append(t("<tr>").append(t("<td>").attr("colspan",i.calendarWeeks?"8":"7")));return[t("<div>").addClass("datepicker-days").append(t("<table>").addClass("table-condensed").append(e).append(t("<tbody>"))),t("<div>").addClass("datepicker-months").append(t("<table>").addClass("table-condensed").append(e.clone()).append(n.clone())),t("<div>").addClass("datepicker-years").append(t("<table>").addClass("table-condensed").append(e.clone()).append(n.clone())),t("<div>").addClass("datepicker-decades").append(t("<table>").addClass("table-condensed").append(e.clone()).append(n.clone()))]},O=function(){var e=t("<tr>"),n=t("<tr>"),r=t("<tr>");return S("h")&&(e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(t("<span>").addClass(i.icons.up)))),n.append(t("<td>").append(t("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:i.tooltips.pickHour}).attr("data-action","showHours"))),r.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(t("<span>").addClass(i.icons.down))))),S("m")&&(S("h")&&(e.append(t("<td>").addClass("separator")),n.append(t("<td>").addClass("separator").html(":")),r.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(t("<span>").addClass(i.icons.up)))),n.append(t("<td>").append(t("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:i.tooltips.pickMinute}).attr("data-action","showMinutes"))),r.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(t("<span>").addClass(i.icons.down))))),S("s")&&(S("m")&&(e.append(t("<td>").addClass("separator")),n.append(t("<td>").addClass("separator").html(":")),r.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(t("<span>").addClass(i.icons.up)))),n.append(t("<td>").append(t("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:i.tooltips.pickSecond}).attr("data-action","showSeconds"))),r.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(t("<span>").addClass(i.icons.down))))),s||(e.append(t("<td>").addClass("separator")),n.append(t("<td>").append(t("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:i.tooltips.togglePeriod}))),r.append(t("<td>").addClass("separator"))),t("<div>").addClass("timepicker-picker").append(t("<table>").addClass("table-condensed").append([e,n,r]))},A=function(){var e=t("<div>").addClass("timepicker-hours").append(t("<table>").addClass("table-condensed")),n=t("<div>").addClass("timepicker-minutes").append(t("<table>").addClass("table-condensed")),i=t("<div>").addClass("timepicker-seconds").append(t("<table>").addClass("table-condensed")),r=[O()];return S("h")&&r.push(e),S("m")&&r.push(n),S("s")&&r.push(i),r},D=function(){var e=[];return i.showTodayButton&&e.push(t("<td>").append(t("<a>").attr({"data-action":"today",title:i.tooltips.today}).append(t("<span>").addClass(i.icons.today)))),!i.sideBySide&&T()&&M()&&e.push(t("<td>").append(t("<a>").attr({"data-action":"togglePicker",title:i.tooltips.selectTime}).append(t("<span>").addClass(i.icons.time)))),i.showClear&&e.push(t("<td>").append(t("<a>").attr({"data-action":"clear",title:i.tooltips.clear}).append(t("<span>").addClass(i.icons.clear)))),i.showClose&&e.push(t("<td>").append(t("<a>").attr({"data-action":"close",title:i.tooltips.close}).append(t("<span>").addClass(i.icons.close)))),t("<table>").addClass("table-condensed").append(t("<tbody>").append(t("<tr>").append(e)))},R=function(){var e=t("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),n=t("<div>").addClass("datepicker").append(E()),r=t("<div>").addClass("timepicker").append(A()),o=t("<ul>").addClass("list-unstyled"),a=t("<li>").addClass("picker-switch"+(i.collapse?" accordion-toggle":"")).append(D());return i.inline&&e.removeClass("dropdown-menu"),s&&e.addClass("usetwentyfour"),S("s")&&!s&&e.addClass("wider"),i.sideBySide&&T()&&M()?(e.addClass("timepicker-sbs"),"top"===i.toolbarPlacement&&e.append(a),e.append(t("<div>").addClass("row").append(n.addClass("col-md-6")).append(r.addClass("col-md-6"))),"bottom"===i.toolbarPlacement&&e.append(a),e):("top"===i.toolbarPlacement&&o.append(a),T()&&o.append(t("<li>").addClass(i.collapse&&M()?"collapse in":"").append(n)),"default"===i.toolbarPlacement&&o.append(a),M()&&o.append(t("<li>").addClass(i.collapse&&T()?"collapse":"").append(r)),"bottom"===i.toolbarPlacement&&o.append(a),e.append(o))},P=function(){var e,r={};return e=n.is("input")||i.inline?n.data():n.find("input").data(),e.dateOptions&&e.dateOptions instanceof Object&&(r=t.extend(!0,r,e.dateOptions)),t.each(i,function(t){var n="date"+t.charAt(0).toUpperCase()+t.slice(1);void 0!==e[n]&&(r[t]=e[n])}),r},N=function(){var e,r=(f||n).position(),o=(f||n).offset(),a=i.widgetPositioning.vertical,s=i.widgetPositioning.horizontal;if(i.widgetParent)e=i.widgetParent.append(p);else if(n.is("input"))e=n.after(p).parent();else{if(i.inline)return void(e=n.append(p));e=n,n.children().first().after(p)}if("auto"===a&&(a=o.top+1.5*p.height()>=t(window).height()+t(window).scrollTop()&&p.height()+n.outerHeight()<o.top?"top":"bottom"),"auto"===s&&(s=e.width()<o.left+p.outerWidth()/2&&o.left+p.outerWidth()>t(window).width()?"right":"left"),"top"===a?p.addClass("top").removeClass("bottom"):p.addClass("bottom").removeClass("top"),"right"===s?p.addClass("pull-right"):p.removeClass("pull-right"),"static"===e.css("position")&&(e=e.parents().filter(function(){return"static"!==t(this).css("position")}).first()),0===e.length)throw new Error("datetimepicker component should be placed within a non-static positioned container");p.css({top:"top"===a?"auto":r.top+n.outerHeight(),bottom:"top"===a?e.outerHeight()-(e===n?0:r.top):"auto",left:"left"===s?e===n?0:r.left:"auto",right:"left"===s?"auto":e.outerWidth()-n.outerWidth()-(e===n?0:r.left)})},z=function(t){"dp.change"===t.type&&(t.date&&t.date.isSame(t.oldDate)||!t.date&&!t.oldDate)||n.trigger(t)},L=function(t){"y"===t&&(t="YYYY"),z({type:"dp.update",change:t,viewDate:o.clone()})},I=function(t){p&&(t&&(c=Math.max(g,Math.min(3,c+t))),p.find(".datepicker > div").hide().filter(".datepicker-"+m[c].clsName).show())},H=function(){var e=t("<tr>"),n=o.clone().startOf("w").startOf("d");for(i.calendarWeeks===!0&&e.append(t("<th>").addClass("cw").text("#"));n.isBefore(o.clone().endOf("w"));)e.append(t("<th>").addClass("dow").text(n.format("dd"))),n.add(1,"d");p.find(".datepicker-days thead").append(e)},j=function(t){return i.disabledDates[t.format("YYYY-MM-DD")]===!0},F=function(t){return i.enabledDates[t.format("YYYY-MM-DD")]===!0},B=function(t){return i.disabledHours[t.format("H")]===!0},W=function(t){return i.enabledHours[t.format("H")]===!0},Y=function(e,n){if(!e.isValid())return!1;if(i.disabledDates&&"d"===n&&j(e))return!1;if(i.enabledDates&&"d"===n&&!F(e))return!1;if(i.minDate&&e.isBefore(i.minDate,n))return!1;if(i.maxDate&&e.isAfter(i.maxDate,n))return!1;if(i.daysOfWeekDisabled&&"d"===n&&i.daysOfWeekDisabled.indexOf(e.day())!==-1)return!1;if(i.disabledHours&&("h"===n||"m"===n||"s"===n)&&B(e))return!1;if(i.enabledHours&&("h"===n||"m"===n||"s"===n)&&!W(e))return!1;if(i.disabledTimeIntervals&&("h"===n||"m"===n||"s"===n)){var r=!1;if(t.each(i.disabledTimeIntervals,function(){if(e.isBetween(this[0],this[1]))return r=!0,!1}),r)return!1}return!0},V=function(){for(var e=[],n=o.clone().startOf("y").startOf("d");n.isSame(o,"y");)e.push(t("<span>").attr("data-action","selectMonth").addClass("month").text(n.format("MMM"))),n.add(1,"M");p.find(".datepicker-months td").empty().append(e)},U=function(){var e=p.find(".datepicker-months"),n=e.find("th"),a=e.find("tbody").find("span");n.eq(0).find("span").attr("title",i.tooltips.prevYear),n.eq(1).attr("title",i.tooltips.selectYear),n.eq(2).find("span").attr("title",i.tooltips.nextYear),e.find(".disabled").removeClass("disabled"),Y(o.clone().subtract(1,"y"),"y")||n.eq(0).addClass("disabled"),n.eq(1).text(o.year()),Y(o.clone().add(1,"y"),"y")||n.eq(2).addClass("disabled"),a.removeClass("active"),r.isSame(o,"y")&&!d&&a.eq(r.month()).addClass("active"),a.each(function(e){Y(o.clone().month(e),"M")||t(this).addClass("disabled")})},q=function(){var t=p.find(".datepicker-years"),e=t.find("th"),n=o.clone().subtract(5,"y"),a=o.clone().add(6,"y"),s="";for(e.eq(0).find("span").attr("title",i.tooltips.prevDecade),e.eq(1).attr("title",i.tooltips.selectDecade),e.eq(2).find("span").attr("title",i.tooltips.nextDecade),t.find(".disabled").removeClass("disabled"),i.minDate&&i.minDate.isAfter(n,"y")&&e.eq(0).addClass("disabled"),e.eq(1).text(n.year()+"-"+a.year()),i.maxDate&&i.maxDate.isBefore(a,"y")&&e.eq(2).addClass("disabled");!n.isAfter(a,"y");)s+='<span data-action="selectYear" class="year'+(n.isSame(r,"y")&&!d?" active":"")+(Y(n,"y")?"":" disabled")+'">'+n.year()+"</span>",n.add(1,"y");t.find("td").html(s)},X=function(){var t,n=p.find(".datepicker-decades"),a=n.find("th"),s=e({y:o.year()-o.year()%100-1}),l=s.clone().add(100,"y"),u=s.clone(),c=!1,h=!1,d="";for(a.eq(0).find("span").attr("title",i.tooltips.prevCentury),a.eq(2).find("span").attr("title",i.tooltips.nextCentury),n.find(".disabled").removeClass("disabled"),(s.isSame(e({y:1900}))||i.minDate&&i.minDate.isAfter(s,"y"))&&a.eq(0).addClass("disabled"),a.eq(1).text(s.year()+"-"+l.year()),(s.isSame(e({y:2e3}))||i.maxDate&&i.maxDate.isBefore(l,"y"))&&a.eq(2).addClass("disabled");!s.isAfter(l,"y");)t=s.year()+12,c=i.minDate&&i.minDate.isAfter(s,"y")&&i.minDate.year()<=t,h=i.maxDate&&i.maxDate.isAfter(s,"y")&&i.maxDate.year()<=t,d+='<span data-action="selectDecade" class="decade'+(r.isAfter(s)&&r.year()<=t?" active":"")+(Y(s,"y")||c||h?"":" disabled")+'" data-selection="'+(s.year()+6)+'">'+(s.year()+1)+" - "+(s.year()+12)+"</span>",s.add(12,"y");d+="<span></span><span></span><span></span>",n.find("td").html(d),a.eq(1).text(u.year()+1+"-"+s.year())},G=function(){var e,n,a,s=p.find(".datepicker-days"),l=s.find("th"),u=[],c=[];if(T()){for(l.eq(0).find("span").attr("title",i.tooltips.prevMonth),l.eq(1).attr("title",i.tooltips.selectMonth),l.eq(2).find("span").attr("title",i.tooltips.nextMonth),s.find(".disabled").removeClass("disabled"),l.eq(1).text(o.format(i.dayViewHeaderFormat)),Y(o.clone().subtract(1,"M"),"M")||l.eq(0).addClass("disabled"),Y(o.clone().add(1,"M"),"M")||l.eq(2).addClass("disabled"),e=o.clone().startOf("M").startOf("w").startOf("d"),a=0;a<42;a++)0===e.weekday()&&(n=t("<tr>"),i.calendarWeeks&&n.append('<td class="cw">'+e.week()+"</td>"),u.push(n)),c=["day"],e.isBefore(o,"M")&&c.push("old"),e.isAfter(o,"M")&&c.push("new"),e.isSame(r,"d")&&!d&&c.push("active"),Y(e,"d")||c.push("disabled"),e.isSame(C(),"d")&&c.push("today"),0!==e.day()&&6!==e.day()||c.push("weekend"),z({type:"dp.classify",date:e,classNames:c}),n.append('<td data-action="selectDay" data-day="'+e.format("L")+'" class="'+c.join(" ")+'">'+e.date()+"</td>"),e.add(1,"d");s.find("tbody").empty().append(u),U(),q(),X()}},$=function(){var e=p.find(".timepicker-hours table"),n=o.clone().startOf("d"),i=[],r=t("<tr>");for(o.hour()>11&&!s&&n.hour(12);n.isSame(o,"d")&&(s||o.hour()<12&&n.hour()<12||o.hour()>11);)n.hour()%4===0&&(r=t("<tr>"),i.push(r)),r.append('<td data-action="selectHour" class="hour'+(Y(n,"h")?"":" disabled")+'">'+n.format(s?"HH":"hh")+"</td>"),n.add(1,"h");e.empty().append(i)},K=function(){for(var e=p.find(".timepicker-minutes table"),n=o.clone().startOf("h"),r=[],a=t("<tr>"),s=1===i.stepping?5:i.stepping;o.isSame(n,"h");)n.minute()%(4*s)===0&&(a=t("<tr>"),r.push(a)),a.append('<td data-action="selectMinute" class="minute'+(Y(n,"m")?"":" disabled")+'">'+n.format("mm")+"</td>"),n.add(s,"m");e.empty().append(r)},Z=function(){for(var e=p.find(".timepicker-seconds table"),n=o.clone().startOf("m"),i=[],r=t("<tr>");o.isSame(n,"m");)n.second()%20===0&&(r=t("<tr>"),i.push(r)),r.append('<td data-action="selectSecond" class="second'+(Y(n,"s")?"":" disabled")+'">'+n.format("ss")+"</td>"),n.add(5,"s");e.empty().append(i)},Q=function(){var t,e,n=p.find(".timepicker span[data-time-component]");s||(t=p.find(".timepicker [data-action=togglePeriod]"),e=r.clone().add(r.hours()>=12?-12:12,"h"),t.text(r.format("A")),Y(e,"h")?t.removeClass("disabled"):t.addClass("disabled")),n.filter("[data-time-component=hours]").text(r.format(s?"HH":"hh")),n.filter("[data-time-component=minutes]").text(r.format("mm")),n.filter("[data-time-component=seconds]").text(r.format("ss")),$(),K(),Z()},J=function(){p&&(G(),Q())},tt=function(t){var e=d?null:r;if(!t)return d=!0,a.val(""),n.data("date",""),z({type:"dp.change",date:!1,oldDate:e}),void J();if(t=t.clone().locale(i.locale),k()&&t.tz(i.timeZone),1!==i.stepping)for(t.minutes(Math.round(t.minutes()/i.stepping)*i.stepping).seconds(0);i.minDate&&t.isBefore(i.minDate);)t.add(i.stepping,"minutes");Y(t)?(r=t,o=r.clone(),a.val(r.format(l)),n.data("date",r.format(l)),d=!1,J(),z({type:"dp.change",date:r.clone(),oldDate:e})):(i.keepInvalid?z({type:"dp.change",date:t,oldDate:e}):a.val(d?"":r.format(l)),z({type:"dp.error",date:t,oldDate:e}))},et=function(){var e=!1;return p?(p.find(".collapse").each(function(){var n=t(this).data("collapse");return!n||!n.transitioning||(e=!0,!1)}),e?h:(f&&f.hasClass("btn")&&f.toggleClass("active"),p.hide(),t(window).off("resize",N),p.off("click","[data-action]"),p.off("mousedown",!1),p.remove(),p=!1,z({type:"dp.hide",date:r.clone()}),a.blur(),o=r.clone(),h)):h},nt=function(){tt(null)},it=function(t){return void 0===i.parseInputDate?(!e.isMoment(t)||t instanceof Date)&&(t=C(t)):t=i.parseInputDate(t),t},rt={next:function(){var t=m[c].navFnc;o.add(m[c].navStep,t),G(),L(t)},previous:function(){var t=m[c].navFnc;o.subtract(m[c].navStep,t),G(),L(t)},pickerSwitch:function(){I(1)},selectMonth:function(e){var n=t(e.target).closest("tbody").find("span").index(t(e.target));o.month(n),c===g?(tt(r.clone().year(o.year()).month(o.month())),i.inline||et()):(I(-1),G()),L("M")},selectYear:function(e){var n=parseInt(t(e.target).text(),10)||0;o.year(n),c===g?(tt(r.clone().year(o.year())),i.inline||et()):(I(-1),G()),L("YYYY")},selectDecade:function(e){var n=parseInt(t(e.target).data("selection"),10)||0;o.year(n),c===g?(tt(r.clone().year(o.year())),i.inline||et()):(I(-1),G()),L("YYYY")},selectDay:function(e){var n=o.clone();t(e.target).is(".old")&&n.subtract(1,"M"),t(e.target).is(".new")&&n.add(1,"M"),tt(n.date(parseInt(t(e.target).text(),10))),M()||i.keepOpen||i.inline||et()},incrementHours:function(){var t=r.clone().add(1,"h");Y(t,"h")&&tt(t)},incrementMinutes:function(){var t=r.clone().add(i.stepping,"m");Y(t,"m")&&tt(t)},incrementSeconds:function(){var t=r.clone().add(1,"s");Y(t,"s")&&tt(t)},decrementHours:function(){var t=r.clone().subtract(1,"h");Y(t,"h")&&tt(t)},decrementMinutes:function(){var t=r.clone().subtract(i.stepping,"m");Y(t,"m")&&tt(t)},decrementSeconds:function(){var t=r.clone().subtract(1,"s");Y(t,"s")&&tt(t)},togglePeriod:function(){tt(r.clone().add(r.hours()>=12?-12:12,"h"))},togglePicker:function(e){var n,r=t(e.target),o=r.closest("ul"),a=o.find(".in"),s=o.find(".collapse:not(.in)");if(a&&a.length){if(n=a.data("collapse"),n&&n.transitioning)return;a.collapse?(a.collapse("hide"),s.collapse("show")):(a.removeClass("in"),s.addClass("in")),r.is("span")?r.toggleClass(i.icons.time+" "+i.icons.date):r.find("span").toggleClass(i.icons.time+" "+i.icons.date)}},showPicker:function(){p.find(".timepicker > div:not(.timepicker-picker)").hide(),p.find(".timepicker .timepicker-picker").show()},showHours:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-hours").show()},showMinutes:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var n=parseInt(t(e.target).text(),10);s||(r.hours()>=12?12!==n&&(n+=12):12===n&&(n=0)),tt(r.clone().hours(n)),rt.showPicker.call(h)},selectMinute:function(e){tt(r.clone().minutes(parseInt(t(e.target).text(),10))),rt.showPicker.call(h)},selectSecond:function(e){tt(r.clone().seconds(parseInt(t(e.target).text(),10))),rt.showPicker.call(h)},clear:nt,today:function(){var t=C();Y(t,"d")&&tt(t)},close:et},ot=function(e){return!t(e.currentTarget).is(".disabled")&&(rt[t(e.currentTarget).data("action")].apply(h,arguments),!1)},at=function(){var e,n={year:function(t){return t.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(t){
return t.date(1).hours(0).seconds(0).minutes(0)},day:function(t){return t.hours(0).seconds(0).minutes(0)},hour:function(t){return t.seconds(0).minutes(0)},minute:function(t){return t.seconds(0)}};return a.prop("disabled")||!i.ignoreReadonly&&a.prop("readonly")||p?h:(void 0!==a.val()&&0!==a.val().trim().length?tt(it(a.val().trim())):d&&i.useCurrent&&(i.inline||a.is("input")&&0===a.val().trim().length)&&(e=C(),"string"==typeof i.useCurrent&&(e=n[i.useCurrent](e)),tt(e)),p=R(),H(),V(),p.find(".timepicker-hours").hide(),p.find(".timepicker-minutes").hide(),p.find(".timepicker-seconds").hide(),J(),I(),t(window).on("resize",N),p.on("click","[data-action]",ot),p.on("mousedown",!1),f&&f.hasClass("btn")&&f.toggleClass("active"),N(),p.show(),i.focusOnShow&&!a.is(":focus")&&a.focus(),z({type:"dp.show"}),h)},st=function(){return p?et():at()},lt=function(t){var e,n,r,o,a=null,s=[],l={},u=t.which,c="p";_[u]=c;for(e in _)_.hasOwnProperty(e)&&_[e]===c&&(s.push(e),parseInt(e,10)!==u&&(l[e]=!0));for(e in i.keyBinds)if(i.keyBinds.hasOwnProperty(e)&&"function"==typeof i.keyBinds[e]&&(r=e.split(" "),r.length===s.length&&x[u]===r[r.length-1])){for(o=!0,n=r.length-2;n>=0;n--)if(!(x[r[n]]in l)){o=!1;break}if(o){a=i.keyBinds[e];break}}a&&(a.call(h,p),t.stopPropagation(),t.preventDefault())},ut=function(t){_[t.which]="r",t.stopPropagation(),t.preventDefault()},ct=function(e){var n=t(e.target).val().trim(),i=n?it(n):null;return tt(i),e.stopImmediatePropagation(),!1},ht=function(){a.on({change:ct,blur:i.debug?"":et,keydown:lt,keyup:ut,focus:i.allowInputToggle?at:""}),n.is("input")?a.on({focus:at}):f&&(f.on("click",st),f.on("mousedown",!1))},dt=function(){a.off({change:ct,blur:blur,keydown:lt,keyup:ut,focus:i.allowInputToggle?et:""}),n.is("input")?a.off({focus:at}):f&&(f.off("click",st),f.off("mousedown",!1))},ft=function(e){var n={};return t.each(e,function(){var t=it(this);t.isValid()&&(n[t.format("YYYY-MM-DD")]=!0)}),!!Object.keys(n).length&&n},pt=function(e){var n={};return t.each(e,function(){n[this]=!0}),!!Object.keys(n).length&&n},gt=function(){var t=i.format||"L LT";l=t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){var e=r.localeData().longDateFormat(t)||t;return e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return r.localeData().longDateFormat(t)||t})}),u=i.extraFormats?i.extraFormats.slice():[],u.indexOf(t)<0&&u.indexOf(l)<0&&u.push(l),s=l.toLowerCase().indexOf("a")<1&&l.replace(/\[.*?\]/g,"").indexOf("h")<1,S("y")&&(g=2),S("M")&&(g=1),S("d")&&(g=0),c=Math.max(g,c),d||tt(r)};if(h.destroy=function(){et(),dt(),n.removeData("DateTimePicker"),n.removeData("date")},h.toggle=st,h.show=at,h.hide=et,h.disable=function(){return et(),f&&f.hasClass("btn")&&f.addClass("disabled"),a.prop("disabled",!0),h},h.enable=function(){return f&&f.hasClass("btn")&&f.removeClass("disabled"),a.prop("disabled",!1),h},h.ignoreReadonly=function(t){if(0===arguments.length)return i.ignoreReadonly;if("boolean"!=typeof t)throw new TypeError("ignoreReadonly () expects a boolean parameter");return i.ignoreReadonly=t,h},h.options=function(e){if(0===arguments.length)return t.extend(!0,{},i);if(!(e instanceof Object))throw new TypeError("options() options parameter should be an object");return t.extend(!0,i,e),t.each(i,function(t,e){if(void 0===h[t])throw new TypeError("option "+t+" is not recognized!");h[t](e)}),h},h.date=function(t){if(0===arguments.length)return d?null:r.clone();if(!(null===t||"string"==typeof t||e.isMoment(t)||t instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return tt(null===t?null:it(t)),h},h.format=function(t){if(0===arguments.length)return i.format;if("string"!=typeof t&&("boolean"!=typeof t||t!==!1))throw new TypeError("format() expects a string or boolean:false parameter "+t);return i.format=t,l&&gt(),h},h.timeZone=function(t){if(0===arguments.length)return i.timeZone;if("string"!=typeof t)throw new TypeError("newZone() expects a string parameter");return i.timeZone=t,h},h.dayViewHeaderFormat=function(t){if(0===arguments.length)return i.dayViewHeaderFormat;if("string"!=typeof t)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return i.dayViewHeaderFormat=t,h},h.extraFormats=function(t){if(0===arguments.length)return i.extraFormats;if(t!==!1&&!(t instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return i.extraFormats=t,u&&gt(),h},h.disabledDates=function(e){if(0===arguments.length)return i.disabledDates?t.extend({},i.disabledDates):i.disabledDates;if(!e)return i.disabledDates=!1,J(),h;if(!(e instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return i.disabledDates=ft(e),i.enabledDates=!1,J(),h},h.enabledDates=function(e){if(0===arguments.length)return i.enabledDates?t.extend({},i.enabledDates):i.enabledDates;if(!e)return i.enabledDates=!1,J(),h;if(!(e instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return i.enabledDates=ft(e),i.disabledDates=!1,J(),h},h.daysOfWeekDisabled=function(t){if(0===arguments.length)return i.daysOfWeekDisabled.splice(0);if("boolean"==typeof t&&!t)return i.daysOfWeekDisabled=!1,J(),h;if(!(t instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(i.daysOfWeekDisabled=t.reduce(function(t,e){return e=parseInt(e,10),e>6||e<0||isNaN(e)?t:(t.indexOf(e)===-1&&t.push(e),t)},[]).sort(),i.useCurrent&&!i.keepInvalid){for(var e=0;!Y(r,"d");){if(r.add(1,"d"),31===e)throw"Tried 31 times to find a valid date";e++}tt(r)}return J(),h},h.maxDate=function(t){if(0===arguments.length)return i.maxDate?i.maxDate.clone():i.maxDate;if("boolean"==typeof t&&t===!1)return i.maxDate=!1,J(),h;"string"==typeof t&&("now"!==t&&"moment"!==t||(t=C()));var e=it(t);if(!e.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+t);if(i.minDate&&e.isBefore(i.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+e.format(l));return i.maxDate=e,i.useCurrent&&!i.keepInvalid&&r.isAfter(t)&&tt(i.maxDate),o.isAfter(e)&&(o=e.clone().subtract(i.stepping,"m")),J(),h},h.minDate=function(t){if(0===arguments.length)return i.minDate?i.minDate.clone():i.minDate;if("boolean"==typeof t&&t===!1)return i.minDate=!1,J(),h;"string"==typeof t&&("now"!==t&&"moment"!==t||(t=C()));var e=it(t);if(!e.isValid())throw new TypeError("minDate() Could not parse date parameter: "+t);if(i.maxDate&&e.isAfter(i.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+e.format(l));return i.minDate=e,i.useCurrent&&!i.keepInvalid&&r.isBefore(t)&&tt(i.minDate),o.isBefore(e)&&(o=e.clone().add(i.stepping,"m")),J(),h},h.defaultDate=function(t){if(0===arguments.length)return i.defaultDate?i.defaultDate.clone():i.defaultDate;if(!t)return i.defaultDate=!1,h;"string"==typeof t&&(t="now"===t||"moment"===t?C():C(t));var e=it(t);if(!e.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+t);if(!Y(e))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return i.defaultDate=e,(i.defaultDate&&i.inline||""===a.val().trim())&&tt(i.defaultDate),h},h.locale=function(t){if(0===arguments.length)return i.locale;if(!e.localeData(t))throw new TypeError("locale() locale "+t+" is not loaded from moment locales!");return i.locale=t,r.locale(i.locale),o.locale(i.locale),l&&gt(),p&&(et(),at()),h},h.stepping=function(t){return 0===arguments.length?i.stepping:(t=parseInt(t,10),(isNaN(t)||t<1)&&(t=1),i.stepping=t,h)},h.useCurrent=function(t){var e=["year","month","day","hour","minute"];if(0===arguments.length)return i.useCurrent;if("boolean"!=typeof t&&"string"!=typeof t)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof t&&e.indexOf(t.toLowerCase())===-1)throw new TypeError("useCurrent() expects a string parameter of "+e.join(", "));return i.useCurrent=t,h},h.collapse=function(t){if(0===arguments.length)return i.collapse;if("boolean"!=typeof t)throw new TypeError("collapse() expects a boolean parameter");return i.collapse===t?h:(i.collapse=t,p&&(et(),at()),h)},h.icons=function(e){if(0===arguments.length)return t.extend({},i.icons);if(!(e instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return t.extend(i.icons,e),p&&(et(),at()),h},h.tooltips=function(e){if(0===arguments.length)return t.extend({},i.tooltips);if(!(e instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return t.extend(i.tooltips,e),p&&(et(),at()),h},h.useStrict=function(t){if(0===arguments.length)return i.useStrict;if("boolean"!=typeof t)throw new TypeError("useStrict() expects a boolean parameter");return i.useStrict=t,h},h.sideBySide=function(t){if(0===arguments.length)return i.sideBySide;if("boolean"!=typeof t)throw new TypeError("sideBySide() expects a boolean parameter");return i.sideBySide=t,p&&(et(),at()),h},h.viewMode=function(t){if(0===arguments.length)return i.viewMode;if("string"!=typeof t)throw new TypeError("viewMode() expects a string parameter");if(v.indexOf(t)===-1)throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value");return i.viewMode=t,c=Math.max(v.indexOf(t),g),I(),h},h.toolbarPlacement=function(t){if(0===arguments.length)return i.toolbarPlacement;if("string"!=typeof t)throw new TypeError("toolbarPlacement() expects a string parameter");if(w.indexOf(t)===-1)throw new TypeError("toolbarPlacement() parameter must be one of ("+w.join(", ")+") value");return i.toolbarPlacement=t,p&&(et(),at()),h},h.widgetPositioning=function(e){if(0===arguments.length)return t.extend({},i.widgetPositioning);if("[object Object]"!=={}.toString.call(e))throw new TypeError("widgetPositioning() expects an object variable");if(e.horizontal){if("string"!=typeof e.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(e.horizontal=e.horizontal.toLowerCase(),b.indexOf(e.horizontal)===-1)throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+b.join(", ")+")");i.widgetPositioning.horizontal=e.horizontal}if(e.vertical){if("string"!=typeof e.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(e.vertical=e.vertical.toLowerCase(),y.indexOf(e.vertical)===-1)throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+y.join(", ")+")");i.widgetPositioning.vertical=e.vertical}return J(),h},h.calendarWeeks=function(t){if(0===arguments.length)return i.calendarWeeks;if("boolean"!=typeof t)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return i.calendarWeeks=t,J(),h},h.showTodayButton=function(t){if(0===arguments.length)return i.showTodayButton;if("boolean"!=typeof t)throw new TypeError("showTodayButton() expects a boolean parameter");return i.showTodayButton=t,p&&(et(),at()),h},h.showClear=function(t){if(0===arguments.length)return i.showClear;if("boolean"!=typeof t)throw new TypeError("showClear() expects a boolean parameter");return i.showClear=t,p&&(et(),at()),h},h.widgetParent=function(e){if(0===arguments.length)return i.widgetParent;if("string"==typeof e&&(e=t(e)),null!==e&&"string"!=typeof e&&!(e instanceof t))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return i.widgetParent=e,p&&(et(),at()),h},h.keepOpen=function(t){if(0===arguments.length)return i.keepOpen;if("boolean"!=typeof t)throw new TypeError("keepOpen() expects a boolean parameter");return i.keepOpen=t,h},h.focusOnShow=function(t){if(0===arguments.length)return i.focusOnShow;if("boolean"!=typeof t)throw new TypeError("focusOnShow() expects a boolean parameter");return i.focusOnShow=t,h},h.inline=function(t){if(0===arguments.length)return i.inline;if("boolean"!=typeof t)throw new TypeError("inline() expects a boolean parameter");return i.inline=t,h},h.clear=function(){return nt(),h},h.keyBinds=function(t){return 0===arguments.length?i.keyBinds:(i.keyBinds=t,h)},h.getMoment=function(t){return C(t)},h.debug=function(t){if("boolean"!=typeof t)throw new TypeError("debug() expects a boolean parameter");return i.debug=t,h},h.allowInputToggle=function(t){if(0===arguments.length)return i.allowInputToggle;if("boolean"!=typeof t)throw new TypeError("allowInputToggle() expects a boolean parameter");return i.allowInputToggle=t,h},h.showClose=function(t){if(0===arguments.length)return i.showClose;if("boolean"!=typeof t)throw new TypeError("showClose() expects a boolean parameter");return i.showClose=t,h},h.keepInvalid=function(t){if(0===arguments.length)return i.keepInvalid;if("boolean"!=typeof t)throw new TypeError("keepInvalid() expects a boolean parameter");return i.keepInvalid=t,h},h.datepickerInput=function(t){if(0===arguments.length)return i.datepickerInput;if("string"!=typeof t)throw new TypeError("datepickerInput() expects a string parameter");return i.datepickerInput=t,h},h.parseInputDate=function(t){if(0===arguments.length)return i.parseInputDate;if("function"!=typeof t)throw new TypeError("parseInputDate() sholud be as function");return i.parseInputDate=t,h},h.disabledTimeIntervals=function(e){if(0===arguments.length)return i.disabledTimeIntervals?t.extend({},i.disabledTimeIntervals):i.disabledTimeIntervals;if(!e)return i.disabledTimeIntervals=!1,J(),h;if(!(e instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return i.disabledTimeIntervals=e,J(),h},h.disabledHours=function(e){if(0===arguments.length)return i.disabledHours?t.extend({},i.disabledHours):i.disabledHours;if(!e)return i.disabledHours=!1,J(),h;if(!(e instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(i.disabledHours=pt(e),i.enabledHours=!1,i.useCurrent&&!i.keepInvalid){for(var n=0;!Y(r,"h");){if(r.add(1,"h"),24===n)throw"Tried 24 times to find a valid date";n++}tt(r)}return J(),h},h.enabledHours=function(e){if(0===arguments.length)return i.enabledHours?t.extend({},i.enabledHours):i.enabledHours;if(!e)return i.enabledHours=!1,J(),h;if(!(e instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(i.enabledHours=pt(e),i.disabledHours=!1,i.useCurrent&&!i.keepInvalid){for(var n=0;!Y(r,"h");){if(r.add(1,"h"),24===n)throw"Tried 24 times to find a valid date";n++}tt(r)}return J(),h},h.viewDate=function(t){if(0===arguments.length)return o.clone();if(!t)return o=r.clone(),h;if(!("string"==typeof t||e.isMoment(t)||t instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return o=it(t),L(),h},n.is("input"))a=n;else if(a=n.find(i.datepickerInput),0===a.length)a=n.find("input");else if(!a.is("input"))throw new Error('CSS class "'+i.datepickerInput+'" cannot be applied to non input element');if(n.hasClass("input-group")&&(f=0===n.find(".datepickerbutton").length?n.find(".input-group-addon"):n.find(".datepickerbutton")),!i.inline&&!a.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return r=C(),o=r.clone(),t.extend(!0,i,P()),h.options(i),gt(),ht(),a.prop("disabled")&&h.disable(),a.is("input")&&0!==a.val().trim().length?tt(it(a.val().trim())):i.defaultDate&&void 0===a.attr("placeholder")&&tt(i.defaultDate),i.inline&&at(),h};return t.fn.datetimepicker=function(e){e=e||{};var i,r=Array.prototype.slice.call(arguments,1),o=!0,a=["destroy","hide","show","toggle"];if("object"==typeof e)return this.each(function(){var i,r=t(this);r.data("DateTimePicker")||(i=t.extend(!0,{},t.fn.datetimepicker.defaults,e),r.data("DateTimePicker",n(r,i)))});if("string"==typeof e)return this.each(function(){var n=t(this),a=n.data("DateTimePicker");if(!a)throw new Error('bootstrap-datetimepicker("'+e+'") method was called on an element that is not using DateTimePicker');i=a[e].apply(a,r),o=i===a}),o||t.inArray(e,a)>-1?this:i;throw new TypeError("Invalid arguments for DateTimePicker: "+e)},t.fn.datetimepicker.defaults={timeZone:"",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:e.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().subtract(7,"d")):this.date(e.clone().add(this.stepping(),"m"))}},down:function(t){if(!t)return void this.show();var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().add(7,"d")):this.date(e.clone().subtract(this.stepping(),"m"))},"control up":function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().subtract(1,"y")):this.date(e.clone().add(1,"h"))}},"control down":function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().add(1,"y")):this.date(e.clone().subtract(1,"h"))}},left:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().subtract(1,"d"))}},right:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().add(1,"d"))}},pageUp:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().subtract(1,"M"))}},pageDown:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(t){t&&t.find(".timepicker").is(":visible")&&t.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},"delete":function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1},t.fn.datetimepicker}),function(t,e){"object"==typeof module&&module.exports?module.exports=t.document?e(t):e:t.Highcharts=e(t)}("undefined"!=typeof window?window:this,function(t){t=function(){var t=window,e=t.document,n=t.navigator&&t.navigator.userAgent||"",i=e&&e.createElementNS&&!!e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,r=/(edge|msie|trident)/i.test(n)&&!window.opera,o=!i,a=/Firefox/.test(n),s=a&&4>parseInt(n.split("Firefox/")[1],10);return t.Highcharts?t.Highcharts.error(16,!0):{product:"Highcharts",version:"5.0.14",deg2rad:2*Math.PI/360,doc:e,hasBidiBug:s,hasTouch:e&&void 0!==e.documentElement.ontouchstart,isMS:r,isWebKit:/AppleWebKit/.test(n),isFirefox:a,isTouchDevice:/(Mobile|Android|Windows Phone)/.test(n),SVG_NS:"http://www.w3.org/2000/svg",chartCount:0,seriesTypes:{},symbolSizes:{},svg:i,vml:o,win:t,marginNames:["plotTop","marginRight","marginBottom","plotLeft"],noop:function(){},charts:[]}}(),function(t){var e=[],n=t.charts,i=t.doc,r=t.win;t.error=function(e,n){if(e=t.isNumber(e)?"Highcharts error #"+e+": www.highcharts.com/errors/"+e:e,n)throw Error(e);r.console&&console.log(e)},t.Fx=function(t,e,n){this.options=e,this.elem=t,this.prop=n},t.Fx.prototype={dSetter:function(){var t,e=this.paths[0],n=this.paths[1],i=[],r=this.now,o=e.length;if(1===r)i=this.toD;else if(o===n.length&&1>r)for(;o--;)t=parseFloat(e[o]),i[o]=isNaN(t)?e[o]:r*parseFloat(n[o]-t)+t;else i=n;this.elem.attr("d",i,null,!0)},update:function(){var t=this.elem,e=this.prop,n=this.now,i=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,n,null,!0):t.style[e]=n+this.unit,i&&i.call(t,n,this)},run:function(t,n,i){var r,o=this,a=function(t){return!a.stopped&&o.step(t)};this.startTime=+new Date,this.start=t,this.end=n,this.unit=i,this.now=this.start,this.pos=0,a.elem=this.elem,a.prop=this.prop,a()&&1===e.push(a)&&(a.timerId=setInterval(function(){for(r=0;r<e.length;r++)e[r]()||e.splice(r--,1);e.length||clearInterval(a.timerId)},13))},step:function(e){var n,i=+new Date,r=this.options,o=this.elem,a=r.complete,s=r.duration,l=r.curAnim;return o.attr&&!o.element?e=!1:e||i>=s+this.startTime?(this.now=this.end,this.pos=1,this.update(),n=l[this.prop]=!0,t.objectEach(l,function(t){!0!==t&&(n=!1)}),n&&a&&a.call(o),e=!1):(this.pos=r.easing((i-this.startTime)/s),this.now=this.start+(this.end-this.start)*this.pos,this.update(),e=!0),e},initPath:function(e,n,i){function r(t){var e,n;for(c=t.length;c--;)e="M"===t[c]||"L"===t[c],n=/[a-zA-Z]/.test(t[c+3]),e&&n&&t.splice(c+1,0,t[c+1],t[c+2],t[c+1],t[c+2])}function o(t,e){for(;t.length<l;){t[0]=e[l-t.length];var n=t.slice(0,p);[].splice.apply(t,[0,0].concat(n)),m&&(n=t.slice(t.length-p),[].splice.apply(t,[t.length,0].concat(n)),c--)}t[0]="M"}function a(t,e){for(var n=(l-t.length)/p;0<n&&n--;)u=t.slice().splice(t.length/v-p,p*v),u[0]=e[l-p-n*p],f&&(u[p-6]=u[p-2],u[p-5]=u[p-1]),[].splice.apply(t,[t.length/v,0].concat(u)),m&&n--}n=n||"";var s,l,u,c,h=e.startX,d=e.endX,f=-1<n.indexOf("C"),p=f?7:3;n=n.split(" "),i=i.slice();var g,m=e.isArea,v=m?2:1;if(f&&(r(n),r(i)),h&&d){for(c=0;c<h.length;c++){if(h[c]===d[0]){s=c;break}if(h[0]===d[d.length-h.length+c]){s=c,g=!0;break}}void 0===s&&(n=[])}return n.length&&t.isNumber(s)&&(l=i.length+s*v*p,g?(o(n,i),a(i,n)):(o(i,n),a(n,i))),[n,i]}},t.Fx.prototype.fillSetter=t.Fx.prototype.strokeSetter=function(){this.elem.attr(this.prop,t.color(this.start).tweenTo(t.color(this.end),this.pos),null,!0)},t.extend=function(t,e){var n;t||(t={});for(n in e)t[n]=e[n];return t},t.merge=function(){var e,n,i=arguments,r={},o=function(e,n){return"object"!=typeof e&&(e={}),t.objectEach(n,function(i,r){!t.isObject(i,!0)||t.isClass(i)||t.isDOMElement(i)?e[r]=n[r]:e[r]=o(e[r]||{},i)}),e};for(!0===i[0]&&(r=i[1],i=Array.prototype.slice.call(i,2)),n=i.length,e=0;e<n;e++)r=o(r,i[e]);return r},t.pInt=function(t,e){return parseInt(t,e||10)},t.isString=function(t){return"string"==typeof t},t.isArray=function(t){return t=Object.prototype.toString.call(t),"[object Array]"===t||"[object Array Iterator]"===t},t.isObject=function(e,n){return!(!e||"object"!=typeof e||n&&t.isArray(e))},t.isDOMElement=function(e){return t.isObject(e)&&"number"==typeof e.nodeType},t.isClass=function(e){var n=e&&e.constructor;return!(!t.isObject(e,!0)||t.isDOMElement(e)||!n||!n.name||"Object"===n.name)},t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.erase=function(t,e){for(var n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}},t.defined=function(t){return void 0!==t&&null!==t},t.attr=function(e,n,i){var r;return t.isString(n)?t.defined(i)?e.setAttribute(n,i):e&&e.getAttribute&&(r=e.getAttribute(n)):t.defined(n)&&t.isObject(n)&&t.objectEach(n,function(t,n){e.setAttribute(n,t)}),r},t.splat=function(e){return t.isArray(e)?e:[e]},t.syncTimeout=function(t,e,n){return e?setTimeout(t,e,n):void t.call(0,n)},t.pick=function(){var t,e,n=arguments,i=n.length;for(t=0;t<i;t++)if(e=n[t],void 0!==e&&null!==e)return e},t.css=function(e,n){t.isMS&&!t.svg&&n&&void 0!==n.opacity&&(n.filter="alpha(opacity="+100*n.opacity+")"),t.extend(e.style,n)},t.createElement=function(e,n,r,o,a){e=i.createElement(e);var s=t.css;return n&&t.extend(e,n),a&&s(e,{padding:0,border:"none",margin:0}),r&&s(e,r),o&&o.appendChild(e),e},t.extendClass=function(e,n){var i=function(){};return i.prototype=new e,t.extend(i.prototype,n),i},t.pad=function(t,e,n){return Array((e||2)+1-String(t).length).join(n||0)+t},t.relativeLength=function(t,e,n){return/%$/.test(t)?e*parseFloat(t)/100+(n||0):parseFloat(t)},t.wrap=function(t,e,n){var i=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments),e=arguments,r=this;return r.proceed=function(){i.apply(r,arguments.length?arguments:e)},t.unshift(i),t=n.apply(this,t),r.proceed=null,t}},t.getTZOffset=function(e){var n=t.Date;return 6e4*(n.hcGetTimezoneOffset&&n.hcGetTimezoneOffset(e)||n.hcTimezoneOffset||0)},t.dateFormat=function(e,n,i){if(!t.defined(n)||isNaN(n))return t.defaultOptions.lang.invalidDate||"";e=t.pick(e,"%Y-%m-%d %H:%M:%S");var r=t.Date,o=new r(n-t.getTZOffset(n)),a=o[r.hcGetHours](),s=o[r.hcGetDay](),l=o[r.hcGetDate](),u=o[r.hcGetMonth](),c=o[r.hcGetFullYear](),h=t.defaultOptions.lang,d=h.weekdays,f=h.shortWeekdays,p=t.pad,r=t.extend({a:f?f[s]:d[s].substr(0,3),A:d[s],d:p(l),e:p(l,2," "),w:s,b:h.shortMonths[u],B:h.months[u],m:p(u+1),y:c.toString().substr(2,2),Y:c,H:p(a),k:a,I:p(a%12||12),l:a%12||12,M:p(o[r.hcGetMinutes]()),p:12>a?"AM":"PM",P:12>a?"am":"pm",S:p(o.getSeconds()),L:p(Math.round(n%1e3),3)},t.dateFormats);return t.objectEach(r,function(t,i){for(;-1!==e.indexOf("%"+i);)e=e.replace("%"+i,"function"==typeof t?t(n):t)}),i?e.substr(0,1).toUpperCase()+e.substr(1):e},t.formatSingle=function(e,n){var i=/\.([0-9])/,r=t.defaultOptions.lang;return/f$/.test(e)?(i=(i=e.match(i))?i[1]:-1,null!==n&&(n=t.numberFormat(n,i,r.decimalPoint,-1<e.indexOf(",")?r.thousandsSep:""))):n=t.dateFormat(e,n),n},t.format=function(e,n){for(var i,r,o,a,s,l="{",u=!1,c=[];e&&(l=e.indexOf(l),-1!==l);){if(i=e.slice(0,l),u){for(i=i.split(":"),r=i.shift().split("."),a=r.length,s=n,o=0;o<a;o++)s=s[r[o]];i.length&&(s=t.formatSingle(i.join(":"),s)),c.push(s)}else c.push(i);e=e.slice(l+1),l=(u=!u)?"}":"{"}return c.push(e),c.join("")},t.getMagnitude=function(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))},t.normalizeTickInterval=function(e,n,i,r,o){var a,s=e;for(i=t.pick(i,1),a=e/i,n||(n=o?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===r&&(1===i?n=t.grep(n,function(t){return 0===t%1}):.1>=i&&(n=[1/i]))),r=0;r<n.length&&(s=n[r],!(o&&s*i>=e||!o&&a<=(n[r]+(n[r+1]||n[r]))/2));r++);return s=t.correctFloat(s*i,-Math.round(Math.log(.001)/Math.LN10))},t.stableSort=function(t,e){var n,i,r=t.length;for(i=0;i<r;i++)t[i].safeI=i;for(t.sort(function(t,i){return n=e(t,i),0===n?t.safeI-i.safeI:n}),i=0;i<r;i++)delete t[i].safeI},t.arrayMin=function(t){for(var e=t.length,n=t[0];e--;)t[e]<n&&(n=t[e]);return n},t.arrayMax=function(t){for(var e=t.length,n=t[0];e--;)t[e]>n&&(n=t[e]);return n},t.destroyObjectProperties=function(e,n){t.objectEach(e,function(t,i){t&&t!==n&&t.destroy&&t.destroy(),delete e[i]})},t.discardElement=function(e){var n=t.garbageBin;n||(n=t.createElement("div")),e&&n.appendChild(e),n.innerHTML=""},t.correctFloat=function(t,e){return parseFloat(t.toPrecision(e||14))},t.setAnimation=function(e,n){n.renderer.globalAnimation=t.pick(e,n.options.chart.animation,!0)},t.animObject=function(e){return t.isObject(e)?t.merge(e):{duration:e?500:0}},t.timeUnits={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},t.numberFormat=function(e,n,i,r){e=+e||0,n=+n;var o,a,s=t.defaultOptions.lang,l=(e.toString().split(".")[1]||"").split("e")[0].length,u=e.toString().split("e");return-1===n?n=Math.min(l,20):t.isNumber(n)||(n=2),a=(Math.abs(u[1]?u[0]:e)+Math.pow(10,-Math.max(n,l)-1)).toFixed(n),l=String(t.pInt(a)),o=3<l.length?l.length%3:0,i=t.pick(i,s.decimalPoint),r=t.pick(r,s.thousandsSep),e=(0>e?"-":"")+(o?l.substr(0,o)+r:""),e+=l.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+r),n&&(e+=i+a.slice(-n)),u[1]&&(e+="e"+u[1]),e},Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getStyle=function(e,n,i){return"width"===n?Math.min(e.offsetWidth,e.scrollWidth)-t.getStyle(e,"padding-left")-t.getStyle(e,"padding-right"):"height"===n?Math.min(e.offsetHeight,e.scrollHeight)-t.getStyle(e,"padding-top")-t.getStyle(e,"padding-bottom"):((e=r.getComputedStyle(e,void 0))&&(e=e.getPropertyValue(n),t.pick(i,!0)&&(e=t.pInt(e))),e)},t.inArray=function(t,e){return e.indexOf?e.indexOf(t):[].indexOf.call(e,t)},t.grep=function(t,e){return[].filter.call(t,e)},t.find=function(t,e){return[].find.call(t,e)},t.map=function(t,e){for(var n=[],i=0,r=t.length;i<r;i++)n[i]=e.call(t[i],t[i],i,t);return n},t.offset=function(t){var e=i.documentElement;return t=t.getBoundingClientRect(),{top:t.top+(r.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t.left+(r.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}},t.stop=function(t,n){for(var i=e.length;i--;)e[i].elem!==t||n&&n!==e[i].prop||(e[i].stopped=!0)},t.each=function(t,e,n){return Array.prototype.forEach.call(t,e,n)},t.objectEach=function(t,e,n){for(var i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)},t.addEvent=function(e,n,i){function o(t){t.target=t.srcElement||r,i.call(e,t)}var a=e.hcEvents=e.hcEvents||{};return e.addEventListener?e.addEventListener(n,i,!1):e.attachEvent&&(e.hcEventsIE||(e.hcEventsIE={}),i.hcGetKey||(i.hcGetKey=t.uniqueKey()),e.hcEventsIE[i.hcGetKey]=o,e.attachEvent("on"+n,o)),a[n]||(a[n]=[]),a[n].push(i),function(){t.removeEvent(e,n,i)}},t.removeEvent=function(e,n,i){function r(t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&(n=e.hcEventsIE[n.hcGetKey],e.detachEvent("on"+t,n))}function o(){var i,o;e.nodeName&&(n?(i={},i[n]=!0):i=l,t.objectEach(i,function(t,e){if(l[e])for(o=l[e].length;o--;)r(e,l[e][o])}))}var a,s,l=e.hcEvents;l&&(n?(a=l[n]||[],i?(s=t.inArray(i,a),-1<s&&(a.splice(s,1),l[n]=a),r(n,i)):(o(),l[n]=[])):(o(),e.hcEvents={}))},t.fireEvent=function(e,n,r,o){var a;a=e.hcEvents;var s,l;if(r=r||{},i.createEvent&&(e.dispatchEvent||e.fireEvent))a=i.createEvent("Events"),a.initEvent(n,!0,!0),t.extend(a,r),e.dispatchEvent?e.dispatchEvent(a):e.fireEvent(n,a);else if(a)for(a=a[n]||[],s=a.length,r.target||t.extend(r,{preventDefault:function(){r.defaultPrevented=!0},target:e,type:n}),n=0;n<s;n++)(l=a[n])&&!1===l.call(e,r)&&r.preventDefault();o&&!r.defaultPrevented&&o(r)},t.animate=function(e,n,i){var r,o,a,s,l="";t.isObject(i)||(s=arguments,i={duration:s[2],easing:s[3],complete:s[4]}),t.isNumber(i.duration)||(i.duration=400),i.easing="function"==typeof i.easing?i.easing:Math[i.easing]||Math.easeInOutSine,i.curAnim=t.merge(n),t.objectEach(n,function(s,u){t.stop(e,u),a=new t.Fx(e,i,u),o=null,"d"===u?(a.paths=a.initPath(e,e.d,n.d),a.toD=n.d,r=0,o=1):e.attr?r=e.attr(u):(r=parseFloat(t.getStyle(e,u))||0,"opacity"!==u&&(l="px")),o||(o=s),o&&o.match&&o.match("px")&&(o=o.replace(/px/g,"")),a.run(r,o,l)})},t.seriesType=function(e,n,i,r,o){var a=t.getOptions(),s=t.seriesTypes;return a.plotOptions[e]=t.merge(a.plotOptions[n],i),s[e]=t.extendClass(s[n]||function(){},r),s[e].prototype.type=e,o&&(s[e].prototype.pointClass=t.extendClass(t.Point,o)),s[e]},t.uniqueKey=function(){var t=Math.random().toString(36).substring(2,9),e=0;return function(){return"highcharts-"+t+"-"+e++}}(),r.jQuery&&(r.jQuery.fn.highcharts=function(){var e=[].slice.call(arguments);if(this[0])return e[0]?(new(t[t.isString(e[0])?e.shift():"Chart"])(this[0],e[0],e[1]),this):n[t.attr(this[0],"data-highcharts-chart")]}),i&&!i.defaultView&&(t.getStyle=function(e,n){var i={width:"clientWidth",height:"clientHeight"}[n];return e.style[n]?t.pInt(e.style[n]):("opacity"===n&&(n="filter"),i?(e.style.zoom=1,Math.max(e[i]-2*t.getStyle(e,"padding"),0)):(e=e.currentStyle[n.replace(/\-(\w)/g,function(t,e){return e.toUpperCase();
})],"filter"===n&&(e=e.replace(/alpha\(opacity=([0-9]+)\)/,function(t,e){return e/100})),""===e?1:t.pInt(e)))}),Array.prototype.forEach||(t.each=function(t,e,n){for(var i=0,r=t.length;i<r;i++)if(!1===e.call(n,t[i],i,t))return i}),Array.prototype.indexOf||(t.inArray=function(t,e){var n,i=0;if(e)for(n=e.length;i<n;i++)if(e[i]===t)return i;return-1}),Array.prototype.filter||(t.grep=function(t,e){for(var n=[],i=0,r=t.length;i<r;i++)e(t[i],i)&&n.push(t[i]);return n}),Array.prototype.find||(t.find=function(t,e){var n,i=t.length;for(n=0;n<i;n++)if(e(t[n],n))return t[n]})}(t),function(t){var e=t.each,n=t.isNumber,i=t.map,r=t.merge,o=t.pInt;t.Color=function(e){return this instanceof t.Color?void this.init(e):new t.Color(e)},t.Color.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[o(t[1]),o(t[2]),o(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[o(t[1]),o(t[2]),o(t[3]),1]}}],names:{none:"rgba(255,255,255,0)",white:"#ffffff",black:"#000000"},init:function(e){var n,r,o,a;if((this.input=e=this.names[e&&e.toLowerCase?e.toLowerCase():""]||e)&&e.stops)this.stops=i(e.stops,function(e){return new t.Color(e[1])});else if(e&&"#"===e.charAt()&&(n=e.length,e=parseInt(e.substr(1),16),7===n?r=[(16711680&e)>>16,(65280&e)>>8,255&e,1]:4===n&&(r=[(3840&e)>>4|(3840&e)>>8,(240&e)>>4|240&e,(15&e)<<4|15&e,1])),!r)for(o=this.parsers.length;o--&&!r;)a=this.parsers[o],(n=a.regex.exec(e))&&(r=a.parse(n));this.rgba=r||[]},get:function(t){var i,o=this.input,a=this.rgba;return this.stops?(i=r(o),i.stops=[].concat(i.stops),e(this.stops,function(e,n){i.stops[n]=[i.stops[n][0],e.get(t)]})):i=a&&n(a[0])?"rgb"===t||!t&&1===a[3]?"rgb("+a[0]+","+a[1]+","+a[2]+")":"a"===t?a[3]:"rgba("+a.join(",")+")":o,i},brighten:function(t){var i,r=this.rgba;if(this.stops)e(this.stops,function(e){e.brighten(t)});else if(n(t)&&0!==t)for(i=0;3>i;i++)r[i]+=o(255*t),0>r[i]&&(r[i]=0),255<r[i]&&(r[i]=255);return this},setOpacity:function(t){return this.rgba[3]=t,this},tweenTo:function(t,e){var n,i;return t.rgba.length?(n=this.rgba,t=t.rgba,i=1!==t[3]||1!==n[3],t=(i?"rgba(":"rgb(")+Math.round(t[0]+(n[0]-t[0])*(1-e))+","+Math.round(t[1]+(n[1]-t[1])*(1-e))+","+Math.round(t[2]+(n[2]-t[2])*(1-e))+(i?","+(t[3]+(n[3]-t[3])*(1-e)):"")+")"):t=t.input||"none",t}},t.color=function(e){return new t.Color(e)}}(t),function(t){var e,n,i=t.addEvent,r=t.animate,o=t.attr,a=t.charts,s=t.color,l=t.css,u=t.createElement,c=t.defined,h=t.deg2rad,d=t.destroyObjectProperties,f=t.doc,p=t.each,g=t.extend,m=t.erase,v=t.grep,y=t.hasTouch,b=t.inArray,w=t.isArray,x=t.isFirefox,_=t.isMS,k=t.isObject,C=t.isString,S=t.isWebKit,M=t.merge,T=t.noop,E=t.objectEach,O=t.pick,A=t.pInt,D=t.removeEvent,R=t.stop,P=t.svg,N=t.SVG_NS,z=t.symbolSizes,L=t.win;e=t.SVGElement=function(){return this},g(e.prototype,{opacity:1,SVG_NS:N,textProps:"direction fontSize fontWeight fontFamily fontStyle color lineHeight width textAlign textDecoration textOverflow textOutline".split(" "),init:function(t,e){this.element="span"===e?u(e):f.createElementNS(this.SVG_NS,e),this.renderer=t},animate:function(e,n,i){return n=t.animObject(O(n,this.renderer.globalAnimation,!0)),0!==n.duration?(i&&(n.complete=i),r(this,e,n)):(this.attr(e,null,i),n.step&&n.step.call(this)),this},colorGradient:function(e,n,i){var r,o,a,s,l,u,h,d,f,g,m,v=this.renderer,y=[];e.radialGradient?o="radialGradient":e.linearGradient&&(o="linearGradient"),o&&(a=e[o],l=v.gradients,h=e.stops,g=i.radialReference,w(a)&&(e[o]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&g&&!c(a.gradientUnits)&&(s=a,a=M(a,v.getRadialAttr(g,s),{gradientUnits:"userSpaceOnUse"})),E(a,function(t,e){"id"!==e&&y.push(e,t)}),E(h,function(t){y.push(t)}),y=y.join(","),l[y]?g=l[y].attr("id"):(a.id=g=t.uniqueKey(),l[y]=u=v.createElement(o).attr(a).add(v.defs),u.radAttr=s,u.stops=[],p(h,function(e){0===e[1].indexOf("rgba")?(r=t.color(e[1]),d=r.get("rgb"),f=r.get("a")):(d=e[1],f=1),e=v.createElement("stop").attr({offset:e[0],"stop-color":d,"stop-opacity":f}).add(u),u.stops.push(e)})),m="url("+v.url+"#"+g+")",i.setAttribute(n,m),i.gradient=y,e.toString=function(){return m})},applyTextOutline:function(e){var n,i,r,a,s,l=this.element;if(-1!==e.indexOf("contrast")&&(e=e.replace(/contrast/g,this.renderer.getContrast(l.style.fill))),e=e.split(" "),i=e[e.length-1],(r=e[0])&&"none"!==r&&t.svg){for(this.fakeTS=!0,e=[].slice.call(l.getElementsByTagName("tspan")),this.ySetter=this.xSetter,r=r.replace(/(^[\d\.]+)(.*?)$/g,function(t,e,n){return 2*e+n}),s=e.length;s--;)n=e[s],"highcharts-text-outline"===n.getAttribute("class")&&m(e,l.removeChild(n));a=l.firstChild,p(e,function(t,e){0===e&&(t.setAttribute("x",l.getAttribute("x")),e=l.getAttribute("y"),t.setAttribute("y",e||0),null===e&&l.setAttribute("y",0)),t=t.cloneNode(1),o(t,{"class":"highcharts-text-outline",fill:i,stroke:i,"stroke-width":r,"stroke-linejoin":"round"}),l.insertBefore(t,a)})}},attr:function(t,e,n,i){var r,o,a,s,l=this.element,u=this;return"string"==typeof t&&void 0!==e&&(r=t,t={},t[r]=e),"string"==typeof t?u=(this[t+"Getter"]||this._defaultGetter).call(this,t,l):(E(t,function(e,n){a=!1,i||R(this,n),this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)$/.test(n)&&(o||(this.symbolAttr(t),o=!0),a=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),a||(s=this[n+"Setter"]||this._defaultSetter,s.call(this,e,n,l),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,e,s))},this),this.afterSetters()),n&&n(),u},afterSetters:function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},updateShadows:function(t,e,n){for(var i=this.shadows,r=i.length;r--;)n.call(i[r],"height"===t?Math.max(e-(i[r].cutHeight||0),0):"d"===t?this.d:e,t,i[r])},addClass:function(t,e){var n=this.attr("class")||"";return-1===n.indexOf(t)&&(e||(t=(n+(n?" ":"")+t).replace("  "," ")),this.attr("class",t)),this},hasClass:function(t){return-1!==b(t,(this.attr("class")||"").split(" "))},removeClass:function(t){return this.attr("class",(this.attr("class")||"").replace(t,""))},symbolAttr:function(t){var e=this;p("x y r start end width height innerR anchorX anchorY".split(" "),function(n){e[n]=O(t[n],e[n])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":"none")},crisp:function(t,e){var n,i=this,r={};return e=e||t.strokeWidth||0,n=Math.round(e)%2/2,t.x=Math.floor(t.x||i.x||0)+n,t.y=Math.floor(t.y||i.y||0)+n,t.width=Math.floor((t.width||i.width||0)-2*n),t.height=Math.floor((t.height||i.height||0)-2*n),c(t.strokeWidth)&&(t.strokeWidth=e),E(t,function(t,e){i[e]!==t&&(i[e]=r[e]=t)}),r},css:function(t){var e,n,i=this.styles,r={},a=this.element,s="",u=!i,c=["textOutline","textOverflow","width"];return t&&t.color&&(t.fill=t.color),i&&E(t,function(t,e){t!==i[e]&&(r[e]=t,u=!0)}),u&&(i&&(t=g(i,r)),e=this.textWidth=t&&t.width&&"auto"!==t.width&&"text"===a.nodeName.toLowerCase()&&A(t.width),this.styles=t,e&&!P&&this.renderer.forExport&&delete t.width,_&&!P?l(this.element,t):(n=function(t,e){return"-"+e.toLowerCase()},E(t,function(t,e){-1===b(e,c)&&(s+=e.replace(/([A-Z])/g,n)+":"+t+";")}),s&&o(a,"style",s)),this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),t&&t.textOutline&&this.applyTextOutline(t.textOutline))),this},strokeWidth:function(){return this["stroke-width"]||0},on:function(t,e){var n=this,i=n.element;return y&&"click"===t?(i.ontouchstart=function(t){n.touchEventFired=Date.now(),t.preventDefault(),e.call(i,t)},i.onclick=function(t){(-1===L.navigator.userAgent.indexOf("Android")||1100<Date.now()-(n.touchEventFired||0))&&e.call(i,t)}):i["on"+t]=e,this},setRadialReference:function(t){var e=this.renderer.gradients[this.element.gradient];return this.element.radialReference=t,e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr)),this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(t){return this.inverted=t,this.updateTransform(),this},updateTransform:function(){var t=this.translateX||0,e=this.translateY||0,n=this.scaleX,i=this.scaleY,r=this.inverted,o=this.rotation,a=this.element;r&&(t+=this.width,e+=this.height),t=["translate("+t+","+e+")"],r?t.push("rotate(90) scale(-1,1)"):o&&t.push("rotate("+o+" "+(a.getAttribute("x")||0)+" "+(a.getAttribute("y")||0)+")"),(c(n)||c(i))&&t.push("scale("+O(n,1)+" "+O(i,1)+")"),t.length&&a.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,n){var i,r,o,a,s={};r=this.renderer,o=r.alignedObjects;var l,u;return t?(this.alignOptions=t,this.alignByTranslate=e,(!n||C(n))&&(this.alignTo=i=n||"renderer",m(o,this),o.push(this),n=null)):(t=this.alignOptions,e=this.alignByTranslate,i=this.alignTo),n=O(n,r[i],r),i=t.align,r=t.verticalAlign,o=(n.x||0)+(t.x||0),a=(n.y||0)+(t.y||0),"right"===i?l=1:"center"===i&&(l=2),l&&(o+=(n.width-(t.width||0))/l),s[e?"translateX":"x"]=Math.round(o),"bottom"===r?u=1:"middle"===r&&(u=2),u&&(a+=(n.height-(t.height||0))/u),s[e?"translateY":"y"]=Math.round(a),this[this.placed?"animate":"attr"](s),this.placed=!0,this.alignAttr=s,this},getBBox:function(t,e){var n,i,r,o,a,s=this.renderer,l=this.element,u=this.styles,c=this.textStr,d=s.cache,f=s.cacheKeys;if(e=O(e,this.rotation),i=e*h,r=u&&u.fontSize,void 0!==c&&(a=c.toString(),-1===a.indexOf("<")&&(a=a.replace(/[0-9]/g,"0")),a+=["",e||0,r,u&&u.width,u&&u.textOverflow].join()),a&&!t&&(n=d[a]),!n){if(l.namespaceURI===this.SVG_NS||s.forExport){try{(o=this.fakeTS&&function(t){p(l.querySelectorAll(".highcharts-text-outline"),function(e){e.style.display=t})})&&o("none"),n=l.getBBox?g({},l.getBBox()):{width:l.offsetWidth,height:l.offsetHeight},o&&o("")}catch(m){}(!n||0>n.width)&&(n={width:0,height:0})}else n=this.htmlGetBBox();if(s.isSVG&&(t=n.width,s=n.height,u&&"11px"===u.fontSize&&17===Math.round(s)&&(n.height=s=14),e&&(n.width=Math.abs(s*Math.sin(i))+Math.abs(t*Math.cos(i)),n.height=Math.abs(s*Math.cos(i))+Math.abs(t*Math.sin(i)))),a&&0<n.height){for(;250<f.length;)delete d[f.shift()];d[a]||f.push(a),d[a]=n}}return n},show:function(t){return this.attr({visibility:t?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,n=this.renderer,i=this.element;return t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&n.buildText(this),this.added=!0,(!t||t.handleZ||this.zIndex)&&(e=this.zIndexSetter()),e||(t?t.element:n.box).appendChild(i),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t=this,e=t.element||{},n=t.renderer.isSVG&&"SPAN"===e.nodeName&&t.parentGroup,i=e.ownerSVGElement;if(e.onclick=e.onmouseout=e.onmouseover=e.onmousemove=e.point=null,R(t),t.clipPath&&i&&(p(i.querySelectorAll("[clip-path]"),function(e){-1<e.getAttribute("clip-path").indexOf(t.clipPath.element.id+")")&&e.removeAttribute("clip-path")}),t.clipPath=t.clipPath.destroy()),t.stops){for(i=0;i<t.stops.length;i++)t.stops[i]=t.stops[i].destroy();t.stops=null}for(t.safeRemoveChild(e),t.destroyShadows();n&&n.div&&0===n.div.childNodes.length;)e=n.parentGroup,t.safeRemoveChild(n.div),delete n.div,n=e;return t.alignTo&&m(t.renderer.alignedObjects,t),E(t,function(e,n){delete t[n]}),null},shadow:function(t,e,n){var i,r,a,s,l,u,c=[],h=this.element;if(t){if(!this.shadows){for(s=O(t.width,3),l=(t.opacity||.15)/s,u=this.parentInverted?"(-1,-1)":"("+O(t.offsetX,1)+", "+O(t.offsetY,1)+")",i=1;i<=s;i++)r=h.cloneNode(0),a=2*s+1-2*i,o(r,{isShadow:"true",stroke:t.color||"#000000","stroke-opacity":l*i,"stroke-width":a,transform:"translate"+u,fill:"none"}),n&&(o(r,"height",Math.max(o(r,"height")-a,0)),r.cutHeight=a),e?e.element.appendChild(r):h.parentNode.insertBefore(r,h),c.push(r);this.shadows=c}}else this.destroyShadows();return this},destroyShadows:function(){p(this.shadows||[],function(t){this.safeRemoveChild(t)},this),this.shadows=void 0},xGetter:function(t){return"circle"===this.element.nodeName&&("x"===t?t="cx":"y"===t&&(t="cy")),this._defaultGetter(t)},_defaultGetter:function(t){return t=O(this[t],this.element?this.element.getAttribute(t):null,0),/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(t,e,n){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),this[e]!==t&&(n.setAttribute(e,t),this[e]=t)},dashstyleSetter:function(t){var e,n=this["stroke-width"];if("inherit"===n&&(n=1),t=t&&t.toLowerCase()){for(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),e=t.length;e--;)t[e]=A(t[e])*n;t=t.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,n){this[e]=t,n.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=f.createElementNS(this.SVG_NS,"title"),this.element.appendChild(e)),e.firstChild&&e.removeChild(e.firstChild),e.appendChild(f.createTextNode(String(O(t),"").replace(/<[^>]*>/g,"")))},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,n){"string"==typeof t?n.setAttribute(e,t):t&&this.colorGradient(t,e,n)},visibilitySetter:function(t,e,n){"inherit"===t?n.removeAttribute(e):this[e]!==t&&n.setAttribute(e,t),this[e]=t},zIndexSetter:function(t,e){var n,i,r=this.renderer,o=this.parentGroup,a=(o||r).element||r.box,s=this.element;n=this.added;var l;if(c(t)&&(s.zIndex=t,t=+t,this[e]===t&&(n=!1),this[e]=t),n){for((t=this.zIndex)&&o&&(o.handleZ=!0),e=a.childNodes,l=0;l<e.length&&!i;l++)o=e[l],n=o.zIndex,o!==s&&(A(n)>t||!c(t)&&c(n)||0>t&&!c(n)&&a!==r.box)&&(a.insertBefore(s,o),i=!0);i||a.appendChild(s)}return i},_defaultSetter:function(t,e,n){n.setAttribute(e,t)}}),e.prototype.yGetter=e.prototype.xGetter,e.prototype.translateXSetter=e.prototype.translateYSetter=e.prototype.rotationSetter=e.prototype.verticalAlignSetter=e.prototype.scaleXSetter=e.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},e.prototype["stroke-widthSetter"]=e.prototype.strokeSetter=function(t,n,i){this[n]=t,this.stroke&&this["stroke-width"]?(e.prototype.fillSetter.call(this,this.stroke,"stroke",i),i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===n&&0===t&&this.hasStroke&&(i.removeAttribute("stroke"),this.hasStroke=!1)},n=t.SVGRenderer=function(){this.init.apply(this,arguments)},g(n.prototype,{Element:e,SVG_NS:N,init:function(t,e,n,r,a,s){var u;r=this.createElement("svg").attr({version:"1.1","class":"highcharts-root"}).css(this.getStyle(r)),u=r.element,t.appendChild(u),-1===t.innerHTML.indexOf("xmlns")&&o(u,"xmlns",this.SVG_NS),this.isSVG=!0,this.box=u,this.boxWrapper=r,this.alignedObjects=[],this.url=(x||S)&&f.getElementsByTagName("base").length?L.location.href.replace(/#.*?$/,"").replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(f.createTextNode("Created with Highcharts 5.0.14")),this.defs=this.createElement("defs").add(),this.allowHTML=s,this.forExport=a,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(e,n,!1);var c;x&&t.getBoundingClientRect&&(e=function(){l(t,{left:0,top:0}),c=t.getBoundingClientRect(),l(t,{left:Math.ceil(c.left)-c.left+"px",top:Math.ceil(c.top)-c.top+"px"})},e(),this.unSubPixelFix=i(L,"resize",e))},getStyle:function(t){return this.style=g({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t)},setStyle:function(t){this.boxWrapper.css(this.getStyle(t))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),d(this.gradients||{}),this.gradients=null,t&&(this.defs=t.destroy()),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:T,getRadialAttr:function(t,e){return{cx:t[0]-t[2]/2+e.cx*t[2],cy:t[1]-t[2]/2+e.cy*t[2],r:e.r*t[2]}},getSpanWidth:function(t,e){var n=t.getBBox(!0).width;return!P&&this.forExport&&(n=this.measureSpanWidth(e.firstChild.data,t.styles)),n},applyEllipsis:function(t,e,n,i){var r,o,a=t.rotation,s=n,l=0,u=n.length,c=function(t){e.removeChild(e.firstChild),t&&e.appendChild(f.createTextNode(t))};if(t.rotation=0,s=this.getSpanWidth(t,e),o=s>i){for(;l<=u;)r=Math.ceil((l+u)/2),s=n.substring(0,r)+"…",c(s),s=this.getSpanWidth(t,e),l===u?l=u+1:s>i?u=r-1:l=r;0===u&&c("")}return t.rotation=a,o},buildText:function(t){var e,n,i,r,a,s,u=t.element,c=this,h=c.forExport,d=O(t.textStr,"").toString(),g=-1!==d.indexOf("<"),m=u.childNodes,y=o(u,"x"),b=t.styles,w=t.textWidth,x=b&&b.lineHeight,_=b&&b.textOutline,k=b&&"ellipsis"===b.textOverflow,C=b&&"nowrap"===b.whiteSpace,S=b&&b.fontSize,M=m.length,b=w&&!t.added&&this.box,T=function(t){var e;return e=/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:S||c.style.fontSize||12,x?A(x):c.fontMetrics(e,t.getAttribute("style")?t:u).h};if(a=[d,k,C,x,_,S,w].join(),a!==t.textCache){for(t.textCache=a;M--;)u.removeChild(m[M]);g||_||k||w||-1!==d.indexOf(" ")?(e=/<.*class="([^"]+)".*>/,n=/<.*style="([^"]+)".*>/,i=/<.*href="([^"]+)".*>/,b&&b.appendChild(u),d=g?d.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[d],d=v(d,function(t){return""!==t}),p(d,function(a,d){var g,m=0;a=a.replace(/^\s+|\s+$/g,"").replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),g=a.split("|||"),p(g,function(a){if(""!==a||1===g.length){var p,v,b={},x=f.createElementNS(c.SVG_NS,"tspan");if(e.test(a)&&(p=a.match(e)[1],o(x,"class",p)),n.test(a)&&(v=a.match(n)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),o(x,"style",v)),i.test(a)&&!h&&(o(x,"onclick",'location.href="'+a.match(i)[1]+'"'),l(x,{cursor:"pointer"})),a=(a.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==a){if(x.appendChild(f.createTextNode(a)),m?b.dx=0:d&&null!==y&&(b.x=y),o(x,b),u.appendChild(x),!m&&s&&(!P&&h&&l(x,{display:"block"}),o(x,"dy",T(x))),w){b=a.replace(/([^\^])-/g,"$1- ").split(" "),p=1<g.length||d||1<b.length&&!C;var _,S=[],M=T(x),E=t.rotation;for(k&&(r=c.applyEllipsis(t,x,a,w));!k&&p&&(b.length||S.length);)t.rotation=0,_=c.getSpanWidth(t,x),a=_>w,void 0===r&&(r=a),a&&1!==b.length?(x.removeChild(x.firstChild),S.unshift(b.pop())):(b=S,S=[],b.length&&!C&&(x=f.createElementNS(N,"tspan"),o(x,{dy:M,x:y}),v&&o(x,"style",v),u.appendChild(x)),_>w&&(w=_)),b.length&&x.appendChild(f.createTextNode(b.join(" ").replace(/- /g,"-")));t.rotation=E}m++}}}),s=s||u.childNodes.length}),r&&t.attr("title",t.textStr),b&&b.removeChild(u),_&&t.applyTextOutline&&t.applyTextOutline(_)):u.appendChild(f.createTextNode(d.replace(/&lt;/g,"<").replace(/&gt;/g,">")))}},getContrast:function(t){return t=s(t).rgba,510<t[0]+t[1]+t[2]?"#000000":"#FFFFFF"},button:function(t,e,n,r,o,a,s,l,u){var c=this.label(t,e,n,u,null,null,null,null,"button"),h=0;c.attr(M({padding:8,r:2},o));var d,f,p,m;return o=M({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontWeight:"normal"}},o),d=o.style,delete o.style,a=M(o,{fill:"#e6e6e6"},a),f=a.style,delete a.style,s=M(o,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},s),p=s.style,delete s.style,l=M(o,{style:{color:"#cccccc"}},l),m=l.style,delete l.style,i(c.element,_?"mouseover":"mouseenter",function(){3!==h&&c.setState(1)}),i(c.element,_?"mouseout":"mouseleave",function(){3!==h&&c.setState(h)}),c.setState=function(t){1!==t&&(c.state=h=t),c.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][t||0]),c.attr([o,a,s,l][t||0]).css([d,f,p,m][t||0])},c.attr(o).css(g({cursor:"default"},d)),c.on("click",function(t){3!==h&&r.call(c,t)})},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=Math.round(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=Math.round(t[2])+e%2/2),t},path:function(t){var e={fill:"none"};return w(t)?e.d=t:k(t)&&g(e,t),this.createElement("path").attr(e)},circle:function(t,e,n){return t=k(t)?t:{x:t,y:e,r:n},e=this.createElement("circle"),e.xSetter=e.ySetter=function(t,e,n){n.setAttribute("c"+e,t)},e.attr(t)},arc:function(t,e,n,i,r,o){return k(t)?(i=t,e=i.y,n=i.r,t=i.x):i={innerR:i,start:r,end:o},t=this.symbol("arc",t,e,n,n,i),t.r=n,t},rect:function(t,e,n,i,r,a){r=k(t)?t.r:r;var s=this.createElement("rect");return t=k(t)?t:void 0===t?{}:{x:t,y:e,width:Math.max(n,0),height:Math.max(i,0)},void 0!==a&&(t.strokeWidth=a,t=s.crisp(t)),t.fill="none",r&&(t.r=r),s.rSetter=function(t,e,n){o(n,{rx:t,ry:t})},s.attr(t)},setSize:function(t,e,n){var i=this.alignedObjects,r=i.length;for(this.width=t,this.height=e,this.boxWrapper.animate({width:t,height:e},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:O(n,!0)?void 0:0});r--;)i[r].align()},g:function(t){var e=this.createElement("g");return t?e.attr({"class":"highcharts-"+t}):e},image:function(t,e,n,i,r){var o={preserveAspectRatio:"none"};return 1<arguments.length&&g(o,{x:e,y:n,width:i,height:r}),o=this.createElement("image").attr(o),o.element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):o.element.setAttribute("hc-svg-href",t),o},symbol:function(t,e,n,i,r,o){var s,h,d,m=this,v=/^url\((.*?)\)$/,y=v.test(t),b=!y&&(this.symbols[t]?t:"circle"),w=b&&this.symbols[b],x=c(e)&&w&&w.call(this.symbols,Math.round(e),Math.round(n),i,r,o);return w?(s=this.path(x),s.attr("fill","none"),g(s,{symbolName:b,x:e,y:n,width:i,height:r}),o&&g(s,o)):y&&(h=t.match(v)[1],s=this.image(h),s.imgwidth=O(z[h]&&z[h].width,o&&o.width),s.imgheight=O(z[h]&&z[h].height,o&&o.height),d=function(){s.attr({width:s.width,height:s.height})},p(["width","height"],function(t){s[t+"Setter"]=function(t,e){var n={},i=this["img"+e],r="width"===e?"translateX":"translateY";this[e]=t,c(i)&&(this.element&&this.element.setAttribute(e,i),this.alignByTranslate||(n[r]=((this[e]||0)-i)/2,this.attr(n)))}}),c(e)&&s.attr({x:e,y:n}),s.isImg=!0,c(s.imgwidth)&&c(s.imgheight)?d():(s.attr({width:0,height:0}),u("img",{onload:function(){var t=a[m.chartIndex];0===this.width&&(l(this,{position:"absolute",top:"-999em"}),f.body.appendChild(this)),z[h]={width:this.width,height:this.height},s.imgwidth=this.width,s.imgheight=this.height,s.element&&d(),this.parentNode&&this.parentNode.removeChild(this),m.imgCount--,!m.imgCount&&t&&t.onload&&t.onload()},src:h}),this.imgCount++)),s},symbols:{circle:function(t,e,n,i){return this.arc(t+n/2,e+i/2,n/2,i/2,{start:0,end:2*Math.PI,open:!1})},square:function(t,e,n,i){return["M",t,e,"L",t+n,e,t+n,e+i,t,e+i,"Z"]},triangle:function(t,e,n,i){return["M",t+n/2,e,"L",t+n,e+i,t,e+i,"Z"]},"triangle-down":function(t,e,n,i){return["M",t,e,"L",t+n,e,t+n/2,e+i,"Z"]},diamond:function(t,e,n,i){return["M",t+n/2,e,"L",t+n,e+i/2,t+n/2,e+i,t,e+i/2,"Z"]},arc:function(t,e,n,i,r){var o=r.start,a=r.r||n,s=r.r||i||n,l=r.end-.001;n=r.innerR,i=O(r.open,.001>Math.abs(r.end-r.start-2*Math.PI));var u=Math.cos(o),h=Math.sin(o),d=Math.cos(l),l=Math.sin(l);return r=.001>r.end-o-Math.PI?0:1,a=["M",t+a*u,e+s*h,"A",a,s,0,r,1,t+a*d,e+s*l],c(n)&&a.push(i?"M":"L",t+n*d,e+n*l,"A",n,n,0,r,0,t+n*u,e+n*h),a.push(i?"":"Z"),a},callout:function(t,e,n,i,r){var o=Math.min(r&&r.r||0,n,i),a=o+6,s=r&&r.anchorX;r=r&&r.anchorY;var l;return l=["M",t+o,e,"L",t+n-o,e,"C",t+n,e,t+n,e,t+n,e+o,"L",t+n,e+i-o,"C",t+n,e+i,t+n,e+i,t+n-o,e+i,"L",t+o,e+i,"C",t,e+i,t,e+i,t,e+i-o,"L",t,e+o,"C",t,e,t,e,t+o,e],s&&s>n?r>e+a&&r<e+i-a?l.splice(13,3,"L",t+n,r-6,t+n+6,r,t+n,r+6,t+n,e+i-o):l.splice(13,3,"L",t+n,i/2,s,r,t+n,i/2,t+n,e+i-o):s&&0>s?r>e+a&&r<e+i-a?l.splice(33,3,"L",t,r+6,t-6,r,t,r-6,t,e+o):l.splice(33,3,"L",t,i/2,s,r,t,i/2,t,e+o):r&&r>i&&s>t+a&&s<t+n-a?l.splice(23,3,"L",s+6,e+i,s,e+i+6,s-6,e+i,t+o,e+i):r&&0>r&&s>t+a&&s<t+n-a&&l.splice(3,3,"L",s-6,e,s,e-6,s+6,e,n-o,e),l}},clipRect:function(e,n,i,r){var o=t.uniqueKey(),a=this.createElement("clipPath").attr({id:o}).add(this.defs);return e=this.rect(e,n,i,r,0).add(a),e.id=o,e.clipPath=a,e.count=0,e},text:function(t,e,n,i){var r=!P&&this.forExport,o={};return!i||!this.allowHTML&&this.forExport?(o.x=Math.round(e||0),n&&(o.y=Math.round(n)),(t||0===t)&&(o.text=t),t=this.createElement("text").attr(o),r&&t.css({position:"absolute"}),i||(t.xSetter=function(t,e,n){var i,r,o=n.getElementsByTagName("tspan"),a=n.getAttribute(e);for(r=0;r<o.length;r++)i=o[r],i.getAttribute(e)===a&&i.setAttribute(e,t);n.setAttribute(e,t)}),t):this.html(t,e,n)},fontMetrics:function(t,e){return t=t||e&&e.style&&e.style.fontSize||this.style&&this.style.fontSize,t=/px/.test(t)?A(t):/em/.test(t)?parseFloat(t)*(e?this.fontMetrics(null,e.parentNode).f:16):12,e=24>t?t+3:Math.round(1.2*t),{h:e,b:Math.round(.8*e),f:t}},rotCorr:function(t,e,n){var i=t;return e&&n&&(i=Math.max(i*Math.cos(e*h),4)),{x:-t/3*Math.sin(e*h),y:i}},label:function(n,i,r,o,a,s,l,u,h){var d,f,m,v,y,b,w,x,_,k,C,S,T,E=this,O=E.g("button"!==h&&"label"),A=O.text=E.text("",0,0,l).attr({zIndex:1}),R=0,P=3,N=0,z={},L=/^url\((.*?)\)$/.test(o),I=L;h&&O.addClass("highcharts-"+h),I=L,k=function(){return(x||0)%2/2},C=function(){var t=A.element.style,e={};f=(void 0===m||void 0===v||w)&&c(A.textStr)&&A.getBBox(),O.width=(m||f.width||0)+2*P+N,O.height=(v||f.height||0)+2*P,_=P+E.fontMetrics(t&&t.fontSize,A).b,I&&(d||(O.box=d=E.symbols[o]||L?E.symbol(o):E.rect(),d.addClass(("button"===h?"":"highcharts-label-box")+(h?" highcharts-"+h+"-box":"")),d.add(O),t=k(),e.x=t,e.y=(u?-_:0)+t),e.width=Math.round(O.width),e.height=Math.round(O.height),d.attr(g(e,z)),z={})},S=function(){var t,e=N+P;t=u?0:_,c(m)&&f&&("center"===w||"right"===w)&&(e+={center:.5,right:1}[w]*(m-f.width)),e===A.x&&t===A.y||(A.attr("x",e),void 0!==t&&A.attr("y",t)),A.x=e,A.y=t},T=function(t,e){d?d.attr(t,e):z[t]=e},O.onAdd=function(){A.add(O),O.attr({text:n||0===n?n:"",x:i,y:r}),d&&c(a)&&O.attr({anchorX:a,anchorY:s})},O.widthSetter=function(e){m=t.isNumber(e)?e:null},O.heightSetter=function(t){v=t},O["text-alignSetter"]=function(t){w=t},O.paddingSetter=function(t){c(t)&&t!==P&&(P=O.padding=t,S())},O.paddingLeftSetter=function(t){c(t)&&t!==N&&(N=t,S())},O.alignSetter=function(t){t={left:0,center:.5,right:1}[t],t!==R&&(R=t,f&&O.attr({x:y}))},O.textSetter=function(t){void 0!==t&&A.textSetter(t),C(),S()},O["stroke-widthSetter"]=function(t,e){t&&(I=!0),x=this["stroke-width"]=t,T(e,t)},O.strokeSetter=O.fillSetter=O.rSetter=function(t,e){"r"!==e&&("fill"===e&&t&&(I=!0),O[e]=t),T(e,t)},O.anchorXSetter=function(t,e){a=O.anchorX=t,T(e,Math.round(t)-k()-y)},O.anchorYSetter=function(t,e){s=O.anchorY=t,T(e,t-b)},O.xSetter=function(t){O.x=t,R&&(t-=R*((m||f.width)+2*P)),y=Math.round(t),O.attr("translateX",y)},O.ySetter=function(t){b=O.y=Math.round(t),O.attr("translateY",b)};var H=O.css;return g(O,{css:function(t){if(t){var e={};t=M(t),p(O.textProps,function(n){void 0!==t[n]&&(e[n]=t[n],delete t[n])}),A.css(e)}return H.call(O,t)},getBBox:function(){return{width:f.width+2*P,height:f.height+2*P,x:f.x-P,y:f.y-P}},shadow:function(t){return t&&(C(),d&&d.shadow(t)),O},destroy:function(){D(O.element,"mouseenter"),D(O.element,"mouseleave"),A&&(A=A.destroy()),d&&(d=d.destroy()),e.prototype.destroy.call(O),O=E=C=S=T=null}})}}),t.Renderer=n}(t),function(t){var e=t.attr,n=t.createElement,i=t.css,r=t.defined,o=t.each,a=t.extend,s=t.isFirefox,l=t.isMS,u=t.isWebKit,c=t.pInt,h=t.SVGRenderer,d=t.win,f=t.wrap;a(t.SVGElement.prototype,{htmlCss:function(t){var e=this.element;return(e=t&&"SPAN"===e.tagName&&t.width)&&(delete t.width,this.textWidth=e,this.updateTransform()),t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),this.styles=a(this.styles,t),i(this.element,t),this},htmlGetBBox:function(){var t=this.element;return"text"===t.nodeName&&(t.style.position="absolute"),{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var t=this.renderer,e=this.element,n=this.translateX||0,a=this.translateY||0,s=this.x||0,l=this.y||0,h=this.textAlign||"left",d={left:0,center:.5,right:1}[h],f=this.styles;if(i(e,{marginLeft:n,marginTop:a}),this.shadows&&o(this.shadows,function(t){i(t,{marginLeft:n+1,marginTop:a+1})}),this.inverted&&o(e.childNodes,function(n){t.invertChild(n,e)}),"SPAN"===e.tagName){var p=this.rotation,g=c(this.textWidth),m=f&&f.whiteSpace,v=[p,h,e.innerHTML,this.textWidth,this.textAlign].join();v!==this.cTT&&(f=t.fontMetrics(e.style.fontSize).b,r(p)&&this.setSpanRotation(p,d,f),i(e,{width:"",whiteSpace:m||"nowrap"}),e.offsetWidth>g&&/[ \-]/.test(e.textContent||e.innerText)&&i(e,{width:g+"px",display:"block",whiteSpace:m||"normal"}),this.getSpanCorrection(e.offsetWidth,f,d,p,h)),i(e,{left:s+(this.xCorr||0)+"px",top:l+(this.yCorr||0)+"px"}),u&&(f=e.offsetHeight),this.cTT=v}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,n){var r={},o=l?"-ms-transform":u?"-webkit-transform":s?"MozTransform":d.opera?"-o-transform":"";r[o]=r.transform="rotate("+t+"deg)",r[o+(s?"Origin":"-origin")]=r.transformOrigin=100*e+"% "+n+"px",i(this.element,r)},getSpanCorrection:function(t,e,n){this.xCorr=-t*n,this.yCorr=-e}}),a(h.prototype,{html:function(t,i,r){var s=this.createElement("span"),l=s.element,u=s.renderer,c=u.isSVG,h=function(t,e){o(["opacity","visibility"],function(n){f(t,n+"Setter",function(t,n,i,r){t.call(this,n,i,r),e[i]=n})})};return s.textSetter=function(t){t!==l.innerHTML&&delete this.bBox,l.innerHTML=this.textStr=t,s.htmlUpdateTransform()},c&&h(s,s.element.style),s.xSetter=s.ySetter=s.alignSetter=s.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),s[e]=t,s.htmlUpdateTransform()},s.attr({text:t,x:Math.round(i),y:Math.round(r)}).css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize,position:"absolute"}),l.style.whiteSpace="nowrap",s.css=s.htmlCss,c&&(s.add=function(t){var i,r=u.box.parentNode,c=[];if(this.parentGroup=t){if(i=t.div,!i){for(;t;)c.push(t),t=t.parentGroup;o(c.reverse(),function(t){var o,l=e(t.element,"class");l&&(l={className:l}),i=t.div=t.div||n("div",l,{position:"absolute",left:(t.translateX||0)+"px",top:(t.translateY||0)+"px",display:t.display,opacity:t.opacity,pointerEvents:t.styles&&t.styles.pointerEvents},i||r),o=i.style,a(t,{classSetter:function(t){this.element.setAttribute("class",t),i.className=t},on:function(){return c[0].div&&s.on.apply({element:c[0].div},arguments),t},translateXSetter:function(e,n){o.left=e+"px",t[n]=e,t.doTransform=!0},translateYSetter:function(e,n){o.top=e+"px",t[n]=e,t.doTransform=!0}}),h(t,o)})}}else i=r;return i.appendChild(l),s.added=!0,s.alignOnAdd&&s.htmlUpdateTransform(),s}),s}})}(t),function(t){var e,n,i=t.createElement,r=t.css,o=t.defined,a=t.deg2rad,s=t.discardElement,l=t.doc,u=t.each,c=t.erase,h=t.extend;e=t.extendClass;var d=t.isArray,f=t.isNumber,p=t.isObject,g=t.merge;n=t.noop;var m=t.pick,v=t.pInt,y=t.SVGElement,b=t.SVGRenderer,w=t.win;t.svg||(n={docMode8:l&&8===l.documentMode,init:function(t,e){var n=["<",e,' filled="f" stroked="f"'],r=["position: ","absolute",";"],o="div"===e;("shape"===e||o)&&r.push("left:0;top:0;width:1px;height:1px;"),r.push("visibility: ",o?"hidden":"visible"),n.push(' style="',r.join(""),'"/>'),e&&(n=o||"span"===e||"img"===e?n.join(""):t.prepVML(n),this.element=i(n)),this.renderer=t},add:function(t){var e=this.renderer,n=this.element,i=e.box,r=t&&t.inverted,i=t?t.element||t:i;return t&&(this.parentGroup=t),r&&e.invertChild(n,i),i.appendChild(n),
this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this.className&&this.attr("class",this.className),this},updateTransform:y.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=Math.cos(t*a),n=Math.sin(t*a);r(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-n,", M21=",n,", M22=",e,", sizingMethod='auto expand')"].join(""):"none"})},getSpanCorrection:function(t,e,n,i,o){var s,l=i?Math.cos(i*a):1,u=i?Math.sin(i*a):0,c=m(this.elemHeight,this.element.offsetHeight);this.xCorr=0>l&&-t,this.yCorr=0>u&&-c,s=0>l*u,this.xCorr+=u*e*(s?1-n:n),this.yCorr-=l*e*(i?s?n:1-n:1),o&&"left"!==o&&(this.xCorr-=t*n*(0>l?-1:1),i&&(this.yCorr-=c*n*(0>u?-1:1)),r(this.element,{textAlign:o}))},pathToVML:function(t){for(var e=t.length,n=[];e--;)f(t[e])?n[e]=Math.round(10*t[e])-5:"Z"===t[e]?n[e]="x":(n[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(n[e+5]===n[e+7]&&(n[e+7]+=t[e+7]>t[e+5]?1:-1),n[e+6]===n[e+8]&&(n[e+8]+=t[e+8]>t[e+6]?1:-1)));return n.join(" ")||"x"},clip:function(t){var e,n=this;return t?(e=t.members,c(e,n),e.push(n),n.destroyClip=function(){c(e,n)},t=t.getCSS(n)):(n.destroyClip&&n.destroyClip(),t={clip:n.docMode8?"inherit":"rect(auto)"}),n.css(t)},css:y.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&s(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),y.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=w.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var n;return t=t.split(/[ ,]/),n=t.length,9!==n&&11!==n||(t[n-4]=t[n-2]=v(t[n-2])-10*e),t.join(" ")},shadow:function(t,e,n){var r,o,a,s,l,u,c,h=[],d=this.element,f=this.renderer,p=d.style,g=d.path;if(g&&"string"!=typeof g.value&&(g="x"),l=g,t){for(u=m(t.width,3),c=(t.opacity||.15)/u,r=1;3>=r;r++)s=2*u+1-2*r,n&&(l=this.cutOffPath(g.value,s+.5)),a=['<shape isShadow="true" strokeweight="',s,'" filled="false" path="',l,'" coordsize="10 10" style="',d.style.cssText,'" />'],o=i(f.prepVML(a),null,{left:v(p.left)+m(t.offsetX,1),top:v(p.top)+m(t.offsetY,1)}),n&&(o.cutOff=s+1),a=['<stroke color="',t.color||"#000000",'" opacity="',c*r,'"/>'],i(f.prepVML(a),null,null,o),e?e.element.appendChild(o):d.parentNode.insertBefore(o,d),h.push(o);this.shadows=h}return this},updateShadows:n,setAttr:function(t,e){this.docMode8?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){(this.added?this.element:this).className=t},dashstyleSetter:function(t,e,n){(n.getElementsByTagName("stroke")[0]||i(this.renderer.prepVML(["<stroke/>"]),null,null,n))[e]=t||"solid",this[e]=t},dSetter:function(t,e,n){var i=this.shadows;if(t=t||[],this.d=t.join&&t.join(" "),n.path=t=this.pathToVML(t),i)for(n=i.length;n--;)i[n].path=i[n].cutOff?this.cutOffPath(t,i[n].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,n){var i=n.nodeName;"SPAN"===i?n.style.color=t:"IMG"!==i&&(n.filled="none"!==t,this.setAttr("fillcolor",this.renderer.color(t,n,e,this)))},"fill-opacitySetter":function(t,e,n){i(this.renderer.prepVML(["<",e.split("-")[0],' opacity="',t,'"/>']),null,null,n)},opacitySetter:n,rotationSetter:function(t,e,n){n=n.style,this[e]=n[e]=t,n.left=-Math.round(Math.sin(t*a)+1)+"px",n.top=Math.round(Math.cos(t*a))+"px"},strokeSetter:function(t,e,n){this.setAttr("strokecolor",this.renderer.color(t,n,e,this))},"stroke-widthSetter":function(t,e,n){n.stroked=!!t,this[e]=t,f(t)&&(t+="px"),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,n){"inherit"===t&&(t="visible"),this.shadows&&u(this.shadows,function(n){n.style[e]=t}),"DIV"===n.nodeName&&(t="hidden"===t?"-999em":0,this.docMode8||(n.style[e]=t?"visible":"hidden"),e="top"),n.style[e]=t},xSetter:function(t,e,n){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):n.style[e]=t},zIndexSetter:function(t,e,n){n.style[e]=t}},n["stroke-opacitySetter"]=n["fill-opacitySetter"],t.VMLElement=n=e(y,n),n.prototype.ySetter=n.prototype.widthSetter=n.prototype.heightSetter=n.prototype.xSetter,n={Element:n,isIE8:-1<w.navigator.userAgent.indexOf("MSIE 8.0"),init:function(t,e,n){var i,r;if(this.alignedObjects=[],i=this.createElement("div").css({position:"relative"}),r=i.element,t.appendChild(i.element),this.isVML=!0,this.box=r,this.boxWrapper=i,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(e,n,!1),!l.namespaces.hcv){l.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{l.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(o){l.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,e,n,i){var r=this.createElement(),o=p(t);return h(r,{members:[],count:0,left:(o?t.x:t)+1,top:(o?t.y:e)+1,width:(o?t.width:n)-1,height:(o?t.height:i)-1,getCSS:function(t){var e=t.element,n=e.nodeName,i=t.inverted,r=this.top-("shape"===n?e.offsetTop:0),o=this.left,e=o+this.width,a=r+this.height,r={clip:"rect("+Math.round(i?o:r)+"px,"+Math.round(i?a:e)+"px,"+Math.round(i?e:a)+"px,"+Math.round(i?r:o)+"px)"};return!i&&t.docMode8&&"DIV"===n&&h(r,{width:e+"px",height:a+"px"}),r},updateClipping:function(){u(r.members,function(t){t.element&&t.css(r.getCSS(t))})}})},color:function(e,n,r,o){var a,s,l,c=this,h=/^rgba/,d="none";if(e&&e.linearGradient?l="gradient":e&&e.radialGradient&&(l="pattern"),l){var f,p,g,m,v,y,b,w=e.linearGradient||e.radialGradient,x="";e=e.stops;var _,k=[],C=function(){s=['<fill colors="'+k.join(",")+'" opacity="',v,'" o:opacity2="',m,'" type="',l,'" ',x,'focus="100%" method="any" />'],i(c.prepVML(s),null,null,n)};if(g=e[0],_=e[e.length-1],0<g[0]&&e.unshift([0,g[1]]),1>_[0]&&e.push([1,_[1]]),u(e,function(e,n){h.test(e[1])?(a=t.color(e[1]),f=a.get("rgb"),p=a.get("a")):(f=e[1],p=1),k.push(100*e[0]+"% "+f),n?(v=p,y=f):(m=p,b=f)}),"fill"===r)if("gradient"===l)r=w.x1||w[0]||0,e=w.y1||w[1]||0,g=w.x2||w[2]||0,w=w.y2||w[3]||0,x='angle="'+(90-180*Math.atan((w-e)/(g-r))/Math.PI)+'"',C();else{var S,d=w.r,M=2*d,T=2*d,E=w.cx,O=w.cy,A=n.radialReference,d=function(){A&&(S=o.getBBox(),E+=(A[0]-S.x)/S.width-.5,O+=(A[1]-S.y)/S.height-.5,M*=A[2]/S.width,T*=A[2]/S.height),x='src="'+t.getOptions().global.VMLRadialGradientURL+'" size="'+M+","+T+'" origin="0.5,0.5" position="'+E+","+O+'" color2="'+b+'" ',C()};o.added?d():o.onAdd=d,d=y}else d=f}else h.test(e)&&"IMG"!==n.tagName?(a=t.color(e),o[r+"-opacitySetter"](a.get("a"),r,n),d=a.get("rgb")):(d=n.getElementsByTagName(r),d.length&&(d[0].opacity=1,d[0].type="solid"),d=e);return d},prepVML:function(t){var e=this.isIE8;return t=t.join(""),e?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=-1===t.indexOf('style="')?t.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):t.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):t=t.replace("<","<hcv:"),t},text:b.prototype.html,path:function(t){var e={coordsize:"10 10"};return d(t)?e.d=t:p(t)&&h(e,t),this.createElement("shape").attr(e)},circle:function(t,e,n){var i=this.symbol("circle");return p(t)&&(n=t.r,e=t.y,t=t.x),i.isCircle=!0,i.r=n,i.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:"highcharts-"+t,"class":"highcharts-"+t}),this.createElement("div").attr(e)},image:function(t,e,n,i,r){var o=this.createElement("img").attr({src:t});return 1<arguments.length&&o.attr({x:e,y:n,width:i,height:r}),o},createElement:function(t){return"rect"===t?this.symbol(t):b.prototype.createElement.call(this,t)},invertChild:function(t,e){var n=this;e=e.style;var i="IMG"===t.tagName&&t.style;r(t,{flip:"x",left:v(e.width)-(i?v(i.top):1),top:v(e.height)-(i?v(i.left):1),rotation:-90}),u(t.childNodes,function(e){n.invertChild(e,t)})},symbols:{arc:function(t,e,n,i,r){var o=r.start,a=r.end,s=r.r||n||i;n=r.innerR,i=Math.cos(o);var l=Math.sin(o),u=Math.cos(a),c=Math.sin(a);return 0===a-o?["x"]:(o=["wa",t-s,e-s,t+s,e+s,t+s*i,e+s*l,t+s*u,e+s*c],r.open&&!n&&o.push("e","M",t,e),o.push("at",t-n,e-n,t+n,e+n,t+n*u,e+n*c,t+n*i,e+n*l,"x","e"),o.isArc=!0,o)},circle:function(t,e,n,i,r){return r&&o(r.r)&&(n=i=2*r.r),r&&r.isCircle&&(t-=n/2,e-=i/2),["wa",t,e,t+n,e+i,t+n,e+i/2,t+n,e+i/2,"e"]},rect:function(t,e,n,i,r){return b.prototype.symbols[o(r)&&r.r?"callout":"square"].call(0,t,e,n,i,r)}}},t.VMLRenderer=e=function(){this.init.apply(this,arguments)},e.prototype=g(b.prototype,n),t.Renderer=e),b.prototype.measureSpanWidth=function(t,e){var n=l.createElement("span");return t=l.createTextNode(t),n.appendChild(t),r(n,e),this.box.appendChild(n),e=n.offsetWidth,s(n),e}}(t),function(t){function e(){var e=t.defaultOptions.global,n=l.moment;if(e.timezone){if(n)return function(t){return-n.tz(t,e.timezone).utcOffset()};t.error(25)}return e.useUTC&&e.getTimezoneOffset}function n(){var n,i=t.defaultOptions.global,a=i.useUTC,u=a?"getUTC":"get",c=a?"setUTC":"set";t.Date=n=i.Date||l.Date,n.hcTimezoneOffset=a&&i.timezoneOffset,n.hcGetTimezoneOffset=e(),n.hcMakeTime=function(t,e,i,r,l,u){var c;return a?(c=n.UTC.apply(0,arguments),c+=o(c)):c=new n(t,e,s(i,1),s(r,0),s(l,0),s(u,0)).getTime(),c},r("Minutes Hours Day Date Month FullYear".split(" "),function(t){n["hcGet"+t]=u+t}),r("Milliseconds Seconds Minutes Hours Date Month FullYear".split(" "),function(t){n["hcSet"+t]=c+t})}var i=t.color,r=t.each,o=t.getTZOffset,a=t.merge,s=t.pick,l=t.win;t.defaultOptions={colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" "),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,VMLRadialGradientURL:"http://code.highcharts.com/5.0.14/gfx/vml-radial-gradient.png"},chart:{borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}},width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:t.svg,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",padding:8,snap:t.isTouchDevice?25:10,backgroundColor:i("#f7f7f7").setOpacity(.85).get(),borderWidth:1,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,style:{color:"#333333",cursor:"default",fontSize:"12px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}},t.setOptions=function(e){return t.defaultOptions=a(!0,t.defaultOptions,e),n(),t.defaultOptions},t.getOptions=function(){return t.defaultOptions},t.defaultPlotOptions=t.defaultOptions.plotOptions,n()}(t),function(t){var e=t.correctFloat,n=t.defined,i=t.destroyObjectProperties,r=t.isNumber,o=t.merge,a=t.pick,s=t.deg2rad;t.Tick=function(t,e,n,i){this.axis=t,this.pos=e,this.type=n||"",this.isNewLabel=this.isNew=!0,n||i||this.addLabel()},t.Tick.prototype={addLabel:function(){var t,i=this.axis,r=i.options,s=i.chart,l=i.categories,u=i.names,c=this.pos,h=r.labels,d=i.tickPositions,f=c===d[0],p=c===d[d.length-1],u=l?a(l[c],u[c],c):c,l=this.label,d=d.info;i.isDatetimeAxis&&d&&(t=r.dateTimeLabelFormats[d.higherRanks[c]||d.unitName]),this.isFirst=f,this.isLast=p,r=i.labelFormatter.call({axis:i,chart:s,isFirst:f,isLast:p,dateTimeLabelFormat:t,value:i.isLog?e(i.lin2log(u)):u,pos:c}),n(l)?l&&l.attr({text:r}):(this.labelLength=(this.label=l=n(r)&&h.enabled?s.renderer.text(r,0,0,h.useHTML).css(o(h.style)).add(i.labelGroup):null)&&l.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(t){var e,n=this.axis,i=t.x,r=n.chart.chartWidth,o=n.chart.spacing,l=a(n.labelLeft,Math.min(n.pos,o[3])),o=a(n.labelRight,Math.max(n.pos+n.len,r-o[1])),u=this.label,c=this.rotation,h={left:0,center:.5,right:1}[n.labelAlign],d=u.getBBox().width,f=n.getSlotWidth(),p=f,g=1,m={};c?0>c&&i-h*d<l?e=Math.round(i/Math.cos(c*s)-l):0<c&&i+h*d>o&&(e=Math.round((r-i)/Math.cos(c*s))):(r=i+(1-h)*d,i-h*d<l?p=t.x+p*(1-h)-l:r>o&&(p=o-t.x+p*h,g=-1),p=Math.min(f,p),p<f&&"center"===n.labelAlign&&(t.x+=g*(f-p-h*(f-Math.min(d,p)))),(d>p||n.autoRotation&&(u.styles||{}).width)&&(e=p)),e&&(m.width=e,(n.options.labels.style||{}).textOverflow||(m.textOverflow="ellipsis"),u.css(m))},getPosition:function(t,e,n,i){var r=this.axis,o=r.chart,a=i&&o.oldChartHeight||o.chartHeight;return{x:t?r.translate(e+n,null,null,i)+r.transB:r.left+r.offset+(r.opposite?(i&&o.oldChartWidth||o.chartWidth)-r.right-r.left:0),y:t?a-r.bottom+r.offset-(r.opposite?r.height:0):a-r.translate(e+n,null,null,i)-r.transB}},getLabelPosition:function(t,e,i,r,o,a,l,u){var c=this.axis,h=c.transA,d=c.reversed,f=c.staggerLines,p=c.tickRotCorr||{x:0,y:0},g=o.y;return n(g)||(g=0===c.side?i.rotation?-8:-i.getBBox().height:2===c.side?p.y+8:Math.cos(i.rotation*s)*(p.y-i.getBBox(!1,0).height/2)),t=t+o.x+p.x-(a&&r?a*h*(d?-1:1):0),e=e+g-(a&&!r?a*h*(d?1:-1):0),f&&(i=l/(u||1)%f,c.opposite&&(i=f-i-1),e+=c.labelOffset/f*i),{x:t,y:Math.round(e)}},getMarkPath:function(t,e,n,i,r,o){return o.crispLine(["M",t,e,"L",t+(r?0:-n),e+(r?n:0)],i)},renderGridLine:function(t,e,n){var i=this.axis,r=i.options,o=this.gridLine,a={},s=this.pos,l=this.type,u=i.tickmarkOffset,c=i.chart.renderer,h=l?l+"Grid":"grid",d=r[h+"LineWidth"],f=r[h+"LineColor"],r=r[h+"LineDashStyle"];o||(a.stroke=f,a["stroke-width"]=d,r&&(a.dashstyle=r),l||(a.zIndex=1),t&&(a.opacity=0),this.gridLine=o=c.path().attr(a).addClass("highcharts-"+(l?l+"-":"")+"grid-line").add(i.gridGroup)),!t&&o&&(t=i.getPlotLinePath(s+u,o.strokeWidth()*n,t,!0))&&o[this.isNew?"attr":"animate"]({d:t,opacity:e})},renderMark:function(t,e,n){var i=this.axis,r=i.options,o=i.chart.renderer,s=this.type,l=s?s+"Tick":"tick",u=i.tickSize(l),c=this.mark,h=!c,d=t.x;t=t.y;var f=a(r[l+"Width"],!s&&i.isXAxis?1:0),r=r[l+"Color"];u&&(i.opposite&&(u[0]=-u[0]),h&&(this.mark=c=o.path().addClass("highcharts-"+(s?s+"-":"")+"tick").add(i.axisGroup),c.attr({stroke:r,"stroke-width":f})),c[h?"attr":"animate"]({d:this.getMarkPath(d,t,u[0],c.strokeWidth()*n,i.horiz,o),opacity:e}))},renderLabel:function(t,e,n,i){var o=this.axis,s=o.horiz,l=o.options,u=this.label,c=l.labels,h=c.step,d=o.tickmarkOffset,f=!0,p=t.x;t=t.y,u&&r(p)&&(u.xy=t=this.getLabelPosition(p,t,u,s,c,d,i,h),this.isFirst&&!this.isLast&&!a(l.showFirstLabel,1)||this.isLast&&!this.isFirst&&!a(l.showLastLabel,1)?f=!1:!s||o.isRadial||c.step||c.rotation||e||0===n||this.handleOverflow(t),h&&i%h&&(f=!1),f&&r(t.y)?(t.opacity=n,u[this.isNewLabel?"attr":"animate"](t),this.isNewLabel=!1):(u.attr("y",-9999),this.isNewLabel=!0),this.isNew=!1)},render:function(t,e,n){var i=this.axis,r=i.horiz,o=this.getPosition(r,this.pos,i.tickmarkOffset,e),s=o.x,l=o.y,i=r&&s===i.pos+i.len||!r&&l===i.pos?-1:1;n=a(n,1),this.isActive=!0,this.renderGridLine(e,n,i),this.renderMark(o,n,i),this.renderLabel(o,e,n,t)},destroy:function(){i(this,this.axis)}}}(t);var e=function(t){var e=t.addEvent,n=t.animObject,i=t.arrayMax,r=t.arrayMin,o=t.color,a=t.correctFloat,s=t.defaultOptions,l=t.defined,u=t.deg2rad,c=t.destroyObjectProperties,h=t.each,d=t.extend,f=t.fireEvent,p=t.format,g=t.getMagnitude,m=t.grep,v=t.inArray,y=t.isArray,b=t.isNumber,w=t.isString,x=t.merge,_=t.normalizeTickInterval,k=t.objectEach,C=t.pick,S=t.removeEvent,M=t.splat,T=t.syncTimeout,E=t.Tick,O=function(){this.init.apply(this,arguments)};return t.extend(O.prototype,{defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,labels:{enabled:!0,style:{color:"#666666",cursor:"default",fontSize:"11px"},x:0},minPadding:.01,maxPadding:.01,minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#666666"}},type:"linear",minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",tickColor:"#ccd6eb"},defaultYAxisOptions:{endOnTick:!0,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{allowOverlap:!1,enabled:!1,formatter:function(){return t.numberFormat(this.total,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"#000000",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},defaultLeftAxisOptions:{labels:{x:-15},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},init:function(t,n){var i=n.isX,r=this;r.chart=t,r.horiz=t.inverted&&!r.isZAxis?!i:i,r.isXAxis=i,r.coll=r.coll||(i?"xAxis":"yAxis"),r.opposite=n.opposite,r.side=n.side||(r.horiz?r.opposite?0:2:r.opposite?1:3),r.setOptions(n);var o=this.options,a=o.type;r.labelFormatter=o.labels.formatter||r.defaultLabelFormatter,r.userOptions=n,r.minPixelPadding=0,r.reversed=o.reversed,r.visible=!1!==o.visible,r.zoomEnabled=!1!==o.zoomEnabled,r.hasNames="category"===a||!0===o.categories,r.categories=o.categories||r.hasNames,r.names=r.names||[],r.plotLinesAndBandsGroups={},r.isLog="logarithmic"===a,r.isDatetimeAxis="datetime"===a,r.positiveValuesOnly=r.isLog&&!r.allowNegativeLog,r.isLinked=l(o.linkedTo),r.ticks={},r.labelEdge=[],r.minorTicks={},r.plotLinesAndBands=[],r.alternateBands={},r.len=0,r.minRange=r.userMinRange=o.minRange||o.maxZoom,r.range=o.range,r.offset=o.offset||0,r.stacks={},r.oldStacks={},r.stacksTouched=0,r.max=null,r.min=null,r.crosshair=C(o.crosshair,M(t.options.tooltip.crosshairs)[i?0:1],!1),n=r.options.events,-1===v(r,t.axes)&&(i?t.axes.splice(t.xAxis.length,0,r):t.axes.push(r),t[r.coll].push(r)),r.series=r.series||[],t.inverted&&!r.isZAxis&&i&&void 0===r.reversed&&(r.reversed=!0),k(n,function(t,n){e(r,n,t)}),r.lin2log=o.linearToLogConverter||r.lin2log,r.isLog&&(r.val2lin=r.log2lin,r.lin2val=r.lin2log)},setOptions:function(t){this.options=x(this.defaultOptions,"yAxis"===this.coll&&this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],x(s[this.coll],t))},defaultLabelFormatter:function(){var e,n=this.axis,i=this.value,r=n.categories,o=this.dateTimeLabelFormat,a=s.lang,l=a.numericSymbols,a=a.numericSymbolMagnitude||1e3,u=l&&l.length,c=n.options.labels.format,n=n.isLog?Math.abs(i):n.tickInterval;if(c)e=p(c,this);else if(r)e=i;else if(o)e=t.dateFormat(o,i);else if(u&&1e3<=n)for(;u--&&void 0===e;)r=Math.pow(a,u+1),n>=r&&0===10*i%r&&null!==l[u]&&0!==i&&(e=t.numberFormat(i/r,-1)+l[u]);return void 0===e&&(e=1e4<=Math.abs(i)?t.numberFormat(i,-1):t.numberFormat(i,-1,void 0,"")),e},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.threshold=null,t.softThreshold=!t.isXAxis,t.buildStacks&&t.buildStacks(),h(t.series,function(n){if(n.visible||!e.options.chart.ignoreHiddenSeries){var o,a=n.options,s=a.threshold;t.hasVisibleSeries=!0,t.positiveValuesOnly&&0>=s&&(s=null),t.isXAxis?(a=n.xData,a.length&&(n=r(a),b(n)||n instanceof Date||(a=m(a,function(t){return b(t)}),n=r(a)),t.dataMin=Math.min(C(t.dataMin,a[0]),n),t.dataMax=Math.max(C(t.dataMax,a[0]),i(a)))):(n.getExtremes(),o=n.dataMax,n=n.dataMin,l(n)&&l(o)&&(t.dataMin=Math.min(C(t.dataMin,n),n),t.dataMax=Math.max(C(t.dataMax,o),o)),l(s)&&(t.threshold=s),(!a.softThreshold||t.positiveValuesOnly)&&(t.softThreshold=!1))}})},translate:function(t,e,n,i,r,o){var a=this.linkedParent||this,s=1,l=0,u=i?a.oldTransA:a.transA;i=i?a.oldMin:a.min;var c=a.minPixelPadding;return r=(a.isOrdinal||a.isBroken||a.isLog&&r)&&a.lin2val,u||(u=a.transA),n&&(s*=-1,l=a.len),a.reversed&&(s*=-1,l-=s*(a.sector||a.len)),e?(t=(t*s+l-c)/u+i,r&&(t=a.lin2val(t))):(r&&(t=a.val2lin(t)),t=s*(t-i)*u+l+s*c+(b(o)?u*o:0)),t},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,n,i,r){var o,a,s,l=this.chart,u=this.left,c=this.top,h=n&&l.oldChartHeight||l.chartHeight,d=n&&l.oldChartWidth||l.chartWidth;o=this.transB;var f=function(t,e,n){return(t<e||t>n)&&(i?t=Math.min(Math.max(e,t),n):s=!0),t};return r=C(r,this.translate(t,null,null,n)),t=n=Math.round(r+o),o=a=Math.round(h-r-o),b(r)?this.horiz?(o=c,a=h-this.bottom,t=n=f(t,u,u+this.width)):(t=u,n=d-this.right,o=a=f(o,c,c+this.height)):s=!0,s&&!i?null:l.renderer.crispLine(["M",t,o,"L",n,a],e||1)},getLinearTickPositions:function(t,e,n){var i,r=a(Math.floor(e/t)*t);n=a(Math.ceil(n/t)*t);var o=[];if(this.single)return[e];for(e=r;e<=n&&(o.push(e),e=a(e+t),e!==i);)i=e;return o},getMinorTickPositions:function(){var t=this,e=t.options,n=t.tickPositions,i=t.minorTickInterval,r=[],o=t.pointRangePadding||0,a=t.min-o,o=t.max+o,s=o-a;if(s&&s/i<t.len/3)if(t.isLog)h(this.paddedTicks,function(e,n,o){n&&r.push.apply(r,t.getLogTickPositions(i,o[n-1],o[n],!0))});else if(t.isDatetimeAxis&&"auto"===e.minorTickInterval)r=r.concat(t.getTimeTicks(t.normalizeTimeTickInterval(i),a,o,e.startOfWeek));else for(e=a+(n[0]-a)%i;e<=o&&e!==r[0];e+=i)r.push(e);return 0!==r.length&&t.trimTicks(r),r},adjustForMinRange:function(){var t,e,n,o,a,s,u,c,d=this.options,f=this.min,p=this.max;this.isXAxis&&void 0===this.minRange&&!this.isLog&&(l(d.min)||l(d.max)?this.minRange=null:(h(this.series,function(t){for(s=t.xData,o=u=t.xIncrement?1:s.length-1;0<o;o--)a=s[o]-s[o-1],(void 0===n||a<n)&&(n=a)}),this.minRange=Math.min(5*n,this.dataMax-this.dataMin))),p-f<this.minRange&&(e=this.dataMax-this.dataMin>=this.minRange,c=this.minRange,t=(c-p+f)/2,t=[f-t,C(d.min,f-t)],e&&(t[2]=this.isLog?this.log2lin(this.dataMin):this.dataMin),f=i(t),p=[f+c,C(d.max,f+c)],e&&(p[2]=this.isLog?this.log2lin(this.dataMax):this.dataMax),p=r(p),p-f<c&&(t[0]=p-c,t[1]=C(d.min,p-c),f=i(t))),this.min=f,this.max=p},getClosest:function(){var t;return this.categories?t=1:h(this.series,function(e){var n=e.closestPointRange,i=e.visible||!e.chart.options.chart.ignoreHiddenSeries;!e.noSharedTooltip&&l(n)&&i&&(t=l(t)?Math.min(t,n):n)}),t},nameToX:function(t){var e,n=y(this.categories),i=n?this.categories:this.names,r=t.options.x;return t.series.requireSorting=!1,l(r)||(r=!1===this.options.uniqueNames?t.series.autoIncrement():v(t.name,i)),-1===r?n||(e=i.length):e=r,void 0!==e&&(this.names[e]=t.name),e},updateNames:function(){var t=this;0<this.names.length&&(this.names.length=0,this.minRange=this.userMinRange,h(this.series||[],function(e){e.xIncrement=null,e.points&&!e.isDirtyData||(e.processData(),e.generatePoints()),h(e.points,function(n,i){var r;n.options&&(r=t.nameToX(n),void 0!==r&&r!==n.x&&(n.x=r,e.xData[i]=r))})}))},setAxisTranslation:function(t){var e,n=this,i=n.max-n.min,r=n.axisPointRange||0,o=0,a=0,s=n.linkedParent,l=!!n.categories,u=n.transA,c=n.isXAxis;(c||l||r)&&(e=n.getClosest(),s?(o=s.minPointOffset,a=s.pointRangePadding):h(n.series,function(t){var i=l?1:c?C(t.options.pointRange,e,0):n.axisPointRange||0;t=t.options.pointPlacement,r=Math.max(r,i),n.single||(o=Math.max(o,w(t)?0:i/2),a=Math.max(a,"on"===t?0:i))}),s=n.ordinalSlope&&e?n.ordinalSlope/e:1,n.minPointOffset=o*=s,n.pointRangePadding=a*=s,n.pointRange=Math.min(r,i),c&&(n.closestPointRange=e)),t&&(n.oldTransA=u),n.translationSlope=n.transA=u=n.options.staticScale||n.len/(i+a||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=u*o},minFromRange:function(){return this.max-this.range},setTickInterval:function(e){var n,i,r,o,s=this,u=s.chart,c=s.options,d=s.isLog,p=s.log2lin,m=s.isDatetimeAxis,v=s.isXAxis,y=s.isLinked,w=c.maxPadding,x=c.minPadding,k=c.tickInterval,S=c.tickPixelInterval,M=s.categories,T=s.threshold,E=s.softThreshold;m||M||y||this.getTickAmount(),r=C(s.userMin,c.min),o=C(s.userMax,c.max),y?(s.linkedParent=u[s.coll][c.linkedTo],u=s.linkedParent.getExtremes(),s.min=C(u.min,u.dataMin),s.max=C(u.max,u.dataMax),c.type!==s.linkedParent.options.type&&t.error(11,1)):(!E&&l(T)&&(s.dataMin>=T?(n=T,x=0):s.dataMax<=T&&(i=T,w=0)),s.min=C(r,n,s.dataMin),s.max=C(o,i,s.dataMax)),d&&(s.positiveValuesOnly&&!e&&0>=Math.min(s.min,C(s.dataMin,s.min))&&t.error(10,1),s.min=a(p(s.min),15),s.max=a(p(s.max),15)),s.range&&l(s.max)&&(s.userMin=s.min=r=Math.max(s.dataMin,s.minFromRange()),s.userMax=o=s.max,s.range=null),f(s,"foundExtremes"),s.beforePadding&&s.beforePadding(),s.adjustForMinRange(),!(M||s.axisPointRange||s.usePercentage||y)&&l(s.min)&&l(s.max)&&(p=s.max-s.min)&&(!l(r)&&x&&(s.min-=p*x),!l(o)&&w&&(s.max+=p*w)),b(c.softMin)&&(s.min=Math.min(s.min,c.softMin)),b(c.softMax)&&(s.max=Math.max(s.max,c.softMax)),b(c.floor)&&(s.min=Math.max(s.min,c.floor)),b(c.ceiling)&&(s.max=Math.min(s.max,c.ceiling)),E&&l(s.dataMin)&&(T=T||0,!l(r)&&s.min<T&&s.dataMin>=T?s.min=T:!l(o)&&s.max>T&&s.dataMax<=T&&(s.max=T)),s.tickInterval=s.min===s.max||void 0===s.min||void 0===s.max?1:y&&!k&&S===s.linkedParent.options.tickPixelInterval?k=s.linkedParent.tickInterval:C(k,this.tickAmount?(s.max-s.min)/Math.max(this.tickAmount-1,1):void 0,M?1:(s.max-s.min)*S/Math.max(s.len,S)),v&&!e&&h(s.series,function(t){t.processData(s.min!==s.oldMin||s.max!==s.oldMax)}),s.setAxisTranslation(!0),s.beforeSetTickPositions&&s.beforeSetTickPositions(),s.postProcessTickInterval&&(s.tickInterval=s.postProcessTickInterval(s.tickInterval)),s.pointRange&&!k&&(s.tickInterval=Math.max(s.pointRange,s.tickInterval)),e=C(c.minTickInterval,s.isDatetimeAxis&&s.closestPointRange),!k&&s.tickInterval<e&&(s.tickInterval=e),m||d||k||(s.tickInterval=_(s.tickInterval,null,g(s.tickInterval),C(c.allowDecimals,!(.5<s.tickInterval&&5>s.tickInterval&&1e3<s.max&&9999>s.max)),!!this.tickAmount)),this.tickAmount||(s.tickInterval=s.unsquish()),this.setTickPositions()},setTickPositions:function(){var t,e=this.options,n=e.tickPositions,i=e.tickPositioner,r=e.startOnTick,o=e.endOnTick;this.tickmarkOffset=this.categories&&"between"===e.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===e.minorTickInterval&&this.tickInterval?this.tickInterval/5:e.minorTickInterval,this.single=this.min===this.max&&l(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==e.allowDecimals),this.tickPositions=t=n&&n.slice(),!t&&(t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,e.units),this.min,this.max,e.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),t.length>this.len&&(t=[t[0],t.pop()]),this.tickPositions=t,i&&(i=i.apply(this,[this.min,this.max])))&&(this.tickPositions=t=i),this.paddedTicks=t.slice(0),this.trimTicks(t,r,o),this.isLinked||(this.single&&2>t.length&&(this.min-=.5,this.max+=.5),n||i||this.adjustTickAmount())},trimTicks:function(t,e,n){var i=t[0],r=t[t.length-1],o=this.minPointOffset||0;if(!this.isLinked){if(e&&-(1/0)!==i)this.min=i;else for(;this.min-o>t[0];)t.shift();if(n)this.max=r;else for(;this.max+o<t[t.length-1];)t.pop();0===t.length&&l(i)&&t.push((r+i)/2)}},alignToOthers:function(){var t,e={},n=this.options;return!1===this.chart.options.chart.alignTicks||!1===n.alignTicks||this.isLog||h(this.chart[this.coll],function(n){var i=n.options,i=[n.horiz?i.left:i.top,i.width,i.height,i.pane].join();n.series.length&&(e[i]?t=!0:e[i]=1)}),t},getTickAmount:function(){var t=this.options,e=t.tickAmount,n=t.tickPixelInterval;!l(t.tickInterval)&&this.len<n&&!this.isRadial&&!this.isLog&&t.startOnTick&&t.endOnTick&&(e=2),!e&&this.alignToOthers()&&(e=Math.ceil(this.len/n)+1),4>e&&(this.finalTickAmt=e,e=5),this.tickAmount=e},adjustTickAmount:function(){var t=this.tickInterval,e=this.tickPositions,n=this.tickAmount,i=this.finalTickAmt,r=e&&e.length;if(r<n){for(;e.length<n;)e.push(a(e[e.length-1]+t));this.transA*=(r-1)/(n-1),this.max=e[e.length-1]}else r>n&&(this.tickInterval*=2,this.setTickPositions());if(l(i)){for(t=n=e.length;t--;)(3===i&&1===t%2||2>=i&&0<t&&t<n-1)&&e.splice(t,1);this.finalTickAmt=void 0}},setScale:function(){var t,e;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),e=this.len!==this.oldAxisLength,h(this.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(t=!0)}),e||t||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax||this.alignToOthers()?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks()},setExtremes:function(t,e,n,i,r){var o=this,a=o.chart;n=C(n,!0),h(o.series,function(t){delete t.kdTree}),r=d(r,{min:t,max:e}),f(o,"setExtremes",r,function(){o.userMin=t,o.userMax=e,o.eventArgs=r,n&&a.redraw(i)})},zoom:function(t,e){var n=this.dataMin,i=this.dataMax,r=this.options,o=Math.min(n,C(r.min,n)),r=Math.max(i,C(r.max,i));return t===this.min&&e===this.max||(this.allowZoomOutside||(l(n)&&(t<o&&(t=o),t>r&&(t=r)),l(i)&&(e<o&&(e=o),e>r&&(e=r))),this.displayBtn=void 0!==t||void 0!==e,this.setExtremes(t,e,!1,void 0,{trigger:"zoom"})),!0},setAxisSize:function(){var e=this.chart,n=this.options,i=n.offsets||[0,0,0,0],r=this.horiz,o=this.width=Math.round(t.relativeLength(C(n.width,e.plotWidth-i[3]+i[1]),e.plotWidth)),a=this.height=Math.round(t.relativeLength(C(n.height,e.plotHeight-i[0]+i[2]),e.plotHeight)),s=this.top=Math.round(t.relativeLength(C(n.top,e.plotTop+i[0]),e.plotHeight,e.plotTop)),n=this.left=Math.round(t.relativeLength(C(n.left,e.plotLeft+i[3]),e.plotWidth,e.plotLeft));this.bottom=e.chartHeight-a-s,this.right=e.chartWidth-o-n,this.len=Math.max(r?o:a,0),this.pos=r?n:s},getExtremes:function(){var t=this.isLog,e=this.lin2log;return{min:t?a(e(this.min)):this.min,max:t?a(e(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,n=this.lin2log,i=e?n(this.min):this.min,e=e?n(this.max):this.max;return null===t?t=i:i>t?t=i:e<t&&(t=e),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){return t=(C(t,0)-90*this.side+720)%360,15<t&&165>t?"right":195<t&&345>t?"left":"center";
},tickSize:function(t){var e=this.options,n=e[t+"Length"],i=C(e[t+"Width"],"tick"===t&&this.isXAxis?1:0);if(i&&n)return"inside"===e[t+"Position"]&&(n=-n),[n,i]},labelMetrics:function(){var t=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style&&this.options.labels.style.fontSize,this.ticks[t]&&this.ticks[t].label)},unsquish:function(){var t,e,n,i=this.options.labels,r=this.horiz,o=this.tickInterval,a=o,s=this.len/(((this.categories?1:0)+this.max-this.min)/o),c=i.rotation,d=this.labelMetrics(),f=Number.MAX_VALUE,p=function(t){return t/=s||1,t=1<t?Math.ceil(t):1,t*o};return r?(n=!i.staggerLines&&!i.step&&(l(c)?[c]:s<C(i.autoRotationLimit,80)&&i.autoRotation))&&h(n,function(n){var i;(n===c||n&&-90<=n&&90>=n)&&(e=p(Math.abs(d.h/Math.sin(u*n))),i=e+Math.abs(n/360),i<f&&(f=i,t=n,a=e))}):i.step||(a=p(d.h)),this.autoRotation=n,this.labelRotation=C(t,c),a},getSlotWidth:function(){var t=this.chart,e=this.horiz,n=this.options.labels,i=Math.max(this.tickPositions.length-(this.categories?0:1),1),r=t.margin[3];return e&&2>(n.step||0)&&!n.rotation&&(this.staggerLines||1)*this.len/i||!e&&(r&&r-t.spacing[3]||.33*t.chartWidth)},renderUnsquish:function(){var t,e,n,i=this.chart,r=i.renderer,o=this.tickPositions,a=this.ticks,s=this.options.labels,l=this.horiz,u=this.getSlotWidth(),c=Math.max(1,Math.round(u-2*(s.padding||5))),d={},f=this.labelMetrics(),p=s.style&&s.style.textOverflow,g=0;if(w(s.rotation)||(d.rotation=s.rotation||0),h(o,function(t){(t=a[t])&&t.labelLength>g&&(g=t.labelLength)}),this.maxLabelLength=g,this.autoRotation)g>c&&g>f.h?d.rotation=this.labelRotation:this.labelRotation=0;else if(u&&(t={width:c+"px"},!p))for(t.textOverflow="clip",e=o.length;!l&&e--;)n=o[e],(c=a[n].label)&&(c.styles&&"ellipsis"===c.styles.textOverflow?c.css({textOverflow:"clip"}):a[n].labelLength>u&&c.css({width:u+"px"}),c.getBBox().height>this.len/o.length-(f.h-f.f)&&(c.specCss={textOverflow:"ellipsis"}));d.rotation&&(t={width:(g>.5*i.chartHeight?.33*i.chartHeight:i.chartHeight)+"px"},p||(t.textOverflow="ellipsis")),(this.labelAlign=s.align||this.autoLabelAlign(this.labelRotation))&&(d.align=this.labelAlign),h(o,function(e){var n=(e=a[e])&&e.label;n&&(n.attr(d),t&&n.css(x(t,n.specCss)),delete n.specCss,e.rotation=d.rotation)}),this.tickRotCorr=r.rotCorr(f.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||l(this.min)&&l(this.max)&&!!this.tickPositions},addTitle:function(t){var e,n=this.chart.renderer,i=this.horiz,r=this.opposite,o=this.options.title;this.axisTitle||((e=o.textAlign)||(e=(i?{low:"left",middle:"center",high:"right"}:{low:r?"right":"left",middle:"center",high:r?"left":"right"})[o.align]),this.axisTitle=n.text(o.text,0,0,o.useHTML).attr({zIndex:7,rotation:o.rotation||0,align:e}).addClass("highcharts-axis-title").css(o.style).add(this.axisGroup),this.axisTitle.isNew=!0),o.style.width||this.isRadial||this.axisTitle.css({width:this.len}),this.axisTitle[t?"show":"hide"](!0)},generateTick:function(t){var e=this.ticks;e[t]?e[t].addLabel():e[t]=new E(this,t)},getOffset:function(){var t,e,n,i=this,r=i.chart,o=r.renderer,a=i.options,s=i.tickPositions,u=i.ticks,c=i.horiz,d=i.side,f=r.inverted&&!i.isZAxis?[1,0,3,2][d]:d,p=0,g=0,m=a.title,v=a.labels,y=0,b=r.axisOffset,r=r.clipOffset,w=[-1,1,1,-1][d],x=a.className,_=i.axisParent,S=this.tickSize("tick");t=i.hasData(),i.showAxis=e=t||C(a.showEmpty,!0),i.staggerLines=i.horiz&&v.staggerLines,i.axisGroup||(i.gridGroup=o.g("grid").attr({zIndex:a.gridZIndex||1}).addClass("highcharts-"+this.coll.toLowerCase()+"-grid "+(x||"")).add(_),i.axisGroup=o.g("axis").attr({zIndex:a.zIndex||2}).addClass("highcharts-"+this.coll.toLowerCase()+" "+(x||"")).add(_),i.labelGroup=o.g("axis-labels").attr({zIndex:v.zIndex||7}).addClass("highcharts-"+i.coll.toLowerCase()+"-labels "+(x||"")).add(_)),t||i.isLinked?(h(s,function(t,e){i.generateTick(t,e)}),i.renderUnsquish(),!1===v.reserveSpace||0!==d&&2!==d&&{1:"left",3:"right"}[d]!==i.labelAlign&&"center"!==i.labelAlign||h(s,function(t){y=Math.max(u[t].getLabelSize(),y)}),i.staggerLines&&(y*=i.staggerLines,i.labelOffset=y*(i.opposite?-1:1))):k(u,function(t,e){t.destroy(),delete u[e]}),m&&m.text&&!1!==m.enabled&&(i.addTitle(e),e&&!1!==m.reserveSpace&&(i.titleOffset=p=i.axisTitle.getBBox()[c?"height":"width"],n=m.offset,g=l(n)?0:C(m.margin,c?5:10))),i.renderLine(),i.offset=w*C(a.offset,b[d]),i.tickRotCorr=i.tickRotCorr||{x:0,y:0},o=0===d?-i.labelMetrics().h:2===d?i.tickRotCorr.y:0,g=Math.abs(y)+g,y&&(g=g-o+w*(c?C(v.y,i.tickRotCorr.y+8*w):v.x)),i.axisTitleMargin=C(n,g),b[d]=Math.max(b[d],i.axisTitleMargin+p+w*i.offset,g,t&&s.length&&S?S[0]+w*i.offset:0),s=2*Math.floor(i.axisLine.strokeWidth()/2),0<a.offset&&(s-=2*a.offset),r[f]=Math.max(r[f]||s,s)},getLinePath:function(t){var e=this.chart,n=this.opposite,i=this.offset,r=this.horiz,o=this.left+(n?this.width:0)+i,i=e.chartHeight-this.bottom-(n?this.height:0)+i;return n&&(t*=-1),e.renderer.crispLine(["M",r?this.left:o,r?i:this.top,"L",r?e.chartWidth-this.right:o,r?i:e.chartHeight-this.bottom],t)},renderLine:function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},getTitlePosition:function(){var t=this.horiz,e=this.left,n=this.top,i=this.len,r=this.options.title,o=t?e:n,a=this.opposite,s=this.offset,l=r.x||0,u=r.y||0,c=this.axisTitle,h=this.chart.renderer.fontMetrics(r.style&&r.style.fontSize,c),c=Math.max(c.getBBox(null,0).height-h.h-1,0),i={low:o+(t?0:i),middle:o+i/2,high:o+(t?i:0)}[r.align],e=(t?n+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+[-c,c,h.f,-c][this.side];return{x:t?i+l:e+(a?this.width:0)+s+l,y:t?e+u-(a?this.height:0)+s:i+u}},renderMinorTick:function(t){var e=this.chart.hasRendered&&b(this.oldMin),n=this.minorTicks;n[t]||(n[t]=new E(this,t,"minor")),e&&n[t].isNew&&n[t].render(null,!0),n[t].render(null,!1,1)},renderTick:function(t,e){var n=this.isLinked,i=this.ticks,r=this.chart.hasRendered&&b(this.oldMin);(!n||t>=this.min&&t<=this.max)&&(i[t]||(i[t]=new E(this,t)),r&&i[t].isNew&&i[t].render(e,!0,.1),i[t].render(e))},render:function(){var e,i,r=this,o=r.chart,a=r.options,s=r.isLog,l=r.lin2log,u=r.isLinked,c=r.tickPositions,d=r.axisTitle,f=r.ticks,p=r.minorTicks,g=r.alternateBands,m=a.stackLabels,v=a.alternateGridColor,y=r.tickmarkOffset,w=r.axisLine,x=r.showAxis,_=n(o.renderer.globalAnimation);r.labelEdge.length=0,r.overlap=!1,h([f,p,g],function(t){k(t,function(t){t.isActive=!1})}),(r.hasData()||u)&&(r.minorTickInterval&&!r.categories&&h(r.getMinorTickPositions(),function(t){r.renderMinorTick(t)}),c.length&&(h(c,function(t,e){r.renderTick(t,e)}),y&&(0===r.min||r.single)&&(f[-1]||(f[-1]=new E(r,(-1),null,(!0))),f[-1].render(-1))),v&&h(c,function(n,a){i=void 0!==c[a+1]?c[a+1]+y:r.max-y,0===a%2&&n<r.max&&i<=r.max+(o.polar?-y:y)&&(g[n]||(g[n]=new t.PlotLineOrBand(r)),e=n+y,g[n].options={from:s?l(e):e,to:s?l(i):i,color:v},g[n].render(),g[n].isActive=!0)}),r._addedPlotLB||(h((a.plotLines||[]).concat(a.plotBands||[]),function(t){r.addPlotBandOrLine(t)}),r._addedPlotLB=!0)),h([f,p,g],function(t){var e,n=[],i=_.duration;k(t,function(t,e){t.isActive||(t.render(e,!1,0),t.isActive=!1,n.push(e))}),T(function(){for(e=n.length;e--;)t[n[e]]&&!t[n[e]].isActive&&(t[n[e]].destroy(),delete t[n[e]])},t!==g&&o.hasRendered&&i?i:0)}),w&&(w[w.isPlaced?"animate":"attr"]({d:this.getLinePath(w.strokeWidth())}),w.isPlaced=!0,w[x?"show":"hide"](!0)),d&&x&&(a=r.getTitlePosition(),b(a.y)?(d[d.isNew?"attr":"animate"](a),d.isNew=!1):(d.attr("y",-9999),d.isNew=!0)),m&&m.enabled&&r.renderStackTotals(),r.isDirty=!1},redraw:function(){this.visible&&(this.render(),h(this.plotLinesAndBands,function(t){t.render()})),h(this.series,function(t){t.isDirty=!0})},keepProps:"extKey hcEvents names series userMax userMin".split(" "),destroy:function(t){var e,n=this,i=n.stacks,r=n.plotLinesAndBands;if(t||S(n),k(i,function(t,e){c(t),i[e]=null}),h([n.ticks,n.minorTicks,n.alternateBands],function(t){c(t)}),r)for(t=r.length;t--;)r[t].destroy();h("stackTotalGroup axisLine axisTitle axisGroup gridGroup labelGroup cross".split(" "),function(t){n[t]&&(n[t]=n[t].destroy())});for(e in n.plotLinesAndBandsGroups)n.plotLinesAndBandsGroups[e]=n.plotLinesAndBandsGroups[e].destroy();k(n,function(t,e){-1===v(e,n.keepProps)&&delete n[e]})},drawCrosshair:function(t,e){var n,i,r=this.crosshair,a=C(r.snap,!0),s=this.cross;t||(t=this.cross&&this.cross.e),this.crosshair&&!1!==(l(e)||!a)?(a?l(e)&&(i=this.isXAxis?e.plotX:this.len-e.plotY):i=t&&(this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos),l(i)&&(n=this.getPlotLinePath(e&&(this.isXAxis?e.x:C(e.stackY,e.y)),null,null,null,i)||null),l(n)?(e=this.categories&&!this.isRadial,s||(this.cross=s=this.chart.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(e?"category ":"thin ")+r.className).attr({zIndex:C(r.zIndex,2)}).add(),s.attr({stroke:r.color||(e?o("#ccd6eb").setOpacity(.25).get():"#cccccc"),"stroke-width":C(r.width,1)}),r.dashStyle&&s.attr({dashstyle:r.dashStyle})),s.show().attr({d:n}),e&&!r.width&&s.attr({"stroke-width":this.transA}),this.cross.e=t):this.hideCrosshair()):this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}}),t.Axis=O}(t);return function(t){var e=t.Axis,n=t.Date,i=t.dateFormat,r=t.defaultOptions,o=t.defined,a=t.each,s=t.extend,l=t.getMagnitude,u=t.getTZOffset,c=t.normalizeTickInterval,h=t.pick,d=t.timeUnits;e.prototype.getTimeTicks=function(t,e,l,c){var f,p,g,m=[],v={},y=r.global.useUTC,b=new n(e-Math.max(u(e),u(l))),w=n.hcMakeTime,x=t.unitRange,_=t.count;if(o(e)){b[n.hcSetMilliseconds](x>=d.second?0:_*Math.floor(b.getMilliseconds()/_)),x>=d.second&&b[n.hcSetSeconds](x>=d.minute?0:_*Math.floor(b.getSeconds()/_)),x>=d.minute&&b[n.hcSetMinutes](x>=d.hour?0:_*Math.floor(b[n.hcGetMinutes]()/_)),x>=d.hour&&b[n.hcSetHours](x>=d.day?0:_*Math.floor(b[n.hcGetHours]()/_)),x>=d.day&&b[n.hcSetDate](x>=d.month?1:_*Math.floor(b[n.hcGetDate]()/_)),x>=d.month&&(b[n.hcSetMonth](x>=d.year?0:_*Math.floor(b[n.hcGetMonth]()/_)),f=b[n.hcGetFullYear]()),x>=d.year&&b[n.hcSetFullYear](f-f%_),x===d.week&&b[n.hcSetDate](b[n.hcGetDate]()-b[n.hcGetDay]()+h(c,1)),f=b[n.hcGetFullYear](),c=b[n.hcGetMonth]();var k=b[n.hcGetDate](),C=b[n.hcGetHours]();for((n.hcTimezoneOffset||n.hcGetTimezoneOffset)&&(g=(!y||!!n.hcGetTimezoneOffset)&&(l-e>4*d.month||u(e)!==u(l)),b=b.getTime(),p=u(b),b=new n(b+p)),y=b.getTime(),e=1;y<l;)m.push(y),y=x===d.year?w(f+e*_,0):x===d.month?w(f,c+e*_):!g||x!==d.day&&x!==d.week?g&&x===d.hour?w(f,c,k,C+e*_,0,0,p)-p:y+x*_:w(f,c,k+e*_*(x===d.day?1:7)),e++;m.push(y),x<=d.hour&&1e4>m.length&&a(m,function(t){0===t%18e5&&"000000000"===i("%H%M%S%L",t)&&(v[t]="day")})}return m.info=s(t,{higherRanks:v,totalRange:x*_}),m},e.prototype.normalizeTimeTickInterval=function(t,e){var n=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];e=n[n.length-1];var i,r=d[e[0]],o=e[1];for(i=0;i<n.length&&(e=n[i],r=d[e[0]],o=e[1],!(n[i+1]&&t<=(r*o[o.length-1]+d[n[i+1][0]])/2));i++);return r===d.year&&t<5*r&&(o=[1,2,5]),t=c(t/r,o,"year"===e[0]?Math.max(l(t/r),1):1),{unitRange:r,count:t,unitName:e[0]}}}(t),function(t){var e=t.Axis,n=t.getMagnitude,i=t.map,r=t.normalizeTickInterval,o=t.pick;e.prototype.getLogTickPositions=function(t,e,a,s){var l=this.options,u=this.len,c=this.lin2log,h=this.log2lin,d=[];if(s||(this._minorAutoInterval=null),.5<=t)t=Math.round(t),d=this.getLinearTickPositions(t,e,a);else if(.08<=t)for(var f,p,g,m,v,u=Math.floor(e),l=.3<t?[1,2,4]:.15<t?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];u<a+1&&!v;u++)for(p=l.length,f=0;f<p&&!v;f++)g=h(c(u)*l[f]),g>e&&(!s||m<=a)&&void 0!==m&&d.push(m),m>a&&(v=!0),m=g;else e=c(e),a=c(a),t=l[s?"minorTickInterval":"tickInterval"],t=o("auto"===t?null:t,this._minorAutoInterval,l.tickPixelInterval/(s?5:1)*(a-e)/((s?u/this.tickPositions.length:u)||1)),t=r(t,null,n(t)),d=i(this.getLinearTickPositions(t,e,a),h),s||(this._minorAutoInterval=t/5);return s||(this.tickInterval=t),d},e.prototype.log2lin=function(t){return Math.log(t)/Math.LN10},e.prototype.lin2log=function(t){return Math.pow(10,t)}}(t),function(t,e){var n=t.arrayMax,i=t.arrayMin,r=t.defined,o=t.destroyObjectProperties,a=t.each,s=t.erase,l=t.merge,u=t.pick;t.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},t.PlotLineOrBand.prototype={render:function(){var e=this,n=e.axis,i=n.horiz,o=e.options,a=o.label,s=e.label,c=o.to,h=o.from,d=o.value,f=r(h)&&r(c),p=r(d),g=e.svgElem,m=!g,v=[],y=o.color,b=u(o.zIndex,0),w=o.events,v={"class":"highcharts-plot-"+(f?"band ":"line ")+(o.className||"")},x={},_=n.chart.renderer,k=f?"bands":"lines",C=n.log2lin;if(n.isLog&&(h=C(h),c=C(c),d=C(d)),p?(v={stroke:y,"stroke-width":o.width},o.dashStyle&&(v.dashstyle=o.dashStyle)):f&&(y&&(v.fill=y),o.borderWidth&&(v.stroke=o.borderColor,v["stroke-width"]=o.borderWidth)),x.zIndex=b,k+="-"+b,(y=n.plotLinesAndBandsGroups[k])||(n.plotLinesAndBandsGroups[k]=y=_.g("plot-"+k).attr(x).add()),m&&(e.svgElem=g=_.path().attr(v).add(y)),p)v=n.getPlotLinePath(d,g.strokeWidth());else{if(!f)return;v=n.getPlotBandPath(h,c,o)}return m&&v&&v.length?(g.attr({d:v}),w&&t.objectEach(w,function(t,n){g.on(n,function(t){w[n].apply(e,[t])})})):g&&(v?(g.show(),g.animate({d:v})):(g.hide(),s&&(e.label=s=s.destroy()))),a&&r(a.text)&&v&&v.length&&0<n.width&&0<n.height&&!v.flat?(a=l({align:i&&f&&"center",x:i?!f&&4:10,verticalAlign:!i&&f&&"middle",y:i?f?16:10:f?6:-4,rotation:i&&!f&&90},a),this.renderLabel(a,v,f,b)):s&&s.hide(),e},renderLabel:function(t,e,r,o){var a=this.label,s=this.axis.chart.renderer;a||(a={align:t.textAlign||t.align,rotation:t.rotation,"class":"highcharts-plot-"+(r?"band":"line")+"-label "+(t.className||"")},a.zIndex=o,this.label=a=s.text(t.text,0,0,t.useHTML).attr(a).add(),a.css(t.style)),o=[e[1],e[4],r?e[6]:e[1]],e=[e[2],e[5],r?e[7]:e[2]],r=i(o),s=i(e),a.align(t,!1,{x:r,y:s,width:n(o)-r,height:n(e)-s}),a.show()},destroy:function(){s(this.axis.plotLinesAndBands,this),delete this.axis,o(this)}},t.extend(e.prototype,{getPlotBandPath:function(t,e){var n=this.getPlotLinePath(e,null,null,!0),i=this.getPlotLinePath(t,null,null,!0),r=this.horiz,o=1;return t=t<this.min&&e<this.min||t>this.max&&e>this.max,i&&n?(t&&(i.flat=i.toString()===n.toString(),o=0),i.push(r&&n[4]===i[4]?n[4]+o:n[4],r||n[5]!==i[5]?n[5]:n[5]+o,r&&n[1]===i[1]?n[1]+o:n[1],r||n[2]!==i[2]?n[2]:n[2]+o)):i=null,i},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(e,n){var i=new t.PlotLineOrBand(this,e).render(),r=this.userOptions;return i&&(n&&(r[n]=r[n]||[],r[n].push(e)),this.plotLinesAndBands.push(i)),i},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,n=this.options,i=this.userOptions,r=e.length;r--;)e[r].id===t&&e[r].destroy();a([n.plotLines||[],i.plotLines||[],n.plotBands||[],i.plotBands||[]],function(e){for(r=e.length;r--;)e[r].id===t&&s(e,e[r])})},removePlotBand:function(t){this.removePlotBandOrLine(t)},removePlotLine:function(t){this.removePlotBandOrLine(t)}})}(t,e),function(t){var e=t.dateFormat,n=t.each,i=t.extend,r=t.format,o=t.isNumber,a=t.map,s=t.merge,l=t.pick,u=t.splat,c=t.syncTimeout,h=t.timeUnits;t.Tooltip=function(){this.init.apply(this,arguments)},t.Tooltip.prototype={init:function(t,e){this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=e.split&&!t.inverted,this.shared=e.shared||this.split},cleanSplit:function(t){n(this.chart.series,function(e){var n=e&&e.tt;n&&(!n.isActive||t?e.tt=n.destroy():n.isActive=!1)})},getLabel:function(){var t=this.chart.renderer,e=this.options;return this.label||(this.split?this.label=t.g("tooltip"):(this.label=t.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:e.padding,r:e.borderRadius}),this.label.attr({fill:e.backgroundColor,"stroke-width":e.borderWidth}).css(e.style).shadow(e.shadow)),this.label.attr({zIndex:8}).add()),this.label},update:function(t){this.destroy(),s(!0,this.chart.options.tooltip.userOptions,t),this.init(this.chart,s(!0,this.options,t))},destroy:function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,e,n,r){var o=this,a=o.now,s=!1!==o.options.animation&&!o.isHidden&&(1<Math.abs(t-a.x)||1<Math.abs(e-a.y)),l=o.followPointer||1<o.len;i(a,{x:s?(2*a.x+t)/3:t,y:s?(a.y+e)/2:e,anchorX:l?void 0:s?(2*a.anchorX+n)/3:n,anchorY:l?void 0:s?(a.anchorY+r)/2:r}),o.getLabel().attr(a),s&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(t,e,n,r)},32))},hide:function(t){var e=this;clearTimeout(this.hideTimer),t=l(t,this.options.hideDelay,500),this.isHidden||(this.hideTimer=c(function(){e.getLabel()[t?"fadeOut":"hide"](),e.isHidden=!0},t))},getAnchor:function(t,e){var i,r,o,s=this.chart,l=s.inverted,c=s.plotTop,h=s.plotLeft,d=0,f=0;return t=u(t),i=t[0].tooltipPos,this.followPointer&&e&&(void 0===e.chartX&&(e=s.pointer.normalize(e)),i=[e.chartX-s.plotLeft,e.chartY-c]),i||(n(t,function(t){r=t.series.yAxis,o=t.series.xAxis,d+=t.plotX+(!l&&o?o.left-h:0),f+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!l&&r?r.top-c:0)}),d/=t.length,f/=t.length,i=[l?s.plotWidth-f:d,this.shared&&!l&&1<t.length&&e?e.chartY-c:l?s.plotHeight-d:f]),a(i,Math.round)},getPosition:function(t,e,n){var i,r=this.chart,o=this.distance,a={},s=n.h||0,u=["y",r.chartHeight,e,n.plotY+r.plotTop,r.plotTop,r.plotTop+r.plotHeight],c=["x",r.chartWidth,t,n.plotX+r.plotLeft,r.plotLeft,r.plotLeft+r.plotWidth],h=!this.followPointer&&l(n.ttBelow,!r.inverted==!!n.negative),d=function(t,e,n,i,r,l){var u=n<i-o,c=i+o+n<e,d=i-o-n;if(i+=o,h&&c)a[t]=i;else if(!h&&u)a[t]=d;else if(u)a[t]=Math.min(l-n,0>d-s?d:d-s);else{if(!c)return!1;a[t]=Math.max(r,i+s+n>e?i:i+s)}},f=function(t,e,n,i){var r;return i<o||i>e-o?r=!1:a[t]=i<n/2?1:i>e-n/2?e-n-2:i-n/2,r},p=function(t){var e=u;u=c,c=e,i=t},g=function(){!1!==d.apply(0,u)?!1!==f.apply(0,c)||i||(p(!0),g()):i?a.x=a.y=0:(p(!0),g())};return(r.inverted||1<this.len)&&p(),g(),a},defaultFormatter:function(t){var e,n=this.points||u(this);return e=[t.tooltipFooterHeaderFormatter(n[0])],e=e.concat(t.bodyFormatter(n)),e.push(t.tooltipFooterHeaderFormatter(n[0],!0)),e},refresh:function(t,e){var i,r,o,a=this.options,s=t,c={},h=[];i=a.formatter||this.defaultFormatter;var d,c=this.shared;a.enabled&&(clearTimeout(this.hideTimer),this.followPointer=u(s)[0].series.tooltipOptions.followPointer,o=this.getAnchor(s,e),e=o[0],r=o[1],!c||s.series&&s.series.noSharedTooltip?c=s.getLabelConfig():(n(s,function(t){t.setState("hover"),h.push(t.getLabelConfig())}),c={x:s[0].category,y:s[0].y},c.points=h,s=s[0]),this.len=h.length,c=i.call(c,this),d=s.series,this.distance=l(d.tooltipOptions.distance,16),!1===c?this.hide():(i=this.getLabel(),this.isHidden&&i.attr({opacity:1}).show(),this.split?this.renderSplit(c,t):(a.style.width||i.css({width:this.chart.spacingBox.width}),i.attr({text:c&&c.join?c.join(""):c}),i.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+l(s.colorIndex,d.colorIndex)),i.attr({stroke:a.borderColor||s.color||d.color||"#666666"}),this.updatePosition({plotX:e,plotY:r,negative:s.negative,ttBelow:s.ttBelow,h:o[2]||0})),this.isHidden=!1))},renderSplit:function(e,i){var r=this,o=[],a=this.chart,s=a.renderer,u=!0,c=this.options,h=0,d=this.getLabel();n(e.slice(0,i.length+1),function(t,e){if(!1!==t){e=i[e-1]||{isHeader:!0,plotX:i[0].plotX};var n=e.series||r,f=n.tt,p=e.series||{},g="highcharts-color-"+l(e.colorIndex,p.colorIndex,"none");f||(n.tt=f=s.label(null,null,null,"callout").addClass("highcharts-tooltip-box "+g).attr({padding:c.padding,r:c.borderRadius,fill:c.backgroundColor,stroke:c.borderColor||e.color||p.color||"#333333","stroke-width":c.borderWidth}).add(d)),f.isActive=!0,f.attr({text:t}),f.css(c.style).shadow(c.shadow),t=f.getBBox(),p=t.width+f.strokeWidth(),e.isHeader?(h=t.height,p=Math.max(0,Math.min(e.plotX+a.plotLeft-p/2,a.chartWidth-p))):p=e.plotX+a.plotLeft-l(c.distance,16)-p,0>p&&(u=!1),t=(e.series&&e.series.yAxis&&e.series.yAxis.pos)+(e.plotY||0),t-=a.plotTop,o.push({target:e.isHeader?a.plotHeight+h:t,rank:e.isHeader?1:0,size:n.tt.getBBox().height+1,point:e,x:p,tt:f})}}),this.cleanSplit(),t.distribute(o,a.plotHeight+h),n(o,function(t){var e=t.point,n=e.series;t.tt.attr({visibility:void 0===t.pos?"hidden":"inherit",x:u||e.isHeader?t.x:e.plotX+a.plotLeft+l(c.distance,16),y:t.pos+a.plotTop,anchorX:e.isHeader?e.plotX+a.plotLeft:e.plotX+n.xAxis.pos,anchorY:e.isHeader?t.pos+a.plotTop-15:e.plotY+n.yAxis.pos})})},updatePosition:function(t){var e=this.chart,n=this.getLabel(),n=(this.options.positioner||this.getPosition).call(this,n.width,n.height,t);this.move(Math.round(n.x),Math.round(n.y||0),t.plotX+e.plotLeft,t.plotY+e.plotTop)},getDateFormat:function(t,n,i,r){var o,a,s=e("%m-%d %H:%M:%S.%L",n),l={millisecond:15,second:12,minute:9,hour:6,day:3},u="millisecond";for(a in h){if(t===h.week&&+e("%w",n)===i&&"00:00:00.000"===s.substr(6)){a="week";break}if(h[a]>t){a=u;break}if(l[a]&&s.substr(l[a])!=="01-01 00:00:00.000".substr(l[a]))break;"week"!==a&&(u=a)}return a&&(o=r[a]),o},getXDateFormat:function(t,e,n){e=e.dateTimeLabelFormats;var i=n&&n.closestPointRange;return(i?this.getDateFormat(i,t.x,n.options.startOfWeek,e):e.day)||e.year},tooltipFooterHeaderFormatter:function(t,e){var n=e?"footer":"header";e=t.series;var i=e.tooltipOptions,a=i.xDateFormat,s=e.xAxis,l=s&&"datetime"===s.options.type&&o(t.key),n=i[n+"Format"];return l&&!a&&(a=this.getXDateFormat(t,i,s)),l&&a&&(n=n.replace("{point.key}","{point.key:"+a+"}")),r(n,{point:t,series:e})},bodyFormatter:function(t){return a(t,function(t){var e=t.series.tooltipOptions;return(e.pointFormatter||t.point.tooltipFormatter).call(t.point,e.pointFormat)})}}}(t),function(t){var e=t.addEvent,n=t.attr,i=t.charts,r=t.color,o=t.css,a=t.defined,s=t.each,l=t.extend,u=t.find,c=t.fireEvent,h=t.isObject,d=t.offset,f=t.pick,p=t.removeEvent,g=t.splat,m=t.Tooltip,v=t.win;t.Pointer=function(t,e){this.init(t,e)},t.Pointer.prototype={init:function(t,e){this.options=e,this.chart=t,this.runChartClick=e.chart.events&&!!e.chart.events.click,this.pinchDown=[],this.lastValidTouch={},m&&(t.tooltip=new m(t,e.tooltip),this.followTouchMove=f(e.tooltip.followTouchMove,!0)),this.setDOMEvents()},zoomOption:function(t){var e=this.chart,n=e.options.chart,i=n.zoomType||"",e=e.inverted;/touch/.test(t.type)&&(i=f(n.pinchType,i)),this.zoomX=t=/x/.test(i),this.zoomY=i=/y/.test(i),this.zoomHor=t&&!e||i&&e,this.zoomVert=i&&!e||t&&e,this.hasZoom=t||i},normalize:function(t,e){var n,i;return t=t||v.event,t.target||(t.target=t.srcElement),i=t.touches?t.touches.length?t.touches.item(0):t.changedTouches[0]:t,e||(this.chartPosition=e=d(this.chart.container)),void 0===i.pageX?(n=Math.max(t.x,t.clientX-e.left),e=t.y):(n=i.pageX-e.left,e=i.pageY-e.top),l(t,{chartX:Math.round(n),chartY:Math.round(e)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return s(this.chart.axes,function(n){e[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(t[n.horiz?"chartX":"chartY"])})}),e},findNearestKDPoint:function(t,e,n){var i;return s(t,function(t){var r=!(t.noSharedTooltip&&e)&&0>t.options.findNearestPointBy.indexOf("y");if(t=t.searchPoint(n,r),(r=h(t,!0))&&!(r=!h(i,!0)))var r=i.distX-t.distX,o=i.dist-t.dist,a=(t.series.group&&t.series.group.zIndex)-(i.series.group&&i.series.group.zIndex),r=0<(0!==r&&e?r:0!==o?o:0!==a?a:i.series.index>t.series.index?-1:1);r&&(i=t)}),i},getPointFromEvent:function(t){t=t.target;for(var e;t&&!e;)e=t.point,t=t.parentNode;return e},getChartCoordinatesFromPoint:function(t,e){var n=t.series,i=n.xAxis,n=n.yAxis;if(i&&n)return e?{chartX:i.len+i.pos-t.clientX,chartY:n.len+n.pos-t.plotY}:{chartX:t.clientX+i.pos,chartY:t.plotY+n.pos}},getHoverData:function(e,n,i,r,o,a){var l,c=[];r=!(!r||!e);var d=n&&!n.stickyTracking?[n]:t.grep(i,function(t){return t.visible&&!(!o&&t.directTouch)&&f(t.options.enableMouseTracking,!0)&&t.stickyTracking});return n=(l=r?e:this.findNearestKDPoint(d,o,a))&&l.series,l&&(o&&!n.noSharedTooltip?(d=t.grep(i,function(t){return t.visible&&!(!o&&t.directTouch)&&f(t.options.enableMouseTracking,!0)&&!t.noSharedTooltip}),s(d,function(t){t=u(t.points,function(t){return t.x===l.x}),h(t)&&!t.isNull&&c.push(t)})):c.push(l)),{hoverPoint:l,hoverSeries:n,hoverPoints:c}},runPointActions:function(n,r){var o,a=this.chart,l=a.tooltip,u=!!l&&l.shared,c=r||a.hoverPoint,h=c&&c.series||a.hoverSeries,h=this.getHoverData(c,h,a.series,!!r||h&&h.directTouch&&this.isDirectTouch,u,n),c=h.hoverPoint;o=h.hoverPoints,r=(h=h.hoverSeries)&&h.tooltipOptions.followPointer,u=u&&h&&!h.noSharedTooltip,c&&(c!==a.hoverPoint||l&&l.isHidden)?(s(a.hoverPoints||[],function(e){-1===t.inArray(e,o)&&e.setState()}),s(o||[],function(t){t.setState("hover")}),a.hoverSeries!==h&&h.onMouseOver(),a.hoverPoint&&a.hoverPoint.firePointEvent("mouseOut"),c.firePointEvent("mouseOver"),a.hoverPoints=o,a.hoverPoint=c,l&&l.refresh(u?o:c,n)):r&&l&&!l.isHidden&&(c=l.getAnchor([{}],n),l.updatePosition({plotX:c[0],plotY:c[1]})),this.unDocMouseMove||(this.unDocMouseMove=e(a.container.ownerDocument,"mousemove",function(e){var n=i[t.hoverChartIndex];n&&n.pointer.onDocumentMouseMove(e)})),s(a.axes,function(e){var i=f(e.crosshair.snap,!0),r=i?t.find(o,function(t){return t.series[e.coll]===e}):void 0;r||!i?e.drawCrosshair(n,r):e.hideCrosshair()})},reset:function(t,e){var n=this.chart,i=n.hoverSeries,r=n.hoverPoint,o=n.hoverPoints,a=n.tooltip,l=a&&a.shared?o:r;t&&l&&s(g(l),function(e){e.series.isCartesian&&void 0===e.plotX&&(t=!1)}),t?a&&l&&(a.refresh(l),r&&(r.setState(r.state,!0),s(n.axes,function(t){t.crosshair&&t.drawCrosshair(null,r)}))):(r&&r.onMouseOut(),o&&s(o,function(t){t.setState()}),i&&i.onMouseOut(),a&&a.hide(e),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),s(n.axes,function(t){t.hideCrosshair()}),this.hoverX=n.hoverPoints=n.hoverPoint=null)},scaleGroups:function(t,e){var n,i=this.chart;s(i.series,function(r){n=t||r.getPlotBox(),r.xAxis&&r.xAxis.zoomEnabled&&r.group&&(r.group.attr(n),r.markerGroup&&(r.markerGroup.attr(n),r.markerGroup.clip(e?i.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(n))}),i.clipRect.attr(e||i.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,n=this.chart,i=n.options.chart,o=t.chartX,a=t.chartY,s=this.zoomHor,l=this.zoomVert,u=n.plotLeft,c=n.plotTop,h=n.plotWidth,d=n.plotHeight,f=this.selectionMarker,p=this.mouseDownX,g=this.mouseDownY,m=i.panKey&&t[i.panKey+"Key"];f&&f.touch||(o<u?o=u:o>u+h&&(o=u+h),a<c?a=c:a>c+d&&(a=c+d),this.hasDragged=Math.sqrt(Math.pow(p-o,2)+Math.pow(g-a,2)),10<this.hasDragged&&(e=n.isInsidePlot(p-u,g-c),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!m&&!f&&(this.selectionMarker=f=n.renderer.rect(u,c,s?1:h,l?1:d,0).attr({fill:i.selectionMarkerFill||r("#335cad").setOpacity(.25).get(),"class":"highcharts-selection-marker",zIndex:7}).add()),f&&s&&(o-=p,f.attr({width:Math.abs(o),x:(0<o?0:o)+p})),f&&l&&(o=a-g,f.attr({height:Math.abs(o),y:(0<o?0:o)+g})),e&&!f&&i.panning&&n.pan(t,i.panning)))},drop:function(t){var e=this,n=this.chart,i=this.hasPinched;if(this.selectionMarker){var r,u={originalEvent:t,xAxis:[],yAxis:[]},h=this.selectionMarker,d=h.attr?h.attr("x"):h.x,f=h.attr?h.attr("y"):h.y,p=h.attr?h.attr("width"):h.width,g=h.attr?h.attr("height"):h.height;(this.hasDragged||i)&&(s(n.axes,function(n){if(n.zoomEnabled&&a(n.min)&&(i||e[{xAxis:"zoomX",yAxis:"zoomY"}[n.coll]])){var o=n.horiz,s="touchend"===t.type?n.minPixelPadding:0,l=n.toValue((o?d:f)+s),o=n.toValue((o?d+p:f+g)-s);u[n.coll].push({axis:n,min:Math.min(l,o),max:Math.max(l,o)}),r=!0}}),r&&c(n,"selection",u,function(t){n.zoom(l(t,i?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),i&&this.scaleGroups()}n&&(o(n.container,{cursor:n._cursor}),n.cancelClick=10<this.hasDragged,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),this.zoomOption(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(e){i[t.hoverChartIndex]&&i[t.hoverChartIndex].pointer.drop(e)},onDocumentMouseMove:function(t){var e=this.chart,n=this.chartPosition;t=this.normalize(t,n),!n||this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.reset()},onContainerMouseLeave:function(e){var n=i[t.hoverChartIndex];n&&(e.relatedTarget||e.toElement)&&(n.pointer.reset(),n.pointer.chartPosition=null)},onContainerMouseMove:function(e){var n=this.chart;a(t.hoverChartIndex)&&i[t.hoverChartIndex]&&i[t.hoverChartIndex].mouseIsDown||(t.hoverChartIndex=n.index),e=this.normalize(e),e.returnValue=!1,"mousedown"===n.mouseIsDown&&this.drag(e),!this.inClass(e.target,"highcharts-tracker")&&!n.isInsidePlot(e.chartX-n.plotLeft,e.chartY-n.plotTop)||n.openMenu||this.runPointActions(e)},inClass:function(t,e){for(var i;t;){if(i=n(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf("highcharts-container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries;t=t.relatedTarget||t.toElement,this.isDirectTouch=!1,!e||!t||e.stickyTracking||this.inClass(t,"highcharts-tooltip")||this.inClass(t,"highcharts-series-"+e.index)&&this.inClass(t,"highcharts-tracker")||e.onMouseOut()},onContainerClick:function(t){var e=this.chart,n=e.hoverPoint,i=e.plotLeft,r=e.plotTop;t=this.normalize(t),e.cancelClick||(n&&this.inClass(t.target,"highcharts-tracker")?(c(n.series,"click",l(t,{point:n})),e.hoverPoint&&n.firePointEvent("click",t)):(l(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-i,t.chartY-r)&&c(e,"click",t)))},setDOMEvents:function(){var n=this,i=n.chart.container,r=i.ownerDocument;i.onmousedown=function(t){n.onContainerMouseDown(t)},i.onmousemove=function(t){n.onContainerMouseMove(t)},i.onclick=function(t){n.onContainerClick(t)},e(i,"mouseleave",n.onContainerMouseLeave),1===t.chartCount&&e(r,"mouseup",n.onDocumentMouseUp),t.hasTouch&&(i.ontouchstart=function(t){n.onContainerTouchStart(t)},i.ontouchmove=function(t){n.onContainerTouchMove(t)},1===t.chartCount&&e(r,"touchend",n.onDocumentTouchEnd))},destroy:function(){var e=this,n=this.chart.container.ownerDocument;e.unDocMouseMove&&e.unDocMouseMove(),p(e.chart.container,"mouseleave",e.onContainerMouseLeave),t.chartCount||(p(n,"mouseup",e.onDocumentMouseUp),t.hasTouch&&p(n,"touchend",e.onDocumentTouchEnd)),clearInterval(e.tooltipTimeout),t.objectEach(e,function(t,n){e[n]=null})}}}(t),function(t){var e=t.charts,n=t.each,i=t.extend,r=t.map,o=t.noop,a=t.pick;i(t.Pointer.prototype,{pinchTranslate:function(t,e,n,i,r,o){this.zoomHor&&this.pinchTranslateDirection(!0,t,e,n,i,r,o),this.zoomVert&&this.pinchTranslateDirection(!1,t,e,n,i,r,o)},pinchTranslateDirection:function(t,e,n,i,r,o,a,s){var l,u,c,h=this.chart,d=t?"x":"y",f=t?"X":"Y",p="chart"+f,g=t?"width":"height",m=h["plot"+(t?"Left":"Top")],v=s||1,y=h.inverted,b=h.bounds[t?"h":"v"],w=1===e.length,x=e[0][p],_=n[0][p],k=!w&&e[1][p],C=!w&&n[1][p];n=function(){!w&&20<Math.abs(x-k)&&(v=s||Math.abs(_-C)/Math.abs(x-k)),u=(m-_)/v+x,l=h["plot"+(t?"Width":"Height")]/v},n(),e=u,e<b.min?(e=b.min,c=!0):e+l>b.max&&(e=b.max-l,c=!0),c?(_-=.8*(_-a[d][0]),w||(C-=.8*(C-a[d][1])),n()):a[d]=[_,C],y||(o[d]=u-m,o[g]=l),o=y?1/v:v,r[g]=l,r[d]=e,i[y?t?"scaleY":"scaleX":"scale"+f]=v,i["translate"+f]=o*m+(_-o*x)},pinch:function(t){var e=this,s=e.chart,l=e.pinchDown,u=t.touches,c=u.length,h=e.lastValidTouch,d=e.hasZoom,f=e.selectionMarker,p={},g=1===c&&(e.inClass(t.target,"highcharts-tracker")&&s.runTrackerClick||e.runChartClick),m={};1<c&&(e.initiated=!0),d&&e.initiated&&!g&&t.preventDefault(),r(u,function(t){return e.normalize(t)}),"touchstart"===t.type?(n(u,function(t,e){
l[e]={chartX:t.chartX,chartY:t.chartY}}),h.x=[l[0].chartX,l[1]&&l[1].chartX],h.y=[l[0].chartY,l[1]&&l[1].chartY],n(s.axes,function(t){if(t.zoomEnabled){var e=s.bounds[t.horiz?"h":"v"],n=t.minPixelPadding,i=t.toPixels(a(t.options.min,t.dataMin)),r=t.toPixels(a(t.options.max,t.dataMax)),o=Math.max(i,r);e.min=Math.min(t.pos,Math.min(i,r)-n),e.max=Math.max(t.pos+t.len,o+n)}}),e.res=!0):e.followTouchMove&&1===c?this.runPointActions(e.normalize(t)):l.length&&(f||(e.selectionMarker=f=i({destroy:o,touch:!0},s.plotBox)),e.pinchTranslate(l,u,p,f,m,h),e.hasPinched=d,e.scaleGroups(p,m),e.res&&(e.res=!1,this.reset(!1,0)))},touch:function(e,n){var i,r,o=this.chart;o.index!==t.hoverChartIndex&&this.onContainerMouseLeave({relatedTarget:!0}),t.hoverChartIndex=o.index,1===e.touches.length?(e=this.normalize(e),(r=o.isInsidePlot(e.chartX-o.plotLeft,e.chartY-o.plotTop))&&!o.openMenu?(n&&this.runPointActions(e),"touchmove"===e.type&&(n=this.pinchDown,i=!!n[0]&&4<=Math.sqrt(Math.pow(n[0].chartX-e.chartX,2)+Math.pow(n[0].chartY-e.chartY,2))),a(i,!0)&&this.pinch(e)):n&&this.reset()):2===e.touches.length&&this.pinch(e)},onContainerTouchStart:function(t){this.zoomOption(t),this.touch(t,!0)},onContainerTouchMove:function(t){this.touch(t)},onDocumentTouchEnd:function(n){e[t.hoverChartIndex]&&e[t.hoverChartIndex].pointer.drop(n)}})}(t),function(t){var e=t.addEvent,n=t.charts,i=t.css,r=t.doc,o=t.extend,a=t.noop,s=t.Pointer,l=t.removeEvent,u=t.win,c=t.wrap;if(!t.hasTouch&&(u.PointerEvent||u.MSPointerEvent)){var h={},d=!!u.PointerEvent,f=function(){var e=[];return e.item=function(t){return this[t]},t.objectEach(h,function(t){e.push({pageX:t.pageX,pageY:t.pageY,target:t.target})}),e},p=function(e,i,r,o){"touch"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH||!n[t.hoverChartIndex]||(o(e),o=n[t.hoverChartIndex].pointer,o[i]({type:r,target:e.currentTarget,preventDefault:a,touches:f()}))};o(s.prototype,{onContainerPointerDown:function(t){p(t,"onContainerTouchStart","touchstart",function(t){h[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){p(t,"onContainerTouchMove","touchmove",function(t){h[t.pointerId]={pageX:t.pageX,pageY:t.pageY},h[t.pointerId].target||(h[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){p(t,"onDocumentTouchEnd","touchend",function(t){delete h[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,d?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,d?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(r,d?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),c(s.prototype,"init",function(t,e,n){t.call(this,e,n),this.hasZoom&&i(e.container,{"-ms-touch-action":"none","touch-action":"none"})}),c(s.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(e)}),c(s.prototype,"destroy",function(t){this.batchMSEvents(l),t.call(this)})}}(t),function(t){var e=t.addEvent,n=t.css,i=t.discardElement,r=t.defined,o=t.each,a=t.isFirefox,s=t.marginNames,l=t.merge,u=t.pick,c=t.setAnimation,h=t.stableSort,d=t.win,f=t.wrap;t.Legend=function(t,e){this.init(t,e)},t.Legend.prototype={init:function(t,n){this.chart=t,this.setOptions(n),n.enabled&&(this.render(),e(this.chart,"endResize",function(){this.legend.positionCheckboxes()}))},setOptions:function(t){var e=u(t.padding,8);this.options=t,this.itemStyle=t.itemStyle,this.itemHiddenStyle=l(this.itemStyle,t.itemHiddenStyle),this.itemMarginTop=t.itemMarginTop||0,this.padding=e,this.initialItemY=e-5,this.itemHeight=this.maxItemWidth=0,this.symbolWidth=u(t.symbolWidth,16),this.pages=[]},update:function(t,e){var n=this.chart;this.setOptions(l(!0,this.options,t)),this.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,u(e,!0)&&n.redraw()},colorizeItem:function(t,e){t.legendGroup[e?"removeClass":"addClass"]("highcharts-legend-item-hidden");var n=this.options,i=t.legendItem,r=t.legendLine,o=t.legendSymbol,a=this.itemHiddenStyle.color,n=e?n.itemStyle.color:a,s=e?t.color||a:a,l=t.options&&t.options.marker,u={fill:s};i&&i.css({fill:n,color:n}),r&&r.attr({stroke:s}),o&&(l&&o.isMarker&&(u=t.pointAttribs(),e||(u.stroke=u.fill=a)),o.attr(u))},positionItem:function(t){var e=this.options,n=e.symbolPadding,e=!e.rtl,i=t._legendItemPos,r=i[0],i=i[1],o=t.checkbox;(t=t.legendGroup)&&t.element&&t.translate(e?r:this.legendWidth-r-2*n-4,i),o&&(o.x=r,o.y=i)},destroyItem:function(t){var e=t.checkbox;o(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&i(t.checkbox)},destroy:function(){function t(t){this[t]&&(this[t]=this[t].destroy())}o(this.getAllItems(),function(e){o(["legendItem","legendGroup"],t,e)}),o("clipRect up down pager nav box title group".split(" "),t,this),this.display=null},positionCheckboxes:function(t){var e,i=this.group&&this.group.alignAttr,r=this.clipHeight||this.legendHeight,a=this.titleHeight;i&&(e=i.translateY,o(this.allItems,function(o){var s,l=o.checkbox;l&&(s=e+a+l.y+(t||0)+3,n(l,{left:i.translateX+o.checkboxOffset+l.x-20+"px",top:s+"px",display:s>e-6&&s<e+r-6?"":"none"}))}))},renderTitle:function(){var t=this.options,e=this.padding,n=t.title,i=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,e-3,e-4,null,null,null,t.useHTML,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),t=this.title.getBBox(),i=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:i})),this.titleHeight=i},setText:function(e){var n=this.options;e.legendItem.attr({text:n.labelFormat?t.format(n.labelFormat,e):n.labelFormatter.call(e)})},renderItem:function(t){var e=this.chart,n=e.renderer,i=this.options,r="horizontal"===i.layout,o=this.symbolWidth,a=i.symbolPadding,s=this.itemStyle,c=this.itemHiddenStyle,h=this.padding,d=r?u(i.itemDistance,20):0,f=!i.rtl,p=i.width,g=i.itemMarginBottom||0,m=this.itemMarginTop,v=t.legendItem,y=!t.series,b=!y&&t.series.drawLegendSymbol?t.series:t,w=b.options,x=this.createCheckboxForItem&&w&&w.showCheckbox,w=o+a+d+(x?20:0),_=i.useHTML,k=t.options.className;v||(t.legendGroup=n.g("legend-item").addClass("highcharts-"+b.type+"-series highcharts-color-"+t.colorIndex+(k?" "+k:"")+(y?" highcharts-series-"+t.index:"")).attr({zIndex:1}).add(this.scrollGroup),t.legendItem=v=n.text("",f?o+a:-a,this.baseline||0,_).css(l(t.visible?s:c)).attr({align:f?"left":"right",zIndex:2}).add(t.legendGroup),this.baseline||(o=s.fontSize,this.fontMetrics=n.fontMetrics(o,v),this.baseline=this.fontMetrics.f+3+m,v.attr("y",this.baseline)),this.symbolHeight=i.symbolHeight||this.fontMetrics.f,b.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,v,_),x&&this.createCheckboxForItem(t)),this.colorizeItem(t,t.visible),s.width||v.css({width:(i.itemWidth||i.width||e.spacingBox.width)-w}),this.setText(t),n=v.getBBox(),s=t.checkboxOffset=i.itemWidth||t.legendItemWidth||n.width+w,this.itemHeight=n=Math.round(t.legendItemHeight||n.height||this.symbolHeight),r&&this.itemX-h+s>(p||e.spacingBox.width-2*h-i.x)&&(this.itemX=h,this.itemY+=m+this.lastLineHeight+g,this.lastLineHeight=0),this.maxItemWidth=Math.max(this.maxItemWidth,s),this.lastItemY=m+this.itemY+g,this.lastLineHeight=Math.max(n,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],r?this.itemX+=s:(this.itemY+=m+n+g,this.lastLineHeight=n),this.offsetWidth=p||Math.max((r?this.itemX-h-(t.checkbox?0:d):s)+h,this.offsetWidth)},getAllItems:function(){var t=[];return o(this.chart.series,function(e){var n=e&&e.options;e&&u(n.showInLegend,!r(n.linkedTo)&&void 0,!0)&&(t=t.concat(e.legendItems||("point"===n.legendType?e.data:e)))}),t},adjustMargins:function(t,e){var n=this.chart,i=this.options,a=i.align.charAt(0)+i.verticalAlign.charAt(0)+i.layout.charAt(0);i.floating||o([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(o,l){o.test(a)&&!r(t[l])&&(n[s[l]]=Math.max(n[s[l]],n.legend[(l+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][l]*i[l%2?"x":"y"]+u(i.margin,12)+e[l]))})},render:function(){var t,e,n,i,r=this,a=r.chart,s=a.renderer,u=r.group,c=r.box,d=r.options,f=r.padding;r.itemX=f,r.itemY=r.initialItemY,r.offsetWidth=0,r.lastItemY=0,u||(r.group=u=s.g("legend").attr({zIndex:7}).add(),r.contentGroup=s.g().attr({zIndex:1}).add(u),r.scrollGroup=s.g().add(r.contentGroup)),r.renderTitle(),t=r.getAllItems(),h(t,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),d.reversed&&t.reverse(),r.allItems=t,r.display=e=!!t.length,r.lastLineHeight=0,o(t,function(t){r.renderItem(t)}),n=(d.width||r.offsetWidth)+f,i=r.lastItemY+r.lastLineHeight+r.titleHeight,i=r.handleOverflow(i),i+=f,c||(r.box=c=s.rect().addClass("highcharts-legend-box").attr({r:d.borderRadius}).add(u),c.isNew=!0),c.attr({stroke:d.borderColor,"stroke-width":d.borderWidth||0,fill:d.backgroundColor||"none"}).shadow(d.shadow),0<n&&0<i&&(c[c.isNew?"attr":"animate"](c.crisp({x:0,y:0,width:n,height:i},c.strokeWidth())),c.isNew=!1),c[e?"show":"hide"](),r.legendWidth=n,r.legendHeight=i,o(t,function(t){r.positionItem(t)}),e&&u.align(l(d,{width:n,height:i}),!0,"spacingBox"),a.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,n,i=this,r=this.chart,a=r.renderer,s=this.options,l=s.y,c=this.padding,r=r.spacingBox.height+("top"===s.verticalAlign?-l:l)-c,l=s.maxHeight,h=this.clipRect,d=s.navigation,f=u(d.animation,!0),p=d.arrowSize||12,g=this.nav,m=this.pages,v=this.allItems,y=function(t){"number"==typeof t?h.attr({height:t}):h&&(i.clipRect=h.destroy(),i.contentGroup.clip()),i.contentGroup.div&&(i.contentGroup.div.style.clip=t?"rect("+c+"px,9999px,"+(c+t)+"px,0)":"auto")};return"horizontal"!==s.layout||"middle"===s.verticalAlign||s.floating||(r/=2),l&&(r=Math.min(r,l)),m.length=0,t>r&&!1!==d.enabled?(this.clipHeight=e=Math.max(r-20-this.titleHeight-c,0),this.currentPage=u(this.currentPage,1),this.fullHeight=t,o(v,function(t,i){var r=t._legendItemPos[1];t=Math.round(t.legendItem.getBBox().height);var o=m.length;(!o||r-m[o-1]>e&&(n||r)!==m[o-1])&&(m.push(n||r),o++),i===v.length-1&&r+t-m[o-1]>e&&m.push(r),r!==n&&(n=r)}),h||(h=i.clipRect=a.clipRect(0,c,9999,0),i.contentGroup.clip(h)),y(e),g||(this.nav=g=a.g().attr({zIndex:1}).add(this.group),this.up=a.symbol("triangle",0,0,p,p).on("click",function(){i.scroll(-1,f)}).add(g),this.pager=a.text("",15,10).addClass("highcharts-legend-navigation").css(d.style).add(g),this.down=a.symbol("triangle-down",0,0,p,p).on("click",function(){i.scroll(1,f)}).add(g)),i.scroll(0),t=r):g&&(y(),this.nav=g.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var n=this.pages,i=n.length;t=this.currentPage+t;var r=this.clipHeight,o=this.options.navigation,a=this.pager,s=this.padding;t>i&&(t=i),0<t&&(void 0!==e&&c(e,this.chart),this.nav.attr({translateX:s,translateY:r+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({"class":1===t?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),a.attr({text:t+"/"+i}),this.down.attr({x:18+this.pager.getBBox().width,"class":t===i?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),this.up.attr({fill:1===t?o.inactiveColor:o.activeColor}).css({cursor:1===t?"default":"pointer"}),this.down.attr({fill:t===i?o.inactiveColor:o.activeColor}).css({cursor:t===i?"default":"pointer"}),e=-n[t-1]+this.initialItemY,this.scrollGroup.animate({translateY:e}),this.currentPage=t,this.positionCheckboxes(e))}},t.LegendSymbolMixin={drawRectangle:function(t,e){var n=t.symbolHeight,i=t.options.squareSymbol;e.legendSymbol=this.chart.renderer.rect(i?(t.symbolWidth-n)/2:0,t.baseline-n+1,i?n:t.symbolWidth,n,u(t.options.symbolRadius,n/2)).addClass("highcharts-point").attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e=this.options,n=e.marker,i=t.symbolWidth,r=t.symbolHeight,o=r/2,a=this.chart.renderer,s=this.legendGroup;t=t.baseline-Math.round(.3*t.fontMetrics.b);var c;c={"stroke-width":e.lineWidth||0},e.dashStyle&&(c.dashstyle=e.dashStyle),this.legendLine=a.path(["M",0,t,"L",i,t]).addClass("highcharts-graph").attr(c).add(s),n&&!1!==n.enabled&&(e=Math.min(u(n.radius,o),o),0===this.symbol.indexOf("url")&&(n=l(n,{width:r,height:r}),e=0),this.legendSymbol=n=a.symbol(this.symbol,i/2-e,t-e,2*e,2*e,n).addClass("highcharts-point").add(s),n.isMarker=!0)}},(/Trident\/7\.0/.test(d.navigator.userAgent)||a)&&f(t.Legend.prototype,"positionItem",function(t,e){var n=this,i=function(){e._legendItemPos&&t.call(n,e)};i(),setTimeout(i)})}(t),function(t){var e=t.addEvent,n=t.animate,i=t.animObject,r=t.attr,o=t.doc,a=t.Axis,s=t.createElement,l=t.defaultOptions,u=t.discardElement,c=t.charts,h=t.css,d=t.defined,f=t.each,p=t.extend,g=t.find,m=t.fireEvent,v=t.getStyle,y=t.grep,b=t.isNumber,w=t.isObject,x=t.isString,_=t.Legend,k=t.marginNames,C=t.merge,S=t.objectEach,M=t.Pointer,T=t.pick,E=t.pInt,O=t.removeEvent,A=t.seriesTypes,D=t.splat,R=t.svg,P=t.syncTimeout,N=t.win,z=t.Renderer,L=t.Chart=function(){this.getArgs.apply(this,arguments)};t.chart=function(t,e,n){return new L(t,e,n)},p(L.prototype,{callbacks:[],getArgs:function(){var t=[].slice.call(arguments);(x(t[0])||t[0].nodeName)&&(this.renderTo=t.shift()),this.init(t[0],t[1])},init:function(n,i){var r,o,a=n.series,s=n.plotOptions||{};n.series=null,r=C(l,n);for(o in r.plotOptions)r.plotOptions[o].tooltip=s[o]&&C(s[o].tooltip)||void 0;r.tooltip.userOptions=n.chart&&n.chart.forExport&&n.tooltip.userOptions||n.tooltip,r.series=n.series=a,this.userOptions=n,n=r.chart,o=n.events,this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=r,this.axes=[],this.series=[],this.hasCartesianSeries=n.showAxes;var u=this;u.index=c.length,c.push(u),t.chartCount++,o&&S(o,function(t,n){e(u,n,t)}),u.xAxis=[],u.yAxis=[],u.pointCount=u.colorCounter=u.symbolCounter=0,u.firstRender()},initSeries:function(e){var n=this.options.chart;return(n=A[e.type||n.type||n.defaultSeriesType])||t.error(17,!0),n=new n,n.init(this,e),n},orderSeries:function(t){var e=this.series;for(t=t||0;t<e.length;t++)e[t]&&(e[t].index=t,e[t].name=e[t].name||"Series "+(e[t].index+1))},isInsidePlot:function(t,e,n){var i=n?e:t;return t=n?t:e,0<=i&&i<=this.plotWidth&&0<=t&&t<=this.plotHeight},redraw:function(e){var n,i,r,o=this.axes,a=this.series,s=this.pointer,l=this.legend,u=this.isDirtyLegend,c=this.hasCartesianSeries,h=this.isDirtyBox,d=this.renderer,g=d.isHidden(),v=[];for(this.setResponsive&&this.setResponsive(!1),t.setAnimation(e,this),g&&this.temporaryDisplay(),this.layOutTitles(),e=a.length;e--;)if(r=a[e],r.options.stacking&&(n=!0,r.isDirty)){i=!0;break}if(i)for(e=a.length;e--;)r=a[e],r.options.stacking&&(r.isDirty=!0);f(a,function(t){t.isDirty&&"point"===t.options.legendType&&(t.updateTotals&&t.updateTotals(),u=!0),t.isDirtyData&&m(t,"updatedData")}),u&&l.options.enabled&&(l.render(),this.isDirtyLegend=!1),n&&this.getStacks(),c&&f(o,function(t){t.updateNames(),t.setScale()}),this.getMargins(),c&&(f(o,function(t){t.isDirty&&(h=!0)}),f(o,function(t){var e=t.min+","+t.max;t.extKey!==e&&(t.extKey=e,v.push(function(){m(t,"afterSetExtremes",p(t.eventArgs,t.getExtremes())),delete t.eventArgs})),(h||n)&&t.redraw()})),h&&this.drawChartBox(),m(this,"predraw"),f(a,function(t){(h||t.isDirty)&&t.visible&&t.redraw(),t.isDirtyData=!1}),s&&s.reset(!0),d.draw(),m(this,"redraw"),m(this,"render"),g&&this.temporaryDisplay(!0),f(v,function(t){t.call()})},get:function(t){function e(e){return e.id===t||e.options&&e.options.id===t}var n,i,r=this.series;for(n=g(this.axes,e)||g(this.series,e),i=0;!n&&i<r.length;i++)n=g(r[i].points||[],e);return n},getAxes:function(){var t=this,e=this.options,n=e.xAxis=D(e.xAxis||{}),e=e.yAxis=D(e.yAxis||{});f(n,function(t,e){t.index=e,t.isX=!0}),f(e,function(t,e){t.index=e}),n=n.concat(e),f(n,function(e){new a(t,e)})},getSelectedPoints:function(){var t=[];return f(this.series,function(e){t=t.concat(y(e.data||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return y(this.series,function(t){return t.selected})},setTitle:function(t,e,n){var i,r=this,o=r.options;i=o.title=C({style:{color:"#333333",fontSize:o.isStock?"16px":"18px"}},o.title,t),o=o.subtitle=C({style:{color:"#666666"}},o.subtitle,e),f([["title",t,i],["subtitle",e,o]],function(t,e){var n=t[0],i=r[n],o=t[1];t=t[2],i&&o&&(r[n]=i=i.destroy()),t&&t.text&&!i&&(r[n]=r.renderer.text(t.text,0,0,t.useHTML).attr({align:t.align,"class":"highcharts-"+n,zIndex:t.zIndex||4}).add(),r[n].update=function(t){r.setTitle(!e&&t,e&&t)},r[n].css(t.style))}),r.layOutTitles(n)},layOutTitles:function(t){var e,n=0,i=this.renderer,r=this.spacingBox;f(["title","subtitle"],function(t){var e=this[t],o=this.options[t];t="title"===t?-3:o.verticalAlign?0:n+2;var a;e&&(a=o.style.fontSize,a=i.fontMetrics(a,e).b,e.css({width:(o.width||r.width+o.widthAdjust)+"px"}).align(p({y:t+a},o),!1,"spacingBox"),o.floating||o.verticalAlign||(n=Math.ceil(n+e.getBBox(o.useHTML).height)))},this),e=this.titleOffset!==n,this.titleOffset=n,!this.isDirtyBox&&e&&(this.isDirtyBox=e,this.hasRendered&&T(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var e=this.options.chart,n=e.width,e=e.height,i=this.renderTo;d(n)||(this.containerWidth=v(i,"width")),d(e)||(this.containerHeight=v(i,"height")),this.chartWidth=Math.max(0,n||this.containerWidth||600),this.chartHeight=Math.max(0,t.relativeLength(e,this.chartWidth)||this.containerHeight||400)},temporaryDisplay:function(e){var n=this.renderTo;if(e)for(;n&&n.style;)n.hcOrigStyle&&(t.css(n,n.hcOrigStyle),delete n.hcOrigStyle),n.hcOrigDetached&&(o.body.removeChild(n),n.hcOrigDetached=!1),n=n.parentNode;else for(;n&&n.style&&(o.body.contains(n)||(n.hcOrigDetached=!0,o.body.appendChild(n)),("none"===v(n,"display",!1)||n.hcOricDetached)&&(n.hcOrigStyle={display:n.style.display,height:n.style.height,overflow:n.style.overflow},e={display:"block",overflow:"hidden"},n!==this.renderTo&&(e.height=0),t.css(n,e),n.offsetWidth||n.style.setProperty("display","block","important")),n=n.parentNode,n!==o.body););},setClassName:function(t){this.container.className="highcharts-container "+(t||"")},getContainer:function(){var e,n,i,a=this.options,l=a.chart;e=this.renderTo;var u,h=t.uniqueKey();e||(this.renderTo=e=l.renderTo),x(e)&&(this.renderTo=e=o.getElementById(e)),e||t.error(13,!0),n=E(r(e,"data-highcharts-chart")),b(n)&&c[n]&&c[n].hasRendered&&c[n].destroy(),r(e,"data-highcharts-chart",this.index),e.innerHTML="",l.skipClone||e.offsetWidth||this.temporaryDisplay(),this.getChartSize(),n=this.chartWidth,i=this.chartHeight,u=p({position:"relative",overflow:"hidden",width:n+"px",height:i+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},l.style),this.container=e=s("div",{id:h},u,e),this._cursor=e.style.cursor,this.renderer=new(t[l.renderer]||z)(e,n,i,null,l.forExport,a.exporting&&a.exporting.allowHTML),this.setClassName(l.className),this.renderer.setStyle(l.style),this.renderer.chartIndex=this.index},getMargins:function(t){var e=this.spacing,n=this.margin,i=this.titleOffset;this.resetMargins(),i&&!d(n[0])&&(this.plotTop=Math.max(this.plotTop,i+this.options.title.margin+e[0])),this.legend.display&&this.legend.adjustMargins(n,e),this.extraMargin&&(this[this.extraMargin.type]=(this[this.extraMargin.type]||0)+this.extraMargin.value),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),t||this.getAxisMargins()},getAxisMargins:function(){var t=this,e=t.axisOffset=[0,0,0,0],n=t.margin;t.hasCartesianSeries&&f(t.axes,function(t){t.visible&&t.getOffset()}),f(k,function(i,r){d(n[r])||(t[i]+=e[r])}),t.setChartSize()},reflow:function(t){var e=this,n=e.options.chart,i=e.renderTo,r=d(n.width)&&d(n.height),a=n.width||v(i,"width"),n=n.height||v(i,"height"),i=t?t.target:N;r||e.isPrinting||!a||!n||i!==N&&i!==o||(a===e.containerWidth&&n===e.containerHeight||(clearTimeout(e.reflowTimeout),e.reflowTimeout=P(function(){e.container&&e.setSize(void 0,void 0,!1)},t?100:0)),e.containerWidth=a,e.containerHeight=n)},initReflow:function(){var t,n=this;t=e(N,"resize",function(t){n.reflow(t)}),e(n,"destroy",t)},setSize:function(e,r,o){var a=this,s=a.renderer;a.isResizing+=1,t.setAnimation(o,a),a.oldChartHeight=a.chartHeight,a.oldChartWidth=a.chartWidth,void 0!==e&&(a.options.chart.width=e),void 0!==r&&(a.options.chart.height=r),a.getChartSize(),e=s.globalAnimation,(e?n:h)(a.container,{width:a.chartWidth+"px",height:a.chartHeight+"px"},e),a.setChartSize(!0),s.setSize(a.chartWidth,a.chartHeight,o),f(a.axes,function(t){t.isDirty=!0,t.setScale()}),a.isDirtyLegend=!0,a.isDirtyBox=!0,a.layOutTitles(),a.getMargins(),a.redraw(o),a.oldChartHeight=null,m(a,"resize"),P(function(){a&&m(a,"endResize",null,function(){--a.isResizing})},i(e).duration)},setChartSize:function(t){function e(t){return t=p[t]||0,Math.max(a||t,t)/2}var n,i,r,o,a,s=this.inverted,l=this.renderer,u=this.chartWidth,c=this.chartHeight,h=this.options.chart,d=this.spacing,p=this.clipOffset;this.plotLeft=n=Math.round(this.plotLeft),this.plotTop=i=Math.round(this.plotTop),this.plotWidth=r=Math.max(0,Math.round(u-n-this.marginRight)),this.plotHeight=o=Math.max(0,Math.round(c-i-this.marginBottom)),this.plotSizeX=s?o:r,this.plotSizeY=s?r:o,this.plotBorderWidth=h.plotBorderWidth||0,this.spacingBox=l.spacingBox={x:d[3],y:d[0],width:u-d[3]-d[1],height:c-d[0]-d[2]},this.plotBox=l.plotBox={x:n,y:i,width:r,height:o},a=2*Math.floor(this.plotBorderWidth/2),s=Math.ceil(e(3)),l=Math.ceil(e(0)),this.clipBox={x:s,y:l,width:Math.floor(this.plotSizeX-e(1)-s),height:Math.max(0,Math.floor(this.plotSizeY-e(2)-l))},t||f(this.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this,e=t.options.chart;f(["margin","spacing"],function(n){var i=e[n],r=w(i)?i:[i,i,i,i];f(["Top","Right","Bottom","Left"],function(i,o){t[n][o]=T(e[n+i],r[o])})}),f(k,function(e,n){t[e]=T(t.margin[n],t.spacing[n])}),t.axisOffset=[0,0,0,0],t.clipOffset=[]},drawChartBox:function(){var t,e,n=this.options.chart,i=this.renderer,r=this.chartWidth,o=this.chartHeight,a=this.chartBackground,s=this.plotBackground,l=this.plotBorder,u=this.plotBGImage,c=n.backgroundColor,h=n.plotBackgroundColor,d=n.plotBackgroundImage,f=this.plotLeft,p=this.plotTop,g=this.plotWidth,m=this.plotHeight,v=this.plotBox,y=this.clipRect,b=this.clipBox,w="animate";a||(this.chartBackground=a=i.rect().addClass("highcharts-background").add(),w="attr"),t=n.borderWidth||0,e=t+(n.shadow?8:0),c={fill:c||"none"},(t||a["stroke-width"])&&(c.stroke=n.borderColor,c["stroke-width"]=t),a.attr(c).shadow(n.shadow),a[w]({x:e/2,y:e/2,width:r-e-t%2,height:o-e-t%2,r:n.borderRadius}),w="animate",s||(w="attr",this.plotBackground=s=i.rect().addClass("highcharts-plot-background").add()),s[w](v),s.attr({fill:h||"none"}).shadow(n.plotShadow),d&&(u?u.animate(v):this.plotBGImage=i.image(d,f,p,g,m).add()),y?y.animate({width:b.width,height:b.height}):this.clipRect=i.clipRect(b),w="animate",l||(w="attr",this.plotBorder=l=i.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),l.attr({stroke:n.plotBorderColor,"stroke-width":n.plotBorderWidth||0,fill:"none"}),l[w](l.crisp({x:f,y:p,width:g,height:m},-l.strokeWidth())),this.isDirtyBox=!1},propFromSeries:function(){var t,e,n,i=this,r=i.options.chart,o=i.options.series;f(["inverted","angular","polar"],function(a){for(t=A[r.type||r.defaultSeriesType],n=r[a]||t&&t.prototype[a],e=o&&o.length;!n&&e--;)(t=A[o[e].type])&&t.prototype[a]&&(n=!0);i[a]=n})},linkSeries:function(){var t=this,e=t.series;f(e,function(t){t.linkedSeries.length=0}),f(e,function(e){var n=e.options.linkedTo;x(n)&&(n=":previous"===n?t.series[e.index-1]:t.get(n))&&n.linkedParent!==e&&(n.linkedSeries.push(e),e.linkedParent=n,e.visible=T(e.options.visible,n.options.visible,e.visible))})},renderSeries:function(){f(this.series,function(t){t.translate(),t.render()})},renderLabels:function(){var t=this,e=t.options.labels;e.items&&f(e.items,function(n){var i=p(e.style,n.style),r=E(i.left)+t.plotLeft,o=E(i.top)+t.plotTop+12;delete i.left,delete i.top,t.renderer.text(n.html,r,o).attr({zIndex:2}).css(i).add()})},render:function(){var t,e,n,i=this.axes,r=this.renderer,o=this.options;this.setTitle(),this.legend=new _(this,o.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),o=this.plotWidth,t=this.plotHeight-=21,f(i,function(t){t.setScale()}),this.getAxisMargins(),e=1.1<o/this.plotWidth,n=1.05<t/this.plotHeight,(e||n)&&(f(i,function(t){(t.horiz&&e||!t.horiz&&n)&&t.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries&&f(i,function(t){t.visible&&t.render()}),this.seriesGroup||(this.seriesGroup=r.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0},addCredits:function(t){var e=this;t=C(!0,this.options.credits,t),t.enabled&&!this.credits&&(this.credits=this.renderer.text(t.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){t.href&&(N.location.href=t.href)}).attr({align:t.position.align,zIndex:8}).css(t.style).add().align(t.position),this.credits.update=function(t){e.credits=e.credits.destroy(),e.addCredits(t)})},destroy:function(){var e,n=this,i=n.axes,r=n.series,o=n.container,a=o&&o.parentNode;for(m(n,"destroy"),n.renderer.forExport?t.erase(c,n):c[n.index]=void 0,t.chartCount--,n.renderTo.removeAttribute("data-highcharts-chart"),O(n),e=i.length;e--;)i[e]=i[e].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),e=r.length;e--;)r[e]=r[e].destroy();f("title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" "),function(t){var e=n[t];e&&e.destroy&&(n[t]=e.destroy())}),o&&(o.innerHTML="",O(o),a&&u(o)),S(n,function(t,e){delete n[e]})},isReadyToRender:function(){var t=this;return!(!R&&N==N.top&&"complete"!==o.readyState)||(o.attachEvent("onreadystatechange",function(){o.detachEvent("onreadystatechange",t.firstRender),"complete"===o.readyState&&t.firstRender()}),!1)},firstRender:function(){var t=this,e=t.options;t.isReadyToRender()&&(t.getContainer(),m(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),f(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),m(t,"beforeRender"),M&&(t.pointer=new M(t,e)),t.render(),!t.renderer.imgCount&&t.onload&&t.onload(),t.temporaryDisplay(!0))},onload:function(){f([this.callback].concat(this.callbacks),function(t){t&&void 0!==this.index&&t.apply(this,[this])},this),m(this,"load"),m(this,"render"),d(this.index)&&!1!==this.options.chart.reflow&&this.initReflow(),this.onload=null}})}(t),function(t){var e,n=t.each,i=t.extend,r=t.erase,o=t.fireEvent,a=t.format,s=t.isArray,l=t.isNumber,u=t.pick,c=t.removeEvent;t.Point=e=function(){},t.Point.prototype={init:function(t,e,n){return this.series=t,this.color=t.color,this.applyOptions(e,n),t.options.colorByPoint?(e=t.options.colors||t.chart.options.colors,this.color=this.color||e[t.colorCounter],e=e.length,n=t.colorCounter,t.colorCounter++,t.colorCounter===e&&(t.colorCounter=0)):n=t.colorIndex,this.colorIndex=u(this.colorIndex,n),t.chart.pointCount++,this},applyOptions:function(t,n){var r=this.series,o=r.options.pointValKey||r.pointValKey;return t=e.prototype.optionsToObject.call(this,t),i(this,t),this.options=this.options?i(this.options,t):t,t.group&&delete this.group,o&&(this.y=this[o]),this.isNull=u(this.isValid&&!this.isValid(),null===this.x||!l(this.y,!0)),this.selected&&(this.state="select"),"name"in this&&void 0===n&&r.xAxis&&r.xAxis.hasNames&&(this.x=r.xAxis.nameToX(this)),void 0===this.x&&r&&(this.x=void 0===n?r.autoIncrement(this):n),this},optionsToObject:function(t){var e={},n=this.series,i=n.options.keys,r=i||n.pointArrayMap||["y"],o=r.length,a=0,u=0;if(l(t)||null===t)e[r[0]]=t;else if(s(t))for(!i&&t.length>o&&(n=typeof t[0],"string"===n?e.name=t[0]:"number"===n&&(e.x=t[0]),a++);u<o;)i&&void 0===t[a]||(e[r[u]]=t[a]),a++,u++;else"object"==typeof t&&(e=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return e},getClassName:function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},getZone:function(){var t,e=this.series,n=e.zones,e=e.zoneAxis||"y",i=0;for(t=n[i];this[e]>=t.value;)t=n[++i];return t&&t.color&&!this.options.color&&(this.color=t.color),t},destroy:function(){var t,e=this.series.chart,n=e.hoverPoints;e.pointCount--,n&&(this.setState(),r(n,this),n.length||(e.hoverPoints=null)),this===e.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(c(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this);for(t in this)this[t]=null},destroyElements:function(){for(var t,e=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],n=6;n--;)t=e[n],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,r=u(i.valueDecimals,""),o=i.valuePrefix||"",s=i.valueSuffix||"";return n(e.pointArrayMap||["y"],function(e){e="{point."+e,(o||s)&&(t=t.replace(e+"}",o+e+"}"+s)),t=t.replace(e+"}",e+":,."+r+"f}")}),a(t,{point:this,series:this.series})},firePointEvent:function(t,e,n){var i=this,r=this.series.options;(r.point.events[t]||i.options&&i.options.events&&i.options.events[t])&&this.importEvents(),"click"===t&&r.allowPointSelect&&(n=function(t){i.select&&i.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),o(this,t,e,n)},visible:!0}}(t),function(t){var e=t.addEvent,n=t.animObject,i=t.arrayMax,r=t.arrayMin,o=t.correctFloat,a=t.Date,s=t.defaultOptions,l=t.defaultPlotOptions,u=t.defined,c=t.each,h=t.erase,d=t.extend,f=t.fireEvent,p=t.grep,g=t.isArray,m=t.isNumber,v=t.isString,y=t.merge,b=t.objectEach,w=t.pick,x=t.removeEvent,_=t.splat,k=t.SVGElement,C=t.syncTimeout,S=t.win;t.Series=t.seriesType("line",null,{lineWidth:2,allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{lineWidth:0,lineColor:"#ffffff",radius:4,states:{hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":t.numberFormat(this.y,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},{isCartesian:!0,pointClass:t.Point,sorted:!0,requireSorting:!0,directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],coll:"series",init:function(t,n){var i,r,o=this,a=t.series;o.chart=t,o.options=n=o.setOptions(n),o.linkedSeries=[],o.bindAxes(),d(o,{name:n.name,state:"",visible:!1!==n.visible,selected:!0===n.selected}),i=n.events,b(i,function(t,n){e(o,n,t)}),(i&&i.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect)&&(t.runTrackerClick=!0),o.getColor(),o.getSymbol(),c(o.parallelArrays,function(t){o[t+"Data"]=[]}),o.setData(n.data,!1),o.isCartesian&&(t.hasCartesianSeries=!0),a.length&&(r=a[a.length-1]),o._i=w(r&&r._i,-1)+1,t.orderSeries(this.insert(a))},insert:function(t){var e,n=this.options.index;if(m(n)){for(e=t.length;e--;)if(n>=w(t[e].options.index,t[e]._i)){t.splice(e+1,0,this);break}-1===e&&t.unshift(this),e+=1}else t.push(this);return w(e,t.length-1)},bindAxes:function(){var e,n=this,i=n.options,r=n.chart;c(n.axisTypes||[],function(o){c(r[o],function(t){e=t.options,(i[o]===e.index||void 0!==i[o]&&i[o]===e.id||void 0===i[o]&&0===e.index)&&(n.insert(t.series),
n[o]=t,t.isDirty=!0)}),n[o]||n.optionalAxis===o||t.error(18,!0)})},updateParallelArrays:function(t,e){var n=t.series,i=arguments,r=m(e)?function(i){var r="y"===i&&n.toYData?n.toYData(t):t[i];n[i+"Data"][e]=r}:function(t){Array.prototype[e].apply(n[t+"Data"],Array.prototype.slice.call(i,2))};c(n.parallelArrays,r)},autoIncrement:function(){var t,e=this.options,n=this.xIncrement,i=e.pointIntervalUnit,n=w(n,e.pointStart,0);return this.pointInterval=t=w(this.pointInterval,e.pointInterval,1),i&&(e=new a(n),"day"===i?e=+e[a.hcSetDate](e[a.hcGetDate]()+t):"month"===i?e=+e[a.hcSetMonth](e[a.hcGetMonth]()+t):"year"===i&&(e=+e[a.hcSetFullYear](e[a.hcGetFullYear]()+t)),t=e-n),this.xIncrement=n+t,n},setOptions:function(t){var e=this.chart,n=e.options,i=n.plotOptions,r=(e.userOptions||{}).plotOptions||{},o=i[this.type];return this.userOptions=t,e=y(o,i.series,t),this.tooltipOptions=y(s.tooltip,s.plotOptions.series&&s.plotOptions.series.tooltip,s.plotOptions[this.type].tooltip,n.tooltip.userOptions,i.series&&i.series.tooltip,i[this.type].tooltip,t.tooltip),this.stickyTracking=w(t.stickyTracking,r[this.type]&&r[this.type].stickyTracking,r.series&&r.series.stickyTracking,!(!this.tooltipOptions.shared||this.noSharedTooltip)||e.stickyTracking),null===o.marker&&delete e.marker,this.zoneAxis=e.zoneAxis,t=this.zones=(e.zones||[]).slice(),!e.negativeColor&&!e.negativeFillColor||e.zones||t.push({value:e[this.zoneAxis+"Threshold"]||e.threshold||0,className:"highcharts-negative",color:e.negativeColor,fillColor:e.negativeFillColor}),t.length&&u(t[t.length-1].value)&&t.push({color:this.color,fillColor:this.fillColor}),e},getCyclic:function(t,e,n){var i,r=this.chart,o=this.userOptions,a=t+"Index",s=t+"Counter",l=n?n.length:w(r.options.chart[t+"Count"],r[t+"Count"]);e||(i=w(o[a],o["_"+a]),u(i)||(r.series.length||(r[s]=0),o["_"+a]=i=r[s]%l,r[s]+=1),n&&(e=n[i])),void 0!==i&&(this[a]=i),this[t]=e},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||l[this.type].color,this.chart.options.colors)},getSymbol:function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},drawLegendSymbol:t.LegendSymbolMixin.drawLineMarker,setData:function(e,n,i,r){var o,a=this,s=a.points,l=s&&s.length||0,u=a.options,h=a.chart,d=null,f=a.xAxis,p=u.turboThreshold,y=this.xData,b=this.yData,x=(o=a.pointArrayMap)&&o.length;if(e=e||[],o=e.length,n=w(n,!0),!1!==r&&o&&l===o&&!a.cropped&&!a.hasGroupedData&&a.visible)c(e,function(t,e){s[e].update&&t!==u.data[e]&&s[e].update(t,!1,null,!1)});else{if(a.xIncrement=null,a.colorCounter=0,c(this.parallelArrays,function(t){a[t+"Data"].length=0}),p&&o>p){for(i=0;null===d&&i<o;)d=e[i],i++;if(m(d))for(i=0;i<o;i++)y[i]=this.autoIncrement(),b[i]=e[i];else if(g(d))if(x)for(i=0;i<o;i++)d=e[i],y[i]=d[0],b[i]=d.slice(1,x+1);else for(i=0;i<o;i++)d=e[i],y[i]=d[0],b[i]=d[1];else t.error(12)}else for(i=0;i<o;i++)void 0!==e[i]&&(d={series:a},a.pointClass.prototype.applyOptions.apply(d,[e[i]]),a.updateParallelArrays(d,i));for(v(b[0])&&t.error(14,!0),a.data=[],a.options.data=a.userOptions.data=e,i=l;i--;)s[i]&&s[i].destroy&&s[i].destroy();f&&(f.minRange=f.userMinRange),a.isDirty=h.isDirtyBox=!0,a.isDirtyData=!!s,i=!1}"point"===u.legendType&&(this.processData(),this.generatePoints()),n&&h.redraw(i)},processData:function(e){var n,i=this.xData,r=this.yData,o=i.length;n=0;var a,s,l,u=this.xAxis,c=this.options;l=c.cropThreshold;var h,d,f=this.getExtremesFromAll||c.getExtremesFromAll,p=this.isCartesian,c=u&&u.val2lin,g=u&&u.isLog;if(p&&!this.isDirty&&!u.isDirty&&!this.yAxis.isDirty&&!e)return!1;for(u&&(e=u.getExtremes(),h=e.min,d=e.max),p&&this.sorted&&!f&&(!l||o>l||this.forceCrop)&&(i[o-1]<h||i[0]>d?(i=[],r=[]):(i[0]<h||i[o-1]>d)&&(n=this.cropData(this.xData,this.yData,h,d),i=n.xData,r=n.yData,n=n.start,a=!0)),l=i.length||1;--l;)o=g?c(i[l])-c(i[l-1]):i[l]-i[l-1],0<o&&(void 0===s||o<s)?s=o:0>o&&this.requireSorting&&t.error(15);this.cropped=a,this.cropStart=n,this.processedXData=i,this.processedYData=r,this.closestPointRange=s},cropData:function(t,e,n,i){var r,o=t.length,a=0,s=o,l=w(this.cropShoulder,1);for(r=0;r<o;r++)if(t[r]>=n){a=Math.max(0,r-l);break}for(n=r;n<o;n++)if(t[n]>i){s=n+l;break}return{xData:t.slice(a,s),yData:e.slice(a,s),start:a,end:s}},generatePoints:function(){var t,e,n,i,r=this.options,o=r.data,a=this.data,s=this.processedXData,l=this.processedYData,u=this.pointClass,c=s.length,h=this.cropStart||0,d=this.hasGroupedData,r=r.keys,f=[];for(a||d||(a=[],a.length=o.length,a=this.data=a),r&&d&&(this.options.keys=!1),i=0;i<c;i++)e=h+i,d?(n=(new u).init(this,[s[i]].concat(_(l[i]))),n.dataGroup=this.groupMap[i]):(n=a[e])||void 0===o[e]||(a[e]=n=(new u).init(this,o[e],s[i])),n&&(n.index=e,f[i]=n);if(this.options.keys=r,a&&(c!==(t=a.length)||d))for(i=0;i<t;i++)i!==h||d||(i+=c),a[i]&&(a[i].destroyElements(),a[i].plotX=void 0);this.data=a,this.points=f},getExtremes:function(t){var e,n=this.yAxis,o=this.processedXData,a=[],s=0;e=this.xAxis.getExtremes();var l,u,c,h,d=e.min,f=e.max;for(t=t||this.stackedYData||this.processedYData||[],e=t.length,h=0;h<e;h++)if(u=o[h],c=t[h],l=(m(c,!0)||g(c))&&(!n.positiveValuesOnly||c.length||0<c),u=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(o[h]||u)>=d&&(o[h]||u)<=f,l&&u)if(l=c.length)for(;l--;)null!==c[l]&&(a[s++]=c[l]);else a[s++]=c;this.dataMin=r(a),this.dataMax=i(a)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,e,n,i,r=this.options,a=r.stacking,s=this.xAxis,l=s.categories,c=this.yAxis,h=this.points,d=h.length,f=!!this.modifyValue,p=r.pointPlacement,g="between"===p||m(p),v=r.threshold,y=r.startFromThreshold?v:0,b=Number.MAX_VALUE;for("between"===p&&(p=.5),m(p)&&(p*=w(r.pointRange||s.pointRange)),r=0;r<d;r++){var x=h[r],_=x.x,k=x.y;e=x.low;var C,S=a&&c.stacks[(this.negStacks&&k<(y?0:v)?"-":"")+this.stackKey];c.positiveValuesOnly&&null!==k&&0>=k&&(x.isNull=!0),x.plotX=t=o(Math.min(Math.max(-1e5,s.translate(_,0,0,0,1,p,"flags"===this.type)),1e5)),a&&this.visible&&!x.isNull&&S&&S[_]&&(i=this.getStackIndicator(i,_,this.index),C=S[_],k=C.points[i.key],e=k[0],k=k[1],e===y&&i.key===S[_].base&&(e=w(v,c.min)),c.positiveValuesOnly&&0>=e&&(e=null),x.total=x.stackTotal=C.total,x.percentage=C.total&&x.y/C.total*100,x.stackY=k,C.setOffset(this.pointXOffset||0,this.barW||0)),x.yBottom=u(e)?c.translate(e,0,1,0,1):null,f&&(k=this.modifyValue(k,x)),x.plotY=e="number"==typeof k&&1/0!==k?Math.min(Math.max(-1e5,c.translate(k,0,1,0,1)),1e5):void 0,x.isInside=void 0!==e&&0<=e&&e<=c.len&&0<=t&&t<=s.len,x.clientX=g?o(s.translate(_,0,0,0,1,p)):t,x.negative=x.y<(v||0),x.category=l&&void 0!==l[x.x]?l[x.x]:x.x,x.isNull||(void 0!==n&&(b=Math.min(b,Math.abs(t-n))),n=t),x.zone=this.zones.length&&x.getZone()}this.closestPointRangePx=b},getValidPoints:function(t,e){var n=this.chart;return p(t||this.points||[],function(t){return!(e&&!n.isInsidePlot(t.plotX,t.plotY,n.inverted))&&!t.isNull})},setClip:function(t){var e=this.chart,n=this.options,i=e.renderer,r=e.inverted,o=this.clipBox,a=o||e.clipBox,s=this.sharedClipKey||["_sharedClip",t&&t.duration,t&&t.easing,a.height,n.xAxis,n.yAxis].join(),l=e[s],u=e[s+"m"];l||(t&&(a.width=0,e[s+"m"]=u=i.clipRect(-99,r?-e.plotLeft:-e.plotTop,99,r?e.chartWidth:e.chartHeight)),e[s]=l=i.clipRect(a),l.count={length:0}),t&&!l.count[this.index]&&(l.count[this.index]=!0,l.count.length+=1),!1!==n.clip&&(this.group.clip(t||o?l:e.clipRect),this.markerGroup.clip(u),this.sharedClipKey=s),t||(l.count[this.index]&&(delete l.count[this.index],--l.count.length),0===l.count.length&&s&&e[s]&&(o||(e[s]=e[s].destroy()),e[s+"m"]&&(e[s+"m"]=e[s+"m"].destroy())))},animate:function(t){var e,i=this.chart,r=n(this.options.animation);t?this.setClip(r):(e=this.sharedClipKey,(t=i[e])&&t.animate({width:i.plotSizeX},r),i[e+"m"]&&i[e+"m"].animate({width:i.plotSizeX+99},r),this.animate=null)},afterAnimate:function(){this.setClip(),f(this,"afterAnimate"),this.finishedAnimating=!0},drawPoints:function(){var t,e,n,i,r,o,a,s,l=this.points,u=this.chart,c=this.options.marker,h=this[this.specialGroup]||this.markerGroup,d=w(c.enabled,!!this.xAxis.isRadial||null,this.closestPointRangePx>=2*c.radius);if(!1!==c.enabled||this._hasPointMarkers)for(e=0;e<l.length;e++)n=l[e],t=n.plotY,i=n.graphic,r=n.marker||{},o=!!n.marker,a=d&&void 0===r.enabled||r.enabled,s=n.isInside,a&&m(t)&&null!==n.y?(t=w(r.symbol,this.symbol),n.hasImage=0===t.indexOf("url"),a=this.markerAttribs(n,n.selected&&"select"),i?i[s?"show":"hide"](!0).animate(a):s&&(0<a.width||n.hasImage)&&(n.graphic=i=u.renderer.symbol(t,a.x,a.y,a.width,a.height,o?r:c).add(h)),i&&i.attr(this.pointAttribs(n,n.selected&&"select")),i&&i.addClass(n.getClassName(),!0)):i&&(n.graphic=i.destroy())},markerAttribs:function(t,e){var n=this.options.marker,i=t.marker||{},r=w(i.radius,n.radius);return e&&(n=n.states[e],e=i.states&&i.states[e],r=w(e&&e.radius,n&&n.radius,r+(n&&n.radiusPlus||0))),t.hasImage&&(r=0),t={x:Math.floor(t.plotX)-r,y:t.plotY-r},r&&(t.width=t.height=2*r),t},pointAttribs:function(t,e){var n=this.options.marker,i=t&&t.options,r=i&&i.marker||{},o=this.color,a=i&&i.color,s=t&&t.color,i=w(r.lineWidth,n.lineWidth);return t=t&&t.zone&&t.zone.color,o=a||t||s||o,t=r.fillColor||n.fillColor||o,o=r.lineColor||n.lineColor||o,e&&(n=n.states[e],e=r.states&&r.states[e]||{},i=w(e.lineWidth,n.lineWidth,i+w(e.lineWidthPlus,n.lineWidthPlus,0)),t=e.fillColor||n.fillColor||t,o=e.lineColor||n.lineColor||o),{stroke:o,"stroke-width":i,fill:t}},destroy:function(){var t,e,n,i,r=this,o=r.chart,a=/AppleWebKit\/533/.test(S.navigator.userAgent),s=r.data||[];for(f(r,"destroy"),x(r),c(r.axisTypes||[],function(t){(i=r[t])&&i.series&&(h(i.series,r),i.isDirty=i.forceRedraw=!0)}),r.legendItem&&r.chart.legend.destroyItem(r),e=s.length;e--;)(n=s[e])&&n.destroy&&n.destroy();r.points=null,clearTimeout(r.animationTimeout),b(r,function(e,n){e instanceof k&&!e.survive&&(t=a&&"group"===n?"hide":"destroy",e[t]())}),o.hoverSeries===r&&(o.hoverSeries=null),h(o.series,r),o.orderSeries(),b(r,function(t,e){delete r[e]})},getGraphPath:function(t,e,n){var i,r,o=this,a=o.options,s=a.step,l=[],h=[];return t=t||o.points,(i=t.reversed)&&t.reverse(),(s={right:1,center:2}[s]||s&&3)&&i&&(s=4-s),!a.connectNulls||e||n||(t=this.getValidPoints(t)),c(t,function(i,c){var d=i.plotX,f=i.plotY,p=t[c-1];(i.leftCliff||p&&p.rightCliff)&&!n&&(r=!0),i.isNull&&!u(e)&&0<c?r=!a.connectNulls:i.isNull&&!e?r=!0:(0===c||r?c=["M",i.plotX,i.plotY]:o.getPointSpline?c=o.getPointSpline(t,i,c):s?(c=1===s?["L",p.plotX,f]:2===s?["L",(p.plotX+d)/2,p.plotY,"L",(p.plotX+d)/2,f]:["L",d,p.plotY],c.push("L",d,f)):c=["L",d,f],h.push(i.x),s&&h.push(i.x),l.push.apply(l,c),r=!1)}),l.xMap=h,o.graphPath=l},drawGraph:function(){var t=this,e=this.options,n=(this.gappedPath||this.getGraphPath).call(this),i=[["graph","highcharts-graph",e.lineColor||this.color,e.dashStyle]];c(this.zones,function(n,r){i.push(["zone-graph-"+r,"highcharts-graph highcharts-zone-graph-"+r+" "+(n.className||""),n.color||t.color,n.dashStyle||e.dashStyle])}),c(i,function(i,r){var o=i[0],a=t[o];a?(a.endX=n.xMap,a.animate({d:n})):n.length&&(t[o]=t.chart.renderer.path(n).addClass(i[1]).attr({zIndex:1}).add(t.group),a={stroke:i[2],"stroke-width":e.lineWidth,fill:t.fillGraph&&t.color||"none"},i[3]?a.dashstyle=i[3]:"square"!==e.linecap&&(a["stroke-linecap"]=a["stroke-linejoin"]="round"),a=t[o].attr(a).shadow(2>r&&e.shadow)),a&&(a.startX=n.xMap,a.isArea=n.isArea)})},applyZones:function(){var t,e,n,i,r,o,a,s,l,u=this,h=this.chart,d=h.renderer,f=this.zones,p=this.clips||[],g=this.graph,m=this.area,v=Math.max(h.chartWidth,h.chartHeight),y=this[(this.zoneAxis||"y")+"Axis"],b=h.inverted,x=!1;f.length&&(g||m)&&y&&void 0!==y.min&&(r=y.reversed,o=y.horiz,g&&g.hide(),m&&m.hide(),i=y.getExtremes(),c(f,function(c,f){t=r?o?h.plotWidth:0:o?0:y.toPixels(i.min),t=Math.min(Math.max(w(e,t),0),v),e=Math.min(Math.max(Math.round(y.toPixels(w(c.value,i.max),!0)),0),v),x&&(t=e=y.toPixels(i.max)),a=Math.abs(t-e),s=Math.min(t,e),l=Math.max(t,e),y.isXAxis?(n={x:b?l:s,y:0,width:a,height:v},o||(n.x=h.plotHeight-n.x)):(n={x:0,y:b?l:s,width:v,height:a},o&&(n.y=h.plotWidth-n.y)),b&&d.isVML&&(n=y.isXAxis?{x:0,y:r?s:l,height:n.width,width:h.chartWidth}:{x:n.y-h.plotLeft-h.spacingBox.x,y:0,width:n.height,height:h.chartHeight}),p[f]?p[f].animate(n):(p[f]=d.clipRect(n),g&&u["zone-graph-"+f].clip(p[f]),m&&u["zone-area-"+f].clip(p[f])),x=c.value>i.max}),this.clips=p)},invertGroups:function(t){function n(){c(["group","markerGroup"],function(e){r[e]&&(o.renderer.isVML&&r[e].attr({width:r.yAxis.len,height:r.xAxis.len}),r[e].width=r.yAxis.len,r[e].height=r.xAxis.len,r[e].invert(t))})}var i,r=this,o=r.chart;r.xAxis&&(i=e(o,"resize",n),e(r,"destroy",i),n(t),r.invertGroups=n)},plotGroup:function(t,e,n,i,r){var o=this[t],a=!o;return a&&(this[t]=o=this.chart.renderer.g().attr({zIndex:i||.1}).add(r)),o.addClass("highcharts-"+e+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series highcharts-color-"+this.colorIndex+" "+(this.options.className||""),!0),o.attr({visibility:n})[a?"attr":"animate"](this.getPlotBox()),o},getPlotBox:function(){var t=this.chart,e=this.xAxis,n=this.yAxis;return t.inverted&&(e=n,n=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:n?n.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,i=e.chart,r=e.options,o=!!e.animate&&i.renderer.isSVG&&n(r.animation).duration,a=e.visible?"inherit":"hidden",s=r.zIndex,l=e.hasRendered,u=i.seriesGroup,c=i.inverted;t=e.plotGroup("group","series",a,s,u),e.markerGroup=e.plotGroup("markerGroup","markers",a,s,u),o&&e.animate(!0),t.inverted=!!e.isCartesian&&c,e.drawGraph&&(e.drawGraph(),e.applyZones()),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&!1!==e.options.enableMouseTracking&&e.drawTracker(),e.invertGroups(c),!1===r.clip||e.sharedClipKey||l||t.clip(i.clipRect),o&&e.animate(),l||(e.animationTimeout=C(function(){e.afterAnimate()},o)),e.isDirty=!1,e.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirty||this.isDirtyData,n=this.group,i=this.xAxis,r=this.yAxis;n&&(t.inverted&&n.attr({width:t.plotWidth,height:t.plotHeight}),n.animate({translateX:w(i&&i.left,t.plotLeft),translateY:w(r&&r.top,t.plotTop)})),this.translate(),this.render(),e&&delete this.kdTree},kdAxisArray:["clientX","plotY"],searchPoint:function(t,e){var n=this.xAxis,i=this.yAxis,r=this.chart.inverted;return this.searchKDTree({clientX:r?n.len-t.chartY+n.pos:t.chartX-n.pos,plotY:r?i.len-t.chartX+i.pos:t.chartY-i.pos},e)},buildKDTree:function(){function t(n,i,r){var o,a;if(a=n&&n.length)return o=e.kdAxisArray[i%r],n.sort(function(t,e){return t[o]-e[o]}),a=Math.floor(a/2),{point:n[a],left:t(n.slice(0,a),i+1,r),right:t(n.slice(a+1),i+1,r)}}this.buildingKdTree=!0;var e=this,n=-1<e.options.findNearestPointBy.indexOf("y")?2:1;delete e.kdTree,C(function(){e.kdTree=t(e.getValidPoints(null,!e.directTouch),n,n),e.buildingKdTree=!1},e.options.kdNow?0:1)},searchKDTree:function(t,e){function n(t,e,s,l){var c,h,d=e.point,f=i.kdAxisArray[s%l],p=d;return h=u(t[r])&&u(d[r])?Math.pow(t[r]-d[r],2):null,c=u(t[o])&&u(d[o])?Math.pow(t[o]-d[o],2):null,c=(h||0)+(c||0),d.dist=u(c)?Math.sqrt(c):Number.MAX_VALUE,d.distX=u(h)?Math.sqrt(h):Number.MAX_VALUE,f=t[f]-d[f],c=0>f?"left":"right",h=0>f?"right":"left",e[c]&&(c=n(t,e[c],s+1,l),p=c[a]<p[a]?c:d),e[h]&&Math.sqrt(f*f)<p[a]&&(t=n(t,e[h],s+1,l),p=t[a]<p[a]?t:p),p}var i=this,r=this.kdAxisArray[0],o=this.kdAxisArray[1],a=e?"distX":"dist";if(e=-1<i.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree(),this.kdTree)return n(t,this.kdTree,e,e)}})}(t),function(t){var e=t.Axis,n=t.Chart,i=t.correctFloat,r=t.defined,o=t.destroyObjectProperties,a=t.each,s=t.format,l=t.objectEach,u=t.pick,c=t.Series;t.StackItem=function(t,e,n,i,r){var o=t.chart.inverted;this.axis=t,this.isNegative=n,this.options=e,this.x=i,this.total=null,this.points={},this.stack=r,this.rightCliff=this.leftCliff=0,this.alignOptions={align:e.align||(o?n?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":n?"bottom":"top"),y:u(e.y,o?4:n?14:-6),x:u(e.x,o?n?-6:6:0)},this.textAlign=e.textAlign||(o?n?"right":"left":"center")},t.StackItem.prototype={destroy:function(){o(this,this.axis)},render:function(t){var e=this.options,n=e.format,n=n?s(n,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:"hidden"}).add(t)},setOffset:function(t,e){var n=this.axis,i=n.chart,r=n.translate(n.usePercentage?100:this.total,0,0,0,1),n=n.translate(0),n=Math.abs(r-n);t=i.xAxis[0].translate(this.x)+t,r=this.getStackBox(i,this,t,r,e,n),(e=this.label)&&(e.align(this.alignOptions,null,r),r=e.alignAttr,e[!1===this.options.crop||i.isInsidePlot(r.x,r.y)?"show":"hide"](!0))},getStackBox:function(t,e,n,i,r,o){var a=e.axis.reversed,s=t.inverted;return t=t.plotHeight,e=e.isNegative&&!a||!e.isNegative&&a,{x:s?e?i:i-o:n,y:s?t-n-r:e?t-i-o:t-i,width:s?o:r,height:s?r:o}}},n.prototype.getStacks=function(){var t=this;a(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),a(t.series,function(e){!e.options.stacking||!0!==e.visible&&!1!==t.options.chart.ignoreHiddenSeries||(e.stackKey=e.type+u(e.options.stack,""))})},e.prototype.buildStacks=function(){var t,e=this.series,n=u(this.options.reversedStacks,!0),i=e.length;if(!this.isXAxis){for(this.usePercentage=!1,t=i;t--;)e[n?t:i-t-1].setStackedPoints();if(this.usePercentage)for(t=0;t<i;t++)e[t].setPercentStacks()}},e.prototype.renderStackTotals=function(){var t=this.chart,e=t.renderer,n=this.stacks,i=this.stackTotalGroup;i||(this.stackTotalGroup=i=e.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),i.translate(t.plotLeft,t.plotTop),l(n,function(t){l(t,function(t){t.render(i)})})},e.prototype.resetStacks=function(){var t=this,e=t.stacks;t.isXAxis||l(e,function(e){l(e,function(n,i){n.touched<t.stacksTouched?(n.destroy(),delete e[i]):(n.total=null,n.cum=null)})})},e.prototype.cleanStacks=function(){var t;this.isXAxis||(this.oldStacks&&(t=this.stacks=this.oldStacks),l(t,function(t){l(t,function(t){t.cum=t.total})}))},c.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var e,n,o,a,s,l,c,h=this.processedXData,d=this.processedYData,f=[],p=d.length,g=this.options,m=g.threshold,v=g.startFromThreshold?m:0,y=g.stack,g=g.stacking,b=this.stackKey,w="-"+b,x=this.negStacks,_=this.yAxis,k=_.stacks,C=_.oldStacks;for(_.stacksTouched+=1,s=0;s<p;s++)l=h[s],c=d[s],e=this.getStackIndicator(e,l,this.index),a=e.key,o=(n=x&&c<(v?0:m))?w:b,k[o]||(k[o]={}),k[o][l]||(C[o]&&C[o][l]?(k[o][l]=C[o][l],k[o][l].total=null):k[o][l]=new t.StackItem(_,_.options.stackLabels,n,l,y)),o=k[o][l],null!==c&&(o.points[a]=o.points[this.index]=[u(o.cum,v)],r(o.cum)||(o.base=a),o.touched=_.stacksTouched,0<e.index&&!1===this.singleStacks&&(o.points[a][0]=o.points[this.index+","+l+",0"][0])),"percent"===g?(n=n?b:w,x&&k[n]&&k[n][l]?(n=k[n][l],o.total=n.total=Math.max(n.total,o.total)+Math.abs(c)||0):o.total=i(o.total+(Math.abs(c)||0))):o.total=i(o.total+(c||0)),o.cum=u(o.cum,v)+(c||0),null!==c&&(o.points[a].push(o.cum),f[s]=o.cum);"percent"===g&&(_.usePercentage=!0),this.stackedYData=f,_.oldStacks={}}},c.prototype.setPercentStacks=function(){var t,e=this,n=e.stackKey,r=e.yAxis.stacks,o=e.processedXData;a([n,"-"+n],function(n){for(var a,s,l=o.length;l--;)a=o[l],t=e.getStackIndicator(t,a,e.index,n),(a=(s=r[n]&&r[n][a])&&s.points[t.key])&&(s=s.total?100/s.total:0,a[0]=i(a[0]*s),a[1]=i(a[1]*s),e.stackedYData[l]=a[1])})},c.prototype.getStackIndicator=function(t,e,n,i){return!r(t)||t.x!==e||i&&t.key!==i?t={x:e,index:0,key:i}:t.index++,t.key=[n,e,t.index].join(),t}}(t),function(t){var e=t.addEvent,n=t.animate,i=t.Axis,r=t.createElement,o=t.css,a=t.defined,s=t.each,l=t.erase,u=t.extend,c=t.fireEvent,h=t.inArray,d=t.isNumber,f=t.isObject,p=t.isArray,g=t.merge,m=t.objectEach,v=t.pick,y=t.Point,b=t.Series,w=t.seriesTypes,x=t.setAnimation,_=t.splat;u(t.Chart.prototype,{addSeries:function(t,e,n){var i,r=this;return t&&(e=v(e,!0),c(r,"addSeries",{options:t},function(){i=r.initSeries(t),r.isDirtyLegend=!0,r.linkSeries(),e&&r.redraw(n)})),i},addAxis:function(t,e,n,r){var o=e?"xAxis":"yAxis",a=this.options;return t=g(t,{index:this[o].length,isX:e}),e=new i(this,t),a[o]=_(a[o]||{}),a[o].push(t),v(n,!0)&&this.redraw(r),e},showLoading:function(t){var i=this,a=i.options,s=i.loadingDiv,l=a.loading,c=function(){s&&o(s,{left:i.plotLeft+"px",top:i.plotTop+"px",width:i.plotWidth+"px",height:i.plotHeight+"px"})};s||(i.loadingDiv=s=r("div",{className:"highcharts-loading highcharts-loading-hidden"},null,i.container),i.loadingSpan=r("span",{className:"highcharts-loading-inner"},null,s),e(i,"redraw",c)),s.className="highcharts-loading",i.loadingSpan.innerHTML=t||a.lang.loading,o(s,u(l.style,{zIndex:10})),o(i.loadingSpan,l.labelStyle),i.loadingShown||(o(s,{opacity:0,display:""}),n(s,{opacity:l.style.opacity||.5},{duration:l.showDuration||0})),i.loadingShown=!0,c()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&(e.className="highcharts-loading highcharts-loading-hidden",n(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){o(e,{display:"none"})}})),this.loadingShown=!1},propsRequireDirtyBox:"backgroundColor borderColor borderWidth margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions tooltip".split(" "),update:function(t,e,n){var i,r,o=this,l={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle"},u=t.chart,c=[];u&&(g(!0,o.options.chart,u),"className"in u&&o.setClassName(u.className),("inverted"in u||"polar"in u)&&(o.propFromSeries(),i=!0),"alignTicks"in u&&(i=!0),m(u,function(t,e){-1!==h("chart."+e,o.propsRequireUpdateSeries)&&(r=!0),-1!==h(e,o.propsRequireDirtyBox)&&(o.isDirtyBox=!0)}),"style"in u&&o.renderer.setStyle(u.style)),t.colors&&(this.options.colors=t.colors),t.plotOptions&&g(!0,this.options.plotOptions,t.plotOptions),m(t,function(t,e){o[e]&&"function"==typeof o[e].update?o[e].update(t,!1):"function"==typeof o[l[e]]&&o[l[e]](t),"chart"!==e&&-1!==h(e,o.propsRequireUpdateSeries)&&(r=!0)}),s("xAxis yAxis zAxis series colorAxis pane".split(" "),function(e){t[e]&&(s(_(t[e]),function(t,i){(i=a(t.id)&&o.get(t.id)||o[e][i])&&i.coll===e&&(i.update(t,!1),n&&(i.touched=!0)),!i&&n&&("series"===e?o.addSeries(t,!1).touched=!0:"xAxis"!==e&&"yAxis"!==e||(o.addAxis(t,"xAxis"===e,!1).touched=!0))}),n&&s(o[e],function(t){t.touched?delete t.touched:c.push(t)}))}),s(c,function(t){t.remove(!1)}),i&&s(o.axes,function(t){t.update({},!1)}),r&&s(o.series,function(t){t.update({},!1)}),t.loading&&g(!0,o.options.loading,t.loading),i=u&&u.width,u=u&&u.height,d(i)&&i!==o.chartWidth||d(u)&&u!==o.chartHeight?o.setSize(i,u):v(e,!0)&&o.redraw()},setSubtitle:function(t){this.setTitle(void 0,t)}}),u(y.prototype,{update:function(t,e,n,i){function r(){a.applyOptions(t),null===a.y&&l&&(a.graphic=l.destroy()),f(t,!0)&&(l&&l.element&&t&&t.marker&&void 0!==t.marker.symbol&&(a.graphic=l.destroy()),t&&t.dataLabels&&a.dataLabel&&(a.dataLabel=a.dataLabel.destroy())),o=a.index,s.updateParallelArrays(a,o),c.data[o]=f(c.data[o],!0)||f(t,!0)?a.options:t,s.isDirty=s.isDirtyData=!0,!s.fixedBox&&s.hasCartesianSeries&&(u.isDirtyBox=!0),"point"===c.legendType&&(u.isDirtyLegend=!0),e&&u.redraw(n)}var o,a=this,s=a.series,l=a.graphic,u=s.chart,c=s.options;e=v(e,!0),!1===i?r():a.firePointEvent("update",{options:t},r)},remove:function(t,e){this.series.removePoint(h(this,this.series.data),t,e)}}),u(b.prototype,{addPoint:function(t,e,n,i){var r,o,a,s,l=this.options,u=this.data,c=this.chart,h=this.xAxis,h=h&&h.hasNames&&h.names,d=l.data,f=this.xData;if(e=v(e,!0),r={series:this},this.pointClass.prototype.applyOptions.apply(r,[t]),s=r.x,a=f.length,this.requireSorting&&s<f[a-1])for(o=!0;a&&f[a-1]>s;)a--;this.updateParallelArrays(r,"splice",a,0,0),this.updateParallelArrays(r,a),h&&r.name&&(h[s]=r.name),d.splice(a,0,t),o&&(this.data.splice(a,0,null),this.processData()),"point"===l.legendType&&this.generatePoints(),n&&(u[0]&&u[0].remove?u[0].remove(!1):(u.shift(),this.updateParallelArrays(r,"shift"),d.shift())),this.isDirtyData=this.isDirty=!0,e&&c.redraw(i)},removePoint:function(t,e,n){var i=this,r=i.data,o=r[t],a=i.points,s=i.chart,l=function(){a&&a.length===r.length&&a.splice(t,1),r.splice(t,1),i.options.data.splice(t,1),i.updateParallelArrays(o||{series:i},"splice",t,1),o&&o.destroy(),i.isDirty=!0,i.isDirtyData=!0,e&&s.redraw()};x(n,s),e=v(e,!0),o?o.firePointEvent("remove",null,l):l()},remove:function(t,e,n){function i(){r.destroy(),o.isDirtyLegend=o.isDirtyBox=!0,o.linkSeries(),v(t,!0)&&o.redraw(e)}var r=this,o=r.chart;!1!==n?c(r,"remove",null,i):i()},update:function(t,e){var n,i=this,r=i.chart,o=i.userOptions,a=i.oldType||i.type,l=t.type||o.type||r.options.chart.type,c=w[a].prototype,h=["group","markerGroup","dataLabelsGroup","navigatorSeries","baseSeries"],d=i.finishedAnimating&&{animation:!1};if(Object.keys&&"data"===Object.keys(t).toString())return this.setData(t.data,e);(l&&l!==a||void 0!==t.zIndex)&&(h.length=0),s(h,function(t){h[t]=i[t],delete i[t]}),t=g(o,d,{index:i.index,pointStart:i.xData[0]},{data:i.options.data},t),i.remove(!1,null,!1);for(n in c)i[n]=void 0;u(i,w[l||a].prototype),s(h,function(t){i[t]=h[t]}),i.init(r,t),i.oldType=a,r.linkSeries(),v(e,!0)&&r.redraw(!1)}}),u(i.prototype,{update:function(t,e){var n=this.chart;t=n.options[this.coll][this.options.index]=g(this.userOptions,t),this.destroy(!0),this.init(n,u(t,{events:void 0})),n.isDirtyBox=!0,v(e,!0)&&n.redraw()},remove:function(t){for(var e=this.chart,n=this.coll,i=this.series,r=i.length;r--;)i[r]&&i[r].remove(!1);l(e.axes,this),l(e[n],this),p(e.options[n])?e.options[n].splice(this.options.index,1):delete e.options[n],s(e[n],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,v(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}})}(t),function(t){var e=t.color,n=t.each,i=t.map,r=t.pick,o=t.Series,a=t.seriesType;a("area","line",{softThreshold:!1,threshold:0},{singleStacks:!1,getStackPoints:function(e){var o,a,s=[],l=[],u=this.xAxis,c=this.yAxis,h=c.stacks[this.stackKey],d={},f=this.index,p=c.series,g=p.length,m=r(c.options.reversedStacks,!0)?1:-1;if(e=e||this.points,this.options.stacking){for(a=0;a<e.length;a++)d[e[a].x]=e[a];t.objectEach(h,function(t,e){null!==t.total&&l.push(e)}),l.sort(function(t,e){return t-e}),o=i(p,function(){return this.visible}),n(l,function(t,e){var i,r,p=0;if(d[t]&&!d[t].isNull)s.push(d[t]),n([-1,1],function(n){var s=1===n?"rightNull":"leftNull",u=0,c=h[l[e+n]];if(c)for(a=f;0<=a&&a<g;)i=c.points[a],i||(a===f?d[t][s]=!0:o[a]&&(r=h[t].points[a])&&(u-=r[1]-r[0])),a+=m;d[t][1===n?"rightCliff":"leftCliff"]=u});else{for(a=f;0<=a&&a<g;){if(i=h[t].points[a]){p=i[1];break}a+=m}p=c.translate(p,0,1,0,1),s.push({isNull:!0,plotX:u.translate(t,0,0,0,1),x:t,plotY:p,yBottom:p})}})}return s},getGraphPath:function(t){var e,n,i,a,s=o.prototype.getGraphPath,l=this.options,u=l.stacking,c=this.yAxis,h=[],d=[],f=this.index,p=c.stacks[this.stackKey],g=l.threshold,m=c.getThreshold(l.threshold),l=l.connectNulls||"percent"===u,v=function(e,n,r){var o=t[e];e=u&&p[o.x].points[f];var a=o[r+"Null"]||0;r=o[r+"Cliff"]||0;var s,l,o=!0;r||a?(s=(a?e[0]:e[1])+r,l=e[0]+r,o=!!a):!u&&t[n]&&t[n].isNull&&(s=l=g),void 0!==s&&(d.push({plotX:i,plotY:null===s?m:c.getThreshold(s),isNull:o,isCliff:!0}),h.push({plotX:i,plotY:null===l?m:c.getThreshold(l),doCurve:!1}))};for(t=t||this.points,u&&(t=this.getStackPoints(t)),e=0;e<t.length;e++)n=t[e].isNull,i=r(t[e].rectPlotX,t[e].plotX),a=r(t[e].yBottom,m),(!n||l)&&(l||v(e,e-1,"left"),n&&!u&&l||(d.push(t[e]),h.push({x:e,plotX:i,plotY:a})),l||v(e,e+1,"right"));return e=s.call(this,d,!0,!0),h.reversed=!0,n=s.call(this,h,!0,!0),n.length&&(n[0]="L"),n=e.concat(n),s=s.call(this,d,!1,l),n.xMap=e.xMap,this.areaPath=n,s},drawGraph:function(){this.areaPath=[],o.prototype.drawGraph.apply(this);var t=this,i=this.areaPath,a=this.options,s=[["area","highcharts-area",this.color,a.fillColor]];n(this.zones,function(e,n){s.push(["zone-area-"+n,"highcharts-area highcharts-zone-area-"+n+" "+e.className,e.color||t.color,e.fillColor||a.fillColor])}),n(s,function(n){var o=n[0],s=t[o];s?(s.endX=i.xMap,s.animate({d:i})):(s=t[o]=t.chart.renderer.path(i).addClass(n[1]).attr({fill:r(n[3],e(n[2]).setOpacity(r(a.fillOpacity,.75)).get()),zIndex:0}).add(t.group),s.isArea=!0),s.startX=i.xMap,s.shiftUnit=a.step?2:1})},drawLegendSymbol:t.LegendSymbolMixin.drawRectangle})}(t),function(t){var e=t.pick;(t=t.seriesType)("spline","line",{},{getPointSpline:function(t,n,i){var r=n.plotX,o=n.plotY,a=t[i-1];i=t[i+1];var s,l,u,c;if(a&&!a.isNull&&!1!==a.doCurve&&!n.isCliff&&i&&!i.isNull&&!1!==i.doCurve&&!n.isCliff){t=a.plotY,u=i.plotX,i=i.plotY;var h=0;s=(1.5*r+a.plotX)/2.5,l=(1.5*o+t)/2.5,u=(1.5*r+u)/2.5,c=(1.5*o+i)/2.5,u!==s&&(h=(c-l)*(u-r)/(u-s)+o-c),l+=h,c+=h,l>t&&l>o?(l=Math.max(t,o),c=2*o-l):l<t&&l<o&&(l=Math.min(t,o),c=2*o-l),c>i&&c>o?(c=Math.max(i,o),l=2*o-c):c<i&&c<o&&(c=Math.min(i,o),l=2*o-c),n.rightContX=u,n.rightContY=c}return n=["C",e(a.rightContX,a.plotX),e(a.rightContY,a.plotY),e(s,r),e(l,o),r,o],a.rightContX=a.rightContY=null,n}})}(t),function(t){var e=t.seriesTypes.area.prototype,n=t.seriesType;n("areaspline","spline",t.defaultPlotOptions.area,{getStackPoints:e.getStackPoints,getGraphPath:e.getGraphPath,drawGraph:e.drawGraph,drawLegendSymbol:t.LegendSymbolMixin.drawRectangle})}(t),function(t){var e=t.animObject,n=t.color,i=t.each,r=t.extend,o=t.isNumber,a=t.merge,s=t.pick,l=t.Series,u=t.seriesType,c=t.svg;u("column","line",{borderRadius:0,crisp:!0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1,shadow:!1},select:{color:"#cccccc",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"},{cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){l.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&i(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e=this,n=e.options,r=e.xAxis,o=e.yAxis,a=r.reversed,l={},u=0;!1===n.grouping?u=1:i(e.chart.series,function(n){var i,r=n.options,a=n.yAxis;n.type!==e.type||!n.visible&&e.chart.options.chart.ignoreHiddenSeries||o.len!==a.len||o.pos!==a.pos||(r.stacking?(t=n.stackKey,void 0===l[t]&&(l[t]=u++),i=l[t]):!1!==r.grouping&&(i=u++),n.columnIndex=i)});var c=Math.min(Math.abs(r.transA)*(r.ordinalSlope||n.pointRange||r.closestPointRange||r.tickInterval||1),r.len),h=c*n.groupPadding,d=(c-2*h)/(u||1),n=Math.min(n.maxPointWidth||r.len,s(n.pointWidth,d*(1-2*n.pointPadding)));return e.columnMetrics={width:n,offset:(d-n)/2+(h+((e.columnIndex||0)+(a?1:0))*d-c/2)*(a?-1:1)},e.columnMetrics},crispCol:function(t,e,n,i){var r=this.chart,o=this.borderWidth,a=-(o%2?.5:0),o=o%2?.5:1;return r.inverted&&r.renderer.isVML&&(o+=1),this.options.crisp&&(n=Math.round(t+n)+a,t=Math.round(t)+a,n-=t),i=Math.round(e+i)+o,a=.5>=Math.abs(e)&&.5<i,e=Math.round(e)+o,i-=e,a&&i&&(--e,i+=1),{x:t,y:e,width:n,height:i}},translate:function(){var t=this,e=t.chart,n=t.options,r=t.dense=2>t.closestPointRange*t.xAxis.transA,r=t.borderWidth=s(n.borderWidth,r?0:1),o=t.yAxis,a=t.translatedThreshold=o.getThreshold(n.threshold),u=s(n.minPointLength,5),c=t.getColumnMetrics(),h=c.width,d=t.barW=Math.max(h,1+2*r),f=t.pointXOffset=c.offset;e.inverted&&(a-=.5),n.pointPadding&&(d=Math.ceil(d)),l.prototype.translate.apply(t),i(t.points,function(n){var i,r=s(n.yBottom,a),l=999+Math.abs(r),l=Math.min(Math.max(-l,n.plotY),o.len+l),c=n.plotX+f,p=d,g=Math.min(l,r),m=Math.max(l,r)-g;
Math.abs(m)<u&&u&&(m=u,i=!o.reversed&&!n.negative||o.reversed&&n.negative,g=Math.abs(g-a)>u?r-u:a-(i?u:0)),n.barX=c,n.pointWidth=h,n.tooltipPos=e.inverted?[o.len+o.pos-e.plotLeft-l,t.xAxis.len-c-p/2,m]:[c+p/2,l+o.pos-e.plotTop,m],n.shapeType="rect",n.shapeArgs=t.crispCol.apply(t,n.isNull?[c,a,p,0]:[c,g,p,m])})},getSymbol:t.noop,drawLegendSymbol:t.LegendSymbolMixin.drawRectangle,drawGraph:function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},pointAttribs:function(t,e){var i,r=this.options,o=this.pointAttrToOptions||{};i=o.stroke||"borderColor";var s=o["stroke-width"]||"borderWidth",l=t&&t.color||this.color,u=t[i]||r[i]||this.color||l,c=t[s]||r[s]||this[s]||0,o=r.dashStyle;return t&&this.zones.length&&(l=t.getZone(),l=t.options.color||l&&l.color||this.color),e&&(t=a(r.states[e],t.options.states&&t.options.states[e]||{}),e=t.brightness,l=t.color||void 0!==e&&n(l).brighten(t.brightness).get()||l,u=t[i]||u,c=t[s]||c,o=t.dashStyle||o),i={fill:l,stroke:u,"stroke-width":c},o&&(i.dashstyle=o),i},drawPoints:function(){var t,e=this,n=this.chart,r=e.options,s=n.renderer,l=r.animationLimit||250;i(e.points,function(i){var u=i.graphic;o(i.plotY)&&null!==i.y?(t=i.shapeArgs,u?u[n.pointCount<l?"animate":"attr"](a(t)):i.graphic=u=s[i.shapeType](t).add(i.group||e.group),r.borderRadius&&u.attr({r:r.borderRadius}),u.attr(e.pointAttribs(i,i.selected&&"select")).shadow(r.shadow,null,r.stacking&&!r.borderRadius),u.addClass(i.getClassName(),!0)):u&&(i.graphic=u.destroy())})},animate:function(t){var n=this,i=this.yAxis,o=n.options,a=this.chart.inverted,s={};c&&(t?(s.scaleY=.001,t=Math.min(i.pos+i.len,Math.max(i.pos,i.toPixels(o.threshold))),a?s.translateX=t-i.len:s.translateY=t,n.group.attr(s)):(s[a?"translateX":"translateY"]=i.pos,n.group.animate(s,r(e(n.options.animation),{step:function(t,e){n.group.attr({scaleY:Math.max(.001,e.pos)})}})),n.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&i(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),l.prototype.remove.apply(t,arguments)}})}(t),function(t){(t=t.seriesType)("bar","column",null,{inverted:!0})}(t),function(t){var e=t.Series;(t=t.seriesType)("scatter","line",{lineWidth:0,findNearestPointBy:"xy",marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 0.85em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}},{sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,drawGraph:function(){this.options.lineWidth&&e.prototype.drawGraph.call(this)}})}(t),function(t){var e=t.pick,n=t.relativeLength;t.CenteredSeriesMixin={getCenter:function(){var t,i,r=this.options,o=this.chart,a=2*(r.slicedOffset||0),s=o.plotWidth-2*a,o=o.plotHeight-2*a,l=r.center,l=[e(l[0],"50%"),e(l[1],"50%"),r.size||"100%",r.innerSize||0],u=Math.min(s,o);for(t=0;4>t;++t)i=l[t],r=2>t||2===t&&/%$/.test(i),l[t]=n(i,[s,o,u,l[2]][t])+(r?a:0);return l[3]>l[2]&&(l[3]=l[2]),l}}}(t),function(t){var e=t.addEvent,n=t.defined,i=t.each,r=t.extend,o=t.inArray,a=t.noop,s=t.pick,l=t.Point,u=t.Series,c=t.seriesType,h=t.setAnimation;c("pie","line",{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,states:{hover:{brightness:.1,shadow:!1}}},{isCartesian:!1,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttribs:t.seriesTypes.column.prototype.pointAttribs,animate:function(t){var e=this,n=e.points,r=e.startAngleRad;t||(i(n,function(t){var n=t.graphic,i=t.shapeArgs;n&&(n.attr({r:t.startR||e.center[3]/2,start:r,end:r}),n.animate({r:i.r,start:i.start,end:i.end},e.options.animation))}),e.animate=null)},updateTotals:function(){var t,e,n=0,i=this.points,r=i.length,o=this.options.ignoreHiddenPoint;for(t=0;t<r;t++)e=i[t],n+=o&&!e.visible?0:e.isNull?0:e.y;for(this.total=n,t=0;t<r;t++)e=i[t],e.percentage=0<n&&(e.visible||!o)?e.y/n*100:0,e.total=n},generatePoints:function(){u.prototype.generatePoints.call(this),this.updateTotals()},translate:function(t){this.generatePoints();var e,n,i,r,o,a,l=0,u=this.options,c=u.slicedOffset,h=c+(u.borderWidth||0),d=u.startAngle||0,f=this.startAngleRad=Math.PI/180*(d-90),d=(this.endAngleRad=Math.PI/180*(s(u.endAngle,d+360)-90))-f,p=this.points,g=u.dataLabels.distance,u=u.ignoreHiddenPoint,m=p.length;for(t||(this.center=t=this.getCenter()),this.getX=function(e,n,r){return i=Math.asin(Math.min((e-t[1])/(t[2]/2+r.labelDistance),1)),t[0]+(n?-1:1)*Math.cos(i)*(t[2]/2+r.labelDistance)},o=0;o<m;o++)a=p[o],a.labelDistance=s(a.options.dataLabels&&a.options.dataLabels.distance,g),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,a.labelDistance),e=f+l*d,u&&!a.visible||(l+=a.percentage/100),n=f+l*d,a.shapeType="arc",a.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:Math.round(1e3*e)/1e3,end:Math.round(1e3*n)/1e3},i=(n+e)/2,i>1.5*Math.PI?i-=2*Math.PI:i<-Math.PI/2&&(i+=2*Math.PI),a.slicedTranslation={translateX:Math.round(Math.cos(i)*c),translateY:Math.round(Math.sin(i)*c)},n=Math.cos(i)*t[2]/2,r=Math.sin(i)*t[2]/2,a.tooltipPos=[t[0]+.7*n,t[1]+.7*r],a.half=i<-Math.PI/2||i>Math.PI/2?1:0,a.angle=i,e=Math.min(h,a.labelDistance/5),a.labelPos=[t[0]+n+Math.cos(i)*a.labelDistance,t[1]+r+Math.sin(i)*a.labelDistance,t[0]+n+Math.cos(i)*e,t[1]+r+Math.sin(i)*e,t[0]+n,t[1]+r,0>a.labelDistance?"center":a.half?"right":"left",i]},drawGraph:null,drawPoints:function(){var t,e,n,o,a=this,s=a.chart.renderer,l=a.options.shadow;l&&!a.shadowGroup&&(a.shadowGroup=s.g("shadow").add(a.group)),i(a.points,function(i){if(!i.isNull){e=i.graphic,o=i.shapeArgs,t=i.getTranslate();var u=i.shadowGroup;l&&!u&&(u=i.shadowGroup=s.g("shadow").add(a.shadowGroup)),u&&u.attr(t),n=a.pointAttribs(i,i.selected&&"select"),e?e.setRadialReference(a.center).attr(n).animate(r(o,t)):(i.graphic=e=s[i.shapeType](o).setRadialReference(a.center).attr(t).add(a.group),i.visible||e.attr({visibility:"hidden"}),e.attr(n).attr({"stroke-linejoin":"round"}).shadow(l,u)),e.addClass(i.getClassName())}})},searchPoint:a,sortByAngle:function(t,e){t.sort(function(t,n){return void 0!==t.angle&&(n.angle-t.angle)*e})},drawLegendSymbol:t.LegendSymbolMixin.drawRectangle,getCenter:t.CenteredSeriesMixin.getCenter,getSymbol:a},{init:function(){l.prototype.init.apply(this,arguments);var t,n=this;return n.name=s(n.name,"Slice"),t=function(t){n.slice("select"===t.type)},e(n,"select",t),e(n,"unselect",t),n},isValid:function(){return t.isNumber(this.y,!0)&&0<=this.y},setVisible:function(t,e){var n=this,r=n.series,a=r.chart,l=r.options.ignoreHiddenPoint;e=s(e,l),t!==n.visible&&(n.visible=n.options.visible=t=void 0===t?!n.visible:t,r.options.data[o(n,r.data)]=n.options,i(["graphic","dataLabel","connector","shadowGroup"],function(e){n[e]&&n[e][t?"show":"hide"](!0)}),n.legendItem&&a.legend.colorizeItem(n,t),t||"hover"!==n.state||n.setState(""),l&&(r.isDirty=!0),e&&a.redraw())},slice:function(t,e,i){var r=this.series;h(i,r.chart),s(e,!0),this.sliced=this.options.sliced=n(t)?t:!this.sliced,r.options.data[o(this,r.data)]=this.options,this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},getTranslate:function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},haloPath:function(t){var e=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(e.x,e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}})}(t),function(t){var e=t.addEvent,n=t.arrayMax,i=t.defined,r=t.each,o=t.extend,a=t.format,s=t.map,l=t.merge,u=t.noop,c=t.pick,h=t.relativeLength,d=t.Series,f=t.seriesTypes,p=t.stableSort;t.distribute=function(t,e){function n(t,e){return t.target-e.target}var i,o,a=!0,l=t,u=[];for(o=0,i=t.length;i--;)o+=t[i].size;if(o>e){for(p(t,function(t,e){return(e.rank||0)-(t.rank||0)}),o=i=0;o<=e;)o+=t[i].size,i++;u=t.splice(i-1,t.length)}for(p(t,n),t=s(t,function(t){return{size:t.size,targets:[t.target]}});a;){for(i=t.length;i--;)a=t[i],o=(Math.min.apply(0,a.targets)+Math.max.apply(0,a.targets))/2,a.pos=Math.min(Math.max(0,o-a.size/2),e-a.size);for(i=t.length,a=!1;i--;)0<i&&t[i-1].pos+t[i-1].size>t[i].pos&&(t[i-1].size+=t[i].size,t[i-1].targets=t[i-1].targets.concat(t[i].targets),t[i-1].pos+t[i-1].size>e&&(t[i-1].pos=e-t[i-1].size),t.splice(i,1),a=!0)}i=0,r(t,function(t){var e=0;r(t.targets,function(){l[i].pos=t.pos+e,e+=l[i].size,i++})}),l.push.apply(l,u),p(l,n)},d.prototype.drawDataLabels=function(){var n,o,s,u,h=this,d=h.options,f=d.dataLabels,p=h.points,g=h.hasRendered||0,m=c(f.defer,!!d.animation),v=h.chart.renderer;(f.enabled||h._hasPointLabels)&&(h.dlProcessOptions&&h.dlProcessOptions(f),u=h.plotGroup("dataLabelsGroup","data-labels",m&&!g?"hidden":"visible",f.zIndex||6),m&&(u.attr({opacity:+g}),g||e(h,"afterAnimate",function(){h.visible&&u.show(!0),u[d.animation?"animate":"attr"]({opacity:1},{duration:200})})),o=f,r(p,function(e){var r,p,g,m,y=e.dataLabel,b=e.connector,w=!y;n=e.dlOptions||e.options&&e.options.dataLabels,(r=c(n&&n.enabled,o.enabled)&&null!==e.y)&&(f=l(o,n),p=e.getLabelConfig(),s=f.format?a(f.format,p):f.formatter.call(p,f),m=f.style,p=f.rotation,m.color=c(f.color,m.color,h.color,"#000000"),"contrast"===m.color&&(e.contrastColor=v.getContrast(e.color||h.color),m.color=f.inside||0>c(e.labelDistance,f.distance)||d.stacking?e.contrastColor:"#000000"),d.cursor&&(m.cursor=d.cursor),g={fill:f.backgroundColor,stroke:f.borderColor,"stroke-width":f.borderWidth,r:f.borderRadius||0,rotation:p,padding:f.padding,zIndex:1},t.objectEach(g,function(t,e){void 0===t&&delete g[e]})),!y||r&&i(s)?r&&i(s)&&(y?g.text=s:(y=e.dataLabel=v[p?"text":"label"](s,0,-9999,f.shape,null,null,f.useHTML,null,"data-label"),y.addClass("highcharts-data-label-color-"+e.colorIndex+" "+(f.className||"")+(f.useHTML?"highcharts-tracker":""))),y.attr(g),y.css(m).shadow(f.shadow),y.added||y.add(u),h.alignDataLabel(e,y,f,null,w)):(e.dataLabel=y=y.destroy(),b&&(e.connector=b.destroy()))}))},d.prototype.alignDataLabel=function(t,e,n,i,r){var a,s=this.chart,l=s.inverted,u=c(t.plotX,-9999),h=c(t.plotY,-9999),d=e.getBBox(),f=n.rotation,p=n.align,g=this.visible&&(t.series.forceDL||s.isInsidePlot(u,Math.round(h),l)||i&&s.isInsidePlot(u,l?i.x+1:i.y+i.height-1,l)),m="justify"===c(n.overflow,"justify");g&&(a=n.style.fontSize,a=s.renderer.fontMetrics(a,e).b,i=o({x:l?this.yAxis.len-h:u,y:Math.round(l?this.xAxis.len-u:h),width:0,height:0},i),o(n,{width:d.width,height:d.height}),f?(m=!1,u=s.renderer.rotCorr(a,f),u={x:i.x+n.x+i.width/2+u.x,y:i.y+n.y+{top:0,middle:.5,bottom:1}[n.verticalAlign]*i.height},e[r?"attr":"animate"](u).attr({align:p}),h=(f+720)%360,h=180<h&&360>h,"left"===p?u.y-=h?d.height:0:"center"===p?(u.x-=d.width/2,u.y-=d.height/2):"right"===p&&(u.x-=d.width,u.y-=h?0:d.height)):(e.align(n,null,i),u=e.alignAttr),m?t.isLabelJustified=this.justifyDataLabel(e,n,u,d,i,r):c(n.crop,!0)&&(g=s.isInsidePlot(u.x,u.y)&&s.isInsidePlot(u.x+d.width,u.y+d.height)),n.shape&&!f)&&e[r?"attr":"animate"]({anchorX:l?s.plotWidth-t.plotY:t.plotX,anchorY:l?s.plotHeight-t.plotX:t.plotY}),g||(e.attr({y:-9999}),e.placed=!1)},d.prototype.justifyDataLabel=function(t,e,n,i,r,o){var a,s,l=this.chart,u=e.align,c=e.verticalAlign,h=t.box?0:t.padding||0;return a=n.x+h,0>a&&("right"===u?e.align="left":e.x=-a,s=!0),a=n.x+i.width-h,a>l.plotWidth&&("left"===u?e.align="right":e.x=l.plotWidth-a,s=!0),a=n.y+h,0>a&&("bottom"===c?e.verticalAlign="top":e.y=-a,s=!0),a=n.y+i.height-h,a>l.plotHeight&&("top"===c?e.verticalAlign="bottom":e.y=l.plotHeight-a,s=!0),s&&(t.placed=!o,t.align(e,null,r)),s},f.pie&&(f.pie.prototype.drawDataLabels=function(){var e,o,a,s,l,u,h,f,p,g,m=this,v=m.data,y=m.chart,b=m.options.dataLabels,w=c(b.connectorPadding,10),x=c(b.connectorWidth,1),_=y.plotWidth,k=y.plotHeight,C=m.center,S=C[2]/2,M=C[1],T=[[],[]],E=[0,0,0,0];m.visible&&(b.enabled||m._hasPointLabels)&&(r(v,function(t){t.dataLabel&&t.visible&&t.dataLabel.shortened&&(t.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),t.dataLabel.shortened=!1)}),d.prototype.drawDataLabels.apply(m),r(v,function(t){t.dataLabel&&t.visible&&(T[t.half].push(t),t.dataLabel._pos=null)}),r(T,function(n,o){var d,v,x,T=n.length,O=[];if(T)for(m.sortByAngle(n,o-.5),0<m.maxLabelDistance&&(d=Math.max(0,M-S-m.maxLabelDistance),v=Math.min(M+S+m.maxLabelDistance,y.plotHeight),r(n,function(t){0<t.labelDistance&&t.dataLabel&&(t.top=Math.max(0,M-S-t.labelDistance),t.bottom=Math.min(M+S+t.labelDistance,y.plotHeight),x=t.dataLabel.getBBox().height||21,t.positionsIndex=O.push({target:t.labelPos[1]-t.top+x/2,size:x,rank:t.y})-1)}),t.distribute(O,v+x-d)),g=0;g<T;g++)e=n[g],v=e.positionsIndex,l=e.labelPos,a=e.dataLabel,p=!1===e.visible?"hidden":"inherit",d=l[1],O&&i(O[v])?void 0===O[v].pos?p="hidden":(u=O[v].size,f=e.top+O[v].pos):f=d,delete e.positionIndex,h=b.justify?C[0]+(o?-1:1)*(S+e.labelDistance):m.getX(f<e.top+2||f>e.bottom-2?d:f,o,e),a._attr={visibility:p,align:l[6]},a._pos={x:h+b.x+({left:w,right:-w}[l[6]]||0),y:f+b.y-10},l.x=h,l.y=f,c(b.crop,!0)&&(s=a.getBBox().width,d=null,h-s<w?(d=Math.round(s-h+w),E[3]=Math.max(d,E[3])):h+s>_-w&&(d=Math.round(h+s-_+w),E[1]=Math.max(d,E[1])),0>f-u/2?E[0]=Math.max(Math.round(-f+u/2),E[0]):f+u/2>k&&(E[2]=Math.max(Math.round(f+u/2-k),E[2])),a.sideOverflow=d)}),0===n(E)||this.verifyDataLabelOverflow(E))&&(this.placeDataLabels(),x&&r(this.points,function(t){var e;o=t.connector,(a=t.dataLabel)&&a._pos&&t.visible&&0<t.labelDistance?(p=a._attr.visibility,(e=!o)&&(t.connector=o=y.renderer.path().addClass("highcharts-data-label-connector highcharts-color-"+t.colorIndex).add(m.dataLabelsGroup),o.attr({"stroke-width":x,stroke:b.connectorColor||t.color||"#666666"})),o[e?"attr":"animate"]({d:m.connectorPath(t.labelPos)}),o.attr("visibility",p)):o&&(t.connector=o.destroy())}))},f.pie.prototype.connectorPath=function(t){var e=t.x,n=t.y;return c(this.options.dataLabels.softConnector,!0)?["M",e+("left"===t[6]?5:-5),n,"C",e,n,2*t[2]-t[4],2*t[3]-t[5],t[2],t[3],"L",t[4],t[5]]:["M",e+("left"===t[6]?5:-5),n,"L",t[2],t[3],"L",t[4],t[5]]},f.pie.prototype.placeDataLabels=function(){r(this.points,function(t){var e=t.dataLabel;e&&t.visible&&((t=e._pos)?(e.sideOverflow&&(e._attr.width=e.getBBox().width-e.sideOverflow,e.css({width:e._attr.width+"px",textOverflow:"ellipsis"}),e.shortened=!0),e.attr(e._attr),e[e.moved?"animate":"attr"](t),e.moved=!0):e&&e.attr({y:-9999}))},this)},f.pie.prototype.alignDataLabel=u,f.pie.prototype.verifyDataLabelOverflow=function(t){var e,n=this.center,i=this.options,r=i.center,o=i.minSize||80,a=null!==i.size;return a||(null!==r[0]?e=Math.max(n[2]-Math.max(t[1],t[3]),o):(e=Math.max(n[2]-t[1]-t[3],o),n[0]+=(t[3]-t[1])/2),null!==r[1]?e=Math.max(Math.min(e,n[2]-Math.max(t[0],t[2])),o):(e=Math.max(Math.min(e,n[2]-t[0]-t[2]),o),n[1]+=(t[0]-t[2])/2),e<n[2]?(n[2]=e,n[3]=Math.min(h(i.innerSize||0,e),e),this.translate(n),this.drawDataLabels&&this.drawDataLabels()):a=!0),a}),f.column&&(f.column.prototype.alignDataLabel=function(t,e,n,i,r){var o=this.chart.inverted,a=t.series,s=t.dlBox||t.shapeArgs,u=c(t.below,t.plotY>c(this.translatedThreshold,a.yAxis.len)),h=c(n.inside,!!this.options.stacking);s&&(i=l(s),0>i.y&&(i.height+=i.y,i.y=0),s=i.y+i.height-a.yAxis.len,0<s&&(i.height-=s),o&&(i={x:a.yAxis.len-i.y-i.height,y:a.xAxis.len-i.x-i.width,width:i.height,height:i.width}),h||(o?(i.x+=u?0:i.width,i.width=0):(i.y+=u?i.height:0,i.height=0))),n.align=c(n.align,!o||h?"center":u?"right":"left"),n.verticalAlign=c(n.verticalAlign,o||h?"middle":u?"top":"bottom"),d.prototype.alignDataLabel.call(this,t,e,n,i,r),t.isLabelJustified&&t.contrastColor&&t.dataLabel.css({color:t.contrastColor})})}(t),function(t){var e=t.Chart,n=t.each,i=t.objectEach,r=t.pick,o=t.addEvent;e.prototype.callbacks.push(function(t){function e(){var e=[];n(t.yAxis||[],function(t){t.options.stackLabels&&!t.options.stackLabels.allowOverlap&&i(t.stacks,function(t){i(t,function(t){e.push(t.label)})})}),n(t.series||[],function(t){var i=t.options.dataLabels,o=t.dataLabelCollections||["dataLabel"];(i.enabled||t._hasPointLabels)&&!i.allowOverlap&&t.visible&&n(o,function(i){n(t.points,function(t){t[i]&&(t[i].labelrank=r(t.labelrank,t.shapeArgs&&t.shapeArgs.height),e.push(t[i]))})})}),t.hideOverlappingLabels(e)}e(),o(t,"redraw",e)}),e.prototype.hideOverlappingLabels=function(t){var e,i,r,o,a,s,l,u,c,h=t.length,d=function(t,e,n,i,r,o,a,s){return!(r>t+n||r+a<t||o>e+i||o+s<e)};for(i=0;i<h;i++)(e=t[i])&&(e.oldOpacity=e.opacity,e.newOpacity=1,e.width||(r=e.getBBox(),e.width=r.width,e.height=r.height));for(t.sort(function(t,e){return(e.labelrank||0)-(t.labelrank||0)}),i=0;i<h;i++)for(r=t[i],e=i+1;e<h;++e)o=t[e],r&&o&&r!==o&&r.placed&&o.placed&&0!==r.newOpacity&&0!==o.newOpacity&&(a=r.alignAttr,s=o.alignAttr,l=r.parentGroup,u=o.parentGroup,c=2*(r.box?0:r.padding||0),a=d(a.x+l.translateX,a.y+l.translateY,r.width-c,r.height-c,s.x+u.translateX,s.y+u.translateY,o.width-c,o.height-c))&&((r.labelrank<o.labelrank?r:o).newOpacity=0);n(t,function(t){var e,n;t&&(n=t.newOpacity,t.oldOpacity!==n&&t.placed&&(n?t.show(!0):e=function(){t.hide()},t.alignAttr.opacity=n,t[t.isOld?"animate":"attr"](t.alignAttr,null,e)),t.isOld=!0)})}}(t),function(t){var e,n=t.addEvent,i=t.Chart,r=t.createElement,o=t.css,a=t.defaultOptions,s=t.defaultPlotOptions,l=t.each,u=t.extend,c=t.fireEvent,h=t.hasTouch,d=t.inArray,f=t.isObject,p=t.Legend,g=t.merge,m=t.pick,v=t.Point,y=t.Series,b=t.seriesTypes,w=t.svg;e=t.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart.pointer,n=function(t){var n=e.getPointFromEvent(t);void 0!==n&&(e.isDirectTouch=!0,n.onMouseOver(t))};l(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.div?t.dataLabel.div.point=t:t.dataLabel.element.point=t)}),t._hasTracking||(l(t.trackerGroups,function(i){t[i]&&(t[i].addClass("highcharts-tracker").on("mouseover",n).on("mouseout",function(t){e.onTrackerMouseOut(t)}),h&&t[i].on("touchstart",n),t.options.cursor&&t[i].css(o).css({cursor:t.options.cursor}))}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e=this,n=e.options,i=n.trackByArea,r=[].concat(i?e.areaPath:e.graphPath),o=r.length,a=e.chart,s=a.pointer,u=a.renderer,c=a.options.tooltip.snap,d=e.tracker,f=function(){a.hoverSeries!==e&&e.onMouseOver()},p="rgba(192,192,192,"+(w?1e-4:.002)+")";if(o&&!i)for(t=o+1;t--;)"M"===r[t]&&r.splice(t+1,0,r[t+1]-c,r[t+2],"L"),(t&&"M"===r[t]||t===o)&&r.splice(t,0,"L",r[t-2]+c,r[t-1]);d?d.attr({d:r}):e.graph&&(e.tracker=u.path(r).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:p,fill:i?p:"none","stroke-width":e.graph.strokeWidth()+(i?0:2*c),zIndex:2}).add(e.group),l([e.tracker,e.markerGroup],function(t){t.addClass("highcharts-tracker").on("mouseover",f).on("mouseout",function(t){s.onTrackerMouseOut(t)}),n.cursor&&t.css({cursor:n.cursor}),h&&t.on("touchstart",f)}))}},b.column&&(b.column.prototype.drawTracker=e.drawTrackerPoint),b.pie&&(b.pie.prototype.drawTracker=e.drawTrackerPoint),b.scatter&&(b.scatter.prototype.drawTracker=e.drawTrackerPoint),u(p.prototype,{setItemEvents:function(t,e,n){var i=this,r=i.chart.renderer.boxWrapper,o="highcharts-legend-"+(t.series?"point":"series")+"-active";(n?e:t.legendGroup).on("mouseover",function(){t.setState("hover"),r.addClass(o),e.css(i.options.itemHoverStyle)}).on("mouseout",function(){e.css(g(t.visible?i.itemStyle:i.itemHiddenStyle)),r.removeClass(o),t.setState()}).on("click",function(e){var n=function(){t.setVisible&&t.setVisible()};e={browserEvent:e},t.firePointEvent?t.firePointEvent("legendItemClick",e,n):c(t,"legendItemClick",e,n)})},createCheckboxForItem:function(t){t.checkbox=r("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),n(t.checkbox,"click",function(e){c(t.series||t,"checkboxClick",{checked:e.target.checked,item:t},function(){t.select()})})}}),a.legend.itemStyle.cursor="pointer",u(i.prototype,{showResetZoom:function(){var t=this,e=a.lang,n=t.options.chart.resetZoomButton,i=n.theme,r=i.states,o="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},i,r&&r.hover).attr({align:n.position.align,title:e.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(n.position,!1,o)},zoomOut:function(){var t=this;c(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,n,i=this.pointer,r=!1;!t||t.resetSelection?(l(this.axes,function(t){e=t.zoom()}),i.initiated=!1):l(t.xAxis.concat(t.yAxis),function(t){var n=t.axis;i[n.isXAxis?"zoomX":"zoomY"]&&(e=n.zoom(t.min,t.max),n.displayBtn&&(r=!0))}),n=this.resetZoomButton,r&&!n?this.showResetZoom():!r&&f(n)&&(this.resetZoomButton=n.destroy()),e&&this.redraw(m(this.options.chart.animation,t&&t.animation,100>this.pointCount))},pan:function(t,e){var n,i=this,r=i.hoverPoints;r&&l(r,function(t){t.setState()}),l("xy"===e?[1,0]:[1],function(e){e=i[e?"xAxis":"yAxis"][0];var r,o=e.horiz,a=t[o?"chartX":"chartY"],o=o?"mouseDownX":"mouseDownY",s=i[o],l=(e.pointRange||0)/2,u=e.getExtremes(),c=e.toValue(s-a,!0)+l,l=e.toValue(s+e.len-a,!0)-l,h=l<c,s=h?l:c,c=h?c:l,l=Math.min(u.dataMin,e.toValue(e.toPixels(u.min)-e.minPixelPadding)),h=Math.max(u.dataMax,e.toValue(e.toPixels(u.max)+e.minPixelPadding));r=l-s,0<r&&(c+=r,s=l),r=c-h,0<r&&(c=h,s-=r),e.series.length&&s!==u.min&&c!==u.max&&(e.setExtremes(s,c,!1,!1,{trigger:"pan"}),n=!0),i[o]=a}),n&&i.redraw(!1),o(i.container,{cursor:"move"})}}),u(v.prototype,{select:function(t,e){var n=this,i=n.series,r=i.chart;t=m(t,!n.selected),n.firePointEvent(t?"select":"unselect",{accumulate:e},function(){n.selected=n.options.selected=t,i.options.data[d(n,i.data)]=n.options,n.setState(t&&"select"),e||l(r.getSelectedPoints(),function(t){t.selected&&t!==n&&(t.selected=t.options.selected=!1,i.options.data[d(t,i.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this.series.chart,n=e.pointer;t=t?n.normalize(t):n.getChartCoordinatesFromPoint(this,e.inverted),n.runPointActions(t,this)},onMouseOut:function(){var t=this.series.chart;this.firePointEvent("mouseOut"),l(t.hoverPoints||[],function(t){t.setState()}),t.hoverPoints=t.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var e=this,i=g(e.series.options.point,e.options).events;e.events=i,t.objectEach(i,function(t,i){n(e,i,t)}),this.hasImportedEvents=!0}},setState:function(t,e){var n,i=Math.floor(this.plotX),r=this.plotY,o=this.series,a=o.options.states[t]||{},l=s[o.type].marker&&o.options.marker,c=l&&!1===l.enabled,h=l&&l.states&&l.states[t]||{},d=!1===h.enabled,f=o.stateMarkerGraphic,p=this.marker||{},g=o.chart,v=o.halo,y=l&&o.markerAttribs;t=t||"",t===this.state&&!e||this.selected&&"select"!==t||!1===a.enabled||t&&(d||c&&!1===h.enabled)||t&&p.states&&p.states[t]&&!1===p.states[t].enabled||(y&&(n=o.markerAttribs(this,t)),this.graphic?(this.state&&this.graphic.removeClass("highcharts-point-"+this.state),t&&this.graphic.addClass("highcharts-point-"+t),this.graphic.animate(o.pointAttribs(this,t),m(g.options.chart.animation,a.animation)),n&&this.graphic.animate(n,m(g.options.chart.animation,h.animation,l.animation)),f&&f.hide()):(t&&h&&(l=p.symbol||o.symbol,f&&f.currentSymbol!==l&&(f=f.destroy()),f?f[e?"animate":"attr"]({x:n.x,y:n.y}):l&&(o.stateMarkerGraphic=f=g.renderer.symbol(l,n.x,n.y,n.width,n.height).add(o.markerGroup),f.currentSymbol=l),f&&f.attr(o.pointAttribs(this,t))),f&&(f[t&&g.isInsidePlot(i,r,g.inverted)?"show":"hide"](),f.element.point=this)),(i=a.halo)&&i.size?(v||(o.halo=v=g.renderer.path().add((this.graphic||f).parentGroup)),v[e?"animate":"attr"]({d:this.haloPath(i.size)}),v.attr({"class":"highcharts-halo highcharts-color-"+m(this.colorIndex,o.colorIndex)}),v.point=this,v.attr(u({fill:this.color||o.color,"fill-opacity":i.opacity,zIndex:-1},i.attributes))):v&&v.point&&v.point.haloPath&&v.animate({d:v.point.haloPath(0)}),this.state=t)},haloPath:function(t){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-t,this.plotY-t,2*t,2*t)}}),u(y.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&c(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,n=e.tooltip,i=e.hoverPoint;e.hoverSeries=null,i&&i.onMouseOut(),this&&t.events.mouseOut&&c(this,"mouseOut"),!n||this.stickyTracking||n.shared&&!this.noSharedTooltip||n.hide(),this.setState()},setState:function(t){var e=this,n=e.options,i=e.graph,r=n.states,o=n.lineWidth,n=0;if(t=t||"",e.state!==t&&(l([e.group,e.markerGroup,e.dataLabelsGroup],function(n){n&&(e.state&&n.removeClass("highcharts-series-"+e.state),t&&n.addClass("highcharts-series-"+t))}),e.state=t,!r[t]||!1!==r[t].enabled)&&(t&&(o=r[t].lineWidth||o+(r[t].lineWidthPlus||0)),i&&!i.dashstyle))for(o={"stroke-width":o},i.animate(o,m(e.chart.options.chart.animation,r[t]&&r[t].animation));e["zone-graph-"+n];)e["zone-graph-"+n].attr(o),n+=1},setVisible:function(t,e){var n,i=this,r=i.chart,o=i.legendItem,a=r.options.chart.ignoreHiddenSeries,s=i.visible;n=(i.visible=t=i.options.visible=i.userOptions.visible=void 0===t?!s:t)?"show":"hide",l(["group","dataLabelsGroup","markerGroup","tracker","tt"],function(t){i[t]&&i[t][n]()}),r.hoverSeries!==i&&(r.hoverPoint&&r.hoverPoint.series)!==i||i.onMouseOut(),o&&r.legend.colorizeItem(i,t),i.isDirty=!0,i.options.stacking&&l(r.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),l(i.linkedSeries,function(e){e.setVisible(t,!1)}),a&&(r.isDirtyBox=!0),!1!==e&&r.redraw(),c(i,n)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=void 0===t?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),c(this,t?"select":"unselect")},drawTracker:e.drawTrackerGraph})}(t),function(t){var e=t.Chart,n=t.each,i=t.inArray,r=t.isArray,o=t.isObject,a=t.pick,s=t.splat;e.prototype.setResponsive=function(e){var i=this.options.responsive,r=[],o=this.currentResponsive;i&&i.rules&&n(i.rules,function(n){void 0===n._id&&(n._id=t.uniqueKey()),this.matchResponsiveRule(n,r,e)},this);var a=t.merge.apply(0,t.map(r,function(e){return t.find(i.rules,function(t){return t._id===e}).chartOptions})),r=r.toString()||void 0;r!==(o&&o.ruleIds)&&(o&&this.update(o.undoOptions,e),r?(this.currentResponsive={ruleIds:r,mergedOptions:a,undoOptions:this.currentOptions(a)},this.update(a,e)):this.currentResponsive=void 0)},e.prototype.matchResponsiveRule=function(t,e){var n=t.condition;(n.callback||function(){return this.chartWidth<=a(n.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=a(n.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=a(n.minWidth,0)&&this.chartHeight>=a(n.minHeight,0)}).call(this)&&e.push(t._id)},e.prototype.currentOptions=function(e){function n(e,a,l,u){var c;t.objectEach(e,function(t,h){if(!u&&-1<i(h,["series","xAxis","yAxis"]))for(e[h]=s(e[h]),l[h]=[],c=0;c<e[h].length;c++)a[h][c]&&(l[h][c]={},n(t[c],a[h][c],l[h][c],u+1));else o(t)?(l[h]=r(t)?[]:{},n(t,a[h]||{},l[h],u+1)):l[h]=a[h]||null})}var a={};return n(e,this.options,a,0),a}}(t),t}),function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){!function(t){function e(t,e){this.init(t,e)}var n=t.CenteredSeriesMixin,i=t.each,r=t.extend,o=t.merge,a=t.splat;r(e.prototype,{coll:"pane",init:function(t,e){this.chart=e,this.background=[],e.pane.push(this),this.setOptions(t)},setOptions:function(t){this.options=o(this.defaultOptions,this.chart.angular?{background:{}}:void 0,t)},render:function(){var t=this.options,e=this.options.background,n=this.chart.renderer;if(this.group||(this.group=n.g("pane-group").attr({zIndex:t.zIndex||0}).add()),this.updateCenter(),e)for(e=a(e),t=Math.max(e.length,this.background.length||0),n=0;n<t;n++)e[n]&&this.axis?this.renderBackground(o(this.defaultBackgroundOptions,e[n]),n):this.background[n]&&(this.background[n]=this.background[n].destroy(),this.background.splice(n,1))},renderBackground:function(t,e){var n="animate";this.background[e]||(this.background[e]=this.chart.renderer.path().add(this.group),n="attr"),this.background[e][n]({d:this.axis.getPlotBandPath(t.from,t.to,t)}).attr({fill:t.backgroundColor,stroke:t.borderColor,"stroke-width":t.borderWidth,"class":"highcharts-pane "+(t.className||"")})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"},updateCenter:function(t){this.center=(t||this.axis||{}).center=n.getCenter.call(this)},update:function(t,e){o(!0,this.options,t),this.setOptions(this.options),this.render(),i(this.chart.axes,function(t){t.pane===this&&(t.pane=null,t.update({},e))},this)}}),t.Pane=e}(t),function(t){var e,n,i=t.each,r=t.extend,o=t.map,a=t.merge,s=t.noop,l=t.pick,u=t.pInt,c=t.wrap,h=t.Axis.prototype;t=t.Tick.prototype,e={getOffset:s,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:s,setCategories:s,setTitle:s},n={defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(t){t=this.options=a(this.defaultOptions,this.defaultRadialOptions,t),t.plotBands||(t.plotBands=[])},getOffset:function(){h.getOffset.call(this),this.chart.axisOffset[this.side]=0},getLinePath:function(t,e){t=this.center;var n=this.chart,i=l(e,t[2]/2-this.offset);return this.isCircular||void 0!==e?e=this.chart.renderer.symbols.arc(this.left+t[0],this.top+t[1],i,i,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0}):(e=this.postTranslate(this.angleRad,i),e=["M",t[0]+n.plotLeft,t[1]+n.plotTop,"L",e.x,e.y]),e},setAxisTranslation:function(){h.setAxisTranslation.call(this),this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)},beforeSetTickPositions:function(){(this.autoConnect=this.isCircular&&void 0===l(this.userMax,this.options.max)&&this.endAngleRad-this.startAngleRad===2*Math.PI)&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)},setAxisSize:function(){h.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*l(this.sector,1)/2)},getPosition:function(t,e){return this.postTranslate(this.isCircular?this.translate(t):this.angleRad,l(this.isCircular?e:this.translate(t),this.center[2]/2)-this.offset)},postTranslate:function(t,e){var n=this.chart,i=this.center;return t=this.startAngleRad+t,{x:n.plotLeft+i[0]+Math.cos(t)*e,y:n.plotTop+i[1]+Math.sin(t)*e}},getPlotBandPath:function(t,e,n){var i,r=this.center,a=this.startAngleRad,s=r[2]/2,c=[l(n.outerRadius,"100%"),n.innerRadius,l(n.thickness,10)],h=Math.min(this.offset,0),d=/%$/,f=this.isCircular;return"polygon"===this.options.gridLineInterpolation?r=this.getPlotLinePath(t).concat(this.getPlotLinePath(e,!0)):(t=Math.max(t,this.min),e=Math.min(e,this.max),f||(c[0]=this.translate(t),c[1]=this.translate(e)),c=o(c,function(t){return d.test(t)&&(t=u(t,10)*s/100),t}),"circle"!==n.shape&&f?(t=a+this.translate(t),e=a+this.translate(e)):(t=-Math.PI/2,e=1.5*Math.PI,
i=!0),c[0]-=h,c[2]-=h,r=this.chart.renderer.symbols.arc(this.left+r[0],this.top+r[1],c[0],c[0],{start:Math.min(t,e),end:Math.max(t,e),innerR:l(c[1],c[0]-c[2]),open:i})),r},getPlotLinePath:function(t,e){var n,r,o,a=this,s=a.center,l=a.chart,u=a.getPosition(t);return a.isCircular?o=["M",s[0]+l.plotLeft,s[1]+l.plotTop,"L",u.x,u.y]:"circle"===a.options.gridLineInterpolation?(t=a.translate(t))&&(o=a.getLinePath(0,t)):(i(l.xAxis,function(t){t.pane===a.pane&&(n=t)}),o=[],t=a.translate(t),s=n.tickPositions,n.autoConnect&&(s=s.concat([s[0]])),e&&(s=[].concat(s).reverse()),i(s,function(e,i){r=n.getPosition(e,t),o.push(i?"L":"M",r.x,r.y)})),o},getTitlePosition:function(){var t=this.center,e=this.chart,n=this.options.title;return{x:e.plotLeft+t[0]+(n.x||0),y:e.plotTop+t[1]-{high:.5,middle:.25,low:0}[n.align]*t[2]+(n.y||0)}}},c(h,"init",function(t,i,o){var s,u=i.angular,c=i.polar,h=o.isX,d=u&&h,f=i.options,p=this.pane=i.pane[o.pane||0],g=p.options;u?(r(this,d?e:n),(s=!h)&&(this.defaultRadialOptions=this.defaultRadialGaugeOptions)):c&&(r(this,n),this.defaultRadialOptions=(s=h)?this.defaultRadialXOptions:a(this.defaultYAxisOptions,this.defaultRadialYOptions)),u||c?(this.isRadial=!0,i.inverted=!1,f.chart.zoomType=null):this.isRadial=!1,s&&(p.axis=this),t.call(this,i,o),d||!u&&!c||(t=this.options,this.angleRad=(t.angle||0)*Math.PI/180,this.startAngleRad=(g.startAngle-90)*Math.PI/180,this.endAngleRad=(l(g.endAngle,g.startAngle+360)-90)*Math.PI/180,this.offset=t.offset||0,this.isCircular=s)}),c(h,"autoLabelAlign",function(t){if(!this.isRadial)return t.apply(this,[].slice.call(arguments,1))}),c(t,"getPosition",function(t,e,n,i,r){var o=this.axis;return o.getPosition?o.getPosition(n):t.call(this,e,n,i,r)}),c(t,"getLabelPosition",function(t,e,n,i,r,o,a,s,u){var c=this.axis,h=o.y,d=20,f=o.align,p=(c.translate(this.pos)+c.startAngleRad+Math.PI/2)/Math.PI*180%360;return c.isRadial?(t=c.getPosition(this.pos,c.center[2]/2+l(o.distance,-25)),"auto"===o.rotation?i.attr({rotation:p}):null===h&&(h=c.chart.renderer.fontMetrics(i.styles.fontSize).b-i.getBBox().height/2),null===f&&(c.isCircular?(this.label.getBBox().width>c.len*c.tickInterval/(c.max-c.min)&&(d=0),f=p>d&&p<180-d?"left":p>180+d&&p<360-d?"right":"center"):f="center",i.attr({align:f})),t.x+=o.x,t.y+=h):t=t.call(this,e,n,i,r,o,a,s,u),t}),c(t,"getMarkPath",function(t,e,n,i,r,o,a){var s=this.axis;return s.isRadial?(t=s.getPosition(this.pos,s.center[2]/2+i),e=["M",e,n,"L",t.x,t.y]):e=t.call(this,e,n,i,r,o,a),e})}(t),function(t){var e=t.each,n=t.pick,i=t.defined,r=t.seriesType,o=t.seriesTypes,a=t.Series.prototype,s=t.Point.prototype;r("arearange","area",{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0}},{pointArrayMap:["low","high"],dataLabelCollections:["dataLabel","dataLabelUpper"],toYData:function(t){return[t.low,t.high]},pointValKey:"low",deferTranslatePolar:!0,highToXY:function(t){var e=this.chart,n=this.xAxis.postTranslate(t.rectPlotX,this.yAxis.len-t.plotHigh);t.plotHighX=n.x-e.plotLeft,t.plotHigh=n.y-e.plotTop,t.plotLowX=t.plotX},translate:function(){var t=this,n=t.yAxis,i=!!t.modifyValue;o.area.prototype.translate.apply(t),e(t.points,function(e){var r=e.low,o=e.high,a=e.plotY;null===o||null===r?(e.isNull=!0,e.plotY=null):(e.plotLow=a,e.plotHigh=n.translate(i?t.modifyValue(o,e):o,0,1,0,1),i&&(e.yBottom=e.plotHigh))}),this.chart.polar&&e(this.points,function(e){t.highToXY(e),e.tooltipPos=[(e.plotHighX+e.plotLowX)/2,(e.plotHigh+e.plotLow)/2]})},getGraphPath:function(t){var e,i,r,a,s=[],l=[],u=o.area.prototype.getGraphPath;a=this.options;var c=this.chart.polar&&!1!==a.connectEnds,h=a.connectNulls,d=a.step;for(t=t||this.points,e=t.length;e--;)i=t[e],i.isNull||c||h||t[e+1]&&!t[e+1].isNull||l.push({plotX:i.plotX,plotY:i.plotY,doCurve:!1}),r={polarPlotY:i.polarPlotY,rectPlotX:i.rectPlotX,yBottom:i.yBottom,plotX:n(i.plotHighX,i.plotX),plotY:i.plotHigh,isNull:i.isNull},l.push(r),s.push(r),i.isNull||c||h||t[e-1]&&!t[e-1].isNull||l.push({plotX:i.plotX,plotY:i.plotY,doCurve:!1});return t=u.call(this,t),d&&(!0===d&&(d="left"),a.step={left:"right",center:"center",right:"left"}[d]),s=u.call(this,s),l=u.call(this,l),a.step=d,a=[].concat(t,s),this.chart.polar||"M"!==l[0]||(l[0]="L"),this.graphPath=a,this.areaPath=this.areaPath.concat(t,l),a.isArea=!0,a.xMap=t.xMap,this.areaPath.xMap=t.xMap,a},drawDataLabels:function(){var t,e,n,i=this.data,r=i.length,o=[],s=this.options.dataLabels,l=s.align,u=s.verticalAlign,c=s.inside,h=this.chart.inverted;if(s.enabled||this._hasPointLabels){for(t=r;t--;)(e=i[t])&&(n=c?e.plotHigh<e.plotLow:e.plotHigh>e.plotLow,e.y=e.high,e._plotY=e.plotY,e.plotY=e.plotHigh,o[t]=e.dataLabel,e.dataLabel=e.dataLabelUpper,e.below=n,h?l||(s.align=n?"right":"left"):u||(s.verticalAlign=n?"top":"bottom"),s.x=s.xHigh,s.y=s.yHigh);for(a.drawDataLabels&&a.drawDataLabels.apply(this,arguments),t=r;t--;)(e=i[t])&&(n=c?e.plotHigh<e.plotLow:e.plotHigh>e.plotLow,e.dataLabelUpper=e.dataLabel,e.dataLabel=o[t],e.y=e.low,e.plotY=e._plotY,e.below=!n,h?l||(s.align=n?"left":"right"):u||(s.verticalAlign=n?"bottom":"top"),s.x=s.xLow,s.y=s.yLow);a.drawDataLabels&&a.drawDataLabels.apply(this,arguments)}s.align=l,s.verticalAlign=u},alignDataLabel:function(){o.column.prototype.alignDataLabel.apply(this,arguments)},drawPoints:function(){var t,e,n=this.points.length;for(a.drawPoints.apply(this,arguments),e=0;e<n;)t=this.points[e],t.lowerGraphic=t.graphic,t.graphic=t.upperGraphic,t._plotY=t.plotY,t._plotX=t.plotX,t.plotY=t.plotHigh,i(t.plotHighX)&&(t.plotX=t.plotHighX),e++;for(a.drawPoints.apply(this,arguments),e=0;e<n;)t=this.points[e],t.upperGraphic=t.graphic,t.graphic=t.lowerGraphic,t.plotY=t._plotY,t.plotX=t._plotX,e++},setStackedPoints:t.noop},{setState:function(){var t=this.state,e=this.series,n=e.chart.polar;i(this.plotHigh)||(this.plotHigh=e.yAxis.toPixels(this.high,!0)),i(this.plotLow)||(this.plotLow=this.plotY=e.yAxis.toPixels(this.low,!0)),s.setState.apply(this,arguments),this.graphic=this.upperGraphic,this.plotY=this.plotHigh,n&&(this.plotX=this.plotHighX),this.state=t,e.stateMarkerGraphic&&(e.lowerStateMarkerGraphic=e.stateMarkerGraphic,e.stateMarkerGraphic=e.upperStateMarkerGraphic),s.setState.apply(this,arguments),this.plotY=this.plotLow,this.graphic=this.lowerGraphic,n&&(this.plotX=this.plotLowX),e.stateMarkerGraphic&&(e.upperStateMarkerGraphic=e.stateMarkerGraphic,e.stateMarkerGraphic=e.lowerStateMarkerGraphic)},haloPath:function(){var t,e=this.series.chart.polar;return this.plotY=this.plotLow,e&&(this.plotX=this.plotLowX),t=s.haloPath.apply(this,arguments),this.plotY=this.plotHigh,e&&(this.plotX=this.plotHighX),t=t.concat(s.haloPath.apply(this,arguments))},destroy:function(){return this.upperGraphic&&(this.upperGraphic=this.upperGraphic.destroy()),s.destroy.apply(this,arguments)}})}(t),function(t){var e=t.seriesType;e("areasplinerange","arearange",null,{getPointSpline:t.seriesTypes.spline.prototype.getPointSpline})}(t),function(t){var e=t.defaultPlotOptions,n=t.each,i=t.merge,r=t.noop,o=t.pick,a=t.seriesType,s=t.seriesTypes.column.prototype;a("columnrange","arearange",i(e.column,e.arearange,{lineWidth:1,pointRange:null,marker:null,states:{hover:{halo:!1}}}),{translate:function(){var t,e,i=this,r=i.yAxis,a=i.xAxis,l=a.startAngleRad,u=i.chart,c=i.xAxis.isRadial,h=Math.max(u.chartWidth,u.chartHeight)+999;s.translate.apply(i),n(i.points,function(n){var s,d,f=n.shapeArgs,p=i.options.minPointLength;n.plotHigh=e=Math.min(Math.max(-h,r.translate(n.high,0,1,0,1)),h),n.plotLow=Math.min(Math.max(-h,n.plotY),h),d=e,s=o(n.rectPlotY,n.plotY)-e,Math.abs(s)<p?(p-=s,s+=p,d-=p/2):0>s&&(s*=-1,d-=s),c?(t=n.barX+l,n.shapeType="path",n.shapeArgs={d:i.polarArc(d+s,d,t,t+n.pointWidth)}):(f.height=s,f.y=d,n.tooltipPos=u.inverted?[r.len+r.pos-u.plotLeft-d-s/2,a.len+a.pos-u.plotTop-f.x-f.width/2,s]:[a.left-u.plotLeft+f.x+f.width/2,r.pos-u.plotTop+d+s/2,s])})},directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:r,getSymbol:r,crispCol:s.crispCol,drawPoints:s.drawPoints,drawTracker:s.drawTracker,getColumnMetrics:s.getColumnMetrics,animate:function(){return s.animate.apply(this,arguments)},polarArc:function(){return s.polarArc.apply(this,arguments)},pointAttribs:s.pointAttribs},{setState:s.pointClass.prototype.setState})}(t),function(t){var e=t.each,n=t.isNumber,i=t.merge,r=t.pick,o=t.pInt,a=t.Series,s=t.seriesType,l=t.TrackerMixin;s("gauge","line",{dataLabels:{enabled:!0,defer:!1,y:15,borderRadius:3,crop:!1,verticalAlign:"top",zIndex:2,borderWidth:1,borderColor:"#cccccc"},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1},{angular:!0,directTouch:!0,drawGraph:t.noop,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var t=this.yAxis,a=this.options,s=t.center;this.generatePoints(),e(this.points,function(e){var l=i(a.dial,e.dial),u=o(r(l.radius,80))*s[2]/200,c=o(r(l.baseLength,70))*u/100,h=o(r(l.rearLength,10))*u/100,d=l.baseWidth||3,f=l.topWidth||1,p=a.overshoot,g=t.startAngleRad+t.translate(e.y,null,null,null,!0);n(p)?(p=p/180*Math.PI,g=Math.max(t.startAngleRad-p,Math.min(t.endAngleRad+p,g))):!1===a.wrap&&(g=Math.max(t.startAngleRad,Math.min(t.endAngleRad,g))),g=180*g/Math.PI,e.shapeType="path",e.shapeArgs={d:l.path||["M",-h,-d/2,"L",c,-d/2,u,-f/2,u,f/2,c,d/2,-h,d/2,"z"],translateX:s[0],translateY:s[1],rotation:g},e.plotX=s[0],e.plotY=s[1]})},drawPoints:function(){var t=this,n=t.yAxis.center,o=t.pivot,a=t.options,s=a.pivot,l=t.chart.renderer;e(t.points,function(e){var n=e.graphic,r=e.shapeArgs,o=r.d,s=i(a.dial,e.dial);n?(n.animate(r),r.d=o):(e.graphic=l[e.shapeType](r).attr({rotation:r.rotation,zIndex:1}).addClass("highcharts-dial").add(t.group),e.graphic.attr({stroke:s.borderColor||"none","stroke-width":s.borderWidth||0,fill:s.backgroundColor||"#000000"}))}),o?o.animate({translateX:n[0],translateY:n[1]}):(t.pivot=l.circle(0,0,r(s.radius,5)).attr({zIndex:2}).addClass("highcharts-pivot").translate(n[0],n[1]).add(t.group),t.pivot.attr({"stroke-width":s.borderWidth||0,stroke:s.borderColor||"#cccccc",fill:s.backgroundColor||"#000000"}))},animate:function(t){var n=this;t||(e(n.points,function(t){var e=t.graphic;e&&(e.attr({rotation:180*n.yAxis.startAngleRad/Math.PI}),e.animate({rotation:t.shapeArgs.rotation},n.options.animation))}),n.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),a.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:function(t,e){a.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),r(e,!0)&&this.chart.redraw()},drawTracker:l&&l.drawTrackerPoint},{setState:function(t){this.state=t}})}(t),function(t){var e=t.each,n=t.noop,i=t.pick,r=t.seriesType,o=t.seriesTypes;r("boxplot","column",{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,states:{hover:{brightness:-.3}},whiskerWidth:2},{pointArrayMap:["low","q1","median","q3","high"],toYData:function(t){return[t.low,t.q1,t.median,t.q3,t.high]},pointValKey:"high",pointAttribs:function(t){var e=this.options,n=t&&t.color||this.color;return{fill:t.fillColor||e.fillColor||n,stroke:e.lineColor||n,"stroke-width":e.lineWidth||0}},drawDataLabels:n,translate:function(){var t=this.yAxis,n=this.pointArrayMap;o.column.prototype.translate.apply(this),e(this.points,function(i){e(n,function(e){null!==i[e]&&(i[e+"Plot"]=t.translate(i[e],0,1,0,1))})})},drawPoints:function(){var t,n,r,o,a,s,l,u,c,h,d,f=this,p=f.options,g=f.chart.renderer,m=0,v=!1!==f.doQuartiles,y=f.options.whiskerLength;e(f.points,function(e){var b=e.graphic,w=b?"animate":"attr",x=e.shapeArgs,_={},k={},C={},S=e.color||f.color;void 0!==e.plotY&&(l=x.width,u=Math.floor(x.x),c=u+l,h=Math.round(l/2),t=Math.floor(v?e.q1Plot:e.lowPlot),n=Math.floor(v?e.q3Plot:e.lowPlot),r=Math.floor(e.highPlot),o=Math.floor(e.lowPlot),b||(e.graphic=b=g.g("point").add(f.group),e.stem=g.path().addClass("highcharts-boxplot-stem").add(b),y&&(e.whiskers=g.path().addClass("highcharts-boxplot-whisker").add(b)),v&&(e.box=g.path(void 0).addClass("highcharts-boxplot-box").add(b)),e.medianShape=g.path(void 0).addClass("highcharts-boxplot-median").add(b)),_.stroke=e.stemColor||p.stemColor||S,_["stroke-width"]=i(e.stemWidth,p.stemWidth,p.lineWidth),_.dashstyle=e.stemDashStyle||p.stemDashStyle,e.stem.attr(_),y&&(k.stroke=e.whiskerColor||p.whiskerColor||S,k["stroke-width"]=i(e.whiskerWidth,p.whiskerWidth,p.lineWidth),e.whiskers.attr(k)),v&&(b=f.pointAttribs(e),e.box.attr(b)),C.stroke=e.medianColor||p.medianColor||S,C["stroke-width"]=i(e.medianWidth,p.medianWidth,p.lineWidth),e.medianShape.attr(C),s=e.stem.strokeWidth()%2/2,m=u+h+s,e.stem[w]({d:["M",m,n,"L",m,r,"M",m,t,"L",m,o]}),v&&(s=e.box.strokeWidth()%2/2,t=Math.floor(t)+s,n=Math.floor(n)+s,u+=s,c+=s,e.box[w]({d:["M",u,n,"L",u,t,"L",c,t,"L",c,n,"L",u,n,"z"]})),y&&(s=e.whiskers.strokeWidth()%2/2,r+=s,o+=s,d=/%$/.test(y)?h*parseFloat(y)/100:y/2,e.whiskers[w]({d:["M",m-d,r,"L",m+d,r,"M",m-d,o,"L",m+d,o]})),a=Math.round(e.medianPlot),s=e.medianShape.strokeWidth()%2/2,a+=s,e.medianShape[w]({d:["M",u,a,"L",c,a]}))})},setStackedPoints:n})}(t),function(t){var e=t.each,n=t.noop,i=t.seriesType,r=t.seriesTypes;i("errorbar","boxplot",{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null},{type:"errorbar",pointArrayMap:["low","high"],toYData:function(t){return[t.low,t.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:r.arearange?function(){var t=this.pointValKey;r.arearange.prototype.drawDataLabels.call(this),e(this.data,function(e){e.y=e[t]})}:n,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||r.column.prototype.getColumnMetrics.call(this)}})}(t),function(t){var e=t.correctFloat,n=t.isNumber,i=t.pick,r=t.Point,o=t.Series,a=t.seriesType,s=t.seriesTypes;a("waterfall","column",{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}},{pointValKey:"y",translate:function(){var t,n,r,o,a,l,u,c,h,d,f,p=this.options,g=this.yAxis,m=i(p.minPointLength,5),v=m/2,y=p.threshold,b=p.stacking;for(s.column.prototype.translate.apply(this),c=h=y,n=this.points,t=0,p=n.length;t<p;t++)r=n[t],u=this.processedYData[t],o=r.shapeArgs,a=b&&g.stacks[(this.negStacks&&u<y?"-":"")+this.stackKey],f=this.getStackIndicator(f,r.x,this.index),d=a?a[r.x].points[f.key]:[0,u],r.isSum?r.y=e(u):r.isIntermediateSum&&(r.y=e(u-h)),l=Math.max(c,c+r.y)+d[0],o.y=g.translate(l,0,1,0,1),r.isSum?(o.y=g.translate(d[1],0,1,0,1),o.height=Math.min(g.translate(d[0],0,1,0,1),g.len)-o.y):r.isIntermediateSum?(o.y=g.translate(d[1],0,1,0,1),o.height=Math.min(g.translate(h,0,1,0,1),g.len)-o.y,h=d[1]):(o.height=0<u?g.translate(c,0,1,0,1)-o.y:g.translate(c,0,1,0,1)-g.translate(c-u,0,1,0,1),c+=a&&a[r.x]?a[r.x].total:u),0>o.height&&(o.y+=o.height,o.height*=-1),r.plotY=o.y=Math.round(o.y)-this.borderWidth%2/2,o.height=Math.max(Math.round(o.height),.001),r.yBottom=o.y+o.height,o.height<=m&&!r.isNull?(o.height=m,o.y-=v,r.plotY=o.y,r.minPointLengthOffset=0>r.y?-v:v):r.minPointLengthOffset=0,o=r.plotY+(r.negative?o.height:0),this.chart.inverted?r.tooltipPos[0]=g.len-o:r.tooltipPos[1]=o},processData:function(t){var n,i,r,a,s,l,u,c=this.yData,h=this.options.data,d=c.length;for(r=i=a=s=this.options.threshold||0,u=0;u<d;u++)l=c[u],n=h&&h[u]?h[u]:{},"sum"===l||n.isSum?c[u]=e(r):"intermediateSum"===l||n.isIntermediateSum?c[u]=e(i):(r+=l,i+=l),a=Math.min(r,a),s=Math.max(r,s);o.prototype.processData.call(this,t),this.options.stacking||(this.dataMin=a,this.dataMax=s)},toYData:function(t){return t.isSum?0===t.x?null:"sum":t.isIntermediateSum?0===t.x?null:"intermediateSum":t.y},pointAttribs:function(t,e){var n=this.options.upColor;return n&&!t.options.color&&(t.color=0<t.y?n:null),t=s.column.prototype.pointAttribs.call(this,t,e),delete t.dashstyle,t},getGraphPath:function(){return["M",0,0]},getCrispPath:function(){var t,e,n,i=this.data,r=i.length,o=this.graph.strokeWidth()+this.borderWidth,o=Math.round(o)%2/2,a=this.yAxis.reversed,s=[];for(n=1;n<r;n++)e=i[n].shapeArgs,t=i[n-1].shapeArgs,e=["M",t.x+t.width,t.y+i[n-1].minPointLengthOffset+o,"L",e.x,t.y+i[n-1].minPointLengthOffset+o],(0>i[n-1].y&&!a||0<i[n-1].y&&a)&&(e[2]+=t.height,e[5]+=t.height),s=s.concat(e);return s},drawGraph:function(){o.prototype.drawGraph.call(this),this.graph.attr({d:this.getCrispPath()})},setStackedPoints:function(){var t,e,n=this.options;for(o.prototype.setStackedPoints.apply(this,arguments),t=this.stackedYData?this.stackedYData.length:0,e=1;e<t;e++)n.data[e].isSum||n.data[e].isIntermediateSum||(this.stackedYData[e]+=this.stackedYData[e-1])},getExtremes:function(){if(this.options.stacking)return o.prototype.getExtremes.apply(this,arguments)}},{getClassName:function(){var t=r.prototype.getClassName.call(this);return this.isSum?t+=" highcharts-sum":this.isIntermediateSum&&(t+=" highcharts-intermediate-sum"),t},isValid:function(){return n(this.y,!0)||this.isSum||this.isIntermediateSum}})}(t),function(t){var e=t.Series,n=t.seriesType,i=t.seriesTypes;n("polygon","scatter",{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0},{type:"polygon",getGraphPath:function(){for(var t=e.prototype.getGraphPath.call(this),n=t.length+1;n--;)(n===t.length||"M"===t[n])&&0<n&&t.splice(n,0,"z");return this.areaPath=t},drawGraph:function(){this.options.fillColor=this.color,i.area.prototype.drawGraph.call(this)},drawLegendSymbol:t.LegendSymbolMixin.drawRectangle,drawTracker:e.prototype.drawTracker,setStackedPoints:t.noop})}(t),function(t){var e=t.arrayMax,n=t.arrayMin,i=t.Axis,r=t.color,o=t.each,a=t.isNumber,s=t.noop,l=t.pick,u=t.pInt,c=t.Point,h=t.Series,d=t.seriesType,f=t.seriesTypes;d("bubble","scatter",{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"},{pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",bubblePadding:!0,zoneAxis:"z",directTouch:!0,pointAttribs:function(t,e){var n=l(this.options.marker.fillOpacity,.5);return t=h.prototype.pointAttribs.call(this,t,e),1!==n&&(t.fill=r(t.fill).setOpacity(n).get("rgba")),t},getRadii:function(t,e,n,i){var r,o,a,s=this.zData,l=[],u=this.options,c="width"!==u.sizeBy,h=u.zThreshold,d=e-t;for(o=0,r=s.length;o<r;o++)a=s[o],u.sizeByAbsoluteValue&&null!==a&&(a=Math.abs(a-h),e=Math.max(e-h,Math.abs(t-h)),t=0),null===a?a=null:a<t?a=n/2-1:(a=0<d?(a-t)/d:.5,c&&0<=a&&(a=Math.sqrt(a)),a=Math.ceil(n+a*(i-n))/2),l.push(a);this.radii=l},animate:function(t){var e=this.options.animation;t||(o(this.points,function(t){var n,i=t.graphic;i&&i.width&&(n={x:i.x,y:i.y,width:i.width,height:i.height},i.attr({x:t.plotX,y:t.plotY,width:1,height:1}),i.animate(n,e))}),this.animate=null)},translate:function(){var e,n,i,r=this.data,o=this.radii;for(f.scatter.prototype.translate.call(this),e=r.length;e--;)n=r[e],i=o?o[e]:0,a(i)&&i>=this.minPxSize/2?(n.marker=t.extend(n.marker,{radius:i,width:2*i,height:2*i}),n.dlBox={x:n.plotX-i,y:n.plotY-i,width:2*i,height:2*i}):n.shapeArgs=n.plotY=n.dlBox=void 0},alignDataLabel:f.column.prototype.alignDataLabel,buildKDTree:s,applyZones:s},{haloPath:function(t){return c.prototype.haloPath.call(this,0===t?0:(this.marker?this.marker.radius||0:0)+t)},ttBelow:!1}),i.prototype.beforePadding=function(){var t=this,i=this.len,r=this.chart,s=0,c=i,h=this.isXAxis,d=h?"xData":"yData",f=this.min,p={},g=Math.min(r.plotWidth,r.plotHeight),m=Number.MAX_VALUE,v=-Number.MAX_VALUE,y=this.max-f,b=i/y,w=[];o(this.series,function(i){var a=i.options;!i.bubblePadding||!i.visible&&r.options.chart.ignoreHiddenSeries||(t.allowZoomOutside=!0,w.push(i),h&&(o(["minSize","maxSize"],function(t){var e=a[t],n=/%$/.test(e),e=u(e);p[t]=n?g*e/100:e}),i.minPxSize=p.minSize,i.maxPxSize=Math.max(p.maxSize,p.minSize),i=i.zData,i.length&&(m=l(a.zMin,Math.min(m,Math.max(n(i),!1===a.displayNegative?a.zThreshold:-Number.MAX_VALUE))),v=l(a.zMax,Math.max(v,e(i))))))}),o(w,function(e){var n,i=e[d],r=i.length;if(h&&e.getRadii(m,v,e.minPxSize,e.maxPxSize),0<y)for(;r--;)a(i[r])&&t.dataMin<=i[r]&&i[r]<=t.dataMax&&(n=e.radii[r],s=Math.min((i[r]-f)*b-n,s),c=Math.max((i[r]-f)*b+n,c))}),w.length&&0<y&&!this.isLog&&(c-=i,b*=(i+s-c)/i,o([["min","userMin",s],["max","userMax",c]],function(e){void 0===l(t.options[e[0]],t[e[1]])&&(t[e[0]]+=e[2]/b)}))}}(t),function(t){function e(t,e){var n=this.chart,i=this.options.animation,r=this.group,o=this.markerGroup,a=this.xAxis.center,s=n.plotLeft,l=n.plotTop;n.polar?n.renderer.isSVG&&(!0===i&&(i={}),e?(t={translateX:a[0]+s,translateY:a[1]+l,scaleX:.001,scaleY:.001},r.attr(t),o&&o.attr(t)):(t={translateX:s,translateY:l,scaleX:1,scaleY:1},r.animate(t,i),o&&o.animate(t,i),this.animate=null)):t.call(this,e)}var n=t.each,i=t.pick,r=t.seriesTypes,o=t.wrap,a=t.Series.prototype,s=t.Pointer.prototype;a.searchPointByAngle=function(t){var e=this.chart,n=this.xAxis.pane.center;return this.searchKDTree({clientX:180+-180/Math.PI*Math.atan2(t.chartX-n[0]-e.plotLeft,t.chartY-n[1]-e.plotTop)})},a.getConnectors=function(t,e,n,i){var r,o,a,s,l,u,c,h;return o=i?1:0,r=0<=e&&e<=t.length-1?e:0>e?t.length-1+e:0,e=0>r-1?t.length-(1+o):r-1,o=r+1>t.length-1?o:r+1,a=t[e],o=t[o],s=a.plotX,a=a.plotY,l=o.plotX,u=o.plotY,o=t[r].plotX,r=t[r].plotY,s=(1.5*o+s)/2.5,a=(1.5*r+a)/2.5,l=(1.5*o+l)/2.5,c=(1.5*r+u)/2.5,u=Math.sqrt(Math.pow(s-o,2)+Math.pow(a-r,2)),h=Math.sqrt(Math.pow(l-o,2)+Math.pow(c-r,2)),s=Math.atan2(a-r,s-o),c=Math.PI/2+(s+Math.atan2(c-r,l-o))/2,Math.abs(s-c)>Math.PI/2&&(c-=Math.PI),s=o+Math.cos(c)*u,a=r+Math.sin(c)*u,l=o+Math.cos(Math.PI+c)*h,c=r+Math.sin(Math.PI+c)*h,o={rightContX:l,rightContY:c,leftContX:s,leftContY:a,plotX:o,plotY:r},n&&(o.prevPointCont=this.getConnectors(t,e,!1,i)),o},o(a,"buildKDTree",function(t){this.chart.polar&&(this.kdByAngle?this.searchPoint=this.searchPointByAngle:this.options.findNearestPointBy="xy"),t.apply(this)}),a.toXY=function(t){var e,n=this.chart,i=t.plotX;e=t.plotY,t.rectPlotX=i,t.rectPlotY=e,e=this.xAxis.postTranslate(t.plotX,this.yAxis.len-e),t.plotX=t.polarPlotX=e.x-n.plotLeft,t.plotY=t.polarPlotY=e.y-n.plotTop,this.kdByAngle?(n=(i/Math.PI*180+this.xAxis.pane.options.startAngle)%360,0>n&&(n+=360),t.clientX=n):t.clientX=t.plotX},r.spline&&(o(r.spline.prototype,"getPointSpline",function(t,e,n,i){return this.chart.polar?i?(t=this.getConnectors(e,i,!0,this.connectEnds),t=["C",t.prevPointCont.rightContX,t.prevPointCont.rightContY,t.leftContX,t.leftContY,t.plotX,t.plotY]):t=["M",n.plotX,n.plotY]:t=t.call(this,e,n,i),t}),r.areasplinerange&&(r.areasplinerange.prototype.getPointSpline=r.spline.prototype.getPointSpline)),o(a,"translate",function(t){var e=this.chart;if(t.call(this),e.polar&&(this.kdByAngle=e.tooltip&&e.tooltip.shared,!this.preventPostTranslate))for(t=this.points,e=t.length;e--;)this.toXY(t[e])}),o(a,"getGraphPath",function(t,e){var i,r,o,a=this;if(this.chart.polar){for(e=e||this.points,i=0;i<e.length;i++)if(!e[i].isNull){r=i;break}!1!==this.options.connectEnds&&void 0!==r&&(this.connectEnds=!0,e.splice(e.length,0,e[r]),o=!0),n(e,function(t){void 0===t.polarPlotY&&a.toXY(t)})}return i=t.apply(this,[].slice.call(arguments,1)),o&&e.pop(),i}),o(a,"animate",e),r.column&&(r=r.column.prototype,r.polarArc=function(t,e,n,r){var o=this.xAxis.center,a=this.yAxis.len;return this.chart.renderer.symbols.arc(o[0],o[1],a-e,null,{start:n,end:r,innerR:a-i(t,a)})},o(r,"animate",e),o(r,"translate",function(t){var e,n,i,r=this.xAxis,o=r.startAngleRad;if(this.preventPostTranslate=!0,t.call(this),r.isRadial)for(e=this.points,i=e.length;i--;)n=e[i],t=n.barX+o,n.shapeType="path",n.shapeArgs={d:this.polarArc(n.yBottom,n.plotY,t,t+n.pointWidth)},this.toXY(n),n.tooltipPos=[n.plotX,n.plotY],n.ttBelow=n.plotY>r.center[1]}),o(r,"alignDataLabel",function(t,e,n,i,r,o){this.chart.polar?(t=e.rectPlotX/Math.PI*180,null===i.align&&(i.align=20<t&&160>t?"left":200<t&&340>t?"right":"center"),null===i.verticalAlign&&(i.verticalAlign=45>t||315<t?"bottom":135<t&&225>t?"top":"middle"),a.alignDataLabel.call(this,e,n,i,r,o)):t.call(this,e,n,i,r,o)})),o(s,"getCoordinates",function(t,e){var i=this.chart,r={xAxis:[],yAxis:[]};return i.polar?n(i.axes,function(t){var n=t.isXAxis,o=t.center,a=e.chartX-o[0]-i.plotLeft,o=e.chartY-o[1]-i.plotTop;r[n?"xAxis":"yAxis"].push({axis:t,value:t.translate(n?Math.PI-Math.atan2(a,o):Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),!0)})}):r=t.call(this,e),r}),o(t.Chart.prototype,"getAxes",function(e){this.pane||(this.pane=[]),n(t.splat(this.options.pane),function(e){new t.Pane(e,this)},this),e.call(this)}),o(t.Chart.prototype,"drawChartBox",function(t){t.call(this),n(this.pane,function(t){t.render()})}),o(t.Chart.prototype,"get",function(e,n){return t.find(this.pane,function(t){return t.options.id===n})||e.call(this,n)})}(t)}),function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){!function(t){var e=t.Axis,n=t.each,i=t.pick;t=t.wrap,t(e.prototype,"getSeriesExtremes",function(t){var e,r,o,a=this.isXAxis,s=[];a&&n(this.series,function(t,e){t.useMapGeometry&&(s[e]=t.xData,t.xData=[])}),t.call(this),a&&(e=i(this.dataMin,Number.MAX_VALUE),r=i(this.dataMax,-Number.MAX_VALUE),n(this.series,function(t,n){t.useMapGeometry&&(e=Math.min(e,i(t.minX,e)),r=Math.max(r,i(t.maxX,r)),t.xData=s[n],o=!0)}),o&&(this.dataMin=e,this.dataMax=r))}),t(e.prototype,"setAxisTranslation",function(t){var e,i=this.chart,r=i.plotWidth/i.plotHeight,i=i.xAxis[0];t.call(this),"yAxis"===this.coll&&void 0!==i.transA&&n(this.series,function(t){t.preserveAspectRatio&&(e=!0)}),e&&(this.transA=i.transA=Math.min(this.transA,i.transA),t=r/((i.max-i.min)/(this.max-this.min)),t=1>t?this:i,r=(t.max-t.min)*t.transA,t.pixelPadding=t.len-r,t.minPixelPadding=t.pixelPadding/2,r=t.fixTo)&&(r=r[1]-t.toValue(r[0],!0),r*=t.transA,(Math.abs(r)>t.minPixelPadding||t.min===t.dataMin&&t.max===t.dataMax)&&(r=0),t.minPixelPadding-=r)}),t(e.prototype,"render",function(t){t.call(this),this.fixTo=null})}(t),function(t){var e,n=t.Axis,i=t.Chart,r=t.color,o=t.each,a=t.extend,s=t.isNumber,l=t.Legend,u=t.LegendSymbolMixin,c=t.noop,h=t.merge,d=t.pick,f=t.wrap;e=t.ColorAxis=function(){this.init.apply(this,arguments)},a(e.prototype,n.prototype),a(e.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0},keepProps:["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"].concat(n.prototype.keepProps),init:function(t,e){var i,r="vertical"!==t.options.legend.layout;this.coll="colorAxis",i=h(this.defaultColorAxisOptions,{side:r?2:1,reversed:!r},e,{opposite:!r,showEmpty:!1,title:null}),n.prototype.init.call(this,t,i),e.dataClasses&&this.initDataClasses(e),this.initStops(),this.horiz=r,this.zoomEnabled=!1,this.defaultLegendLength=200},initDataClasses:function(t){var e,n=this.chart,i=0,a=n.options.chart.colorCount,s=this.options,l=t.dataClasses.length;this.dataClasses=e=[],this.legendItems=[],o(t.dataClasses,function(t,o){t=h(t),e.push(t),t.color||("category"===s.dataClassColor?(o=n.options.colors,a=o.length,t.color=o[i],t.colorIndex=i,i++,i===a&&(i=0)):t.color=r(s.minColor).tweenTo(r(s.maxColor),2>l?.5:o/(l-1)))})},setTickPositions:function(){if(!this.dataClasses)return n.prototype.setTickPositions.call(this)},initStops:function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]],o(this.stops,function(t){t.color=r(t[1])})},setOptions:function(t){n.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker},setAxisSize:function(){var t,e,n=this.legendSymbol,i=this.chart,r=i.options.legend||{};n?(this.left=r=n.attr("x"),this.top=t=n.attr("y"),this.width=e=n.attr("width"),this.height=n=n.attr("height"),this.right=i.chartWidth-r-e,this.bottom=i.chartHeight-t-n,this.len=this.horiz?e:n,this.pos=this.horiz?r:t):this.len=(this.horiz?r.symbolWidth:r.symbolHeight)||this.defaultLegendLength},normalizedValue:function(t){return this.isLog&&(t=this.val2lin(t)),1-(this.max-t)/(this.max-this.min||1)},toColor:function(t,e){var n,i,r,o,a=this.stops,s=this.dataClasses;if(s){for(o=s.length;o--;)if(r=s[o],n=r.from,a=r.to,(void 0===n||t>=n)&&(void 0===a||t<=a)){i=r.color,e&&(e.dataClass=o,e.colorIndex=r.colorIndex);break}}else{for(t=this.normalizedValue(t),o=a.length;o--&&!(t>a[o][0]););n=a[o]||a[o+1],a=a[o+1]||n,t=1-(a[0]-t)/(a[0]-n[0]||1),i=n.color.tweenTo(a.color,t)}return i},getOffset:function(){var t=this.legendGroup,e=this.chart.axisOffset[this.side];t&&(this.axisParent=t,n.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=e)},setLegendColor:function(){var t,e=this.reversed;t=e?1:0,e=e?0:1,t=this.horiz?[t,0,e,0]:[0,e,0,t],this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:this.stops}},drawLegendSymbol:function(t,e){var n=t.padding,i=t.options,r=this.horiz,o=d(i.symbolWidth,r?this.defaultLegendLength:12),a=d(i.symbolHeight,r?12:this.defaultLegendLength),s=d(i.labelPadding,r?16:30),i=d(i.itemDistance,10);this.setLegendColor(),e.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,o,a).attr({zIndex:1}).add(e.legendGroup),this.legendItemWidth=o+n+(r?i:s),this.legendItemHeight=a+n+(r?s:0)},setState:c,visible:!0,setVisible:c,getSeriesExtremes:function(){var t=this.series,e=t.length;for(this.dataMin=1/0,this.dataMax=-(1/0);e--;)void 0!==t[e].valueMin&&(this.dataMin=Math.min(this.dataMin,t[e].valueMin),this.dataMax=Math.max(this.dataMax,t[e].valueMax))},drawCrosshair:function(t,e){var i,r=e&&e.plotX,o=e&&e.plotY,a=this.pos,s=this.len;e&&(i=this.toPixels(e[e.series.colorKey]),i<a?i=a-2:i>a+s&&(i=a+s+2),e.plotX=i,e.plotY=this.len-i,n.prototype.drawCrosshair.call(this,t,e),e.plotX=r,e.plotY=o,this.cross&&(this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup),this.cross.attr({fill:this.crosshair.color})))},getPlotLinePath:function(t,e,i,r,o){return s(o)?this.horiz?["M",o-4,this.top-6,"L",o+4,this.top-6,o,this.top,"Z"]:["M",this.left,o,"L",this.left-6,o+6,this.left-6,o-6,"Z"]:n.prototype.getPlotLinePath.call(this,t,e,i,r)},update:function(t,e){var i=this.chart,r=i.legend;o(this.series,function(t){t.isDirtyData=!0}),t.dataClasses&&r.allItems&&(o(r.allItems,function(t){t.isDataClass&&t.legendGroup&&t.legendGroup.destroy()}),i.isDirtyLegend=!0),i.options[this.coll]=h(this.userOptions,t),n.prototype.update.call(this,t,e),this.legendItem&&(this.setLegendColor(),r.colorizeItem(this,!0))},remove:function(){this.legendItem&&this.chart.legend.destroyItem(this),n.prototype.remove.call(this)},getDataClassLegendSymbols:function(){var e,n=this,i=this.chart,r=this.legendItems,s=i.options.legend,l=s.valueDecimals,h=s.valueSuffix||"";return r.length||o(this.dataClasses,function(s,d){var f=!0,p=s.from,g=s.to;e="",void 0===p?e="< ":void 0===g&&(e="> "),void 0!==p&&(e+=t.numberFormat(p,l)+h),void 0!==p&&void 0!==g&&(e+=" - "),void 0!==g&&(e+=t.numberFormat(g,l)+h),r.push(a({chart:i,name:e,options:{},drawLegendSymbol:u.drawRectangle,visible:!0,setState:c,isDataClass:!0,setVisible:function(){f=this.visible=!f,o(n.series,function(t){o(t.points,function(t){
t.dataClass===d&&t.setVisible(f)})}),i.legend.colorizeItem(this,f)}},s))}),r},name:""}),o(["fill","stroke"],function(e){t.Fx.prototype[e+"Setter"]=function(){this.elem.attr(e,r(this.start).tweenTo(r(this.end),this.pos),null,!0)}}),f(i.prototype,"getAxes",function(t){var n=this.options.colorAxis;t.call(this),this.colorAxis=[],n&&new e(this,n)}),f(l.prototype,"getAllItems",function(t){var e=[],n=this.chart.colorAxis[0];return n&&n.options&&(n.options.showInLegend&&(n.options.dataClasses?e=e.concat(n.getDataClassLegendSymbols()):e.push(n)),o(n.series,function(t){t.options.showInLegend=!1})),e.concat(t.call(this))}),f(l.prototype,"colorizeItem",function(t,e,n){t.call(this,e,n),n&&e.legendColor&&e.legendSymbol.attr({fill:e.legendColor})}),f(l.prototype,"update",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.colorAxis[0]&&this.chart.colorAxis[0].update({},arguments[2])})}(t),function(t){var e=t.defined,n=t.each,i=t.noop,r=t.seriesTypes;t.colorPointMixin={isValid:function(){return null!==this.value},setVisible:function(t){var e=this,i=t?"show":"hide";n(["graphic","dataLabel"],function(t){e[t]&&e[t][i]()})},setState:function(e){t.Point.prototype.setState.call(this,e),this.graphic&&this.graphic.attr({zIndex:"hover"===e?1:0})}},t.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:i,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:r.column.prototype.pointAttribs,translateColors:function(){var t=this,e=this.options.nullColor,i=this.colorAxis,r=this.colorKey;n(this.data,function(n){var o=n[r];(o=n.options.color||(n.isNull?e:i&&void 0!==o?i.toColor(o,n):n.color||t.color))&&(n.color=o)})},colorAttribs:function(t){var n={};return e(t.color)&&(n[this.colorProp||"fill"]=t.color),n}}}(t),function(t){function e(t){t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)}function n(t){this.init(t)}var i=t.addEvent,r=t.Chart,o=t.doc,a=t.each,s=t.extend,l=t.merge,u=t.pick,c=t.wrap;n.prototype.init=function(t){this.chart=t,t.mapNavButtons=[]},n.prototype.update=function(n){var r,o,a,c,h,d=this.chart,f=d.options.mapNavigation,p=function(t){this.handler.call(d,t),e(t)},g=d.mapNavButtons;for(n&&(f=d.options.mapNavigation=l(d.options.mapNavigation,n));g.length;)g.pop().destroy();u(f.enableButtons,f.enabled)&&!d.renderer.forExport&&t.objectEach(f.buttons,function(t,n){r=l(f.buttonOptions,t),o=r.theme,o.style=l(r.theme.style,r.style),c=(a=o.states)&&a.hover,h=a&&a.select,t=d.renderer.button(r.text,0,0,p,o,c,h,0,"zoomIn"===n?"topbutton":"bottombutton").addClass("highcharts-map-navigation").attr({width:r.width,height:r.height,title:d.options.lang[n],padding:r.padding,zIndex:5}).add(),t.handler=r.onclick,t.align(s(r,{width:t.width,height:2*t.height}),null,r.alignTo),i(t.element,"dblclick",e),g.push(t)}),this.updateEvents(f)},n.prototype.updateEvents=function(t){var n=this.chart;u(t.enableDoubleClickZoom,t.enabled)||t.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||i(n.container,"dblclick",function(t){n.pointer.onContainerDblClick(t)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),u(t.enableMouseWheelZoom,t.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||i(n.container,void 0===o.onmousewheel?"DOMMouseScroll":"mousewheel",function(t){return n.pointer.onContainerMouseWheel(t),e(t),!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())},s(r.prototype,{fitToBox:function(t,e){return a([["x","width"],["y","height"]],function(n){var i=n[0];n=n[1],t[i]+t[n]>e[i]+e[n]&&(t[n]>e[n]?(t[n]=e[n],t[i]=e[i]):t[i]=e[i]+e[n]-t[n]),t[n]>e[n]&&(t[n]=e[n]),t[i]<e[i]&&(t[i]=e[i])}),t},mapZoom:function(t,e,n,i,r){var o=this.xAxis[0],a=o.max-o.min,s=u(e,o.min+a/2),l=a*t,a=this.yAxis[0],c=a.max-a.min,h=u(n,a.min+c/2),c=c*t,s=this.fitToBox({x:s-l*(i?(i-o.pos)/o.len:.5),y:h-c*(r?(r-a.pos)/a.len:.5),width:l,height:c},{x:o.dataMin,y:a.dataMin,width:o.dataMax-o.dataMin,height:a.dataMax-a.dataMin}),l=s.x<=o.dataMin&&s.width>=o.dataMax-o.dataMin&&s.y<=a.dataMin&&s.height>=a.dataMax-a.dataMin;i&&(o.fixTo=[i-o.pos,e]),r&&(a.fixTo=[r-a.pos,n]),void 0===t||l?(o.setExtremes(void 0,void 0,!1),a.setExtremes(void 0,void 0,!1)):(o.setExtremes(s.x,s.x+s.width,!1),a.setExtremes(s.y,s.y+s.height,!1)),this.redraw()}}),c(r.prototype,"render",function(t){this.mapNavigation=new n(this),this.mapNavigation.update(),t.call(this)})}(t),function(t){var e=t.extend,n=t.pick,i=t.Pointer;t=t.wrap,e(i.prototype,{onContainerDblClick:function(t){var e=this.chart;t=this.normalize(t),e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,"highcharts-tracker")&&e.hoverPoint&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)},onContainerMouseWheel:function(t){var e,n=this.chart;t=this.normalize(t),e=t.detail||-(t.wheelDelta/120),n.isInsidePlot(t.chartX-n.plotLeft,t.chartY-n.plotTop)&&n.mapZoom(Math.pow(n.options.mapNavigation.mouseWheelSensitivity,e),n.xAxis[0].toValue(t.chartX),n.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)}}),t(i.prototype,"zoomOption",function(t){var e=this.chart.options.mapNavigation;n(e.enableTouchZoom,e.enabled)&&(this.chart.options.chart.pinchType="xy"),t.apply(this,[].slice.call(arguments,1))}),t(i.prototype,"pinchTranslate",function(t,e,n,i,r,o,a){t.call(this,e,n,i,r,o,a),"map"===this.chart.options.chart.type&&this.hasZoom&&(t=i.scaleX>i.scaleY,this.pinchTranslateDirection(!t,e,n,i,r,o,a,t?i.scaleX:i.scaleY))})}(t),function(t){var e=t.colorPointMixin,n=t.each,i=t.extend,r=t.isNumber,o=t.map,a=t.merge,s=t.noop,l=t.pick,u=t.isArray,c=t.Point,h=t.Series,d=t.seriesType,f=t.seriesTypes,p=t.splat,g=void 0!==t.doc.documentElement.style.vectorEffect;d("map","scatter",{allAreas:!0,animation:!1,nullColor:"#f7f7f7",borderColor:"#cccccc",borderWidth:1,marker:null,stickyTracking:!1,joinBy:"hc-key",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},turboThreshold:0,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{brightness:.2,halo:null},select:{color:"#cccccc"}}},a(t.colorSeriesMixin,{type:"map",getExtremesFromAll:!0,useMapGeometry:!0,forceDL:!0,searchPoint:s,directTouch:!0,preserveAspectRatio:!0,pointArrayMap:["value"],getBox:function(e){var i,o=Number.MAX_VALUE,a=-o,s=o,u=-o,c=o,h=o,d=this.xAxis,f=this.yAxis;n(e||[],function(e){if(e.path){"string"==typeof e.path&&(e.path=t.splitPath(e.path));var n=e.path||[],d=n.length,f=!1,p=-o,g=o,m=-o,v=o,y=e.properties;if(!e._foundBox){for(;d--;)r(n[d])&&(f?(p=Math.max(p,n[d]),g=Math.min(g,n[d])):(m=Math.max(m,n[d]),v=Math.min(v,n[d])),f=!f);e._midX=g+(p-g)*l(e.middleX,y&&y["hc-middle-x"],.5),e._midY=v+(m-v)*l(e.middleY,y&&y["hc-middle-y"],.5),e._maxX=p,e._minX=g,e._maxY=m,e._minY=v,e.labelrank=l(e.labelrank,(p-g)*(m-v)),e._foundBox=!0}a=Math.max(a,e._maxX),s=Math.min(s,e._minX),u=Math.max(u,e._maxY),c=Math.min(c,e._minY),h=Math.min(e._maxX-e._minX,e._maxY-e._minY,h),i=!0}}),i&&(this.minY=Math.min(c,l(this.minY,o)),this.maxY=Math.max(u,l(this.maxY,-o)),this.minX=Math.min(s,l(this.minX,o)),this.maxX=Math.max(a,l(this.maxX,-o)),d&&void 0===d.options.minRange&&(d.minRange=Math.min(5*h,(this.maxX-this.minX)/5,d.minRange||o)),f&&void 0===f.options.minRange&&(f.minRange=Math.min(5*h,(this.maxY-this.minY)/5,f.minRange||o)))},getExtremes:function(){h.prototype.getExtremes.call(this,this.valueData),this.chart.hasRendered&&this.isDirtyData&&this.getBox(this.options.data),this.valueMin=this.dataMin,this.valueMax=this.dataMax,this.dataMin=this.minY,this.dataMax=this.maxY},translatePath:function(t){var e,n=!1,i=this.xAxis,o=this.yAxis,a=i.min,s=i.transA,i=i.minPixelPadding,l=o.min,u=o.transA,o=o.minPixelPadding,c=[];if(t)for(e=t.length;e--;)r(t[e])?(c[e]=n?(t[e]-a)*s+i:(t[e]-l)*u+o,n=!n):c[e]=t[e];return c},setData:function(e,i,s,l){var c=this.options,d=this.chart.options.chart,f=d&&d.map,g=c.mapData,m=c.joinBy,v=null===m,y=c.keys||this.pointArrayMap,b=[],w={},x=this.chart.mapTransforms;if(!g&&f&&(g="string"==typeof f?t.maps[f]:f),v&&(m="_i"),m=this.joinBy=p(m),m[1]||(m[1]=m[0]),e&&n(e,function(t,n){var i=0;if(r(t))e[n]={value:t};else if(u(t)){e[n]={},!c.keys&&t.length>y.length&&"string"==typeof t[0]&&(e[n]["hc-key"]=t[0],++i);for(var o=0;o<y.length;++o,++i)y[o]&&(e[n][y[o]]=t[i])}v&&(e[n]._i=n)}),this.getBox(e),(this.chart.mapTransforms=x=d&&d.mapTransforms||g&&g["hc-transform"]||x)&&t.objectEach(x,function(t){t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))}),g){for("FeatureCollection"===g.type&&(this.mapTitle=g.title,g=t.geojson(g,this.type,this)),this.mapData=g,this.mapMap={},x=0;x<g.length;x++)d=g[x],f=d.properties,d._i=x,m[0]&&f&&f[m[0]]&&(d[m[0]]=f[m[0]]),w[d[m[0]]]=d;this.mapMap=w,e&&m[1]&&n(e,function(t){w[t[m[1]]]&&b.push(w[t[m[1]]])}),c.allAreas?(this.getBox(g),e=e||[],m[1]&&n(e,function(t){b.push(t[m[1]])}),b="|"+o(b,function(t){return t&&t[m[0]]}).join("|")+"|",n(g,function(t){m[0]&&-1!==b.indexOf("|"+t[m[0]]+"|")||(e.push(a(t,{value:null})),l=!1)})):this.getBox(b)}h.prototype.setData.call(this,e,i,s,l)},drawGraph:s,drawDataLabels:s,doFullTranslate:function(){return this.isDirtyData||this.chart.isResizing||this.chart.renderer.isVML||!this.baseTrans},translate:function(){var t=this,e=t.xAxis,i=t.yAxis,r=t.doFullTranslate();t.generatePoints(),n(t.data,function(n){n.plotX=e.toPixels(n._midX,!0),n.plotY=i.toPixels(n._midY,!0),r&&(n.shapeType="path",n.shapeArgs={d:t.translatePath(n.path)})}),t.translateColors()},pointAttribs:function(t,e){return t=f.column.prototype.pointAttribs.call(this,t,e),g?t["vector-effect"]="non-scaling-stroke":t["stroke-width"]="inherit",t},drawPoints:function(){var t,e,i,r,o,a,s,l,u,c=this,h=c.xAxis,d=c.yAxis,p=c.group,m=c.chart,v=m.renderer,y=this.baseTrans;c.transformGroup||(c.transformGroup=v.g().attr({scaleX:1,scaleY:1}).add(p),c.transformGroup.survive=!0),c.doFullTranslate()?(m.hasRendered&&n(c.points,function(t){t.shapeArgs&&(t.shapeArgs.fill=c.pointAttribs(t,t.state).fill)}),c.group=c.transformGroup,f.column.prototype.drawPoints.apply(c),c.group=p,n(c.points,function(t){t.graphic&&(t.name&&t.graphic.addClass("highcharts-name-"+t.name.replace(/ /g,"-").toLowerCase()),t.properties&&t.properties["hc-key"]&&t.graphic.addClass("highcharts-key-"+t.properties["hc-key"].toLowerCase()))}),this.baseTrans={originX:h.min-h.minPixelPadding/h.transA,originY:d.min-d.minPixelPadding/d.transA+(d.reversed?0:d.len/d.transA),transAX:h.transA,transAY:d.transA},this.transformGroup.animate({translateX:0,translateY:0,scaleX:1,scaleY:1})):(t=h.transA/y.transAX,e=d.transA/y.transAY,i=h.toPixels(y.originX,!0),r=d.toPixels(y.originY,!0),.99<t&&1.01>t&&.99<e&&1.01>e&&(e=t=1,i=Math.round(i),r=Math.round(r)),o=this.transformGroup,m.renderer.globalAnimation?(a=o.attr("translateX"),s=o.attr("translateY"),l=o.attr("scaleX"),u=o.attr("scaleY"),o.attr({animator:0}).animate({animator:1},{step:function(n,c){o.attr({translateX:a+(i-a)*c.pos,translateY:s+(r-s)*c.pos,scaleX:l+(t-l)*c.pos,scaleY:u+(e-u)*c.pos})}})):o.attr({translateX:i,translateY:r,scaleX:t,scaleY:e})),g||c.group.element.setAttribute("stroke-width",c.options[c.pointAttrToOptions&&c.pointAttrToOptions["stroke-width"]||"borderWidth"]/(t||1)),this.drawMapDataLabels()},drawMapDataLabels:function(){h.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},render:function(){var t=this,e=h.prototype.render;t.chart.renderer.isVML&&3e3<t.data.length?setTimeout(function(){e.call(t)}):e.call(t)},animate:function(t){var e=this.options.animation,n=this.group,i=this.xAxis,r=this.yAxis,o=i.pos,a=r.pos;this.chart.renderer.isSVG&&(!0===e&&(e={duration:1e3}),t?n.attr({translateX:o+i.len/2,translateY:a+r.len/2,scaleX:.001,scaleY:.001}):(n.animate({translateX:o,translateY:a,scaleX:1,scaleY:1},e),this.animate=null))},animateDrilldown:function(t){var e=this.chart.plotBox,i=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],r=i.bBox,o=this.chart.options.drilldown.animation;t||(t=Math.min(r.width/e.width,r.height/e.height),i.shapeArgs={scaleX:t,scaleY:t,translateX:r.x,translateY:r.y},n(this.points,function(t){t.graphic&&t.graphic.attr(i.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},o)}),this.animate=null)},drawLegendSymbol:t.LegendSymbolMixin.drawRectangle,animateDrillupFrom:function(t){f.column.prototype.animateDrillupFrom.call(this,t)},animateDrillupTo:function(t){f.column.prototype.animateDrillupTo.call(this,t)}}),i({applyOptions:function(t,e){t=c.prototype.applyOptions.call(this,t,e),e=this.series;var n=e.joinBy;return e.mapData&&((n=void 0!==t[n[1]]&&e.mapMap[t[n[1]]])?(e.xyFromShape&&(t.x=n._midX,t.y=n._midY),i(t,n)):t.value=t.value||null),t},onMouseOver:function(t){clearTimeout(this.colorInterval),null!==this.value||this.series.options.nullInteraction?c.prototype.onMouseOver.call(this,t):this.series.onMouseOut(t)},zoomTo:function(){var t=this.series;t.xAxis.setExtremes(this._minX,this._maxX,!1),t.yAxis.setExtremes(this._minY,this._maxY,!1),t.chart.redraw()}},e))}(t),function(t){var e=t.seriesType,n=t.seriesTypes;e("mapline","map",{lineWidth:1,fillColor:"none"},{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},pointAttribs:function(t,e){return t=n.map.prototype.pointAttribs.call(this,t,e),t.fill=this.options.fillColor,t},drawLegendSymbol:n.line.prototype.drawLegendSymbol})}(t),function(t){var e=t.merge,n=t.Point;(t=t.seriesType)("mappoint","scatter",{dataLabels:{enabled:!0,formatter:function(){return this.point.name},crop:!1,defer:!1,overflow:!1,style:{color:"#000000"}}},{type:"mappoint",forceDL:!0},{applyOptions:function(t,i){return t=void 0!==t.lat&&void 0!==t.lon?e(t,this.series.chart.fromLatLonToPoint(t)):t,n.prototype.applyOptions.call(this,t,i)}})}(t),function(t){var e=t.arrayMax,n=t.arrayMin,i=t.Axis,r=t.color,o=t.each,a=t.isNumber,s=t.noop,l=t.pick,u=t.pInt,c=t.Point,h=t.Series,d=t.seriesType,f=t.seriesTypes;d("bubble","scatter",{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"},{pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",bubblePadding:!0,zoneAxis:"z",directTouch:!0,pointAttribs:function(t,e){var n=l(this.options.marker.fillOpacity,.5);return t=h.prototype.pointAttribs.call(this,t,e),1!==n&&(t.fill=r(t.fill).setOpacity(n).get("rgba")),t},getRadii:function(t,e,n,i){var r,o,a,s=this.zData,l=[],u=this.options,c="width"!==u.sizeBy,h=u.zThreshold,d=e-t;for(o=0,r=s.length;o<r;o++)a=s[o],u.sizeByAbsoluteValue&&null!==a&&(a=Math.abs(a-h),e=Math.max(e-h,Math.abs(t-h)),t=0),null===a?a=null:a<t?a=n/2-1:(a=0<d?(a-t)/d:.5,c&&0<=a&&(a=Math.sqrt(a)),a=Math.ceil(n+a*(i-n))/2),l.push(a);this.radii=l},animate:function(t){var e=this.options.animation;t||(o(this.points,function(t){var n,i=t.graphic;i&&i.width&&(n={x:i.x,y:i.y,width:i.width,height:i.height},i.attr({x:t.plotX,y:t.plotY,width:1,height:1}),i.animate(n,e))}),this.animate=null)},translate:function(){var e,n,i,r=this.data,o=this.radii;for(f.scatter.prototype.translate.call(this),e=r.length;e--;)n=r[e],i=o?o[e]:0,a(i)&&i>=this.minPxSize/2?(n.marker=t.extend(n.marker,{radius:i,width:2*i,height:2*i}),n.dlBox={x:n.plotX-i,y:n.plotY-i,width:2*i,height:2*i}):n.shapeArgs=n.plotY=n.dlBox=void 0},alignDataLabel:f.column.prototype.alignDataLabel,buildKDTree:s,applyZones:s},{haloPath:function(t){return c.prototype.haloPath.call(this,0===t?0:(this.marker?this.marker.radius||0:0)+t)},ttBelow:!1}),i.prototype.beforePadding=function(){var t=this,i=this.len,r=this.chart,s=0,c=i,h=this.isXAxis,d=h?"xData":"yData",f=this.min,p={},g=Math.min(r.plotWidth,r.plotHeight),m=Number.MAX_VALUE,v=-Number.MAX_VALUE,y=this.max-f,b=i/y,w=[];o(this.series,function(i){var a=i.options;!i.bubblePadding||!i.visible&&r.options.chart.ignoreHiddenSeries||(t.allowZoomOutside=!0,w.push(i),h&&(o(["minSize","maxSize"],function(t){var e=a[t],n=/%$/.test(e),e=u(e);p[t]=n?g*e/100:e}),i.minPxSize=p.minSize,i.maxPxSize=Math.max(p.maxSize,p.minSize),i=i.zData,i.length&&(m=l(a.zMin,Math.min(m,Math.max(n(i),!1===a.displayNegative?a.zThreshold:-Number.MAX_VALUE))),v=l(a.zMax,Math.max(v,e(i))))))}),o(w,function(e){var n,i=e[d],r=i.length;if(h&&e.getRadii(m,v,e.minPxSize,e.maxPxSize),0<y)for(;r--;)a(i[r])&&t.dataMin<=i[r]&&i[r]<=t.dataMax&&(n=e.radii[r],s=Math.min((i[r]-f)*b-n,s),c=Math.max((i[r]-f)*b+n,c))}),w.length&&0<y&&!this.isLog&&(c-=i,b*=(i+s-c)/i,o([["min","userMin",s],["max","userMax",c]],function(e){void 0===l(t.options[e[0]],t[e[1]])&&(t[e[0]]+=e[2]/b)}))}}(t),function(t){var e=t.merge,n=t.Point,i=t.seriesType,r=t.seriesTypes;r.bubble&&i("mapbubble","bubble",{animationLimit:500,tooltip:{pointFormat:"{point.name}: {point.z}"}},{xyFromShape:!0,type:"mapbubble",pointArrayMap:["z"],getMapData:r.map.prototype.getMapData,getBox:r.map.prototype.getBox,setData:r.map.prototype.setData},{applyOptions:function(t,i){return t&&void 0!==t.lat&&void 0!==t.lon?n.prototype.applyOptions.call(this,e(t,this.series.chart.fromLatLonToPoint(t)),i):r.map.prototype.pointClass.prototype.applyOptions.call(this,t,i)},ttBelow:!1})}(t),function(t){var e=t.colorPointMixin,n=t.each,i=t.merge,r=t.noop,o=t.pick,a=t.Series,s=t.seriesType,l=t.seriesTypes;s("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}},i(t.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;l.scatter.prototype.init.apply(this,arguments),t=this.options,t.pointRange=o(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this.options,e=this.xAxis,i=this.yAxis,r=function(t,e,n){return Math.min(Math.max(e,t),n)};this.generatePoints(),n(this.points,function(n){var o=(t.colsize||1)/2,a=(t.rowsize||1)/2,s=r(Math.round(e.len-e.translate(n.x-o,0,1,0,1)),-e.len,2*e.len),o=r(Math.round(e.len-e.translate(n.x+o,0,1,0,1)),-e.len,2*e.len),l=r(Math.round(i.translate(n.y-a,0,1,0,1)),-i.len,2*i.len),a=r(Math.round(i.translate(n.y+a,0,1,0,1)),-i.len,2*i.len);n.plotX=n.clientX=(s+o)/2,n.plotY=(l+a)/2,n.shapeType="rect",n.shapeArgs={x:Math.min(s,o),y:Math.min(l,a),width:Math.abs(o-s),height:Math.abs(a-l)}}),this.translateColors()},drawPoints:function(){l.column.prototype.drawPoints.call(this),n(this.points,function(t){t.graphic.attr(this.colorAttribs(t))},this)},animate:r,getBox:r,drawLegendSymbol:t.LegendSymbolMixin.drawRectangle,alignDataLabel:l.column.prototype.alignDataLabel,getExtremes:function(){a.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,a.prototype.getExtremes.call(this)}}),e)}(t),function(t){function e(t,e){var n,i,r,o=!1,a=t.x,s=t.y;for(t=0,n=e.length-1;t<e.length;n=t++)i=e[t][1]>s,r=e[n][1]>s,i!==r&&a<(e[n][0]-e[t][0])*(s-e[t][1])/(e[n][1]-e[t][1])+e[t][0]&&(o=!o);return o}var n=t.Chart,i=t.each,r=t.extend,o=t.format,a=t.merge,s=t.win,l=t.wrap;n.prototype.transformFromLatLon=function(e,n){if(void 0===s.proj4)return t.error(21),{x:0,y:null};e=s.proj4(n.crs,[e.lon,e.lat]);var i=n.cosAngle||n.rotation&&Math.cos(n.rotation),r=n.sinAngle||n.rotation&&Math.sin(n.rotation);return e=n.rotation?[e[0]*i+e[1]*r,-e[0]*r+e[1]*i]:e,{x:((e[0]-(n.xoffset||0))*(n.scale||1)+(n.xpan||0))*(n.jsonres||1)+(n.jsonmarginX||0),y:(((n.yoffset||0)-e[1])*(n.scale||1)+(n.ypan||0))*(n.jsonres||1)-(n.jsonmarginY||0)}},n.prototype.transformToLatLon=function(e,n){if(void 0!==s.proj4){e={x:((e.x-(n.jsonmarginX||0))/(n.jsonres||1)-(n.xpan||0))/(n.scale||1)+(n.xoffset||0),y:((-e.y-(n.jsonmarginY||0))/(n.jsonres||1)+(n.ypan||0))/(n.scale||1)+(n.yoffset||0)};var i=n.cosAngle||n.rotation&&Math.cos(n.rotation),r=n.sinAngle||n.rotation&&Math.sin(n.rotation);return n=s.proj4(n.crs,"WGS84",n.rotation?{x:e.x*i+e.y*-r,y:e.x*r+e.y*i}:e),{lat:n.y,lon:n.x}}t.error(21)},n.prototype.fromPointToLatLon=function(n){var i,r=this.mapTransforms;if(r){for(i in r)if(r.hasOwnProperty(i)&&r[i].hitZone&&e({x:n.x,y:-n.y},r[i].hitZone.coordinates[0]))return this.transformToLatLon(n,r[i]);return this.transformToLatLon(n,r["default"])}t.error(22)},n.prototype.fromLatLonToPoint=function(n){var i,r,o=this.mapTransforms;if(!o)return t.error(22),{x:0,y:null};for(i in o)if(o.hasOwnProperty(i)&&o[i].hitZone&&(r=this.transformFromLatLon(n,o[i]),e({x:r.x,y:-r.y},o[i].hitZone.coordinates[0])))return r;return this.transformFromLatLon(n,o["default"])},t.geojson=function(t,e,n){var a=[],s=[],l=function(t){var e,n=t.length;for(s.push("M"),e=0;e<n;e++)1===e&&s.push("L"),s.push(t[e][0],-t[e][1])};return e=e||"map",i(t.features,function(t){var n=t.geometry,o=n.type,n=n.coordinates;t=t.properties;var u;s=[],"map"===e||"mapbubble"===e?("Polygon"===o?(i(n,l),s.push("Z")):"MultiPolygon"===o&&(i(n,function(t){i(t,l)}),s.push("Z")),s.length&&(u={path:s})):"mapline"===e?("LineString"===o?l(n):"MultiLineString"===o&&i(n,l),s.length&&(u={path:s})):"mappoint"===e&&"Point"===o&&(u={x:n[0],y:-n[1]}),u&&a.push(r(u,{name:t.name||t.NAME,properties:t}))}),n&&t.copyrightShort&&(n.chart.mapCredits=o(n.chart.options.credits.mapText,{geojson:t}),n.chart.mapCreditsFull=o(n.chart.options.credits.mapTextFull,{geojson:t})),a},l(n.prototype,"addCredits",function(t,e){e=a(!0,this.options.credits,e),this.mapCredits&&(e.href=null),t.call(this,e),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})})}(t),function(t){function e(t,e,n,i,r,o,a,s){return["M",t+r,e,"L",t+n-o,e,"C",t+n-o/2,e,t+n,e+o/2,t+n,e+o,"L",t+n,e+i-a,"C",t+n,e+i-a/2,t+n-a/2,e+i,t+n-a,e+i,"L",t+s,e+i,"C",t+s/2,e+i,t,e+i-s/2,t,e+i-s,"L",t,e+r,"C",t,e+r/2,t+r/2,e,t+r,e,"Z"]}var n=t.Chart,i=t.defaultOptions,r=t.each,o=t.extend,a=t.merge,s=t.pick,l=t.Renderer,u=t.SVGRenderer,c=t.VMLRenderer;o(i.lang,{zoomIn:"Zoom in",zoomOut:"Zoom out"}),i.mapNavigation={buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{fontSize:"15px",fontWeight:"bold"},theme:{"stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1},t.splitPath=function(t){var e;for(t=t.replace(/([A-Za-z])/g," $1 "),t=t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.split(/[ ,]+/),e=0;e<t.length;e++)/[a-zA-Z]/.test(t[e])||(t[e]=parseFloat(t[e]));return t},t.maps={},u.prototype.symbols.topbutton=function(t,n,i,r,o){return e(t-1,n-1,i,r,o.r,o.r,0,0)},u.prototype.symbols.bottombutton=function(t,n,i,r,o){return e(t-1,n-1,i,r,0,0,o.r,o.r)},l===c&&r(["topbutton","bottombutton"],function(t){c.prototype.symbols[t]=u.prototype.symbols[t]}),t.Map=t.mapChart=function(e,i,r){var o,l="string"==typeof e||e.nodeName,u=arguments[l?1:0],c={endOnTick:!1,visible:!1,minPadding:0,maxPadding:0,startOnTick:!1},h=t.getOptions().credits;return o=u.series,u.series=null,u=a({chart:{panning:"xy",type:"map"},credits:{mapText:s(h.mapText,' © <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:s(h.mapTextFull,"{geojson.copyright}")},tooltip:{followTouchMove:!1},xAxis:c,yAxis:a(c,{reversed:!0})},u,{chart:{inverted:!1,alignTicks:!1}}),u.series=o,l?new n(e,u,r):new n(u,i)}}(t)}),function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){!function(t){var e=t.noop,n=t.color,i=t.defaultOptions,r=t.each,o=t.extend,a=t.format,s=t.objectEach,l=t.pick,u=t.wrap,c=t.Chart,h=t.seriesTypes,d=h.pie,f=h.column,p=t.Tick,g=t.fireEvent,m=t.inArray,v=1;o(i.lang,{drillUpText:"◁ Back to {series.name}"}),i.drilldown={animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}},t.SVGRenderer.prototype.Element.prototype.fadeIn=function(t){this.attr({opacity:.1,visibility:"inherit"}).animate({opacity:l(this.newOpacity,1)},t||{duration:250})},c.prototype.addSeriesAsDrilldown=function(t,e){this.addSingleSeriesAsDrilldown(t,e),this.applyDrilldown()},c.prototype.addSingleSeriesAsDrilldown=function(i,a){var s,u,c,h,d,f,p=i.series,g=p.xAxis,y=p.yAxis,b=[],w=[];f={colorIndex:l(i.colorIndex,p.colorIndex)},this.drilldownLevels||(this.drilldownLevels=[]),h=p.options._levelNumber||0,d=this.drilldownLevels[this.drilldownLevels.length-1],d&&d.levelNumber!==h&&(d=void 0),a=o(o({_ddSeriesId:v++},f),a),u=m(i,p.points),r(p.chart.series,function(t){t.xAxis!==g||t.isDrilling||(t.options._ddSeriesId=t.options._ddSeriesId||v++,t.options._colorIndex=t.userOptions._colorIndex,t.options._levelNumber=t.options._levelNumber||h,d?(b=d.levelSeries,w=d.levelSeriesOptions):(b.push(t),w.push(t.options)))}),c=o({levelNumber:h,seriesOptions:p.options,levelSeriesOptions:w,levelSeries:b,shapeArgs:i.shapeArgs,bBox:i.graphic?i.graphic.getBBox():{},color:i.isNull?new t.Color(n).setOpacity(0).get():n,lowerSeriesOptions:a,pointOptions:p.options.data[u],pointIndex:u,oldExtremes:{xMin:g&&g.userMin,xMax:g&&g.userMax,yMin:y&&y.userMin,yMax:y&&y.userMax}},f),this.drilldownLevels.push(c),g&&g.names&&(g.names.length=0),s=c.lowerSeries=this.addSeries(a,!1),s.options._levelNumber=h+1,g&&(g.oldPos=g.pos,g.userMin=g.userMax=null,y.userMin=y.userMax=null),p.type===s.type&&(s.animate=s.animateDrilldown||e,s.options.animation=!0)},c.prototype.applyDrilldown=function(){var t,e=this.drilldownLevels;e&&e.length>0&&(t=e[e.length-1].levelNumber,r(this.drilldownLevels,function(e){e.levelNumber===t&&r(e.levelSeries,function(e){e.options&&e.options._levelNumber===t&&e.remove(!1)})})),this.redraw(),this.showDrillUpButton()},c.prototype.getDrilldownBackText=function(){var t,e=this.drilldownLevels;if(e&&e.length>0)return t=e[e.length-1],t.series=t.seriesOptions,a(this.options.lang.drillUpText,t)},c.prototype.showDrillUpButton=function(){var t,e,n=this,i=this.getDrilldownBackText(),r=n.options.drilldown.drillUpButton;this.drillUpButton?this.drillUpButton.attr({text:i}).align():(t=r.theme,e=t&&t.states,this.drillUpButton=this.renderer.button(i,null,null,function(){n.drillUp()},t,e&&e.hover,e&&e.select).addClass("highcharts-drillup-button").attr({align:r.position.align,zIndex:7}).add().align(r.position,!1,r.relativeTo||"plotBox"))},c.prototype.drillUp=function(){for(var t,e,n,i,o,a=this,s=a.drilldownLevels,l=s[s.length-1].levelNumber,u=s.length,c=a.series,h=function(t){var o;r(c,function(e){e.options._ddSeriesId===t._ddSeriesId&&(o=e)}),o=o||a.addSeries(t,!1),o.type===n.type&&o.animateDrillupTo&&(o.animate=o.animateDrillupTo),t===e.seriesOptions&&(i=o)};u--;)if(e=s[u],e.levelNumber===l){if(s.pop(),n=e.lowerSeries,!n.chart)for(t=c.length;t--;)if(c[t].options.id===e.lowerSeriesOptions.id&&c[t].options._levelNumber===l+1){n=c[t];break}n.xData=[],r(e.levelSeriesOptions,h),g(a,"drillup",{seriesOptions:e.seriesOptions}),i.type===n.type&&(i.drilldownLevel=e,i.options.animation=a.options.drilldown.animation,n.animateDrillupFrom&&n.chart&&n.animateDrillupFrom(e)),i.options._levelNumber=l,n.remove(!1),i.xAxis&&(o=e.oldExtremes,i.xAxis.setExtremes(o.xMin,o.xMax,!1),i.yAxis.setExtremes(o.yMin,o.yMax,!1))}g(a,"drillupall"),this.redraw(),0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align(),this.ddDupes.length=[]},f.prototype.animateDrillupTo=function(t){if(!t){var n=this,i=n.drilldownLevel;r(this.points,function(t){var e=t.dataLabel;t.graphic&&t.graphic.hide(),e&&(e.hidden="hidden"===e.attr("visibility"),e.hidden||(e.hide(),t.connector&&t.connector.hide()))}),setTimeout(function(){n.points&&r(n.points,function(t,e){var n=e===(i&&i.pointIndex)?"show":"fadeIn",r="show"===n||void 0,o=t.dataLabel;t.graphic&&t.graphic[n](r),o&&!o.hidden&&(o[n](r),t.connector&&t.connector[n](r))})},Math.max(this.chart.options.drilldown.animation.duration-50,0)),this.animate=e}},f.prototype.animateDrilldown=function(t){var e,n=this,i=this.chart.drilldownLevels,a=this.chart.options.drilldown.animation,s=this.xAxis;t||(r(i,function(t){n.options._ddSeriesId===t.lowerSeriesOptions._ddSeriesId&&(e=t.shapeArgs)}),e.x+=l(s.oldPos,s.pos)-s.pos,r(this.points,function(t){t.shapeArgs;t.graphic&&t.graphic.attr(e).animate(o(t.shapeArgs,{fill:t.color||n.color}),a),t.dataLabel&&t.dataLabel.fadeIn(a)}),this.animate=null)},f.prototype.animateDrillupFrom=function(e){var n=this.chart.options.drilldown.animation,i=this.group,o=i!==this.chart.seriesGroup,a=this;r(a.trackerGroups,function(t){a[t]&&a[t].on("mouseover")}),o&&delete this.group,r(this.points,function(r){var a=r.graphic,s=e.shapeArgs,l=function(){a.destroy(),i&&o&&(i=i.destroy())};a&&(delete r.graphic,n?a.animate(s,t.merge(n,{complete:l})):(a.attr(s),l()))})},d&&o(d.prototype,{animateDrillupTo:f.prototype.animateDrillupTo,animateDrillupFrom:f.prototype.animateDrillupFrom,animateDrilldown:function(e){var n=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],i=this.chart.options.drilldown.animation,o=n.shapeArgs,a=o.start,s=o.end-a,l=s/this.points.length;e||(r(this.points,function(e,n){var r=e.shapeArgs;e.graphic&&e.graphic.attr(t.merge(o,{start:a+n*l,end:a+(n+1)*l}))[i?"animate":"attr"](r,i)}),this.animate=null)}}),t.Point.prototype.doDrilldown=function(t,e,n){var i,r=this.series,o=r.chart,a=o.options.drilldown,s=(a.series||[]).length;for(o.ddDupes||(o.ddDupes=[]);s--&&!i;)a.series[s].id===this.drilldown&&m(this.drilldown,o.ddDupes)===-1&&(i=a.series[s],o.ddDupes.push(this.drilldown));g(o,"drilldown",{point:this,seriesOptions:i,category:e,originalEvent:n,points:void 0!==e&&this.series.xAxis.getDDPoints(e).slice(0)},function(e){var n=e.point.series&&e.point.series.chart,i=e.seriesOptions;n&&i&&(t?n.addSingleSeriesAsDrilldown(e.point,i):n.addSeriesAsDrilldown(e.point,i))})},t.Axis.prototype.drilldownCategory=function(t,e){s(this.getDDPoints(t),function(n){n&&n.series&&n.series.visible&&n.doDrilldown&&n.doDrilldown(!0,t,e)}),this.chart.applyDrilldown()},t.Axis.prototype.getDDPoints=function(t){var e=[];return r(this.series,function(n){var i,r=n.xData,o=n.points;for(i=0;i<r.length;i++)if(r[i]===t&&n.options.data[i]&&n.options.data[i].drilldown){e.push(!o||o[i]);break}}),e},p.prototype.drillable=function(){var t=this.pos,e=this.label,n=this.axis,i="xAxis"===n.coll&&n.getDDPoints,r=i&&n.getDDPoints(t);i&&(e&&r.length?(e.drillable=!0,e.addClass("highcharts-drilldown-axis-label").on("click",function(e){n.drilldownCategory(t,e)})):e&&e.drillable&&(e.on("click",null),e.removeClass("highcharts-drilldown-axis-label")))},u(p.prototype,"addLabel",function(t){t.call(this),this.drillable()}),u(t.Point.prototype,"init",function(e,n,i,r){var o=e.call(this,n,i,r),a=n.xAxis,s=a&&a.ticks[r];return o.drilldown&&t.addEvent(o,"click",function(t){n.xAxis&&n.chart.options.drilldown.allowPointDrilldown===!1?n.xAxis.drilldownCategory(o.x,t):o.doDrilldown(void 0,void 0,t)}),s&&s.drillable(),o}),u(t.Series.prototype,"drawDataLabels",function(t){var e=this.chart.options.drilldown.activeDataLabelStyle,n=this.chart.renderer;t.call(this),r(this.points,function(t){var i=t.options.dataLabels,r=l(t.dlOptions,i&&i.style,{});t.drilldown&&t.dataLabel&&("contrast"===e.color&&(r.color=n.getContrast(t.color||this.color)),i&&i.color&&(r.color=i.color),t.dataLabel.addClass("highcharts-drilldown-data-label"))},this)});var y=function(t,e,n){t[n?"addClass":"removeClass"]("highcharts-drilldown-point")},b=function(t){t.call(this),r(this.points,function(t){t.drilldown&&t.graphic&&y(t.graphic,"pointer",!0)});
},w=function(t,e){var n=t.apply(this,Array.prototype.slice.call(arguments,1));return this.drilldown&&this.series.halo&&"hover"===e?y(this.series.halo,"pointer",!0):this.series.halo&&y(this.series.halo,"auto",!1),n};s(h,function(t){u(t.prototype,"drawTracker",b),u(t.prototype.pointClass.prototype,"setState",w)})}(t)}),function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){!function(t){var e,n=t.win.document,i=t.each,r=t.objectEach,o=t.pick,a=t.inArray,s=t.isNumber,l=t.splat,u=function(t,e){this.init(t,e)};t.extend(u.prototype,{init:function(t,e){this.options=t,this.chartOptions=e,this.columns=t.columns||this.rowsToColumns(t.rows)||[],this.firstRowAsNames=o(t.firstRowAsNames,!0),this.decimalRegex=t.decimalPoint&&new RegExp("^(-?[0-9]+)"+t.decimalPoint+"([0-9]+)$"),this.rawColumns=[],this.columns.length?this.dataFound():(this.parseCSV(),this.parseTable(),this.parseGoogleSpreadsheet())},getColumnDistribution:function(){var n,o=this.chartOptions,a=this.options,s=[],l=function(e){return(t.seriesTypes[e||"line"].prototype.pointArrayMap||[0]).length},u=o&&o.chart&&o.chart.type,c=[],h=[],d=0;i(o&&o.series||[],function(t){c.push(l(t.type||u))}),i(a&&a.seriesMapping||[],function(t){s.push(t.x||0)}),0===s.length&&s.push(0),i(a&&a.seriesMapping||[],function(i){var a=new e,s=c[d]||l(u),f=t.seriesTypes[((o&&o.series||[])[d]||{}).type||u||"line"].prototype.pointArrayMap||["y"];for(a.addColumnReader(i.x,"x"),r(i,function(t,e){"x"!==e&&a.addColumnReader(t,e)}),n=0;n<s;n++)a.hasReader(f[n])||a.addColumnReader(void 0,f[n]);h.push(a),d++}),a=t.seriesTypes[u||"line"].prototype.pointArrayMap,void 0===a&&(a=["y"]),this.valueCount={global:l(u),xColumns:s,individual:c,seriesBuilders:h,globalPointArrayMap:a}},dataFound:function(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns)),this.getColumnDistribution(),this.parseTypes(),!1!==this.parsed()&&this.complete()},parseCSV:function(){var t,e,n=this,r=this.options,o=r.csv,a=this.columns,s=r.startRow||0,l=r.endRow||Number.MAX_VALUE,u=r.startColumn||0,c=r.endColumn||Number.MAX_VALUE,h=0;o&&(e=o.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(r.lineDelimiter||"\n"),t=r.itemDelimiter||(-1!==o.indexOf("\t")?"\t":","),i(e,function(e,r){var o=n.trim(e),d=0===o.indexOf("#");r>=s&&r<=l&&!d&&""!==o&&(e=e.split(t),i(e,function(t,e){e>=u&&e<=c&&(a[e-u]||(a[e-u]=[]),a[e-u][h]=t)}),h+=1)}),this.dataFound())},parseTable:function(){var t=this.options,e=t.table,r=this.columns,o=t.startRow||0,a=t.endRow||Number.MAX_VALUE,s=t.startColumn||0,l=t.endColumn||Number.MAX_VALUE;e&&("string"==typeof e&&(e=n.getElementById(e)),i(e.getElementsByTagName("tr"),function(t,e){e>=o&&e<=a&&i(t.children,function(t,n){("TD"===t.tagName||"TH"===t.tagName)&&n>=s&&n<=l&&(r[n-s]||(r[n-s]=[]),r[n-s][e-o]=t.innerHTML)})}),this.dataFound())},parseGoogleSpreadsheet:function(){var t,e,n=this,r=this.options,o=r.googleSpreadsheetKey,a=this.columns,s=r.startRow||0,l=r.endRow||Number.MAX_VALUE,u=r.startColumn||0,c=r.endColumn||Number.MAX_VALUE;o&&jQuery.ajax({dataType:"json",url:"https://spreadsheets.google.com/feeds/cells/"+o+"/"+(r.googleSpreadsheetWorksheet||"od6")+"/public/values?alt=json-in-script&callback=?",error:r.error,success:function(r){r=r.feed.entry;var o,h,d=r.length,f=0,p=0;for(h=0;h<d;h++)o=r[h],f=Math.max(f,o.gs$cell.col),p=Math.max(p,o.gs$cell.row);for(h=0;h<f;h++)h>=u&&h<=c&&(a[h-u]=[],a[h-u].length=Math.min(p,l-s));for(h=0;h<d;h++)o=r[h],t=o.gs$cell.row-1,e=o.gs$cell.col-1,e>=u&&e<=c&&t>=s&&t<=l&&(a[e-u][t-s]=o.content.$t);i(a,function(t){for(h=0;h<t.length;h++)void 0===t[h]&&(t[h]=null)}),n.dataFound()}})},trim:function(t,e){return"string"==typeof t&&(t=t.replace(/^\s+|\s+$/g,""),e&&/^[0-9\s]+$/.test(t)&&(t=t.replace(/\s/g,"")),this.decimalRegex&&(t=t.replace(this.decimalRegex,"$1.$2"))),t},parseTypes:function(){for(var t=this.columns,e=t.length;e--;)this.parseColumn(t[e],e)},parseColumn:function(t,e){var n,i,r,o,u,c=this.rawColumns,h=this.columns,d=t.length,f=this.firstRowAsNames,p=-1!==a(e,this.valueCount.xColumns),g=[],m=this.chartOptions,v=(this.options.columnTypes||[])[e],m=p&&(m&&m.xAxis&&"category"===l(m.xAxis)[0].type||"string"===v);for(c[e]||(c[e]=[]);d--;)n=g[d]||t[d],r=this.trim(n),o=this.trim(n,!0),i=parseFloat(o),void 0===c[e][d]&&(c[e][d]=r),m||0===d&&f?t[d]=r:+o===i?(t[d]=i,31536e6<i&&"float"!==v?t.isDatetime=!0:t.isNumeric=!0,void 0!==t[d+1]&&(u=i>t[d+1])):(i=this.parseDate(n),p&&s(i)&&"float"!==v?(g[d]=n,t[d]=i,t.isDatetime=!0,void 0!==t[d+1]&&(n=i>t[d+1],n!==u&&void 0!==u&&(this.alternativeFormat?(this.dateFormat=this.alternativeFormat,d=t.length,this.alternativeFormat=this.dateFormats[this.dateFormat].alternative):t.unsorted=!0),u=n)):(t[d]=""===r?null:r,0!==d&&(t.isDatetime||t.isNumeric)&&(t.mixed=!0)));if(p&&t.mixed&&(h[e]=c[e]),p&&u&&this.options.sort)for(e=0;e<h.length;e++)h[e].reverse(),f&&h[e].unshift(h[e].pop())},dateFormats:{"YYYY-mm-dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{2})[\-\/\.]([0-9]{2})$/,parser:function(t){return Date.UTC(+t[1],t[2]-1,+t[3])}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(t){return Date.UTC(+t[3],t[2]-1,+t[1])},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(t){return Date.UTC(+t[3],t[1]-1,+t[2])}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(t){return Date.UTC(+t[3]+2e3,t[2]-1,+t[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(t){return Date.UTC(+t[3]+2e3,t[1]-1,+t[2])}}},parseDate:function(t){var e,n,i,r=this.options.parseDate,o=this.options.dateFormat||this.dateFormat;if(r)e=r(t);else if("string"==typeof t){if(o)r=this.dateFormats[o],(i=t.match(r.regex))&&(e=r.parser(i));else for(n in this.dateFormats)if(r=this.dateFormats[n],i=t.match(r.regex)){this.dateFormat=n,this.alternativeFormat=r.alternative,e=r.parser(i);break}i||(i=Date.parse(t),"object"==typeof i&&null!==i&&i.getTime?e=i.getTime()-6e4*i.getTimezoneOffset():s(i)&&(e=i-6e4*new Date(i).getTimezoneOffset()))}return e},rowsToColumns:function(t){var e,n,i,r,o;if(t)for(o=[],n=t.length,e=0;e<n;e++)for(r=t[e].length,i=0;i<r;i++)o[i]||(o[i]=[]),o[i][e]=t[e][i];return o},parsed:function(){if(this.options.parsed)return this.options.parsed.call(this,this.columns)},getFreeIndexes:function(t,e){var n,i,r=[],o=[];for(n=0;n<t;n+=1)r.push(!0);for(t=0;t<e.length;t+=1)for(i=e[t].getReferencedColumnIndexes(),n=0;n<i.length;n+=1)r[i[n]]=!1;for(n=0;n<r.length;n+=1)r[n]&&o.push(n);return o},complete:function(){var t,n,i,r,o,s,l=this.columns,u=this.options,c=[];if(u.complete||u.afterComplete){for(r=0;r<l.length;r++)this.firstRowAsNames&&(l[r].name=l[r].shift());for(n=[],i=this.getFreeIndexes(l.length,this.valueCount.seriesBuilders),r=0;r<this.valueCount.seriesBuilders.length;r++)s=this.valueCount.seriesBuilders[r],s.populateColumns(i)&&c.push(s);for(;0<i.length;){for(s=new e,s.addColumnReader(0,"x"),r=a(0,i),-1!==r&&i.splice(r,1),r=0;r<this.valueCount.global;r++)s.addColumnReader(void 0,this.valueCount.globalPointArrayMap[r]);s.populateColumns(i)&&c.push(s)}if(0<c.length&&0<c[0].readers.length&&(s=l[c[0].readers[0].columnIndex],void 0!==s&&(s.isDatetime?t="datetime":s.isNumeric||(t="category"))),"category"===t)for(r=0;r<c.length;r++)for(s=c[r],i=0;i<s.readers.length;i++)"x"===s.readers[i].configName&&(s.readers[i].configName="name");for(r=0;r<c.length;r++){for(s=c[r],i=[],o=0;o<l[0].length;o++)i[o]=s.read(l,o);n[r]={data:i},s.name&&(n[r].name=s.name),"category"===t&&(n[r].turboThreshold=0)}l={series:n},t&&(l.xAxis={type:t},"category"===t&&(l.xAxis.uniqueNames=!1)),u.complete&&u.complete(l),u.afterComplete&&u.afterComplete(l)}}}),t.Data=u,t.data=function(t,e){return new u(t,e)},t.wrap(t.Chart.prototype,"init",function(e,n,i){var r=this;n&&n.data?t.data(t.extend(n.data,{afterComplete:function(o){var a,s;if(n.hasOwnProperty("series"))if("object"==typeof n.series)for(a=Math.max(n.series.length,o.series.length);a--;)s=n.series[a]||{},n.series[a]=t.merge(s,o.series[a]);else delete n.series;n=t.merge(o,n),e.call(r,n,i)}}),n):e.call(r,n,i)}),e=function(){this.readers=[],this.pointIsArray=!0},e.prototype.populateColumns=function(t){var e=!0;return i(this.readers,function(e){void 0===e.columnIndex&&(e.columnIndex=t.shift())}),i(this.readers,function(t){void 0===t.columnIndex&&(e=!1)}),e},e.prototype.read=function(t,e){var n,r=this.pointIsArray,o=r?[]:{};return i(this.readers,function(n){var i=t[n.columnIndex][e];r?o.push(i):o[n.configName]=i}),void 0===this.name&&2<=this.readers.length&&(n=this.getReferencedColumnIndexes(),2<=n.length&&(n.shift(),n.sort(),this.name=t[n.shift()].name)),o},e.prototype.addColumnReader=function(t,e){this.readers.push({columnIndex:t,configName:e}),"x"!==e&&"y"!==e&&void 0!==e&&(this.pointIsArray=!1)},e.prototype.getReferencedColumnIndexes=function(){var t,e,n=[];for(t=0;t<this.readers.length;t+=1)e=this.readers[t],void 0!==e.columnIndex&&n.push(e.columnIndex);return n},e.prototype.hasReader=function(t){var e,n;for(e=0;e<this.readers.length;e+=1)if(n=this.readers[e],n.configName===t)return!0}}(t)}),function(){"use strict";function t(t){this._value=t}function e(t){return 0===t?1:Math.floor(Math.log(Math.abs(t))/Math.LN10)+1}function n(t){var e,n="";for(e=0;e<t;e++)n+="0";return n}function i(t,e){var i,r,o,a,s,l,u,c;return c=t.toString(),i=c.split("e")[0],a=c.split("e")[1],r=i.split(".")[0],o=i.split(".")[1]||"",+a>0?c=r+o+n(a-o.length):(s=+r<0?"-0":"0",e>0&&(s+="."),u=n(-1*a-1),l=(u+Math.abs(r)+o).substr(0,e),c=s+l),+a>0&&e>0&&(c+="."+n(e)),c}function r(t,e,n,r){var o,a,s=Math.pow(10,e);return t.toString().indexOf("e")>-1?(a=i(t,e),"-"===a.charAt(0)&&+a>=0&&(a=a.substr(1))):a=(n(t+"e+"+e)/s).toFixed(e),r&&(o=new RegExp("0{1,"+r+"}$"),a=a.replace(o,"")),a}function o(t,e,n){var i,r=e.replace(/\{[^\{\}]*\}/g,"");return i=r.indexOf("$")>-1?s(t,S[T].currency.symbol,e,n):r.indexOf("%")>-1?u(t,e,n):r.indexOf(":")>-1?c(t,e):f(t._value,e,n)}function a(t,e){var n,i,r,o,a,s=e,l=!1;if(e.indexOf(":")>-1)t._value=h(e);else if(e===E)t._value=0;else{for("."!==S[T].delimiters.decimal&&(e=e.replace(/\./g,"").replace(S[T].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+S[T].abbreviations.thousand+"(?:\\)|(\\"+S[T].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+S[T].abbreviations.million+"(?:\\)|(\\"+S[T].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+S[T].abbreviations.billion+"(?:\\)|(\\"+S[T].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+S[T].abbreviations.trillion+"(?:\\)|(\\"+S[T].currency.symbol+")?(?:\\))?)?$"),a=1;a<x.length&&!l;++a)e.indexOf(x[a])>-1?l=Math.pow(1024,a):e.indexOf(_[a])>-1&&(l=Math.pow(1e3,a));var u=e.replace(/[^0-9\.]+/g,"");""===u?t._value=NaN:(t._value=(l?l:1)*(s.match(n)?Math.pow(10,3):1)*(s.match(i)?Math.pow(10,6):1)*(s.match(r)?Math.pow(10,9):1)*(s.match(o)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(u),t._value=l?Math.ceil(t._value):t._value)}return t._value}function s(t,e,n,i){var r,o,a=n,s=a.indexOf("$"),l=a.indexOf("("),u=a.indexOf("+"),c=a.indexOf("-"),h="",d="";if(a.indexOf("$")===-1?"infix"===S[T].currency.position?(d=e,S[T].currency.spaceSeparated&&(d=" "+d+" ")):S[T].currency.spaceSeparated&&(h=" "):a.indexOf(" $")>-1?(h=" ",a=a.replace(" $","")):a.indexOf("$ ")>-1?(h=" ",a=a.replace("$ ","")):a=a.replace("$",""),o=f(t._value,a,i,d),n.indexOf("$")===-1)switch(S[T].currency.position){case"postfix":o.indexOf(")")>-1?(o=o.split(""),o.splice(-1,0,h+e),o=o.join("")):o=o+h+e;break;case"infix":break;case"prefix":o.indexOf("(")>-1||o.indexOf("-")>-1?(o=o.split(""),r=Math.max(l,c)+1,o.splice(r,0,e+h),o=o.join("")):o=e+h+o;break;default:throw Error('Currency position should be among ["prefix", "infix", "postfix"]')}else s<=1?o.indexOf("(")>-1||o.indexOf("+")>-1||o.indexOf("-")>-1?(o=o.split(""),r=1,(s<l||s<u||s<c)&&(r=0),o.splice(r,0,e+h),o=o.join("")):o=e+h+o:o.indexOf(")")>-1?(o=o.split(""),o.splice(-1,0,h+e),o=o.join("")):o=o+h+e;return o}function l(t,e,n,i){return s(t,e,n,i)}function u(t,e,n){var i,r="",o=100*t._value;return e.indexOf(" %")>-1?(r=" ",e=e.replace(" %","")):e=e.replace("%",""),i=f(o,e,n),i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,r+"%"),i=i.join("")):i=i+r+"%",i}function c(t){var e=Math.floor(t._value/60/60),n=Math.floor((t._value-60*e*60)/60),i=Math.round(t._value-60*e*60-60*n);return e+":"+(n<10?"0"+n:n)+":"+(i<10?"0"+i:i)}function h(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.length&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}function d(t,e,n){var i,r,o,a=e[0],s=Math.abs(t);if(s>=n){for(i=1;i<e.length;++i)if(r=Math.pow(n,i),o=Math.pow(n,i+1),s>=r&&s<o){a=e[i],t/=r;break}a===e[0]&&(t/=Math.pow(n,e.length-1),a=e[e.length-1])}return{value:t,suffix:a}}function f(t,i,o,a){var s,l,u,c,h,f,p,g,m,v,y,b,w,x,_,k,M=!1,O=!1,A=!1,D="",R=!1,P=!1,N=!1,z=!1,L=!1,I="",H="",j=Math.abs(t),F="",B=!1,W=!1,Y="";if(0===t&&null!==E)return E;if(!isFinite(t))return""+t;if(0===i.indexOf("{")){var V=i.indexOf("}");if(V===-1)throw Error('Format should also contain a "}"');v=i.slice(1,V),i=i.slice(V+1)}else v="";if(i.indexOf("}")===i.length-1&&i.length){var U=i.indexOf("{");if(U===-1)throw Error('Format should also contain a "{"');y=i.slice(U+1,-1),i=i.slice(0,U+1)}else y="";var q;for(q=i.indexOf(".")===-1?i.match(/([0-9]+).*/):i.match(/([0-9]+)\..*/),_=null===q?-1:q[1].length,i.indexOf("-")!==-1&&(B=!0),i.indexOf("(")>-1?(M=!0,i=i.slice(1,-1)):i.indexOf("+")>-1&&(O=!0,i=i.replace(/\+/g,"")),i.indexOf("a")>-1&&(g=i.split(".")[0].match(/[0-9]+/g)||["0"],g=parseInt(g[0],10),R=i.indexOf("aK")>=0,P=i.indexOf("aM")>=0,N=i.indexOf("aB")>=0,z=i.indexOf("aT")>=0,L=R||P||N||z,i.indexOf(" a")>-1?(D=" ",i=i.replace(" a","")):i=i.replace("a",""),u=e(t),h=u%3,h=0===h?3:h,g&&0!==j&&(f=3*~~((Math.min(g,u)-h)/3),j/=Math.pow(10,f)),u!==g&&(j>=Math.pow(10,12)&&!L||z?(D+=S[T].abbreviations.trillion,t/=Math.pow(10,12)):j<Math.pow(10,12)&&j>=Math.pow(10,9)&&!L||N?(D+=S[T].abbreviations.billion,t/=Math.pow(10,9)):j<Math.pow(10,9)&&j>=Math.pow(10,6)&&!L||P?(D+=S[T].abbreviations.million,t/=Math.pow(10,6)):(j<Math.pow(10,6)&&j>=Math.pow(10,3)&&!L||R)&&(D+=S[T].abbreviations.thousand,t/=Math.pow(10,3))),c=e(t),g&&c<g&&i.indexOf(".")===-1&&(i+="[.]",i+=n(g-c))),k=0;k<C.length;++k)if(s=C[k],i.indexOf(s.marker)>-1){i.indexOf(" "+s.marker)>-1&&(I=" "),i=i.replace(I+s.marker,""),l=d(t,s.suffixes,s.scale),t=l.value,I+=l.suffix;break}if(i.indexOf("o")>-1&&(i.indexOf(" o")>-1?(H=" ",i=i.replace(" o","")):i=i.replace("o",""),S[T].ordinal&&(H+=S[T].ordinal(t))),i.indexOf("[.]")>-1&&(A=!0,i=i.replace("[.]",".")),m=i.split(".")[1],b=i.indexOf(","),m){var X=[];if(m.indexOf("*")!==-1?(F=t.toString(),X=F.split("."),X.length>1&&(F=r(t,X[1].length,o))):m.indexOf("[")>-1?(m=m.replace("]",""),m=m.split("["),F=r(t,m[0].length+m[1].length,o,m[1].length)):F=r(t,m.length,o),X=F.split("."),p=X[0],X.length>1&&X[1].length){var G=a?D+a:S[T].delimiters.decimal;F=G+X[1]}else F="";A&&0===Number(F.slice(1))&&(F="")}else p=r(t,0,o);return p.indexOf("-")>-1&&(p=p.slice(1),W=!0),p.length<_&&(p=n(_-p.length)+p),b>-1&&(p=p.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+S[T].delimiters.thousands)),0===i.indexOf(".")&&(p=""),w=i.indexOf("("),x=i.indexOf("-"),Y=w<x?(M&&W?"(":"")+(B&&W||!M&&W?"-":""):(B&&W||!M&&W?"-":"")+(M&&W?"(":""),v+Y+(!W&&O&&0!==t?"+":"")+p+F+(H?H:"")+(D&&!a?D:"")+(I?I:"")+(M&&W?")":"")+y}function p(t,e){S[t]=e}function g(t){T=t;var e=S[t].defaults;e&&e.format&&b.defaultFormat(e.format),e&&e.currencyFormat&&b.defaultCurrencyFormat(e.currencyFormat)}function m(){return"undefined"!=typeof process&&void 0===process.browser&&process.title&&(process.title.indexOf("node")!==-1||process.title.indexOf("meteor-tool")>0||"grunt"===process.title||"gulp"===process.title)&&"undefined"!=typeof require}function v(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function y(){var t=Array.prototype.slice.call(arguments);return t.reduce(function(t,e){var n=v(t),i=v(e);return n>i?n:i},-(1/0))}var b,w="1.11.1",x=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],_=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],k={general:{scale:1024,suffixes:_,marker:"bd"},binary:{scale:1024,suffixes:x,marker:"b"},decimal:{scale:1e3,suffixes:_,marker:"d"}},C=[k.general,k.binary,k.decimal],S={},M=S,T="en-US",E=null,O="0,0",A="0$",D="undefined"!=typeof module&&module.exports,R={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",0000 a"},formats:{fourDigits:"0000 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00"}};b=function(e){return e=b.isNumbro(e)?e.value():"string"==typeof e||"number"==typeof e?b.fn.unformat(e):NaN,new t(Number(e))},b.version=w,b.isNumbro=function(e){return e instanceof t},b.setLanguage=function(t,e){console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead");var n=t,i=t.split("-")[0],r=null;M[n]||(Object.keys(M).forEach(function(t){r||t.split("-")[0]!==i||(r=t)}),n=r||e||"en-US"),g(n)},b.setCulture=function(t,e){var n=t,i=t.split("-")[1],r=null;S[n]||(i&&Object.keys(S).forEach(function(t){r||t.split("-")[1]!==i||(r=t)}),n=r||e||"en-US"),g(n)},b.language=function(t,e){if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!t)return T;if(t&&!e){if(!M[t])throw new Error("Unknown language : "+t);g(t)}return!e&&M[t]||p(t,e),b},b.culture=function(t,e){if(!t)return T;if(t&&!e){if(!S[t])throw new Error("Unknown culture : "+t);g(t)}return!e&&S[t]||p(t,e),b},b.languageData=function(t){if(console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"),!t)return M[T];if(!M[t])throw new Error("Unknown language : "+t);return M[t]},b.cultureData=function(t){if(!t)return S[T];if(!S[t])throw new Error("Unknown culture : "+t);return S[t]},b.culture("en-US",R),b.languages=function(){return console.warn("`languages` is deprecated since version 1.6.0. Use `cultures` instead"),M},b.cultures=function(){return S},b.zeroFormat=function(t){E="string"==typeof t?t:null},b.defaultFormat=function(t){O="string"==typeof t?t:"0.0"},b.defaultCurrencyFormat=function(t){A="string"==typeof t?t:"0$"},b.validate=function(t,e){var n,i,r,o,a,s,l,u;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numbro.js: Value is not string. It has been co-erced to: ",t)),t=t.trim(),t=t.replace(/^[+-]?/,""),t.match(/^\d+$/))return!0;if(""===t)return!1;try{l=b.cultureData(e)}catch(c){l=b.cultureData(b.culture())}return r=l.currency.symbol,a=l.abbreviations,n=l.delimiters.decimal,i="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,u=t.match(/^[^\d\.\,]+/),(null===u||(t=t.substr(1),u[0]===r))&&(u=t.match(/[^\d]+$/),(null===u||(t=t.slice(0,-1),u[0]===a.thousand||u[0]===a.million||u[0]===a.billion||u[0]===a.trillion))&&(s=new RegExp(i+"{2}"),!t.match(/[^\d.,]/g)&&(o=t.split(n),!(o.length>2)&&(o.length<2?!!o[0].match(/^\d+.*\d$/)&&!o[0].match(s):""===o[0]?!o[0].match(s)&&!!o[1].match(/^\d+$/):1===o[0].length?!!o[0].match(/^\d+$/)&&!o[0].match(s)&&!!o[1].match(/^\d+$/):!!o[0].match(/^\d+.*\d$/)&&!o[0].match(s)&&!!o[1].match(/^\d+$/)))))},b.loadLanguagesInNode=function(){console.warn("`loadLanguagesInNode` is deprecated since version 1.6.0. Use `loadCulturesInNode` instead"),b.loadCulturesInNode()},b.loadCulturesInNode=function(){var t=require("./languages");for(var e in t)e&&b.culture(e,t[e])},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,i,r=this.length>>>0,o=!1;for(1<arguments.length&&(i=e,o=!0),n=0;r>n;++n)this.hasOwnProperty(n)&&(o?i=t(i,this[n],n,this):(i=this[n],o=!0));if(!o)throw new TypeError("Reduce of empty array with no initial value");return i}),b.fn=t.prototype={clone:function(){return b(this)},format:function(t,e){return o(this,t?t:O,void 0!==e?e:Math.round)},formatCurrency:function(t,e){return s(this,S[T].currency.symbol,t?t:A,void 0!==e?e:Math.round)},formatForeignCurrency:function(t,e,n){return l(this,t,e?e:A,void 0!==n?n:Math.round)},unformat:function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=a(this,t);return isNaN(e)?void 0:e}},binaryByteUnits:function(){return d(this._value,k.binary.suffixes,k.binary.scale).suffix},byteUnits:function(){return d(this._value,k.general.suffixes,k.general.scale).suffix},decimalByteUnits:function(){return d(this._value,k.decimal.suffixes,k.decimal.scale).suffix},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e){return t+n*e}var n=y.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/n,this},subtract:function(t){function e(t,e){return t-n*e}var n=y.call(null,this._value,t);return this._value=[t].reduce(e,this._value*n)/n,this},multiply:function(t){function e(t,e){var n=y(t,e),i=t*n;return i*=e*n,i/=n*n}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e){var n=y(t,e);return t*n/(e*n)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(b(this._value).subtract(t).value())}},m()&&b.loadCulturesInNode(),D?module.exports=b:("undefined"==typeof ender&&(this.numbro=b),"function"==typeof define&&define.amd&&define([],function(){return b}))}.call("undefined"==typeof window?this:window),function(t,e){"use strict";var n;if("object"==typeof exports){try{n=require("moment")}catch(i){}module.exports=e(n)}else"function"==typeof define&&define.amd?define(function(t){var i="moment";try{n=t(i)}catch(r){}return e(n)}):t.Pikaday=e(t.moment)}(this,function(t){"use strict";var e="function"==typeof t,n=!!window.addEventListener,i=window.document,r=window.setTimeout,o=function(t,e,i,r){n?t.addEventListener(e,i,!!r):t.attachEvent("on"+e,i)},a=function(t,e,i,r){n?t.removeEventListener(e,i,!!r):t.detachEvent("on"+e,i)},s=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},l=function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")!==-1},u=function(t,e){l(t,e)||(t.className=""===t.className?e:t.className+" "+e)},c=function(t,e){t.className=s((" "+t.className+" ").replace(" "+e+" "," "))},h=function(t){return/Array/.test(Object.prototype.toString.call(t))},d=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},f=function(t){var e=t.getDay();return 0===e||6===e},p=function(t){return t%4===0&&t%100!==0||t%400===0},g=function(t,e){return[31,p(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},m=function(t){d(t)&&t.setHours(0,0,0,0)},v=function(t,e){return t.getTime()===e.getTime()},y=function(t,e,n){var i,r;for(i in e)r=void 0!==t[i],r&&"object"==typeof e[i]&&null!==e[i]&&void 0===e[i].nodeName?d(e[i])?n&&(t[i]=new Date(e[i].getTime())):h(e[i])?n&&(t[i]=e[i].slice(0)):t[i]=y({},e[i],n):!n&&r||(t[i]=e[i]);return t},b=function(t,e,n){var r;i.createEvent?(r=i.createEvent("HTMLEvents"),r.initEvent(e,!0,!1),r=y(r,n),t.dispatchEvent(r)):i.createEventObject&&(r=i.createEventObject(),r=y(r,n),t.fireEvent("on"+e,r))},w=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},x={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},_=function(t,e,n){for(e+=t.firstDay;e>=7;)e-=7;return n?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},k=function(t){var e=[],n="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),t.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),n="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+t.year+'" data-pika-month="'+t.month+'" data-pika-day="'+t.day+'">'+t.day+"</button></td>"},C=function(t,e,n){var i=new Date(n,0,1),r=Math.ceil(((new Date(n,e,t)-i)/864e5+i.getDay()+1)/7);return'<td class="pika-week">'+r+"</td>"},S=function(t,e,n,i){return'<tr class="pika-row'+(n?" pick-whole-week":"")+(i?" is-selected":"")+'">'+(e?t.reverse():t).join("")+"</tr>"},M=function(t){return"<tbody>"+t.join("")+"</tbody>"},T=function(t){var e,n=[];for(t.showWeekNumber&&n.push("<th></th>"),e=0;e<7;e++)n.push('<th scope="col"><abbr title="'+_(t,e)+'">'+_(t,e,!0)+"</abbr></th>");return"<thead><tr>"+(t.isRTL?n.reverse():n).join("")+"</tr></thead>"},E=function(t,e,n,i,r,o){var a,s,l,u,c,d=t._o,f=n===d.minYear,p=n===d.maxYear,g='<div id="'+o+'" class="pika-title" role="heading" aria-live="assertive">',m=!0,v=!0;for(l=[],a=0;a<12;a++)l.push('<option value="'+(n===r?a-e:12+a-e)+'"'+(a===i?' selected="selected"':"")+(f&&a<d.minMonth||p&&a>d.maxMonth?'disabled="disabled"':"")+">"+d.i18n.months[a]+"</option>");for(u='<div class="pika-label">'+d.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",h(d.yearRange)?(a=d.yearRange[0],s=d.yearRange[1]+1):(a=n-d.yearRange,s=1+n+d.yearRange),l=[];a<s&&a<=d.maxYear;a++)a>=d.minYear&&l.push('<option value="'+a+'"'+(a===n?' selected="selected"':"")+">"+a+"</option>");return c='<div class="pika-label">'+n+d.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",g+=d.showMonthAfterYear?c+u:u+c,f&&(0===i||d.minMonth>=i)&&(m=!1),p&&(11===i||d.maxMonth<=i)&&(v=!1),0===e&&(g+='<button class="pika-prev'+(m?"":" is-disabled")+'" type="button">'+d.i18n.previousMonth+"</button>"),e===t._o.numberOfMonths-1&&(g+='<button class="pika-next'+(v?"":" is-disabled")+'" type="button">'+d.i18n.nextMonth+"</button>"),g+="</div>"},O=function(t,e,n){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+T(t)+M(e)+"</table>"},A=function(a){var s=this,u=s.config(a);s._onMouseDown=function(t){if(s._v){t=t||window.event;var e=t.target||t.srcElement;if(e)if(l(e,"is-disabled")||(!l(e,"pika-button")||l(e,"is-empty")||l(e.parentNode,"is-disabled")?l(e,"pika-prev")?s.prevMonth():l(e,"pika-next")&&s.nextMonth():(s.setDate(new Date(e.getAttribute("data-pika-year"),e.getAttribute("data-pika-month"),e.getAttribute("data-pika-day"))),u.bound&&r(function(){s.hide(),u.blurFieldOnSelect&&u.field&&u.field.blur()},100))),l(e,"pika-select"))s._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}},s._onChange=function(t){t=t||window.event;var e=t.target||t.srcElement;e&&(l(e,"pika-select-month")?s.gotoMonth(e.value):l(e,"pika-select-year")&&s.gotoYear(e.value))},s._onKeyChange=function(t){if(t=t||window.event,s.isVisible())switch(t.keyCode){case 13:case 27:u.field&&u.field.blur();break;case 37:t.preventDefault(),s.adjustDate("subtract",1);break;case 38:s.adjustDate("subtract",7);break;case 39:s.adjustDate("add",1);break;case 40:s.adjustDate("add",7)}},s._onInputChange=function(n){var i;n.firedBy!==s&&(u.parse?i=u.parse(u.field.value,u.format):e?(i=t(u.field.value,u.format,u.formatStrict),i=i&&i.isValid()?i.toDate():null):i=new Date(Date.parse(u.field.value)),d(i)&&s.setDate(i),s._v||s.show())},s._onInputFocus=function(){s.show()},s._onInputClick=function(){s.show()},s._onInputBlur=function(){var t=i.activeElement;do if(l(t,"pika-single"))return;while(t=t.parentNode);s._c||(s._b=r(function(){s.hide()},50)),s._c=!1},s._onClick=function(t){t=t||window.event;var e=t.target||t.srcElement,i=e;if(e){!n&&l(e,"pika-select")&&(e.onchange||(e.setAttribute("onchange","return;"),o(e,"change",s._onChange)));do if(l(i,"pika-single")||i===u.trigger)return;while(i=i.parentNode);s._v&&e!==u.trigger&&i!==u.trigger&&s.hide()}},s.el=i.createElement("div"),s.el.className="pika-single"+(u.isRTL?" is-rtl":"")+(u.theme?" "+u.theme:""),o(s.el,"mousedown",s._onMouseDown,!0),o(s.el,"touchend",s._onMouseDown,!0),o(s.el,"change",s._onChange),o(i,"keydown",s._onKeyChange),u.field&&(u.container?u.container.appendChild(s.el):u.bound?i.body.appendChild(s.el):u.field.parentNode.insertBefore(s.el,u.field.nextSibling),o(u.field,"change",s._onInputChange),u.defaultDate||(e&&u.field.value?u.defaultDate=t(u.field.value,u.format).toDate():u.defaultDate=new Date(Date.parse(u.field.value)),u.setDefaultDate=!0));var c=u.defaultDate;d(c)?u.setDefaultDate?s.setDate(c,!0):s.gotoDate(c):s.gotoDate(new Date),u.bound?(this.hide(),s.el.className+=" is-bound",o(u.trigger,"click",s._onInputClick),o(u.trigger,"focus",s._onInputFocus),o(u.trigger,"blur",s._onInputBlur)):this.show()};return A.prototype={config:function(t){this._o||(this._o=y({},x,!0));var e=y(this._o,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme="string"==typeof e.theme&&e.theme?e.theme:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn="function"==typeof e.disableDayFn?e.disableDayFn:null;var n=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=n>4?4:n,d(e.minDate)||(e.minDate=!1),d(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),h(e.yearRange)){var i=(new Date).getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||i,e.yearRange[1]=parseInt(e.yearRange[1],10)||i}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||x.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(n){return n=n||this._o.format,d(this._d)?this._o.toString?this._o.toString(this._d,n):e?t(this._d).format(n):this._d.toDateString():""},getMoment:function(){return e?t(this._d):null},setMoment:function(n,i){e&&t.isMoment(n)&&this.setDate(n.toDate(),i)},getDate:function(){return d(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this._o.field&&(this._o.field.value="",b(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),d(t)){var n=this._o.minDate,i=this._o.maxDate;d(n)&&t<n?t=n:d(i)&&t>i&&(t=i),this._d=new Date(t.getTime()),m(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),b(this._o.field,"change",{firedBy:this})),e||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(t){var e=!0;if(d(t)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=t.getTime();
i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),e=r<n.getTime()||i.getTime()<r}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(t,e){var n,i=this.getDate()||new Date,r=24*parseInt(e)*60*60*1e3;"add"===t?n=new Date(i.valueOf()+r):"subtract"===t&&(n=new Date(i.valueOf()-r)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=w(this.calendars[0]);for(var t=1;t<this._o.numberOfMonths;t++)this.calendars[t]=w({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){t instanceof Date?(m(t),this._o.minDate=t,this._o.minYear=t.getFullYear(),this._o.minMonth=t.getMonth()):(this._o.minDate=x.minDate,this._o.minYear=x.minYear,this._o.minMonth=x.minMonth,this._o.startRange=x.startRange),this.draw()},setMaxDate:function(t){t instanceof Date?(m(t),this._o.maxDate=t,this._o.maxYear=t.getFullYear(),this._o.maxMonth=t.getMonth()):(this._o.maxDate=x.maxDate,this._o.maxYear=x.maxYear,this._o.maxMonth=x.maxMonth,this._o.endRange=x.endRange),this.draw()},setStartRange:function(t){this._o.startRange=t},setEndRange:function(t){this._o.endRange=t},draw:function(t){if(this._v||t){var e,n=this._o,i=n.minYear,o=n.maxYear,a=n.minMonth,s=n.maxMonth,l="";this._y<=i&&(this._y=i,!isNaN(a)&&this._m<a&&(this._m=a)),this._y>=o&&(this._y=o,!isNaN(s)&&this._m>s&&(this._m=s)),e="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var u=0;u<n.numberOfMonths;u++)l+='<div class="pika-lendar">'+E(this,u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year,e)+this.render(this.calendars[u].year,this.calendars[u].month,e)+"</div>";this.el.innerHTML=l,n.bound&&"hidden"!==n.field.type&&r(function(){n.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label","Use the arrow keys to pick a date")}},adjustPosition:function(){var t,e,n,r,o,a,s,l,u,c;if(!this._o.container){if(this.el.style.position="absolute",t=this._o.trigger,e=t,n=this.el.offsetWidth,r=this.el.offsetHeight,o=window.innerWidth||i.documentElement.clientWidth,a=window.innerHeight||i.documentElement.clientHeight,s=window.pageYOffset||i.body.scrollTop||i.documentElement.scrollTop,"function"==typeof t.getBoundingClientRect)c=t.getBoundingClientRect(),l=c.left+window.pageXOffset,u=c.bottom+window.pageYOffset;else for(l=e.offsetLeft,u=e.offsetTop+e.offsetHeight;e=e.offsetParent;)l+=e.offsetLeft,u+=e.offsetTop;(this._o.reposition&&l+n>o||this._o.position.indexOf("right")>-1&&l-n+t.offsetWidth>0)&&(l=l-n+t.offsetWidth),(this._o.reposition&&u+r>a+s||this._o.position.indexOf("top")>-1&&u-r-t.offsetHeight>0)&&(u=u-r-t.offsetHeight),this.el.style.left=l+"px",this.el.style.top=u+"px"}},render:function(t,e,n){var i=this._o,r=new Date,o=g(t,e),a=new Date(t,e,1).getDay(),s=[],l=[];m(r),i.firstDay>0&&(a-=i.firstDay,a<0&&(a+=7));for(var u=0===e?11:e-1,c=11===e?0:e+1,h=0===e?t-1:t,p=11===e?t+1:t,y=g(h,u),b=o+a,w=b;w>7;)w-=7;b+=7-w;for(var x=!1,_=0,M=0;_<b;_++){var T=new Date(t,e,1+(_-a)),E=!!d(this._d)&&v(T,this._d),A=v(T,r),D=i.events.indexOf(T.toDateString())!==-1,R=_<a||_>=o+a,P=1+(_-a),N=e,z=t,L=i.startRange&&v(i.startRange,T),I=i.endRange&&v(i.endRange,T),H=i.startRange&&i.endRange&&i.startRange<T&&T<i.endRange,j=i.minDate&&T<i.minDate||i.maxDate&&T>i.maxDate||i.disableWeekends&&f(T)||i.disableDayFn&&i.disableDayFn(T);R&&(_<a?(P=y+P,N=u,z=h):(P-=o,N=c,z=p));var F={day:P,month:N,year:z,hasEvent:D,isSelected:E,isToday:A,isDisabled:j,isEmpty:R,isStartRange:L,isEndRange:I,isInRange:H,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&E&&(x=!0),l.push(k(F)),7===++M&&(i.showWeekNumber&&l.unshift(C(_-a,e,t)),s.push(S(l,i.isRTL,i.pickWholeWeek,x)),l=[],M=0,x=!1)}return O(i,s,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),c(this.el,"is-hidden"),this._o.bound&&(o(i,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var t=this._v;t!==!1&&(this._o.bound&&a(i,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",u(this.el,"is-hidden"),this._v=!1,void 0!==t&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),a(this.el,"mousedown",this._onMouseDown,!0),a(this.el,"touchend",this._onMouseDown,!0),a(this.el,"change",this._onChange),a(i,"keydown",this._onKeyChange),this._o.field&&(a(this._o.field,"change",this._onInputChange),this._o.bound&&(a(this._o.trigger,"click",this._onInputClick),a(this._o.trigger,"focus",this._onInputFocus),a(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},A}),function(t,e,n){"use strict";function i(e){if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),this.support){this.supportDirectory=/Chrome/.test(t.navigator.userAgent),this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,413,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:o},this.opts={},this.events={};var n=this;this.onDrop=function(t){n.opts.onDropStopPropagation&&t.stopPropagation(),t.preventDefault();var e=t.dataTransfer;e.items&&e.items[0]&&e.items[0].webkitGetAsEntry?n.webkitReadDataTransfer(t):n.addFiles(e.files,t)},this.preventEvent=function(t){t.preventDefault()},this.opts=i.extend({},this.defaults,e||{})}}function r(t,e){this.flowObj=t,this.bytes=null,this.file=e,this.name=e.fileName||e.name,this.size=e.size,this.relativePath=e.relativePath||e.webkitRelativePath||this.name,this.uniqueIdentifier=t.generateUniqueIdentifier(e),this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function o(t,e,n,i,r){var o="slice";t.file.slice?o="slice":t.file.mozSlice?o="mozSlice":t.file.webkitSlice&&(o="webkitSlice"),r.readFinished(t.file[o](e,n,i))}function a(t,e,n){this.flowObj=t,this.fileObj=e,this.offset=n,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=this.flowObj.opts.chunkSize,this.startByte=this.offset*this.chunkSize,this.computeEndByte=function(){var t=Math.min(this.fileObj.size,(this.offset+1)*this.chunkSize);return this.fileObj.size-t<this.chunkSize&&!this.flowObj.opts.forceChunkSize&&(t=this.fileObj.size),t},this.endByte=this.computeEndByte(),this.xhr=null;var i=this;this.event=function(t,e){e=Array.prototype.slice.call(arguments),e.unshift(i),i.fileObj.chunkEvent.apply(i.fileObj,e)},this.progressHandler=function(t){t.lengthComputable&&(i.loaded=t.loaded,i.total=t.total),i.event("progress",t)},this.testHandler=function(t){var e=i.status(!0);"error"===e?(i.event(e,i.message()),i.flowObj.uploadNextChunk()):"success"===e?(i.tested=!0,i.event(e,i.message()),i.flowObj.uploadNextChunk()):i.fileObj.paused||(i.tested=!0,i.send())},this.doneHandler=function(t){var e=i.status();if("success"===e||"error"===e)delete this.data,i.event(e,i.message()),i.flowObj.uploadNextChunk();else{i.event("retry",i.message()),i.pendingRetry=!0,i.abort(),i.retries++;var n=i.flowObj.opts.chunkRetryInterval;null!==n?setTimeout(function(){i.send()},n):i.send()}}}function s(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function l(t,e){return"function"==typeof t&&(e=Array.prototype.slice.call(arguments),t=t.apply(null,e.slice(1))),t}function u(t,e){setTimeout(t.bind(e),0)}function c(t,e){return h(arguments,function(e){e!==t&&h(e,function(e,n){t[n]=e})}),t}function h(t,e,n){if(t){var i;if("undefined"!=typeof t.length){for(i=0;i<t.length;i++)if(e.call(n,t[i],i)===!1)return}else for(i in t)if(t.hasOwnProperty(i)&&e.call(n,t[i],i)===!1)return}}var d=t.navigator.msPointerEnabled;i.prototype={on:function(t,e){t=t.toLowerCase(),this.events.hasOwnProperty(t)||(this.events[t]=[]),this.events[t].push(e)},off:function(t,e){t!==n?(t=t.toLowerCase(),e!==n?this.events.hasOwnProperty(t)&&s(this.events[t],e):delete this.events[t]):this.events={}},fire:function(t,e){e=Array.prototype.slice.call(arguments),t=t.toLowerCase();var n=!1;return this.events.hasOwnProperty(t)&&h(this.events[t],function(t){n=t.apply(this,e.slice(1))===!1||n},this),"catchall"!=t&&(e.unshift("catchAll"),n=this.fire.apply(this,e)===!1||n),!n},webkitReadDataTransfer:function(t){function e(t){t.readEntries(function(o){o.length?(a+=o.length,h(o,function(t){if(t.isFile){var r=t.fullPath;t.file(function(t){n(t,r)},i)}else t.isDirectory&&e(t.createReader())}),e(t)):r()},i)}function n(t,e){t.relativePath=e.substring(1),s.push(t),r()}function i(t){throw t}function r(){0==--a&&o.addFiles(s,t)}var o=this,a=t.dataTransfer.items.length,s=[];h(t.dataTransfer.items,function(t){var i=t.webkitGetAsEntry();return i?void(i.isFile?n(t.getAsFile(),i.fullPath):e(i.createReader())):void r()})},generateUniqueIdentifier:function(t){var e=this.opts.generateUniqueIdentifier;if("function"==typeof e)return e(t);var n=t.relativePath||t.webkitRelativePath||t.fileName||t.name;return t.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},uploadNextChunk:function(t){var e=!1;if(this.opts.prioritizeFirstAndLastChunk&&(h(this.files,function(t){return!t.paused&&t.chunks.length&&"pending"===t.chunks[0].status()?(t.chunks[0].send(),e=!0,!1):!t.paused&&t.chunks.length>1&&"pending"===t.chunks[t.chunks.length-1].status()?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return e;if(h(this.files,function(t){if(t.paused||h(t.chunks,function(t){if("pending"===t.status())return t.send(),e=!0,!1}),e)return!1}),e)return!0;var n=!1;return h(this.files,function(t){if(!t.isComplete())return n=!0,!1}),n||t||u(function(){this.fire("complete")},this),!1},assignBrowse:function(t,n,i,r){t instanceof Element&&(t=[t]),h(t,function(t){var o;"INPUT"===t.tagName&&"file"===t.type?o=t:(o=e.createElement("input"),o.setAttribute("type","file"),c(o.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),t.appendChild(o),t.addEventListener("click",function(){o.click()},!1)),this.opts.singleFile||i||o.setAttribute("multiple","multiple"),n&&o.setAttribute("webkitdirectory","webkitdirectory"),h(r,function(t,e){o.setAttribute(e,t)});var a=this;o.addEventListener("change",function(t){t.target.value&&(a.addFiles(t.target.files,t),t.target.value="")},!1)},this)},assignDrop:function(t){"undefined"==typeof t.length&&(t=[t]),h(t,function(t){t.addEventListener("dragover",this.preventEvent,!1),t.addEventListener("dragenter",this.preventEvent,!1),t.addEventListener("drop",this.onDrop,!1)},this)},unAssignDrop:function(t){"undefined"==typeof t.length&&(t=[t]),h(t,function(t){t.removeEventListener("dragover",this.preventEvent),t.removeEventListener("dragenter",this.preventEvent),t.removeEventListener("drop",this.onDrop)},this)},isUploading:function(){var t=!1;return h(this.files,function(e){if(e.isUploading())return t=!0,!1}),t},_shouldUploadNext:function(){var t=0,e=!0,n=this.opts.simultaneousUploads;return h(this.files,function(i){h(i.chunks,function(i){if("uploading"===i.status()&&(t++,t>=n))return e=!1,!1})}),e&&t},upload:function(){var t=this._shouldUploadNext();if(t!==!1){this.fire("uploadStart");for(var e=!1,n=1;n<=this.opts.simultaneousUploads-t;n++)e=this.uploadNextChunk(!0)||e;e||u(function(){this.fire("complete")},this)}},resume:function(){h(this.files,function(t){t.resume()})},pause:function(){h(this.files,function(t){t.pause()})},cancel:function(){for(var t=this.files.length-1;t>=0;t--)this.files[t].cancel()},progress:function(){var t=0,e=0;return h(this.files,function(n){t+=n.progress()*n.size,e+=n.size}),e>0?t/e:0},addFile:function(t,e){this.addFiles([t],e)},addFiles:function(t,e){var n=[];h(t,function(t){if((!d||d&&t.size>0)&&(t.size%4096!==0||"."!==t.name&&"."!==t.fileName)&&(this.opts.allowDuplicateUploads||!this.getFromUniqueIdentifier(this.generateUniqueIdentifier(t)))){var i=new r(this,t);this.fire("fileAdded",i,e)&&n.push(i)}},this),this.fire("filesAdded",n,e)&&(h(n,function(t){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(t)},this),this.fire("filesSubmitted",n,e))},removeFile:function(t){for(var e=this.files.length-1;e>=0;e--)this.files[e]===t&&(this.files.splice(e,1),t.abort(),this.fire("fileRemoved",t))},getFromUniqueIdentifier:function(t){var e=!1;return h(this.files,function(n){n.uniqueIdentifier===t&&(e=n)}),e},getSize:function(){var t=0;return h(this.files,function(e){t+=e.size}),t},sizeUploaded:function(){var t=0;return h(this.files,function(e){t+=e.sizeUploaded()}),t},timeRemaining:function(){var t=0,e=0;return h(this.files,function(n){n.paused||n.error||(t+=n.size-n.sizeUploaded(),e+=n.averageSpeed)}),t&&!e?Number.POSITIVE_INFINITY:t||e?Math.floor(t/e):0}},r.prototype={measureSpeed:function(){var t=Date.now()-this._lastProgressCallback;if(t){var e=this.flowObj.opts.speedSmoothingFactor,n=this.sizeUploaded();this.currentSpeed=Math.max((n-this._prevUploadedSize)/t*1e3,0),this.averageSpeed=e*this.currentSpeed+(1-e)*this.averageSpeed,this._prevUploadedSize=n}},chunkEvent:function(t,e,n){switch(e){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this,t),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,n,t),this.flowObj.fire("error",n,this,t);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this,t),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,n,t));break;case"retry":this.flowObj.fire("fileRetry",this,t)}},pause:function(){this.paused=!0,this.abort()},resume:function(){this.paused=!1,this.flowObj.upload()},abort:function(t){this.currentSpeed=0,this.averageSpeed=0;var e=this.chunks;t&&(this.chunks=[]),h(e,function(t){"uploading"===t.status()&&(t.abort(),this.flowObj.uploadNextChunk())},this)},cancel:function(){this.flowObj.removeFile(this)},retry:function(){this.bootstrap(),this.flowObj.upload()},bootstrap:function(){"function"==typeof this.flowObj.opts.initFileFn&&this.flowObj.opts.initFileFn(this),this.abort(!0),this.error=!1,this._prevProgress=0;for(var t=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,e=Math.max(t(this.size/this.flowObj.opts.chunkSize),1),n=0;n<e;n++)this.chunks.push(new a(this.flowObj,this,n))},progress:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var t=0;h(this.chunks,function(e){t+=e.progress()*(e.endByte-e.startByte)});var e=t/this.size;return this._prevProgress=Math.max(this._prevProgress,e>.9999?1:e),this._prevProgress},isUploading:function(){var t=!1;return h(this.chunks,function(e){if("uploading"===e.status())return t=!0,!1}),t},isComplete:function(){var t=!1;return h(this.chunks,function(e){var n=e.status();if("pending"===n||"uploading"===n||"reading"===n||1===e.preprocessState||1===e.readState)return t=!0,!1}),!t},sizeUploaded:function(){var t=0;return h(this.chunks,function(e){t+=e.sizeUploaded()}),t},timeRemaining:function(){if(this.paused||this.error)return 0;var t=this.size-this.sizeUploaded();return t&&!this.averageSpeed?Number.POSITIVE_INFINITY:t||this.averageSpeed?Math.floor(t/this.averageSpeed):0},getType:function(){return this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.name.substr((~-this.name.lastIndexOf(".")>>>0)+2).toLowerCase()}},a.prototype={getParams:function(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.flowObj.opts.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObj.size,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget:function(t,e){return t+=t.indexOf("?")<0?"?":"&",t+e.join("&")},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);var t=l(this.flowObj.opts.testMethod,this.fileObj,this),e=this.prepareXhrRequest(t,!0);this.xhr.send(e)},preprocessFinished:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()},readFinished:function(t){this.readState=2,this.bytes=t,this.send()},send:function(){var t=this.flowObj.opts.preprocess,e=this.flowObj.opts.readFileFn;if("function"==typeof t)switch(this.preprocessState){case 0:return this.preprocessState=1,void t(this);case 1:return}switch(this.readState){case 0:return this.readState=1,void e(this.fileObj,this.startByte,this.endByte,this.fileObj.file.type,this);case 1:return}if(this.flowObj.opts.testChunks&&!this.tested)return void this.test();this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);var n=l(this.flowObj.opts.uploadMethod,this.fileObj,this),i=this.prepareXhrRequest(n,!1,this.flowObj.opts.method,this.bytes);this.xhr.send(i)},abort:function(){var t=this.xhr;this.xhr=null,t&&t.abort()},status:function(t){return 1===this.readState?"reading":this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":this.flowObj.opts.successStatuses.indexOf(this.xhr.status)>-1?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||!t&&this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var t=this.status();return"success"===t||"error"===t?1:"pending"===t?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var t=this.endByte-this.startByte;return"success"!==this.status()&&(t=this.progress()*t),t},prepareXhrRequest:function(t,e,n,i){var r=l(this.flowObj.opts.query,this.fileObj,this,e);r=c(r,this.getParams());var o=l(this.flowObj.opts.target,this.fileObj,this,e),a=null;if("GET"===t||"octet"===n){var s=[];h(r,function(t,e){s.push([encodeURIComponent(e),encodeURIComponent(t)].join("="))}),o=this.getTarget(o,s),a=i||null}else a=new FormData,h(r,function(t,e){a.append(e,t)}),a.append(this.flowObj.opts.fileParameterName,i,this.fileObj.file.name);return this.xhr.open(t,o,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,h(l(this.flowObj.opts.headers,this.fileObj,this,e),function(t,e){this.xhr.setRequestHeader(e,t)},this),a}},i.evalOpts=l,i.extend=c,i.each=h,i.FlowFile=r,i.FlowChunk=a,i.version="2.11.2","object"==typeof module&&module&&"object"==typeof module.exports?module.exports=i:(t.Flow=i,"function"==typeof define&&define.amd&&define("flow",[],function(){return i}))}(window,document),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t;return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){function i(t,e){for(;t&&t.nodeType!==r;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var r=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}e.exports=i},{}],2:[function(t,e,n){function i(t,e,n,i,o){var a=r.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}function r(t,e,n,i){return function(n){n.delegateTarget=o(n.target,e),n.delegateTarget&&i.call(t,n)}}var o=t("./closest");e.exports=i},{"./closest":1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},{}],4:[function(t,e,n){function i(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!s.string(e))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(t))return r(t,e,n);if(s.nodeList(t))return o(t,e,n);if(s.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function o(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return l(document.body,t,e,n)}var s=t("./is"),l=t("delegate");e.exports=i},{"./is":3,delegate:2}],5:[function(t,e,n){function i(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(t),i.removeAllRanges(),i.addRange(r),e=i.toString()}return e}e.exports=i},{}],6:[function(t,e,n){function i(){}i.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){r.off(t,i),e.apply(n,arguments)}var r=this;return i._=e,this.on(t,i,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,a=i.length;o<a;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}},e.exports=i},{}],7:[function(e,n,i){!function(r,o){if("function"==typeof t&&t.amd)t(["module","select"],o);else if("undefined"!=typeof i)o(n,e("select"));else{var a={exports:{}};o(a,r.select),r.clipboardAction=a.exports}}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(e),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e){i(this,t),this.resolveOptions(e),this.initSelection()}return a(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r["default"])(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r["default"])(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=s})},{select:5}],8:[function(e,n,i){!function(r,o){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],o);else if("undefined"!=typeof i)o(n,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var a={exports:{}};o(a,r.clipboardAction,r.tinyEmitter,r.goodListener),r.clipboard=a.exports}}(this,function(t,e,n,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var u=r(e),c=r(n),h=r(i),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=function(t){function e(t,n){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.resolveOptions(n),i.listenClick(t),i}return s(e,t),f(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===d(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,h["default"])(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u["default"]({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return l("action",t)}},{key:"defaultTarget",value:function(t){var e=l("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return l("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(c["default"]);t.exports=p})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),function(){function t(t){function e(e,n,i,r,o,a){for(;o>=0&&o<a;o+=t){var s=r?r[o]:o;i=n(i,e[s],s,e)}return i}return function(n,i,r,o){i=b(i,o,4);var a=!M(n)&&y.keys(n),s=(a||n).length,l=t>0?0:s-1;return arguments.length<3&&(r=n[a?a[l]:l],l+=t),e(n,i,r,a,l,s)}}function e(t){return function(e,n,i){n=w(n,i);for(var r=S(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(n(e[o],o,e))return o;return-1}}function n(t,e,n){return function(i,r,o){var a=0,s=S(i);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=e(c.call(i,a,s),y.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(i[o]===r)return o;return-1}}function i(t,e){var n=D.length,i=t.constructor,r=y.isFunction(i)&&i.prototype||s,o="constructor";for(y.has(t,o)&&!y.contains(e,o)&&e.push(o);n--;)o=D[n],o in t&&t[o]!==r[o]&&!y.contains(e,o)&&e.push(o)}var r=this,o=r._,a=Array.prototype,s=Object.prototype,l=Function.prototype,u=a.push,c=a.slice,h=s.toString,d=s.hasOwnProperty,f=Array.isArray,p=Object.keys,g=l.bind,m=Object.create,v=function(){},y=function(t){
return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):r._=y,y.VERSION="1.8.3";var b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}},w=function(t,e,n){return null==t?y.identity:y.isFunction(t)?b(t,e,n):y.isObject(t)?y.matcher(t):y.property(t)};y.iteratee=function(t,e){return w(t,e,1/0)};var x=function(t,e){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],a=t(o),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}},_=function(t){if(!y.isObject(t))return{};if(m)return m(t);v.prototype=t;var e=new v;return v.prototype=null,e},k=function(t){return function(e){return null==e?void 0:e[t]}},C=Math.pow(2,53)-1,S=k("length"),M=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=C};y.each=y.forEach=function(t,e,n){e=b(e,n);var i,r;if(M(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var o=y.keys(t);for(i=0,r=o.length;i<r;i++)e(t[o[i]],o[i],t)}return t},y.map=y.collect=function(t,e,n){e=w(e,n);for(var i=!M(t)&&y.keys(t),r=(i||t).length,o=Array(r),a=0;a<r;a++){var s=i?i[a]:a;o[a]=e(t[s],s,t)}return o},y.reduce=y.foldl=y.inject=t(1),y.reduceRight=y.foldr=t(-1),y.find=y.detect=function(t,e,n){var i;if(i=M(t)?y.findIndex(t,e,n):y.findKey(t,e,n),void 0!==i&&i!==-1)return t[i]},y.filter=y.select=function(t,e,n){var i=[];return e=w(e,n),y.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},y.reject=function(t,e,n){return y.filter(t,y.negate(w(e)),n)},y.every=y.all=function(t,e,n){e=w(e,n);for(var i=!M(t)&&y.keys(t),r=(i||t).length,o=0;o<r;o++){var a=i?i[o]:o;if(!e(t[a],a,t))return!1}return!0},y.some=y.any=function(t,e,n){e=w(e,n);for(var i=!M(t)&&y.keys(t),r=(i||t).length,o=0;o<r;o++){var a=i?i[o]:o;if(e(t[a],a,t))return!0}return!1},y.contains=y.includes=y.include=function(t,e,n,i){return M(t)||(t=y.values(t)),("number"!=typeof n||i)&&(n=0),y.indexOf(t,e,n)>=0},y.invoke=function(t,e){var n=c.call(arguments,2),i=y.isFunction(e);return y.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})},y.pluck=function(t,e){return y.map(t,y.property(e))},y.where=function(t,e){return y.filter(t,y.matcher(e))},y.findWhere=function(t,e){return y.find(t,y.matcher(e))},y.max=function(t,e,n){var i,r,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=M(t)?t:y.values(t);for(var s=0,l=t.length;s<l;s++)i=t[s],i>o&&(o=i)}else e=w(e,n),y.each(t,function(t,n,i){r=e(t,n,i),(r>a||r===-(1/0)&&o===-(1/0))&&(o=t,a=r)});return o},y.min=function(t,e,n){var i,r,o=1/0,a=1/0;if(null==e&&null!=t){t=M(t)?t:y.values(t);for(var s=0,l=t.length;s<l;s++)i=t[s],i<o&&(o=i)}else e=w(e,n),y.each(t,function(t,n,i){r=e(t,n,i),(r<a||r===1/0&&o===1/0)&&(o=t,a=r)});return o},y.shuffle=function(t){for(var e,n=M(t)?t:y.values(t),i=n.length,r=Array(i),o=0;o<i;o++)e=y.random(0,o),e!==o&&(r[o]=r[e]),r[e]=n[o];return r},y.sample=function(t,e,n){return null==e||n?(M(t)||(t=y.values(t)),t[y.random(t.length-1)]):y.shuffle(t).slice(0,Math.max(0,e))},y.sortBy=function(t,e,n){return e=w(e,n),y.pluck(y.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,i){var r={};return n=w(n,i),y.each(e,function(i,o){var a=n(i,o,e);t(r,i,a)}),r}};y.groupBy=T(function(t,e,n){y.has(t,n)?t[n].push(e):t[n]=[e]}),y.indexBy=T(function(t,e,n){t[n]=e}),y.countBy=T(function(t,e,n){y.has(t,n)?t[n]++:t[n]=1}),y.toArray=function(t){return t?y.isArray(t)?c.call(t):M(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:M(t)?t.length:y.keys(t).length},y.partition=function(t,e,n){e=w(e,n);var i=[],r=[];return y.each(t,function(t,n,o){(e(t,n,o)?i:r).push(t)}),[i,r]},y.first=y.head=y.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:y.initial(t,t.length-e)},y.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},y.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:y.rest(t,Math.max(0,t.length-e))},y.rest=y.tail=y.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},y.compact=function(t){return y.filter(t,y.identity)};var E=function(t,e,n,i){for(var r=[],o=0,a=i||0,s=S(t);a<s;a++){var l=t[a];if(M(l)&&(y.isArray(l)||y.isArguments(l))){e||(l=E(l,e,n));var u=0,c=l.length;for(r.length+=c;u<c;)r[o++]=l[u++]}else n||(r[o++]=l)}return r};y.flatten=function(t,e){return E(t,e,!1)},y.without=function(t){return y.difference(t,c.call(arguments,1))},y.uniq=y.unique=function(t,e,n,i){y.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=w(n,i));for(var r=[],o=[],a=0,s=S(t);a<s;a++){var l=t[a],u=n?n(l,a,t):l;e?(a&&o===u||r.push(l),o=u):n?y.contains(o,u)||(o.push(u),r.push(l)):y.contains(r,l)||r.push(l)}return r},y.union=function(){return y.uniq(E(arguments,!0,!0))},y.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=S(t);i<r;i++){var o=t[i];if(!y.contains(e,o)){for(var a=1;a<n&&y.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},y.difference=function(t){var e=E(arguments,!0,!0,1);return y.filter(t,function(t){return!y.contains(e,t)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(t){for(var e=t&&y.max(t,S).length||0,n=Array(e),i=0;i<e;i++)n[i]=y.pluck(t,i);return n},y.object=function(t,e){for(var n={},i=0,r=S(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},y.findIndex=e(1),y.findLastIndex=e(-1),y.sortedIndex=function(t,e,n,i){n=w(n,i,1);for(var r=n(e),o=0,a=S(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<r?o=s+1:a=s}return o},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;o<i;o++,t+=n)r[o]=t;return r};var O=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=_(t.prototype),a=t.apply(o,r);return y.isObject(a)?a:o};y.bind=function(t,e){if(g&&t.bind===g)return g.apply(t,c.call(arguments,1));if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),i=function(){return O(t,i,e,this,n.concat(c.call(arguments)))};return i},y.partial=function(t){var e=c.call(arguments,1),n=function(){for(var i=0,r=e.length,o=Array(r),a=0;a<r;a++)o[a]=e[a]===y?arguments[i++]:e[a];for(;i<arguments.length;)o.push(arguments[i++]);return O(t,n,this,this,o)};return n},y.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)n=arguments[e],t[n]=y.bind(t[n],t);return t},y.memoize=function(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return y.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},y.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},y.defer=y.partial(y.delay,y,1),y.throttle=function(t,e,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:y.now(),a=null,o=t.apply(i,r),a||(i=r=null)};return function(){var u=y.now();s||n.leading!==!1||(s=u);var c=e-(u-s);return i=this,r=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=u,o=t.apply(i,r),a||(i=r=null)):a||n.trailing===!1||(a=setTimeout(l,c)),o}},y.debounce=function(t,e,n){var i,r,o,a,s,l=function(){var u=y.now()-a;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,n||(s=t.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=y.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(s=t.apply(o,r),o=r=null),s}},y.wrap=function(t,e){return y.partial(e,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},y.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},y.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},y.once=y.partial(y.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(t){if(!y.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)y.has(t,n)&&e.push(n);return A&&i(t,e),e},y.allKeys=function(t){if(!y.isObject(t))return[];var e=[];for(var n in t)e.push(n);return A&&i(t,e),e},y.values=function(t){for(var e=y.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i},y.mapObject=function(t,e,n){e=w(e,n);for(var i,r=y.keys(t),o=r.length,a={},s=0;s<o;s++)i=r[s],a[i]=e(t[i],i,t);return a},y.pairs=function(t){for(var e=y.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},y.invert=function(t){for(var e={},n=y.keys(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e},y.functions=y.methods=function(t){var e=[];for(var n in t)y.isFunction(t[n])&&e.push(n);return e.sort()},y.extend=x(y.allKeys),y.extendOwn=y.assign=x(y.keys),y.findKey=function(t,e,n){e=w(e,n);for(var i,r=y.keys(t),o=0,a=r.length;o<a;o++)if(i=r[o],e(t[i],i,t))return i},y.pick=function(t,e,n){var i,r,o={},a=t;if(null==a)return o;y.isFunction(e)?(r=y.allKeys(a),i=b(e,n)):(r=E(arguments,!1,!1,1),i=function(t,e,n){return e in n},a=Object(a));for(var s=0,l=r.length;s<l;s++){var u=r[s],c=a[u];i(c,u,a)&&(o[u]=c)}return o},y.omit=function(t,e,n){if(y.isFunction(e))e=y.negate(e);else{var i=y.map(E(arguments,!1,!1,1),String);e=function(t,e){return!y.contains(i,e)}}return y.pick(t,e,n)},y.defaults=x(y.allKeys,!0),y.create=function(t,e){var n=_(t);return e&&y.extendOwn(n,e),n},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,e){return e(t),t},y.isMatch=function(t,e){var n=y.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;o<i;o++){var a=n[o];if(e[a]!==r[a]||!(a in r))return!1}return!0};var R=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof y&&(t=t._wrapped),e instanceof y&&(e=e._wrapped);var r=h.call(t);if(r!==h.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),o){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!R(t[l],e[l],n,i))return!1}else{var u,c=y.keys(t);if(l=c.length,y.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!y.has(e,u)||!R(t[u],e[u],n,i))return!1}return n.pop(),i.pop(),!0};y.isEqual=function(t,e){return R(t,e)},y.isEmpty=function(t){return null==t||(M(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length)},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=f||function(t){return"[object Array]"===h.call(t)},y.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){y["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return y.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&t!==+t},y.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,e){return null!=t&&d.call(t,e)},y.noConflict=function(){return r._=o,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=k,y.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(e){return y.isMatch(e,t)}},y.times=function(t,e,n){var i=Array(Math.max(0,t));e=b(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},y.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=y.invert(P),z=function(t){var e=function(e){return t[e]},n="(?:"+y.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};y.escape=z(P),y.unescape=z(N),y.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),y.isFunction(i)?i.call(t):i};var L=0;y.uniqueId=function(t){var e=++L+"";return t?t+e:e},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g,F=function(t){return"\\"+H[t]};y.template=function(t,e,n){!e&&n&&(e=n),e=y.defaults({},e,y.templateSettings);var i=RegExp([(e.escape||I).source,(e.interpolate||I).source,(e.evaluate||I).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,a,s){return o+=t.slice(r,s).replace(j,F),r=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var l=function(t){return a.call(this,t,y)},u=e.variable||"obj";return l.source="function("+u+"){\n"+o+"}",l},y.chain=function(t){var e=y(t);return e._chain=!0,e};var B=function(t,e){return t._chain?y(e).chain():e};y.mixin=function(t){y.each(y.functions(t),function(e){var n=y[e]=t[e];y.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),B(this,n.apply(y,t))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];y.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],B(this,n)}}),y.each(["concat","join","slice"],function(t){var e=a[t];y.prototype[t]=function(){return B(this,e.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function i(t){return null===t?NaN:+t}function r(t){return!isNaN(t)}function o(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}function a(t){return t.length}function s(t){for(var e=1;t*e%1;)e*=10;return e}function l(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(t){return(t+="")===xa||t[0]===_a?_a+t:t}function h(t){return(t+="")[0]===_a?t.slice(1):t}function d(t){return c(t)in this._}function f(t){return(t=c(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(h(e));return t}function g(){var t=0;for(var e in this._)++t;return t}function m(){for(var t in this._)return!1;return!0}function v(){this._=Object.create(null)}function y(t){return t}function b(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function w(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=ka.length;n<i;++n){var r=ka[n]+e;if(r in t)return r}}function x(){}function _(){}function k(t){function e(){for(var e,i=n,r=-1,o=i.length;++r<o;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new u;return e.on=function(e,r){var o,a=i.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function C(){la.event.preventDefault()}function S(){for(var t,e=la.event;t=e.sourceEvent;)e=t;return e}function M(t){for(var e=new _,n=0,i=arguments.length;++n<i;)e[arguments[n]]=k(e);return e.of=function(n,i){return function(r){try{var o=r.sourceEvent=la.event;r.target=t,la.event=r,e[r.type].apply(n,i)}finally{la.event=o}}},e}function T(t){return Sa(t,Oa),t}function E(t){return"function"==typeof t?t:function(){return Ma(t,this)}}function O(t){return"function"==typeof t?t:function(){return Ta(t,this)}}function A(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=la.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?s:a:t.local?o:r}function D(t){return t.trim().replace(/\s+/g," ")}function R(t){return new RegExp("(?:^|\\s+)"+la.requote(t)+"(?:\\s+|$)","g")}function P(t){return(t+"").trim().split(/^|\s+/)}function N(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=P(t).map(z);var r=t.length;return"function"==typeof e?i:n}function z(t){var e=R(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",D(r+" "+t))):n.setAttribute("class",D(r.replace(e," ")))}}function L(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?o:r}function I(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function H(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n&&n!==e.documentElement.namespaceURI?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=la.ns.qualify(t)).local?n:e}function j(){var t=this.parentNode;t&&t.removeChild(this)}function F(t){return{__data__:t}}function B(t){return function(){return Ea(this,t)}}function W(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function Y(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,o=t[n],a=0,s=o.length;a<s;a++)(r=o[a])&&e(r,a,n);return t}function V(t){return Sa(t,Da),t}function U(t){var e,n;return function(i,r,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),r>=e&&(e=r+1);!(a=s[e])&&++e<l;);return a}}function q(t,e,n){function i(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function r(){var r=l(e,ca(arguments));i.call(this),this.addEventListener(t,this[a]=r,r.$=n),r._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+la.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var a="__on"+t,s=t.indexOf("."),l=X;s>0&&(t=t.slice(0,s));var u=Ra.get(t);return u&&(t=u,l=G),s?e?r:i:e?x:o}function X(t,e){return function(n){var i=la.event;la.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{la.event=i}}}function G(t,e){var n=X(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function $(n){var i=".dragsuppress-"+ ++Na,r="click"+i,o=la.select(e(n)).on("touchmove"+i,C).on("dragstart"+i,C).on("selectstart"+i,C);if(null==Pa&&(Pa=!("onselectstart"in n)&&w(n.style,"userSelect")),Pa){var a=t(n).style,s=a[Pa];a[Pa]="none"}return function(t){if(o.on(i,null),Pa&&(a[Pa]=s),t){var e=function(){o.on(r,null)};o.on(r,function(){C(),e()},!0),setTimeout(e,0)}}}function K(t,n){n.changedTouches&&(n=n.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();if(za<0){var o=e(t);if(o.scrollX||o.scrollY){i=la.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=i[0][0].getScreenCTM();za=!(a.f||a.e),i.remove()}}return za?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var s=t.getBoundingClientRect();return[n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop]}function Z(){return la.event.changedTouches[0].identifier}function Q(t){return t>0?1:t<0?-1:0}function J(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function tt(t){return t>1?0:t<-1?Ha:Math.acos(t)}function et(t){return t>1?Ba:t<-1?-Ba:Math.asin(t)}function nt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function rt(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function at(){}function st(t,e,n){return this instanceof st?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof st?new st(t.h,t.s,t.l):xt(""+t,_t,st):new st(t,e,n)}function lt(t,e,n){function i(t){return t>360?t-=360:t<0&&(t+=360),t<60?o+(a-o)*t/60:t<180?a:t<240?o+(a-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=n<0?0:n>1?1:n,a=n<=.5?n*(1+e):n+e-n*e,o=2*n-a,new vt(r(t+120),r(t),r(t-120))}function ut(t,e,n){return this instanceof ut?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ut?new ut(t.h,t.c,t.l):t instanceof ht?ft(t.l,t.a,t.b):ft((t=kt((t=la.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ut(t,e,n)}function ct(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ht(n,Math.cos(t*=Wa)*e,Math.sin(t)*e)}function ht(t,e,n){return this instanceof ht?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof ut?ct(t.h,t.c,t.l):kt((t=vt(t)).r,t.g,t.b):new ht(t,e,n)}function dt(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return r=pt(r)*Ja,i=pt(i)*ts,o=pt(o)*es,new vt(mt(3.2404542*r-1.5371385*i-.4985314*o),mt(-.969266*r+1.8760108*i+.041556*o),mt(.0556434*r-.2040259*i+1.0572252*o))}function ft(t,e,n){return t>0?new ut(Math.atan2(n,e)*Ya,Math.sqrt(e*e+n*n),t):new ut(NaN,NaN,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function gt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function mt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function vt(t,e,n){return this instanceof vt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof vt?new vt(t.r,t.g,t.b):xt(""+t,vt,lt):new vt(t,e,n)}function yt(t){return new vt(t>>16,t>>8&255,255&t)}function bt(t){return yt(t)+""}function wt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function xt(t,e,n){var i,r,o,a=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(St(r[0]),St(r[1]),St(r[2]))}return(o=rs.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,l=15&o,l=l<<4|l):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function _t(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(r=l<.5?s/(a+o):s/(2-a-o),i=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=l>0&&l<1?0:i),new st(i,r,l)}function kt(t,e,n){t=Ct(t),e=Ct(e),n=Ct(n);var i=gt((.4124564*t+.3575761*e+.1804375*n)/Ja),r=gt((.2126729*t+.7151522*e+.072175*n)/ts),o=gt((.0193339*t+.119192*e+.9503041*n)/es);return ht(116*r-16,500*(i-r),200*(r-o))}function Ct(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function St(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Mt(t){return"function"==typeof t?t:function(){return t}}function Tt(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),Et(e,n,t,i)}}function Et(t,e,n,i){function r(){var t,e=l.status;if(!e&&At(l)||e>=200&&e<300||304===e){try{t=n.call(o,l)}catch(i){return void a.error.call(o,i)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=la.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=la.event;la.event=t;try{a.progress.call(o,l)}finally{la.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ca(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(o,l),l.send(null==i?null:i),o},o.abort=function(){return l.abort(),o},la.rebind(o,a,"on"),null==i?o:o.get(Ot(i))}function Ot(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function At(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Dt(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var r=n+e,o={c:t,t:r,n:null};return as?as.n=o:os=o,as=o,ss||(ls=clearTimeout(ls),ss=1,us(Rt)),o}function Rt(){var t=Pt(),e=Nt()-t;e>24?(isFinite(e)&&(clearTimeout(ls),ls=setTimeout(Rt,e)),ss=0):(ss=1,us(Rt))}function Pt(){for(var t=Date.now(),e=os;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Nt(){for(var t,e=os,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:os=e.n;return as=t,n}function zt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Lt(t,e){var n=Math.pow(10,3*wa(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function It(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,o=i&&n?function(t,e){for(var r=t.length,o=[],a=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>e));)s=i[a=(a+1)%i.length];return o.reverse().join(n)}:y;return function(t){var n=hs.exec(t),i=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],h=n[7],d=n[8],f=n[9],p=1,g="",m="",v=!1,y=!0;switch(d&&(d=+d.substring(1)),(u||"0"===i&&"="===a)&&(u=i="0",a="="),f){case"n":h=!0,f="g";break;case"%":p=100,m="%",f="f";break;case"p":p=100,m="%",f="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+f.toLowerCase());case"c":y=!1;case"d":v=!0,d=0;break;case"s":p=-1,f="r"}"$"===l&&(g=r[0],m=r[1]),"r"!=f||d||(f="g"),null!=d&&("g"==f?d=Math.max(1,Math.min(21,d)):"e"!=f&&"f"!=f||(d=Math.max(0,Math.min(20,d)))),f=ds.get(f)||Ht;var b=u&&h;return function(t){var n=m;if(v&&t%1)return"";var r=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===s?"":s;if(p<0){var l=la.formatPrefix(t,d);t=l.scale(t),n=l.symbol+m}else t*=p;t=f(t,d);var w,x,_=t.lastIndexOf(".");if(_<0){var k=y?t.lastIndexOf("e"):-1;k<0?(w=t,x=""):(w=t.substring(0,k),x=t.substring(k))}else w=t.substring(0,_),x=e+t.substring(_+1);!u&&h&&(w=o(w,1/0));var C=g.length+w.length+x.length+(b?0:r.length),S=C<c?new Array(C=c-C+1).join(i):"";return b&&(w=o(S+w,S.length?c-x.length:1/0)),r+=g,t=w+x,("<"===a?r+t+S:">"===a?S+r+t:"^"===a?S.substring(0,C>>=1)+r+t+S.substring(C):r+(b?t:S+t))+n}}}function Ht(t){return t+""}function jt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ft(t,e,n){function i(e){var n=t(e),i=o(n,1);return e-n<i-e?n:i}function r(n){return e(n=t(new ps(n-1)),1),n}function o(t,n){return e(t=new ps((+t)),n),t}function a(t,i,o){var a=r(t),s=[];if(o>1)for(;a<i;)n(a)%o||s.push(new Date((+a))),e(a,1);else for(;a<i;)s.push(new Date((+a))),e(a,1);return s}function s(t,e,n){try{ps=jt;var i=new jt;return i._=t,a(i,e,n)}finally{ps=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=a;var l=t.utc=Bt(t);return l.floor=l,l.round=Bt(i),l.ceil=Bt(r),l.offset=Bt(o),l.range=s,t}function Bt(t){return function(e,n){try{ps=jt;var i=new jt;return i._=e,t(i,n)._}finally{ps=Date}}}function Wt(t){function e(t){function e(e){for(var n,r,o,a=[],s=-1,l=0;++s<i;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(r=ms[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=E[n])&&(n=o(e,null==r?"e"===n?" ":"0":r)),a.push(n),l=s+1);return a.push(t.slice(l,s)),a.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,t,e,0);if(r!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var o=null!=i.Z&&ps!==jt,a=new(o?jt:ps);return"j"in i?a.setFullYear(i.y,0,i.j):"W"in i||"U"in i?("w"in i||(i.w="W"in i?1:0),a.setFullYear(i.y,0,1),a.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(a.getDay()+5)%7:i.w+7*i.U-(a.getDay()+6)%7)):a.setFullYear(i.y,i.m,i.d),a.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,i){for(var r,o,a,s=0,l=e.length,u=n.length;s<l;){if(i>=u)return-1;if(r=e.charCodeAt(s++),37===r){if(a=e.charAt(s++),o=O[a in ms?e.charAt(s++):a],!o||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(t,e,n){_.lastIndex=0;var i=_.exec(e.slice(n));return i?(t.w=k.get(i[0].toLowerCase()),n+i[0].length):-1}function r(t,e,n){w.lastIndex=0;var i=w.exec(e.slice(n));return i?(t.w=x.get(i[0].toLowerCase()),n+i[0].length):-1}function o(t,e,n){M.lastIndex=0;var i=M.exec(e.slice(n));return i?(t.m=T.get(i[0].toLowerCase()),n+i[0].length):-1}function a(t,e,n){C.lastIndex=0;var i=C.exec(e.slice(n));return i?(t.m=S.get(i[0].toLowerCase()),n+i[0].length):-1}function s(t,e,i){return n(t,E.c.toString(),e,i)}function l(t,e,i){return n(t,E.x.toString(),e,i)}function u(t,e,i){return n(t,E.X.toString(),e,i)}function c(t,e,n){var i=b.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}var h=t.dateTime,d=t.date,f=t.time,p=t.periods,g=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{ps=jt;var e=new ps;return e._=t,i(e)}finally{ps=Date}}var i=e(t);return n.parse=function(t){try{ps=jt;var e=i.parse(t);return e&&e._}finally{ps=Date}},n.toString=i.toString,n},e.multi=e.utc.multi=le;var b=la.map(),w=Vt(g),x=Ut(g),_=Vt(m),k=Ut(m),C=Vt(v),S=Ut(v),M=Vt(y),T=Ut(y);p.forEach(function(t,e){b.set(t.toLowerCase(),e)});var E={a:function(t){return m[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(h),d:function(t,e){return Yt(t.getDate(),e,2)},e:function(t,e){return Yt(t.getDate(),e,2)},H:function(t,e){return Yt(t.getHours(),e,2)},I:function(t,e){return Yt(t.getHours()%12||12,e,2);
},j:function(t,e){return Yt(1+fs.dayOfYear(t),e,3)},L:function(t,e){return Yt(t.getMilliseconds(),e,3)},m:function(t,e){return Yt(t.getMonth()+1,e,2)},M:function(t,e){return Yt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Yt(t.getSeconds(),e,2)},U:function(t,e){return Yt(fs.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Yt(fs.mondayOfYear(t),e,2)},x:e(d),X:e(f),y:function(t,e){return Yt(t.getFullYear()%100,e,2)},Y:function(t,e){return Yt(t.getFullYear()%1e4,e,4)},Z:ae,"%":function(){return"%"}},O={a:i,A:r,b:o,B:a,c:s,d:te,e:te,H:ne,I:ne,j:ee,L:oe,m:Jt,M:ie,p:c,S:re,U:Xt,w:qt,W:Gt,x:l,X:u,y:Kt,Y:$t,Z:Zt,"%":se};return e}function Yt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function Vt(t){return new RegExp("^(?:"+t.map(la.requote).join("|")+")","i")}function Ut(t){for(var e=new u,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function qt(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Xt(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Gt(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function $t(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Kt(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+2));return i?(t.y=Qt(+i[0]),n+i[0].length):-1}function Zt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function Jt(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function te(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ee(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function ne(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ie(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function re(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function oe(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function ae(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=wa(e)/60|0,r=wa(e)%60;return n+Yt(i,"0",2)+Yt(r,"0",2)}function se(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function le(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}function ue(){}function ce(t,e,n){var i=n.s=t+e,r=i-t,o=i-r;n.t=t-o+(e-r)}function he(t,e){t&&_s.hasOwnProperty(t.type)&&_s[t.type](t,e)}function de(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function fe(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)de(t[n],e,1);e.polygonEnd()}function pe(){function t(t,e){t*=Wa,e=e*Wa/2+Ha/4;var n=t-i,a=n>=0?1:-1,s=a*n,l=Math.cos(e),u=Math.sin(e),c=o*u,h=r*l+c*Math.cos(s),d=c*a*Math.sin(s);Cs.add(Math.atan2(d,h)),i=t,r=l,o=u}var e,n,i,r,o;Ss.point=function(a,s){Ss.point=t,i=(e=a)*Wa,r=Math.cos(s=(n=s)*Wa/2+Ha/4),o=Math.sin(s)},Ss.lineEnd=function(){t(e,n)}}function ge(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function me(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ve(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ye(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function be(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function we(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function xe(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function _e(t,e){return wa(t[0]-e[0])<La&&wa(t[1]-e[1])<La}function ke(t,e){t*=Wa;var n=Math.cos(e*=Wa);Ce(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Ce(t,e,n){++Ms,Es+=(t-Es)/Ms,Os+=(e-Os)/Ms,As+=(n-As)/Ms}function Se(){function t(t,r){t*=Wa;var o=Math.cos(r*=Wa),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*s)*u+(u=i*a-e*l)*u+(u=e*s-n*a)*u),e*a+n*s+i*l);Ts+=u,Ds+=u*(e+(e=a)),Rs+=u*(n+(n=s)),Ps+=u*(i+(i=l)),Ce(e,n,i)}var e,n,i;Is.point=function(r,o){r*=Wa;var a=Math.cos(o*=Wa);e=a*Math.cos(r),n=a*Math.sin(r),i=Math.sin(o),Is.point=t,Ce(e,n,i)}}function Me(){Is.point=ke}function Te(){function t(t,e){t*=Wa;var n=Math.cos(e*=Wa),a=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=r*l-o*s,c=o*a-i*l,h=i*s-r*a,d=Math.sqrt(u*u+c*c+h*h),f=i*a+r*s+o*l,p=d&&-tt(f)/d,g=Math.atan2(d,f);Ns+=p*u,zs+=p*c,Ls+=p*h,Ts+=g,Ds+=g*(i+(i=a)),Rs+=g*(r+(r=s)),Ps+=g*(o+(o=l)),Ce(i,r,o)}var e,n,i,r,o;Is.point=function(a,s){e=a,n=s,Is.point=t,a*=Wa;var l=Math.cos(s*=Wa);i=l*Math.cos(a),r=l*Math.sin(a),o=Math.sin(s),Ce(i,r,o)},Is.lineEnd=function(){t(e,n),Is.lineEnd=Me,Is.point=ke}}function Ee(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function Oe(){return!0}function Ae(t,e,n,i,r){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(_e(n,i)){r.lineStart();for(var s=0;s<e;++s)r.point((n=t[s])[0],n[1]);return void r.lineEnd()}var l=new Re(n,t,null,(!0)),u=new Re(n,null,l,(!1));l.o=u,o.push(l),a.push(u),l=new Re(i,t,null,(!1)),u=new Re(i,null,l,(!0)),l.o=u,o.push(l),a.push(u)}}),a.sort(e),De(o),De(a),o.length){for(var s=0,l=n,u=a.length;s<u;++s)a[s].e=l=!l;for(var c,h,d=o[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(var s=0,u=c.length;s<u;++s)r.point((h=c[s])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p){c=f.p.z;for(var s=c.length-1;s>=0;--s)r.point((h=c[s])[0],h[1])}else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,c=f.z,p=!p}while(!f.v);r.lineEnd()}}}function De(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Re(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Pe(t,e,n,i){return function(r,o){function a(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function s(t,e){var n=r(t,e);m.point(n[0],n[1])}function l(){y.point=s,m.lineStart()}function u(){y.point=a,m.lineEnd()}function c(t,e){g.push([t,e]);var n=r(t,e);w.point(n[0],n[1])}function h(){w.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),w.lineEnd();var t,e=w.clean(),n=b.buffer(),i=n.length;if(g.pop(),p.push(g),g=null,i)if(1&e){t=n[0];var r,i=t.length-1,a=-1;if(i>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++a<i;)o.point((r=t[a])[0],r[1]);o.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),f.push(n.filter(Ne))}var f,p,g,m=e(o),v=r.invert(i[0],i[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=h,y.lineEnd=d,f=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,f=la.merge(f);var t=Fe(v,p);f.length?(x||(o.polygonStart(),x=!0),Ae(f,Le,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),f=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=ze(),w=e(b),x=!1;return y}}function Ne(t){return t.length>1}function ze(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:x,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Le(t,e){return((t=t.x)[0]<0?t[1]-Ba-La:Ba-t[1])-((e=e.x)[0]<0?e[1]-Ba-La:Ba-e[1])}function Ie(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ha:-Ha,l=wa(o-n);wa(l-Ha)<La?(t.point(n,i=(i+a)/2>0?Ba:-Ba),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=Ha&&(wa(n-r)<La&&(n-=r*La),wa(o-s)<La&&(o-=s*La),i=He(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function He(t,e,n,i){var r,o,a=Math.sin(t-n);return wa(a)>La?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*a)):(e+i)/2}function je(t,e,n,i){var r;if(null==t)r=n*Ba,i.point(-Ha,r),i.point(0,r),i.point(Ha,r),i.point(Ha,0),i.point(Ha,-r),i.point(0,-r),i.point(-Ha,-r),i.point(-Ha,0),i.point(-Ha,r);else if(wa(t[0]-e[0])>La){var o=t[0]<e[0]?Ha:-Ha;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function Fe(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Cs.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],c=u.length;if(c)for(var h=u[0],d=h[0],f=h[1]/2+Ha/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===c&&(m=0),t=u[m];var v=t[0],y=t[1]/2+Ha/4,b=Math.sin(y),w=Math.cos(y),x=v-d,_=x>=0?1:-1,k=_*x,C=k>Ha,S=p*b;if(Cs.add(Math.atan2(S*_*Math.sin(k),g*w+S*Math.cos(k))),o+=C?x+_*ja:x,C^d>=n^v>=n){var M=ve(ge(h),ge(t));we(M);var T=ve(r,M);we(T);var E=(C^x>=0?-1:1)*et(T[2]);(i>E||i===E&&(M[0]||M[1]))&&(a+=C^x>=0?1:-1)}if(!m++)break;d=v,p=b,g=w,h=t}}return(o<-La||o<La&&Cs<0)^1&a}function Be(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,d){var f,p=[h,d],g=e(h,d),m=a?g?0:r(h,d):g?r(h+(h<0?Ha:-Ha),d):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(f=i(n,p),(_e(n,f)||_e(p,f))&&(p[0]+=La,p[1]+=La,g=e(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),f=i(p,n),t.point(f[0],f[1])):(f=i(n,p),t.point(f[0],f[1]),t.lineEnd()),n=f;else if(s&&n&&a^g){var v;m&o||!(v=i(p,n,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&_e(n,p)||t.point(p[0],p[1]),n=p,l=g,o=m},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function i(t,e,n){var i=ge(t),r=ge(e),a=[1,0,0],s=ve(i,r),l=me(s,s),u=s[0],c=l-u*u;if(!c)return!n&&t;var h=o*l/c,d=-o*u/c,f=ve(a,s),p=be(a,h),g=be(s,d);ye(p,g);var m=f,v=me(p,m),y=me(m,m),b=v*v-y*(me(p,p)-1);if(!(b<0)){var w=Math.sqrt(b),x=be(m,(-v-w)/y);if(ye(x,p),x=xe(x),!n)return x;var _,k=t[0],C=e[0],S=t[1],M=e[1];C<k&&(_=k,k=C,C=_);var T=C-k,E=wa(T-Ha)<La,O=E||T<La;if(!E&&M<S&&(_=S,S=M,M=_),O?E?S+M>0^x[1]<(wa(x[0]-k)<La?S:M):S<=x[1]&&x[1]<=M:T>Ha^(k<=x[0]&&x[0]<=C)){var A=be(m,(-v+w)/y);return ye(A,p),[x,xe(A)]}}}function r(e,n){var i=a?t:Ha-t,r=0;return e<-i?r|=1:e>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var o=Math.cos(t),a=o>0,s=wa(o)>La,l=gn(t,6*Wa);return Pe(e,n,l,a?[0,-t]:[-Ha,t-Ha])}function We(t,e,n,i){return function(r){var o,a=r.a,s=r.b,l=a.x,u=a.y,c=s.x,h=s.y,d=0,f=1,p=c-l,g=h-u;if(o=t-l,p||!(o>0)){if(o/=p,p<0){if(o<d)return;o<f&&(f=o)}else if(p>0){if(o>f)return;o>d&&(d=o)}if(o=n-l,p||!(o<0)){if(o/=p,p<0){if(o>f)return;o>d&&(d=o)}else if(p>0){if(o<d)return;o<f&&(f=o)}if(o=e-u,g||!(o>0)){if(o/=g,g<0){if(o<d)return;o<f&&(f=o)}else if(g>0){if(o>f)return;o>d&&(d=o)}if(o=i-u,g||!(o<0)){if(o/=g,g<0){if(o>f)return;o>d&&(d=o)}else if(g>0){if(o<d)return;o<f&&(f=o)}return d>0&&(r.a={x:l+d*p,y:u+d*g}),f<1&&(r.b={x:l+f*p,y:u+f*g}),r}}}}}}function Ye(t,e,n,i){function r(i,r){return wa(i[0]-t)<La?r>0?0:3:wa(i[0]-n)<La?r>0?2:1:wa(i[1]-e)<La?r>0?1:0:r>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,n=m.length,i=t[1],r=0;r<n;++r)for(var o,a=1,s=m[r],l=s.length,u=s[0];a<l;++a)o=s[a],u[1]<=i?o[1]>i&&J(u,o,t)>0&&++e:o[1]<=i&&J(u,o,t)<0&&--e,u=o;return 0!==e}function u(o,s,l,u){var c=0,h=0;if(null==o||(c=r(o,l))!==(h=r(s,l))||a(o,s)<0^l>0){do u.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+l+4)%4)!==h)}else u.point(s[0],s[1])}function c(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function h(t,e){c(t,e)&&s.point(t,e)}function d(){O.point=p,m&&m.push(v=[]),C=!0,k=!1,x=_=NaN}function f(){g&&(p(y,b),w&&k&&T.rejoin(),g.push(T.buffer())),O.point=h,k&&s.lineEnd()}function p(t,e){t=Math.max(-js,Math.min(js,t)),e=Math.max(-js,Math.min(js,e));var n=c(t,e);if(m&&v.push([t,e]),C)y=t,b=e,w=n,C=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&k)s.point(t,e);else{var i={a:{x:x,y:_},b:{x:t,y:e}};E(i)?(k||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),S=!1):n&&(s.lineStart(),s.point(t,e),S=!1)}x=t,_=e,k=n}var g,m,v,y,b,w,x,_,k,C,S,M=s,T=ze(),E=We(t,e,n,i),O={point:h,lineStart:d,lineEnd:f,polygonStart:function(){s=T,g=[],m=[],S=!0},polygonEnd:function(){s=M,g=la.merge(g);var e=l([t,i]),n=S&&e,r=g.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),r&&Ae(g,o,e,u,s),s.polygonEnd()),g=m=v=null}};return O}}function Ve(t){var e=0,n=Ha/3,i=sn(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Ha/180,n=t[1]*Ha/180):[e/Ha*180,n/Ha*180]},r}function Ue(t,e){function n(t,e){var n=Math.sqrt(o-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),a-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,o=1+i*(2*r-i),a=Math.sqrt(o)/r;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,et((o-(t*t+n*n)*r*r)/(2*r))]},n}function qe(){function t(t,e){Bs+=r*t-i*e,i=t,r=e}var e,n,i,r;qs.point=function(o,a){qs.point=t,e=i=o,n=r=a},qs.lineEnd=function(){t(e,n)}}function Xe(t,e){t<Ws&&(Ws=t),t>Vs&&(Vs=t),e<Ys&&(Ys=e),e>Us&&(Us=e)}function Ge(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function i(){s.point=t}function r(){a.push("Z")}var o=$e(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return o=$e(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function $e(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ke(t,e){Es+=t,Os+=e,++As}function Ze(){function t(t,i){var r=t-e,o=i-n,a=Math.sqrt(r*r+o*o);Ds+=a*(e+t)/2,Rs+=a*(n+i)/2,Ps+=a,Ke(e=t,n=i)}var e,n;Gs.point=function(i,r){Gs.point=t,Ke(e=i,n=r)}}function Qe(){Gs.point=Ke}function Je(){function t(t,e){var n=t-i,o=e-r,a=Math.sqrt(n*n+o*o);Ds+=a*(i+t)/2,Rs+=a*(r+e)/2,Ps+=a,a=r*t-i*e,Ns+=a*(i+t),zs+=a*(r+e),Ls+=3*a,Ke(i=t,r=e)}var e,n,i,r;Gs.point=function(o,a){Gs.point=t,Ke(e=i=o,n=r=a)},Gs.lineEnd=function(){t(e,n)}}function tn(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,ja)}function n(e,n){t.moveTo(e,n),s.point=i}function i(e,n){t.lineTo(e,n)}function r(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(t){return a=t,s},result:x};return s}function en(t){function e(t){return(s?i:n)(t)}function n(e){return on(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})}function i(e){function n(n,i){n=t(n,i),e.point(n[0],n[1])}function i(){b=NaN,C.point=o,e.lineStart()}function o(n,i){var o=ge([n,i]),a=t(n,i);r(b,w,y,x,_,k,b=a[0],w=a[1],y=n,x=o[0],_=o[1],k=o[2],s,e),e.point(b,w)}function a(){C.point=n,e.lineEnd()}function l(){i(),C.point=u,C.lineEnd=c}function u(t,e){o(h=t,d=e),f=b,p=w,g=x,m=_,v=k,C.point=o}function c(){r(b,w,y,x,_,k,f,p,h,g,m,v,s,e),C.lineEnd=a,a()}var h,d,f,p,g,m,v,y,b,w,x,_,k,C={point:n,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),C.lineStart=l},polygonEnd:function(){e.polygonEnd(),C.lineStart=i}};return C}function r(e,n,i,s,l,u,c,h,d,f,p,g,m,v){var y=c-e,b=h-n,w=y*y+b*b;if(w>4*o&&m--){var x=s+f,_=l+p,k=u+g,C=Math.sqrt(x*x+_*_+k*k),S=Math.asin(k/=C),M=wa(wa(k)-1)<La||wa(i-d)<La?(i+d)/2:Math.atan2(_,x),T=t(M,S),E=T[0],O=T[1],A=E-e,D=O-n,R=b*A-y*D;(R*R/w>o||wa((y*A+b*D)/w-.5)>.3||s*f+l*p+u*g<a)&&(r(e,n,i,s,l,u,E,O,M,x/=C,_/=C,k,m,v),v.point(E,O),r(E,O,M,x,_,k,c,h,d,f,p,g,m,v))}}var o=.5,a=Math.cos(30*Wa),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function nn(t){var e=en(function(e,n){return t([e*Ya,n*Ya])});return function(t){return ln(e(t))}}function rn(t){this.stream=t}function on(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function an(t){return sn(function(){return t})()}function sn(t){function e(t){return t=s(t[0]*Wa,t[1]*Wa),[t[0]*d+l,u-t[1]*d]}function n(t){return t=s.invert((t[0]-l)/d,(u-t[1])/d),t&&[t[0]*Ya,t[1]*Ya]}function i(){s=Ee(a=hn(v,b,w),o);var t=o(g,m);return l=f-t[0]*d,u=p+t[1]*d,r()}function r(){return c&&(c.valid=!1,c=null),e}var o,a,s,l,u,c,h=en(function(t,e){return t=o(t,e),[t[0]*d+l,u-t[1]*d]}),d=150,f=480,p=250,g=0,m=0,v=0,b=0,w=0,x=Hs,_=y,k=null,C=null;return e.stream=function(t){return c&&(c.valid=!1),c=ln(x(a,h(_(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(x=null==t?(k=t,Hs):Be((k=+t)*Wa),r()):k},e.clipExtent=function(t){return arguments.length?(C=t,_=t?Ye(t[0][0],t[0][1],t[1][0],t[1][1]):y,r()):C},e.scale=function(t){return arguments.length?(d=+t,i()):d},e.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],i()):[f,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Wa,m=t[1]%360*Wa,i()):[g*Ya,m*Ya]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Wa,b=t[1]%360*Wa,w=t.length>2?t[2]%360*Wa:0,i()):[v*Ya,b*Ya,w*Ya]},la.rebind(e,h,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function ln(t){return on(t,function(e,n){t.point(e*Wa,n*Wa)})}function un(t,e){return[t,e]}function cn(t,e){return[t>Ha?t-ja:t<-Ha?t+ja:t,e]}function hn(t,e,n){return t?e||n?Ee(fn(t),pn(e,n)):fn(t):e||n?pn(e,n):cn}function dn(t){return function(e,n){return e+=t,[e>Ha?e-ja:e<-Ha?e+ja:e,n]}}function fn(t){var e=dn(t);return e.invert=dn(-t),e}function pn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*i+s*r;return[Math.atan2(l*o-c*a,s*i-u*r),et(c*o+l*a)]}var i=Math.cos(t),r=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*i+c*r),et(c*i-s*r)]},n}function gn(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,o,a,s){var l=a*e;null!=r?(r=mn(n,r),o=mn(n,o),(a>0?r<o:r>o)&&(r+=a*ja)):(r=t+a*ja,o=t-.5*l);for(var u,c=r;a>0?c>o:c<o;c-=l)s.point((u=xe([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],u[1])}}function mn(t,e){var n=ge(e);n[0]-=t,we(n);var i=tt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-La)%(2*Math.PI)}function vn(t,e,n){var i=la.range(t,e-La,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function yn(t,e,n){var i=la.range(t,e-La,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function bn(t){return t.source}function wn(t){return t.target}function xn(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),a=Math.cos(i),s=Math.sin(i),l=r*Math.cos(t),u=r*Math.sin(t),c=a*Math.cos(n),h=a*Math.sin(n),d=2*Math.asin(Math.sqrt(ot(i-e)+r*a*ot(n-t))),f=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*f,n=Math.sin(d-t)*f,i=n*l+e*c,r=n*u+e*h,a=n*o+e*s;return[Math.atan2(r,i)*Ya,Math.atan2(a,Math.sqrt(i*i+r*r))*Ya]}:function(){return[t*Ya,e*Ya]};return p.distance=d,p}function _n(){function t(t,r){var o=Math.sin(r*=Wa),a=Math.cos(r),s=wa((t*=Wa)-e),l=Math.cos(s);$s+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=i*o-n*a*l)*s),n*o+i*a*l),e=t,n=o,i=a}var e,n,i;Ks.point=function(r,o){e=r*Wa,n=Math.sin(o*=Wa),i=Math.cos(o),Ks.point=t},Ks.lineEnd=function(){Ks.point=Ks.lineEnd=x}}function kn(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),o=t(i*r);return[o*r*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),o=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*o,i*a),Math.asin(i&&n*o/i)]},n}function Cn(t,e){function n(t,e){a>0?e<-Ba+La&&(e=-Ba+La):e>Ba-La&&(e=Ba-La);var n=a/Math.pow(r(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var i=Math.cos(t),r=function(t){return Math.tan(Ha/4+t/2)},o=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),a=i*Math.pow(r(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,i=Q(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/i,1/o))-Ba]},n):Mn}function Sn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),o=i/r+t;return wa(r)<La?un:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,o-Q(r)*Math.sqrt(t*t+n*n)]},n)}function Mn(t,e){return[t,Math.log(Math.tan(Ha/4+e/2))]}function Tn(t){var e,n=an(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Ha*i(),l=r();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function En(t,e){return[Math.log(Math.tan(Ha/4+e/2)),-t]}function On(t){return t[0]}function An(t){return t[1]}function Dn(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;i>1&&J(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Rn(t,e){return t[0]-e[0]||t[1]-e[1]}function Pn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Nn(t,e,n,i){var r=t[0],o=n[0],a=e[0]-r,s=i[0]-o,l=t[1],u=n[1],c=e[1]-l,h=i[1]-u,d=(s*(l-u)-h*(r-o))/(h*a-s*c);return[r+d*a,l+d*c]}function zn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Ln(){ii(this),this.edge=this.site=this.circle=null}function In(t){var e=ll.pop()||new Ln;return e.site=t,e}function Hn(t){Gn(t),ol.remove(t),ll.push(t),ii(t)}function jn(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,a=t.N,s=[t];Hn(t);for(var l=o;l.circle&&wa(n-l.circle.x)<La&&wa(i-l.circle.cy)<La;)o=l.P,s.unshift(l),Hn(l),l=o;s.unshift(l),Gn(l);for(var u=a;u.circle&&wa(n-u.circle.x)<La&&wa(i-u.circle.cy)<La;)a=u.N,s.push(u),Hn(u),u=a;s.push(u),Gn(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],ti(u.edge,l.site,u.site,r);l=s[0],u=s[h-1],u.edge=Qn(l.site,u.site,null,r),Xn(l),Xn(u)}function Fn(t){for(var e,n,i,r,o=t.x,a=t.y,s=ol._;s;)if(i=Bn(s,a)-o,i>La)s=s.L;else{if(r=o-Wn(s,a),!(r>La)){i>-La?(e=s.P,n=s):r>-La?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=In(t);if(ol.insert(e,l),e||n){if(e===n)return Gn(e),n=In(e.site),ol.insert(l,n),l.edge=n.edge=Qn(e.site,l.site),Xn(e),void Xn(n);if(!n)return void(l.edge=Qn(e.site,l.site));Gn(e),Gn(n);var u=e.site,c=u.x,h=u.y,d=t.x-c,f=t.y-h,p=n.site,g=p.x-c,m=p.y-h,v=2*(d*m-f*g),y=d*d+f*f,b=g*g+m*m,w={x:(m*y-f*b)/v+c,y:(d*b-g*y)/v+h};ti(n.edge,u,p,w),l.edge=Qn(u,t,null,w),n.edge=Qn(t,p,null,w),Xn(e),Xn(n)}}function Bn(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var a=t.P;if(!a)return-(1/0);n=a.site;var s=n.x,l=n.y,u=l-e;if(!u)return s;var c=s-i,h=1/o-1/u,d=c/u;return h?(-d+Math.sqrt(d*d-2*h*(c*c/(-2*u)-l+u/2+r-o/2)))/h+i:(i+s)/2}function Wn(t,e){var n=t.N;if(n)return Bn(n,e);var i=t.site;return i.y===e?i.x:1/0}function Yn(t){this.site=t,this.edges=[]}function Vn(t){for(var e,n,i,r,o,a,s,l,u,c,h=t[0][0],d=t[1][0],f=t[0][1],p=t[1][1],g=rl,m=g.length;m--;)if(o=g[m],o&&o.prepare())for(s=o.edges,l=s.length,a=0;a<l;)c=s[a].end(),i=c.x,r=c.y,u=s[++a%l].start(),e=u.x,n=u.y,(wa(i-e)>La||wa(r-n)>La)&&(s.splice(a,0,new ei(Jn(o.site,c,wa(i-h)<La&&p-r>La?{x:h,y:wa(e-h)<La?n:p}:wa(r-p)<La&&d-i>La?{x:wa(n-p)<La?e:d,y:p}:wa(i-d)<La&&r-f>La?{x:d,y:wa(e-d)<La?n:f}:wa(r-f)<La&&i-h>La?{x:wa(n-f)<La?e:h,y:f}:null),o.site,null)),++l)}function Un(t,e){return e.angle-t.angle}function qn(){ii(this),this.x=this.y=this.arc=this.site=this.cy=null}function Xn(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r.x,s=r.y,l=i.x-a,u=i.y-s,c=o.x-a,h=o.y-s,d=2*(l*h-u*c);if(!(d>=-Ia)){var f=l*l+u*u,p=c*c+h*h,g=(h*f-u*p)/d,m=(l*p-c*f)/d,h=m+s,v=ul.pop()||new qn;v.arc=t,v.site=r,v.x=g+a,v.y=h+Math.sqrt(g*g+m*m),v.cy=h,t.circle=v;for(var y=null,b=sl._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}sl.insert(y,v),y||(al=v)}}}}function Gn(t){var e=t.circle;e&&(e.P||(al=e.N),sl.remove(e),ul.push(e),ii(e),t.circle=null)}function $n(t){for(var e,n=il,i=We(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!Kn(e,t)||!i(e)||wa(e.a.x-e.b.x)<La&&wa(e.a.y-e.b.y)<La)&&(e.a=e.b=null,n.splice(r,1))}function Kn(t,e){var n=t.b;if(n)return!0;var i,r,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,h=t.r,d=c.x,f=c.y,p=h.x,g=h.y,m=(d+p)/2,v=(f+g)/2;if(g===f){if(m<a||m>=s)return;if(d>p){if(o){if(o.y>=u)return}else o={x:m,y:l};n={x:m,y:u}}else{if(o){if(o.y<l)return}else o={x:m,y:u};n={x:m,y:l}}}else if(i=(d-p)/(g-f),r=v-i*m,i<-1||i>1)if(d>p){if(o){if(o.y>=u)return}else o={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(f<g){if(o){if(o.x>=s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}else{if(o){if(o.x<a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}return t.a=o,t.b=n,!0}function Zn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Qn(t,e,n,i){var r=new Zn(t,e);return il.push(r),n&&ti(r,t,e,n),i&&ti(r,e,t,i),rl[t.i].edges.push(new ei(r,t,e)),rl[e.i].edges.push(new ei(r,e,t)),r}function Jn(t,e,n){var i=new Zn(t,null);return i.a=e,i.b=n,il.push(i),i}function ti(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function ei(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function ni(){this._=null}function ii(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ri(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function oi(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ai(t){for(;t.L;)t=t.L;return t}function si(t,e){var n,i,r,o=t.sort(li).pop();for(il=[],rl=new Array(t.length),ol=new ni,sl=new ni;;)if(r=al,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))o.x===n&&o.y===i||(rl[o.i]=new Yn(o),Fn(o),n=o.x,i=o.y),o=t.pop();else{if(!r)break;jn(r.arc)}e&&($n(e),Vn(e));var a={cells:rl,edges:il};return ol=sl=il=rl=null,a}function li(t,e){return e.y-t.y||e.x-t.x}function ui(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function ci(t){return t.x}function hi(t){return t.y}function di(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fi(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var a=.5*(n+r),s=.5*(i+o),l=e.nodes;l[0]&&fi(t,l[0],n,i,a,s),l[1]&&fi(t,l[1],a,i,r,s),l[2]&&fi(t,l[2],n,s,a,o),l[3]&&fi(t,l[3],a,s,r,o)}}function pi(t,e,n,i,r,o,a){var s,l=1/0;return function u(t,c,h,d,f){if(!(c>o||h>a||d<i||f<r)){if(p=t.point){var p,g=e-t.x,m=n-t.y,v=g*g+m*m;if(v<l){var y=Math.sqrt(l=v);i=e-y,r=n-y,o=e+y,a=n+y,s=p}}for(var b=t.nodes,w=.5*(c+d),x=.5*(h+f),_=e>=w,k=n>=x,C=k<<1|_,S=C+4;C<S;++C)if(t=b[3&C])switch(3&C){case 0:u(t,c,h,w,x);break;case 1:u(t,w,h,d,x);break;case 2:u(t,c,x,w,f);break;case 3:u(t,w,x,d,f)}}}(t,i,r,o,a),s}function gi(t,e){t=la.rgb(t),e=la.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,a=e.g-i,s=e.b-r;return function(t){return"#"+wt(Math.round(n+o*t))+wt(Math.round(i+a*t))+wt(Math.round(r+s*t))}}function mi(t,e){var n,i={},r={};for(n in t)n in e?i[n]=bi(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function vi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function yi(t,e){var n,i,r,o=hl.lastIndex=dl.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=hl.exec(t))&&(i=dl.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:vi(n,i)})),o=dl.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function bi(t,e){for(var n,i=la.interpolators.length;--i>=0&&!(n=la.interpolators[i](t,e)););return n}function wi(t,e){var n,i=[],r=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)i.push(bi(t[n],e[n]));for(;n<o;++n)r[n]=t[n];for(;n<a;++n)r[n]=e[n];return function(t){for(n=0;n<s;++n)r[n]=i[n](t);return r}}function xi(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function _i(t){return function(e){return 1-t(1-e)}}function ki(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Ci(t){return t*t}function Si(t){return t*t*t}function Mi(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Ti(t){return function(e){return Math.pow(e,t)}}function Ei(t){return 1-Math.cos(t*Ba)}function Oi(t){return Math.pow(2,10*(t-1))}function Ai(t){return 1-Math.sqrt(1-t*t)}function Di(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/ja*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*ja/e)}}function Ri(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Pi(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ni(t,e){t=la.hcl(t),e=la.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,a=e.c-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.c:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(t){return ct(n+o*t,i+a*t,r+s*t)+""}}function zi(t,e){t=la.hsl(t),e=la.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,a=e.s-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.s:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(t){return lt(n+o*t,i+a*t,r+s*t)+""}}function Li(t,e){t=la.lab(t),e=la.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,a=e.a-i,s=e.b-r;return function(t){return dt(n+o*t,i+a*t,r+s*t)+""}}function Ii(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Hi(t){var e=[t.a,t.b],n=[t.c,t.d],i=Fi(e),r=ji(e,n),o=Fi(Bi(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Ya,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*Ya:0}function ji(t,e){return t[0]*e[0]+t[1]*e[1]}function Fi(t){var e=Math.sqrt(ji(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Bi(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Wi(t){return t.length?t.pop()+",":""}function Yi(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push("translate(",null,",",null,")");i.push({i:r-4,x:vi(t[0],e[0])},{i:r-2,x:vi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function Vi(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(Wi(n)+"rotate(",null,")")-2,x:vi(t,e)})):e&&n.push(Wi(n)+"rotate("+e+")")}function Ui(t,e,n,i){t!==e?i.push({i:n.push(Wi(n)+"skewX(",null,")")-2,x:vi(t,e)}):e&&n.push(Wi(n)+"skewX("+e+")")}function qi(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push(Wi(n)+"scale(",null,",",null,")");i.push({i:r-4,x:vi(t[0],e[0])},{i:r-2,x:vi(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(Wi(n)+"scale("+e+")")}function Xi(t,e){var n=[],i=[];return t=la.transform(t),e=la.transform(e),Yi(t.translate,e.translate,n,i),Vi(t.rotate,e.rotate,n,i),Ui(t.skew,e.skew,n,i),qi(t.scale,e.scale,n,i),t=e=null,function(t){for(var e,r=-1,o=i.length;++r<o;)n[(e=i[r]).i]=e.x(t);return n.join("")}}function Gi(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function $i(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Ki(t){for(var e=t.source,n=t.target,i=Qi(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function Zi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Qi(t,e){if(t===e)return t;for(var n=Zi(t),i=Zi(e),r=n.pop(),o=i.pop(),a=null;r===o;)a=r,r=n.pop(),o=i.pop();return a}function Ji(t){t.fixed|=2}function tr(t){t.fixed&=-7}function er(t){t.fixed|=4,t.px=t.x,t.py=t.y}function nr(t){t.fixed&=-5}function ir(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,l=-1;++l<s;)o=a[l],null!=o&&(ir(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);
if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function rr(t,e){return la.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=cr,t}function or(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function ar(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(o=t.children)&&(r=o.length))for(var r,o,a=-1;++a<r;)n.push(o[a]);for(;null!=(t=i.pop());)e(t)}function sr(t){return t.children}function lr(t){return t.value}function ur(t,e){return e.value-t.value}function cr(t){return la.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function hr(t){return t.x}function dr(t){return t.y}function fr(t,e,n){t.y0=e,t.y=n}function pr(t){return la.range(t.length)}function gr(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function mr(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function vr(t){return t.reduce(yr,0)}function yr(t,e){return t+e[1]}function br(t,e){return wr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function wr(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function xr(t){return[la.min(t),la.max(t)]}function _r(t,e){return t.value-e.value}function kr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Cr(t,e){t._pack_next=e,e._pack_prev=t}function Sr(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function Mr(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),d=Math.min(t.y-t.r,d),f=Math.max(t.y+t.r,f)}if((n=t.children)&&(u=n.length)){var n,i,r,o,a,s,l,u,c=1/0,h=-(1/0),d=1/0,f=-(1/0);if(n.forEach(Tr),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(o=n[2],Ar(i,r,o),e(o),kr(i,o),i._pack_prev=o,kr(o,r),r=i._pack_next,a=3;a<u;a++){Ar(i,r,o=n[a]);var p=0,g=1,m=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(Sr(s,o)){p=1;break}if(1==p)for(l=i._pack_prev;l!==s._pack_prev&&!Sr(l,o);l=l._pack_prev,m++);p?(g<m||g==m&&r.r<i.r?Cr(i,r=s):Cr(i=l,r),a--):(kr(i,o),r=o,e(o))}var v=(c+h)/2,y=(d+f)/2,b=0;for(a=0;a<u;a++)o=n[a],o.x-=v,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(Er)}}function Tr(t){t._pack_next=t._pack_prev=t}function Er(t){delete t._pack_next,delete t._pack_prev}function Or(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,a=r.length;++o<a;)Or(r[o],e,n,i)}function Ar(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var a=e.r+n.r,s=r*r+o*o;a*=a,i*=i;var l=.5+(i-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);n.x=t.x+l*r+u*o,n.y=t.y+l*o-u*r}else n.x=t.x+i,n.y=t.y}function Dr(t,e){return t.parent==e.parent?1:2}function Rr(t){var e=t.children;return e.length?e[0]:t.t}function Pr(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Nr(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function zr(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function Lr(t,e,n){return t.a.parent===e.parent?t.a:n}function Ir(t){return 1+la.max(t,function(t){return t.y})}function Hr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function jr(t){var e=t.children;return e&&e.length?jr(e[0]):t}function Fr(t){var e,n=t.children;return n&&(e=n.length)?Fr(n[e-1]):t}function Br(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Wr(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),o<0&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function Yr(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Vr(t){return t.rangeExtent?t.rangeExtent():Yr(t.range())}function Ur(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function qr(t,e){var n,i=0,r=t.length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}function Xr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:kl}function Gr(t,e,n,i){var r=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)r.push(n(t[a-1],t[a])),o.push(i(e[a-1],e[a]));return function(e){var n=la.bisect(t,e,1,s)-1;return o[n](r[n](e))}}function $r(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Gr:Ur,l=i?$i:Gi;return a=r(t,e,l,n),s=r(e,t,l,bi),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},o.range=function(t){return arguments.length?(e=t,r()):e},o.rangeRound=function(t){return o.range(t).interpolate(Ii)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(n=t,r()):n},o.ticks=function(e){return Jr(t,e)},o.tickFormat=function(e,n){return to(t,e,n)},o.nice=function(e){return Zr(t,e),r()},o.copy=function(){return $r(t,e,n,i)},r()}function Kr(t,e){return la.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Zr(t,e){return qr(t,Xr(Qr(t,e)[2])),qr(t,Xr(Qr(t,e)[2])),t}function Qr(t,e){null==e&&(e=10);var n=Yr(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return o<=.15?r*=10:o<=.35?r*=5:o<=.75&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Jr(t,e){return la.range.apply(la,Qr(t,e))}function to(t,e,n){var i=Qr(t,e);if(n){var r=hs.exec(n);if(r.shift(),"s"===r[8]){var o=la.formatPrefix(Math.max(wa(i[0]),wa(i[1])));return r[7]||(r[7]="."+eo(o.scale(i[2]))),r[8]="f",n=la.format(r.join("")),function(t){return n(o.scale(t))+o.symbol}}r[7]||(r[7]="."+no(r[8],i)),n=r.join("")}else n=",."+eo(i[2])+"f";return la.format(n)}function eo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function no(t,e){var n=eo(e[2]);return t in Cl?Math.abs(n-eo(Math.max(wa(e[0]),wa(e[1]))))+ +("e"!==t):n-2*("%"===t)}function io(t,e,n,i){function r(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(r(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),a):i},a.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),a):e},a.nice=function(){var e=qr(i.map(r),n?Math:Ml);return t.domain(e),i=e.map(o),a},a.ticks=function(){var t=Yr(i),a=[],s=t[0],l=t[1],u=Math.floor(r(s)),c=Math.ceil(r(l)),h=e%1?2:e;if(isFinite(c-u)){if(n){for(;u<c;u++)for(var d=1;d<h;d++)a.push(o(u)*d);a.push(o(u))}else for(a.push(o(u));u++<c;)for(var d=h-1;d>0;d--)a.push(o(u)*d);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(t,n){if(!arguments.length)return Sl;arguments.length<2?n=Sl:"function"!=typeof n&&(n=la.format(n));var i=Math.max(1,e*t/a.ticks().length);return function(t){var a=t/o(Math.round(r(t)));return a*e<e-.5&&(a*=e),a<=i?n(t):""}},a.copy=function(){return io(t.copy(),e,n,i)},Kr(a,t)}function ro(t,e,n){function i(e){return t(r(e))}var r=oo(e),o=oo(1/e);return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return Jr(n,t)},i.tickFormat=function(t,e){return to(n,t,e)},i.nice=function(t){return i.domain(Zr(n,t))},i.exponent=function(a){return arguments.length?(r=oo(e=a),o=oo(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return ro(t.copy(),e,n)},Kr(i,t)}function oo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ao(t,e){function n(n){return o[((r.get(n)||("range"===e.t?r.set(n,t.push(n)):NaN))-1)%o.length]}function i(e,n){return la.range(t.length).map(function(t){return e+n*t})}var r,o,a;return n.domain=function(i){if(!arguments.length)return t;t=[],r=new u;for(var o,a=-1,s=i.length;++a<s;)r.has(o=i[a])||r.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],c=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+s);return o=i(l+c*s/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],c=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+s)|0;return o=i(l+Math.round(c*s/2+(u-l-(t.length-1+s)*c)/2),c),a=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],c=r[u-0],h=r[1-u],d=(h-c)/(t.length-s+2*l);return o=i(c+d*l,d),u&&o.reverse(),a=d*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],c=r[u-0],h=r[1-u],d=Math.floor((h-c)/(t.length-s+2*l));return o=i(c+Math.round((h-c-(t.length-s)*d)/2),d),u&&o.reverse(),a=Math.round(d*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Yr(e.a[0])},n.copy=function(){return ao(t,e)},n.domain(t)}function so(t,e){function o(){var n=0,i=e.length;for(s=[];++n<i;)s[n-1]=la.quantile(t,n/i);return a}function a(t){if(!isNaN(t=+t))return e[la.bisect(s,t)]}var s;return a.domain=function(e){return arguments.length?(t=e.map(i).filter(r).sort(n),o()):t},a.range=function(t){return arguments.length?(e=t,o()):e},a.quantiles=function(){return s},a.invertExtent=function(n){return n=e.indexOf(n),n<0?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},a.copy=function(){return so(t,e)},o()}function lo(t,e,n){function i(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function r(){return o=n.length/(e-t),a=n.length-1,i}var o,a;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=e<0?NaN:e/o+t,[e,e+1/o]},i.copy=function(){return lo(t,e,n)},r()}function uo(t,e){function n(n){if(n<=n)return e[la.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return uo(t,e)},n}function co(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Jr(t,e)},e.tickFormat=function(e,n){return to(t,e,n)},e.copy=function(){return co(t)},e}function ho(){return 0}function fo(t){return t.innerRadius}function po(t){return t.outerRadius}function go(t){return t.startAngle}function mo(t){return t.endAngle}function vo(t){return t&&t.padAngle}function yo(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function bo(t,e,n,i,r){var o=t[0]-e[0],a=t[1]-e[1],s=(r?i:-i)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=t[0]+l,h=t[1]+u,d=e[0]+l,f=e[1]+u,p=(c+d)/2,g=(h+f)/2,m=d-c,v=f-h,y=m*m+v*v,b=n-i,w=c*f-d*h,x=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-w*w)),_=(w*v-m*x)/y,k=(-w*m-v*x)/y,C=(w*v+m*x)/y,S=(-w*m+v*x)/y,M=_-p,T=k-g,E=C-p,O=S-g;return M*M+T*T>E*E+O*O&&(_=C,k=S),[[_-l,k-u],[_*n/b,k*n/b]]}function wo(t){function e(e){function a(){u.push("M",o(t(c),s))}for(var l,u=[],c=[],h=-1,d=e.length,f=Mt(n),p=Mt(i);++h<d;)r.call(this,l=e[h],h)?c.push([+f.call(this,l,h),+p.call(this,l,h)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=On,i=An,r=Oe,o=xo,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Rl.get(t)||xo).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function xo(t){return t.length>1?t.join("L"):t+"Z"}function _o(t){return t.join("L")+"Z"}function ko(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function Co(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function So(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Mo(t,e){return t.length<4?xo(t):t[1]+Oo(t.slice(1,-1),Ao(t,e))}function To(t,e){return t.length<3?_o(t):t[0]+Oo((t.push(t[0]),t),Ao([t[t.length-2]].concat(t,[t[1]]),e))}function Eo(t,e){return t.length<3?xo(t):t[0]+Oo(t,Ao(t,e))}function Oo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return xo(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return i}function Ao(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i}function Do(t){if(t.length<3)return xo(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],a=[r,r,r,(i=t[1])[0]],s=[o,o,o,i[1]],l=[r,",",o,"L",zo(zl,a),",",zo(zl,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),Lo(l,a,s);return t.pop(),l.push("L",i),l.join("")}function Ro(t){if(t.length<4)return xo(t);for(var e,n=[],i=-1,r=t.length,o=[0],a=[0];++i<3;)e=t[i],o.push(e[0]),a.push(e[1]);for(n.push(zo(zl,o)+","+zo(zl,a)),--i;++i<r;)e=t[i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Lo(n,o,a);return n.join("")}function Po(t){for(var e,n,i=-1,r=t.length,o=r+4,a=[],s=[];++i<4;)n=t[i%r],a.push(n[0]),s.push(n[1]);for(e=[zo(zl,a),",",zo(zl,s)],--i;++i<o;)n=t[i%r],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Lo(e,a,s);return e.join("")}function No(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(o+r*s),i[1]=e*i[1]+(1-e)*(a+r*l);return Do(t)}function zo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Lo(t,e,n){t.push("C",zo(Pl,e),",",zo(Pl,n),",",zo(Nl,e),",",zo(Nl,n),",",zo(zl,e),",",zo(zl,n))}function Io(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ho(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],a=i[0]=Io(r,o);++e<n;)i[e]=(a+(a=Io(r=o,o=t[e+1])))/2;return i[e]=a,i}function jo(t){for(var e,n,i,r,o=[],a=Ho(t),s=-1,l=t.length-1;++s<l;)e=Io(t[s],t[s+1]),wa(e)<La?a[s]=a[s+1]=0:(n=a[s]/e,i=a[s+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),a[s]=r*n,a[s+1]=r*i));for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}function Fo(t){return t.length<3?xo(t):t[0]+Oo(t,jo(t))}function Bo(t){for(var e,n,i,r=-1,o=t.length;++r<o;)e=t[r],n=e[0],i=e[1]-Ba,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Wo(t){function e(e){function l(){g.push("M",s(t(v),h),c,u(t(m.reverse()),h),"Z")}for(var d,f,p,g=[],m=[],v=[],y=-1,b=e.length,w=Mt(n),x=Mt(r),_=n===i?function(){return f}:Mt(i),k=r===o?function(){return p}:Mt(o);++y<b;)a.call(this,d=e[y],y)?(m.push([f=+w.call(this,d,y),p=+x.call(this,d,y)]),v.push([+_.call(this,d,y),+k.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=On,i=On,r=0,o=An,a=Oe,s=xo,l=s.key,u=s,c="L",h=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=o=t,e):o},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Rl.get(t)||xo).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Yo(t){return t.radius}function Vo(t){return[t.x,t.y]}function Uo(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-Ba;return[n*Math.cos(i),n*Math.sin(i)]}}function qo(){return 64}function Xo(){return"circle"}function Go(t){var e=Math.sqrt(t/Ha);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function $o(t){return function(){var e,n,i;(e=this[t])&&(i=e[n=e.active])&&(i.timer.c=null,i.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function Ko(t,e,n){return Sa(t,Wl),t.namespace=e,t.id=n,t}function Zo(t,e,n,i){var r=t.id,o=t.namespace;return Y(t,"function"==typeof n?function(t,a,s){t[o][r].tween.set(e,i(n.call(t,t.__data__,a,s)))}:(n=i(n),function(t){t[o][r].tween.set(e,n)}))}function Qo(t){return null==t&&(t=""),function(){this.textContent=t}}function Jo(t){return null==t?"__transition__":"__transition_"+t+"__"}function ta(t,e,n,i,r){function o(t){var e=g.delay;return c.t=e+l,e<=t?a(t-e):void(c.c=a)}function a(n){var r=p.active,o=p[r];o&&(o.timer.c=null,o.timer.t=NaN,--p.count,delete p[r],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var a in p)if(+a<i){var u=p[a];u.timer.c=null,u.timer.t=NaN,--p.count,delete p[a]}c.c=s,Dt(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=i,g.event&&g.event.start.call(t,t.__data__,e),f=[],g.tween.forEach(function(n,i){(i=i.call(t,t.__data__,e))&&f.push(i)}),d=g.ease,h=g.duration}function s(r){for(var o=r/h,a=d(o),s=f.length;s>0;)f[--s].call(t,a);if(o>=1)return g.event&&g.event.end.call(t,t.__data__,e),--p.count?delete p[i]:delete t[n],1}var l,c,h,d,f,p=t[n]||(t[n]={active:0,count:0}),g=p[i];g||(l=r.time,c=Dt(o,0,l),g=p[i]={tween:new u,time:l,timer:c,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++p.count)}function ea(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"})}function na(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"})}function ia(t){return t.toISOString()}function ra(t,e,n){function i(e){return t(e)}function r(t,n){var i=t[1]-t[0],r=i/n,o=la.bisect(Zl,r);return o==Zl.length?[e.year,Qr(t.map(function(t){return t/31536e6}),n)[2]]:o?e[r/Zl[o-1]<Zl[o]/r?o-1:o]:[tu,Qr(t,n)[2]]}return i.invert=function(e){return oa(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(oa)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,oa(+n+1),e).length}var o=i.domain(),a=Yr(o),s=null==t?r(a,10):"number"==typeof t&&r(a,t);return s&&(t=s[0],e=s[1]),i.domain(qr(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=oa(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=oa(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Yr(i.domain()),o=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],oa(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return n},i.copy=function(){return ra(t.copy(),e,n)},Kr(i,t)}function oa(t){return new Date(t)}function aa(t){return JSON.parse(t.responseText)}function sa(t){var e=ha.createRange();return e.selectNode(ha.body),e.createContextualFragment(t.responseText)}var la={version:"3.5.15"},ua=[].slice,ca=function(t){return ua.call(t)},ha=this.document;if(ha)try{ca(ha.documentElement.childNodes)[0].nodeType}catch(da){ca=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),ha)try{ha.createElement("DIV").style.setProperty("opacity",0,"")}catch(fa){var pa=this.Element.prototype,ga=pa.setAttribute,ma=pa.setAttributeNS,va=this.CSSStyleDeclaration.prototype,ya=va.setProperty;pa.setAttribute=function(t,e){ga.call(this,t,e+"")},pa.setAttributeNS=function(t,e,n){ma.call(this,t,e,n+"")},va.setProperty=function(t,e,n){ya.call(this,t,e+"",n)}}la.ascending=n,la.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},la.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},la.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},la.extent=function(t,e){var n,i,r,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(i=t[o])&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=t[o])&&(n>i&&(n=i),r<i&&(r=i))}else{for(;++o<a;)if(null!=(i=e.call(t,t[o],o))&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),r<i&&(r=i))}return[n,r]},la.sum=function(t,e){var n,i=0,o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)r(n=+t[a])&&(i+=n);else for(;++a<o;)r(n=+e.call(t,t[a],a))&&(i+=n);return i},la.mean=function(t,e){var n,o=0,a=t.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)r(n=i(t[s]))?o+=n:--l;else for(;++s<a;)r(n=i(e.call(t,t[s],s)))?o+=n:--l;if(l)return o/l},la.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},la.median=function(t,e){var o,a=[],s=t.length,l=-1;if(1===arguments.length)for(;++l<s;)r(o=i(t[l]))&&a.push(o);else for(;++l<s;)r(o=i(e.call(t,t[l],l)))&&a.push(o);if(a.length)return la.quantile(a.sort(n),.5)},la.variance=function(t,e){var n,o,a=t.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)r(n=i(t[u]))&&(o=n-s,s+=o/++c,l+=o*(n-s));else for(;++u<a;)r(n=i(e.call(t,t[u],u)))&&(o=n-s,s+=o/++c,l+=o*(n-s));if(c>1)return l/(c-1)},la.deviation=function(){var t=la.variance.apply(this,arguments);return t?Math.sqrt(t):t};var ba=o(n);la.bisectLeft=ba.left,la.bisect=la.bisectRight=ba.right,la.bisector=function(t){return o(1===t.length?function(e,i){return n(t(e),i)}:t)},la.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var i,r,o=n-e;o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},la.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},la.pairs=function(t){for(var e,n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=[e=r,r=t[++n]];return o},la.transpose=function(t){if(!(r=t.length))return[];for(var e=-1,n=la.min(t,a),i=new Array(n);++e<n;)for(var r,o=-1,s=i[e]=new Array(r);++o<r;)s[o]=t[o][e];return i},la.zip=function(){return la.transpose(arguments)},la.keys=function(t){var e=[];for(var n in t)e.push(n);return e},la.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},la.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},la.merge=function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--a]=i[e];return n};var wa=Math.abs;la.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var i,r=[],o=s(wa(n)),a=-1;if(t*=o,e*=o,n*=o,n<0)for(;(i=t+n*++a)>e;)r.push(i/o);else for(;(i=t+n*++a)<e;)r.push(i/o);return r},la.map=function(t,e){var n=new u;if(t instanceof u)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(1===arguments.length)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e.call(t,i=t[r],r),i)}else for(var a in t)n.set(a,t[a]);return n};var xa="__proto__",_a="\0";l(u,{has:d,get:function(t){return this._[c(t)]},set:function(t,e){return this._[c(t)]=e},remove:f,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:h(e),value:this._[e]});return t},size:g,empty:m,forEach:function(t){for(var e in this._)t.call(this,h(e),this._[e])}}),la.nest=function(){function t(e,a,s){if(s>=o.length)return i?i.call(r,a):n?a.sort(n):a;for(var l,c,h,d,f=-1,p=a.length,g=o[s++],m=new u;++f<p;)(d=m.get(l=g(c=a[f])))?d.push(c):m.set(l,[c]);return e?(c=e(),h=function(n,i){c.set(n,t(e,i,s))}):(c={},h=function(n,i){c[n]=t(e,i,s)}),m.forEach(h),c}function e(t,n){if(n>=o.length)return t;var i=[],r=a[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,r={},o=[],a=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(la.map,n,0),0)},r.key=function(t){return o.push(t),r},r.sortKeys=function(t){return a[o.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return i=t,r},r},la.set=function(t){var e=new v;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},l(v,{has:d,add:function(t){return this._[c(t+="")]=!0,t},remove:f,values:p,size:g,empty:m,forEach:function(t){for(var e in this._)t.call(this,h(e))}}),la.behavior={},la.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=b(t,e,e[n]);return t};var ka=["webkit","ms","moz","Moz","o","O"];la.dispatch=function(){for(var t=new _,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=k(t);return t},_.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},la.event=null,la.requote=function(t){return t.replace(Ca,"\\$&")};var Ca=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sa={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},Ma=function(t,e){return e.querySelector(t)},Ta=function(t,e){return e.querySelectorAll(t)},Ea=function(t,e){var n=t.matches||t[w(t,"matchesSelector")];return(Ea=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(Ma=function(t,e){return Sizzle(t,e)[0]||null},Ta=Sizzle,Ea=Sizzle.matchesSelector),la.selection=function(){return la.select(ha.documentElement)};var Oa=la.selection.prototype=[];Oa.select=function(t){var e,n,i,r,o=[];t=E(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(i=this[a]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return T(o)},Oa.selectAll=function(t){var e,n,i=[];t=O(t);for(var r=-1,o=this.length;++r<o;)for(var a=this[r],s=-1,l=a.length;++s<l;)(n=a[s])&&(i.push(e=ca(t.call(n,n.__data__,s,r))),e.parentNode=n);return T(i)};var Aa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};la.ns={prefix:Aa,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Aa.hasOwnProperty(n)?{space:Aa[n],local:t}:t}},Oa.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=la.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(A(e,t[e]));return this}return this.each(A(t,e))},Oa.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=P(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!R(t[r]).test(e))return!1;return!0}for(e in t)this.each(N(e,t[e]));return this}return this.each(N(t,e))},Oa.style=function(t,n,i){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(n="");for(i in t)this.each(L(i,t[i],n));return this}if(r<2){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}i=""}return this.each(L(t,n,i))},Oa.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(I(e,t[e]));return this}return this.each(I(t,e))},Oa.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Oa.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Oa.append=function(t){return t=H(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Oa.insert=function(t,e){return t=H(t),e=E(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Oa.remove=function(){return this.each(j)},Oa.data=function(t,e){function n(t,n){var i,r,o,a=t.length,h=n.length,d=Math.min(a,h),f=new Array(h),p=new Array(h),g=new Array(a);if(e){var m,v=new u,y=new Array(a);for(i=-1;++i<a;)(r=t[i])&&(v.has(m=e.call(r,r.__data__,i))?g[i]=r:v.set(m,r),y[i]=m);for(i=-1;++i<h;)(r=v.get(m=e.call(n,o=n[i],i)))?r!==!0&&(f[i]=r,r.__data__=o):p[i]=F(o),v.set(m,!0);for(i=-1;++i<a;)i in y&&v.get(y[i])!==!0&&(g[i]=t[i])}else{for(i=-1;++i<d;)r=t[i],o=n[i],r?(r.__data__=o,f[i]=r):p[i]=F(o);for(;i<h;++i)p[i]=F(n[i]);for(;i<a;++i)g[i]=t[i]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,s.push(p),l.push(f),c.push(g)}var i,r,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(i=this[0]).length);++o<a;)(r=i[o])&&(t[o]=r.__data__);return t}var s=V([]),l=T([]),c=T([]);if("function"==typeof t)for(;++o<a;)n(i=this[o],t.call(i,i.parentNode.__data__,o));else for(;++o<a;)n(i=this[o],t);return l.enter=function(){return s},l.exit=function(){return c},l},Oa.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Oa.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=B(t));for(var o=0,a=this.length;o<a;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return T(r)},Oa.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Oa.sort=function(t){t=W.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Oa.each=function(t){return Y(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Oa.call=function(t){var e=ca(arguments);return t.apply(e[0]=this,e),this},Oa.empty=function(){return!this.node()},Oa.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var o=n[i];if(o)return o}return null},Oa.size=function(){var t=0;return Y(this,function(){++t}),t};var Da=[];la.selection.enter=V,la.selection.enter.prototype=Da,Da.append=Oa.append,Da.empty=Oa.empty,Da.node=Oa.node,Da.call=Oa.call,Da.size=Oa.size,Da.select=function(t){for(var e,n,i,r,o,a=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(o=r[u])?(e.push(i[u]=n=t.call(r.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return T(a)},Da.insert=function(t,e){return arguments.length<2&&(e=U(this)),Oa.insert.call(this,t,e)},la.select=function(e){var n;return"string"==typeof e?(n=[Ma(e,ha)],n.parentNode=ha.documentElement):(n=[e],n.parentNode=t(e)),T([n])},la.selectAll=function(t){var e;return"string"==typeof t?(e=ca(Ta(t,ha)),e.parentNode=ha.documentElement):(e=ca(t),e.parentNode=null),T([e])},Oa.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(e=!1);for(n in t)this.each(q(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(q(t,e,n))};var Ra=la.map({mouseenter:"mouseover",mouseleave:"mouseout"});ha&&Ra.forEach(function(t){"on"+t in ha&&Ra.remove(t)});var Pa,Na=0;la.mouse=function(t){return K(t,S())};var za=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;la.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=S().changedTouches),e)for(var i,r=0,o=e.length;r<o;++r)if((i=e[r]).identifier===n)return K(t,i)},la.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(t,e,n,o,a){
return function(){function s(){var t,n,i=e(d,g);i&&(t=i[0]-b[0],n=i[1]-b[1],p|=t|n,b=i,f({type:"drag",x:i[0]+u[0],y:i[1]+u[1],dx:t,dy:n}))}function l(){e(d,g)&&(v.on(o+m,null).on(a+m,null),y(p),f({type:"dragend"}))}var u,c=this,h=la.event.target.correspondingElement||la.event.target,d=c.parentNode,f=i.of(c,arguments),p=0,g=t(),m=".drag"+(null==g?"":"-"+g),v=la.select(n(h)).on(o+m,s).on(a+m,l),y=$(h),b=e(d,g);r?(u=r.apply(c,arguments),u=[u.x-b[0],u.y-b[1]]):u=[0,0],f({type:"dragstart"})}}var i=M(t,"drag","dragstart","dragend"),r=null,o=n(x,la.mouse,e,"mousemove","mouseup"),a=n(Z,la.touch,y,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},la.rebind(t,i,"on")},la.touches=function(t,e){return arguments.length<2&&(e=S().touches),e?ca(e).map(function(e){var n=K(t,e);return n.identifier=e.identifier,n}):[]};var La=1e-6,Ia=La*La,Ha=Math.PI,ja=2*Ha,Fa=ja-La,Ba=Ha/2,Wa=Ha/180,Ya=180/Ha,Va=Math.SQRT2,Ua=2,qa=4;la.interpolateZoom=function(t,e){var n,i,r=t[0],o=t[1],a=t[2],s=e[0],l=e[1],u=e[2],c=s-r,h=l-o,d=c*c+h*h;if(d<Ia)i=Math.log(u/a)/Va,n=function(t){return[r+t*c,o+t*h,a*Math.exp(Va*t*i)]};else{var f=Math.sqrt(d),p=(u*u-a*a+qa*d)/(2*a*Ua*f),g=(u*u-a*a-qa*d)/(2*u*Ua*f),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);i=(v-m)/Va,n=function(t){var e=t*i,n=it(m),s=a/(Ua*f)*(n*rt(Va*e+m)-nt(m));return[r+s*c,o+s*h,a*n/it(Va*e+m)]}}return n.duration=1e3*i,n},la.behavior.zoom=function(){function t(t){t.on(D,h).on(Ga+".zoom",f).on("dblclick.zoom",p).on(N,d)}function n(t){return[(t[0]-S.x)/S.k,(t[1]-S.y)/S.k]}function i(t){return[t[0]*S.k+S.x,t[1]*S.k+S.y]}function r(t){S.k=Math.max(E[0],Math.min(E[1],t))}function o(t,e){e=i(e),S.x+=t[0]-e[0],S.y+=t[1]-e[1]}function a(e,n,i,a){e.__chart__={x:S.x,y:S.y,k:S.k},r(Math.pow(2,a)),o(m=n,i),e=la.select(e),O>0&&(e=e.transition().duration(O)),e.call(t.event)}function s(){x&&x.domain(w.range().map(function(t){return(t-S.x)/S.k}).map(w.invert)),k&&k.domain(_.range().map(function(t){return(t-S.y)/S.k}).map(_.invert))}function l(t){A++||t({type:"zoomstart"})}function u(t){s(),t({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(t){--A||(t({type:"zoomend"}),m=null)}function h(){function t(){s=1,o(la.mouse(r),d),u(a)}function i(){h.on(R,null).on(P,null),f(s),c(a)}var r=this,a=z.of(r,arguments),s=0,h=la.select(e(r)).on(R,t).on(P,i),d=n(la.mouse(r)),f=$(r);Bl.call(r),l(a)}function d(){function t(){var t=la.touches(p);return f=S.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=n(t))}),t}function e(){var e=la.event.target;la.select(e).on(w,i).on(x,s),_.push(e);for(var n=la.event.changedTouches,r=0,o=n.length;r<o;++r)m[n[r].identifier]=null;var l=t(),u=Date.now();if(1===l.length){if(u-b<500){var c=l[0];a(p,c,m[c.identifier],Math.floor(Math.log(S.k)/Math.LN2)+1),C()}b=u}else if(l.length>1){var c=l[0],h=l[1],d=c[0]-h[0],f=c[1]-h[1];v=d*d+f*f}}function i(){var t,e,n,i,a=la.touches(p);Bl.call(p);for(var s=0,l=a.length;s<l;++s,i=null)if(n=a[s],i=m[n.identifier]){if(e)break;t=n,e=i}if(i){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,h=v&&Math.sqrt(c/v);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],r(h*f)}b=null,o(t,e),u(g)}function s(){if(la.event.touches.length){for(var e=la.event.changedTouches,n=0,i=e.length;n<i;++n)delete m[e[n].identifier];for(var r in m)return void t()}la.selectAll(_).on(y,null),k.on(D,h).on(N,d),M(),c(g)}var f,p=this,g=z.of(p,arguments),m={},v=0,y=".zoom-"+la.event.changedTouches[0].identifier,w="touchmove"+y,x="touchend"+y,_=[],k=la.select(p),M=$(p);e(),l(g),k.on(D,null).on(N,e)}function f(){var t=z.of(this,arguments);y?clearTimeout(y):(Bl.call(this),g=n(m=v||la.mouse(this)),l(t)),y=setTimeout(function(){y=null,c(t)},50),C(),r(Math.pow(2,.002*Xa())*S.k),o(m,g),u(t)}function p(){var t=la.mouse(this),e=Math.log(S.k)/Math.LN2;a(this,t,n(t),la.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var g,m,v,y,b,w,x,_,k,S={x:0,y:0,k:1},T=[960,500],E=$a,O=250,A=0,D="mousedown.zoom",R="mousemove.zoom",P="mouseup.zoom",N="touchstart.zoom",z=M(t,"zoomstart","zoom","zoomend");return Ga||(Ga="onwheel"in ha?(Xa=function(){return-la.event.deltaY*(la.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ha?(Xa=function(){return la.event.wheelDelta},"mousewheel"):(Xa=function(){return-la.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=z.of(this,arguments),e=S;jl?la.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var n=T[0],i=T[1],r=m?m[0]:n/2,o=m?m[1]:i/2,a=la.interpolateZoom([(r-S.x)/S.k,(o-S.y)/S.k,n/S.k],[(r-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var i=a(e),s=n/i[2];this.__chart__=S={x:r-i[0]*s,y:o-i[1]*s,k:s},u(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=S,l(t),u(t),c(t))})},t.translate=function(e){return arguments.length?(S={x:+e[0],y:+e[1],k:S.k},s(),t):[S.x,S.y]},t.scale=function(e){return arguments.length?(S={x:S.x,y:S.y,k:null},r(+e),s(),t):S.k},t.scaleExtent=function(e){return arguments.length?(E=null==e?$a:[+e[0],+e[1]],t):E},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(T=e&&[+e[0],+e[1]],t):T},t.duration=function(e){return arguments.length?(O=+e,t):O},t.x=function(e){return arguments.length?(x=e,w=e.copy(),S={x:0,y:0,k:1},t):x},t.y=function(e){return arguments.length?(k=e,_=e.copy(),S={x:0,y:0,k:1},t):k},la.rebind(t,z,"on")};var Xa,Ga,$a=[0,1/0];la.color=at,at.prototype.toString=function(){return this.rgb()+""},la.hsl=st;var Ka=st.prototype=new at;Ka.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,this.l/t)},Ka.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,t*this.l)},Ka.rgb=function(){return lt(this.h,this.s,this.l)},la.hcl=ut;var Za=ut.prototype=new at;Za.brighter=function(t){return new ut(this.h,this.c,Math.min(100,this.l+Qa*(arguments.length?t:1)))},Za.darker=function(t){return new ut(this.h,this.c,Math.max(0,this.l-Qa*(arguments.length?t:1)))},Za.rgb=function(){return ct(this.h,this.c,this.l).rgb()},la.lab=ht;var Qa=18,Ja=.95047,ts=1,es=1.08883,ns=ht.prototype=new at;ns.brighter=function(t){return new ht(Math.min(100,this.l+Qa*(arguments.length?t:1)),this.a,this.b)},ns.darker=function(t){return new ht(Math.max(0,this.l-Qa*(arguments.length?t:1)),this.a,this.b)},ns.rgb=function(){return dt(this.l,this.a,this.b)},la.rgb=vt;var is=vt.prototype=new at;is.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&e<r&&(e=r),n&&n<r&&(n=r),i&&i<r&&(i=r),new vt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new vt(r,r,r)},is.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new vt(t*this.r,t*this.g,t*this.b)},is.hsl=function(){return _t(this.r,this.g,this.b)},is.toString=function(){return"#"+wt(this.r)+wt(this.g)+wt(this.b)};var rs=la.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});rs.forEach(function(t,e){rs.set(t,yt(e))}),la.functor=Mt,la.xhr=Tt(y),la.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=Et(t,e,null==n?i:r(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?i:r(t)):n},a}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(c>=u)return a;if(r)return r=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++c):10===i&&(r=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<u;){var i=t.charCodeAt(c++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(c)&&(++c,++s);else if(i!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var i,r,o={},a={},s=[],u=t.length,c=0,h=0;(i=n())!==a;){for(var d=[];i!==o&&i!==a;)d.push(i),i=n();e&&null==(d=e(d,h++))||s.push(d)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new v,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(a).join(t)].concat(e.map(function(e){return r.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},la.csv=la.dsv(",","text/csv"),la.tsv=la.dsv("\t","text/tab-separated-values");var os,as,ss,ls,us=this[w(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};la.timer=function(){Dt.apply(this,arguments)},la.timer.flush=function(){Pt(),Nt()},la.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var cs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Lt);la.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=la.round(t,zt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),cs[8+n/3]};var hs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ds=la.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=la.round(t,zt(t,e))).toFixed(Math.max(0,Math.min(20,zt(t*(1+1e-15),e))))}}),fs=la.time={},ps=Date;jt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){gs.setUTCDate.apply(this._,arguments)},setDay:function(){gs.setUTCDay.apply(this._,arguments)},setFullYear:function(){gs.setUTCFullYear.apply(this._,arguments)},setHours:function(){gs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){gs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){gs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){gs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){gs.setUTCSeconds.apply(this._,arguments)},setTime:function(){gs.setTime.apply(this._,arguments)}};var gs=Date.prototype;fs.year=Ft(function(t){return t=fs.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),fs.years=fs.year.range,fs.years.utc=fs.year.utc.range,fs.day=Ft(function(t){var e=new ps(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),fs.days=fs.day.range,fs.days.utc=fs.day.utc.range,fs.dayOfYear=function(t){var e=fs.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=fs[t]=Ft(function(t){return(t=fs.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=fs.year(t).getDay();return Math.floor((fs.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});fs[t+"s"]=n.range,fs[t+"s"].utc=n.utc.range,fs[t+"OfYear"]=function(t){var n=fs.year(t).getDay();return Math.floor((fs.dayOfYear(t)+(n+e)%7)/7)}}),fs.week=fs.sunday,fs.weeks=fs.sunday.range,fs.weeks.utc=fs.sunday.utc.range,fs.weekOfYear=fs.sundayOfYear;var ms={"-":"",_:" ",0:"0"},vs=/^\s*\d+/,ys=/^%/;la.locale=function(t){return{numberFormat:It(t),timeFormat:Wt(t)}};var bs=la.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});la.format=bs.numberFormat,la.geo={},ue.prototype={s:0,t:0,add:function(t){ce(t,this.t,ws),ce(ws.s,this.s,this),this.s?this.t+=ws.t:this.s=ws.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ws=new ue;la.geo.stream=function(t,e){t&&xs.hasOwnProperty(t.type)?xs[t.type](t,e):he(t,e)};var xs={Feature:function(t,e){he(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)he(n[i].geometry,e)}},_s={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){de(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)de(n[i],e,0)},Polygon:function(t,e){fe(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)fe(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)he(n[i],e)}};la.geo.area=function(t){return ks=0,la.geo.stream(t,Ss),ks};var ks,Cs=new ue,Ss={sphere:function(){ks+=4*Ha},point:x,lineStart:x,lineEnd:x,polygonStart:function(){Cs.reset(),Ss.lineStart=pe},polygonEnd:function(){var t=2*Cs;ks+=t<0?4*Ha+t:t,Ss.lineStart=Ss.lineEnd=Ss.point=x}};la.geo.bounds=function(){function t(t,e){b.push(w=[c=t,d=t]),e<h&&(h=e),e>f&&(f=e)}function e(e,n){var i=ge([e*Wa,n*Wa]);if(v){var r=ve(v,i),o=[r[1],-r[0],0],a=ve(o,r);we(a),a=xe(a);var l=e-p,u=l>0?1:-1,g=a[0]*Ya*u,m=wa(l)>180;if(m^(u*p<g&&g<u*e)){var y=a[1]*Ya;y>f&&(f=y)}else if(g=(g+360)%360-180,m^(u*p<g&&g<u*e)){var y=-a[1]*Ya;y<h&&(h=y)}else n<h&&(h=n),n>f&&(f=n);m?e<p?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e):d>=c?(e<c&&(c=e),e>d&&(d=e)):e>p?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e)}else t(e,n);v=i,p=e}function n(){x.point=e}function i(){w[0]=c,w[1]=d,x.point=t,v=null}function r(t,n){if(v){var i=t-p;y+=wa(i)>180?i+(i>0?360:-360):i}else g=t,m=n;Ss.point(t,n),e(t,n)}function o(){Ss.lineStart()}function a(){r(g,m),Ss.lineEnd(),wa(y)>La&&(c=-(d=180)),w[0]=c,w[1]=d,v=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,h,d,f,p,g,m,v,y,b,w,x={point:t,lineStart:n,lineEnd:i,polygonStart:function(){x.point=r,x.lineStart=o,x.lineEnd=a,y=0,Ss.polygonStart()},polygonEnd:function(){Ss.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=i,Cs<0?(c=-(d=180),h=-(f=90)):y>La?f=90:y<-La&&(h=-90),w[0]=c,w[1]=d}};return function(t){f=d=-(c=h=1/0),b=[],la.geo.stream(t,x);var e=b.length;if(e){b.sort(l);for(var n,i=1,r=b[0],o=[r];i<e;++i)n=b[i],u(n[0],r)||u(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):o.push(r=n);for(var a,n,p=-(1/0),e=o.length-1,i=0,r=o[e];i<=e;r=n,++i)n=o[i],(a=s(r[1],n[0]))>p&&(p=a,c=n[0],d=r[1])}return b=w=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[d,f]]}}(),la.geo.centroid=function(t){Ms=Ts=Es=Os=As=Ds=Rs=Ps=Ns=zs=Ls=0,la.geo.stream(t,Is);var e=Ns,n=zs,i=Ls,r=e*e+n*n+i*i;return r<Ia&&(e=Ds,n=Rs,i=Ps,Ts<La&&(e=Es,n=Os,i=As),r=e*e+n*n+i*i,r<Ia)?[NaN,NaN]:[Math.atan2(n,e)*Ya,et(i/Math.sqrt(r))*Ya]};var Ms,Ts,Es,Os,As,Ds,Rs,Ps,Ns,zs,Ls,Is={sphere:x,point:ke,lineStart:Se,lineEnd:Me,polygonStart:function(){Is.lineStart=Te},polygonEnd:function(){Is.lineStart=Se}},Hs=Pe(Oe,Ie,je,[-Ha,-Ha/2]),js=1e9;la.geo.clipExtent=function(){var t,e,n,i,r,o,a={stream:function(t){return r&&(r.valid=!1),r=o(t),r.valid=!0,r},extent:function(s){return arguments.length?(o=Ye(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),a):[[t,e],[n,i]]}};return a.extent([[0,0],[960,500]])},(la.geo.conicEqualArea=function(){return Ve(Ue)}).raw=Ue,la.geo.albers=function(){return la.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},la.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(i(o,a),e)||r(o,a),e}var e,n,i,r,o=la.geo.albers(),a=la.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=la.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?a:r>=.166&&r<.234&&i>=-.214&&i<-.115?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var u=o.scale(),c=+e[0],h=+e[1];return n=o.translate(e).clipExtent([[c-.455*u,h-.238*u],[c+.455*u,h+.238*u]]).stream(l).point,i=a.translate([c-.307*u,h+.201*u]).clipExtent([[c-.425*u+La,h+.12*u+La],[c-.214*u-La,h+.234*u-La]]).stream(l).point,r=s.translate([c-.205*u,h+.212*u]).clipExtent([[c-.214*u+La,h+.166*u+La],[c-.115*u-La,h+.234*u-La]]).stream(l).point,t},t.scale(1070)};var Fs,Bs,Ws,Ys,Vs,Us,qs={point:x,lineStart:x,lineEnd:x,polygonStart:function(){Bs=0,qs.lineStart=qe},polygonEnd:function(){qs.lineStart=qs.lineEnd=qs.point=x,Fs+=wa(Bs/2)}},Xs={point:Xe,lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},Gs={point:Ke,lineStart:Ze,lineEnd:Qe,polygonStart:function(){Gs.lineStart=Je},polygonEnd:function(){Gs.point=Ke,Gs.lineStart=Ze,Gs.lineEnd=Qe}};la.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=r(o)),la.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,i,r,o,a,s=4.5;return t.area=function(t){return Fs=0,la.geo.stream(t,r(qs)),Fs},t.centroid=function(t){return Es=Os=As=Ds=Rs=Ps=Ns=zs=Ls=0,la.geo.stream(t,r(Gs)),Ls?[Ns/Ls,zs/Ls]:Ps?[Ds/Ps,Rs/Ps]:As?[Es/As,Os/As]:[NaN,NaN]},t.bounds=function(t){return Vs=Us=-(Ws=Ys=1/0),la.geo.stream(t,r(Xs)),[[Ws,Ys],[Vs,Us]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||nn(t):y,e()):n},t.context=function(t){return arguments.length?(o=null==(i=t)?new Ge:new tn(t),"function"!=typeof s&&o.pointRadius(s),e()):i},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(la.geo.albersUsa()).context(null)},la.geo.transform=function(t){return{stream:function(e){var n=new rn(e);for(var i in t)n[i]=t[i];return n}}},rn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},la.geo.projection=an,la.geo.projectionMutator=sn,(la.geo.equirectangular=function(){return an(un)}).raw=un.invert=un,la.geo.rotation=function(t){function e(e){return e=t(e[0]*Wa,e[1]*Wa),e[0]*=Ya,e[1]*=Ya,e}return t=hn(t[0]%360*Wa,t[1]*Wa,t.length>2?t[2]*Wa:0),e.invert=function(e){return e=t.invert(e[0]*Wa,e[1]*Wa),e[0]*=Ya,e[1]*=Ya,e},e},cn.invert=un,la.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=hn(-t[0]*Wa,-t[1]*Wa,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Ya,t[1]*=Ya}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=gn((e=+i)*Wa,r*Wa),t):e},t.precision=function(i){return arguments.length?(n=gn(e*Wa,(r=+i)*Wa),t):r},t.angle(90)},la.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Wa,r=t[1]*Wa,o=e[1]*Wa,a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*a)*n+(n=u*c-l*h*s)*n),l*c+u*h*s)},la.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return la.range(Math.ceil(o/m)*m,r,m).map(d).concat(la.range(Math.ceil(u/v)*v,l,v).map(f)).concat(la.range(Math.ceil(i/p)*p,n,p).filter(function(t){return wa(t%m)>La}).map(c)).concat(la.range(Math.ceil(s/g)*g,a,g).filter(function(t){return wa(t%v)>La}).map(h))}var n,i,r,o,a,s,l,u,c,h,d,f,p=10,g=p,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(f(l).slice(1),d(r).reverse().slice(1),f(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],u=+e[0][1],l=+e[1][1],o>r&&(e=o,o=r,r=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[r,l]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],i>n&&(e=i,i=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(y)):[[i,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=vn(s,a,90),h=yn(i,n,y),d=vn(u,l,90),f=yn(o,r,y),t):y},t.majorExtent([[-180,-90+La],[180,90-La]]).minorExtent([[-180,-80-La],[180,80+La]])},la.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=bn,r=wn;return t.distance=function(){return la.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},la.geo.interpolate=function(t,e){return xn(t[0]*Wa,t[1]*Wa,e[0]*Wa,e[1]*Wa)},la.geo.length=function(t){return $s=0,la.geo.stream(t,Ks),$s};var $s,Ks={sphere:x,point:x,lineStart:_n,lineEnd:x,polygonStart:x,polygonEnd:x},Zs=kn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(la.geo.azimuthalEqualArea=function(){return an(Zs)}).raw=Zs;var Qs=kn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},y);(la.geo.azimuthalEquidistant=function(){return an(Qs)}).raw=Qs,(la.geo.conicConformal=function(){return Ve(Cn)}).raw=Cn,(la.geo.conicEquidistant=function(){return Ve(Sn)}).raw=Sn;var Js=kn(function(t){return 1/t},Math.atan);(la.geo.gnomonic=function(){return an(Js)}).raw=Js,Mn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ba]},(la.geo.mercator=function(){return Tn(Mn)}).raw=Mn;var tl=kn(function(){return 1},Math.asin);(la.geo.orthographic=function(){return an(tl)}).raw=tl;var el=kn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(la.geo.stereographic=function(){return an(el)}).raw=el,En.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ba]},(la.geo.transverseMercator=function(){var t=Tn(En),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=En,la.geom={},la.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=Mt(n),o=Mt(i),a=t.length,s=[],l=[];for(e=0;e<a;e++)s.push([+r.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(Rn),e=0;e<a;e++)l.push([s[e][0],-s[e][1]]);var u=Dn(s),c=Dn(l),h=c[0]===u[0],d=c[c.length-1]===u[u.length-1],f=[];for(e=u.length-1;e>=0;--e)f.push(t[s[u[e]][2]]);for(e=+h;e<c.length-d;++e)f.push(t[s[c[e]][2]]);return f}var n=On,i=An;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},la.geom.polygon=function(t){return Sa(t,nl),t};var nl=la.geom.polygon.prototype=[];nl.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},nl.centroid=function(t){var e,n,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},nl.clip=function(t){for(var e,n,i,r,o,a,s=zn(t),l=-1,u=this.length-zn(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,r=this[l],o=e[(i=e.length-s)-1],n=-1;++n<i;)a=e[n],Pn(a,c,r)?(Pn(o,c,r)||t.push(Nn(o,a,c,r)),t.push(a)):Pn(o,c,r)&&t.push(Nn(o,a,c,r)),o=a;s&&t.push(t[0]),c=r}return t};var il,rl,ol,al,sl,ll=[],ul=[];Yn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Un),e.length},ei.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ni.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ai(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(ri(this,n),t=n,n=t.U),n.C=!1,i.C=!0,oi(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(oi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,ri(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?ai(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,ri(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,oi(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,ri(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,oi(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ri(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,oi(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},la.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=s[0][0],r=s[0][1],o=s[1][0],a=s[1][1];return si(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=i&&u.x<=o&&u.y>=r&&u.y<=a?[[i,a],[o,a],[o,r],[i,r]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/La)*La,y:Math.round(a(t,e)/La)*La,i:e}})}var i=On,r=An,o=i,a=r,s=cl;return t?e(t):(e.links=function(t){return si(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return si(n(t)).cells.forEach(function(n,i){for(var r,o,a=n.site,s=n.edges.sort(Un),l=-1,u=s.length,c=s[u-1].edge,h=c.l===a?c.r:c.l;++l<u;)r=c,o=h,c=s[l].edge,h=c.l===a?c.r:c.l,i<o.i&&i<h.i&&ui(a,o,h)<0&&e.push([t[i],t[o.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(o=Mt(i=t),e):i},e.y=function(t){return arguments.length?(a=Mt(r=t),e):r},e.clipExtent=function(t){return arguments.length?(s=null==t?cl:t,e):s===cl?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===cl?null:s&&s[1]},e)};var cl=[[-1e6,-1e6],[1e6,1e6]];la.geom.delaunay=function(t){return la.geom.voronoi().triangles(t)},la.geom.quadtree=function(t,e,n,i,r){function o(t){function o(t,e,n,i,r,o,a,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(wa(l-n)+wa(c-i)<.01)u(t,e,n,i,r,o,a,s);else{var h=t.point;t.x=t.y=t.point=null,u(t,h,l,c,r,o,a,s),u(t,e,n,i,r,o,a,s)}else t.x=n,t.y=i,t.point=e}else u(t,e,n,i,r,o,a,s)}function u(t,e,n,i,r,a,s,l){var u=.5*(r+s),c=.5*(a+l),h=n>=u,d=i>=c,f=d<<1|h;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]=di()),h?r=u:s=u,d?a=c:l=c,o(t,e,n,i,r,a,s,l)}var c,h,d,f,p,g,m,v,y,b=Mt(s),w=Mt(l);if(null!=e)g=e,m=n,v=i,y=r;else if(v=y=-(g=m=1/0),h=[],d=[],p=t.length,a)for(f=0;f<p;++f)c=t[f],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),h.push(c.x),d.push(c.y);else for(f=0;f<p;++f){var x=+b(c=t[f],f),_=+w(c,f);x<g&&(g=x),_<m&&(m=_),x>v&&(v=x),_>y&&(y=_),h.push(x),d.push(_)}var k=v-g,C=y-m;k>C?y=m+k:v=g+C;var S=di();if(S.add=function(t){o(S,t,+b(t,++f),+w(t,f),g,m,v,y)},S.visit=function(t){fi(t,S,g,m,v,y)},S.find=function(t){return pi(S,t[0],t[1],g,m,v,y);
},f=-1,null==e){for(;++f<p;)o(S,t[f],h[f],d[f],g,m,v,y);--f}else t.forEach(S.add);return h=d=t=c=null,S}var a,s=On,l=An;return(a=arguments.length)?(s=ci,l=hi,3===a&&(r=n,i=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),o):null==e?null:[[e,n],[i,r]]},o.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),o):null==e?null:[i-e,r-n]},o)},la.interpolateRgb=gi,la.interpolateObject=mi,la.interpolateNumber=vi,la.interpolateString=yi;var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dl=new RegExp(hl.source,"g");la.interpolate=bi,la.interpolators=[function(t,e){var n=typeof e;return("string"===n?rs.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?gi:yi:e instanceof at?gi:Array.isArray(e)?wi:"object"===n&&isNaN(e)?mi:vi)(t,e)}],la.interpolateArray=wi;var fl=function(){return y},pl=la.map({linear:fl,poly:Ti,quad:function(){return Ci},cubic:function(){return Si},sin:function(){return Ei},exp:function(){return Oi},circle:function(){return Ai},elastic:Di,back:Ri,bounce:function(){return Pi}}),gl=la.map({"in":y,out:_i,"in-out":ki,"out-in":function(t){return ki(_i(t))}});la.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return n=pl.get(n)||fl,i=gl.get(i)||y,xi(i(n.apply(null,ua.call(arguments,1))))},la.interpolateHcl=Ni,la.interpolateHsl=zi,la.interpolateLab=Li,la.interpolateRound=Ii,la.transform=function(t){var e=ha.createElementNS(la.ns.prefix.svg,"g");return(la.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Hi(n?n.matrix:ml)})(t)},Hi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ml={a:1,b:0,c:0,d:1,e:0,f:0};la.interpolateTransform=Xi,la.layout={},la.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Ki(t[n]));return e}},la.layout.chord=function(){function t(){var t,u,h,d,f,p={},g=[],m=la.range(o),v=[];for(n=[],i=[],t=0,d=-1;++d<o;){for(u=0,f=-1;++f<o;)u+=r[d][f];g.push(u),v.push(la.range(o)),t+=u}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),s&&v.forEach(function(t,e){t.sort(function(t,n){return s(r[e][t],r[e][n])})}),t=(ja-c*o)/t,u=0,d=-1;++d<o;){for(h=u,f=-1;++f<o;){var y=m[d],b=v[y][f],w=r[y][b],x=u,_=u+=w*t;p[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:_,value:w}}i[y]={index:y,startAngle:h,endAngle:u,value:g[y]},u+=c}for(d=-1;++d<o;)for(f=d-1;++f<o;){var k=p[d+"-"+f],C=p[f+"-"+d];(k.value||C.value)&&n.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,o,a,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(c=t,n=i=null,u):c},u.sortGroups=function(t){return arguments.length?(a=t,n=i=null,u):a},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},la.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=r-n,l=o*o+a*a;if(s*s/v<l){if(l<g){var u=e.charge/l;t.px-=o*u,t.py-=a*u}return!0}if(e.point&&l&&l<g){var u=e.pointCharge/l;t.px-=o*u,t.py-=a*u}}return!e.charge}}function e(t){t.px=la.event.x,t.py=la.event.y,l.resume()}var n,i,r,o,a,s,l={},u=la.dispatch("start","tick","end"),c=[1,1],h=.9,d=vl,f=yl,p=-30,g=bl,m=.1,v=.64,b=[],w=[];return l.tick=function(){if((r*=.99)<.005)return n=null,u.end({type:"end",alpha:r=0}),!0;var e,i,l,d,f,g,v,y,x,_=b.length,k=w.length;for(i=0;i<k;++i)l=w[i],d=l.source,f=l.target,y=f.x-d.x,x=f.y-d.y,(g=y*y+x*x)&&(g=r*a[i]*((g=Math.sqrt(g))-o[i])/g,y*=g,x*=g,f.x-=y*(v=d.weight+f.weight?d.weight/(d.weight+f.weight):.5),f.y-=x*v,d.x+=y*(v=1-v),d.y+=x*v);if((v=r*m)&&(y=c[0]/2,x=c[1]/2,i=-1,v))for(;++i<_;)l=b[i],l.x+=(y-l.x)*v,l.y+=(x-l.y)*v;if(p)for(ir(e=la.geom.quadtree(b),r,s),i=-1;++i<_;)(l=b[i]).fixed||e.visit(t(l));for(i=-1;++i<_;)l=b[i],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*h,l.y-=(l.py-(l.py=l.y))*h);u.tick({type:"tick",alpha:r})},l.nodes=function(t){return arguments.length?(b=t,l):b},l.links=function(t){return arguments.length?(w=t,l):w},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,l):f},l.friction=function(t){return arguments.length?(h=+t,l):h},l.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(m=+t,l):m},l.theta=function(t){return arguments.length?(v=t*t,l):Math.sqrt(v)},l.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:r=0})):t>0&&(u.start({type:"start",alpha:r=t}),n=Dt(l.tick)),l):r},l.start=function(){function t(t,i){if(!n){for(n=new Array(r),l=0;l<r;++l)n[l]=[];for(l=0;l<u;++l){var o=w[l];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[e],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][t]))return a;return Math.random()*i}var e,n,i,r=b.length,u=w.length,h=c[0],g=c[1];for(e=0;e<r;++e)(i=b[e]).index=e,i.weight=0;for(e=0;e<u;++e)i=w[e],"number"==typeof i.source&&(i.source=b[i.source]),"number"==typeof i.target&&(i.target=b[i.target]),++i.source.weight,++i.target.weight;for(e=0;e<r;++e)i=b[e],isNaN(i.x)&&(i.x=t("x",h)),isNaN(i.y)&&(i.y=t("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(o=[],"function"==typeof d)for(e=0;e<u;++e)o[e]=+d.call(this,w[e],e);else for(e=0;e<u;++e)o[e]=d;if(a=[],"function"==typeof f)for(e=0;e<u;++e)a[e]=+f.call(this,w[e],e);else for(e=0;e<u;++e)a[e]=f;if(s=[],"function"==typeof p)for(e=0;e<r;++e)s[e]=+p.call(this,b[e],e);else for(e=0;e<r;++e)s[e]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return i||(i=la.behavior.drag().origin(y).on("dragstart.force",Ji).on("drag.force",e).on("dragend.force",tr)),arguments.length?void this.on("mouseover.force",er).on("mouseout.force",nr).call(i):i},la.rebind(l,u,"on")};var vl=20,yl=1,bl=1/0;la.layout.hierarchy=function(){function t(r){var o,a=[r],s=[];for(r.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(t,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;i&&(o.value=0),o.children=u}else i&&(o.value=+i.call(t,o,o.depth)||0),delete o.children;return ar(r,function(t){var n,r;e&&(n=t.children)&&n.sort(e),i&&(r=t.parent)&&(r.value+=t.value)}),s}var e=ur,n=sr,i=lr;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(i=e,t):i},t.revalue=function(e){return i&&(or(e,function(t){t.children&&(t.value=0)}),ar(e,function(e){var n;e.children||(e.value=+i.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},la.layout.partition=function(){function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(a=o.length)){var a,s,l,u=-1;for(i=e.value?i/e.value:0;++u<a;)t(s=o[u],n,l=s.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,e(n[o]));return 1+i}function n(n,o){var a=i.call(this,n,o);return t(a[0],0,r[0],r[1]/e(a[0])),a}var i=la.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},rr(n,i)},la.layout.pie=function(){function t(a){var s,l=a.length,u=a.map(function(n,i){return+e.call(t,n,i)}),c=+("function"==typeof i?i.apply(this,arguments):i),h=("function"==typeof r?r.apply(this,arguments):r)-c,d=Math.min(Math.abs(h)/l,+("function"==typeof o?o.apply(this,arguments):o)),f=d*(h<0?-1:1),p=la.sum(u),g=p?(h-l*f)/p:0,m=la.range(l),v=[];return null!=n&&m.sort(n===wl?function(t,e){return u[e]-u[t]}:function(t,e){return n(a[t],a[e])}),m.forEach(function(t){v[t]={data:a[t],value:s=u[t],startAngle:c,endAngle:c+=s*g+f,padAngle:d}}),v}var e=Number,n=wl,i=0,r=ja,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var wl={};la.layout.stack=function(){function t(s,l){if(!(d=s.length))return s;var u=s.map(function(n,i){return e.call(t,n,i)}),c=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),h=n.call(t,c,l);u=la.permute(u,h),c=la.permute(c,h);var d,f,p,g,m=i.call(t,c,l),v=u[0].length;for(p=0;p<v;++p)for(r.call(t,u[0][p],g=m[p],c[0][p][1]),f=1;f<d;++f)r.call(t,u[f][p],g+=c[f-1][p][1],c[f][p][1]);return s}var e=y,n=pr,i=gr,r=fr,o=hr,a=dr;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:xl.get(e)||pr,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:_l.get(e)||gr,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(r=e,t):r},t};var xl=la.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(mr),o=t.map(vr),a=la.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,l=0,u=[],c=[];for(e=0;e<i;++e)n=a[e],s<l?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return la.range(t.length).reverse()},"default":pr}),_l=la.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;n<o;++n){for(e=0,i=0;e<r;e++)i+=t[e][n][1];i>s&&(s=i),a.push(i)}for(n=0;n<o;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,i,r,o,a,s,l,u,c=t.length,h=t[0],d=h.length,f=[];for(f[0]=l=u=0,n=1;n<d;++n){for(e=0,r=0;e<c;++e)r+=t[e][n][1];for(e=0,o=0,s=h[n][0]-h[n-1][0];e<c;++e){for(i=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);i<e;++i)a+=(t[i][n][1]-t[i][n-1][1])/s;o+=a*t[e][n][1]}f[n]=l-=r?o/r*s:0,l<u&&(u=l)}for(n=0;n<d;++n)f[n]-=u;return f},expand:function(t){var e,n,i,r=t.length,o=t[0].length,a=1/r,s=[];for(n=0;n<o;++n){for(e=0,i=0;e<r;e++)i+=t[e][n][1];if(i)for(e=0;e<r;e++)t[e][n][1]/=i;else for(e=0;e<r;e++)t[e][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:gr});la.layout.histogram=function(){function t(t,o){for(var a,s,l=[],u=t.map(n,this),c=i.call(this,u,o),h=r.call(this,c,u,o),o=-1,d=u.length,f=h.length-1,p=e?1:1/d;++o<f;)a=l[o]=[],a.dx=h[o+1]-(a.x=h[o]),a.y=0;if(f>0)for(o=-1;++o<d;)s=u[o],s>=c[0]&&s<=c[1]&&(a=l[la.bisect(h,s,1,f)-1],a.y+=p,a.push(t[o]));return l}var e=!0,n=Number,i=xr,r=br;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=Mt(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return wr(t,e)}:Mt(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},la.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],l=r[0],u=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,ar(s,function(t){t.r=+c(t.value)}),ar(s,Mr),i){var h=i*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;ar(s,function(t){t.r+=h}),ar(s,Mr),ar(s,function(t){t.r-=h})}return Or(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var e,n=la.layout.hierarchy().sort(_r),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},rr(t,n)},la.layout.tree=function(){function t(t,r){var c=a.call(this,t,r),h=c[0],d=e(h);if(ar(d,n),d.parent.m=-d.z,or(d,i),u)or(h,o);else{var f=h,p=h,g=h;or(h,function(t){t.x<f.x&&(f=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var m=s(f,p)/2-f.x,v=l[0]/(p.x+s(p,f)/2+m),y=l[1]/(g.depth||1);or(h,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,o=e.children,a=0,s=o.length;a<s;++a)i.push((o[a]=r={_:o[a],parent:e,children:(r=o[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){zr(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+s(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+s(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function i(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var i,r=t,o=t,a=e,l=r.parent.children[0],u=r.m,c=o.m,h=a.m,d=l.m;a=Pr(a),r=Rr(r),a&&r;)l=Rr(l),o=Pr(o),o.a=t,i=a.z+h-r.z-u+s(a._,r._),i>0&&(Nr(Lr(a,t,n),t,i),u+=i,c+=i),h+=a.m,u+=r.m,d+=l.m,c+=o.m;a&&!Pr(o)&&(o.t=a,o.m+=h-c),r&&!Rr(l)&&(l.t=r,l.m+=u-d,n=t)}return n}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=la.layout.hierarchy().sort(null).value(null),s=Dr,l=[1,1],u=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(u=null==(l=e)?o:null,t):u?null:l},t.nodeSize=function(e){return arguments.length?(u=null==(l=e)?null:o,t):u?l:null},rr(t,a)},la.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),l=s[0],u=0;ar(l,function(t){var e=t.children;e&&e.length?(t.x=Hr(e),t.y=Ir(e)):(t.x=a?u+=n(t,a):0,t.y=0,a=t)});var c=jr(l),h=Fr(l),d=c.x-n(c,h)/2,f=h.x+n(h,c)/2;return ar(l,r?function(t){t.x=(t.x-l.x)*i[0],t.y=(l.y-t.y)*i[1]}:function(t){t.x=(t.x-d)/(f-d)*i[0],t.y=(1-(l.y?t.y/l.y:1))*i[1]}),s}var e=la.layout.hierarchy().sort(null).value(null),n=Dr,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},rr(t,e)},la.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function e(n){var o=n.children;if(o&&o.length){var a,s,l,u=h(n),c=[],d=o.slice(),p=1/0,g="slice"===f?u.dx:"dice"===f?u.dy:"slice-dice"===f?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==f||(s=i(c,g))<=p?(d.pop(),p=s):(c.area-=c.pop().area,r(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,g,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,a=h(e),s=i.slice(),l=[];for(t(s,a.dx*a.dy/e.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*p/i,i/(e*o*p)):1/0}function r(t,e,n,i){var r,o=-1,a=t.length,s=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++o<a;)r=t[o],r.x=s,r.y=u,r.dy=c,s+=r.dx=Math.min(n.x+n.dx-s,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++o<a;)r=t[o],r.x=s,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(i){var r=a||s(i),o=r[0];return o.x=o.y=0,o.value?(o.dx=u[0],o.dy=u[1]):o.dx=o.dy=0,a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),d&&(a=r),r}var a,s=la.layout.hierarchy(),l=Math.round,u=[1,1],c=null,h=Br,d=!1,f="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Br(e):Wr(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Wr(e,t)}if(!arguments.length)return c;var i;return h=null==(c=t)?Br:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(d=t,a=null,o):d},o.ratio=function(t){return arguments.length?(p=t,o):p},o.mode=function(t){return arguments.length?(f=t+"",o):f},rr(o,s)},la.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=la.random.normal.apply(la,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=la.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},la.scale={};var kl={floor:y,ceil:y};la.scale.linear=function(){return $r([0,1],[0,1],bi,!1)};var Cl={s:1,g:1,p:1,r:1,e:1};la.scale.log=function(){return io(la.scale.linear().domain([0,1]),10,!0,[1,10])};var Sl=la.format(".0e"),Ml={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};la.scale.pow=function(){return ro(la.scale.linear(),1,[0,1])},la.scale.sqrt=function(){return la.scale.pow().exponent(.5)},la.scale.ordinal=function(){return ao([],{t:"range",a:[[]]})},la.scale.category10=function(){return la.scale.ordinal().range(Tl)},la.scale.category20=function(){return la.scale.ordinal().range(El)},la.scale.category20b=function(){return la.scale.ordinal().range(Ol)},la.scale.category20c=function(){return la.scale.ordinal().range(Al)};var Tl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(bt),El=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(bt),Ol=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(bt),Al=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(bt);la.scale.quantile=function(){return so([],[])},la.scale.quantize=function(){return lo(0,1,[0,1])},la.scale.threshold=function(){return uo([.5],[0,1])},la.scale.identity=function(){return co([0,1])},la.svg={},la.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+i.apply(this,arguments)),c=a.apply(this,arguments)-Ba,h=s.apply(this,arguments)-Ba,d=Math.abs(h-c),f=c>h?0:1;if(u<t&&(p=u,u=t,t=p),d>=Fa)return e(u,f)+(t?e(t,1-f):"")+"Z";var p,g,m,v,y,b,w,x,_,k,C,S,M=0,T=0,E=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=o===Dl?Math.sqrt(t*t+u*u):+o.apply(this,arguments),f||(T*=-1),u&&(T=et(m/u*Math.sin(v))),t&&(M=et(m/t*Math.sin(v)))),u){y=u*Math.cos(c+T),b=u*Math.sin(c+T),w=u*Math.cos(h-T),x=u*Math.sin(h-T);var O=Math.abs(h-c-2*T)<=Ha?0:1;if(T&&yo(y,b,w,x)===f^O){var A=(c+h)/2;y=u*Math.cos(A),b=u*Math.sin(A),w=x=null}}else y=b=0;if(t){_=t*Math.cos(h-M),k=t*Math.sin(h-M),C=t*Math.cos(c+M),S=t*Math.sin(c+M);var D=Math.abs(c-h+2*M)<=Ha?0:1;if(M&&yo(_,k,C,S)===1-f^D){var R=(c+h)/2;_=t*Math.cos(R),k=t*Math.sin(R),C=S=null}}else _=k=0;if(d>La&&(p=Math.min(Math.abs(u-t)/2,+r.apply(this,arguments)))>.001){g=t<u^f?0:1;var P=p,N=p;if(d<Ha){var z=null==C?[_,k]:null==w?[y,b]:Nn([y,b],[C,S],[w,x],[_,k]),L=y-z[0],I=b-z[1],H=w-z[0],j=x-z[1],F=1/Math.sin(Math.acos((L*H+I*j)/(Math.sqrt(L*L+I*I)*Math.sqrt(H*H+j*j)))/2),B=Math.sqrt(z[0]*z[0]+z[1]*z[1]);N=Math.min(p,(t-B)/(F-1)),P=Math.min(p,(u-B)/(F+1))}if(null!=w){var W=bo(null==C?[_,k]:[C,S],[y,b],u,P,f),Y=bo([w,x],[_,k],u,P,f);p===P?E.push("M",W[0],"A",P,",",P," 0 0,",g," ",W[1],"A",u,",",u," 0 ",1-f^yo(W[1][0],W[1][1],Y[1][0],Y[1][1]),",",f," ",Y[1],"A",P,",",P," 0 0,",g," ",Y[0]):E.push("M",W[0],"A",P,",",P," 0 1,",g," ",Y[0])}else E.push("M",y,",",b);if(null!=C){var V=bo([y,b],[C,S],t,-N,f),U=bo([_,k],null==w?[y,b]:[w,x],t,-N,f);p===N?E.push("L",U[0],"A",N,",",N," 0 0,",g," ",U[1],"A",t,",",t," 0 ",f^yo(U[1][0],U[1][1],V[1][0],V[1][1]),",",1-f," ",V[1],"A",N,",",N," 0 0,",g," ",V[0]):E.push("L",U[0],"A",N,",",N," 0 0,",g," ",V[0])}else E.push("L",_,",",k)}else E.push("M",y,",",b),null!=w&&E.push("A",u,",",u," 0 ",O,",",f," ",w,",",x),E.push("L",_,",",k),null!=C&&E.push("A",t,",",t," 0 ",D,",",1-f," ",C,",",S);return E.push("Z"),E.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=fo,i=po,r=ho,o=Dl,a=go,s=mo,l=vo;return t.innerRadius=function(e){return arguments.length?(n=Mt(e),t):n},t.outerRadius=function(e){return arguments.length?(i=Mt(e),t):i},t.cornerRadius=function(e){return arguments.length?(r=Mt(e),t):r},t.padRadius=function(e){return arguments.length?(o=e==Dl?Dl:Mt(e),t):o},t.startAngle=function(e){return arguments.length?(a=Mt(e),t):a},t.endAngle=function(e){return arguments.length?(s=Mt(e),t):s},t.padAngle=function(e){return arguments.length?(l=Mt(e),t):l},t.centroid=function(){var t=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Ba;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Dl="auto";la.svg.line=function(){return wo(y)};var Rl=la.map({linear:xo,"linear-closed":_o,step:ko,"step-before":Co,"step-after":So,basis:Do,"basis-open":Ro,"basis-closed":Po,bundle:No,cardinal:Eo,"cardinal-open":Mo,"cardinal-closed":To,monotone:Fo});Rl.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Pl=[0,2/3,1/3,0],Nl=[0,1/3,2/3,0],zl=[0,1/6,2/3,1/6];la.svg.line.radial=function(){var t=wo(Bo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Co.reverse=So,So.reverse=Co,la.svg.area=function(){return Wo(y)},la.svg.area.radial=function(){var t=Wo(Bo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},la.svg.chord=function(){function t(t,s){var l=e(this,o,t,s),u=e(this,a,t,s);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),o=s.call(t,r,i),a=l.call(t,r,i)-Ba,c=u.call(t,r,i)-Ba;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ha)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var o=bn,a=wn,s=Yo,l=go,u=mo;return t.radius=function(e){return arguments.length?(s=Mt(e),t):s},t.source=function(e){return arguments.length?(o=Mt(e),t):o},t.target=function(e){return arguments.length?(a=Mt(e),t):a},t.startAngle=function(e){return arguments.length?(l=Mt(e),t):l},t.endAngle=function(e){return arguments.length?(u=Mt(e),t):u},t},la.svg.diagonal=function(){function t(t,r){var o=e.call(this,t,r),a=n.call(this,t,r),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=bn,n=wn,i=Vo;return t.source=function(n){return arguments.length?(e=Mt(n),t):e},t.target=function(e){return arguments.length?(n=Mt(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},la.svg.diagonal.radial=function(){var t=la.svg.diagonal(),e=Vo,n=t.projection;return t.projection=function(t){return arguments.length?n(Uo(e=t)):e},t},la.svg.symbol=function(){function t(t,i){return(Ll.get(e.call(this,t,i))||Go)(n.call(this,t,i))}var e=Xo,n=qo;return t.type=function(n){return arguments.length?(e=Mt(n),t):e},t.size=function(e){return arguments.length?(n=Mt(e),t):n},t};var Ll=la.map({circle:Go,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Hl)),n=e*Hl;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Il),n=e*Il/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Il),n=e*Il/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});la.svg.symbolTypes=Ll.keys();var Il=Math.sqrt(3),Hl=Math.tan(30*Wa);Oa.transition=function(t){for(var e,n,i=jl||++Yl,r=Jo(t),o=[],a=Fl||{time:Date.now(),ease:Mi,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,h=u.length;++c<h;)(n=u[c])&&ta(n,c,r,i,a),e.push(n)}return Ko(o,r,i)},Oa.interrupt=function(t){return this.each(null==t?Bl:$o(Jo(t)))};var jl,Fl,Bl=$o(Jo()),Wl=[],Yl=0;Wl.call=Oa.call,Wl.empty=Oa.empty,Wl.node=Oa.node,Wl.size=Oa.size,la.transition=function(t,e){return t&&t.transition?jl?t.transition(e):t:la.selection().transition(t)},la.transition.prototype=Wl,Wl.select=function(t){var e,n,i,r=this.id,o=this.namespace,a=[];t=E(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,h=u.length;++c<h;)(i=u[c])&&(n=t.call(i,i.__data__,c,s))?("__data__"in i&&(n.__data__=i.__data__),ta(n,c,o,r,i[o][r]),e.push(n)):e.push(null)}return Ko(a,o,r)},Wl.selectAll=function(t){var e,n,i,r,o,a=this.id,s=this.namespace,l=[];t=O(t);for(var u=-1,c=this.length;++u<c;)for(var h=this[u],d=-1,f=h.length;++d<f;)if(i=h[d]){o=i[s][a],n=t.call(i,i.__data__,d,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(r=n[p])&&ta(r,p,s,a,o),e.push(r)}return Ko(l,s,a)},Wl.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=B(t));for(var o=0,a=this.length;o<a;o++){r.push(e=[]);for(var n=this[o],s=0,l=n.length;s<l;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return Ko(r,this.namespace,this.id)},Wl.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):Y(this,null==e?function(e){e[i][n].tween.remove(t)}:function(r){r[i][n].tween.set(t,e)})},Wl.attr=function(t,e){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Xi:bi,s=la.ns.qualify(t);return Zo(this,"attr."+t,e,s.local?o:r)},Wl.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=la.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},Wl.style=function(t,n,i){function r(){this.style.removeProperty(t)}function o(n){return null==n?r:(n+="",function(){var r,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(r=bi(o,n),function(e){this.style.setProperty(t,r(e),i)})})}var a=arguments.length;if(a<3){if("string"!=typeof t){a<2&&(n="");for(i in t)this.style(i,t[i],n);return this}i=""}return Zo(this,"style."+t,n,o)},Wl.styleTween=function(t,n,i){function r(r,o){var a=n.call(this,r,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),i)}}return arguments.length<3&&(i=""),this.tween("style."+t,r)},Wl.text=function(t){return Zo(this,"text",t,Qo)},Wl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Wl.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=la.ease.apply(la,arguments)),Y(this,function(i){i[n][e].ease=t}))},Wl.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:Y(this,"function"==typeof t?function(i,r,o){i[n][e].delay=+t.call(i,i.__data__,r,o)}:(t=+t,function(i){i[n][e].delay=t}))},Wl.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:Y(this,"function"==typeof t?function(i,r,o){i[n][e].duration=Math.max(1,t.call(i,i.__data__,r,o))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},Wl.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Fl,o=jl;try{jl=n,Y(this,function(e,r,o){Fl=e[i][n],t.call(e,e.__data__,r,o)})}finally{Fl=r,jl=o}}else Y(this,function(r){var o=r[i][n];(o.event||(o.event=la.dispatch("start","end","interrupt"))).on(t,e)});return this},Wl.transition=function(){for(var t,e,n,i,r=this.id,o=++Yl,a=this.namespace,s=[],l=0,u=this.length;l<u;l++){s.push(t=[]);for(var e=this[l],c=0,h=e.length;c<h;c++)(n=e[c])&&(i=n[a][r],ta(n,c,a,o,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),t.push(n)}return Ko(s,a,o)},la.svg.axis=function(){function t(t){t.each(function(){var t,u=la.select(this),c=this.__chart__||n,h=this.__chart__=n.copy(),d=null==l?h.ticks?h.ticks.apply(h,s):h.domain():l,f=null==e?h.tickFormat?h.tickFormat.apply(h,s):y:e,p=u.selectAll(".tick").data(d,h),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",La),m=la.transition(p.exit()).style("opacity",La).remove(),v=la.transition(p.order()).style("opacity",1),b=Math.max(r,0)+a,w=Vr(h),x=u.selectAll(".domain").data([0]),_=(x.enter().append("path").attr("class","domain"),la.transition(x));g.append("line"),g.append("text");var k,C,S,M,T=g.select("line"),E=v.select("line"),O=p.select("text").text(f),A=g.select("text"),D=v.select("text"),R="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(t=ea,k="x",S="y",C="x2",M="y2",O.attr("dy",R<0?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+w[0]+","+R*o+"V0H"+w[1]+"V"+R*o)):(t=na,k="y",S="x",C="y2",M="x2",O.attr("dy",".32em").style("text-anchor",R<0?"end":"start"),_.attr("d","M"+R*o+","+w[0]+"H0V"+w[1]+"H"+R*o)),T.attr(M,R*r),A.attr(S,R*b),E.attr(C,0).attr(M,R*r),D.attr(k,0).attr(S,R*b),h.rangeBand){var P=h,N=P.rangeBand()/2;c=h=function(t){return P(t)+N}}else c.rangeBand?c=h:m.call(t,h,c);g.call(t,c,h),v.call(t,h,h)})}var e,n=la.scale.linear(),i=Vl,r=6,o=6,a=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in Ul?e+"":Vl,t):i},t.ticks=function(){return arguments.length?(s=ca(arguments),t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,o=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Vl="bottom",Ul={top:1,right:1,bottom:1,left:1};la.svg.brush=function(){function t(e){e.each(function(){var e=la.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=e.selectAll(".resize").data(g,y);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ql[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var l,h=la.transition(e),d=la.transition(a);u&&(l=Vr(u),d.attr("x",l[0]).attr("width",l[1]-l[0]),i(h)),c&&(l=Vr(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),r(h)),
n(h)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"})}function i(t){t.select(".extent").attr("x",h[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function r(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function o(){function o(){32==la.event.keyCode&&(O||(b=null,D[0]-=h[1],D[1]-=d[1],O=2),C())}function g(){32==la.event.keyCode&&2==O&&(D[0]+=h[1],D[1]+=d[1],O=0,C())}function m(){var t=la.mouse(x),e=!1;w&&(t[0]+=w[0],t[1]+=w[1]),O||(la.event.altKey?(b||(b=[(h[0]+h[1])/2,(d[0]+d[1])/2]),D[0]=h[+(t[0]<b[0])],D[1]=d[+(t[1]<b[1])]):b=null),T&&v(t,u,0)&&(i(S),e=!0),E&&v(t,c,1)&&(r(S),e=!0),e&&(n(S),k({type:"brush",mode:O?"move":"resize"}))}function v(t,e,n){var i,r,o=Vr(e),l=o[0],u=o[1],c=D[n],g=n?d:h,m=g[1]-g[0];if(O&&(l-=c,u-=m+c),i=(n?p:f)?Math.max(l,Math.min(u,t[n])):t[n],O?r=(i+=c)+m:(b&&(c=Math.max(l,Math.min(u,2*b[n]-i))),c<i?(r=i,i=c):r=c),g[0]!=i||g[1]!=r)return n?s=null:a=null,g[0]=i,g[1]=r,!0}function y(){m(),S.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),la.select("body").style("cursor",null),R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),k({type:"brushend"})}var b,w,x=this,_=la.select(la.event.target),k=l.of(x,arguments),S=la.select(x),M=_.datum(),T=!/^(n|s)$/.test(M)&&u,E=!/^(e|w)$/.test(M)&&c,O=_.classed("extent"),A=$(x),D=la.mouse(x),R=la.select(e(x)).on("keydown.brush",o).on("keyup.brush",g);if(la.event.changedTouches?R.on("touchmove.brush",m).on("touchend.brush",y):R.on("mousemove.brush",m).on("mouseup.brush",y),S.interrupt().selectAll("*").interrupt(),O)D[0]=h[0]-D[0],D[1]=d[0]-D[1];else if(M){var P=+/w$/.test(M),N=+/^n/.test(M);w=[h[1-P]-D[0],d[1-N]-D[1]],D[0]=h[P],D[1]=d[N]}else la.event.altKey&&(b=D.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),la.select("body").style("cursor",_.style("cursor")),k({type:"brushstart"}),m()}var a,s,l=M(t,"brushstart","brush","brushend"),u=null,c=null,h=[0,0],d=[0,0],f=!0,p=!0,g=Xl[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:h,y:d,i:a,j:s},n=this.__chart__||e;this.__chart__=e,jl?la.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,h=n.x,d=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=wi(h,e.x),i=wi(d,e.y);return a=s=null,function(r){h=e.x=n(r),d=e.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(u=e,g=Xl[!u<<1|!c],t):u},t.y=function(e){return arguments.length?(c=e,g=Xl[!u<<1|!c],t):c},t.clamp=function(e){return arguments.length?(u&&c?(f=!!e[0],p=!!e[1]):u?f=!!e:c&&(p=!!e),t):u&&c?[f,p]:u?f:c?p:null},t.extent=function(e){var n,i,r,o,l;return arguments.length?(u&&(n=e[0],i=e[1],c&&(n=n[0],i=i[0]),a=[n,i],u.invert&&(n=u(n),i=u(i)),i<n&&(l=n,n=i,i=l),n==h[0]&&i==h[1]||(h=[n,i])),c&&(r=e[0],o=e[1],u&&(r=r[1],o=o[1]),s=[r,o],c.invert&&(r=c(r),o=c(o)),o<r&&(l=r,r=o,o=l),r==d[0]&&o==d[1]||(d=[r,o])),t):(u&&(a?(n=a[0],i=a[1]):(n=h[0],i=h[1],u.invert&&(n=u.invert(n),i=u.invert(i)),i<n&&(l=n,n=i,i=l))),c&&(s?(r=s[0],o=s[1]):(r=d[0],o=d[1],c.invert&&(r=c.invert(r),o=c.invert(o)),o<r&&(l=r,r=o,o=l))),u&&c?[[n,r],[i,o]]:u?[n,i]:c&&[r,o])},t.clear=function(){return t.empty()||(h=[0,0],d=[0,0],a=s=null),t},t.empty=function(){return!!u&&h[0]==h[1]||!!c&&d[0]==d[1]},la.rebind(t,l,"on")};var ql={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Gl=fs.format=bs.timeFormat,$l=Gl.utc,Kl=$l("%Y-%m-%dT%H:%M:%S.%LZ");Gl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ia:Kl,ia.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ia.toString=Kl.toString,fs.second=Ft(function(t){return new ps(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),fs.seconds=fs.second.range,fs.seconds.utc=fs.second.utc.range,fs.minute=Ft(function(t){return new ps(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),fs.minutes=fs.minute.range,fs.minutes.utc=fs.minute.utc.range,fs.hour=Ft(function(t){var e=t.getTimezoneOffset()/60;return new ps(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),fs.hours=fs.hour.range,fs.hours.utc=fs.hour.utc.range,fs.month=Ft(function(t){return t=fs.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),fs.months=fs.month.range,fs.months.utc=fs.month.utc.range;var Zl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ql=[[fs.second,1],[fs.second,5],[fs.second,15],[fs.second,30],[fs.minute,1],[fs.minute,5],[fs.minute,15],[fs.minute,30],[fs.hour,1],[fs.hour,3],[fs.hour,6],[fs.hour,12],[fs.day,1],[fs.day,2],[fs.week,1],[fs.month,1],[fs.month,3],[fs.year,1]],Jl=Gl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Oe]]),tu={range:function(t,e,n){return la.range(Math.ceil(t/n)*n,+e,n).map(oa)},floor:y,ceil:y};Ql.year=fs.year,fs.scale=function(){return ra(la.scale.linear(),Ql,Jl)};var eu=Ql.map(function(t){return[t[0].utc,t[1]]}),nu=$l.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Oe]]);eu.year=fs.year.utc,fs.scale.utc=function(){return ra(la.scale.linear(),eu,nu)},la.text=Tt(function(t){return t.responseText}),la.json=function(t,e){return Et(t,"application/json",aa,e)},la.html=function(t,e){return Et(t,"text/html",sa,e)},la.xml=Tt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=la,define(la)):"object"==typeof module&&module.exports?module.exports=la:this.d3=la}(),function(){var t,e,n,i,r,o,a,s,l,u,c,h,d,f,p;n=Math.floor,u=Math.min,e=function(t,e){return t<e?-1:t>e?1:0},l=function(t,i,r,o,a){var s;if(null==r&&(r=0),null==a&&(a=e),r<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);r<o;)s=n((r+o)/2),a(i,t[s])<0?o=s:r=s+1;return[].splice.apply(t,[r,r-r].concat(i)),i},o=function(t,n,i){return null==i&&(i=e),t.push(n),f(t,0,t.length-1,i)},r=function(t,n){var i,r;return null==n&&(n=e),i=t.pop(),t.length?(r=t[0],t[0]=i,p(t,0,n)):r=i,r},s=function(t,n,i){var r;return null==i&&(i=e),r=t[0],t[0]=n,p(t,0,i),r},a=function(t,n,i){var r;return null==i&&(i=e),t.length&&i(t[0],n)<0&&(r=[t[0],n],n=r[0],t[0]=r[1],p(t,0,i)),n},i=function(t,i){var r,o,a,s,l,u;for(null==i&&(i=e),s=function(){u=[];for(var e=0,i=n(t.length/2);0<=i?e<i:e>i;0<=i?e++:e--)u.push(e);return u}.apply(this).reverse(),l=[],o=0,a=s.length;o<a;o++)r=s[o],l.push(p(t,r,i));return l},d=function(t,n,i){var r;if(null==i&&(i=e),r=t.indexOf(n),r!==-1)return f(t,0,r,i),p(t,r,i)},c=function(t,n,r){var o,s,l,u,c;if(null==r&&(r=e),s=t.slice(0,n),!s.length)return s;for(i(s,r),c=t.slice(n),l=0,u=c.length;l<u;l++)o=c[l],a(s,o,r);return s.sort(r).reverse()},h=function(t,n,o){var a,s,c,h,d,f,p,g,m,v;if(null==o&&(o=e),10*n<=t.length){if(h=t.slice(0,n).sort(o),!h.length)return h;for(c=h[h.length-1],g=t.slice(n),d=0,p=g.length;d<p;d++)a=g[d],o(a,c)<0&&(l(h,a,0,null,o),h.pop(),c=h[h.length-1]);return h}for(i(t,o),v=[],s=f=0,m=u(n,t.length);0<=m?f<m:f>m;s=0<=m?++f:--f)v.push(r(t,o));return v},f=function(t,n,i,r){var o,a,s;for(null==r&&(r=e),o=t[i];i>n&&(s=i-1>>1,a=t[s],r(o,a)<0);)t[i]=a,i=s;return t[i]=o},p=function(t,n,i){var r,o,a,s,l;for(null==i&&(i=e),o=t.length,l=n,a=t[n],r=2*n+1;r<o;)s=r+1,s<o&&!(i(t[r],t[s])<0)&&(r=s),t[n]=t[r],n=r,r=2*n+1;return t[n]=a,f(t,l,n,i)},t=function(){function t(t){this.cmp=null!=t?t:e,this.nodes=[]}return t.push=o,t.pop=r,t.replace=s,t.pushpop=a,t.heapify=i,t.updateItem=d,t.nlargest=c,t.nsmallest=h,t.prototype.push=function(t){return o(this.nodes,t,this.cmp)},t.prototype.pop=function(){return r(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return this.nodes.indexOf(t)!==-1},t.prototype.replace=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return a(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return d(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),function(t,e){return"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Heap=e()}(this,function(){return t})}.call(this),function(){"use strict";function t(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function e(t,e,n){var i=e.x,r=e.y,o=n.x-i,a=n.y-r;if(0!==o||0!==a){var s=((t.x-i)*o+(t.y-r)*a)/(o*o+a*a);s>1?(i=n.x,r=n.y):s>0&&(i+=o*s,r+=a*s)}return o=t.x-i,a=t.y-r,o*o+a*a}function n(e,n){for(var i,r=e[0],o=[r],a=1,s=e.length;a<s;a++)i=e[a],t(i,r)>n&&(o.push(i),r=i);return r!==i&&o.push(i),o}function i(t,n,r,o,a){for(var s,l=o,u=n+1;u<r;u++){var c=e(t[u],t[n],t[r]);c>l&&(s=u,l=c)}l>o&&(s-n>1&&i(t,n,s,o,a),a.push(t[s]),r-s>1&&i(t,s,r,o,a))}function r(t,e){var n=t.length-1,r=[t[0]];return i(t,0,n,e,r),r.push(t[n]),r}function o(t,e,i){if(t.length<=2)return t;var o=void 0!==e?e*e:1;return t=i?t:n(t,o),t=r(t,o)}"function"==typeof define&&define.amd?define(function(){return o}):"undefined"!=typeof module?(module.exports=o,module.exports["default"]=o):"undefined"!=typeof self?self.simplify=o:window.simplify=o}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.topojson=t.topojson||{})}(this,function(t){"use strict";function e(t){if(!t)return d;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0),t[0]=(e+=t[0])*i+o,t[1]=(n+=t[1])*r+a}}function n(t){if(!t)return d;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var l=Math.round((t[0]-o)/i),u=Math.round((t[1]-a)/r);t[0]=l-e,t[1]=u-n,e=l,n=u}}function i(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}function r(t,e){for(var n=0,i=t.length;n<i;){var r=n+i>>>1;t[r]<e?n=r+1:i=r}return n}function o(t,e){var n={type:"Feature",id:e.id,properties:e.properties||{},geometry:a(t,e)};return null==e.id&&delete n.id,n}function a(t,n){function r(t,e){e.length&&e.pop();for(var n,r=h[t<0?~t:t],o=0,a=r.length;o<a;++o)e.push(n=r[o].slice()),c(n,o);t<0&&i(e,a)}function o(t){return t=t.slice(),c(t,0),t}function a(t){for(var e=[],n=0,i=t.length;n<i;++n)r(t[n],e);return e.length<2&&e.push(e[0].slice()),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0].slice());return e}function l(t){return t.map(s)}function u(t){var e=t.type;return"GeometryCollection"===e?{type:e,geometries:t.geometries.map(u)}:e in d?{type:e,coordinates:d[e](t)}:null}var c=e(t.transform),h=t.arcs,d={Point:function(t){return o(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(o)},LineString:function(t){return a(t.arcs)},MultiLineString:function(t){return t.arcs.map(a)},Polygon:function(t){return l(t.arcs)},MultiPolygon:function(t){return t.arcs.map(l)}};return u(n)}function s(t,e,n){function i(t){var e=t<0?~t:t;(u[e]||(u[e]=[])).push({i:t,g:l})}function r(t){t.forEach(i)}function o(t){t.forEach(r)}function a(t){"GeometryCollection"===t.type?t.geometries.forEach(a):t.type in c&&(l=t,c[t.type](t.arcs))}var s=[];if(arguments.length>1){var l,u=[],c={LineString:r,MultiLineString:o,Polygon:o,MultiPolygon:function(t){t.forEach(o)}};a(e),u.forEach(arguments.length<3?function(t){s.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&s.push(t[0].i)})}else for(var h=0,d=t.arcs.length;h<d;++h)s.push(h);return{type:"MultiLineString",arcs:p(t,s)}}function l(t){var e=t[0],n=t[1],i=t[2];return Math.abs((e[0]-i[0])*(n[1]-e[1])-(e[0]-n[0])*(i[1]-e[1]))}function u(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return o/2}function c(t,e){function n(t){t.forEach(function(e){e.forEach(function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)})}),o.push(t)}function i(e){return Math.abs(u(a(t,{type:"Polygon",arcs:[e]}).coordinates[0]))}var r={},o=[],s=[];return e.forEach(function(t){"Polygon"===t.type?n(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(n)}),o.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,s.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),o.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:s.map(function(e){var n,o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].length<2&&o.push(t)})})}),o=p(t,o),(n=o.length)>1)for(var a,s,l=1,u=i(o[0]);l<n;++l)(a=i(o[l]))>u&&(s=o[0],o[0]=o[l],o[l]=s,u=a);return o})}}function h(t,e){return t[1][2]-e[1][2]}var d=function(){},f=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return o(t,e)})}:o(t,e)},p=function(t,e){function n(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=i[i.length-1],e<0?[n,r]:[r,n]}function i(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),s.push(i)}}var r={},o={},a={},s=[],l=-1;return e.forEach(function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++l],e[l]=n,e[i]=r)}),e.forEach(function(t){var e,i,r=n(t),s=r[0],l=r[1];if(e=a[s])if(delete a[e.end],e.push(t),e.end=l,i=o[l]){delete o[i.start];var u=i===e?e:e.concat(i);o[u.start=e.start]=a[u.end=i.end]=u}else o[e.start]=a[e.end]=e;else if(e=o[l])if(delete o[e.start],e.unshift(t),e.start=s,i=a[s]){delete a[i.end];var c=i===e?e:i.concat(e);o[c.start=i.start]=a[c.end=e.end]=c}else o[e.start]=a[e.end]=e;else e=[t],o[e.start=s]=a[e.end=l]=e}),i(a,o),i(o,a),e.forEach(function(t){r[t<0?~t:t]||s.push([t])}),s},g=function(t){return a(t,s.apply(this,arguments))},m=function(t){return a(t,c.apply(this,arguments))},v=function(t){function e(t,e){t.forEach(function(t){t<0&&(t=~t);var n=o[t];n?n.push(e):o[t]=[e]})}function n(t,n){t.forEach(function(t){e(t,n)})}function i(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){i(t,e)}):t.type in s&&s[t.type](t.arcs,e)}var o={},a=t.map(function(){return[]}),s={LineString:e,MultiLineString:n,Polygon:n,MultiPolygon:function(t,e){t.forEach(function(t){n(t,e)})}};t.forEach(i);for(var l in o)for(var u=o[l],c=u.length,h=0;h<c;++h)for(var d=h+1;d<c;++d){var f,p=u[h],g=u[d];(f=a[p])[l=r(f,g)]!==g&&f.splice(l,0,g),(f=a[g])[l=r(f,p)]!==p&&f.splice(l,0,p)}return a},y=function(){function t(t,e){for(;e>0;){var n=(e+1>>1)-1,r=i[n];if(h(t,r)>=0)break;i[r._=e]=r,i[t._=e=n]=t}}function e(t,e){for(;;){var n=e+1<<1,o=n-1,a=e,s=i[a];if(o<r&&h(i[o],s)<0&&(s=i[a=o]),n<r&&h(i[n],s)<0&&(s=i[a=n]),a===e)break;i[s._=e]=s,i[t._=e=a]=t}}var n={},i=[],r=0;return n.push=function(e){return t(i[e._=r]=e,r++),r},n.pop=function(){if(!(r<=0)){var t,n=i[0];return--r>0&&(t=i[r],e(i[t._=0]=t,0)),n}},n.remove=function(n){var o,a=n._;if(i[a]===n)return a!==--r&&(o=i[r],(h(o,n)<0?t:e)(i[o._=a]=o,a)),a},n},b=function(t,i){function r(t){s.remove(t),t[1][2]=i(t),s.push(t)}var o=e(t.transform),a=n(t.transform),s=y();return null==i&&(i=l),t.arcs.forEach(function(t){var e,n,l,u,c=[],h=0;for(n=0,l=t.length;n<l;++n)u=t[n],o(t[n]=[u[0],u[1],1/0],n);for(n=1,l=t.length-1;n<l;++n)e=t.slice(n-1,n+2),e[1][2]=i(e),c.push(e),s.push(e);for(n=0,l=c.length;n<l;++n)e=c[n],e.previous=c[n-1],e.next=c[n+1];for(;e=s.pop();){var d=e.previous,f=e.next;e[1][2]<h?e[1][2]=h:h=e[1][2],d&&(d.next=f,d[2]=e[2],r(d)),f&&(f.previous=d,f[0]=e[0],r(f))}t.forEach(a)}),t};t.mesh=g,t.meshArcs=s,t.merge=m,t.mergeArcs=c,t.feature=f,t.neighbors=v,t.presimplify=b,Object.defineProperty(t,"__esModule",{value:!0})}),function(t){"use strict";var e=function(e){var n=t.Deferred(),i=new FileReader;return i.onload=function(t){n.resolve(t.target.result)},i.onerror=n.reject,i.onprogress=n.notify,i.readAsDataURL(e),n.promise()};t.fn.cleanHtml=function(){var e=t(this).html();return e&&e.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")},t.fn.wysiwyg=function(n){var i,r,o,a=this,s=function(){r.activeToolbarClass&&t(r.toolbarSelector).find(o).each(function(){var e=t(this).data(r.commandRole);document.queryCommandState(e)?t(this).addClass(r.activeToolbarClass):t(this).removeClass(r.activeToolbarClass)})},l=function(t,e){var n=t.split(" "),i=n.shift(),r=n.join(" ")+(e||"");document.execCommand(i,0,r),s()},u=function(e){t.each(e,function(t,e){a.keydown(t,function(t){a.attr("contenteditable")&&a.is(":visible")&&(t.preventDefault(),t.stopPropagation(),l(e))}).keyup(t,function(t){a.attr("contenteditable")&&a.is(":visible")&&(t.preventDefault(),t.stopPropagation())})})},c=function(){var t=window.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)},h=function(){i=c()},d=function(){var t=window.getSelection();if(i){try{t.removeAllRanges()}catch(e){document.body.createTextRange().select(),document.selection.empty()}t.addRange(i)}},f=function(n){a.focus(),t.each(n,function(n,i){/^image\//.test(i.type)?t.when(e(i)).done(function(t){l("insertimage",t)}).fail(function(t){r.fileUploadError("file-reader",t)}):r.fileUploadError("unsupported-file-type",i.type)})},p=function(t,e){d(),document.queryCommandSupported("hiliteColor")&&document.execCommand("hiliteColor",0,e||"transparent"),h(),t.data(r.selectionMarker,e)},g=function(e,n){e.find(o).click(function(){d(),a.focus(),l(t(this).data(n.commandRole)),h()}),e.find("[data-toggle=dropdown]").click(d),e.find("input[type=text][data-"+n.commandRole+"]").on("webkitspeechchange change",function(){var e=this.value;this.value="",d(),e&&(a.focus(),l(t(this).data(n.commandRole),e)),h()}).on("focus",function(){var e=t(this);e.data(n.selectionMarker)||(p(e,n.selectionColor),e.focus())}).on("blur",function(){var e=t(this);e.data(n.selectionMarker)&&p(e,!1)}),e.find("input[type=file][data-"+n.commandRole+"]").change(function(){d(),"file"===this.type&&this.files&&this.files.length>0&&f(this.files),h(),this.value=""})},m=function(){a.on("dragenter dragover",!1).on("drop",function(t){var e=t.originalEvent.dataTransfer;t.stopPropagation(),t.preventDefault(),e&&e.files&&e.files.length>0&&f(e.files)})};return r=t.extend({},t.fn.wysiwyg.defaults,n),o="a[data-"+r.commandRole+"],button[data-"+r.commandRole+"],input[type=button][data-"+r.commandRole+"]",u(r.hotKeys),r.dragAndDropImages&&m(),g(t(r.toolbarSelector),r),a.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){h(),s()}),t(window).bind("touchend",function(t){var e=a.is(t.target)||a.has(t.target).length>0,n=c(),i=n&&n.startContainer===n.endContainer&&n.startOffset===n.endOffset;i&&!e||(h(),s())}),this},t.fn.wysiwyg.defaults={hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo","ctrl+l meta+l":"justifyleft","ctrl+r meta+r":"justifyright","ctrl+e meta+e":"justifycenter","ctrl+j meta+j":"justifyfull","shift+tab":"outdent",tab:"indent"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:!0,fileUploadError:function(t,e){console.log("File upload error",t,e)}}}(window.jQuery),function(){var t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R=[].slice;m='<span class="odometer-value"></span>',f='<span class="odometer-ribbon"><span class="odometer-ribbon-inner">'+m+"</span></span>",i='<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner">'+f+"</span></span>",a='<span class="odometer-formatting-mark"></span>',n="(,ddd).dd",s=/^\(?([^)]*)\)?(?:(.)(d+))?$/,l=30,o=2e3,t=20,u=2,r=.5,c=1e3/l,e=1e3/t,p="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",C=document.createElement("div").style,g=null!=C.transition||null!=C.webkitTransition||null!=C.mozTransition||null!=C.oTransition,_=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,h=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,y=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.children[0]},x=function(t,e){return t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},v=function(t,e){return x(t,e),t.className+=" "+e},S=function(t,e){var n;if(null!=document.createEvent)return n=document.createEvent("HTMLEvents"),n.initEvent(e,!0,!0),t.dispatchEvent(n)},w=function(){var t,e;return null!=(t=null!=(e=window.performance)&&"function"==typeof e.now?e.now():void 0)?t:+new Date},k=function(t,e){return null==e&&(e=0),e?(t*=Math.pow(10,e),t+=.5,t=Math.floor(t),t/=Math.pow(10,e)):Math.round(t)},M=function(t){return t<0?Math.ceil(t):Math.floor(t)},b=function(t){return t-k(t)},E=!1,(T=function(){var t,e,n,i,r;if(!E&&null!=window.jQuery){for(E=!0,i=["html","text"],r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push(function(t){var e;return e=window.jQuery.fn[t],window.jQuery.fn[t]=function(t){var n;return null==t||null==(null!=(n=this[0])?n.odometer:void 0)?e.apply(this,arguments):this[0].odometer.update(t)}}(t));return r}})(),setTimeout(T,0),d=function(){function t(e){var n,i,r,a,s,l,h,d,f,p,g=this;if(this.options=e,this.el=this.options.el,null!=this.el.odometer)return this.el.odometer;this.el.odometer=this,d=t.options;for(i in d)a=d[i],null==this.options[i]&&(this.options[i]=a);null==(s=this.options).duration&&(s.duration=o),this.MAX_VALUES=this.options.duration/c/u|0,this.resetFormat(),this.value=this.cleanValue(null!=(f=this.options.value)?f:""),this.renderInside(),this.render();try{for(p=["innerHTML","innerText","textContent"],l=0,h=p.length;l<h;l++)r=p[l],null!=this.el[r]&&!function(t){return Object.defineProperty(g.el,t,{get:function(){var e;return"innerHTML"===t?g.inside.outerHTML:null!=(e=g.inside.innerText)?e:g.inside.textContent},set:function(t){return g.update(t)}})}(r)}catch(m){n=m,this.watchForMutations()}}return t.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},t.prototype.watchForMutations=function(){var t,e=this;if(null!=h)try{return null==this.observer&&(this.observer=new h(function(t){var n;return n=e.el.innerText,e.renderInside(),e.render(e.value),e.update(n)})),this.watchMutations=!0,this.startWatchingMutations()}catch(n){t=n}},t.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})},t.prototype.stopWatchingMutations=function(){var t;return null!=(t=this.observer)?t.disconnect():void 0},t.prototype.cleanValue=function(t){var e;return"string"==typeof t&&(t=t.replace(null!=(e=this.format.radix)?e:".","<radix>"),t=t.replace(/[.,]/g,""),t=t.replace("<radix>","."),t=parseFloat(t,10)||0),k(t,this.format.precision)},t.prototype.bindTransitionEnd=function(){var t,e,n,i,r,o,a=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,e=!1,r=p.split(" "),o=[],n=0,i=r.length;n<i;n++)t=r[n],o.push(this.el.addEventListener(t,function(){return!!e||(e=!0,setTimeout(function(){return a.render(),e=!1,S(a.el,"odometerdone")},0),!0)},!1));return o}},t.prototype.resetFormat=function(){var t,e,i,r,o,a,l,u;if(t=null!=(l=this.options.format)?l:n,t||(t="d"),i=s.exec(t),!i)throw new Error("Odometer: Unparsable digit format");return u=i.slice(1,4),a=u[0],o=u[1],e=u[2],r=(null!=e?e.length:void 0)||0,this.format={repeating:a,radix:o,precision:r}},t.prototype.render=function(t){var e,n,i,r,o,a,s,l,u,c,h,d;for(null==t&&(t=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",a=this.options.theme,e=this.el.className.split(" "),o=[],l=0,c=e.length;l<c;l++)n=e[l],n.length&&((r=/^odometer-theme-(.+)$/.exec(n))?a=r[1]:/^odometer(-|$)/.test(n)||o.push(n));for(o.push("odometer"),g||o.push("odometer-no-transitions"),a?o.push("odometer-theme-"+a):o.push("odometer-auto-theme"),this.el.className=o.join(" "),this.ribbons={},this.digits=[],s=!this.format.precision||!b(t)||!1,d=t.toString().split("").reverse(),u=0,h=d.length;u<h;u++)i=d[u],"."===i&&(s=!0),this.addDigit(i,s);return this.startWatchingMutations()},t.prototype.update=function(t){var e,n=this;if(t=this.cleanValue(t),e=t-this.value)return x(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),e>0?v(this.el,"odometer-animating-up"):v(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(t),this.startWatchingMutations(),setTimeout(function(){return n.el.offsetHeight,v(n.el,"odometer-animating")},0),this.value=t},t.prototype.renderDigit=function(){return y(i)},t.prototype.insertDigit=function(t,e){return null!=e?this.inside.insertBefore(t,e):this.inside.children.length?this.inside.insertBefore(t,this.inside.children[0]):this.inside.appendChild(t)},t.prototype.addSpacer=function(t,e,n){var i;return i=y(a),i.innerHTML=t,n&&v(i,n),this.insertDigit(i,e)},t.prototype.addDigit=function(t,e){var n,i,r,o;if(null==e&&(e=!0),"-"===t)return this.addSpacer(t,null,"odometer-negation-mark");if("."===t)return this.addSpacer(null!=(o=this.format.radix)?o:".",null,"odometer-radix-mark");if(e)for(r=!1;;){if(!this.format.repeating.length){if(r)throw new Error("Bad odometer format without digits");this.resetFormat(),r=!0}if(n=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),"d"===n)break;this.addSpacer(n)}return i=this.renderDigit(),i.querySelector(".odometer-value").innerHTML=t,this.digits.push(i),this.insertDigit(i)},t.prototype.animate=function(t){return g&&"count"!==this.options.animation?this.animateSlide(t):this.animateCount(t)},t.prototype.animateCount=function(t){var n,i,r,o,a,s=this;if(i=+t-this.value)return o=r=w(),n=this.value,(a=function(){var l,u,c;return w()-o>s.options.duration?(s.value=t,s.render(),void S(s.el,"odometerdone")):(l=w()-r,l>e&&(r=w(),c=l/s.options.duration,u=i*c,n+=u,s.render(Math.round(n))),null!=_?_(a):setTimeout(a,e))})()},t.prototype.getDigitCount=function(){var t,e,n,i,r,o;for(i=1<=arguments.length?R.call(arguments,0):[],t=r=0,o=i.length;r<o;t=++r)n=i[t],i[t]=Math.abs(n);return e=Math.max.apply(Math,i),Math.ceil(Math.log(e+1)/Math.log(10))},t.prototype.getFractionalDigitCount=function(){var t,e,n,i,r,o,a;for(r=1<=arguments.length?R.call(arguments,0):[],e=/^\-?\d*\.(\d*?)0*$/,t=o=0,a=r.length;o<a;t=++o)i=r[t],r[t]=i.toString(),n=e.exec(r[t]),null==n?r[t]=0:r[t]=n[1].length;return Math.max.apply(Math,r)},t.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},t.prototype.animateSlide=function(t){var e,n,i,o,a,s,l,u,c,h,d,f,p,g,m,y,b,w,x,_,k,C,S,T,E,O,A;if(y=this.value,u=this.getFractionalDigitCount(y,t),u&&(t*=Math.pow(10,u),y*=Math.pow(10,u)),i=t-y){for(this.bindTransitionEnd(),o=this.getDigitCount(y,t),a=[],e=0,d=x=0;0<=o?x<o:x>o;d=0<=o?++x:--x){if(b=M(y/Math.pow(10,o-d-1)),l=M(t/Math.pow(10,o-d-1)),s=l-b,Math.abs(s)>this.MAX_VALUES){for(h=[],f=s/(this.MAX_VALUES+this.MAX_VALUES*e*r),n=b;s>0&&n<l||s<0&&n>l;)h.push(Math.round(n)),n+=f;h[h.length-1]!==l&&h.push(l),e++}else h=function(){A=[];for(var t=b;b<=l?t<=l:t>=l;b<=l?t++:t--)A.push(t);return A}.apply(this);for(d=_=0,C=h.length;_<C;d=++_)c=h[d],h[d]=Math.abs(c%10);a.push(h)}for(this.resetDigits(),O=a.reverse(),d=k=0,S=O.length;k<S;d=++k)for(h=O[d],this.digits[d]||this.addDigit(" ",d>=u),null==(w=this.ribbons)[d]&&(w[d]=this.digits[d].querySelector(".odometer-ribbon-inner")),this.ribbons[d].innerHTML="",i<0&&(h=h.reverse()),p=E=0,T=h.length;E<T;p=++E)c=h[p],m=document.createElement("div"),m.className="odometer-value",m.innerHTML=c,this.ribbons[d].appendChild(m),p===h.length-1&&v(m,"odometer-last-value"),0===p&&v(m,"odometer-first-value");return b<0&&this.addDigit("-"),g=this.inside.querySelector(".odometer-radix-mark"),null!=g&&g.parent.removeChild(g),u?this.addSpacer(this.format.radix,this.digits[u-1],"odometer-radix-mark"):void 0}},t}(),d.options=null!=(A=window.odometerOptions)?A:{},setTimeout(function(){var t,e,n,i,r;if(window.odometerOptions){i=window.odometerOptions,r=[];for(t in i)e=i[t],r.push(null!=(n=d.options)[t]?(n=d.options)[t]:n[t]=e);return r}},0),d.init=function(){var t,e,n,i,r,o;if(null!=document.querySelectorAll){for(e=document.querySelectorAll(d.options.selector||".odometer"),o=[],n=0,i=e.length;n<i;n++)t=e[n],o.push(t.odometer=new d({el:t,value:null!=(r=t.innerText)?r:t.textContent}));return o}},null!=(null!=(D=document.documentElement)?D.doScroll:void 0)&&null!=document.createEventObject?(O=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&d.options.auto!==!1&&d.init(),null!=O?O.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){if(d.options.auto!==!1)return d.init()},!1),"function"==typeof define&&define.amd?define(["jquery"],function(){return d}):typeof exports===!1?module.exports=d:window.Odometer=d}.call(this),function(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t():window.Sortable=t()}(function(){"use strict";function t(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=b({},e),t[U]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var i in n)!(i in e)&&(e[i]=n[i]);at(e);for(var r in this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&Q,o(t,"mousedown",this._onTapStart),o(t,"touchstart",this._onTapStart),o(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(o(t,"dragover",this),o(t,"dragenter",this)),rt.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t,e){"clone"!==t.lastPullMode&&(e=!0),S&&S.state!==e&&(l(S,"display",e?"none":""),e||S.state&&(t.options.group.revertClone?(M.insertBefore(S,T),t._animate(_,S)):M.insertBefore(S,_)),S.state=e)}function n(t,e,n){if(t){
n=n||X;do if(">*"===e&&t.parentNode===n||v(t,e))return t;while(t=i(t))}return null}function i(t){var e=t.host;return e&&e.nodeType?e:t.parentNode}function r(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.preventDefault()}function o(t,e,n){t.addEventListener(e,n,Z)}function a(t,e,n){t.removeEventListener(e,n,Z)}function s(t,e,n){if(t)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Y," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Y," ")}}function l(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return X.defaultView&&X.defaultView.getComputedStyle?n=X.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function u(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function c(t,e,n,i,r,o,a){t=t||e[U];var s=X.createEvent("Event"),l=t.options,u="on"+n.charAt(0).toUpperCase()+n.substr(1);s.initEvent(n,!0,!0),s.to=e,s.from=r||e,s.item=i||e,s.clone=S,s.oldIndex=o,s.newIndex=a,e.dispatchEvent(s),l[u]&&l[u].call(t,s)}function h(t,e,n,i,r,o,a,s){var l,u,c=t[U],h=c.options.onMove;return l=X.createEvent("Event"),l.initEvent("move",!0,!0),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=r||e,l.relatedRect=o||e.getBoundingClientRect(),l.willInsertAfter=s,t.dispatchEvent(l),h&&(u=h.call(c,l,a)),u}function d(t){t.draggable=!1}function f(){tt=!1}function p(t,e){var n=t.lastElementChild,i=n.getBoundingClientRect();return e.clientY-(i.top+i.height)>5||e.clientX-(i.left+i.width)>5}function g(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function m(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"===t.nodeName.toUpperCase()||">*"!==e&&!v(t,e)||n++;return n}function v(t,e){if(t){e=e.split(".");var n=e.shift().toUpperCase(),i=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return!(""!==n&&t.nodeName.toUpperCase()!=n||e.length&&((" "+t.className+" ").match(i)||[]).length!=e.length)}return!1}function y(t,e){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?t.call(i,n[0]):t.apply(i,n),n=void 0},e))}}function b(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function w(t){return $?$(t).clone(!0)[0]:K&&K.dom?K.dom(t).cloneNode(!0):t.cloneNode(!0)}function x(t){for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&it.push(i)}}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var _,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F,B,W={},Y=/\s+/g,V=/left|right|inline/,U="Sortable"+(new Date).getTime(),q=window,X=q.document,G=q.parseInt,$=q.jQuery||q.Zepto,K=q.Polymer,Z=!1,Q=!!("draggable"in X.createElement("div")),J=function(t){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(t=X.createElement("x"),t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents)}(),tt=!1,et=Math.abs,nt=Math.min,it=[],rt=[],ot=y(function(t,e,n){if(n&&e.scroll){var i,r,o,a,s,l,u=n[U],c=e.scrollSensitivity,h=e.scrollSpeed,d=t.clientX,f=t.clientY,p=window.innerWidth,g=window.innerHeight;if(A!==n&&(O=e.scroll,A=n,D=e.scrollFn,O===!0)){O=n;do if(O.offsetWidth<O.scrollWidth||O.offsetHeight<O.scrollHeight)break;while(O=O.parentNode)}O&&(i=O,r=O.getBoundingClientRect(),o=(et(r.right-d)<=c)-(et(r.left-d)<=c),a=(et(r.bottom-f)<=c)-(et(r.top-f)<=c)),o||a||(o=(p-d<=c)-(d<=c),a=(g-f<=c)-(f<=c),(o||a)&&(i=q)),W.vx===o&&W.vy===a&&W.el===i||(W.el=i,W.vx=o,W.vy=a,clearInterval(W.pid),i&&(W.pid=setInterval(function(){return l=a?a*h:0,s=o?o*h:0,"function"==typeof D?D.call(u,s,l,t):void(i===q?q.scrollTo(q.pageXOffset+s,q.pageYOffset+l):(i.scrollTop+=l,i.scrollLeft+=s))},24)))}},30),at=function(t){function e(t,e){return void 0!==t&&t!==!0||(t=n.name),"function"==typeof t?t:function(n,i){var r=i.options.group.name;return e?t:t&&(t.join?t.indexOf(r)>-1:r==t)}}var n={},i=t.group;i&&"object"==typeof i||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n};t.prototype={constructor:t,_onTapStart:function(t){var e,i=this,r=this.el,o=this.options,a=o.preventOnFilter,s=t.type,l=t.touches&&t.touches[0],u=(l||t).target,h=t.target.shadowRoot&&t.path[0]||u,d=o.filter;if(x(r),!_&&!("mousedown"===s&&0!==t.button||o.disabled)&&(u=n(u,o.draggable,r),u&&E!==u)){if(e=m(u,o.draggable),"function"==typeof d){if(d.call(this,t,u,this))return c(i,h,"filter",u,r,e),void(a&&t.preventDefault())}else if(d&&(d=d.split(",").some(function(t){if(t=n(h,t.trim(),r))return c(i,t,"filter",u,r,e),!0})))return void(a&&t.preventDefault());o.handle&&!n(h,o.handle,r)||this._prepareDragStart(t,l,u,e)}},_prepareDragStart:function(t,e,n,i){var r,a=this,l=a.el,h=a.options,f=l.ownerDocument;n&&!_&&n.parentNode===l&&(j=t,M=l,_=n,k=_.parentNode,T=_.nextSibling,E=n,I=h.group,z=i,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,_.style["will-change"]="transform",r=function(){a._disableDelayedDrag(),_.draggable=a.nativeDraggable,s(_,h.chosenClass,!0),a._triggerDragStart(t,e),c(a,M,"choose",_,M,z)},h.ignore.split(",").forEach(function(t){u(_,t.trim(),d)}),o(f,"mouseup",a._onDrop),o(f,"touchend",a._onDrop),o(f,"touchcancel",a._onDrop),o(f,"pointercancel",a._onDrop),o(f,"selectstart",a),h.delay?(o(f,"mouseup",a._disableDelayedDrag),o(f,"touchend",a._disableDelayedDrag),o(f,"touchcancel",a._disableDelayedDrag),o(f,"mousemove",a._disableDelayedDrag),o(f,"touchmove",a._disableDelayedDrag),o(f,"pointermove",a._disableDelayedDrag),a._dragStartTimer=setTimeout(r,h.delay)):r())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),a(t,"mouseup",this._disableDelayedDrag),a(t,"touchend",this._disableDelayedDrag),a(t,"touchcancel",this._disableDelayedDrag),a(t,"mousemove",this._disableDelayedDrag),a(t,"touchmove",this._disableDelayedDrag),a(t,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(t,e){e=e||("touch"==t.pointerType?t:null),e?(j={target:_,clientX:e.clientX,clientY:e.clientY},this._onDragStart(j,"touch")):this.nativeDraggable?(o(_,"dragend",this),o(M,"dragstart",this._onDragStart)):this._onDragStart(j,!0);try{X.selection?setTimeout(function(){X.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(){if(M&&_){var e=this.options;s(_,e.ghostClass,!0),s(_,e.dragClass,!1),t.active=this,c(this,M,"start",_,M,z)}else this._nulling()},_emulateDragOver:function(){if(F){if(this._lastX===F.clientX&&this._lastY===F.clientY)return;this._lastX=F.clientX,this._lastY=F.clientY,J||l(C,"display","none");var t=X.elementFromPoint(F.clientX,F.clientY),e=t,n=rt.length;if(e)do{if(e[U]){for(;n--;)rt[n]({clientX:F.clientX,clientY:F.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);J||l(C,"display","")}},_onTouchMove:function(e){if(j){var n=this.options,i=n.fallbackTolerance,r=n.fallbackOffset,o=e.touches?e.touches[0]:e,a=o.clientX-j.clientX+r.x,s=o.clientY-j.clientY+r.y,u=e.touches?"translate3d("+a+"px,"+s+"px,0)":"translate("+a+"px,"+s+"px)";if(!t.active){if(i&&nt(et(o.clientX-this._lastX),et(o.clientY-this._lastY))<i)return;this._dragStarted()}this._appendGhost(),B=!0,F=o,l(C,"webkitTransform",u),l(C,"mozTransform",u),l(C,"msTransform",u),l(C,"transform",u),e.preventDefault()}},_appendGhost:function(){if(!C){var t,e=_.getBoundingClientRect(),n=l(_),i=this.options;C=_.cloneNode(!0),s(C,i.ghostClass,!1),s(C,i.fallbackClass,!0),s(C,i.dragClass,!0),l(C,"top",e.top-G(n.marginTop,10)),l(C,"left",e.left-G(n.marginLeft,10)),l(C,"width",e.width),l(C,"height",e.height),l(C,"opacity","0.8"),l(C,"position","fixed"),l(C,"zIndex","100000"),l(C,"pointerEvents","none"),i.fallbackOnBody&&X.body.appendChild(C)||M.appendChild(C),t=C.getBoundingClientRect(),l(C,"width",2*e.width-t.width),l(C,"height",2*e.height-t.height)}},_onDragStart:function(t,e){var n=t.dataTransfer,i=this.options;this._offUpEvents(),I.checkPull(this,this,_,t)&&(S=w(_),S.draggable=!1,S.style["will-change"]="",l(S,"display","none"),s(S,this.options.chosenClass,!1),M.insertBefore(S,_),c(this,M,"clone",_)),s(_,i.dragClass,!0),e?("touch"===e?(o(X,"touchmove",this._onTouchMove),o(X,"touchend",this._onDrop),o(X,"touchcancel",this._onDrop),o(X,"pointermove",this._onTouchMove),o(X,"pointerup",this._onDrop)):(o(X,"mousemove",this._onTouchMove),o(X,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",i.setData&&i.setData.call(this,n,_)),o(X,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(i){var r,o,a,s,u=this.el,c=this.options,d=c.group,g=t.active,m=I===d,v=!1,y=c.sort;if(void 0!==i.preventDefault&&(i.preventDefault(),!c.dragoverBubble&&i.stopPropagation()),!_.animated&&(B=!0,g&&!c.disabled&&(m?y||(s=!M.contains(_)):H===this||(g.lastPullMode=I.checkPull(this,g,_,i))&&d.checkPut(this,g,_,i))&&(void 0===i.rootEl||i.rootEl===this.el))){if(ot(i,c,this.el),tt)return;if(r=n(i.target,c.draggable,u),o=_.getBoundingClientRect(),H!==this&&(H=this,v=!0),s)return e(g,!0),k=M,void(S||T?M.insertBefore(_,S||T):y||M.appendChild(_));if(0===u.children.length||u.children[0]===C||u===i.target&&p(u,i)){if(0!==u.children.length&&u.children[0]!==C&&u===i.target&&(r=u.lastElementChild),r){if(r.animated)return;a=r.getBoundingClientRect()}e(g,m),h(M,u,_,o,r,a,i)!==!1&&(_.contains(u)||(u.appendChild(_),k=u),this._animate(o,_),r&&this._animate(a,r))}else if(r&&!r.animated&&r!==_&&void 0!==r.parentNode[U]){R!==r&&(R=r,P=l(r),N=l(r.parentNode)),a=r.getBoundingClientRect();var b=a.right-a.left,w=a.bottom-a.top,x=V.test(P.cssFloat+P.display)||"flex"==N.display&&0===N["flex-direction"].indexOf("row"),E=r.offsetWidth>_.offsetWidth,O=r.offsetHeight>_.offsetHeight,A=(x?(i.clientX-a.left)/b:(i.clientY-a.top)/w)>.5,D=r.nextElementSibling,z=!1;if(x){var L=_.offsetTop,j=r.offsetTop;z=L===j?r.previousElementSibling===_&&!E||A&&E:r.previousElementSibling===_||_.previousElementSibling===r?(i.clientY-a.top)/w>.5:j>L}else v||(z=D!==_&&!O||A&&O);var F=h(M,u,_,o,r,a,i,z);F!==!1&&(1!==F&&F!==-1||(z=1===F),tt=!0,setTimeout(f,30),e(g,m),_.contains(u)||(z&&!D?u.appendChild(_):r.parentNode.insertBefore(_,z?D:r)),k=_.parentNode,this._animate(o,_),this._animate(a,r))}}},_animate:function(t,e){var n=this.options.animation;if(n){var i=e.getBoundingClientRect();1===t.nodeType&&(t=t.getBoundingClientRect()),l(e,"transition","none"),l(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,l(e,"transition","all "+n+"ms"),l(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){l(e,"transition",""),l(e,"transform",""),e.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;a(X,"touchmove",this._onTouchMove),a(X,"pointermove",this._onTouchMove),a(t,"mouseup",this._onDrop),a(t,"touchend",this._onDrop),a(t,"pointerup",this._onDrop),a(t,"touchcancel",this._onDrop),a(t,"pointercancel",this._onDrop),a(t,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;clearInterval(this._loopId),clearInterval(W.pid),clearTimeout(this._dragStartTimer),a(X,"mousemove",this._onTouchMove),this.nativeDraggable&&(a(X,"drop",this),a(n,"dragstart",this._onDragStart)),this._offUpEvents(),e&&(B&&(e.preventDefault(),!i.dropBubble&&e.stopPropagation()),C&&C.parentNode&&C.parentNode.removeChild(C),M!==k&&"clone"===t.active.lastPullMode||S&&S.parentNode&&S.parentNode.removeChild(S),_&&(this.nativeDraggable&&a(_,"dragend",this),d(_),_.style["will-change"]="",s(_,this.options.ghostClass,!1),s(_,this.options.chosenClass,!1),c(this,M,"unchoose",_,M,z),M!==k?(L=m(_,i.draggable),L>=0&&(c(null,k,"add",_,M,z,L),c(this,M,"remove",_,M,z,L),c(null,k,"sort",_,M,z,L),c(this,M,"sort",_,M,z,L))):_.nextSibling!==T&&(L=m(_,i.draggable),L>=0&&(c(this,M,"update",_,M,z,L),c(this,M,"sort",_,M,z,L))),t.active&&(null!=L&&L!==-1||(L=z),c(this,M,"end",_,M,z,L),this.save()))),this._nulling()},_nulling:function(){M=_=k=C=T=S=E=O=A=j=F=B=L=R=P=H=I=t.active=null,it.forEach(function(t){t.checked=!0}),it.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":_&&(this._onDragOver(t),r(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,r=0,o=i.length,a=this.options;r<o;r++)t=i[r],n(t,a.draggable,this.el)&&e.push(t.getAttribute(a.dataIdAttr)||g(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach(function(t,r){var o=i.children[r];n(o,this.options.draggable,i)&&(e[t]=o)},this),t.forEach(function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return n(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;return void 0===e?n[t]:(n[t]=e,void("group"===t&&at(n)))},destroy:function(){var t=this.el;t[U]=null,a(t,"mousedown",this._onTapStart),a(t,"touchstart",this._onTapStart),a(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(a(t,"dragover",this),a(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),rt.splice(rt.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},o(X,"touchmove",function(e){t.active&&e.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Z={capture:!1,passive:!1}}}))}catch(st){}return t.utils={on:o,off:a,css:l,find:u,is:function(t,e){return!!n(t,e,t)},extend:b,throttle:y,closest:n,toggleClass:s,clone:w,index:m},t.create=function(e,n){return new t(e,n)},t.version="1.6.0",t}),function(t,e){if("function"==typeof define&&define.amd)define(["moment","jquery"],function(n,i){return t.daterangepicker=e(n,i)});else if("object"==typeof module&&module.exports){var n="undefined"!=typeof window?window.jQuery:void 0;n||(n=require("jquery"),n.fn||(n.fn={})),module.exports=e(require("moment"),n)}else t.daterangepicker=e(t.moment,t.jQuery)}(this,function(t,e){var n=function(n,i,r){if(this.parentEl="body",this.element=e(n),this.startDate=t().startOf("day"),this.endDate=t().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={direction:"ltr",format:t.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:t.weekdaysMin(),monthNames:t.monthsShort(),firstDay:t.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof i&&null!==i||(i={}),i=e.extend(this.element.data(),i),"string"==typeof i.template||i.template instanceof e||(i.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=e(i.parentEl&&e(i.parentEl).length?i.parentEl:this.parentEl),this.container=e(i.template).appendTo(this.parentEl),"object"==typeof i.locale&&("string"==typeof i.locale.direction&&(this.locale.direction=i.locale.direction),"string"==typeof i.locale.format&&(this.locale.format=i.locale.format),"string"==typeof i.locale.separator&&(this.locale.separator=i.locale.separator),"object"==typeof i.locale.daysOfWeek&&(this.locale.daysOfWeek=i.locale.daysOfWeek.slice()),"object"==typeof i.locale.monthNames&&(this.locale.monthNames=i.locale.monthNames.slice()),"number"==typeof i.locale.firstDay&&(this.locale.firstDay=i.locale.firstDay),"string"==typeof i.locale.applyLabel&&(this.locale.applyLabel=i.locale.applyLabel),"string"==typeof i.locale.cancelLabel&&(this.locale.cancelLabel=i.locale.cancelLabel),"string"==typeof i.locale.weekLabel&&(this.locale.weekLabel=i.locale.weekLabel),"string"==typeof i.locale.customRangeLabel)){var o=document.createElement("textarea");o.innerHTML=i.locale.customRangeLabel;var a=o.value;this.locale.customRangeLabel=a}if(this.container.addClass(this.locale.direction),"string"==typeof i.startDate&&(this.startDate=t(i.startDate,this.locale.format)),"string"==typeof i.endDate&&(this.endDate=t(i.endDate,this.locale.format)),"string"==typeof i.minDate&&(this.minDate=t(i.minDate,this.locale.format)),"string"==typeof i.maxDate&&(this.maxDate=t(i.maxDate,this.locale.format)),"object"==typeof i.startDate&&(this.startDate=t(i.startDate)),"object"==typeof i.endDate&&(this.endDate=t(i.endDate)),"object"==typeof i.minDate&&(this.minDate=t(i.minDate)),"object"==typeof i.maxDate&&(this.maxDate=t(i.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof i.applyClass&&(this.applyClass=i.applyClass),"string"==typeof i.cancelClass&&(this.cancelClass=i.cancelClass),"object"==typeof i.dateLimit&&(this.dateLimit=i.dateLimit),"string"==typeof i.opens&&(this.opens=i.opens),"string"==typeof i.drops&&(this.drops=i.drops),"boolean"==typeof i.showWeekNumbers&&(this.showWeekNumbers=i.showWeekNumbers),"boolean"==typeof i.showISOWeekNumbers&&(this.showISOWeekNumbers=i.showISOWeekNumbers),"string"==typeof i.buttonClasses&&(this.buttonClasses=i.buttonClasses),"object"==typeof i.buttonClasses&&(this.buttonClasses=i.buttonClasses.join(" ")),"boolean"==typeof i.showDropdowns&&(this.showDropdowns=i.showDropdowns),"boolean"==typeof i.showCustomRangeLabel&&(this.showCustomRangeLabel=i.showCustomRangeLabel),"boolean"==typeof i.singleDatePicker&&(this.singleDatePicker=i.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof i.timePicker&&(this.timePicker=i.timePicker),"boolean"==typeof i.timePickerSeconds&&(this.timePickerSeconds=i.timePickerSeconds),"number"==typeof i.timePickerIncrement&&(this.timePickerIncrement=i.timePickerIncrement),"boolean"==typeof i.timePicker24Hour&&(this.timePicker24Hour=i.timePicker24Hour),"boolean"==typeof i.autoApply&&(this.autoApply=i.autoApply),"boolean"==typeof i.autoUpdateInput&&(this.autoUpdateInput=i.autoUpdateInput),"boolean"==typeof i.linkedCalendars&&(this.linkedCalendars=i.linkedCalendars),"function"==typeof i.isInvalidDate&&(this.isInvalidDate=i.isInvalidDate),"function"==typeof i.isCustomDate&&(this.isCustomDate=i.isCustomDate),"boolean"==typeof i.alwaysShowCalendars&&(this.alwaysShowCalendars=i.alwaysShowCalendars),0!=this.locale.firstDay)for(var s=this.locale.firstDay;s>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),s--;var l,u,c;if("undefined"==typeof i.startDate&&"undefined"==typeof i.endDate&&e(this.element).is("input[type=text]")){var h=e(this.element).val(),d=h.split(this.locale.separator);l=u=null,2==d.length?(l=t(d[0],this.locale.format),u=t(d[1],this.locale.format)):this.singleDatePicker&&""!==h&&(l=t(h,this.locale.format),u=t(h,this.locale.format)),null!==l&&null!==u&&(this.setStartDate(l),this.setEndDate(u))}if("object"==typeof i.ranges){for(c in i.ranges){l="string"==typeof i.ranges[c][0]?t(i.ranges[c][0],this.locale.format):t(i.ranges[c][0]),u="string"==typeof i.ranges[c][1]?t(i.ranges[c][1],this.locale.format):t(i.ranges[c][1]),this.minDate&&l.isBefore(this.minDate)&&(l=this.minDate.clone());var f=this.maxDate;if(this.dateLimit&&f&&l.clone().add(this.dateLimit).isAfter(f)&&(f=l.clone().add(this.dateLimit)),f&&u.isAfter(f)&&(u=f.clone()),!(this.minDate&&u.isBefore(this.minDate,this.timepicker?"minute":"day")||f&&l.isAfter(f,this.timepicker?"minute":"day"))){var o=document.createElement("textarea");o.innerHTML=c;var a=o.value;this.ranges[a]=[l,u]}}var p="<ul>";for(c in this.ranges)p+='<li data-range-key="'+c+'">'+c+"</li>";this.showCustomRangeLabel&&(p+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),p+="</ul>",this.container.find(".ranges").prepend(p)}"function"==typeof r&&(this.callback=r),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof i.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide(),this.timePicker?this.container.find(".ranges ul").hide():this.container.find(".ranges").hide()),("undefined"==typeof i.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),"undefined"!=typeof i.ranges&&"right"==this.opens&&this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent()),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",e.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",e.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",e.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",e.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",e.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",e.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",e.proxy(this.showCalendars,this)).on("focus.daterangepicker",".daterangepicker_input input",e.proxy(this.formInputsFocused,this)).on("blur.daterangepicker",".daterangepicker_input input",e.proxy(this.formInputsBlurred,this)).on("change.daterangepicker",".daterangepicker_input input",e.proxy(this.formInputsChanged,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",e.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",e.proxy(this.clickCancel,this)).on("click.daterangepicker","li",e.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",e.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",e.proxy(this.updateFormInputs,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":e.proxy(this.show,this),"focus.daterangepicker":e.proxy(this.show,this),"keyup.daterangepicker":e.proxy(this.elementChanged,this),"keydown.daterangepicker":e.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",e.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};return n.prototype={constructor:n,setStartDate:function(e){"string"==typeof e&&(this.startDate=t(e,this.locale.format)),"object"==typeof e&&(this.startDate=t(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(e){"string"==typeof e&&(this.endDate=t(e,this.locale.format)),"object"==typeof e&&(this.endDate=t(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.previousRightTime=this.endDate.clone(),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){var t,e,n;if(this.endDate){if(t=parseInt(this.container.find(".left .hourselect").val(),10),e=parseInt(this.container.find(".left .minuteselect").val(),10),n=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var i=this.container.find(".left .ampmselect").val();"PM"===i&&t<12&&(t+=12),"AM"===i&&12===t&&(t=0)}}else if(t=parseInt(this.container.find(".right .hourselect").val(),10),e=parseInt(this.container.find(".right .minuteselect").val(),10),n=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour){var i=this.container.find(".right .ampmselect").val();"PM"===i&&t<12&&(t+=12),"AM"===i&&12===t&&(t=0)}this.leftCalendar.month.hour(t).minute(e).second(n),this.rightCalendar.month.hour(t).minute(e).second(n)}this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(n){var i="left"==n?this.leftCalendar:this.rightCalendar,r=i.month.month(),o=i.month.year(),a=i.month.hour(),s=i.month.minute(),l=i.month.second(),u=t([o,r]).daysInMonth(),c=t([o,r,1]),h=t([o,r,u]),d=t(c).subtract(1,"month").month(),f=t(c).subtract(1,"month").year(),p=t([f,d]).daysInMonth(),g=c.day(),i=[];i.firstDay=c,i.lastDay=h;for(var m=0;m<6;m++)i[m]=[];var v=p-g+this.locale.firstDay+1;v>p&&(v-=7),g==this.locale.firstDay&&(v=p-6);for(var y,b,w=t([f,d,v,12,s,l]),m=0,y=0,b=0;m<42;m++,y++,w=t(w).add(24,"hour"))m>0&&y%7===0&&(y=0,b++),i[b][y]=w.clone().hour(a).minute(s).second(l),w.hour(12),this.minDate&&i[b][y].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&i[b][y].isBefore(this.minDate)&&"left"==n&&(i[b][y]=this.minDate.clone()),this.maxDate&&i[b][y].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&i[b][y].isAfter(this.maxDate)&&"right"==n&&(i[b][y]=this.maxDate.clone());"left"==n?this.leftCalendar.calendar=i:this.rightCalendar.calendar=i;var x="left"==n?this.minDate:this.startDate,_=this.maxDate,k=("left"==n?this.startDate:this.endDate,"ltr"==this.locale.direction?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"}),C='<table class="table-condensed">';C+="<thead>",C+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(C+="<th></th>"),C+=x&&!x.isBefore(i.firstDay)||this.linkedCalendars&&"left"!=n?"<th></th>":'<th class="prev available"><i class="fa fa-'+k.left+" glyphicon glyphicon-"+k.left+'"></i></th>';var S=this.locale.monthNames[i[1][1].month()]+i[1][1].format(" YYYY");if(this.showDropdowns){for(var M=i[1][1].month(),T=i[1][1].year(),E=_&&_.year()||T+5,O=x&&x.year()||T-50,A=T==O,D=T==E,R='<select class="monthselect">',P=0;P<12;P++)R+=(!A||P>=x.month())&&(!D||P<=_.month())?"<option value='"+P+"'"+(P===M?" selected='selected'":"")+">"+this.locale.monthNames[P]+"</option>":"<option value='"+P+"'"+(P===M?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[P]+"</option>";R+="</select>";for(var N='<select class="yearselect">',z=O;z<=E;z++)N+='<option value="'+z+'"'+(z===T?' selected="selected"':"")+">"+z+"</option>";N+="</select>",S=R+N}if(C+='<th colspan="5" class="month">'+S+"</th>",C+=_&&!_.isAfter(i.lastDay)||this.linkedCalendars&&"right"!=n&&!this.singleDatePicker?"<th></th>":'<th class="next available"><i class="fa fa-'+k.right+" glyphicon glyphicon-"+k.right+'"></i></th>',
C+="</tr>",C+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(C+='<th class="week">'+this.locale.weekLabel+"</th>"),e.each(this.locale.daysOfWeek,function(t,e){C+="<th>"+e+"</th>"}),C+="</tr>",C+="</thead>",C+="<tbody>",null==this.endDate&&this.dateLimit){var L=this.startDate.clone().add(this.dateLimit).endOf("day");_&&!L.isBefore(_)||(_=L)}for(var b=0;b<6;b++){C+="<tr>",this.showWeekNumbers?C+='<td class="week">'+i[b][0].week()+"</td>":this.showISOWeekNumbers&&(C+='<td class="week">'+i[b][0].isoWeek()+"</td>");for(var y=0;y<7;y++){var I=[];i[b][y].isSame(new Date,"day")&&I.push("today"),i[b][y].isoWeekday()>5&&I.push("weekend"),i[b][y].month()!=i[1][1].month()&&I.push("off"),this.minDate&&i[b][y].isBefore(this.minDate,"day")&&I.push("off","disabled"),_&&i[b][y].isAfter(_,"day")&&I.push("off","disabled"),this.isInvalidDate(i[b][y])&&I.push("off","disabled"),i[b][y].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&I.push("active","start-date"),null!=this.endDate&&i[b][y].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&I.push("active","end-date"),null!=this.endDate&&i[b][y]>this.startDate&&i[b][y]<this.endDate&&I.push("in-range");var H=this.isCustomDate(i[b][y]);H!==!1&&("string"==typeof H?I.push(H):Array.prototype.push.apply(I,H));for(var j="",F=!1,m=0;m<I.length;m++)j+=I[m]+" ","disabled"==I[m]&&(F=!0);F||(j+="available"),C+='<td class="'+j.replace(/^\s+|\s+$/g,"")+'" data-title="r'+b+"c"+y+'">'+i[b][y].date()+"</td>"}C+="</tr>"}C+="</tbody>",C+="</table>",this.container.find(".calendar."+n+" .calendar-table").html(C)},renderTimePicker:function(t){if("right"!=t||this.endDate){var e,n,i,r=this.maxDate;if(!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(r=this.startDate.clone().add(this.dateLimit)),"left"==t)n=this.startDate.clone(),i=this.minDate;else if("right"==t){n=this.endDate.clone(),i=this.startDate;var o=this.container.find(".calendar.right .calendar-time div");if(""!=o.html()&&(n.hour(o.find(".hourselect option:selected").val()||n.hour()),n.minute(o.find(".minuteselect option:selected").val()||n.minute()),n.second(o.find(".secondselect option:selected").val()||n.second()),!this.timePicker24Hour)){var a=o.find(".ampmselect option:selected").val();"PM"===a&&n.hour()<12&&n.hour(n.hour()+12),"AM"===a&&12===n.hour()&&n.hour(0)}n.isBefore(this.startDate)&&(n=this.startDate.clone()),r&&n.isAfter(r)&&(n=r.clone())}e='<select class="hourselect">';for(var s=this.timePicker24Hour?0:1,l=this.timePicker24Hour?23:12,u=s;u<=l;u++){var c=u;this.timePicker24Hour||(c=n.hour()>=12?12==u?12:u+12:12==u?0:u);var h=n.clone().hour(c),d=!1;i&&h.minute(59).isBefore(i)&&(d=!0),r&&h.minute(0).isAfter(r)&&(d=!0),e+=c!=n.hour()||d?d?'<option value="'+u+'" disabled="disabled" class="disabled">'+u+"</option>":'<option value="'+u+'">'+u+"</option>":'<option value="'+u+'" selected="selected">'+u+"</option>"}e+="</select> ",e+=': <select class="minuteselect">';for(var u=0;u<60;u+=this.timePickerIncrement){var f=u<10?"0"+u:u,h=n.clone().minute(u),d=!1;i&&h.second(59).isBefore(i)&&(d=!0),r&&h.second(0).isAfter(r)&&(d=!0),e+=n.minute()!=u||d?d?'<option value="'+u+'" disabled="disabled" class="disabled">'+f+"</option>":'<option value="'+u+'">'+f+"</option>":'<option value="'+u+'" selected="selected">'+f+"</option>"}if(e+="</select> ",this.timePickerSeconds){e+=': <select class="secondselect">';for(var u=0;u<60;u++){var f=u<10?"0"+u:u,h=n.clone().second(u),d=!1;i&&h.isBefore(i)&&(d=!0),r&&h.isAfter(r)&&(d=!0),e+=n.second()!=u||d?d?'<option value="'+u+'" disabled="disabled" class="disabled">'+f+"</option>":'<option value="'+u+'">'+f+"</option>":'<option value="'+u+'" selected="selected">'+f+"</option>"}e+="</select> "}if(!this.timePicker24Hour){e+='<select class="ampmselect">';var p="",g="";i&&n.clone().hour(12).minute(0).second(0).isBefore(i)&&(p=' disabled="disabled" class="disabled"'),r&&n.clone().hour(0).minute(0).second(0).isAfter(r)&&(g=' disabled="disabled" class="disabled"'),e+=n.hour()>=12?'<option value="AM"'+p+'>AM</option><option value="PM" selected="selected"'+g+">PM</option>":'<option value="AM" selected="selected"'+p+'>AM</option><option value="PM"'+g+">PM</option>",e+="</select>"}this.container.find(".calendar."+t+" .calendar-time div").html(e)}},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var t,n={top:0,left:0},i=e(window).width();this.parentEl.is("body")||(n={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},i=this.parentEl[0].clientWidth+this.parentEl.offset().left),t="up"==this.drops?this.element.offset().top-this.container.outerHeight()-n.top:this.element.offset().top+this.element.outerHeight()-n.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:t,right:i-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:t,left:this.element.offset().left-n.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:t,left:this.element.offset().left-n.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>e(window).width()&&this.container.css({left:"auto",right:0}))},show:function(t){this.isShowing||(this._outsideClickProxy=e.proxy(function(t){this.outsideClick(t)},this),e(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),e(window).on("resize.daterangepicker",e.proxy(function(t){this.move(t)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(t){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),e(document).off(".daterangepicker"),e(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(t){this.isShowing?this.hide():this.show()},outsideClick:function(t){var n=e(t.target);"focusin"==t.type||n.closest(this.element).length||n.closest(this.container).length||n.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(t){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){var e=t.target.getAttribute("data-range-key");if(e==this.locale.customRangeLabel)this.updateView();else{var n=this.ranges[e];this.container.find("input[name=daterangepicker_start]").val(n[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(n[1].format(this.locale.format))}}},clickRange:function(t){var e=t.target.getAttribute("data-range-key");if(this.chosenLabel=e,e==this.locale.customRangeLabel)this.showCalendars();else{var n=this.ranges[e];this.startDate=n[0],this.endDate=n[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(t){var n=e(t.target).parents(".calendar");n.hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(t){var n=e(t.target).parents(".calendar");n.hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(t){if(e(t.target).hasClass("available")){var n=e(t.target).attr("data-title"),i=n.substr(1,1),r=n.substr(3,1),o=e(t.target).parents(".calendar"),a=o.hasClass("left")?this.leftCalendar.calendar[i][r]:this.rightCalendar.calendar[i][r];this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")?this.container.find("input[name=daterangepicker_start]").val(a.format(this.locale.format)):this.endDate||this.container.find("input[name=daterangepicker_end]").is(":focus")||this.container.find("input[name=daterangepicker_end]").val(a.format(this.locale.format));var s=this.leftCalendar,l=this.rightCalendar,u=this.startDate;this.endDate||this.container.find(".calendar tbody td").each(function(t,n){if(!e(n).hasClass("week")){var i=e(n).attr("data-title"),r=i.substr(1,1),o=i.substr(3,1),c=e(n).parents(".calendar"),h=c.hasClass("left")?s.calendar[r][o]:l.calendar[r][o];h.isAfter(u)&&h.isBefore(a)||h.isSame(a,"day")?e(n).addClass("in-range"):e(n).removeClass("in-range")}})}},clickDate:function(t){if(e(t.target).hasClass("available")){var n=e(t.target).attr("data-title"),i=n.substr(1,1),r=n.substr(3,1),o=e(t.target).parents(".calendar"),a=o.hasClass("left")?this.leftCalendar.calendar[i][r]:this.rightCalendar.calendar[i][r];if(this.endDate||a.isBefore(this.startDate,"day")){if(this.timePicker){var s=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var l=this.container.find(".left .ampmselect").val();"PM"===l&&s<12&&(s+=12),"AM"===l&&12===s&&(s=0)}var u=parseInt(this.container.find(".left .minuteselect").val(),10),c=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;a=a.clone().hour(s).minute(u).second(c)}this.endDate=null,this.setStartDate(a.clone())}else if(!this.endDate&&a.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{if(this.timePicker){var s=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var l=this.container.find(".right .ampmselect").val();"PM"===l&&s<12&&(s+=12),"AM"===l&&12===s&&(s=0)}var u=parseInt(this.container.find(".right .minuteselect").val(),10),c=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;a=a.clone().hour(s).minute(u).second(c)}this.setEndDate(a.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView(),t.stopPropagation()}},calculateChosenLabel:function(){var t=!0,e=0;for(var n in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[n][0])&&this.endDate.isSame(this.ranges[n][1])){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[n][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[n][1].format("YYYY-MM-DD")){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").html();break}e++}t&&(this.showCustomRangeLabel?this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html():this.chosenLabel=null,this.showCalendars())},clickApply:function(t){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(t){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(t){var n=e(t.target).closest(".calendar").hasClass("left"),i=n?"left":"right",r=this.container.find(".calendar."+i),o=parseInt(r.find(".monthselect").val(),10),a=r.find(".yearselect").val();n||(a<this.startDate.year()||a==this.startDate.year()&&o<this.startDate.month())&&(o=this.startDate.month(),a=this.startDate.year()),this.minDate&&(a<this.minDate.year()||a==this.minDate.year()&&o<this.minDate.month())&&(o=this.minDate.month(),a=this.minDate.year()),this.maxDate&&(a>this.maxDate.year()||a==this.maxDate.year()&&o>this.maxDate.month())&&(o=this.maxDate.month(),a=this.maxDate.year()),n?(this.leftCalendar.month.month(o).year(a),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(o).year(a),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(t){var n=e(t.target).closest(".calendar"),i=n.hasClass("left"),r=parseInt(n.find(".hourselect").val(),10),o=parseInt(n.find(".minuteselect").val(),10),a=this.timePickerSeconds?parseInt(n.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var s=n.find(".ampmselect").val();"PM"===s&&r<12&&(r+=12),"AM"===s&&12===r&&(r=0)}if(i){var l=this.startDate.clone();l.hour(r),l.minute(o),l.second(a),this.setStartDate(l),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==l.format("YYYY-MM-DD")&&this.endDate.isBefore(l)&&this.setEndDate(l.clone())}else if(this.endDate){var u=this.endDate.clone();u.hour(r),u.minute(o),u.second(a),this.setEndDate(u)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(n){var i=e(n.target).closest(".calendar").hasClass("right"),r=t(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),o=t(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);r.isValid()&&o.isValid()&&(i&&o.isBefore(r)&&(r=o.clone()),this.setStartDate(r),this.setEndDate(o),i?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateView()},formInputsFocused:function(t){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active"),e(t.target).addClass("active");var n=e(t.target).closest(".calendar").hasClass("right");n&&(this.endDate=null,this.setStartDate(this.startDate.clone()),this.updateView())},formInputsBlurred:function(e){if(!this.endDate){var n=this.container.find('input[name="daterangepicker_end"]').val(),i=t(n,this.locale.format);i.isValid()&&(this.setEndDate(i),this.updateView())}},elementChanged:function(){if(this.element.is("input")&&this.element.val().length&&!(this.element.val().length<this.locale.format.length)){var e=this.element.val().split(this.locale.separator),n=null,i=null;2===e.length&&(n=t(e[0],this.locale.format),i=t(e[1],this.locale.format)),(this.singleDatePicker||null===n||null===i)&&(n=t(this.element.val(),this.locale.format),i=n),n.isValid()&&i.isValid()&&(this.setStartDate(n),this.setEndDate(i),this.updateView())}},keydown:function(t){9!==t.keyCode&&13!==t.keyCode||this.hide()},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},e.fn.daterangepicker=function(t,i){return this.each(function(){var r=e(this);r.data("daterangepicker")&&r.data("daterangepicker").remove(),r.data("daterangepicker",new n(r,t,i))}),this},n}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("moment"),require("numbro"),require("pikaday")):"function"==typeof define&&define.amd?define("Handsontable",["moment","numbro","pikaday"],e):"object"==typeof exports?exports.Handsontable=e(require("moment"),require("numbro"),require("pikaday")):t.Handsontable=e(t.moment,t.numbro,t.Pikaday)}(this,function(t,e,n){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=208)}([function(t,e,n){"use strict";function i(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,i=null;null!=t;){if(n===e){i=t;break}t.host&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t=t.host:(n++,t=t.parentNode)}return i}function r(t,e,n){for(;null!=t&&t!==n;){if(t.nodeType===Node.ELEMENT_NODE&&(e.indexOf(t.nodeName)>-1||e.indexOf(t)>-1))return t;t=t.host&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.host:t.parentNode}return null}function o(t,e,n){for(var i=[];t&&(t=r(t,e,n),t&&(!n||n.contains(t)));)i.push(t),t=t.host&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.host:t.parentNode;var o=i.length;return o?i[o-1]:null}function a(t,e){var n=t.parentNode,i=[];for("string"==typeof e?i=Array.prototype.slice.call(document.querySelectorAll(e),0):i.push(e);null!=n;){if(i.indexOf(n)>-1)return!0;n=n.parentNode}return!1}function s(t){function e(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName===i.toUpperCase()}var n,i="hot-table",r=!1;for(n=l(t);null!=n;){if(e(n)){r=!0;break}if(n.host&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(r=e(n.host))break;n=n.host}n=n.parentNode}return r}function l(t){return"undefined"!=typeof Polymer&&"function"==typeof wrap?wrap(t):t}function u(t){return"undefined"!=typeof Polymer&&"function"==typeof unwrap?unwrap(t):t}function c(t){var e=0;if(t.previousSibling)for(;t=t.previousSibling;)++e;return e}function h(t,e){var n=document.querySelector(".ht_clone_"+t);return n?n.contains(e):null}function d(t){var e=0,n=[];if(!t||!t.length)return n;for(;t[e];)n.push(t[e]),e++;return n}function f(t,e){return $(t,e)}function p(t,e){return K(t,e)}function g(t,e){return Z(t,e)}function m(t,e){if(3===t.nodeType)e.removeChild(t);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(t.nodeName)>-1)for(var n=t.childNodes,i=n.length-1;i>=0;i--)m(n[i],t)}function v(t){for(var e;e=t.lastChild;)t.removeChild(e)}function y(t,e){rt.test(e)?t.innerHTML=e:b(t,e)}function b(t,e){var n=t.firstChild;n&&3===n.nodeType&&null===n.nextSibling?ot?n.textContent=e:n.data=e:(v(t),t.appendChild(document.createTextNode(e)))}function w(t){for(var e=t;u(e)!==document.documentElement;){if(null===e)return!1;if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(e.host){if(e.host.impl)return w(e.host.impl);if(e.host)return w(e.host);throw new Error("Lost in Web Components world")}return!1}if("none"===e.style.display)return!1;e=e.parentNode}return!0}function x(t){var e,n,i,r,o;if(r=document.documentElement,(0,J.hasCaptionProblem)()&&t.firstChild&&"CAPTION"===t.firstChild.nodeName)return o=t.getBoundingClientRect(),{top:o.top+(window.pageYOffset||r.scrollTop)-(r.clientTop||0),left:o.left+(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0)};for(e=t.offsetLeft,n=t.offsetTop,i=t;(t=t.offsetParent)&&t!==document.body;)e+=t.offsetLeft,n+=t.offsetTop,i=t;return i&&"fixed"===i.style.position&&(e+=window.pageXOffset||r.scrollLeft,n+=window.pageYOffset||r.scrollTop),{left:e,top:n}}function _(){var t=window.scrollY;return void 0===t&&(t=document.documentElement.scrollTop),t}function k(){var t=window.scrollX;return void 0===t&&(t=document.documentElement.scrollLeft),t}function C(t){return t===window?_():t.scrollTop}function S(t){return t===window?k():t.scrollLeft}function M(t){for(var e,n,i,r=t.parentNode,o=["auto","scroll"],a="",s="",l="",u="";r&&r.style&&document.body!==r;){if(e=r.style.overflow,n=r.style.overflowX,i=r.style.overflowY,"scroll"==e||"scroll"==n||"scroll"==i)return r;if(window.getComputedStyle&&(a=window.getComputedStyle(r),s=a.getPropertyValue("overflow"),l=a.getPropertyValue("overflow-y"),u=a.getPropertyValue("overflow-x"),"scroll"===s||"scroll"===u||"scroll"===l))return r;if(r.clientHeight<=r.scrollHeight&&(o.indexOf(i)!==-1||o.indexOf(e)!==-1||o.indexOf(s)!==-1||o.indexOf(l)!==-1))return r;if(r.clientWidth<=r.scrollWidth&&(o.indexOf(n)!==-1||o.indexOf(e)!==-1||o.indexOf(s)!==-1||o.indexOf(u)!==-1))return r;r=r.parentNode}return window}function T(t){for(var e=t.parentNode;e&&e.style&&document.body!==e;){if("visible"!==e.style.overflow&&""!==e.style.overflow)return e;if(window.getComputedStyle){var n=window.getComputedStyle(e);if("visible"!==n.getPropertyValue("overflow")&&""!==n.getPropertyValue("overflow"))return e}e=e.parentNode}return window}function E(t,e){if(t){if(t!==window){var n,i=t.style[e];return""!==i&&void 0!==i?i:(n=O(t),""!==n[e]&&void 0!==n[e]?n[e]:void 0)}if("width"===e)return window.innerWidth+"px";if("height"===e)return window.innerHeight+"px"}}function O(t){return t.currentStyle||document.defaultView.getComputedStyle(t)}function A(t){return t.offsetWidth}function D(t){return(0,J.hasCaptionProblem)()&&t.firstChild&&"CAPTION"===t.firstChild.nodeName?t.offsetHeight+t.firstChild.offsetHeight:t.offsetHeight}function R(t){return t.clientHeight||t.innerHeight}function P(t){return t.clientWidth||t.innerWidth}function N(t,e,n){window.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function z(t,e,n){window.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)}function L(t){if(t.selectionStart)return t.selectionStart;if(document.selection){t.focus();var e=document.selection.createRange();if(null==e)return 0;var n=t.createTextRange(),i=n.duplicate();return n.moveToBookmark(e.getBookmark()),i.setEndPoint("EndToStart",n),i.text.length}return 0}function I(t){if(t.selectionEnd)return t.selectionEnd;if(document.selection){var e=document.selection.createRange();if(null==e)return 0;var n=t.createTextRange();return n.text.indexOf(e.text)+e.text.length}return 0}function H(){var t="";return window.getSelection?t=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(t=document.selection.createRange().text),t}function j(t,e,n){if(void 0===n&&(n=e),t.setSelectionRange){t.focus();try{t.setSelectionRange(e,n)}catch(i){var r=t.parentNode,o=r.style.display;r.style.display="block",t.setSelectionRange(e,n),r.style.display=o}}else if(t.createTextRange){var a=t.createTextRange();a.collapse(!0),a.moveEnd("character",n),a.moveStart("character",e),a.select()}}function F(){var t=document.createElement("div");t.style.height="200px",t.style.width="100%";var e=document.createElement("div");e.style.boxSizing="content-box",e.style.height="150px",e.style.left="0px",e.style.overflow="hidden",e.style.position="absolute",e.style.top="0px",e.style.width="200px",e.style.visibility="hidden",e.appendChild(t),(document.body||document.documentElement).appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;return n==i&&(i=e.clientWidth),(document.body||document.documentElement).removeChild(e),n-i}function B(){return void 0===it&&(it=F()),it}function W(t){return t.offsetWidth!==t.clientWidth}function Y(t){return t.offsetHeight!==t.clientHeight}function V(t,e,n){(0,Q.isIE8)()||(0,Q.isIE9)()?(t.style.top=n,t.style.left=e):(0,Q.isSafari)()?t.style["-webkit-transform"]="translate3d("+e+","+n+",0)":t.style.transform="translate3d("+e+","+n+",0)"}function U(t){var e;return t.style.transform&&""!==(e=t.style.transform)?["transform",e]:t.style["-webkit-transform"]&&""!==(e=t.style["-webkit-transform"])?["-webkit-transform",e]:-1}function q(t){t.style.transform&&""!==t.style.transform?t.style.transform="":t.style["-webkit-transform"]&&""!==t.style["-webkit-transform"]&&(t.style["-webkit-transform"]="")}function X(t){var e=["INPUT","SELECT","TEXTAREA"];return t&&(e.indexOf(t.nodeName)>-1||"true"===t.contentEditable)}function G(t){return X(t)&&t.className.indexOf("handsontableInput")==-1&&t.className.indexOf("copyPaste")==-1}e.__esModule=!0,e.HTML_CHARACTERS=void 0,e.getParent=i,e.closest=r,e.closestDown=o,e.isChildOf=a,e.isChildOfWebComponentTable=s,e.polymerWrap=l,e.polymerUnwrap=u,e.index=c,e.overlayContainsElement=h,e.hasClass=f,e.addClass=p,e.removeClass=g,e.removeTextNodes=m,e.empty=v,e.fastInnerHTML=y,e.fastInnerText=b,e.isVisible=w,e.offset=x,e.getWindowScrollTop=_,e.getWindowScrollLeft=k,e.getScrollTop=C,e.getScrollLeft=S,e.getScrollableElement=M,e.getTrimmingContainer=T,e.getStyle=E,e.getComputedStyle=O,e.outerWidth=A,e.outerHeight=D,e.innerHeight=R,e.innerWidth=P,e.addEvent=N,e.removeEvent=z,e.getCaretPosition=L,e.getSelectionEndPosition=I,e.getSelectionText=H,e.setCaretPosition=j,e.getScrollbarWidth=B,e.hasVerticalScrollbar=W,e.hasHorizontalScrollbar=Y,e.setOverlayPosition=V,e.getCssTransform=U,e.resetCssTransform=q,e.isInput=X,e.isOutsideInput=G;var $,K,Z,Q=n(25),J=n(34),tt=!!document.documentElement.classList;if(tt){var et=function(){var t=document.createElement("div");return t.classList.add("test","test2"),t.classList.contains("test2")}();$=function(t,e){return""!==e&&t.classList.contains(e)},K=function(t,e){var n=0;if("string"==typeof e&&(e=e.split(" ")),e=d(e),et)t.classList.add.apply(t.classList,e);else for(;e&&e[n];)t.classList.add(e[n]),n++},Z=function(t,e){var n=0;if("string"==typeof e&&(e=e.split(" ")),e=d(e),et)t.classList.remove.apply(t.classList,e);else for(;e&&e[n];)t.classList.remove(e[n]),n++}}else{var nt=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)")};$=function(t,e){return!!t.className.match(nt(e))},K=function(t,e){var n=0,i=t.className;if("string"==typeof e&&(e=e.split(" ")),""===i)i=e.join(" ");else for(;e&&e[n];)nt(e[n]).test(i)||(i+=" "+e[n]),n++;t.className=i},Z=function(t,e){var n=0,i=t.className;for("string"==typeof e&&(e=e.split(" "));e&&e[n];)i=i.replace(nt(e[n])," ").trim(),n++;t.className!==i&&(t.className=i)}}var it,rt=e.HTML_CHARACTERS=/(<(.*)>|&(.*);)/,ot=!!document.createTextNode("test").textContent},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){var e;return Array.isArray(t)?e=[]:(e={},p(t,function(t,n){"__children"!==n&&(t&&"object"===("undefined"==typeof t?"undefined":b(t))&&!Array.isArray(t)?e[n]=r(t):Array.isArray(t)?t.length&&"object"===b(t[0])&&!Array.isArray(t[0])?e[n]=[r(t[0])]:e[n]=[]:e[n]=null)})),e}function o(t,e){return e.prototype.constructor=e,t.prototype=new e,t.prototype.constructor=t,t}function a(t,e){return p(e,function(e,n){t[n]=e}),t}function s(t,e){p(e,function(n,i){e[i]&&"object"===b(e[i])?(t[i]||(Array.isArray(e[i])?t[i]=[]:"[object Date]"===Object.prototype.toString.call(e[i])?t[i]=e[i]:t[i]={}),s(t[i],e[i])):t[i]=e[i]})}function l(t){return"object"===("undefined"==typeof t?"undefined":b(t))?JSON.parse(JSON.stringify(t)):t}function u(t){var e={};return p(t,function(t,n){e[n]=t}),e}function c(t){t.MIXINS||(t.MIXINS=[]);for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return(0,w.arrayEach)(n,function(e){t.MIXINS.push(e.MIXIN_NAME),p(e,function(e,n){if(void 0!==t.prototype[n])throw new Error("Mixin conflict. Property '"+n+"' already exist and cannot be overwritten.");if("function"==typeof e)t.prototype[n]=e;else{var i=function(t,e){t="_"+t;var n=function(t){return(Array.isArray(t)||d(t))&&(t=l(t)),t};return function(){return void 0===this[t]&&(this[t]=n(e)),this[t]}},r=function(t){return t="_"+t,function(e){this[t]=e}};Object.defineProperty(t.prototype,n,{get:i(n,e),set:r(n),configurable:!0})}})}),t}function h(t,e){return JSON.stringify(t)===JSON.stringify(e)}function d(t){return"[object Object]"==Object.prototype.toString.call(t)}function f(t,e,n,i){i.value=n,i.writable=i.writable!==!1,i.enumerable=i.enumerable!==!1,i.configurable=i.configurable!==!1,Object.defineProperty(t,e,i)}function p(t,e){for(var n in t)if((!t.hasOwnProperty||t.hasOwnProperty&&Object.prototype.hasOwnProperty.call(t,n))&&e(t[n],n,t)===!1)break;return t}function g(t,e){var n=e.split("."),i=t;return p(n,function(t){if(i=i[t],void 0===i)return i=void 0,!1}),i}function m(t){if(!d(t))return 0;var e=function n(t){var e=0;return d(t)?p(t,function(t){e+=n(t)}):e++,e};return e(t)}function v(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",r="_"+n,o=(e={_touched:!1},i(e,r,t),i(e,"isTouched",function(){return this._touched}),e);return Object.defineProperty(o,n,{get:function(){return this[r]},set:function(t){this._touched=!0,this[r]=t},enumerable:!0,configurable:!0}),o}function y(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.__esModule=!0;var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.duckSchema=r,e.inherit=o,e.extend=a,e.deepExtend=s,e.deepClone=l,e.clone=u,e.mixin=c,e.isObjectEquals=h,e.isObject=d,e.defineGetter=f,e.objectEach=p,e.getProperty=g,e.deepObjectSize=m,e.createObjectPropListener=v,e.hasOwnProperty=y;var w=n(2)},function(t,e,n){"use strict";function i(t){for(var e=0,n=t.length;e<n;)t[e]=[t[e]],e++}function r(t,e){for(var n=0,i=e.length;n<i;)t.push(e[n]),n++}function o(t){var e=[];if(!t||0===t.length||!t[0]||0===t[0].length)return e;for(var n=t.length,i=t[0].length,r=0;r<n;r++)for(var o=0;o<i;o++)e[o]||(e[o]=[]),e[o][r]=t[r][o];return e}function a(t,e,n,i){var r=-1,o=t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function s(t,e){for(var n=-1,i=t.length,r=-1,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[++r]=a)}return o}function l(t,e){for(var n=-1,i=t.length,r=-1,o=[];++n<i;){var a=t[n];o[++r]=e(a,n,t)}return o}function u(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function c(t){return a(t,function(t,e){return t+e},0)}function h(t){return a(t,function(t,e){return t>e?t:e},Array.isArray(t)?t[0]:void 0)}function d(t){return a(t,function(t,e){return t<e?t:e},Array.isArray(t)?t[0]:void 0)}function f(t){return t.length?c(t)/t.length:0}function p(t){return a(t,function(t,e){return t.concat(Array.isArray(e)?p(e):e)},[])}function g(t){var e=[];return u(t,function(t){e.indexOf(t)===-1&&e.push(t)}),e}e.__esModule=!0,e.to2dArray=i,e.extendArray=r,e.pivot=o,e.arrayReduce=a,e.arrayFilter=s,e.arrayMap=l,e.arrayEach=u,e.arraySum=c,e.arrayMax=h,e.arrayMin=d,e.arrayAvg=f,e.arrayFlatten=p,e.arrayUnique=g},function(t,e,n){var i=n(13),r=n(44),o=n(32),a=n(33),s=n(29),l="prototype",u=function(t,e,n){var c,h,d,f,p=t&u.F,g=t&u.G,m=t&u.S,v=t&u.P,y=t&u.B,b=g?i:m?i[e]||(i[e]={}):(i[e]||{})[l],w=g?r:r[e]||(r[e]={}),x=w[l]||(w[l]={});g&&(n=e);for(c in n)h=!p&&b&&void 0!==b[c],d=(h?b:n)[c],f=y&&h?s(d,i):v&&"function"==typeof d?s(Function.call,d):d,b&&a(b,c,d,t&u.U),w[c]!=d&&o(w,c,f),v&&x[c]!=d&&(x[c]=d)};i.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){
var n="HOT-TABLE",i=void 0,r=void 0,o=void 0,a=void 0,c=void 0,d=void 0;if(e.isTargetWebComponent=!1,e.realTarget=e.target,d=e.stopImmediatePropagation,e.stopImmediatePropagation=function(){d.apply(this),(0,u.stopImmediatePropagation)(this)},!h.isHotTableEnv)return e;for(e=(0,s.polymerWrap)(e),c=e.path?e.path.length:0;c--;){if(e.path[c].nodeName===n)i=!0;else if(i&&e.path[c].shadowRoot){a=e.path[c];break}0!==c||a||(a=e.path[c])}return a||(a=e.target),e.isTargetWebComponent=!0,(0,l.isWebComponentSupportedNatively)()?e.realTarget=e.srcElement||e.toElement:(t instanceof Core||t instanceof Walkontable)&&(t instanceof Core?r=t.view?t.view.wt.wtTable.TABLE:null:t instanceof Walkontable&&(r=t.wtTable.TABLE.parentNode.parentNode),o=(0,s.closest)(e.target,[n],r),o?e.realTarget=r.querySelector(n)||e.target:e.realTarget=e.target),Object.defineProperty(e,"target",{get:function(){return(0,s.polymerWrap)(a)},enumerable:!0,configurable:!0}),e}function o(){return c}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.getListenersCounter=o;var s=n(0),l=n(34),u=n(7),c=0,h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(this,t),this.context=e||this,this.context.eventListeners||(this.context.eventListeners=[])}return a(t,[{key:"addEventListener",value:function(t,e,n){function i(t){t=r(a,t),n.call(this,t)}var o=this,a=this.context;return this.context.eventListeners.push({element:t,event:e,callback:n,callbackProxy:i}),window.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i),c++,function(){o.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){for(var i=this.context.eventListeners.length,r=void 0;i--;)if(r=this.context.eventListeners[i],r.event==e&&r.element==t){if(n&&n!=r.callback)continue;this.context.eventListeners.splice(i,1),r.element.removeEventListener?r.element.removeEventListener(r.event,r.callbackProxy,!1):r.element.detachEvent("on"+r.event,r.callbackProxy),c--}}},{key:"clearEvents",value:function(){if(this.context)for(var t=this.context.eventListeners.length;t--;){var e=this.context.eventListeners[t];e&&this.removeEventListener(e.element,e.event,e.callback)}}},{key:"clear",value:function(){this.clearEvents()}},{key:"destroy",value:function(){this.clearEvents(),this.context=null}},{key:"fireEvent",value:function(t,e){var n,i={bubbles:!0,cancelable:"mousemove"!==e,view:window,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};document.createEvent?(n=document.createEvent("MouseEvents"),n.initMouseEvent(e,i.bubbles,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget||document.body.parentNode)):n=document.createEventObject(),t.dispatchEvent?t.dispatchEvent(n):t.fireEvent("on"+e,n)}}]),t}();e["default"]=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){t=(0,h.toUpperCaseFirst)(t),u["default"].getSingleton().add("construct",function(){var n=void 0;d.has(this)||d.set(this,{}),n=d.get(this),n[t]||(n[t]=new e(this))}),u["default"].getSingleton().add("afterDestroy",function(){if(d.has(this)){var t=d.get(this);(0,c.objectEach)(t,function(t){return t.destroy()}),d["delete"](this)}})}function o(t,e){if("string"!=typeof e)throw Error('Only strings can be passed as "plugin" parameter');var n=(0,h.toUpperCaseFirst)(e);if(d.has(t)&&d.get(t)[n])return d.get(t)[n]}function a(t){return d.has(t)?Object.keys(d.get(t)):[]}function s(t,e){var n=null;return d.has(t)&&(0,c.objectEach)(d.get(t),function(t,i){t===e&&(n=i)}),n}e.__esModule=!0,e.getPluginName=e.getRegistredPluginNames=e.getPlugin=e.registerPlugin=void 0;var l=n(8),u=i(l),c=n(1),h=n(27),d=new WeakMap;e.registerPlugin=r,e.getPlugin=o,e.getRegistredPluginNames=a,e.getPluginName=s},function(t,e,n){"use strict";function i(t){var e="undefined"==typeof t?"undefined":s(t);return"number"==e?!isNaN(t)&&isFinite(t):"string"==e?!!t.length&&(1==t.length?/\d/.test(t):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(t)):"object"==e&&!(!t||"number"!=typeof t.valueOf()||t instanceof Date)}function r(t,e,n){var i=-1;for("function"==typeof e?(n=e,e=t):i=t-1;++i<=e&&n(i)!==!1;);}function o(t,e,n){var i=t+1;for("function"==typeof e&&(n=e,e=0);--i>=e&&n(i)!==!1;);}function a(t,e){return e=parseInt(e.toString().replace("%",""),10),e=parseInt(t*e/100,10)}e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.isNumeric=i,e.rangeEach=r,e.rangeEachReverse=o,e.valueAccordingPercent=a},function(t,e,n){"use strict";function i(t){t.isImmediatePropagationEnabled=!1,t.cancelBubble=!0}function r(t){return t.isImmediatePropagationEnabled===!1}function o(t){"function"==typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function a(t){return t.pageX?t.pageX:t.clientX+(0,c.getWindowScrollLeft)()}function s(t){return t.pageY?t.pageY:t.clientY+(0,c.getWindowScrollTop)()}function l(t){return 2===t.button}function u(t){return 0===t.button}e.__esModule=!0,e.stopImmediatePropagation=i,e.isImmediatePropagationStopped=r,e.stopPropagation=o,e.pageX=a,e.pageY=s,e.isRightClick=l,e.isLeftClick=u;var c=n(0)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2),a=n(1),s=["afterCellMetaReset","afterChange","afterChangesObserved","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseOver","afterOnCellMouseOut","afterRemoveCol","afterRemoveRow","afterRender","beforeRenderer","afterRenderer","afterScrollHorizontally","afterScrollVertically","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSetCellMeta","afterRemoveCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterUpdateSettings","afterValidate","beforeAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeRemoveCellMeta","beforeInit","beforeInitWalkontable","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseOver","beforeOnCellMouseOut","beforeRemoveCol","beforeRemoveRow","beforeRender","beforeSetRangeStart","beforeSetRangeEnd","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyCol","unmodifyCol","unmodifyRow","modifyColHeader","modifyColWidth","modifyRow","modifyRowHeader","modifyRowHeight","modifyData","modifyRowData","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeCut","afterCut","beforeCopy","afterCopy","beforePaste","afterPaste","beforeColumnMove","afterColumnMove","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","modifyColumnHeaderHeight","beforeUndo","afterUndo","beforeRedo","afterRedo","modifyRowHeaderWidth","beforeAutofillInsidePopulate","modifyTransformStart","modifyTransformEnd","afterModifyTransformStart","afterModifyTransformEnd","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","manualRowHeights","skipLengthCache","afterTrimRow","afterUntrimRow","afterDropdownMenuShow","afterDropdownMenuHide","hiddenRow","hiddenColumn","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","afterBeginEditing"],l=function(){function t(){i(this,t),this.globalBucket=this.createEmptyBucket()}return r(t,null,[{key:"getSingleton",value:function(){return u}}]),r(t,[{key:"createEmptyBucket",value:function(){var t=Object.create(null);return(0,o.arrayEach)(s,function(e){return t[e]=[]}),t}},{key:"getBucket",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?(t.pluginHookBucket||(t.pluginHookBucket=this.createEmptyBucket()),t.pluginHookBucket):this.globalBucket}},{key:"add",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(e))(0,o.arrayEach)(e,function(e){return n.add(t,e,i)});else{var r=this.getBucket(i);if("undefined"==typeof r[t]&&(this.register(t),r[t]=[]),e.skip=!1,r[t].indexOf(e)===-1){var a=!1;e.initialHook&&(0,o.arrayEach)(r[t],function(n,i){if(n.initialHook)return r[t][i]=e,a=!0,!1}),a||r[t].push(e)}}return this}},{key:"once",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Array.isArray(e)?(0,o.arrayEach)(e,function(e){return n.once(t,e,i)}):(e.runOnce=!0,this.add(t,e,i))}},{key:"remove",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.getBucket(n);return"undefined"!=typeof i[t]&&i[t].indexOf(e)>=0&&(e.skip=!0,!0)}},{key:"has",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getBucket(e);return!(void 0===n[t]||!n[t].length)}},{key:"run",value:function(t,e,n,i,r,o,a,s){var l=this.globalBucket[e],u=-1,c=l?l.length:0;if(c)for(;++u<c;)if(l[u]&&!l[u].skip){var h=l[u].call(t,n,i,r,o,a,s);void 0!==h&&(n=h),l[u]&&l[u].runOnce&&this.remove(e,l[u])}var d=this.getBucket(t)[e],f=-1,p=d?d.length:0;if(p)for(;++f<p;)if(d[f]&&!d[f].skip){var g=d[f].call(t,n,i,r,o,a,s);void 0!==g&&(n=g),d[f]&&d[f].runOnce&&this.remove(e,d[f],t)}return n}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,a.objectEach)(this.getBucket(t),function(t,e,n){return n[e].length=0})}},{key:"register",value:function(t){this.isRegistered(t)||s.push(t)}},{key:"deregister",value:function(t){this.isRegistered(t)&&s.splice(s.indexOf(t),1)}},{key:"isRegistered",value:function(t){return s.indexOf(t)>=0}},{key:"getRegistered",value:function(){return s}}]),t}(),u=new l;e["default"]=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if("function"==typeof t)return t;if(!C(t))throw Error('No registered renderer found under "'+t+'" name');return k(t)}e.__esModule=!0,e.getRegisteredRenderers=e.getRegisteredRendererNames=e.hasRenderer=e.getRenderer=e.registerRenderer=void 0;var o=n(50),a=i(o),s=n(262),l=i(s),u=n(263),c=i(u),h=n(264),d=i(h),f=n(265),p=i(f),g=n(266),m=i(g),v=n(267),y=i(v),b=n(268),w=i(b),x=(0,a["default"])("renderers"),_=x.register,k=x.getItem,C=x.hasItem,S=x.getNames,M=x.getValues;_("base",l["default"]),_("autocomplete",c["default"]),_("checkbox",d["default"]),_("html",p["default"]),_("numeric",m["default"]),_("password",y["default"]),_("text",w["default"]),e.registerRenderer=_,e.getRenderer=r,e.hasRenderer=C,e.getRegisteredRendererNames=S,e.getRegisteredRenderers=M},function(t,e,n){var i=n(83)("wks"),r=n(49),o=n(13).Symbol,a="function"==typeof o,s=t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))};s.store=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.Viewport=e.TableRenderer=e.Table=e.Settings=e.Selection=e.Scroll=e.Overlays=e.Event=e.Core=e["default"]=e.Border=e.TopLeftCornerOverlay=e.TopOverlay=e.LeftOverlay=e.DebugOverlay=e.RowFilter=e.ColumnFilter=e.CellRange=e.CellCoords=e.ViewportRowsCalculator=e.ViewportColumnsCalculator=void 0,n(97),n(114),n(123),n(124),n(108),n(122),n(105),n(106),n(107),n(96),n(119),n(117),n(115),n(120),n(121),n(116),n(118),n(109),n(110),n(111),n(113),n(112),n(94),n(95),n(90),n(93),n(92),n(91),n(67),n(99),n(100),n(102),n(101),n(98),n(104),n(103),n(125),n(128),n(126),n(127),n(130),n(129),n(132),n(131);var r=n(136),o=i(r),a=n(137),s=i(a),l=n(42),u=i(l),c=n(68),h=i(c),d=n(140),f=i(d),p=n(141),g=i(p),m=n(184),v=i(m),y=n(185),b=i(y),w=n(186),x=i(w),_=n(187),k=i(_),C=n(135),S=i(C),M=n(138),T=i(M),E=n(139),O=i(E),A=n(142),D=i(A),R=n(143),P=i(R),N=n(188),z=i(N),L=n(144),I=i(L),H=n(145),j=i(H),F=n(146),B=i(F),W=n(147),Y=i(W);e.ViewportColumnsCalculator=o["default"],e.ViewportRowsCalculator=s["default"],e.CellCoords=u["default"],e.CellRange=h["default"],e.ColumnFilter=f["default"],e.RowFilter=g["default"],e.DebugOverlay=v["default"],e.LeftOverlay=b["default"],e.TopOverlay=x["default"],e.TopLeftCornerOverlay=k["default"],e.Border=S["default"],e["default"]=T["default"],e.Core=T["default"],e.Event=O["default"],e.Overlays=D["default"],e.Scroll=P["default"],e.Selection=z["default"],e.Settings=I["default"],e.Table=j["default"],e.TableRenderer=B["default"],e.Viewport=Y["default"]},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),a=n(2),s=n(153),l=n(5),u=new WeakMap,c=null,h=function(){function t(e){var n=this;i(this,t),(0,o.defineGetter)(this,"hot",e,{writable:!1}),(0,o.defineGetter)(this,"t",(0,s.getTranslator)(e),{writable:!1}),u.set(this,{hooks:{}}),c=null,this.pluginName=null,this.pluginsInitializedCallbacks=[],this.isPluginsReady=!1,this.enabled=!1,this.initialized=!1,this.hot.addHook("afterPluginsInitialized",function(){return n.onAfterPluginsInitialized()}),this.hot.addHook("afterUpdateSettings",function(){return n.onUpdateSettings()}),this.hot.addHook("beforeInit",function(){return n.init()})}return r(t,[{key:"init",value:function(){this.pluginName=(0,l.getPluginName)(this.hot,this),this.isEnabled&&this.isEnabled()&&this.enablePlugin(),c||(c=(0,l.getRegistredPluginNames)(this.hot)),c.indexOf(this.pluginName)>=0&&c.splice(c.indexOf(this.pluginName),1),c.length||this.hot.runHooks("afterPluginsInitialized"),this.initialized=!0}},{key:"enablePlugin",value:function(){this.enabled=!0}},{key:"disablePlugin",value:function(){this.eventManager&&this.eventManager.clear(),this.clearHooks(),this.enabled=!1}},{key:"addHook",value:function(t,e){u.get(this).hooks[t]=u.get(this).hooks[t]||[];var n=u.get(this).hooks[t];this.hot.addHook(t,e),n.push(e),u.get(this).hooks[t]=n}},{key:"removeHooks",value:function(t){var e=this;(0,a.arrayEach)(u.get(this).hooks[t]||[],function(n){e.hot.removeHook(t,n)})}},{key:"clearHooks",value:function(){var t=this,e=u.get(this).hooks;(0,o.objectEach)(e,function(e,n){return t.removeHooks(n)}),e.length=0}},{key:"callOnPluginsReady",value:function(t){this.isPluginsReady?t():this.pluginsInitializedCallbacks.push(t)}},{key:"onAfterPluginsInitialized",value:function(){(0,a.arrayEach)(this.pluginsInitializedCallbacks,function(t){return t()}),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}},{key:"onUpdateSettings",value:function(){this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&this.updatePlugin())}},{key:"updatePlugin",value:function(){}},{key:"destroy",value:function(){var t=this;this.eventManager&&this.eventManager.destroy(),this.clearHooks(),(0,o.objectEach)(this,function(e,n){"hot"!==n&&"t"!==n&&(t[n]=null)}),delete this.t,delete this.hot}}]),t}();e["default"]=h},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e={},n=t;this.getConstructor=function(){return t},this.getInstance=function(t){return t.guid in e||(e[t.guid]=new n(t)),e[t.guid]},h["default"].getSingleton().add("afterDestroy",function(){e={}})}function o(t,e){var n=void 0;if("function"==typeof t)N.get(t)||s(null,t),n=N.get(t);else{if("string"!=typeof t)throw Error('Only strings and functions can be passed as "editor" parameter');n=I(t)}if(!n)throw Error('No editor registered under name "'+t+'"');return n.getInstance(e)}function a(t){if(!H(t))throw Error('No registered editor found under "'+t+'" name');return I(t).getConstructor()}function s(t,e){var n=new r(e);"string"==typeof t&&L(t,n),N.set(e,n)}e.__esModule=!0,e.getRegisteredEditors=e.getRegisteredEditorNames=e.hasEditor=e.getEditorInstance=e.getEditor=e.registerEditor=void 0,e.RegisteredEditor=r,e._getEditorInstance=o;var l=n(50),u=i(l),c=n(8),h=i(c),d=n(36),f=i(d),p=n(148),g=i(p),m=n(201),v=i(m),y=n(202),b=i(y),w=n(203),x=i(w),_=n(149),k=i(_),C=n(204),S=i(C),M=n(205),T=i(M),E=n(206),O=i(E),A=n(207),D=i(A),R=n(43),P=i(R),N=new WeakMap,z=(0,u["default"])("editors"),L=z.register,I=z.getItem,H=z.hasItem,j=z.getNames,F=z.getValues;s("base",f["default"]),s("autocomplete",g["default"]),s("checkbox",v["default"]),s("date",b["default"]),s("dropdown",x["default"]),s("handsontable",k["default"]),s("mobile",S["default"]),s("numeric",T["default"]),s("password",O["default"]),s("select",D["default"]),s("text",P["default"]),e.registerEditor=s,e.getEditor=a,e.getEditorInstance=o,e.hasEditor=H,e.getRegisteredEditorNames=j,e.getRegisteredEditors=F},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";function i(t){return 32==t||t>=48&&t<=57||t>=96&&t<=111||t>=186&&t<=192||t>=219&&t<=222||t>=226||t>=65&&t<=90}function r(t){var e=[l.ARROW_DOWN,l.ARROW_UP,l.ARROW_LEFT,l.ARROW_RIGHT,l.HOME,l.END,l.DELETE,l.BACKSPACE,l.F1,l.F2,l.F3,l.F4,l.F5,l.F6,l.F7,l.F8,l.F9,l.F10,l.F11,l.F12,l.TAB,l.PAGE_DOWN,l.PAGE_UP,l.ENTER,l.ESCAPE,l.SHIFT,l.CAPS_LOCK,l.ALT];return e.indexOf(t)!==-1}function o(t){return[l.CONTROL_LEFT,224,l.COMMAND_LEFT,l.COMMAND_RIGHT].indexOf(t)!==-1}function a(t,e){var n=e.split("|"),i=!1;return(0,s.arrayEach)(n,function(e){if(t===l[e])return i=!0,!1}),i}e.__esModule=!0,e.KEY_CODES=void 0,e.isPrintableChar=i,e.isMetaKey=r,e.isCtrlKey=o,e.isKey=a;var s=n(2),l=e.KEY_CODES={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL_LEFT:91,COMMAND_LEFT:17,COMMAND_RIGHT:93,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86}},function(t,e,n){"use strict";function i(t){return{start:t.getTopLeftCorner(),end:t.getBottomRightCorner()}}function r(t){return(0,_.hasClass)(t,"htSeparator")}function o(t){return(0,_.hasClass)(t,"htSubmenu")}function a(t){return(0,_.hasClass)(t,"htDisabled")}function s(t){return(0,_.hasClass)(t,"htSelectionDisabled")}function l(t){var e=t.getSelected();return e?e[0]<0?null:e:null}function u(t,e){return t.indexOf(e)!=-1?t:(t=t.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ",""),t+=" "+e)}function c(t,e){return t.indexOf(e)!=-1?t:(t=t.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ",""),t+=" "+e)}function h(t,e){for(var n={},i=t.from.row;i<=t.to.row;i++)for(var r=t.from.col;r<=t.to.col;r++)n[i]||(n[i]=[]),n[i][r]=e(i,r);return n}function d(t,e,n,i,r){if(t.from.row==t.to.row&&t.from.col==t.to.col)f(t.from.row,t.from.col,e,n,i,r);else for(var o=t.from.row;o<=t.to.row;o++)for(var a=t.from.col;a<=t.to.col;a++)f(o,a,e,n,i,r)}function f(t,e,n,i,r,o){var a=r(t,e),s=i;a.className&&(s="vertical"===n?u(a.className,i):c(a.className,i)),o(t,e,"className",s)}function p(t,e){var n=!1;return t&&t.forAll(function(t,i){if(e(t,i))return n=!0,!1}),n}function g(t){return'<span class="selected">'+String.fromCharCode(10003)+"</span>"+t}function m(t,e){return!t.hidden||!("function"==typeof t.hidden&&t.hidden.call(e))}function v(t,e){for(var n=t.slice(0),i=0;i<n.length&&n[i].name===e;)n.shift();return n}function y(t,e){var n=t.slice(0);return n.reverse(),n=v(n,e),n.reverse(),n}function b(t){var e=[];return(0,x.arrayEach)(t,function(t,n){n>0?e[e.length-1].name!==t.name&&e.push(t):e.push(t)}),e}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.KEY,n=t.slice(0);return n=v(n,e),n=y(n,e),n=b(n)}e.__esModule=!0,e.normalizeSelection=i,e.isSeparator=r,e.hasSubMenu=o,e.isDisabled=a,e.isSelectionDisabled=s,e.getValidSelection=l,e.prepareVerticalAlignClass=u,e.prepareHorizontalAlignClass=c,e.getAlignmentClasses=h,e.align=d,e.checkSelectionConsistency=p,e.markLabelAsSelected=g,e.isItemHidden=m,e.filterSeparators=w;var x=n(2),_=n(0),k=n(71)},function(t,e,n){var i=n(15);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(18),r=n(160),o=n(86),a=Object.defineProperty;e.f=n(21)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";function i(t){var e=void 0;switch("undefined"==typeof t?"undefined":l(t)){case"string":case"number":e=""+t;break;case"object":e=null===t?"":t.toString();break;case"undefined":e="";break;default:e=t.toString()}return e}function r(t){return"undefined"!=typeof t}function o(t){return"undefined"==typeof t}function a(t){return null===t||""===t||o(t)}function s(t){return"[object RegExp]"===Object.prototype.toString.call(t)}e.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.stringify=i,e.isDefined=r,e.isUndefined=o,e.isEmpty=a,e.isRegExp=s},function(t,e,n){t.exports=!n(31)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(77),r=n(30);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(60),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){"use strict";function i(){return l}function r(){return u}function o(){return c}function a(){return h}function s(t){return t||(t=navigator.userAgent),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)}e.__esModule=!0,e.isIE8=i,e.isIE9=r,e.isSafari=o,e.isChrome=a,e.isMobileBrowser=s;var l=!document.createTextNode("test").textContent,u=!!document.documentMode,c=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),h=/Chrome/.test(navigator.userAgent)&&/Google/.test(navigator.vendor)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if("function"==typeof t)return t;if(!y(t))throw Error('No registered validator found under "'+t+'" name');return v(t)}e.__esModule=!0,e.getRegisteredValidators=e.getRegisteredValidatorNames=e.hasValidator=e.getValidator=e.registerValidator=void 0;var o=n(50),a=i(o),s=n(273),l=i(s),u=n(274),c=i(u),h=n(275),d=i(h),f=n(276),p=i(f),g=(0,a["default"])("validators"),m=g.register,v=g.getItem,y=g.hasItem,b=g.getNames,w=g.getValues;m("autocomplete",l["default"]),m("date",c["default"]),m("numeric",d["default"]),m("time",p["default"]),e.registerValidator=m,e.getValidator=r,e.hasValidator=y,e.getRegisteredValidatorNames=b,e.getRegisteredValidators=w},function(t,e,n){"use strict";function i(t){return t[0].toUpperCase()+t.substr(1)}function r(){for(var t=[],e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=n.length;r--;){var o=(0,u.stringify)(n[r]).toLowerCase();t.indexOf(o)===-1&&t.push(o)}return 1===t.length}function o(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+t()+t()}function a(t){return/^([0-9][0-9]?%$)|(^100%$)/.test(t)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(""+t).replace(/(?:\\)?\[([^[\]]+)]/g,function(t,n){return"\\"===t.charAt(0)?t.substr(1,t.length-1):void 0===e[n]?"":e[n]})}function l(t){return t+="",t.replace(c,"")}e.__esModule=!0,e.toUpperCaseFirst=i,e.equalsIgnoreCase=r,e.randomString=o,e.isPercentValue=a,e.substitute=s,e.stripTags=l;var u=n(20),c=(n(6),/<\/?\w+\/?>|<\w+[\s|\/][^>]*>/gi)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=n(1),l=n(2),u=n(4),c=i(u),h=n(138),d=i(h),f={},p=function(){function t(e){r(this,t),(0,s.defineGetter)(this,"wot",e,{writable:!1}),this.instance=this.wot,this.type="",this.mainTableScrollableElement=null,this.TABLE=this.wot.wtTable.TABLE,this.hider=this.wot.wtTable.hider,this.spreader=this.wot.wtTable.spreader,this.holder=this.wot.wtTable.holder,this.wtRootElement=this.wot.wtTable.wtRootElement,this.trimmingContainer=(0,a.getTrimmingContainer)(this.hider.parentNode.parentNode),this.areElementSizesAdjusted=!1,this.updateStateOfRendering()}return o(t,null,[{key:"registerOverlay",value:function(e,n){if(t.CLONE_TYPES.indexOf(e)===-1)throw new Error("Unsupported overlay ("+e+").");f[e]=n}},{key:"createOverlay",value:function(t,e){return new f[t](e)}},{key:"hasOverlay",value:function(t){return void 0!==f[t]}},{key:"isOverlayTypeOf",value:function(t,e){return!(!t||!f[e])&&t instanceof f[e]}},{key:"CLONE_TOP",get:function(){return"top"}},{key:"CLONE_BOTTOM",get:function(){return"bottom"}},{key:"CLONE_LEFT",get:function(){return"left"}},{key:"CLONE_TOP_LEFT_CORNER",get:function(){return"top_left_corner"}},{key:"CLONE_BOTTOM_LEFT_CORNER",get:function(){return"bottom_left_corner"}},{key:"CLONE_DEBUG",get:function(){return"debug"}},{key:"CLONE_TYPES",get:function(){return[t.CLONE_TOP,t.CLONE_BOTTOM,t.CLONE_LEFT,t.CLONE_TOP_LEFT_CORNER,t.CLONE_BOTTOM_LEFT_CORNER,t.CLONE_DEBUG]}}]),o(t,[{key:"updateStateOfRendering",value:function(){var t=this.needFullRender;this.needFullRender=this.shouldBeRendered();var e=t!==this.needFullRender;return e&&!this.needFullRender&&this.reset(),e}},{key:"shouldBeRendered",value:function(){return!0}},{key:"updateTrimmingContainer",value:function(){this.trimmingContainer=(0,a.getTrimmingContainer)(this.hider.parentNode.parentNode)}},{key:"updateMainScrollableElement",value:function(){this.mainTableScrollableElement=(0,a.getScrollableElement)(this.wot.wtTable.TABLE)}},{key:"makeClone",value:function(e){if(t.CLONE_TYPES.indexOf(e)===-1)throw new Error('Clone type "'+e+'" is not supported.');var n=document.createElement("DIV"),i=document.createElement("TABLE");n.className="ht_clone_"+e+" handsontable",n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.overflow="hidden",i.className=this.wot.wtTable.TABLE.className,n.appendChild(i),this.type=e,this.wot.wtTable.wtRootElement.parentNode.appendChild(n);var r=this.wot.getSetting("preventOverflow");return r===!0||"horizontal"===r&&this.type===t.CLONE_TOP||"vertical"===r&&this.type===t.CLONE_LEFT?this.mainTableScrollableElement=window:this.mainTableScrollableElement=(0,a.getScrollableElement)(this.wot.wtTable.TABLE),new d["default"]({cloneSource:this.wot,cloneOverlay:this,table:i})}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.shouldBeRendered();this.clone&&(this.needFullRender||e)&&this.clone.draw(t),this.needFullRender=e}},{key:"reset",value:function(){if(this.clone){var t=this.clone.wtTable.holder,e=this.clone.wtTable.hider,n=t.style,i=e.style,r=t.parentNode.style;(0,l.arrayEach)([n,i,r],function(t){t.width="",t.height=""})}}},{key:"destroy",value:function(){new c["default"](this.clone).destroy()}}]),t}();e["default"]=p},function(t,e,n){var i=n(72);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var i=n(19),r=n(40);t.exports=n(21)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(13),r=n(32),o=n(22),a=n(49)("src"),s="toString",l=Function[s],u=(""+l).split(s);n(44).inspectSource=function(t){return l.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(l&&(o(n,a)||r(n,a,t[e]?""+t[e]:u.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||l.call(this)})},function(t,e,n){"use strict";function i(t){return f.call(window,t)}function r(t){p.call(window,t)}function o(){return"ontouchstart"in window}function a(){var t=document.createElement("div");return!(!t.createShadowRoot||!t.createShadowRoot.toString().match(/\[native code\]/))}function s(){var t=document.createElement("TABLE");t.style.borderSpacing=0,t.style.borderWidth=0,t.style.padding=0;var e=document.createElement("TBODY");t.appendChild(e),e.appendChild(document.createElement("TR")),e.firstChild.appendChild(document.createElement("TD")),e.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var n=document.createElement("CAPTION");n.innerHTML="c<br>c<br>c<br>c",n.style.padding=0,n.style.margin=0,t.insertBefore(n,e),document.body.appendChild(t),m=t.offsetHeight<2*t.lastChild.offsetHeight,document.body.removeChild(t)}function l(){return void 0===m&&s(),m}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v?v:v="object"===("undefined"==typeof Intl?"undefined":c(Intl))?new Intl.Collator(t,e).compare:"function"==typeof String.prototype.localeCompare?function(t,e){return(""+t).localeCompare(e)}:function(t,e){return t===e?0:t>e?-1:1}}e.__esModule=!0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.requestAnimationFrame=i,e.cancelAnimationFrame=r,e.isTouchSupported=o,e.isWebComponentSupportedNatively=a,e.hasCaptionProblem=l,e.getComparisonFunction=u;for(var h=0,d=["ms","moz","webkit","o"],f=window.requestAnimationFrame,p=window.cancelAnimationFrame,g=0;g<d.length&&!f;++g)f=window[d[g]+"RequestAnimationFrame"],p=window[d[g]+"CancelAnimationFrame"]||window[d[g]+"CancelRequestAnimationFrame"];f||(f=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-h)),i=window.setTimeout(function(){t(e+n)},n);return h=e+n,i}),p||(p=function(t){clearTimeout(t)});var m,v=void 0},function(t,e,n){"use strict";function i(t){return"function"==typeof t}function r(t){function e(){var e=this,a=arguments,s=Date.now(),l=!1;r.lastCallThrottled=!0,i||(i=s,l=!0);
var u=n-(s-i);return l?(r.lastCallThrottled=!1,t.apply(this,a)):(o&&clearTimeout(o),o=setTimeout(function(){r.lastCallThrottled=!1,t.apply(e,a),i=0,o=void 0},u)),r}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=0,r={lastCallThrottled:!0},o=null;return e}function o(t){function e(){s=o}function n(){return s?(s--,t.apply(this,arguments)):a.apply(this,arguments)}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=r(t,i),s=o;return n.clearHits=e,n}function a(t){function e(){var e=this,o=arguments;return i&&clearTimeout(i),i=setTimeout(function(){r=t.apply(e,o)},n),r}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=null,r=void 0;return e}function s(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[0],r=e.slice(1);return function(){return(0,h.arrayReduce)(r,function(t,e){return e(t)},i.apply(this,arguments))}}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return t.apply(this,n.concat(i))}}function u(t){function e(i){return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i.concat(o),l=void 0;return l=s.length>=n?t.apply(this,s):e(s)}}var n=t.length;return e([])}function c(t){function e(i){return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i.concat(o.reverse()),l=void 0;return l=s.length>=n?t.apply(this,s):e(s)}}var n=t.length;return e([])}e.__esModule=!0,e.isFunction=i,e.throttle=r,e.throttleAfterHits=o,e.debounce=a,e.pipe=s,e.partial=l,e.curry=u,e.curryRight=c;var h=n(2)},function(t,e,n){"use strict";function i(t){this.instance=t,this.state=a.VIRGIN,this._opened=!1,this._fullEditMode=!1,this._closeCallback=null,this.init()}e.__esModule=!0,e.EditorState=void 0;var r=n(11),o=n(20),a=e.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"};i.prototype._fireCallbacks=function(t){this._closeCallback&&(this._closeCallback(t),this._closeCallback=null)},i.prototype.init=function(){},i.prototype.getValue=function(){throw Error("Editor getValue() method unimplemented")},i.prototype.setValue=function(t){throw Error("Editor setValue() method unimplemented")},i.prototype.open=function(){throw Error("Editor open() method unimplemented")},i.prototype.close=function(){throw Error("Editor close() method unimplemented")},i.prototype.prepare=function(t,e,n,i,r,o){this.TD=i,this.row=t,this.col=e,this.prop=n,this.originalValue=r,this.cellProperties=o,this.state=a.VIRGIN},i.prototype.extend=function(){function t(){n.apply(this,arguments)}function e(t,e){function n(){}return n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t}var n=this.constructor;return e(t,n)},i.prototype.saveValue=function(t,e){var n=void 0,i=void 0;e?(n=this.instance.getSelected(),n[0]>n[2]&&(i=n[0],n[0]=n[2],n[2]=i),n[1]>n[3]&&(i=n[1],n[1]=n[3],n[3]=i)):n=[this.row,this.col,null,null],this.instance.populateFromArray(n[0],n[1],t,n[2],n[3],"edit")},i.prototype.beginEditing=function(t,e){this.state==a.VIRGIN&&(this.instance.view.scrollViewport(new r.CellCoords(this.row,this.col)),this.instance.view.render(),this.state=a.EDITING,t="string"==typeof t?t:this.originalValue,this.setValue((0,o.stringify)(t)),this.open(e),this._opened=!0,this.focus(),this.instance.view.render(),this.instance.runHooks("afterBeginEditing",this.row,this.col))},i.prototype.finishEditing=function(t,e,n){var i,r=this;if(n){var o=this._closeCallback;this._closeCallback=function(t){o&&o(t),n(t),r.instance.view.render()}}if(!this.isWaiting()){if(this.state==a.VIRGIN)return void this.instance._registerTimeout(setTimeout(function(){r._fireCallbacks(!0)},0));if(this.state==a.EDITING){if(t)return this.cancelChanges(),void this.instance.view.render();var s=this.getValue();i=this.instance.getSettings().trimWhitespace?[["string"==typeof s?String.prototype.trim.call(s||""):s]]:[[s]],this.state=a.WAITING,this.saveValue(i,e),this.instance.getCellValidator(this.cellProperties)?this.instance.addHookOnce("postAfterValidate",function(t){r.state=a.FINISHED,r.discardEditor(t)}):(this.state=a.FINISHED,this.discardEditor(!0))}}},i.prototype.cancelChanges=function(){this.state=a.FINISHED,this.discardEditor()},i.prototype.discardEditor=function(t){this.state===a.FINISHED&&(t===!1&&this.cellProperties.allowInvalid!==!0?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=a.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=a.VIRGIN,this._fireCallbacks(!0)))},i.prototype.enableFullEditMode=function(){this._fullEditMode=!0},i.prototype.isInFullEditMode=function(){return this._fullEditMode},i.prototype.isOpened=function(){return this._opened},i.prototype.isWaiting=function(){return this.state===a.WAITING},i.prototype.checkEditorSection=function(){var t=this.instance.countRows(),e="";return this.row<this.instance.getSettings().fixedRowsTop?e=this.col<this.instance.getSettings().fixedColumnsLeft?"top-left-corner":"top":this.instance.getSettings().fixedRowsBottom&&this.row>=t-this.instance.getSettings().fixedRowsBottom?e=this.col<this.instance.getSettings().fixedColumnsLeft?"bottom-left-corner":"bottom":this.col<this.instance.getSettings().fixedColumnsLeft&&(e="left"),e},e["default"]=i},function(t,e,n){var i=n(10)("unscopables"),r=Array.prototype;void 0==r[i]&&n(32)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(169),r=n(75);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(30);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n){i(this,t),"undefined"!=typeof e&&"undefined"!=typeof n?(this.row=e,this.col=n):(this.row=null,this.col=null)}return r(t,[{key:"isValid",value:function(t){return!(this.row<0||this.col<0)&&!(this.row>=t.getSetting("totalRows")||this.col>=t.getSetting("totalColumns"))}},{key:"isEqual",value:function(t){return t===this||this.row===t.row&&this.col===t.col}},{key:"isSouthEastOf",value:function(t){return this.row>=t.row&&this.col>=t.col}},{key:"isNorthWestOf",value:function(t){return this.row<=t.row&&this.col<=t.col}},{key:"isSouthWestOf",value:function(t){return this.row>=t.row&&this.col<=t.col}},{key:"isNorthEastOf",value:function(t){return this.row<=t.row&&this.col>=t.col}}]),t}();e["default"]=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(0),o=n(183),a=i(o),s=n(36),l=i(s),u=n(4),c=i(u),h=n(16),d=n(7),f=l["default"].prototype.extend();f.prototype.init=function(){var t=this;this.createElements(),this.eventManager=new c["default"](this),this.bindEvents(),this.autoResize=(0,a["default"])(),this.instance.addHook("afterDestroy",function(){t.destroy()})},f.prototype.getValue=function(){return this.TEXTAREA.value},f.prototype.setValue=function(t){this.TEXTAREA.value=t};var p=function(t){var e,n=this,i=n.getActiveEditor();if(e=(t.ctrlKey||t.metaKey)&&!t.altKey,t.target===i.TEXTAREA&&!(0,d.isImmediatePropagationStopped)(t)){if(17===t.keyCode||224===t.keyCode||91===t.keyCode||93===t.keyCode)return void(0,d.stopImmediatePropagation)(t);switch(t.keyCode){case h.KEY_CODES.ARROW_RIGHT:i.isInFullEditMode()&&(!i.isWaiting()&&!i.allowKeyEventPropagation||!i.isWaiting()&&i.allowKeyEventPropagation&&!i.allowKeyEventPropagation(t.keyCode))&&(0,d.stopImmediatePropagation)(t);break;case h.KEY_CODES.ARROW_LEFT:i.isInFullEditMode()&&(!i.isWaiting()&&!i.allowKeyEventPropagation||!i.isWaiting()&&i.allowKeyEventPropagation&&!i.allowKeyEventPropagation(t.keyCode))&&(0,d.stopImmediatePropagation)(t);break;case h.KEY_CODES.ARROW_UP:case h.KEY_CODES.ARROW_DOWN:i.isInFullEditMode()&&(!i.isWaiting()&&!i.allowKeyEventPropagation||!i.isWaiting()&&i.allowKeyEventPropagation&&!i.allowKeyEventPropagation(t.keyCode))&&(0,d.stopImmediatePropagation)(t);break;case h.KEY_CODES.ENTER:var o=i.instance.getSelected(),a=!(o[0]===o[2]&&o[1]===o[3]);if(e&&!a||t.altKey){if(i.isOpened()){var s=(0,r.getCaretPosition)(i.TEXTAREA),l=i.getValue(),u=l.slice(0,s)+"\n"+l.slice(s);i.setValue(u),(0,r.setCaretPosition)(i.TEXTAREA,s+1)}else i.beginEditing(i.originalValue+"\n");(0,d.stopImmediatePropagation)(t)}t.preventDefault();break;case h.KEY_CODES.A:case h.KEY_CODES.X:case h.KEY_CODES.C:case h.KEY_CODES.V:e&&(0,d.stopImmediatePropagation)(t);break;case h.KEY_CODES.BACKSPACE:case h.KEY_CODES.DELETE:case h.KEY_CODES.HOME:case h.KEY_CODES.END:(0,d.stopImmediatePropagation)(t)}[h.KEY_CODES.ARROW_UP,h.KEY_CODES.ARROW_RIGHT,h.KEY_CODES.ARROW_DOWN,h.KEY_CODES.ARROW_LEFT].indexOf(t.keyCode)===-1&&i.autoResize.resize(String.fromCharCode(t.keyCode))}};f.prototype.open=function(){this.refreshDimensions(),this.instance.addHook("beforeKeyDown",p)},f.prototype.close=function(t){this.textareaParentStyle.display="none",this.autoResize.unObserve(),document.activeElement===this.TEXTAREA&&this.instance.listen(),this.instance.removeHook("beforeKeyDown",p)},f.prototype.focus=function(){this.TEXTAREA.focus(),(0,r.setCaretPosition)(this.TEXTAREA,this.TEXTAREA.value.length)},f.prototype.createElements=function(){this.TEXTAREA=document.createElement("TEXTAREA"),(0,r.addClass)(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),(0,r.addClass)(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement.appendChild(this.TEXTAREA_PARENT);var t=this;this.instance._registerTimeout(setTimeout(function(){t.refreshDimensions()},0))},f.prototype.getEditedCell=function(){var t,e=this.checkEditorSection();switch(e){case"top":t=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=101;break;case"top-left-corner":t=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"bottom-left-corner":t=this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"left":t=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;case"bottom":t=this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;default:t=this.instance.getCell(this.row,this.col),this.textareaParentStyle.zIndex=""}return t!=-1&&t!=-2?t:void 0},f.prototype.refreshValue=function(){var t=this.instance.getSourceDataAtCell(this.row,this.prop);this.originalValue=t,this.setValue(t),this.refreshDimensions()},f.prototype.refreshDimensions=function(){if(this.state===s.EditorState.EDITING){if(this.TD=this.getEditedCell(),!this.TD)return void this.close(!0);var t,e=(0,r.offset)(this.TD),n=(0,r.offset)(this.instance.rootElement),i=(0,r.getScrollableElement)(this.TD),o=this.instance.countRows(),a=e.top===n.top?0:1,l=e.top-n.top-a-(i.scrollTop||0),u=e.left-n.left-1-(i.scrollLeft||0),c=this.instance.getSettings(),h=(this.instance.hasRowHeaders(),this.instance.hasColHeaders()),d=this.checkEditorSection(),f=this.TD.style.backgroundColor;switch(d){case"top":t=(0,r.getCssTransform)(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case"left":t=(0,r.getCssTransform)(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case"top-left-corner":t=(0,r.getCssTransform)(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom-left-corner":t=(0,r.getCssTransform)(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom":t=(0,r.getCssTransform)(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode)}(h&&0===this.instance.getSelected()[0]||c.fixedRowsBottom&&this.instance.getSelected()[0]===o-c.fixedRowsBottom)&&(l+=1),0===this.instance.getSelected()[1]&&(u+=1),t&&t!=-1?this.textareaParentStyle[t[0]]=t[1]:(0,r.resetCssTransform)(this.TEXTAREA_PARENT),this.textareaParentStyle.top=l+"px",this.textareaParentStyle.left=u+"px";var p=this.instance.view.wt.wtViewport.rowsRenderCalculator.startPosition,g=this.instance.view.wt.wtViewport.columnsRenderCalculator.startPosition,m=this.instance.view.wt.wtOverlays.leftOverlay.getScrollPosition(),v=this.instance.view.wt.wtOverlays.topOverlay.getScrollPosition(),y=(0,r.getScrollbarWidth)(),b=this.TD.offsetTop+p-v,w=this.TD.offsetLeft+g-m,x=(0,r.innerWidth)(this.TD)-8,_=(0,r.hasVerticalScrollbar)(i)?y:0,k=(0,r.hasHorizontalScrollbar)(i)?y:0,C=this.instance.view.maximumVisibleElementWidth(w)-9-_,S=this.TD.scrollHeight+1,M=Math.max(this.instance.view.maximumVisibleElementHeight(b)-k,23),T=(0,r.getComputedStyle)(this.TD);this.TEXTAREA.style.fontSize=T.fontSize,this.TEXTAREA.style.fontFamily=T.fontFamily,this.TEXTAREA.style.backgroundColor="",this.TEXTAREA.style.backgroundColor=f?f:(0,r.getComputedStyle)(this.TEXTAREA).backgroundColor,this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(S,M),maxHeight:M,minWidth:Math.min(x,C),maxWidth:C},!0),this.textareaParentStyle.display="block"}},f.prototype.bindEvents=function(){var t=this;this.eventManager.addEventListener(this.TEXTAREA,"cut",function(t){(0,d.stopPropagation)(t)}),this.eventManager.addEventListener(this.TEXTAREA,"paste",function(t){(0,d.stopPropagation)(t)}),this.instance.addHook("afterScrollHorizontally",function(){t.refreshDimensions()}),this.instance.addHook("afterScrollVertically",function(){t.refreshDimensions()}),this.instance.addHook("afterColumnResize",function(){t.refreshDimensions(),t.focus()}),this.instance.addHook("afterRowResize",function(){t.refreshDimensions(),t.focus()}),this.instance.addHook("afterDestroy",function(){t.eventManager.destroy()})},f.prototype.destroy=function(){this.eventManager.destroy()},e["default"]=f},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports={}},function(t,e,n){var i=n(49)("meta"),r=n(15),o=n(22),a=n(19).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(31)(function(){return l(Object.preventExtensions({}))}),c=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[i].i},d=function(t,e){if(!o(t,i)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[i].w},f=function(t){return u&&p.NEED&&l(t)&&!o(t,i)&&c(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:d,onFreeze:f}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(19).f,r=n(22),o=n(10)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(){function t(t,e){l.set(t,e)}function e(t){return l.get(t)}function n(t){return l.has(t)}function r(){return[].concat(i(l.keys()))}function a(){return[].concat(i(l.values()))}var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"common";o.has(s)||o.set(s,new Map);var l=o.get(s);return{register:t,getItem:e,hasItem:n,getNames:r,getValues:a}}e.__esModule=!0,e["default"]=r;var o=e.collection=new Map},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(29),r=n(77),o=n(41),a=n(24),s=n(280);t.exports=function(t,e){var n=1==t,l=2==t,u=3==t,c=4==t,h=6==t,d=5==t||h,f=e||s;return function(e,s,p){for(var g,m,v=o(e),y=r(v),b=i(s,p,3),w=a(y.length),x=0,_=n?f(e,w):l?f(e,0):void 0;w>x;x++)if((d||x in y)&&(g=y[x],m=b(g,x,v),t))if(n)_[x]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:_.push(g)}else if(c)return!1;return h?-1:u||c?c:_}}},function(t,e,n){"use strict";var i=n(13),r=n(3),o=n(33),a=n(58),s=n(46),l=n(55),u=n(51),c=n(15),h=n(31),d=n(78),f=n(48),p=n(283);t.exports=function(t,e,n,g,m,v){var y=i[t],b=y,w=m?"set":"add",x=b&&b.prototype,_={},k=function(t){var e=x[t];o(x,t,"delete"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(v||x.forEach&&!h(function(){(new b).entries().next()}))){var C=new b,S=C[w](v?{}:-0,1)!=C,M=h(function(){C.has(1)}),T=d(function(t){new b(t)}),E=!v&&h(function(){for(var t=new b,e=5;e--;)t[w](e,e);return!t.has(-0)});T||(b=e(function(e,n){u(e,b,t);var i=p(new y,e,b);return void 0!=n&&l(n,m,i[w],i),i}),b.prototype=x,x.constructor=b),(M||E)&&(k("delete"),k("has"),m&&k("get")),(E||S)&&k(w),v&&x.clear&&delete x.clear}else b=g.getConstructor(e,t,m,w),a(b.prototype,n),s.NEED=!0;return f(b,t),_[t]=b,r(r.G+r.W+r.F*(b!=y),_),v||g.setStrong(b,t,m),b}},function(t,e,n){"use strict";var i=n(32),r=n(33),o=n(31),a=n(30),s=n(10);t.exports=function(t,e,n){var l=s(t),u=n(a,l,""[t]),c=u[0],h=u[1];o(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,c),i(RegExp.prototype,l,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,n){var i=n(29),r=n(165),o=n(161),a=n(18),s=n(24),l=n(176),u={},c={},e=t.exports=function(t,e,n,h,d){var f,p,g,m,v=d?function(){return t}:l(t),y=i(n,h,e?2:1),b=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(f=s(t.length);f>b;b++)if(m=e?y(a(p=t[b])[0],p[1]):y(t[b]),m===u||m===c)return m}else for(g=v.call(t);!(p=g.next()).done;)if(m=r(g,y,p.value,e),m===u||m===c)return m};e.BREAK=u,e.RETURN=c},function(t,e){t.exports=!1},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(33);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){var i=n(60),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(e,n){e.exports=t},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(!R(t))throw Error('You declared cell type "'+t+'" as a string that is not mapped to a known object.\n                 Cell type must be an object or a string mapped to an object registered by "Handsontable.cellTypes.registerCellType" method');return D(t)}function o(t,e){var n=e.editor,i=e.renderer,r=e.validator;n&&(0,l.registerEditor)(t,n),i&&(0,u.registerRenderer)(t,i),r&&(0,c.registerValidator)(t,r),A(t,e)}e.__esModule=!0,e.getRegisteredCellTypes=e.getRegisteredCellTypeNames=e.hasCellType=e.getCellType=e.registerCellType=void 0;var a=n(50),s=i(a),l=n(14),u=n(9),c=n(26),h=n(189),d=i(h),f=n(190),p=i(f),g=n(191),m=i(g),v=n(192),y=i(v),b=n(193),w=i(b),x=n(194),_=i(x),k=n(195),C=i(k),S=n(196),M=i(S),T=n(197),E=i(T),O=(0,s["default"])("cellTypes"),A=O.register,D=O.getItem,R=O.hasItem,P=O.getNames,N=O.getValues;o("autocomplete",d["default"]),o("checkbox",p["default"]),o("date",m["default"]),o("dropdown",y["default"]),o("handsontable",w["default"]),o("numeric",_["default"]),o("password",C["default"]),o("text",M["default"]),o("time",E["default"]),e.registerCellType=o,e.getCellType=r,e.hasCellType=R,e.getRegisteredCellTypeNames=P,e.getRegisteredCellTypes=N},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){function n(){var t=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue:function(){this.validatorsInQueue++,t=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(t){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&&0==t&&(t=!0,this.onQueueEmpty(this.valid))}}}function i(t,e,i){function r(){var n;t.length&&(n=W.runHooks("beforeChange",t,e),(0,d.isFunction)(n)?console.warn("Your beforeChange callback returns a function. It's not supported since Handsontable 0.12.1 (and the returned function will not be executed)."):n===!1&&t.splice(0,t.length)),i()}var o=new n;o.onQueueEmpty=r;for(var a=t.length-1;a>=0;a--)if(null===t[a])t.splice(a,1);else{var s=t[a][0],l=E.propToCol(t[a][1]),h=W.getCellMeta(s,l);if("numeric"===h.type&&"string"==typeof t[a][3]&&t[a][3].length>0&&(/^-?[\d\s]*(\.|,)?\d*$/.test(t[a][3])||h.format)){var p=t[a][3].length;(0,f.isUndefined)(h.language)?u["default"].culture("en-US"):t[a][3].indexOf(".")===p-3&&t[a][3].indexOf(",")===-1?u["default"].culture("en-US"):u["default"].culture(h.language);var g=u["default"].cultureData(u["default"].culture());g.delimiters;u["default"].validate(t[a][3])&&!isNaN(t[a][3])?t[a][3]=parseFloat(t[a][3]):t[a][3]=(0,u["default"])().unformat(t[a][3])||t[a][3]}W.getCellValidator(h)&&(o.addValidatorToQueue(),W.validateCell(t[a][3],h,function(e,n){return function(i){if("boolean"!=typeof i)throw new Error("Validation error: result is not boolean");if(i===!1&&n.allowInvalid===!1){t.splice(e,1),n.valid=!0;var r=W.getCell(n.row,n.col);(0,c.removeClass)(r,W.getSettings().invalidCellClassName),--e}o.removeValidatorFormQueue()}}(a,h),e))}o.checkIfQueueIsEmpty()}function o(t,e){var n=t.length-1;if(!(n<0)){for(;n>=0;n--){var i=!1;if(null!==t[n]){if(null!=t[n][2]||null!=t[n][3]){if(b.settings.allowInsertRow)for(;t[n][0]>W.countRows()-1;){var r=E.createRow(void 0,void 0,e);if(0===r){i=!0;break}}if(!i){if("array"===W.dataType&&(!b.settings.columns||0===b.settings.columns.length)&&b.settings.allowInsertColumn)for(;E.propToCol(t[n][1])>W.countCols()-1;)E.createCol(void 0,void 0,e);E.set(t[n][0],t[n][1],t[n][3])}}}else t.splice(n,1)}W.forceFullRender=!0,z.adjustRowsAndCols(),W.runHooks("beforeChangeRender",t,e),I.refreshBorders(null,!0),W.view.wt.wtOverlays.adjustElementsSize(),W.runHooks("afterChange",t,e||"edit");var o=W.getActiveEditor();o&&(0,f.isDefined)(o.refreshValue)&&o.refreshValue()}}function l(t,e,n){return"object"===("undefined"==typeof t?"undefined":s(t))?t:[[t,e,n]]}function g(t){if((0,x.hasOwnProperty)(t,"type")){var e,n={};"object"===s(t.type)?e=t.type:"string"==typeof t.type&&(e=(0,j.getCellType)(t.type));for(var i in e)(0,x.hasOwnProperty)(e,i)&&!(0,x.hasOwnProperty)(t,i)&&(n[i]=e[i]);return n}}function v(){throw new Error("This method cannot be called because this Handsontable instance has been destroyed")}var b,E,A,z,I,B,W=this,Y=function(){},V=new w["default"](W);(0,x.extend)(Y.prototype,H["default"].prototype),(0,x.extend)(Y.prototype,e),(0,x.extend)(Y.prototype,g(e)),this.rootElement=t,this.isHotTableEnv=(0,c.isChildOfWebComponentTable)(this.rootElement),w["default"].isHotTableEnv=this.isHotTableEnv,this.container=document.createElement("DIV"),this.renderCall=!1,t.insertBefore(this.container,t.firstChild),this.guid="ht_"+(0,M.randomString)();var U=(0,P.getTranslator)(W);A=new D["default"](W),this.rootElement.id&&"ht_"!==this.rootElement.id.substring(0,3)||(this.rootElement.id=this.guid),b={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width"],settings:new Y,selRange:null,isPopulated:null,scrollable:null,firstRun:!0},z={alter:function(t,e,n,i,o){function a(t,e,n,i){var o=function(){var t=void 0;return"array"===i?t=[]:"object"===i&&(t={}),t},a=(0,_.arrayMap)(new Array(n),function(){return o()});a.unshift(e,0),t.splice.apply(t,r(a))}var s;switch(n=n||1,t){case"insert_row":var l=W.countSourceRows();if(W.getSettings().maxRows===l)return;e=(0,f.isDefined)(e)?e:l,s=E.createRow(e,n,i),a(b.cellSettings,e,n,"array"),s&&(I.isSelected()&&b.selRange.from.row>=e?(b.selRange.from.row+=s,I.transformEnd(s,0)):I.refreshBorders());break;case"insert_col":s=E.createCol(e,n,i);for(var u=0,c=W.countSourceRows();u<c;u++)b.cellSettings[u]&&a(b.cellSettings[u],e,n);if(s){if(Array.isArray(W.getSettings().colHeaders)){var h=[e,0];h.length+=s,Array.prototype.splice.apply(W.getSettings().colHeaders,h)}I.isSelected()&&b.selRange.from.col>=e?(b.selRange.from.col+=s,I.transformEnd(0,s)):I.refreshBorders()}break;case"remove_row":E.removeRow(e,n,i),b.cellSettings.splice(e,n);var d=W.countRows(),p=W.getSettings().fixedRowsTop;p>=e+1&&(W.getSettings().fixedRowsTop-=Math.min(n,p-e));var g=W.getSettings().fixedRowsBottom;g&&e>=d-g&&(W.getSettings().fixedRowsBottom-=Math.min(n,g)),z.adjustRowsAndCols(),I.refreshBorders();break;case"remove_col":var m=U.toPhysicalColumn(e);E.removeCol(e,n,i);for(var v=0,y=W.countSourceRows();v<y;v++)b.cellSettings[v]&&b.cellSettings[v].splice(m,n);var w=W.getSettings().fixedColumnsLeft;w>=e+1&&(W.getSettings().fixedColumnsLeft-=Math.min(n,w-e)),Array.isArray(W.getSettings().colHeaders)&&("undefined"==typeof m&&(m=-1),W.getSettings().colHeaders.splice(m,n)),z.adjustRowsAndCols(),I.refreshBorders();break;default:throw new Error('There is no such action "'+t+'"')}o||z.adjustRowsAndCols()},adjustRowsAndCols:function(){if(b.settings.minRows){var t=W.countRows();if(t<b.settings.minRows)for(var e=0,n=b.settings.minRows;e<n-t;e++)E.createRow(W.countRows(),1,"auto")}if(b.settings.minSpareRows){var i=W.countEmptyRows(!0);if(i<b.settings.minSpareRows)for(;i<b.settings.minSpareRows&&W.countSourceRows()<b.settings.maxRows;i++)E.createRow(W.countRows(),1,"auto")}var r=void 0;if((b.settings.minCols||b.settings.minSpareCols)&&(r=W.countEmptyCols(!0)),b.settings.minCols&&!b.settings.columns&&W.countCols()<b.settings.minCols)for(;W.countCols()<b.settings.minCols;r++)E.createCol(W.countCols(),1,"auto");if(b.settings.minSpareCols&&!b.settings.columns&&"array"===W.dataType&&r<b.settings.minSpareCols)for(;r<b.settings.minSpareCols&&W.countCols()<b.settings.maxCols;r++)E.createCol(W.countCols(),1,"auto");var o=W.countRows(),a=W.countCols();if(0!==o&&0!==a||I.deselect(),I.isSelected()){var s=!1,l=b.selRange.from.row,u=b.selRange.from.col,c=b.selRange.to.row,h=b.selRange.to.col;l>o-1?(l=o-1,s=!0,c>l&&(c=l)):c>o-1&&(c=o-1,s=!0,l>c&&(l=c)),u>a-1?(u=a-1,s=!0,h>u&&(h=u)):h>a-1&&(h=a-1,s=!0,u>h&&(u=h)),s&&W.selectCell(l,u,c,h)}W.view&&W.view.wt.wtOverlays.adjustElementsSize()},populateFromArray:function(t,e,n,i,o,a,l){var u,c,h,d,p=[],g={};if(c=e.length,0===c)return!1;var m,v,y,w;({row:null===n?null:n.row,col:null===n?null:n.col});switch(o){case"shift_down":for(m=n?n.col-t.col+1:0,v=n?n.row-t.row+1:0,e=(0,R.translateRowsToColumns)(e),h=0,d=e.length,y=Math.max(d,m);h<y;h++)if(h<d){var _;for(u=0,c=e[h].length;u<v-c;u++)e[h].push(e[h][u%c]);e[h].unshift(t.col+h,t.row,0),(_=W).spliceCol.apply(_,r(e[h]))}else{var k;e[h%d][0]=t.col+h,(k=W).spliceCol.apply(k,r(e[h%d]))}break;case"shift_right":for(m=n?n.col-t.col+1:0,v=n?n.row-t.row+1:0,u=0,c=e.length,w=Math.max(c,v);u<w;u++)if(u<c){var C;for(h=0,d=e[u].length;h<m-d;h++)e[u].push(e[u][h%d]);e[u].unshift(t.row+u,t.col,0),(C=W).spliceRow.apply(C,r(e[u]))}else{var S;e[u%c][0]=t.row+u,(S=W).spliceRow.apply(S,r(e[u%c]))}break;case"overwrite":default:g.row=t.row,g.col=t.col;var M={row:n&&t?n.row-t.row+1:1,col:n&&t?n.col-t.col+1:1},T=0,E=0,O=!0,A=void 0,D=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=e[t%e.length];return null!==n?i[n%i.length]:i},P=e.length,N=n?n.row-t.row+1:0;for(c=n?N:Math.max(P,N),u=0;u<c&&!(n&&g.row>n.row&&N>P||!b.settings.allowInsertRow&&g.row>W.countRows()-1||g.row>=b.settings.maxRows);u++){var z=u-T,L=D(z).length,I=n?n.col-t.col+1:0;if(d=n?I:Math.max(L,I),g.col=t.col,A=W.getCellMeta(g.row,g.col),"CopyPaste.paste"!==i&&"Autofill.autofill"!==i||!A.skipRowOnPaste){for(E=0,h=0;h<d&&!(n&&g.col>n.col&&I>L||!b.settings.allowInsertColumn&&g.col>W.countCols()-1||g.col>=b.settings.maxCols);h++)if(A=W.getCellMeta(g.row,g.col),"CopyPaste.paste"!==i&&"Autofill.fill"!==i||!A.skipColumnOnPaste)if(A.readOnly)g.col++;else{var H=h-E,j=D(z,H),F=W.getDataAtCell(g.row,g.col),B={row:z,col:H};if("Autofill.fill"===i){var Y=W.runHooks("beforeAutofillInsidePopulate",B,a,e,l,{},M);Y&&(j=(0,f.isUndefined)(Y.value)?j:Y.value)}if(null!==j&&"object"===("undefined"==typeof j?"undefined":s(j)))if(null===F||"object"!==("undefined"==typeof F?"undefined":s(F)))O=!1;else{var V=(0,x.duckSchema)(F[0]||F),U=(0,x.duckSchema)(j[0]||j);(0,x.isObjectEquals)(V,U)?j=(0,x.deepClone)(j):O=!1}else null!==F&&"object"===("undefined"==typeof F?"undefined":s(F))&&(O=!1);O&&p.push([g.row,g.col,j]),O=!0,g.col++}else E++,g.col++,d++;g.row++}else T++,g.row++,c++}W.setDataAtCell(p,null,null,i||"populateFromArray")}}},this.selection=I={inProgress:!1,selectedHeader:{cols:!1,rows:!1},setSelectedHeaders:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];W.selection.selectedHeader.rows=t,W.selection.selectedHeader.cols=e,W.selection.selectedHeader.corner=n},begin:function(){W.selection.inProgress=!0},finish:function(){var t=W.getSelected();W.runHooks("afterSelectionEnd",t[0],t[1],t[2],t[3]),W.runHooks("afterSelectionEndByProp",t[0],W.colToProp(t[1]),t[2],W.colToProp(t[3])),W.selection.inProgress=!1},isInProgress:function(){return W.selection.inProgress},setRangeStart:function(t,e){W.runHooks("beforeSetRangeStart",t),b.selRange=new N.CellRange(t,t,t),I.setRangeEnd(t,null,e)},setRangeStartOnly:function(t){W.runHooks("beforeSetRangeStartOnly",t),b.selRange=new N.CellRange(t,t,t)},setRangeEnd:function(t,e,n){if(null!==b.selRange){var i,r=!1,o=!0,a=W.view.wt.wtTable.getFirstVisibleRow(),s=W.view.wt.wtTable.getFirstVisibleColumn(),l={row:null,col:null};W.runHooks("beforeSetRangeEnd",t),W.selection.begin(),l.row=t.row<0?a:t.row,l.col=t.col<0?s:t.col,b.selRange.to=new N.CellCoords(l.row,l.col),b.settings.multiSelect||(b.selRange.from=t),W.view.wt.selections.current.clear(),i=W.getCellMeta(b.selRange.highlight.row,b.selRange.highlight.col).disableVisualSelection,"string"==typeof i&&(i=[i]),(i===!1||Array.isArray(i)&&i.indexOf("current")===-1)&&W.view.wt.selections.current.add(b.selRange.highlight),W.view.wt.selections.area.clear(),(i===!1||Array.isArray(i)&&i.indexOf("area")===-1)&&I.isMultiple()&&(W.view.wt.selections.area.add(b.selRange.from),W.view.wt.selections.area.add(b.selRange.to)),(b.settings.currentHeaderClassName||b.settings.currentRowClassName||b.settings.currentColClassName)&&(W.view.wt.selections.highlight.clear(),W.view.wt.selections.highlight.add(b.selRange.from),W.view.wt.selections.highlight.add(b.selRange.to));var u=(0,x.createObjectPropListener)("value");W.runHooks("afterSelection",b.selRange.from.row,b.selRange.from.col,b.selRange.to.row,b.selRange.to.col,u),W.runHooks("afterSelectionByProp",b.selRange.from.row,E.colToProp(b.selRange.from.col),b.selRange.to.row,E.colToProp(b.selRange.to.col),u),(0===b.selRange.from.row&&b.selRange.to.row===W.countRows()-1&&W.countRows()>1||0===b.selRange.from.col&&b.selRange.to.col===W.countCols()-1&&W.countCols()>1)&&(r=!0),
(t.row<0||t.col<0)&&(o=!1),u.isTouched()&&(e=!u.value),e!==!1&&!r&&o&&(b.selRange.from&&!I.isMultiple()?W.view.scrollViewport(b.selRange.from):W.view.scrollViewport(t)),I.selectedHeader.rows&&I.selectedHeader.cols?(0,c.addClass)(W.rootElement,["ht__selection--rows","ht__selection--columns"]):I.selectedHeader.rows?((0,c.removeClass)(W.rootElement,"ht__selection--columns"),(0,c.addClass)(W.rootElement,"ht__selection--rows")):I.selectedHeader.cols?((0,c.removeClass)(W.rootElement,"ht__selection--rows"),(0,c.addClass)(W.rootElement,"ht__selection--columns")):(0,c.removeClass)(W.rootElement,["ht__selection--rows","ht__selection--columns"]),I.refreshBorders(null,n)}},refreshBorders:function(t,e){e||B.destroyEditor(t),W.view.render(),I.isSelected()&&!e&&B.prepareEditor()},isMultiple:function G(){var G=!(b.selRange.to.col===b.selRange.from.col&&b.selRange.to.row===b.selRange.from.row),t=W.runHooks("afterIsMultipleSelection",G);if(G)return t},transformStart:function(t,e,n,i){var r,o,a,s,l=new N.CellCoords(t,e),u=0,c=0;W.runHooks("modifyTransformStart",l),r=W.countRows(),o=W.countCols(),s=W.getSettings().fixedRowsBottom,b.selRange.highlight.row+t>r-1?n&&b.settings.minSpareRows>0&&!(s&&b.selRange.highlight.row>=r-s-1)?(W.alter("insert_row",r),r=W.countRows()):b.settings.autoWrapCol&&(l.row=1-r,l.col=b.selRange.highlight.col+l.col==o-1?1-o:1):b.settings.autoWrapCol&&b.selRange.highlight.row+l.row<0&&b.selRange.highlight.col+l.col>=0&&(l.row=r-1,l.col=b.selRange.highlight.col+l.col==0?o-1:-1),b.selRange.highlight.col+l.col>o-1?n&&b.settings.minSpareCols>0?(W.alter("insert_col",o),o=W.countCols()):b.settings.autoWrapRow&&(l.row=b.selRange.highlight.row+l.row==r-1?1-r:1,l.col=1-o):b.settings.autoWrapRow&&b.selRange.highlight.col+l.col<0&&b.selRange.highlight.row+l.row>=0&&(l.row=b.selRange.highlight.row+l.row==0?r-1:-1,l.col=o-1),a=new N.CellCoords(b.selRange.highlight.row+l.row,b.selRange.highlight.col+l.col),a.row<0?(u=-1,a.row=0):a.row>0&&a.row>=r&&(u=1,a.row=r-1),a.col<0?(c=-1,a.col=0):a.col>0&&a.col>=o&&(c=1,a.col=o-1),W.runHooks("afterModifyTransformStart",a,u,c),I.setRangeStart(a,i)},transformEnd:function(t,e){var n,i,r,o=new N.CellCoords(t,e),a=0,s=0;W.runHooks("modifyTransformEnd",o),n=W.countRows(),i=W.countCols(),r=new N.CellCoords(b.selRange.to.row+o.row,b.selRange.to.col+o.col),r.row<0?(a=-1,r.row=0):r.row>0&&r.row>=n&&(a=1,r.row=n-1),r.col<0?(s=-1,r.col=0):r.col>0&&r.col>=i&&(s=1,r.col=i-1),W.runHooks("afterModifyTransformEnd",r,a,s),I.setRangeEnd(r,!0)},isSelected:function(){return null!==b.selRange},inInSelection:function(t){return!!I.isSelected()&&b.selRange.includes(t)},deselect:function(){I.isSelected()&&(W.selection.inProgress=!1,b.selRange=null,W.view.wt.selections.current.clear(),W.view.wt.selections.area.clear(),(b.settings.currentHeaderClassName||b.settings.currentRowClassName||b.settings.currentColClassName)&&W.view.wt.selections.highlight.clear(),B.destroyEditor(),I.refreshBorders(),(0,c.removeClass)(W.rootElement,["ht__selection--rows","ht__selection--columns"]),W.runHooks("afterDeselect"))},selectAll:function(){b.settings.multiSelect&&(I.setSelectedHeaders(!0,!0,!0),I.setRangeStart(new N.CellCoords(0,0)),I.setRangeEnd(new N.CellCoords(W.countRows()-1,W.countCols()-1),!1))},empty:function(){if(I.isSelected()){var t,e,n=b.selRange.getTopLeftCorner(),i=b.selRange.getBottomRightCorner(),r=[];for(t=n.row;t<=i.row;t++)for(e=n.col;e<=i.col;e++)W.getCellMeta(t,e).readOnly||r.push([t,e,""]);W.setDataAtCell(r)}}},this.init=function(){A.setData(b.settings.data),W.runHooks("beforeInit"),(0,p.isMobileBrowser)()&&(0,c.addClass)(W.rootElement,"mobile"),this.updateSettings(b.settings,!0),this.view=new O["default"](this),B=new y["default"](W,b,I,E),this.forceFullRender=!0,W.runHooks("init"),this.view.render(),"object"===s(b.firstRun)&&(W.runHooks("afterChange",b.firstRun[0],b.firstRun[1]),b.firstRun=!1),W.runHooks("afterInit")},this.validateCell=function(t,e,n,i){function r(t){var i=e.visualCol,r=e.visualRow,o=W.getCell(r,i,!0);o&&"TH"!=o.nodeName&&W.view.wt.wtSettings.settings.cellRenderer(r,i,o),n(t)}var o=W.getCellValidator(e);(0,f.isRegExp)(o)&&(o=function(t){return function(e,n){n(t.test(e))}}(o)),(0,d.isFunction)(o)?(t=W.runHooks("beforeValidate",t,e.visualRow,e.prop,i),W._registerTimeout(setTimeout(function(){o.call(e,t,function(n){n=W.runHooks("afterValidate",n,t,e.visualRow,e.prop,i),e.valid=n,r(n),W.runHooks("postAfterValidate",n,t,e.visualRow,e.prop,i)})},0))):W._registerTimeout(setTimeout(function(){e.valid=!0,r(e.valid)},0))},this.setDataAtCell=function(t,e,n,r){var a,u,c,h=l(t,e,n),d=[];for(a=0,u=h.length;a<u;a++){if("object"!==s(h[a]))throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof h[a][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");c=E.colToProp(h[a][1]),d.push([h[a][0],c,A.getAtCell(U.toPhysicalRow(h[a][0]),h[a][1]),h[a][2]])}r||"object"!==("undefined"==typeof t?"undefined":s(t))||(r=e),W.runHooks("afterSetDataAtCell",d,r),i(d,r,function(){o(d,r)})},this.setDataAtRowProp=function(t,e,n,r){var a,u,c=l(t,e,n),h=[];for(a=0,u=c.length;a<u;a++)h.push([c[a][0],c[a][1],A.getAtCell(U.toPhysicalRow(c[a][0]),c[a][1]),c[a][2]]);r||"object"!==("undefined"==typeof t?"undefined":s(t))||(r=e),W.runHooks("afterSetDataAtRowProp",h,r),i(h,r,function(){o(h,r)})},this.listen=function(){var t=!document.activeElement||document.activeElement&&void 0===document.activeElement.nodeName;document.activeElement&&document.activeElement!==document.body&&!t?document.activeElement.blur():t&&document.body.focus(),F=W.guid},this.unlisten=function(){this.isListening()&&(F=null)},this.isListening=function(){return F===W.guid},this.destroyEditor=function(t){I.refreshBorders(t)},this.populateFromArray=function(t,e,n,i,r,o,a,l,u){var c;if("object"!==("undefined"==typeof n?"undefined":s(n))||"object"!==s(n[0]))throw new Error("populateFromArray parameter `input` must be an array of arrays");return c="number"==typeof i?new N.CellCoords(i,r):null,z.populateFromArray(new N.CellCoords(t,e),n,c,o,a,l,u)},this.spliceCol=function(t,e,n){var i;return(i=E).spliceCol.apply(i,arguments)},this.spliceRow=function(t,e,n){var i;return(i=E).spliceRow.apply(i,arguments)},this.getSelected=function(){if(I.isSelected())return[b.selRange.from.row,b.selRange.from.col,b.selRange.to.row,b.selRange.to.col]},this.getSelectedRange=function(){if(I.isSelected())return b.selRange},this.render=function(){W.view&&(W.renderCall=!0,W.forceFullRender=!0,I.refreshBorders(null,!0))},this.loadData=function(t){function e(){b.cellSettings.length=0}if(Array.isArray(b.settings.dataSchema)?W.dataType="array":(0,d.isFunction)(b.settings.dataSchema)?W.dataType="function":W.dataType="object",E&&E.destroy(),E=new m["default"](W,b,Y),"object"===("undefined"==typeof t?"undefined":s(t))&&null!==t)t.push&&t.splice||(t=[t]);else{if(null!==t)throw new Error("loadData only accepts array of objects or array of arrays ("+("undefined"==typeof t?"undefined":s(t))+" given)");t=[];var n,i=0,r=0,o=E.getSchema();for(i=0,r=b.settings.startRows;i<r;i++)if("object"!==W.dataType&&"function"!==W.dataType||!b.settings.dataSchema)if("array"===W.dataType)n=(0,x.deepClone)(o[0]),t.push(n);else{n=[];for(var a=0,l=b.settings.startCols;a<l;a++)n.push(null);t.push(n)}else n=(0,x.deepClone)(o),t.push(n)}b.isPopulated=!1,Y.prototype.data=t,Array.isArray(t[0])&&(W.dataType="array"),E.dataSource=t,A.data=t,A.dataType=W.dataType,A.colToProp=E.colToProp.bind(E),A.propToCol=E.propToCol.bind(E),e(),z.adjustRowsAndCols(),W.runHooks("afterLoadData",b.firstRun),b.firstRun?b.firstRun=[null,"loadData"]:(W.runHooks("afterChange",null,"loadData"),W.render()),b.isPopulated=!0},this.getData=function(t,e,n,i){return(0,f.isUndefined)(t)?E.getAll():E.getRange(new N.CellCoords(t,e),new N.CellCoords(n,i),E.DESTINATION_RENDERER)},this.getCopyableText=function(t,e,n,i){return E.getCopyableText(new N.CellCoords(t,e),new N.CellCoords(n,i))},this.getCopyableData=function(t,e){return E.getCopyable(t,E.colToProp(e))},this.getSchema=function(){return E.getSchema()},this.updateSettings=function(t,e){var n=!1,i=void 0,r=void 0,o=void 0;if((0,f.isDefined)(t.rows))throw new Error('"rows" setting is no longer supported. do you mean startRows, minRows or maxRows?');if((0,f.isDefined)(t.cols))throw new Error('"cols" setting is no longer supported. do you mean startCols, minCols or maxCols?');for(i in t)"data"!==i&&(L["default"].getSingleton().getRegistered().indexOf(i)>-1?((0,d.isFunction)(t[i])||Array.isArray(t[i]))&&(t[i].initialHook=!0,W.addHook(i,t[i])):!e&&(0,x.hasOwnProperty)(t,i)&&(Y.prototype[i]=t[i]));void 0===t.data&&void 0===b.settings.data?W.loadData(null):void 0!==t.data?W.loadData(t.data):void 0!==t.columns&&E.createMap(),o=W.countCols();var a=t.columns||Y.prototype.columns;if(a&&(0,d.isFunction)(a)&&(o=W.countSourceCols(),n=!0),void 0===t.cell&&void 0===t.cells&&void 0===t.columns||(b.cellSettings.length=0),o>0){var s=void 0,l=void 0;for(i=0,r=0;i<o;i++)n&&!a(i)||(b.columnSettings[r]=(0,h.columnFactory)(Y,b.columnsSettingConflicts),s=b.columnSettings[r].prototype,a&&(l=n?a(i):a[r],l&&((0,x.extend)(s,l),(0,x.extend)(s,g(l)))),r++)}if((0,f.isDefined)(t.cell))for(var u in t.cell)if((0,x.hasOwnProperty)(t.cell,u)){var p=t.cell[u];W.setCellMetaObject(p.row,p.col,p)}W.runHooks("afterCellMetaReset"),(0,f.isDefined)(t.className)&&(Y.prototype.className&&(0,c.removeClass)(W.rootElement,Y.prototype.className),t.className&&(0,c.addClass)(W.rootElement,t.className));var m=W.rootElement.style.height;""!==m&&(m=parseInt(W.rootElement.style.height,10));var v=t.height;if((0,d.isFunction)(v)&&(v=v()),e){var y=W.rootElement.getAttribute("style");y&&W.rootElement.setAttribute("data-initialstyle",W.rootElement.getAttribute("style"))}if(null===v){var w=W.rootElement.getAttribute("data-initialstyle");w&&(w.indexOf("height")>-1||w.indexOf("overflow")>-1)?W.rootElement.setAttribute("style",w):(W.rootElement.style.height="",W.rootElement.style.overflow="")}else void 0!==v&&(W.rootElement.style.height=v+"px",W.rootElement.style.overflow="hidden");if("undefined"!=typeof t.width){var _=t.width;(0,d.isFunction)(_)&&(_=_()),W.rootElement.style.width=_+"px"}e||(E.clearLengthCache(),W.view&&W.view.wt.wtViewport.resetHasOversizedColumnHeadersMarked(),W.runHooks("afterUpdateSettings",t)),z.adjustRowsAndCols(),W.view&&!b.firstRun&&(W.forceFullRender=!0,I.refreshBorders(null,!0)),e||!W.view||""!==m&&""!==v&&void 0!==v||m===v||W.view.wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){var t=W.getSelected();if(Y.prototype.getValue){if((0,d.isFunction)(Y.prototype.getValue))return Y.prototype.getValue.call(W);if(t)return W.getData()[t[0]][Y.prototype.getValue]}else if(t)return W.getDataAtCell(t[0],t[1])},this.getSettings=function(){return b.settings},this.clear=function(){I.selectAll(),I.empty()},this.alter=function(t,e,n,i,r){z.alter(t,e,n,i,r)},this.getCell=function(t,e,n){return W.view.getCellAtCoords(new N.CellCoords(t,e),n)},this.getCoords=function(t){return this.view.wt.wtTable.getCoords.call(this.view.wt.wtTable,t)},this.colToProp=function(t){return E.colToProp(t)},this.propToCol=function(t){return E.propToCol(t)},this.toVisualRow=function(t){return U.toVisualRow(t)},this.toVisualColumn=function(t){return U.toVisualColumn(t)},this.toPhysicalRow=function(t){return U.toPhysicalRow(t)},this.toPhysicalColumn=function(t){return U.toPhysicalColumn(t)},this.getDataAtCell=function(t,e){return E.get(t,E.colToProp(e))},this.getDataAtRowProp=function(t,e){return E.get(t,e)},this.getDataAtCol=function(t){var e=[];return e.concat.apply(e,r(E.getRange(new N.CellCoords(0,t),new N.CellCoords(b.settings.data.length-1,t),E.DESTINATION_RENDERER)))},this.getDataAtProp=function(t){var e,n=[];return e=E.getRange(new N.CellCoords(0,E.propToCol(t)),new N.CellCoords(b.settings.data.length-1,E.propToCol(t)),E.DESTINATION_RENDERER),n.concat.apply(n,r(e))},this.getSourceData=function(t,e,n,i){var r=void 0;return r=void 0===t?A.getData():A.getByRange(new N.CellCoords(t,e),new N.CellCoords(n,i))},this.getSourceDataArray=function(t,e,n,i){var r=void 0;return r=void 0===t?A.getData(!0):A.getByRange(new N.CellCoords(t,e),new N.CellCoords(n,i),!0)},this.getSourceDataAtCol=function(t){return A.getAtColumn(t)},this.getSourceDataAtRow=function(t){return A.getAtRow(t)},this.getSourceDataAtCell=function(t,e){return A.getAtCell(t,e)},this.getDataAtRow=function(t){var e=E.getRange(new N.CellCoords(t,0),new N.CellCoords(t,this.countCols()-1),E.DESTINATION_RENDERER);return e[0]||[]},this.getDataType=function(t,e,n,i){var r=this,o=null,a=null;void 0===t&&(t=0,n=this.countRows(),e=0,i=this.countCols()),void 0===n&&(n=t),void 0===i&&(i=e);var s="mixed";return(0,T.rangeEach)(Math.min(t,n),Math.max(t,n),function(t){var n=!0;return(0,T.rangeEach)(Math.min(e,i),Math.max(e,i),function(e){var i=r.getCellMeta(t,e);return a=i.type,o?n=o===a:o=a,n}),s=n?a:"mixed",n}),s},this.removeCellMeta=function(t,e,n){var i=U.toPhysical(t,e),r=a(i,2),o=r[0],s=r[1],l=b.cellSettings[o][s][n],u=W.runHooks("beforeRemoveCellMeta",t,e,n,l);u!==!1&&(delete b.cellSettings[o][s][n],W.runHooks("afterRemoveCellMeta",t,e,n,l)),l=null},this.spliceCellsMeta=function(t,e){for(var n,i=arguments.length,r=Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];(n=b.cellSettings).splice.apply(n,[t,e].concat(r))},this.setCellMetaObject=function(t,e,n){if("object"===("undefined"==typeof n?"undefined":s(n)))for(var i in n)if((0,x.hasOwnProperty)(n,i)){var r=n[i];this.setCellMeta(t,e,i,r)}},this.setCellMeta=function(t,e,n,i){var r=U.toPhysical(t,e),o=a(r,2),s=o[0],l=o[1];b.columnSettings[l]||(b.columnSettings[l]=(0,h.columnFactory)(Y,b.columnsSettingConflicts)),b.cellSettings[s]||(b.cellSettings[s]=[]),b.cellSettings[s][l]||(b.cellSettings[s][l]=new b.columnSettings[l]),b.cellSettings[s][l][n]=i,W.runHooks("afterSetCellMeta",t,e,n,i)},this.getCellsMeta=function(){return(0,_.arrayFlatten)(b.cellSettings)},this.getCellMeta=function(t,e){var n=E.colToProp(e),i=void 0,r=U.toPhysical(t,e),o=a(r,2),s=o[0],l=o[1];if(b.columnSettings[l]||(b.columnSettings[l]=(0,h.columnFactory)(Y,b.columnsSettingConflicts)),b.cellSettings[s]||(b.cellSettings[s]=[]),b.cellSettings[s][l]||(b.cellSettings[s][l]=new b.columnSettings[l]),i=b.cellSettings[s][l],i.row=s,i.col=l,i.visualRow=t,i.visualCol=e,i.prop=n,i.instance=W,W.runHooks("beforeGetCellMeta",t,e,i),(0,x.extend)(i,g(i)),i.cells){var u=i.cells.call(i,s,l,n);u&&((0,x.extend)(i,u),(0,x.extend)(i,g(u)))}return W.runHooks("afterGetCellMeta",t,e,i),i},this.getCellMetaAtRow=function(t){return b.cellSettings[t]},this.isColumnModificationAllowed=function(){return!("object"===W.dataType||W.getSettings().columns)};var q=(0,R.cellMethodLookupFactory)("renderer");this.getCellRenderer=function(t,e){return(0,C.getRenderer)(q.call(this,t,e))},this.getCellEditor=(0,R.cellMethodLookupFactory)("editor");var X=(0,R.cellMethodLookupFactory)("validator");this.getCellValidator=function(t,e){var n=X.call(this,t,e);return"string"==typeof n&&(n=(0,S.getValidator)(n)),n},this.validateCells=function(t){var e=new n;t&&(e.onQueueEmpty=t);for(var i=W.countRows()-1;i>=0;){for(var r=W.countCols()-1;r>=0;)e.addValidatorToQueue(),W.validateCell(W.getDataAtCell(i,r),W.getCellMeta(i,r),function(t){if("boolean"!=typeof t)throw new Error("Validation error: result is not boolean");t===!1&&(e.valid=!1),e.removeValidatorFormQueue()},"validateCells"),r--;i--}e.checkIfQueueIsEmpty()},this.getRowHeader=function(t){var e=b.settings.rowHeaders;return void 0!==t&&(t=W.runHooks("modifyRowHeader",t)),void 0===t?(e=[],(0,T.rangeEach)(W.countRows()-1,function(t){e.push(W.getRowHeader(t))})):Array.isArray(e)&&void 0!==e[t]?e=e[t]:(0,d.isFunction)(e)?e=e(t):e&&"string"!=typeof e&&"number"!=typeof e&&(e=t+1),e},this.hasRowHeaders=function(){return!!b.settings.rowHeaders},this.hasColHeaders=function(){if(void 0!==b.settings.colHeaders&&null!==b.settings.colHeaders)return!!b.settings.colHeaders;for(var t=0,e=W.countCols();t<e;t++)if(W.getColHeader(t))return!0;return!1},this.getColHeader=function(t){var e=b.settings.columns&&(0,d.isFunction)(b.settings.columns),n=b.settings.colHeaders;if(t=W.runHooks("modifyColHeader",t),void 0===t){for(var i=[],r=e?W.countSourceCols():W.countCols(),o=0;o<r;o++)i.push(W.getColHeader(o));n=i}else{var a=function(t){for(var e=[],n=W.countSourceCols(),i=0;i<n;i++)(0,d.isFunction)(W.getSettings().columns)&&W.getSettings().columns(i)&&e.push(i);return e[t]},s=t;t=W.runHooks("modifyCol",t);var l=a(t);b.settings.columns&&(0,d.isFunction)(b.settings.columns)&&b.settings.columns(l)&&b.settings.columns(l).title?n=b.settings.columns(l).title:b.settings.columns&&b.settings.columns[t]&&b.settings.columns[t].title?n=b.settings.columns[t].title:Array.isArray(b.settings.colHeaders)&&void 0!==b.settings.colHeaders[t]?n=b.settings.colHeaders[t]:(0,d.isFunction)(b.settings.colHeaders)?n=b.settings.colHeaders(t):b.settings.colHeaders&&"string"!=typeof b.settings.colHeaders&&"number"!=typeof b.settings.colHeaders&&(n=(0,R.spreadsheetColumnLabel)(s))}return n},this._getColWidthFromSettings=function(t){var e=W.getCellMeta(0,t),n=e.width;if(void 0!==n&&n!==b.settings.width||(n=e.colWidths),void 0!==n&&null!==n){switch("undefined"==typeof n?"undefined":s(n)){case"object":n=n[t];break;case"function":n=n(t)}"string"==typeof n&&(n=parseInt(n,10))}return n},this.getColWidth=function(t){var e=W._getColWidthFromSettings(t);return e=W.runHooks("modifyColWidth",e,t),void 0===e&&(e=N.ViewportColumnsCalculator.DEFAULT_WIDTH),e},this._getRowHeightFromSettings=function(t){var e=b.settings.rowHeights;if(void 0!==e&&null!==e){switch("undefined"==typeof e?"undefined":s(e)){case"object":e=e[t];break;case"function":e=e(t)}"string"==typeof e&&(e=parseInt(e,10))}return e},this.getRowHeight=function(t){var e=W._getRowHeightFromSettings(t);return e=W.runHooks("modifyRowHeight",e,t)},this.countSourceRows=function(){var t=W.runHooks("modifySourceLength");return t||(W.getSourceData()?W.getSourceData().length:0)},this.countSourceCols=function(){var t=0,e=W.getSourceData()&&W.getSourceData()[0]?W.getSourceData()[0]:[];return t=(0,x.isObject)(e)?(0,x.deepObjectSize)(e):e.length||0},this.countRows=function(){return E.getLength()},this.countCols=function(){var t=this.getSettings().maxCols,e=!1,n=0;if("array"===W.dataType&&(e=b.settings.data&&b.settings.data[0]&&b.settings.data[0].length),e&&(n=b.settings.data[0].length),b.settings.columns){var i=(0,d.isFunction)(b.settings.columns);if(i)if("array"===W.dataType){for(var r=0,o=0;o<n;o++)b.settings.columns(o)&&r++;n=r}else"object"!==W.dataType&&"function"!==W.dataType||(n=E.colToPropCache.length);else n=b.settings.columns.length}else"object"!==W.dataType&&"function"!==W.dataType||(n=E.colToPropCache.length);return Math.min(t,n)},this.rowOffset=function(){return W.view.wt.wtTable.getFirstRenderedRow()},this.colOffset=function(){return W.view.wt.wtTable.getFirstRenderedColumn()},this.countRenderedRows=function(){return W.view.wt.drawn?W.view.wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return W.view.wt.drawn?W.view.wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return W.view.wt.drawn?W.view.wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return W.view.wt.drawn?W.view.wt.wtTable.getVisibleColumnsCount():-1},this.countEmptyRows=function(t){for(var e,n=W.countRows()-1,i=0;n>=0;){if(e=W.runHooks("modifyRow",n),W.isEmptyRow(e))i++;else if(t)break;n--}return i},this.countEmptyCols=function(t){if(W.countRows()<1)return 0;for(var e=W.countCols()-1,n=0;e>=0;){if(W.isEmptyCol(e))n++;else if(t)break;e--}return n},this.isEmptyRow=function(t){return b.settings.isEmptyRow.call(W,t)},this.isEmptyCol=function(t){return b.settings.isEmptyCol.call(W,t)},this.selectCell=function(t,e,n,i,r,o){var a;if(o=(0,f.isUndefined)(o)||o===!0,"number"!=typeof t||t<0||t>=W.countRows())return!1;if("number"!=typeof e||e<0||e>=W.countCols())return!1;if((0,f.isDefined)(n)){if("number"!=typeof n||n<0||n>=W.countRows())return!1;if("number"!=typeof i||i<0||i>=W.countCols())return!1}return a=new N.CellCoords(t,e),b.selRange=new N.CellRange(a,a,a),o&&W.listen(),(0,f.isUndefined)(n)?I.setRangeEnd(b.selRange.from,r):I.setRangeEnd(new N.CellCoords(n,i),r),W.selection.finish(),!0},this.selectCellByProp=function(t,e,n,i,r){var o;return arguments[1]=E.propToCol(arguments[1]),(0,f.isDefined)(arguments[3])&&(arguments[3]=E.propToCol(arguments[3])),(o=W).selectCell.apply(o,arguments)},this.deselectCell=function(){I.deselect()},this.scrollViewportTo=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==t&&(t<0||t>=W.countRows()))return!1;if(void 0!==e&&(e<0||e>=W.countCols()))return!1;var r=!1;return void 0!==t&&void 0!==e&&(W.view.wt.wtOverlays.topOverlay.scrollTo(t,n),W.view.wt.wtOverlays.leftOverlay.scrollTo(e,i),r=!0),"number"==typeof t&&"number"!=typeof e&&(W.view.wt.wtOverlays.topOverlay.scrollTo(t,n),r=!0),"number"==typeof e&&"number"!=typeof t&&(W.view.wt.wtOverlays.leftOverlay.scrollTo(e,i),r=!0),r},this.destroy=function(){W._clearTimeouts(),W.view&&W.view.destroy(),A&&A.destroy(),A=null,(0,c.empty)(W.rootElement),V.destroy(),W.runHooks("afterDestroy"),L["default"].getSingleton().destroy(W);for(var t in W)(0,x.hasOwnProperty)(W,t)&&((0,d.isFunction)(W[t])?W[t]=v:"guid"!==t&&(W[t]=null));E&&E.destroy(),E=null,b=null,z=null,I=null,B=null,W=null,Y=null},this.getActiveEditor=function(){return B.getActiveEditor()},this.getPlugin=function(t){return(0,k.getPlugin)(this,t)},this.getInstance=function(){return W},this.addHook=function(t,e){L["default"].getSingleton().add(t,e,W)},this.hasHook=function(t){return L["default"].getSingleton().has(t,W)},this.addHookOnce=function(t,e){L["default"].getSingleton().once(t,e,W)},this.removeHook=function(t,e){L["default"].getSingleton().remove(t,e,W)},this.runHooks=function(t,e,n,i,r,o,a){return L["default"].getSingleton().run(W,t,e,n,i,r,o,a)},this.timeouts=[],this._registerTimeout=function(t){this.timeouts.push(t)},this._clearTimeouts=function(){for(var t=0,e=this.timeouts.length;t<e;t++)clearTimeout(this.timeouts[t])},L["default"].getSingleton().run(W,"construct")}e.__esModule=!0;var a=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e["default"]=o;var l=n(87),u=i(l),c=n(0),h=n(65),d=n(35),f=n(20),p=n(25),g=n(198),m=i(g),v=n(200),y=i(v),b=n(4),w=i(b),x=n(1),_=n(2),k=n(5),C=n(9),S=n(26),M=n(27),T=n(6),E=n(269),O=i(E),A=n(199),D=i(A),R=n(64),P=n(153),N=n(11),z=n(8),L=i(z),I=n(88),H=i(I),j=n(62),F=null},function(t,e,n){"use strict";function i(t){for(var e=t+1,n="",i=void 0;e>0;)i=(e-1)%f,n=String.fromCharCode(65+i)+n,e=parseInt((e-i)/f,10);return n}function r(t){var e=0;if(t)for(var n=0,i=t.length-1;n<t.length;n+=1,i-=1)e+=Math.pow(f,i)*(d.indexOf(t[n])+1);return--e,e}function o(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,o=[];for(t=0;t<n;t++){var a=[];for(e=0;e<r;e++)a.push(i(e)+(t+1));o.push(a)}return o}function a(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,o=[];for(t=0;t<n;t++){var a={};for(e=0;e<r;e++)a["prop"+e]=i(e)+(t+1);o.push(a)}return o}function s(t,e){for(var n=[],i=void 0,r=0;r<t;r++){i=[];for(var o=0;o<e;o++)i.push("");n.push(i)}return n}function l(t){var e,n,i,r,o=[],a=0;for(e=0,n=t.length;e<n;e++)for(i=0,r=t[e].length;i<r;i++)i==a&&(o.push([]),a++),o[i].push(t[e][i]);return o}function u(t,e){return e="undefined"==typeof e||e,function(n,i){return function r(n){if(n){if((0,h.hasOwnProperty)(n,t)&&void 0!==n[t])return n[t];if((0,h.hasOwnProperty)(n,"type")&&n.type){var i;if("string"!=typeof n.type)throw new Error("Cell type must be a string ");if(i=(0,c.getCellType)(n.type),(0,h.hasOwnProperty)(i,t))return i[t];if(e)return}return r(Object.getPrototypeOf(n))}}("number"==typeof n?this.getCellMeta(n,i):n)}}e.__esModule=!0,e.spreadsheetColumnLabel=i,e.spreadsheetColumnIndex=r,e.createSpreadsheetData=o,e.createSpreadsheetObjectData=a,e.createEmptySpreadsheetData=s,e.translateRowsToColumns=l,e.cellMethodLookupFactory=u;var c=n(62),h=n(1),d="ABCDEFGHIJKLMNOPQRSTUVWXYZ",f=d.length},function(t,e,n){"use strict";function i(t,e){function n(){}(0,r.inherit)(n,t);for(var i=0,o=e.length;i<o;i++)n.prototype[e[i]]=void 0;return n}e.__esModule=!0,e.columnFactory=i;var r=n(1)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a=n(2),s=function(){function t(e){i(this,t),this.hot=e,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return r(t,[{key:"addRow",value:function(t,e){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={row:t};this.rows.push(n),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(t)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"addColumnHeadersRow",value:function(t){if(null!=this.hot.getColHeader(0)){var e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tHead.appendChild(this.createColumnHeadersRow()),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}},{key:"addColumn",value:function(t,e){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={col:t};this.columns.push(n),this.samples=e,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&null!==this.hot.getColHeader(t)&&this.hot.view.appendColHeader(t,this.table.th),this.table.tBody.appendChild(this.createCol(t)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"getHeights",value:function(t){this.injected||this.injectTable(),(0,a.arrayEach)(this.rows,function(e){t(e.row,(0,o.outerHeight)(e.table)-1)})}},{key:"getWidths",value:function(t){this.injected||this.injectTable(),(0,a.arrayEach)(this.columns,function(e){t(e.col,(0,o.outerWidth)(e.table))})}},{key:"setSettings",value:function(t){this.settings=t}},{key:"setSetting",value:function(t,e){this.settings||(this.settings={}),this.settings[t]=e}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(t){return this.settings?this.settings[t]:null}},{key:"createColGroupsCol",value:function(){var t=this,e=document,n=e.createDocumentFragment();return this.hot.hasRowHeaders()&&n.appendChild(this.createColElement(-1)),this.samples.forEach(function(e){(0,a.arrayEach)(e.strings,function(e){n.appendChild(t.createColElement(e.col))})}),n}},{key:"createRow",value:function(t){var e=this,n=document,i=n.createDocumentFragment(),r=n.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(t,r),i.appendChild(r)),this.samples.forEach(function(r){(0,a.arrayEach)(r.strings,function(r){var o=r.col,a=e.hot.getCellMeta(t,o);a.col=o,a.row=t;var s=e.hot.getCellRenderer(a),l=n.createElement("td");s(e.hot,l,t,o,e.hot.colToProp(o),r.value,a),i.appendChild(l)})}),i}},{key:"createColumnHeadersRow",value:function(){var t=this,e=document,n=e.createDocumentFragment();if(this.hot.hasRowHeaders()){var i=e.createElement("th");this.hot.view.appendColHeader(-1,i),n.appendChild(i)}return this.samples.forEach(function(i){(0,a.arrayEach)(i.strings,function(i){var r=i.col,o=e.createElement("th");t.hot.view.appendColHeader(r,o),n.appendChild(o)})}),n}},{key:"createCol",value:function(t){var e=this,n=document,i=n.createDocumentFragment();return this.samples.forEach(function(r){(0,a.arrayEach)(r.strings,function(r){var o=r.row,a=e.hot.getCellMeta(o,t);a.col=t,a.row=o;var s=e.hot.getCellRenderer(a),l=n.createElement("td"),u=n.createElement("tr");s(e.hot,l,o,t,e.hot.colToProp(t),r.value,a),u.appendChild(l),i.appendChild(u)})}),i}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.injected||((t||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(t){var e=document,n=e.createElement("col");return n.style.width=this.hot.view.wt.wtTable.getStretchedColumnWidth(t)+"px",n}},{key:"createTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document,n=e.createDocumentFragment(),i=e.createElement("table"),r=e.createElement("thead"),a=e.createElement("tbody"),s=e.createElement("colgroup"),l=e.createElement("tr"),u=e.createElement("th");return this.isVertical()&&i.appendChild(s),this.isHorizontal()&&(l.appendChild(u),r.appendChild(l),i.style.tableLayout="auto",i.style.width="auto"),i.appendChild(r),this.isVertical()&&a.appendChild(l),i.appendChild(a),(0,o.addClass)(i,t),n.appendChild(i),{fragment:n,table:i,tHead:r,tBody:a,colGroup:s,tr:l,th:u}}},{key:"createContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document,n=e.createDocumentFragment(),i=e.createElement("div");return t="htGhostTable htAutoSize "+t.trim(),(0,o.addClass)(i,t),n.appendChild(i),{fragment:n,container:i}}},{key:"isVertical",value:function(){return!(!this.rows.length||this.columns.length)}},{key:"isHorizontal",value:function(){return!(!this.columns.length||this.rows.length)}}]),t}();e["default"]=s},function(t,e,n){"use strict";var i=n(37),r=n(167),o=n(45),a=n(23);t.exports=n(166)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(42),s=i(a),l=function(){function t(e,n,i){r(this,t),this.highlight=e,this.from=n,this.to=i}return o(t,[{
key:"isValid",value:function(t){return this.from.isValid(t)&&this.to.isValid(t)}},{key:"isSingle",value:function(){return this.from.row===this.to.row&&this.from.col===this.to.col}},{key:"getHeight",value:function(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}},{key:"getWidth",value:function(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}},{key:"includes",value:function(t){var e=t.row,n=t.col,i=this.getTopLeftCorner(),r=this.getBottomRightCorner();return i.row<=e&&r.row>=e&&i.col<=n&&r.col>=n}},{key:"includesRange",value:function(t){return this.includes(t.getTopLeftCorner())&&this.includes(t.getBottomRightCorner())}},{key:"isEqual",value:function(t){return Math.min(this.from.row,this.to.row)==Math.min(t.from.row,t.to.row)&&Math.max(this.from.row,this.to.row)==Math.max(t.from.row,t.to.row)&&Math.min(this.from.col,this.to.col)==Math.min(t.from.col,t.to.col)&&Math.max(this.from.col,this.to.col)==Math.max(t.from.col,t.to.col)}},{key:"overlaps",value:function(t){return t.isSouthEastOf(this.getTopLeftCorner())&&t.isNorthWestOf(this.getBottomRightCorner())}},{key:"isSouthEastOf",value:function(t){return this.getTopLeftCorner().isSouthEastOf(t)||this.getBottomRightCorner().isSouthEastOf(t)}},{key:"isNorthWestOf",value:function(t){return this.getTopLeftCorner().isNorthWestOf(t)||this.getBottomRightCorner().isNorthWestOf(t)}},{key:"expand",value:function(t){var e=this.getTopLeftCorner(),n=this.getBottomRightCorner();return(t.row<e.row||t.col<e.col||t.row>n.row||t.col>n.col)&&(this.from=new s["default"](Math.min(e.row,t.row),Math.min(e.col,t.col)),this.to=new s["default"](Math.max(n.row,t.row),Math.max(n.col,t.col)),!0)}},{key:"expandByRange",value:function(e){if(this.includesRange(e)||!this.overlaps(e))return!1;var n=this.getTopLeftCorner(),i=this.getBottomRightCorner(),r=(this.getTopRightCorner(),this.getBottomLeftCorner(),e.getTopLeftCorner()),o=e.getBottomRightCorner(),a=Math.min(n.row,r.row),l=Math.min(n.col,r.col),u=Math.max(i.row,o.row),c=Math.max(i.col,o.col),h=new s["default"](a,l),d=new s["default"](u,c),f=new t(h,h,d).isCorner(this.from,e),p=e.isEqual(new t(h,h,d));return f&&!p&&(this.from.col>h.col&&(h.col=c,d.col=l),this.from.row>h.row&&(h.row=u,d.row=a)),this.from=h,this.to=d,!0}},{key:"getDirection",value:function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0}},{key:"setDirection",value:function(t){switch(t){case"NW-SE":var e=[this.getTopLeftCorner(),this.getBottomRightCorner()];this.from=e[0],this.to=e[1];break;case"NE-SW":var n=[this.getTopRightCorner(),this.getBottomLeftCorner()];this.from=n[0],this.to=n[1];break;case"SE-NW":var i=[this.getBottomRightCorner(),this.getTopLeftCorner()];this.from=i[0],this.to=i[1];break;case"SW-NE":var r=[this.getBottomLeftCorner(),this.getTopRightCorner()];this.from=r[0],this.to=r[1]}}},{key:"getTopLeftCorner",value:function(){return new s["default"](Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}},{key:"getBottomRightCorner",value:function(){return new s["default"](Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}},{key:"getTopRightCorner",value:function(){return new s["default"](Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}},{key:"getBottomLeftCorner",value:function(){return new s["default"](Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}},{key:"isCorner",value:function(t,e){return!!(e&&e.includes(t)&&(this.getTopLeftCorner().isEqual(new s["default"](e.from.row,e.from.col))||this.getTopRightCorner().isEqual(new s["default"](e.from.row,e.to.col))||this.getBottomLeftCorner().isEqual(new s["default"](e.to.row,e.from.col))||this.getBottomRightCorner().isEqual(new s["default"](e.to.row,e.to.col))))||(t.isEqual(this.getTopLeftCorner())||t.isEqual(this.getTopRightCorner())||t.isEqual(this.getBottomLeftCorner())||t.isEqual(this.getBottomRightCorner()))}},{key:"getOppositeCorner",value:function(t,e){if(!(t instanceof s["default"]))return!1;if(e&&e.includes(t)){if(this.getTopLeftCorner().isEqual(new s["default"](e.from.row,e.from.col)))return this.getBottomRightCorner();if(this.getTopRightCorner().isEqual(new s["default"](e.from.row,e.to.col)))return this.getBottomLeftCorner();if(this.getBottomLeftCorner().isEqual(new s["default"](e.to.row,e.from.col)))return this.getTopRightCorner();if(this.getBottomRightCorner().isEqual(new s["default"](e.to.row,e.to.col)))return this.getTopLeftCorner()}return t.isEqual(this.getBottomRightCorner())?this.getTopLeftCorner():t.isEqual(this.getTopLeftCorner())?this.getBottomRightCorner():t.isEqual(this.getTopRightCorner())?this.getBottomLeftCorner():t.isEqual(this.getBottomLeftCorner())?this.getTopRightCorner():void 0}},{key:"getBordersSharedWith",value:function(t){if(!this.includesRange(t))return[];var e={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},n={top:Math.min(t.from.row,t.to.row),bottom:Math.max(t.from.row,t.to.row),left:Math.min(t.from.col,t.to.col),right:Math.max(t.from.col,t.to.col)},i=[];return e.top==n.top&&i.push("top"),e.right==n.right&&i.push("right"),e.bottom==n.bottom&&i.push("bottom"),e.left==n.left&&i.push("left"),i}},{key:"getInner",value:function(){for(var t=this.getTopLeftCorner(),e=this.getBottomRightCorner(),n=[],i=t.row;i<=e.row;i++)for(var r=t.col;r<=e.col;r++)this.from.row===i&&this.from.col===r||this.to.row===i&&this.to.col===r||n.push(new s["default"](i,r));return n}},{key:"getAll",value:function(){for(var t=this.getTopLeftCorner(),e=this.getBottomRightCorner(),n=[],i=t.row;i<=e.row;i++)for(var r=t.col;r<=e.col;r++)t.row===i&&t.col===r?n.push(t):e.row===i&&e.col===r?n.push(e):n.push(new s["default"](i,r));return n}},{key:"forAll",value:function(t){for(var e=this.getTopLeftCorner(),n=this.getBottomRightCorner(),i=e.row;i<=n.row;i++)for(var r=e.col;r<=n.col;r++){var o=t(i,r);if(o===!1)return}}}]),t}();e["default"]=l},function(t,e,n){"use strict";e.__esModule=!0;var i=n(2),r=n(1),o="localHooks",a={_localHooks:Object.create(null),addLocalHook:function(t,e){this._localHooks[t]||(this._localHooks[t]=[]),this._localHooks[t].push(e)},runLocalHooks:function(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this._localHooks[t]&&(0,i.arrayEach)(this._localHooks[t],function(t){return t.apply(e,r)})},clearLocalHooks:function(){this._localHooks={}}};(0,r.defineGetter)(a,"MIXIN_NAME",o,{writable:!1,enumerable:!1}),e["default"]=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(){var t={};return(0,w.objectEach)(N,function(e,n){t[n]=e()}),t}function a(t,e){P.indexOf(t)===-1&&(N[t]=e)}e.__esModule=!0,e.ITEMS=e.UNDO=e.SEPARATOR=e.ROW_BELOW=e.ROW_ABOVE=e.REMOVE_ROW=e.REMOVE_COLUMN=e.REDO=e.READ_ONLY=e.COLUMN_RIGHT=e.COLUMN_LEFT=e.CLEAR_COLUMN=e.ALIGNMENT=void 0;var s,l=n(223);Object.defineProperty(e,"ALIGNMENT",{enumerable:!0,get:function(){return l.KEY}});var u=n(224);Object.defineProperty(e,"CLEAR_COLUMN",{enumerable:!0,get:function(){return u.KEY}});var c=n(225);Object.defineProperty(e,"COLUMN_LEFT",{enumerable:!0,get:function(){return c.KEY}});var h=n(226);Object.defineProperty(e,"COLUMN_RIGHT",{enumerable:!0,get:function(){return h.KEY}});var d=n(227);Object.defineProperty(e,"READ_ONLY",{enumerable:!0,get:function(){return d.KEY}});var f=n(228);Object.defineProperty(e,"REDO",{enumerable:!0,get:function(){return f.KEY}});var p=n(229);Object.defineProperty(e,"REMOVE_COLUMN",{enumerable:!0,get:function(){return p.KEY}});var g=n(230);Object.defineProperty(e,"REMOVE_ROW",{enumerable:!0,get:function(){return g.KEY}});var m=n(231);Object.defineProperty(e,"ROW_ABOVE",{enumerable:!0,get:function(){return m.KEY}});var v=n(232);Object.defineProperty(e,"ROW_BELOW",{enumerable:!0,get:function(){return v.KEY}});var y=n(71);Object.defineProperty(e,"SEPARATOR",{enumerable:!0,get:function(){return y.KEY}});var b=n(233);Object.defineProperty(e,"UNDO",{enumerable:!0,get:function(){return b.KEY}}),e.predefinedItems=o,e.addItem=a;var w=n(1),x=i(l),_=i(u),k=i(c),C=i(h),S=i(d),M=i(f),T=i(p),E=i(g),O=i(m),A=i(v),D=i(y),R=i(b),P=e.ITEMS=[m.KEY,v.KEY,c.KEY,h.KEY,u.KEY,g.KEY,p.KEY,b.KEY,f.KEY,d.KEY,l.KEY,y.KEY],N=(s={},r(s,y.KEY,D["default"]),r(s,m.KEY,O["default"]),r(s,v.KEY,A["default"]),r(s,c.KEY,k["default"]),r(s,h.KEY,C["default"]),r(s,u.KEY,_["default"]),r(s,g.KEY,E["default"]),r(s,p.KEY,T["default"]),r(s,b.KEY,R["default"]),r(s,f.KEY,M["default"]),r(s,d.KEY,S["default"]),r(s,l.KEY,x["default"]),s)},function(t,e,n){"use strict";function i(){return{name:r}}e.__esModule=!0,e["default"]=i;var r=e.KEY="---------"},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var i=n(19),r=n(40);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var i=n(15),r=n(13).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(10)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(r){}}return!0}},function(t,e,n){var i=n(38);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(10)("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},t(o)}catch(s){}return n}},function(t,e,n){var i=n(18),r=n(288),o=n(75),a=n(82)("IE_PROTO"),s=function(){},l="prototype",u=function(){var t,e=n(74)("iframe"),i=o.length,r="<",a=">";for(e.style.display="none",n(159).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+a+"document.F=Object"+r+"/script"+a),t.close(),u=t.F;i--;)delete u[l][o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[l]=i(t),n=new s,s[l]=null,n[a]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(47),r=n(40),o=n(23),a=n(86),s=n(22),l=n(160),u=Object.getOwnPropertyDescriptor;e.f=n(21)?u:function(t,e){if(t=o(t),e=a(e,!0),l)try{return u(t,e)}catch(n){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(169),r=n(75).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(83)("keys"),r=n(49);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(13),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var i=n(164),r=n(30);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},function(t,e,n){var i,r,o,a=n(29),s=n(284),l=n(159),u=n(74),c=n(13),h=c.process,d=c.setImmediate,f=c.clearImmediate,p=c.MessageChannel,g=0,m={},v="onreadystatechange",y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},b=function(t){y.call(t.data)};d&&f||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){s("function"==typeof t?t:Function(t),e)},i(g),g},f=function(t){delete m[t]},"process"==n(38)(h)?i=function(t){h.nextTick(a(y,t,1))}:p?(r=new p,o=r.port2,r.port1.onmessage=b,i=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):i=v in u("script")?function(t){l.appendChild(u("script"))[v]=function(){l.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),t.exports={set:d,clear:f}},function(t,e,n){var i=n(15);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,n){t.exports=e},function(t,e,n){"use strict";function i(){}e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(20),a=n(1);i.prototype={data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:void 0,colHeaders:null,colWidths:void 0,rowHeights:void 0,columns:void 0,cells:void 0,cell:[],comments:!1,customBorders:!1,minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,allowInsertRow:!0,allowInsertColumn:!0,allowRemoveRow:!0,allowRemoveColumn:!0,multiSelect:!0,fillHandle:!0,fixedRowsTop:0,fixedRowsBottom:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,persistentState:void 0,currentRowClassName:void 0,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",className:void 0,tableClassName:void 0,stretchH:"none",isEmptyRow:function(t){var e,n,i,s;for(e=0,n=this.countCols();e<n;e++)if(i=this.getDataAtCell(t,e),""!==i&&null!==i&&(0,o.isDefined)(i))return"object"===("undefined"==typeof i?"undefined":r(i))&&(s=this.getCellMeta(t,e),(0,a.isObjectEquals)(this.getSchema()[s.prop],i));return!0},isEmptyCol:function(t){var e,n,i;for(e=0,n=this.countRows();e<n;e++)if(i=this.getDataAtCell(e,t),""!==i&&null!==i&&(0,o.isDefined)(i))return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,allowEmpty:!0,invalidCellClassName:"htInvalid",placeholder:!1,placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",renderer:void 0,commentedCellClassName:"htCommentCell",fragmentSelection:!1,readOnly:!1,skipColumnOnPaste:!1,search:!1,type:"text",copyable:!0,editor:void 0,autoComplete:void 0,visibleRows:10,trimDropdown:!0,debug:!1,wordWrap:!0,noWordWrapClassName:"htNoWrap",contextMenu:void 0,copyPaste:!0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,mergeCells:!1,viewportRowRenderingOffset:"auto",viewportColumnRenderingOffset:"auto",validator:void 0,disableVisualSelection:!1,sortIndicator:void 0,manualColumnFreeze:void 0,trimWhitespace:!0,settings:void 0,source:void 0,title:void 0,checkedTemplate:void 0,uncheckedTemplate:void 0,label:void 0,format:void 0,language:void 0,selectOptions:void 0,autoColumnSize:void 0,autoRowSize:void 0,dateFormat:void 0,correctFormat:!1,defaultDate:void 0,strict:void 0,allowHtml:!1,renderAllRows:void 0,preventOverflow:!1,bindRowsWithHeaders:void 0,collapsibleColumns:void 0,columnSummary:void 0,dropdownMenu:void 0,filters:void 0,formulas:void 0,ganttChart:void 0,headerTooltips:void 0,hiddenColumns:void 0,hiddenRows:void 0,nestedHeaders:void 0,trimRows:void 0,rowHeaderWidth:void 0,columnHeaderHeight:void 0,observeChanges:void 0,sortFunction:void 0,sortByRelevance:!0,filter:!0,filteringCaseSensitive:!1},e["default"]=i},function(t,e,n){"use strict";function i(t){var e=new Date(t);return isNaN(new Date(t+"T00:00").getDate())?e:new Date(e.getTime()+6e4*e.getTimezoneOffset())}e.__esModule=!0,e.getNormalizedDate=i},function(t,e,n){var i=n(3);i(i.P,"Array",{copyWithin:n(277)}),n(37)("copyWithin")},function(t,e,n){var i=n(3);i(i.P,"Array",{fill:n(278)}),n(37)("fill")},function(t,e,n){"use strict";var i=n(3),r=n(52)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(37)(o)},function(t,e,n){"use strict";var i=n(3),r=n(52)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(37)(o)},function(t,e,n){"use strict";var i=n(29),r=n(3),o=n(41),a=n(165),s=n(161),l=n(24),u=n(73),c=n(176);r(r.S+r.F*!n(78)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,h,d=o(t),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=0,y=c(d);if(m&&(g=i(g,p>2?arguments[2]:void 0,2)),void 0==y||f==Array&&s(y))for(e=l(d.length),n=new f(e);e>v;v++)u(n,v,m?g(d[v],v):d[v]);else for(h=y.call(d),n=new f;!(r=h.next()).done;v++)u(n,v,m?a(h,g,[r.value,v],!0):r.value);return n.length=v,n}})},function(t,e,n){"use strict";var i=n(3),r=n(73);i(i.S+i.F*n(31)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)r(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){var i=n(19).f,r=n(40),o=n(22),a=Function.prototype,s=/^\s*function ([^ (]*)/,l="name",u=Object.isExtensible||function(){return!0};l in a||n(21)&&i(a,l,{configurable:!0,get:function(){try{var t=this,e=(""+t).match(s)[1];return o(t,l)||!u(t)||i(t,l,r(5,e)),e}catch(n){return""}}})},function(t,e,n){"use strict";var i=n(157);t.exports=n(53)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(this,t);return e&&e.v},set:function(t,e){return i.def(this,0===t?0:t,e)}},i,!0)},function(t,e,n){var i=n(3);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(3),r=n(13).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,n){var i=n(3);i(i.S,"Number",{isInteger:n(163)})},function(t,e,n){var i=n(3);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(3),r=n(163),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return r(t)&&o(t)<=9007199254740991}})},function(t,e,n){var i=n(3);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(3);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(3);i(i.S+i.F,"Object",{assign:n(168)})},function(t,e,n){var i=n(3);i(i.S,"Object",{is:n(292)})},function(t,e,n){var i=n(3);i(i.S,"Object",{setPrototypeOf:n(171).set})},function(t,e,n){"use strict";var i,r,o,a=n(56),s=n(13),l=n(29),u=n(156),c=n(3),h=n(15),d=n(72),f=n(51),p=n(55),g=n(293),m=n(85).set,v=n(287)(),y="Promise",b=s.TypeError,w=s.process,x=s[y],w=s.process,_="process"==u(w),k=function(){},C=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[n(10)("species")]=function(t){t(k,k)};return(_||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e}catch(i){}}(),S=function(t,e){return t===e||t===x&&e===o},M=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},T=function(t){return S(x,t)?new E(t):new r(t)},E=r=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw b("Bad Promise constructor");e=t,n=i}),this.resolve=d(e),this.reject=d(n)},O=function(t){try{t()}catch(e){return{error:e}}},A=function(t,e){if(!t._n){t._n=!0;var n=t._c;v(function(){for(var i=t._v,r=1==t._s,o=0,a=function(e){var n,o,a=r?e.ok:e.fail,s=e.resolve,l=e.reject,u=e.domain;try{a?(r||(2==t._h&&P(t),t._h=1),a===!0?n=i:(u&&u.enter(),n=a(i),u&&u.exit()),n===e.promise?l(b("Promise-chain cycle")):(o=M(n))?o.call(n,s,l):s(n)):l(i)}catch(c){l(c)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&D(t)})}},D=function(t){m.call(s,function(){var e,n,i,r=t._v;if(R(t)&&(e=O(function(){_?w.emit("unhandledRejection",r,t):(n=s.onunhandledrejection)?n({promise:t,reason:r}):(i=s.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=_||R(t)?2:1),t._a=void 0,e)throw e.error})},R=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if(e=n[i++],e.fail||!R(e.promise))return!1;return!0},P=function(t){m.call(s,function(){var e;_?w.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},z=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw b("Promise can't be resolved itself");(e=M(t))?v(function(){var i={_w:n,_d:!1};try{e.call(t,l(z,i,1),l(N,i,1))}catch(r){N.call(i,r)}}):(n._v=t,n._s=1,A(n,!1))}catch(i){N.call({_w:n,_d:!1},i)}}};C||(x=function(t){f(this,x,y,"_h"),d(t),i.call(this);try{t(l(z,this,1),l(N,this,1))}catch(e){N.call(this,e)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(58)(x.prototype,{then:function(t,e){var n=T(g(this,x));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=_?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),E=function(){var t=new i;this.promise=t,this.resolve=l(z,t,1),this.reject=l(N,t,1)}),c(c.G+c.W+c.F*!C,{Promise:x}),n(48)(x,y),n(172)(y),o=n(44)[y],c(c.S+c.F*!C,y,{reject:function(t){var e=T(this),n=e.reject;return n(t),e.promise}}),c(c.S+c.F*(a||!C),y,{resolve:function(t){if(t instanceof x&&S(t.constructor,this))return t;var e=T(this),n=e.resolve;return n(t),e.promise}}),c(c.S+c.F*!(C&&n(78)(function(t){x.all(t)["catch"](k)})),y,{all:function(t){var e=this,n=T(e),i=n.resolve,r=n.reject,o=O(function(){var n=[],o=0,a=1;p(t,!1,function(t){var s=o++,l=!1;n.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--a||i(n))},r)}),--a||i(n)});return o&&r(o.error),n.promise},race:function(t){var e=this,n=T(e),i=n.reject,r=O(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},function(t,e,n){n(21)&&"g"!=/./g.flags&&n(19).f(RegExp.prototype,"flags",{configurable:!0,get:n(282)})},function(t,e,n){n(54)("match",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){n(54)("replace",2,function(t,e,n){return[function(i,r){"use strict";var o=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,o,r):n.call(String(o),i,r)},n]})},function(t,e,n){n(54)("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){n(54)("split",2,function(t,e,i){"use strict";var r=n(164),o=i,a=[].push,s="split",l="length",u="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[l]||2!="ab"[s](/(?:ab)*/)[l]||4!="."[s](/(.?)(.?)/)[l]||"."[s](/()()/)[l]>1||""[s](/.?/)[l]){var c=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return o.call(n,t,e);var i,s,h,d,f,p=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,v=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,g+"g");for(c||(i=new RegExp("^"+y.source+"$(?!\\s)",g));(s=y.exec(n))&&(h=s.index+s[0][l],!(h>m&&(p.push(n.slice(m,s.index)),!c&&s[l]>1&&s[0].replace(i,function(){for(f=1;f<arguments[l]-2;f++)void 0===arguments[f]&&(s[f]=void 0)}),s[l]>1&&s.index<n[l]&&a.apply(p,s.slice(1)),d=s[0][l],m=h,p[l]>=v)));)y[u]===s.index&&y[u]++;return m===n[l]?!d&&y.test("")||p.push(""):p.push(n.slice(m)),p[l]>v?p.slice(0,v):p}}else"0"[s](void 0,0)[l]&&(i=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,r){var o=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,o,r):i.call(String(o),n,r)},i]})},function(t,e,n){"use strict";var i=n(157);t.exports=n(53)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i=n(3),r=n(294)(!1);i(i.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(3),r=n(24),o=n(84),a="endsWith",s=""[a];i(i.P+i.F*n(76)(a),"String",{endsWith:function(t){var e=o(this,t,a),n=arguments.length>1?arguments[1]:void 0,i=r(e.length),l=void 0===n?i:Math.min(r(n),i),u=String(t);return s?s.call(e,u,l):e.slice(l-u.length,l)===u}})},function(t,e,n){var i=n(3),r=n(59),o=String.fromCharCode,a=String.fromCodePoint;i(i.S+i.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,a=0;i>a;){if(e=+arguments[a++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){"use strict";var i=n(3),r=n(84),o="includes";i(i.P+i.F*n(76)(o),"String",{includes:function(t){return!!~r(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(3),r=n(23),o=n(24);i(i.S,"String",{raw:function(t){for(var e=r(t.raw),n=o(e.length),i=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<i&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){var i=n(3);i(i.P,"String",{repeat:n(174)})},function(t,e,n){"use strict";var i=n(3),r=n(24),o=n(84),a="startsWith",s=""[a];i(i.P+i.F*n(76)(a),"String",{startsWith:function(t){var e=o(this,t,a),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return s?s.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";var i=n(13),r=n(22),o=n(21),a=n(3),s=n(33),l=n(46).KEY,u=n(31),c=n(83),h=n(48),d=n(49),f=n(10),p=n(175),g=n(295),m=n(286),v=n(281),y=n(162),b=n(18),w=n(23),x=n(86),_=n(40),k=n(79),C=n(289),S=n(80),M=n(19),T=n(39),E=S.f,O=M.f,A=C.f,D=i.Symbol,R=i.JSON,P=R&&R.stringify,N="prototype",z=f("_hidden"),L=f("toPrimitive"),I={}.propertyIsEnumerable,H=c("symbol-registry"),j=c("symbols"),F=c("op-symbols"),B=Object[N],W="function"==typeof D,Y=i.QObject,V=!Y||!Y[N]||!Y[N].findChild,U=o&&u(function(){return 7!=k(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=E(B,e);i&&delete B[e],O(t,e,n),i&&t!==B&&O(B,e,i)}:O,q=function(t){var e=j[t]=k(D[N]);return e._k=t,e},X=W&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},G=function(t,e,n){return t===B&&G(F,e,n),b(t),e=x(e,!0),b(n),r(j,e)?(n.enumerable?(r(t,z)&&t[z][e]&&(t[z][e]=!1),n=k(n,{enumerable:_(0,!1)})):(r(t,z)||O(t,z,_(1,{})),t[z][e]=!0),U(t,e,n)):O(t,e,n)},$=function(t,e){b(t);for(var n,i=v(e=w(e)),r=0,o=i.length;o>r;)G(t,n=i[r++],e[n]);return t},K=function(t,e){return void 0===e?k(t):$(k(t),e)},Z=function(t){var e=I.call(this,t=x(t,!0));return!(this===B&&r(j,t)&&!r(F,t))&&(!(e||!r(this,t)||!r(j,t)||r(this,z)&&this[z][t])||e)},Q=function(t,e){if(t=w(t),e=x(e,!0),t!==B||!r(j,e)||r(F,e)){var n=E(t,e);return!n||!r(j,e)||r(t,z)&&t[z][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=A(w(t)),i=[],o=0;n.length>o;)r(j,e=n[o++])||e==z||e==l||i.push(e);return i},tt=function(t){for(var e,n=t===B,i=A(n?F:w(t)),o=[],a=0;i.length>a;)!r(j,e=i[a++])||n&&!r(B,e)||o.push(j[e]);return o};W||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(F,n),r(this,z)&&r(this[z],t)&&(this[z][t]=!1),U(this,t,_(1,n))};return o&&V&&U(B,t,{configurable:!0,set:e}),q(t)},s(D[N],"toString",function(){return this._k}),S.f=Q,M.f=G,n(81).f=C.f=J,n(47).f=Z,n(57).f=tt,o&&!n(56)&&s(B,"propertyIsEnumerable",Z,!0),p.f=function(t){return q(f(t))}),a(a.G+a.W+a.F*!W,{Symbol:D});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)f(et[nt++]);for(var et=T(f.store),nt=0;et.length>nt;)g(et[nt++]);a(a.S+a.F*!W,"Symbol",{"for":function(t){return r(H,t+="")?H[t]:H[t]=D(t)},keyFor:function(t){if(X(t))return m(H,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!W,"Object",{create:K,defineProperty:G,defineProperties:$,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:tt}),R&&a(a.S+a.F*(!W||u(function(){var t=D();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!X(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return e=i[1],"function"==typeof e&&(n=e),!n&&y(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!X(e))return e}),i[1]=e,P.apply(R,i)}}}),D[N][L]||n(32)(D[N],L,D[N].valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e,n){"use strict";var i,r=n(52)(0),o=n(33),a=n(46),s=n(168),l=n(158),u=n(15),c=a.getWeak,h=Object.isExtensible,d=l.ufstore,f={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(u(t)){var e=c(t);return e===!0?d(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(this,t,e)}},m=t.exports=n(53)("WeakMap",p,g,l,!0,!0);7!=(new m).set((Object.freeze||Object)(f),7).get(f)&&(i=l.getConstructor(p),s(i.prototype,g),a.NEED=!0,r(["delete","has","get","set"],function(t){var e=m.prototype,n=e[t];o(e,t,function(e,r){if(u(e)&&!h(e)){this._f||(this._f=new i);var o=this._f[t](e,r);return"set"==t?this:o}return n.call(this,e,r)})}))},function(t,e,n){"use strict";var i=n(158);n(53)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(3),r=n(155)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(37)("includes")},function(t,e,n){var i=n(3),r=n(170)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){var i=n(3),r=n(291),o=n(23),a=n(80),s=n(73);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n=o(t),i=a.f,l=r(n),u={},c=0;l.length>c;)s(u,e=l[c++],i(n,e));return u}})},function(t,e,n){var i=n(3),r=n(170)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(3),r=n(173);i(i.P,"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";var i=n(3),r=n(173);i(i.P,"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){for(var i=n(67),r=n(33),o=n(13),a=n(32),s=n(45),l=n(10),u=l("iterator"),c=l("toStringTag"),h=s.Array,d=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var p,g=d[f],m=o[g],v=m&&m.prototype;if(v){v[u]||a(v,u,h),v[c]||a(v,c,g),s[g]=h;for(p in i)v[p]||r(v,p,i[p],!0)}}},function(t,e,n){var i=n(3),r=n(85);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,n){"use strict";!function(t){function n(t){return t.split('"').length-1}var i={parse:function(t){var e,i,r,o,a,s,l,u=[],c=0;for(r=t.split("\n"),r.length>1&&""===r[r.length-1]&&r.pop(),e=0,i=r.length;e<i;e+=1){for(r[e]=r[e].split("\t"),o=0,a=r[e].length;o<a;o+=1)u[c]||(u[c]=[]),s&&0===o?(l=u[c].length-1,u[c][l]=u[c][l]+"\n"+r[e][0],s&&1&n(r[e][0])&&(s=!1,u[c][l]=u[c][l].substring(0,u[c][l].length-1).replace(/""/g,'"'))):o===a-1&&0===r[e][o].indexOf('"')&&1&n(r[e][o])?(u[c].push(r[e][o].substring(1).replace(/""/g,'"')),s=!0):(u[c].push(r[e][o].replace(/""/g,'"')),s=!1);s||(c+=1)}return u},stringify:function(t){var e,n,i,r,o,a="";for(e=0,n=t.length;e<n;e+=1){for(r=t[e].length,i=0;i<r;i+=1)i>0&&(a+="\t"),o=t[e][i],a+="string"==typeof o?o.indexOf("\n")>-1?'"'+o.replace(/"/g,'""')+'"':o:null===o||void 0===o?"":o;e!==n-1&&(a+="\n")}return a}};e.parse=i.parse,e.stringify=i.stringify}(window)},function(t,e,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=Error;!function(t){
function e(t,n){switch("undefined"==typeof t?"undefined":r(t)){case"undefined":case"boolean":case"string":case"number":return t===n;case"object":if(null===t)return null===n;if(T(t)){if(!T(n)||t.length!==n.length)return!1;for(var i=0,o=t.length;i<o;i++)if(!e(t[i],n[i]))return!1;return!0}var a=w(n),s=a.length;if(w(t).length!==s)return!1;for(var i=0;i<s;i++)if(!e(t[i],n[i]))return!1;return!0;default:return!1}}function n(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function i(t){for(var e=0,n=C.length;e<n;e++)if(C[e].obj===t)return C[e]}function s(t,e){for(var n=0,i=t.observers.length;n<i;n++)if(t.observers[n].callback===e)return t.observers[n].observer}function l(t,e){for(var n=0,i=t.observers.length;n<i;n++)if(t.observers[n].observer===e)return void t.observers.splice(n,1)}function u(t,e){e.unobserve()}function c(t){return"object"===("undefined"==typeof t?"undefined":r(t))?JSON.parse(JSON.stringify(t)):t}function h(t,e){var n,r=[],o=i(t);if(o?n=s(o,e):(o=new S(t),C.push(o)),n)return n;if(n={},o.value=c(t),e){n.callback=e,n.next=null;var u=this.intervals||[100,1e3,1e4,6e4];if(void 0===u.push)throw new a("jsonpatch.intervals must be an array");var h=0,f=function(){d(n)},p=function(){clearTimeout(n.next),n.next=setTimeout(function(){f(),h=0,n.next=setTimeout(g,u[h++])},0)},g=function m(){f(),h==u.length&&(h=u.length-1),n.next=setTimeout(m,u[h++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",p),window.addEventListener("mouseup",p),window.addEventListener("keydown",p)):(document.documentElement.attachEvent("onmousedown",p),document.documentElement.attachEvent("onmouseup",p),document.documentElement.attachEvent("onkeydown",p))),n.next=setTimeout(g,u[h++])}return n.patches=r,n.object=t,n.unobserve=function(){d(n),clearTimeout(n.next),l(o,n),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mousedown",p),window.removeEventListener("mouseup",p),window.removeEventListener("keydown",p)):(document.documentElement.detachEvent("onmousedown",p),document.documentElement.detachEvent("onmouseup",p),document.documentElement.detachEvent("onkeydown",p)))},o.observers.push(new M(e,n)),n}function d(t){for(var e,n=0,i=C.length;n<i;n++)if(C[n].obj===t.object){e=C[n];break}f(e.value,t.object,t.patches,""),t.patches.length&&g(e.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function f(t,e,i,o){for(var a=w(e),s=w(t),l=!1,u=!1,h=s.length-1;h>=0;h--){var d=s[h],p=t[d];if(e.hasOwnProperty(d)){var g=e[d];"object"==("undefined"==typeof p?"undefined":r(p))&&null!=p&&"object"==("undefined"==typeof g?"undefined":r(g))&&null!=g?f(p,g,i,o+"/"+n(d)):p!=g&&(l=!0,i.push({op:"replace",path:o+"/"+n(d),value:c(g)}))}else i.push({op:"remove",path:o+"/"+n(d)}),u=!0}if(u||a.length!=s.length)for(var h=0;h<a.length;h++){var d=a[h];t.hasOwnProperty(d)||i.push({op:"add",path:o+"/"+n(d),value:c(e[d])})}}function p(t){for(var e,n=0,i=t.length;n<i;){e=t.charCodeAt(n);{if(!(e>=48&&e<=57))return!1;n++}}return!0}function g(t,e,n){for(var i,r,o=!1,a=0,s=e.length;a<s;){i=e[a],a++;for(var l=i.path||"",u=l.split("/"),c=t,h=1,d=u.length,f=void 0;;){if(r=u[h],n&&void 0===f&&(void 0===c[r]?f=u.slice(0,h).join("/"):h==d-1&&(f=i.path),void 0!==f&&this.validator(i,a-1,t,f)),h++,void 0===r&&h>=d){o=k[i.op].call(i,c,r,t);break}if(T(c)){if("-"===r)r=c.length;else{if(n&&!p(r))throw new E("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a-1,i.path,i);r=parseInt(r,10)}if(h>=d){if(n&&"add"===i.op&&r>c.length)throw new E("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a-1,i.path,i);o=_[i.op].call(i,c,r,t);break}}else if(r&&r.indexOf("~")!=-1&&(r=r.replace(/~1/g,"/").replace(/~0/g,"~")),h>=d){o=x[i.op].call(i,c,r,t);break}c=c[r]}}return o}function m(t,e){var n=[];return f(t,e,n,""),n}function v(t){if(void 0===t)return!0;if("array"==typeof t||"object"==("undefined"==typeof t?"undefined":r(t)))for(var e in t)if(v(t[e]))return!0;return!1}function y(e,n,i,o){if("object"!==("undefined"==typeof e?"undefined":r(e))||null===e||T(e))throw new E("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,e,i);if(!x[e.op])throw new E("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,e,i);if("string"!=typeof e.path)throw new E("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,e,i);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new E("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new E("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&v(e.value))throw new E("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,e,i);if(i)if("add"==e.op){var a=e.path.split("/").length,s=o.split("/").length;if(a!==s+1&&a!==s)throw new E("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,e,i)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==o)throw new E("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,e,i)}else if("move"===e.op||"copy"===e.op){var l={op:"_get",path:e.from,value:void 0},u=t.validate([l],i);if(u&&"OPERATION_PATH_UNRESOLVABLE"===u.name)throw new E("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,e,i)}}function b(t,e){try{if(!T(t))throw new E("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)e=JSON.parse(JSON.stringify(e)),g.call(this,e,t,!0);else for(var n=0;n<t.length;n++)this.validator(t[n],n)}catch(i){if(i instanceof E)return i;throw i}}var w=function(t){if(T(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},x={add:function(t,e){return t[e]=this.value,!0},remove:function(t,e){return delete t[e],!0},replace:function(t,e){return t[e]=this.value,!0},move:function(t,e,n){var i={op:"_get",path:this.from};return g(n,[i]),g(n,[{op:"remove",path:this.from}]),g(n,[{op:"add",path:this.path,value:i.value}]),!0},copy:function(t,e,n){var i={op:"_get",path:this.from};return g(n,[i]),g(n,[{op:"add",path:this.path,value:i.value}]),!0},test:function(t,n){return e(t[n],this.value)},_get:function(t,e){this.value=t[e]}},_={add:function(t,e){return t.splice(e,0,this.value),!0},remove:function(t,e){return t.splice(e,1),!0},replace:function(t,e){return t[e]=this.value,!0},move:x.move,copy:x.copy,test:x.test,_get:x._get},k={add:function(t){k.remove.call(this,t);for(var e in this.value)this.value.hasOwnProperty(e)&&(t[e]=this.value[e]);return!0},remove:function(t){for(var e in t)t.hasOwnProperty(e)&&x.remove.call(this,t,e);return!0},replace:function(t){return g(t,[{op:"remove",path:this.path}]),g(t,[{op:"add",path:this.path,value:this.value}]),!0},move:x.move,copy:x.copy,test:function(t){return JSON.stringify(t)===JSON.stringify(this.value)},_get:function(t){this.value=t}},C=[],S=function(){function t(t){this.observers=[],this.obj=t}return t}(),M=function(){function t(t,e){this.callback=t,this.observer=e}return t}();t.unobserve=u,t.observe=h,t.generate=d;var T;T=Array.isArray?Array.isArray:function(t){return t.push&&"number"==typeof t.length},t.apply=g,t.compare=m;var E=function(t){function e(e,n,i,r,o){t.call(this,e),this.message=e,this.name=n,this.index=i,this.operation=r,this.tree=o}return o(e,t),e}(a);t.JsonPatchError=E,t.Error=E,t.validator=y,t.validate=b}(i||(i={})),e.apply=i.apply,e.observe=i.observe,e.unobserve=i.unobserve,e.generate=i.generate,e.compare=i.compare,e.validate=i.validate,e.validator=i.validator,e.JsonPatchError=i.JsonPatchError,e.Error=i.Error},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=n(7),l=n(1),u=n(25),c=n(4),h=i(c),d=n(42),f=i(d),p=n(28),g=(i(p),function(){function t(e,n){r(this,t),n&&(this.eventManager=new h["default"](e),this.instance=e,this.wot=e,this.settings=n,this.mouseDown=!1,this.main=null,this.top=null,this.left=null,this.bottom=null,this.right=null,this.topStyle=null,this.leftStyle=null,this.bottomStyle=null,this.rightStyle=null,this.cornerDefaultStyle={width:"5px",height:"5px",borderWidth:"2px",borderStyle:"solid",borderColor:"#FFF"},this.corner=null,this.cornerStyle=null,this.createBorders(n),this.registerListeners())}return o(t,[{key:"registerListeners",value:function(){var t=this;this.eventManager.addEventListener(document.body,"mousedown",function(){return t.onMouseDown()}),this.eventManager.addEventListener(document.body,"mouseup",function(){return t.onMouseUp()});for(var e=function(e,n){t.eventManager.addEventListener(t.main.childNodes[e],"mouseenter",function(n){return t.onMouseEnter(n,t.main.childNodes[e])})},n=0,i=this.main.childNodes.length;n<i;n++)e(n,i)}},{key:"onMouseDown",value:function(){this.mouseDown=!0}},{key:"onMouseUp",value:function(){this.mouseDown=!1}},{key:"onMouseEnter",value:function(t,e){function n(t){return t.clientY<Math.floor(o.top)||(t.clientY>Math.ceil(o.top+o.height)||(t.clientX<Math.floor(o.left)||(t.clientX>Math.ceil(o.left+o.width)||void 0)))}function i(t){n(t)&&(r.eventManager.removeEventListener(document.body,"mousemove",i),e.style.display="block")}if(this.mouseDown&&this.wot.getSetting("hideBorderOnMouseDownOver")){t.preventDefault(),(0,s.stopImmediatePropagation)(t);var r=this,o=e.getBoundingClientRect();e.style.display="none",this.eventManager.addEventListener(document.body,"mousemove",i)}}},{key:"createBorders",value:function(t){this.main=document.createElement("div");var e=["top","left","bottom","right","corner"],n=this.main.style;n.position="absolute",n.top=0,n.left=0;for(var i=0;i<5;i++){var r=e[i],o=document.createElement("div");o.className="wtBorder "+(this.settings.className||""),this.settings[r]&&this.settings[r].hide&&(o.className+=" hidden"),n=o.style,n.backgroundColor=this.settings[r]&&this.settings[r].color?this.settings[r].color:t.border.color,n.height=this.settings[r]&&this.settings[r].width?this.settings[r].width+"px":t.border.width+"px",n.width=this.settings[r]&&this.settings[r].width?this.settings[r].width+"px":t.border.width+"px",this.main.appendChild(o)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),(0,u.isMobileBrowser)()&&this.createMultipleSelectorHandles(),this.disappear(),this.wot.wtTable.bordersHolder||(this.wot.wtTable.bordersHolder=document.createElement("div"),this.wot.wtTable.bordersHolder.className="htBorders",this.wot.wtTable.spreader.appendChild(this.wot.wtTable.bordersHolder)),this.wot.wtTable.bordersHolder.insertBefore(this.main,this.wot.wtTable.bordersHolder.firstChild)}},{key:"createMultipleSelectorHandles",value:function(){this.selectionHandles={topLeft:document.createElement("DIV"),topLeftHitArea:document.createElement("DIV"),bottomRight:document.createElement("DIV"),bottomRightHitArea:document.createElement("DIV")};var t=10,e=40;this.selectionHandles.topLeft.className="topLeftSelectionHandle",this.selectionHandles.topLeftHitArea.className="topLeftSelectionHandle-HitArea",this.selectionHandles.bottomRight.className="bottomRightSelectionHandle",this.selectionHandles.bottomRightHitArea.className="bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={topLeft:this.selectionHandles.topLeft.style,topLeftHitArea:this.selectionHandles.topLeftHitArea.style,bottomRight:this.selectionHandles.bottomRight.style,bottomRightHitArea:this.selectionHandles.bottomRightHitArea.style};var n={position:"absolute",height:e+"px",width:e+"px","border-radius":parseInt(e/1.5,10)+"px"};for(var i in n)(0,l.hasOwnProperty)(n,i)&&(this.selectionHandles.styles.bottomRightHitArea[i]=n[i],this.selectionHandles.styles.topLeftHitArea[i]=n[i]);var r={position:"absolute",height:t+"px",width:t+"px","border-radius":parseInt(t/1.5,10)+"px",background:"#F5F5FF",border:"1px solid #4285c8"};for(var o in r)(0,l.hasOwnProperty)(r,o)&&(this.selectionHandles.styles.bottomRight[o]=r[o],this.selectionHandles.styles.topLeft[o]=r[o]);this.main.appendChild(this.selectionHandles.topLeft),this.main.appendChild(this.selectionHandles.bottomRight),this.main.appendChild(this.selectionHandles.topLeftHitArea),this.main.appendChild(this.selectionHandles.bottomRightHitArea)}},{key:"isPartRange",value:function(t,e){return!(!this.wot.selections.area.cellRange||t==this.wot.selections.area.cellRange.to.row&&e==this.wot.selections.area.cellRange.to.col)}},{key:"updateMultipleSelectionHandlesPosition",value:function(t,e,n,i,r,o){var a=parseInt(this.selectionHandles.styles.topLeft.width,10),s=parseInt(this.selectionHandles.styles.topLeftHitArea.width,10);this.selectionHandles.styles.topLeft.top=parseInt(n-a,10)+"px",this.selectionHandles.styles.topLeft.left=parseInt(i-a,10)+"px",this.selectionHandles.styles.topLeftHitArea.top=parseInt(n-s/4*3,10)+"px",this.selectionHandles.styles.topLeftHitArea.left=parseInt(i-s/4*3,10)+"px",this.selectionHandles.styles.bottomRight.top=parseInt(n+o,10)+"px",this.selectionHandles.styles.bottomRight.left=parseInt(i+r,10)+"px",this.selectionHandles.styles.bottomRightHitArea.top=parseInt(n+o-s/4,10)+"px",this.selectionHandles.styles.bottomRightHitArea.left=parseInt(i+r-s/4,10)+"px",this.settings.border.multipleSelectionHandlesVisible&&this.settings.border.multipleSelectionHandlesVisible()?(this.selectionHandles.styles.topLeft.display="block",this.selectionHandles.styles.topLeftHitArea.display="block",this.isPartRange(t,e)?(this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"):(this.selectionHandles.styles.bottomRight.display="block",this.selectionHandles.styles.bottomRightHitArea.display="block")):(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.topLeftHitArea.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"),t==this.wot.wtSettings.getSetting("fixedRowsTop")||e==this.wot.wtSettings.getSetting("fixedColumnsLeft")?(this.selectionHandles.styles.topLeft.zIndex="9999",this.selectionHandles.styles.topLeftHitArea.zIndex="9999"):(this.selectionHandles.styles.topLeft.zIndex="",this.selectionHandles.styles.topLeftHitArea.zIndex="")}},{key:"appear",value:function(t){if(!this.disabled){var e,n,i,r,o,s,l,c,h,d,p,g,m,v,y,b,w,x,_;_=this.wot.wtTable.getRenderedRowsCount();for(var k=0;k<_;k++){var C=this.wot.wtTable.rowFilter.renderedToSource(k);if(C>=t[0]&&C<=t[2]){m=C;break}}for(var S=_-1;S>=0;S--){var M=this.wot.wtTable.rowFilter.renderedToSource(S);if(M>=t[0]&&M<=t[2]){y=M;break}}_=this.wot.wtTable.getRenderedColumnsCount();for(var T=0;T<_;T++){var E=this.wot.wtTable.columnFilter.renderedToSource(T);if(E>=t[1]&&E<=t[3]){v=E;break}}for(var O=_-1;O>=0;O--){var A=this.wot.wtTable.columnFilter.renderedToSource(O);if(A>=t[1]&&A<=t[3]){b=A;break}}if(void 0===m||void 0===v)return void this.disappear();e=m!==y||v!==b,n=this.wot.wtTable.getCell(new f["default"](m,v)),i=e?this.wot.wtTable.getCell(new f["default"](y,b)):n,r=(0,a.offset)(n),o=e?(0,a.offset)(i):r,s=(0,a.offset)(this.wot.wtTable.TABLE),c=r.top,p=o.top+(0,a.outerHeight)(i)-c,d=r.left,g=o.left+(0,a.outerWidth)(i)-d,l=c-s.top-1,h=d-s.left-1;var D=(0,a.getComputedStyle)(n);parseInt(D.borderTopWidth,10)>0&&(l+=1,p=p>0?p-1:0),parseInt(D.borderLeftWidth,10)>0&&(h+=1,g=g>0?g-1:0),this.topStyle.top=l+"px",this.topStyle.left=h+"px",this.topStyle.width=g+"px",this.topStyle.display="block",this.leftStyle.top=l+"px",this.leftStyle.left=h+"px",this.leftStyle.height=p+"px",this.leftStyle.display="block";var R=Math.floor(this.settings.border.width/2);this.bottomStyle.top=l+p-R+"px",this.bottomStyle.left=h+"px",this.bottomStyle.width=g+"px",this.bottomStyle.display="block",this.rightStyle.top=l+"px",this.rightStyle.left=h+g-R+"px",this.rightStyle.height=p+1+"px",this.rightStyle.display="block",(0,u.isMobileBrowser)()||!this.hasSetting(this.settings.border.cornerVisible)||this.isPartRange(y,b)?this.cornerStyle.display="none":(this.cornerStyle.top=l+p-4+"px",this.cornerStyle.left=h+g-4+"px",this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none",w=(0,a.getTrimmingContainer)(this.wot.wtTable.TABLE),b===this.wot.getSetting("totalColumns")-1&&(x=i.offsetLeft+(0,a.outerWidth)(i)+parseInt(this.cornerDefaultStyle.width,10)/2>=(0,a.innerWidth)(w),x&&(this.cornerStyle.left=Math.floor(h+g-3-parseInt(this.cornerDefaultStyle.width,10)/2)+"px",this.cornerStyle.borderRightWidth=0)),y===this.wot.getSetting("totalRows")-1&&(x=i.offsetTop+(0,a.outerHeight)(i)+parseInt(this.cornerDefaultStyle.height,10)/2>=(0,a.innerHeight)(w),x&&(this.cornerStyle.top=Math.floor(l+p-3-parseInt(this.cornerDefaultStyle.height,10)/2)+"px",this.cornerStyle.borderBottomWidth=0)),this.cornerStyle.display="block"),(0,u.isMobileBrowser)()&&this.updateMultipleSelectionHandlesPosition(m,v,l,h,g,p)}}},{key:"disappear",value:function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none",(0,u.isMobileBrowser)()&&(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none")}},{key:"hasSetting",value:function(t){return"function"==typeof t?t():!!t}}]),t}());e["default"]=g},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=new WeakMap,a=function(){function t(e,n,r,a,s,l,u){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(t){return t};i(this,t),o.set(this,{viewportWidth:e,scrollOffset:n,totalColumns:r,columnWidthFn:a,overrideFn:s,onlyFullyVisible:l,stretchingColumnWidthFn:c}),this.count=0,this.startColumn=null,this.endColumn=null,this.startPosition=null,this.stretchAllRatio=0,this.stretchLastWidth=0,this.stretch=u,this.totalTargetWidth=0,this.needVerifyLastColumnWidth=!0,this.stretchAllColumnsWidth=[],this.calculate()}return r(t,null,[{key:"DEFAULT_WIDTH",get:function(){return 50}}]),r(t,[{key:"calculate",value:function(){for(var t=0,e=!0,n=[],i=void 0,r=o.get(this),a=r.onlyFullyVisible,s=r.overrideFn,l=r.scrollOffset,u=r.totalColumns,c=r.viewportWidth,h=0;h<u;h++){i=this._getColumnWidth(h),t<=l&&!a&&(this.startColumn=h);var d=l>0?c+1:c;if(t>=l&&t+i<=l+d&&(null==this.startColumn&&(this.startColumn=h),this.endColumn=h),n.push(t),t+=i,a||(this.endColumn=h),t>=l+c){e=!1;break}}if(this.endColumn===u-1&&e)for(this.startColumn=this.endColumn;this.startColumn>0;){var f=n[this.endColumn]+i-n[this.startColumn-1];if((f<=c||!a)&&this.startColumn--,f>c)break}null!==this.startColumn&&s&&s(this),this.startPosition=n[this.startColumn],void 0==this.startPosition&&(this.startPosition=null),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}},{key:"refreshStretching",value:function(t){if("none"!==this.stretch){this.totalTargetWidth=t;for(var e=o.get(this),n=e.totalColumns,i=0,r=0;r<n;r++){var a=this._getColumnWidth(r),s=e.stretchingColumnWidthFn(void 0,r);"number"==typeof s?t-=s:i+=a}var l=t-i;if("all"===this.stretch&&l>0)this.stretchAllRatio=t/i,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if("last"===this.stretch&&t!==1/0){var u=this._getColumnWidth(n-1),c=l+u;this.stretchLastWidth=c>=0?c:u}}}},{key:"getStretchedColumnWidth",value:function(t,e){var n=null;return"all"===this.stretch&&0!==this.stretchAllRatio?n=this._getStretchedAllColumnWidth(t,e):"last"===this.stretch&&0!==this.stretchLastWidth&&(n=this._getStretchedLastColumnWidth(t)),n}},{key:"_getStretchedAllColumnWidth",value:function(t,e){var n=0,i=o.get(this),r=i.totalColumns;if(!this.stretchAllColumnsWidth[t]){var a=Math.round(e*this.stretchAllRatio),s=i.stretchingColumnWidthFn(a,t);void 0===s?this.stretchAllColumnsWidth[t]=a:this.stretchAllColumnsWidth[t]=isNaN(s)?this._getColumnWidth(t):s}if(this.stretchAllColumnsWidth.length===r&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(var l=0;l<this.stretchAllColumnsWidth.length;l++)n+=this.stretchAllColumnsWidth[l];n!==this.totalTargetWidth&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=this.totalTargetWidth-n)}return this.stretchAllColumnsWidth[t]}},{key:"_getStretchedLastColumnWidth",value:function(t){var e=o.get(this),n=e.totalColumns;return t===n-1?this.stretchLastWidth:null}},{key:"_getColumnWidth",value:function(e){var n=o.get(this).columnWidthFn(e);return void 0===n&&(n=t.DEFAULT_WIDTH),n}}]),t}();e["default"]=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=new WeakMap,a=function(){function t(e,n,r,a,s,l,u){i(this,t),o.set(this,{viewportHeight:e,scrollOffset:n,totalRows:r,rowHeightFn:a,overrideFn:s,onlyFullyVisible:l,horizontalScrollbarHeight:u}),this.count=0,this.startRow=null,this.endRow=null,this.startPosition=null,this.calculate()}return r(t,null,[{key:"DEFAULT_HEIGHT",get:function(){return 23}}]),r(t,[{key:"calculate",value:function(){for(var e=0,n=!0,i=[],r=o.get(this),a=r.onlyFullyVisible,s=r.overrideFn,l=r.rowHeightFn,u=r.scrollOffset,c=r.totalRows,h=r.viewportHeight,d=r.horizontalScrollbarHeight||0,f=void 0,p=0;p<c;p++)if(f=l(p),void 0===f&&(f=t.DEFAULT_HEIGHT),e<=u&&!a&&(this.startRow=p),e>=u&&e+f<=u+h-d&&(null===this.startRow&&(this.startRow=p),this.endRow=p),i.push(e),e+=f,a||(this.endRow=p),e>=u+h-d){n=!1;break}if(this.endRow===c-1&&n)for(this.startRow=this.endRow;this.startRow>0;){var g=i[this.endRow]+f-i[this.startRow-1];if((g<=h-d||!a)&&this.startRow--,g>=h-d)break}null!==this.startRow&&s&&s(this),this.startPosition=i[this.startRow],void 0==this.startPosition&&(this.startPosition=null),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}}]),t}();e["default"]=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=n(1),l=n(27),u=n(139),c=i(u),h=n(142),d=i(h),f=n(143),p=i(f),g=n(144),m=i(g),v=n(145),y=i(v),b=n(147),w=i(b),x=function(){function t(e){r(this,t);var n=[];if(this.guid="wt_"+(0,l.randomString)(),e.cloneSource?(this.cloneSource=e.cloneSource,this.cloneOverlay=e.cloneOverlay,this.wtSettings=e.cloneSource.wtSettings,this.wtTable=new y["default"](this,e.table,e.wtRootElement),this.wtScroll=new p["default"](this),this.wtViewport=e.cloneSource.wtViewport,this.wtEvent=new c["default"](this),this.selections=this.cloneSource.selections):(this.wtSettings=new m["default"](this,e),this.wtTable=new y["default"](this,e.table),this.wtScroll=new p["default"](this),this.wtViewport=new w["default"](this),this.wtEvent=new c["default"](this),this.selections=this.getSetting("selections"),this.wtOverlays=new d["default"](this),this.exportSettingsAsClassNames()),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var i=0,o=this.wtTable.THEAD.childNodes[0].childNodes.length;i<o;i++)n.push(this.wtTable.THEAD.childNodes[0].childNodes[i].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(t,e){(0,a.fastInnerText)(e,n[t])}])}this.drawn=!1,this.drawInterrupted=!1}return o(t,[{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.drawInterrupted=!1,t||(0,a.isVisible)(this.wtTable.TABLE)?this.wtTable.draw(t):this.drawInterrupted=!0,this}},{key:"getCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return this.wtTable.getCell(t);var n=this.wtSettings.getSetting("totalRows"),i=this.wtSettings.getSetting("fixedRowsTop"),r=this.wtSettings.getSetting("fixedRowsBottom"),o=this.wtSettings.getSetting("fixedColumnsLeft");if(t.row<i&&t.col<o)return this.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell(t);if(t.row<i)return this.wtOverlays.topOverlay.clone.wtTable.getCell(t);if(t.col<o&&t.row>=n-r){if(this.wtOverlays.bottomLeftCornerOverlay&&this.wtOverlays.bottomLeftCornerOverlay.clone)return this.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell(t)}else{if(t.col<o)return this.wtOverlays.leftOverlay.clone.wtTable.getCell(t);if(t.row<n&&t.row>n-r&&this.wtOverlays.bottomOverlay&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(t)}return this.wtTable.getCell(t)}},{key:"update",value:function(t,e){return this.wtSettings.update(t,e)}},{key:"scrollVertical",value:function(t){return this.wtOverlays.topOverlay.scrollTo(t),this.getSetting("onScrollVertically"),this}},{key:"scrollHorizontal",value:function(t){return this.wtOverlays.leftOverlay.scrollTo(t),this.getSetting("onScrollHorizontally"),this}},{key:"scrollViewport",value:function(t){return this.wtScroll.scrollViewport(t),this}},{key:"getViewport",value:function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]}},{key:"getOverlayName",value:function(){return this.cloneOverlay?this.cloneOverlay.type:"master"}},{key:"isOverlayName",value:function(t){return!!this.cloneOverlay&&this.cloneOverlay.type===t}},{key:"exportSettingsAsClassNames",value:function(){var t=this,e={rowHeaders:["array"],columnHeaders:["array"]},n=[],i=[];(0,s.objectEach)(e,function(e,r){e.indexOf("array")>-1&&t.getSetting(r).length&&i.push("ht"+(0,l.toUpperCaseFirst)(r)),n.push("ht"+(0,l.toUpperCaseFirst)(r))}),(0,a.removeClass)(this.wtTable.wtRootElement.parentNode,n),(0,a.addClass)(this.wtTable.wtRootElement.parentNode,i)}},{key:"getSetting",value:function(t,e,n,i,r){return this.wtSettings.getSetting(t,e,n,i,r)}},{key:"hasSetting",value:function(t){return this.wtSettings.has(t)}},{key:"destroy",value:function(){this.wtOverlays.destroy(),this.wtEvent.destroy()}}]),t}();e["default"]=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=this,n=new u["default"](t);this.instance=t;var i=[null,null];this.dblClickTimeout=[null,null];var r,l=function(t){var n=document.activeElement,r=(0,a.partial)(o.getParent,t.realTarget),s=t.realTarget;if(s!==n&&r(0)!==n&&r(1)!==n){var l=e.parentCell(s);(0,o.hasClass)(s,"corner")?e.instance.getSetting("onCellCornerMouseDown",t,s):l.TD&&e.instance.hasSetting("onCellMouseDown")&&e.instance.getSetting("onCellMouseDown",t,l.coords,l.TD,e.instance),2!==t.button&&l.TD&&(i[0]=l.TD,clearTimeout(e.dblClickTimeout[0]),e.dblClickTimeout[0]=setTimeout(function(){i[0]=null},1e3))}},c=function(t){e.instance.touchMoving=!0},h=function(t){n.addEventListener(this,"touchmove",c),e.checkIfTouchMove=setTimeout(function(){e.instance.touchMoving===!0&&(e.instance.touchMoving=void 0,n.removeEventListener("touchmove",c,!1)),l(t)},30)},d=function(t){var n,i,r;e.instance.hasSetting("onCellMouseOver")&&(n=e.instance.wtTable.TABLE,i=(0,o.closestDown)(t.realTarget,["TD","TH"],n),r=e.instance.cloneSource||e.instance,i&&i!==r.lastMouseOver&&(0,o.isChildOf)(i,n)&&(r.lastMouseOver=i,e.instance.getSetting("onCellMouseOver",t,e.instance.wtTable.getCoords(i),i,e.instance)))},f=function(t){var n=void 0,i=void 0,r=void 0;e.instance.hasSetting("onCellMouseOut")&&(n=e.instance.wtTable.TABLE,i=(0,o.closestDown)(t.realTarget,["TD","TH"],n),r=(0,o.closestDown)(t.relatedTarget,["TD","TH"],n),i&&i!==r&&(0,o.isChildOf)(i,n)&&e.instance.getSetting("onCellMouseOut",t,e.instance.wtTable.getCoords(i),i,e.instance))},p=function(t){if(2!==t.button){var n=e.parentCell(t.realTarget);n.TD===i[0]&&n.TD===i[1]?((0,o.hasClass)(t.realTarget,"corner")?e.instance.getSetting("onCellCornerDblClick",t,n.coords,n.TD,e.instance):e.instance.getSetting("onCellDblClick",t,n.coords,n.TD,e.instance),i[0]=null,i[1]=null):n.TD===i[0]?(e.instance.getSetting("onCellMouseUp",t,n.coords,n.TD,e.instance),i[1]=n.TD,clearTimeout(e.dblClickTimeout[1]),e.dblClickTimeout[1]=setTimeout(function(){i[1]=null},500)):n.TD&&e.instance.hasSetting("onCellMouseUp")&&e.instance.getSetting("onCellMouseUp",t,n.coords,n.TD,e.instance)}},g=function(t){clearTimeout(r),t.preventDefault(),p(t)};if(n.addEventListener(this.instance.wtTable.holder,"mousedown",l),n.addEventListener(this.instance.wtTable.TABLE,"mouseover",d),n.addEventListener(this.instance.wtTable.TABLE,"mouseout",f),n.addEventListener(this.instance.wtTable.holder,"mouseup",p),this.instance.wtTable.holder.parentNode.parentNode&&(0,s.isMobileBrowser)()&&!e.instance.wtTable.isWorkingOnClone()){var m="."+this.instance.wtTable.holder.parentNode.className.split(" ").join(".");n.addEventListener(this.instance.wtTable.holder,"touchstart",function(t){e.instance.touchApplied=!0,(0,o.isChildOf)(t.target,m)&&h.call(t.target,t)}),n.addEventListener(this.instance.wtTable.holder,"touchend",function(t){e.instance.touchApplied=!1,(0,o.isChildOf)(t.target,m)&&g.call(t.target,t)}),e.instance.momentumScrolling||(e.instance.momentumScrolling={}),n.addEventListener(this.instance.wtTable.holder,"scroll",function(t){clearTimeout(e.instance.momentumScrolling._timeout),e.instance.momentumScrolling.ongoing||e.instance.getSetting("onBeforeTouchScroll"),e.instance.momentumScrolling.ongoing=!0,e.instance.momentumScrolling._timeout=setTimeout(function(){e.instance.touchApplied||(e.instance.momentumScrolling.ongoing=!1,e.instance.getSetting("onAfterMomentumScroll"))},200)})}n.addEventListener(window,"resize",function(){"none"!==e.instance.getSetting("stretchH")&&e.instance.draw()}),this.destroy=function(){clearTimeout(this.dblClickTimeout[0]),clearTimeout(this.dblClickTimeout[1]),n.destroy()}}e.__esModule=!0;var o=n(0),a=n(35),s=n(25),l=n(4),u=i(l);r.prototype.parentCell=function(t){var e={},n=this.instance.wtTable.TABLE,i=(0,o.closestDown)(t,["TD","TH"],n);return i?(e.coords=this.instance.wtTable.getCoords(i),e.TD=i):(0,o.hasClass)(t,"wtBorder")&&(0,o.hasClass)(t,"current")?(e.coords=this.instance.selections.current.cellRange.highlight,
e.TD=this.instance.wtTable.getCell(e.coords)):(0,o.hasClass)(t,"wtBorder")&&(0,o.hasClass)(t,"area")&&this.instance.selections.area.cellRange&&(e.coords=this.instance.selections.area.cellRange.to,e.TD=this.instance.wtTable.getCell(e.coords)),e},e["default"]=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n,r){i(this,t),this.offset=e,this.total=n,this.countTH=r}return r(t,[{key:"offsetted",value:function(t){return t+this.offset}},{key:"unOffsetted",value:function(t){return t-this.offset}},{key:"renderedToSource",value:function(t){return this.offsetted(t)}},{key:"sourceToRendered",value:function(t){return this.unOffsetted(t)}},{key:"offsettedTH",value:function(t){return t-this.countTH}},{key:"unOffsettedTH",value:function(t){return t+this.countTH}},{key:"visibleRowHeadedColumnToSourceColumn",value:function(t){return this.renderedToSource(this.offsettedTH(t))}},{key:"sourceColumnToVisibleRowHeadedColumn",value:function(t){return this.unOffsettedTH(this.sourceToRendered(t))}}]),t}();e["default"]=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n,r){i(this,t),this.offset=e,this.total=n,this.countTH=r}return r(t,[{key:"offsetted",value:function(t){return t+this.offset}},{key:"unOffsetted",value:function(t){return t-this.offset}},{key:"renderedToSource",value:function(t){return this.offsetted(t)}},{key:"sourceToRendered",value:function(t){return this.unOffsetted(t)}},{key:"offsettedTH",value:function(t){return t-this.countTH}},{key:"unOffsettedTH",value:function(t){return t+this.countTH}},{key:"visibleColHeadedRowToSourceRow",value:function(t){return this.renderedToSource(this.offsettedTH(t))}},{key:"sourceRowToVisibleColHeadedRow",value:function(t){return this.unOffsettedTH(this.sourceToRendered(t))}}]),t}();e["default"]=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=n(2),l=n(16),u=n(25),c=n(4),h=i(c),d=n(28),f=i(d),p=function(){function t(e){r(this,t),this.wot=e,this.instance=this.wot,this.eventManager=new h["default"](this.wot),this.wot.update("scrollbarWidth",(0,a.getScrollbarWidth)()),this.wot.update("scrollbarHeight",(0,a.getScrollbarWidth)()),this.scrollableElement=(0,a.getScrollableElement)(this.wot.wtTable.TABLE),this.prepareOverlays(),this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.overlayScrollPositions={master:{top:0,left:0},top:{top:null,left:0},bottom:{top:null,left:0},left:{top:0,left:null}},this.pendingScrollCallbacks={master:{top:0,left:0},top:{left:0},bottom:{left:0},left:{top:0}},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.delegatedScrollCallback=!1,this.registeredListeners=[],this.registerListeners()}return o(t,[{key:"prepareOverlays",value:function(){var t=!1;return this.topOverlay?t=this.topOverlay.updateStateOfRendering()||t:this.topOverlay=f["default"].createOverlay(f["default"].CLONE_TOP,this.wot),f["default"].hasOverlay(f["default"].CLONE_BOTTOM)||(this.bottomOverlay={needFullRender:!1,updateStateOfRendering:function(){return!1}}),f["default"].hasOverlay(f["default"].CLONE_BOTTOM_LEFT_CORNER)||(this.bottomLeftCornerOverlay={needFullRender:!1,updateStateOfRendering:function(){return!1}}),this.bottomOverlay?t=this.bottomOverlay.updateStateOfRendering()||t:this.bottomOverlay=f["default"].createOverlay(f["default"].CLONE_BOTTOM,this.wot),this.leftOverlay?t=this.leftOverlay.updateStateOfRendering()||t:this.leftOverlay=f["default"].createOverlay(f["default"].CLONE_LEFT,this.wot),this.topOverlay.needFullRender&&this.leftOverlay.needFullRender&&(this.topLeftCornerOverlay?t=this.topLeftCornerOverlay.updateStateOfRendering()||t:this.topLeftCornerOverlay=f["default"].createOverlay(f["default"].CLONE_TOP_LEFT_CORNER,this.wot)),this.bottomOverlay.needFullRender&&this.leftOverlay.needFullRender&&(this.bottomLeftCornerOverlay?t=this.bottomLeftCornerOverlay.updateStateOfRendering()||t:this.bottomLeftCornerOverlay=f["default"].createOverlay(f["default"].CLONE_BOTTOM_LEFT_CORNER,this.wot)),this.wot.getSetting("debug")&&!this.debug&&(this.debug=f["default"].createOverlay(f["default"].CLONE_DEBUG,this.wot)),t}},{key:"refreshAll",value:function(){if(this.wot.drawn){if(!this.wot.wtTable.holder.parentNode)return void this.destroy();this.wot.draw(!0),this.verticalScrolling&&this.leftOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1}}},{key:"registerListeners",value:function(){var t=this,e=this.topOverlay.mainTableScrollableElement,n=this.leftOverlay.mainTableScrollableElement,i=[];for(i.push([document.documentElement,"keydown",function(e){return t.onKeyDown(e)}]),i.push([document.documentElement,"keyup",function(){return t.onKeyUp()}]),i.push([document,"visibilitychange",function(){return t.onKeyUp()}]),i.push([e,"scroll",function(e){return t.onTableScroll(e)}]),e!==n&&i.push([n,"scroll",function(e){return t.onTableScroll(e)}]),this.topOverlay.needFullRender&&(i.push([this.topOverlay.clone.wtTable.holder,"scroll",function(e){return t.onTableScroll(e)}]),i.push([this.topOverlay.clone.wtTable.holder,"wheel",function(e){return t.onTableScroll(e)}])),this.bottomOverlay.needFullRender&&(i.push([this.bottomOverlay.clone.wtTable.holder,"scroll",function(e){return t.onTableScroll(e)}]),i.push([this.bottomOverlay.clone.wtTable.holder,"wheel",function(e){return t.onTableScroll(e)}])),this.leftOverlay.needFullRender&&(i.push([this.leftOverlay.clone.wtTable.holder,"scroll",function(e){return t.onTableScroll(e)}]),i.push([this.leftOverlay.clone.wtTable.holder,"wheel",function(e){return t.onTableScroll(e)}])),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.needFullRender&&i.push([this.topLeftCornerOverlay.clone.wtTable.holder,"wheel",function(e){return t.onTableScroll(e)}]),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.needFullRender&&i.push([this.bottomLeftCornerOverlay.clone.wtTable.holder,"wheel",function(e){return t.onTableScroll(e)}]),this.topOverlay.trimmingContainer!==window&&this.leftOverlay.trimmingContainer!==window&&i.push([window,"wheel",function(e){var n=void 0,i=e.wheelDeltaY||e.deltaY,r=e.wheelDeltaX||e.deltaX;t.topOverlay.clone.wtTable.holder.contains(e.realTarget)?n="top":t.bottomOverlay.clone&&t.bottomOverlay.clone.wtTable.holder.contains(e.realTarget)?n="bottom":t.leftOverlay.clone.wtTable.holder.contains(e.realTarget)?n="left":t.topLeftCornerOverlay&&t.topLeftCornerOverlay.clone&&t.topLeftCornerOverlay.clone.wtTable.holder.contains(e.realTarget)?n="topLeft":t.bottomLeftCornerOverlay&&t.bottomLeftCornerOverlay.clone&&t.bottomLeftCornerOverlay.clone.wtTable.holder.contains(e.realTarget)&&(n="bottomLeft"),("top"==n&&0!==i||"left"==n&&0!==r||"bottom"==n&&0!==i||("topLeft"===n||"bottomLeft"===n)&&(0!==i||0!==r))&&e.preventDefault()}]);i.length;){var r=i.pop();this.eventManager.addEventListener(r[0],r[1],r[2]),this.registeredListeners.push(r)}}},{key:"deregisterListeners",value:function(){for(;this.registeredListeners.length;){var t=this.registeredListeners.pop();this.eventManager.removeEventListener(t[0],t[1],t[2])}}},{key:"onTableScroll",value:function(t){if(!(0,u.isMobileBrowser)()){var e=this.leftOverlay.mainTableScrollableElement,n=this.topOverlay.mainTableScrollableElement,i=t.target;this.keyPressed&&(n!==window&&i!==window&&!t.target.contains(n)||e!==window&&i!==window&&!t.target.contains(e))||("scroll"===t.type?this.syncScrollPositions(t):this.translateMouseWheelToScroll(t))}}},{key:"onKeyDown",value:function(t){this.keyPressed=(0,l.isKey)(t.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")}},{key:"onKeyUp",value:function(){this.keyPressed=!1}},{key:"translateMouseWheelToScroll",value:function(t){var e=this.topOverlay.clone.wtTable.holder,n=this.bottomOverlay.clone?this.bottomOverlay.clone.wtTable.holder:null,i=this.leftOverlay.clone.wtTable.holder,r=this.topLeftCornerOverlay&&this.topLeftCornerOverlay.clone?this.topLeftCornerOverlay.clone.wtTable.holder:null,o=this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone?this.bottomLeftCornerOverlay.clone.wtTable.holder:null,a=-.2,s=t.wheelDeltaY||-1*t.deltaY,l=t.wheelDeltaX||-1*t.deltaX,u=null,c={type:"wheel"},h=t.target,d=null;for(1===t.deltaMode&&(s*=120,l*=120);h!=document&&null!=h;){if(h.className.indexOf("wtHolder")>-1){u=h;break}h=h.parentNode}return c.target=u,u===r||u===o?(this.syncScrollPositions(c,a*l,"x"),this.syncScrollPositions(c,a*s,"y")):(u===e||u===n?d=s:u===i&&(d=l),this.syncScrollPositions(c,a*d)),!1}},{key:"syncScrollPositions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.destroyed){if(0===arguments.length)return void this.syncScrollWithMaster();var i=this.leftOverlay.mainTableScrollableElement,r=this.topOverlay.mainTableScrollableElement,o=t.target,s=0,l=!1,u=void 0,c=void 0,h=void 0,d=void 0,f=void 0,p=!1,g=this.wot.getSetting("preventOverflow");this.topOverlay.needFullRender&&(u=this.topOverlay.clone.wtTable.holder),this.bottomOverlay.needFullRender&&(f=this.bottomOverlay.clone.wtTable.holder),this.leftOverlay.needFullRender&&(c=this.leftOverlay.clone.wtTable.holder),this.leftOverlay.needFullRender&&this.topOverlay.needFullRender&&(h=this.topLeftCornerOverlay.clone.wtTable.holder),this.leftOverlay.needFullRender&&this.bottomOverlay.needFullRender&&(d=this.bottomLeftCornerOverlay.clone.wtTable.holder),o===document&&(o=window),o===i||o===r?(s=g?(0,a.getScrollLeft)(this.scrollableElement):(0,a.getScrollLeft)(o),this.horizontalScrolling=!0,this.overlayScrollPositions.master.left=s,l=!0,this.pendingScrollCallbacks.master.left>0?this.pendingScrollCallbacks.master.left--:(u&&u.scrollLeft!==s&&(null==e&&this.pendingScrollCallbacks.top.left++,u.scrollLeft=s,p=i!==window),f&&f.scrollLeft!==s&&(null==e&&this.pendingScrollCallbacks.bottom.left++,f.scrollLeft=s,p=i!==window)),s=(0,a.getScrollTop)(o),this.verticalScrolling=!0,this.overlayScrollPositions.master.top=s,l=!0,this.pendingScrollCallbacks.master.top>0?this.pendingScrollCallbacks.master.top--:c&&c.scrollTop!==s&&(null==e&&this.pendingScrollCallbacks.left.top++,c.scrollTop=s,p=r!==window)):o===f?(s=(0,a.getScrollLeft)(o),this.horizontalScrolling=!0,this.overlayScrollPositions.bottom.left=s,l=!0,this.pendingScrollCallbacks.bottom.left>0?this.pendingScrollCallbacks.bottom.left--:(null==e&&this.pendingScrollCallbacks.master.left++,i.scrollLeft=s,u&&u.scrollLeft!==s&&(null==e&&this.pendingScrollCallbacks.top.left++,u.scrollLeft=s,p=r!==window)),null!==e&&(l=!0,r.scrollTop+=e)):o===u?(s=(0,a.getScrollLeft)(o),this.horizontalScrolling=!0,this.overlayScrollPositions.top.left=s,l=!0,this.pendingScrollCallbacks.top.left>0?this.pendingScrollCallbacks.top.left--:(null==e&&this.pendingScrollCallbacks.master.left++,i.scrollLeft=s),null!==e&&(l=!0,r.scrollTop+=e),f&&f.scrollLeft!==s&&(null==e&&this.pendingScrollCallbacks.bottom.left++,f.scrollLeft=s,p=r!==window)):o===c?(s=(0,a.getScrollTop)(o),this.overlayScrollPositions.left.top!==s&&(this.verticalScrolling=!0,this.overlayScrollPositions.left.top=s,l=!0,this.pendingScrollCallbacks.left.top>0?this.pendingScrollCallbacks.left.top--:(null==e&&this.pendingScrollCallbacks.master.top++,r.scrollTop=s)),null!==e&&(l=!0,r.scrollLeft+=e)):o!==h&&o!==d||null!==e&&(l=!0,"x"===n?r.scrollLeft+=e:"y"===n&&(r.scrollTop+=e)),!this.keyPressed&&l&&"scroll"===t.type&&(this.delegatedScrollCallback?this.delegatedScrollCallback=!1:this.refreshAll(),p&&(this.delegatedScrollCallback=!0))}}},{key:"syncScrollWithMaster",value:function(){var t=this.topOverlay.mainTableScrollableElement,e=t.scrollLeft,n=t.scrollTop;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=e),this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=e),this.leftOverlay.needFullRender&&(this.leftOverlay.clone.wtTable.holder.scrollTop=n)}},{key:"updateMainScrollableElements",value:function(){this.deregisterListeners(),this.leftOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement(),this.scrollableElement=(0,a.getScrollableElement)(this.wot.wtTable.TABLE),this.registerListeners()}},{key:"destroy",value:function(){this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.leftOverlay.destroy(),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.destroy(),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone&&this.bottomLeftCornerOverlay.destroy(),this.debug&&this.debug.destroy(),this.destroyed=!0}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.topOverlay.areElementSizesAdjusted&&this.leftOverlay.areElementSizesAdjusted){var e=this.wot.wtTable.wtRootElement.parentNode||this.wot.wtTable.wtRootElement,n=e.clientWidth,i=e.clientHeight;n===this.spreaderLastSize.width&&i===this.spreaderLastSize.height||(this.spreaderLastSize.width=n,this.spreaderLastSize.height=i,this.adjustElementsSize())}this.bottomOverlay.clone&&this.bottomOverlay.refresh(t),this.leftOverlay.refresh(t),this.topOverlay.refresh(t),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.refresh(t),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone&&this.bottomLeftCornerOverlay.refresh(t),this.debug&&this.debug.refresh(t)}},{key:"adjustElementsSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.wot.getSetting("totalColumns"),n=this.wot.getSetting("totalRows"),i=this.wot.wtViewport.getRowHeaderWidth(),r=this.wot.wtViewport.getColumnHeaderHeight(),o=this.wot.wtTable.hider.style;o.width=i+this.leftOverlay.sumCellSizes(0,e)+"px",o.height=r+this.topOverlay.sumCellSizes(0,n)+1+"px",this.topOverlay.adjustElementsSize(t),this.leftOverlay.adjustElementsSize(t),this.bottomOverlay.clone&&this.bottomOverlay.adjustElementsSize(t)}},{key:"applyToDOM",value:function(){this.topOverlay.areElementSizesAdjusted&&this.leftOverlay.areElementSizesAdjusted||this.adjustElementsSize(),this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.leftOverlay.applyToDOM()}},{key:"getParentOverlay",value:function(t){if(!t)return null;var e=[this.topOverlay,this.leftOverlay,this.bottomOverlay,this.topLeftCornerOverlay,this.bottomLeftCornerOverlay],n=null;return(0,s.arrayEach)(e,function(e,i){e&&e.clone&&e.clone.wtTable.TABLE.contains(t)&&(n=e.clone)}),n}}]),t}();e["default"]=p},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a=n(6),s=function(){function t(e){i(this,t),this.wot=e,this.instance=e}return r(t,[{key:"scrollViewport",value:function(t){if(this.wot.drawn){var e=this._getVariables(),n=e.topOverlay,i=e.leftOverlay,r=e.totalRows,o=e.totalColumns,a=e.fixedRowsTop,s=e.fixedRowsBottom,l=e.fixedColumnsLeft;if(t.row<0||t.row>Math.max(r-1,0))throw new Error("row "+t.row+" does not exist");if(t.col<0||t.col>Math.max(o-1,0))throw new Error("column "+t.col+" does not exist");t.row>=a&&t.row<this.getFirstVisibleRow()?n.scrollTo(t.row):t.row>this.getLastVisibleRow()&&t.row<r-s&&n.scrollTo(t.row,!0),t.col>=l&&t.col<this.getFirstVisibleColumn()?i.scrollTo(t.col):t.col>this.getLastVisibleColumn()&&i.scrollTo(t.col,!0)}}},{key:"getFirstVisibleRow",value:function(){var t=this._getVariables(),e=t.topOverlay,n=t.wtTable,i=t.wtViewport,r=t.totalRows,s=t.fixedRowsTop,l=n.getFirstVisibleRow();if(e.mainTableScrollableElement===window){var u=(0,o.offset)(n.wtRootElement),c=(0,o.innerHeight)(n.hider),h=(0,o.innerHeight)(window),d=(0,o.getScrollTop)(window);if(u.top+c-h<=d){var f=i.getColumnHeaderHeight();f+=e.sumCellSizes(0,s),(0,a.rangeEachReverse)(r,1,function(t){if(f+=e.sumCellSizes(t-1,t),u.top+c-f<=d)return l=t,!1})}}return l}},{key:"getLastVisibleRow",value:function(){var t=this._getVariables(),e=t.topOverlay,n=t.wtTable,i=t.wtViewport,r=t.totalRows,s=n.getLastVisibleRow();if(e.mainTableScrollableElement===window){var l=(0,o.offset)(n.wtRootElement),u=(0,o.innerHeight)(window),c=(0,o.getScrollTop)(window);if(l.top>c){var h=i.getColumnHeaderHeight();(0,a.rangeEach)(1,r,function(t){if(h+=e.sumCellSizes(t-1,t),l.top+h-c>=u)return s=t-2,!1})}}return s}},{key:"getFirstVisibleColumn",value:function(){var t=this._getVariables(),e=t.leftOverlay,n=t.wtTable,i=t.wtViewport,r=t.totalColumns,s=(t.fixedColumnsLeft,n.getFirstVisibleColumn());if(e.mainTableScrollableElement===window){var l=(0,o.offset)(n.wtRootElement),u=(0,o.innerWidth)(n.hider),c=(0,o.innerWidth)(window),h=(0,o.getScrollLeft)(window);if(l.left+u-c<=h){var d=i.getRowHeaderWidth();(0,a.rangeEachReverse)(r,1,function(t){if(d+=e.sumCellSizes(t-1,t),l.left+u-d<=h)return s=t,!1})}}return s}},{key:"getLastVisibleColumn",value:function(){var t=this._getVariables(),e=t.leftOverlay,n=t.wtTable,i=t.wtViewport,r=t.totalColumns,s=n.getLastVisibleColumn();if(e.mainTableScrollableElement===window){var l=(0,o.offset)(n.wtRootElement),u=(0,o.innerWidth)(window),c=(0,o.getScrollLeft)(window);if(l.left>c){var h=i.getRowHeaderWidth();(0,a.rangeEach)(1,r,function(t){if(h+=e.sumCellSizes(t-1,t),l.left+h-c>=u)return s=t-2,!1})}}return s}},{key:"_getVariables",value:function(){var t=this.wot,e=t.wtOverlays.topOverlay,n=t.wtOverlays.leftOverlay,i=t.wtTable,r=t.wtViewport,o=t.getSetting("totalRows"),a=t.getSetting("totalColumns"),s=t.getSetting("fixedRowsTop"),l=t.getSetting("fixedRowsBottom"),u=t.getSetting("fixedColumnsLeft");return{topOverlay:e,leftOverlay:n,wtTable:i,wtViewport:r,totalRows:o,totalColumns:a,fixedRowsTop:s,fixedRowsBottom:l,fixedColumnsLeft:u}}}]),t}();e["default"]=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a=n(1),s=function(){function t(e,n){var r=this;i(this,t),this.wot=e,this.instance=e,this.defaults={table:void 0,debug:!1,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow:function(){return!1},data:void 0,freezeOverlays:!1,fixedColumnsLeft:0,fixedRowsTop:0,fixedRowsBottom:0,minSpareRows:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:function(t,e,n){var i=r.getSetting("data",t,e);(0,o.fastInnerText)(n,void 0===i||null===i?"":i)},columnWidth:function(t){},rowHeight:function(t){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellMouseOver:null,onCellMouseOut:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:function(t){return t},onModifyRowHeaderWidth:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null},this.settings={};for(var s in this.defaults)if((0,a.hasOwnProperty)(this.defaults,s))if(void 0!==n[s])this.settings[s]=n[s];else{if(void 0===this.defaults[s])throw new Error('A required setting "'+s+'" was not provided');this.settings[s]=this.defaults[s]}}return r(t,[{key:"update",value:function(t,e){if(void 0===e)for(var n in t)(0,a.hasOwnProperty)(t,n)&&(this.settings[n]=t[n]);else this.settings[t]=e;return this.wot}},{key:"getSetting",value:function(t,e,n,i,r){return"function"==typeof this.settings[t]?this.settings[t](e,n,i,r):void 0!==e&&Array.isArray(this.settings[t])?this.settings[t][e]:this.settings[t]}},{key:"has",value:function(t){return!!this.settings[t]}}]),t}();e["default"]=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),u=n(35),c=n(42),h=i(c),d=n(68),f=(i(d),n(140)),p=i(f),g=n(141),m=i(g),v=n(146),y=i(v),b=n(28),w=i(b),x=function(){function t(e,n){var i=this;o(this,t),this.wot=e,this.instance=this.wot,this.TABLE=n,this.TBODY=null,this.THEAD=null,this.COLGROUP=null,this.tableOffset=0,this.holderOffset=0,(0,l.removeTextNodes)(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;var r=this.wot.wtSettings.settings.rowHeaderWidth;this.wot.wtSettings.settings.rowHeaderWidth=function(){return i._modifyRowHeaderWidth(r)}}return s(t,[{key:"fixTableDomTree",value:function(){this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=document.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=document.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=document.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.wot.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length&&this.THEAD.appendChild(document.createElement("TR"))}},{key:"createSpreader",value:function(t){var e=t.parentNode,n=void 0;return e&&1===e.nodeType&&(0,l.hasClass)(e,"wtHolder")||(n=document.createElement("div"),n.className="wtSpreader",e&&e.insertBefore(n,t),n.appendChild(t)),n.style.position="relative",n}},{key:"createHider",value:function(t){var e=t.parentNode,n=void 0;return e&&1===e.nodeType&&(0,l.hasClass)(e,"wtHolder")||(n=document.createElement("div"),n.className="wtHider",e&&e.insertBefore(n,t),n.appendChild(t)),n}},{key:"createHolder",value:function(t){var e=t.parentNode,n=void 0;return e&&1===e.nodeType&&(0,l.hasClass)(e,"wtHolder")||(n=document.createElement("div"),n.style.position="relative",n.className="wtHolder",e&&e.insertBefore(n,t),this.isWorkingOnClone()||(n.parentNode.className+="ht_master handsontable"),n.appendChild(t)),n}},{key:"alignOverlaysWithTrimmingContainer",value:function(){var t=(0,l.getTrimmingContainer)(this.wtRootElement);if(!this.isWorkingOnClone())if(this.holder.parentNode.style.position="relative",t===window){var e=this.wot.getSetting("preventOverflow");e||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible")}else this.holder.style.width=(0,l.getStyle)(t,"width"),this.holder.style.height=(0,l.getStyle)(t,"height"),this.holder.style.overflow=""}},{key:"isWorkingOnClone",value:function(){return!!this.wot.cloneSource}},{key:"draw",value:function(t){var e=this.wot,n=e.wtOverlays,i=e.wtViewport,r=this.instance.getSetting("totalRows"),o=this.wot.getSetting("rowHeaders").length,a=this.wot.getSetting("columnHeaders").length,s=!1;if(!this.isWorkingOnClone()&&(this.holderOffset=(0,l.offset)(this.holder),t=i.createRenderCalculators(t),o&&!this.wot.getSetting("fixedColumnsLeft"))){var u=n.leftOverlay.getScrollPosition(),c=this.correctHeaderWidth;this.correctHeaderWidth=u>0,c!==this.correctHeaderWidth&&(t=!1)}if(this.isWorkingOnClone()||(s=n.prepareOverlays()),t)this.isWorkingOnClone()||i.createVisibleCalculators(),n&&n.refresh(!0);else{this.isWorkingOnClone()?this.tableOffset=this.wot.cloneSource.wtTable.tableOffset:this.tableOffset=(0,l.offset)(this.TABLE);var h=void 0;h=w["default"].isOverlayTypeOf(this.wot.cloneOverlay,w["default"].CLONE_DEBUG)||w["default"].isOverlayTypeOf(this.wot.cloneOverlay,w["default"].CLONE_TOP)||w["default"].isOverlayTypeOf(this.wot.cloneOverlay,w["default"].CLONE_TOP_LEFT_CORNER)?0:w["default"].isOverlayTypeOf(this.instance.cloneOverlay,w["default"].CLONE_BOTTOM)||w["default"].isOverlayTypeOf(this.instance.cloneOverlay,w["default"].CLONE_BOTTOM_LEFT_CORNER)?Math.max(r-this.wot.getSetting("fixedRowsBottom"),0):i.rowsRenderCalculator.startRow;var d=void 0;d=w["default"].isOverlayTypeOf(this.wot.cloneOverlay,w["default"].CLONE_DEBUG)||w["default"].isOverlayTypeOf(this.wot.cloneOverlay,w["default"].CLONE_LEFT)||w["default"].isOverlayTypeOf(this.wot.cloneOverlay,w["default"].CLONE_TOP_LEFT_CORNER)||w["default"].isOverlayTypeOf(this.wot.cloneOverlay,w["default"].CLONE_BOTTOM_LEFT_CORNER)?0:i.columnsRenderCalculator.startColumn,this.rowFilter=new m["default"](h,r,a),this.columnFilter=new p["default"](d,this.wot.getSetting("totalColumns"),o),this.alignOverlaysWithTrimmingContainer(),this._doDraw()}return this.refreshSelections(t),this.isWorkingOnClone()||(n.topOverlay.resetFixedPosition(),n.bottomOverlay.clone&&n.bottomOverlay.resetFixedPosition(),n.leftOverlay.resetFixedPosition(),n.topLeftCornerOverlay&&n.topLeftCornerOverlay.resetFixedPosition(),n.bottomLeftCornerOverlay&&n.bottomLeftCornerOverlay.clone&&n.bottomLeftCornerOverlay.resetFixedPosition()),s&&n.syncScrollWithMaster(),this.wot.drawn=!0,this}},{key:"_doDraw",value:function(){var t=new y["default"](this);t.render()}},{key:"removeClassFromCells",value:function(t){for(var e=this.TABLE.querySelectorAll("."+t),n=0,i=e.length;n<i;n++)(0,l.removeClass)(e[n],t)}},{key:"refreshSelections",value:function(t){if(this.wot.selections){var e=this.wot.selections.length;if(t)for(var n=0;n<e;n++)this.wot.selections[n].settings.className&&this.removeClassFromCells(this.wot.selections[n].settings.className),this.wot.selections[n].settings.highlightHeaderClassName&&this.removeClassFromCells(this.wot.selections[n].settings.highlightHeaderClassName),this.wot.selections[n].settings.highlightRowClassName&&this.removeClassFromCells(this.wot.selections[n].settings.highlightRowClassName),this.wot.selections[n].settings.highlightColumnClassName&&this.removeClassFromCells(this.wot.selections[n].settings.highlightColumnClassName);for(var i=0;i<e;i++)this.wot.selections[i].draw(this.wot,t)}}},{key:"getCell",value:function(t){if(this.isRowBeforeRenderedRows(t.row))return-1;if(this.isRowAfterRenderedRows(t.row))return-2;var e=this.TBODY.childNodes[this.rowFilter.sourceToRendered(t.row)];return e?e.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(t.col)]:void 0}},{key:"getColumnHeader",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.THEAD.childNodes[e];if(n)return n.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(t)]}},{key:"getRowHeader",value:function(t){if(0===this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0))return null;var e=this.TBODY.childNodes[this.rowFilter.sourceToRendered(t)];return e?e.childNodes[0]:void 0}},{key:"getCoords",value:function(t){if("TD"!==t.nodeName&&"TH"!==t.nodeName&&(t=(0,l.closest)(t,["TD","TH"])),null===t)return null;var e=t.parentNode,n=e.parentNode,i=(0,l.index)(e),r=t.cellIndex;return(0,l.overlayContainsElement)(w["default"].CLONE_TOP_LEFT_CORNER,t)||(0,l.overlayContainsElement)(w["default"].CLONE_TOP,t)?"THEAD"===n.nodeName&&(i-=n.childNodes.length):i=n===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(i):this.rowFilter.renderedToSource(i),r=(0,l.overlayContainsElement)(w["default"].CLONE_TOP_LEFT_CORNER,t)||(0,l.overlayContainsElement)(w["default"].CLONE_LEFT,t)?this.columnFilter.offsettedTH(r):this.columnFilter.visibleRowHeadedColumnToSourceColumn(r),new h["default"](i,r)}},{key:"getTrForRow",value:function(t){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(t)]}},{key:"getFirstRenderedRow",value:function(){return this.wot.wtViewport.rowsRenderCalculator.startRow}},{key:"getFirstVisibleRow",value:function(){return this.wot.wtViewport.rowsVisibleCalculator.startRow}},{key:"getFirstRenderedColumn",value:function(){return this.wot.wtViewport.columnsRenderCalculator.startColumn}},{key:"getFirstVisibleColumn",value:function(){return this.wot.wtViewport.columnsVisibleCalculator.startColumn}},{key:"getLastRenderedRow",value:function(){return this.wot.wtViewport.rowsRenderCalculator.endRow}},{key:"getLastVisibleRow",value:function(){return this.wot.wtViewport.rowsVisibleCalculator.endRow}},{key:"getLastRenderedColumn",value:function(){return this.wot.wtViewport.columnsRenderCalculator.endColumn}},{key:"getLastVisibleColumn",value:function(){return this.wot.wtViewport.columnsVisibleCalculator.endColumn}},{key:"isRowBeforeRenderedRows",value:function(t){return this.rowFilter&&this.rowFilter.sourceToRendered(t)<0&&t>=0}},{key:"isRowAfterViewport",value:function(t){return this.rowFilter&&this.rowFilter.sourceToRendered(t)>this.getLastVisibleRow()}},{key:"isRowAfterRenderedRows",value:function(t){return this.rowFilter&&this.rowFilter.sourceToRendered(t)>this.getLastRenderedRow()}},{key:"isColumnBeforeViewport",value:function(t){return this.columnFilter&&this.columnFilter.sourceToRendered(t)<0&&t>=0}},{key:"isColumnAfterViewport",value:function(t){return this.columnFilter&&this.columnFilter.sourceToRendered(t)>this.getLastVisibleColumn()}},{key:"isLastRowFullyVisible",value:function(){return this.getLastVisibleRow()===this.getLastRenderedRow()}},{key:"isLastColumnFullyVisible",value:function(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()}},{key:"getRenderedColumnsCount",value:function(){var t=this.wot.wtViewport.columnsRenderCalculator.count,e=this.wot.getSetting("totalColumns");if(this.wot.isOverlayName(w["default"].CLONE_DEBUG))t=e;else if(this.wot.isOverlayName(w["default"].CLONE_LEFT)||this.wot.isOverlayName(w["default"].CLONE_TOP_LEFT_CORNER)||this.wot.isOverlayName(w["default"].CLONE_BOTTOM_LEFT_CORNER))return Math.min(this.wot.getSetting("fixedColumnsLeft"),e);return t}},{key:"getRenderedRowsCount",
value:function(){var t=this.wot.wtViewport.rowsRenderCalculator.count,e=this.wot.getSetting("totalRows");return this.wot.isOverlayName(w["default"].CLONE_DEBUG)?t=e:this.wot.isOverlayName(w["default"].CLONE_TOP)||this.wot.isOverlayName(w["default"].CLONE_TOP_LEFT_CORNER)?t=Math.min(this.wot.getSetting("fixedRowsTop"),e):(this.wot.isOverlayName(w["default"].CLONE_BOTTOM)||this.wot.isOverlayName(w["default"].CLONE_BOTTOM_LEFT_CORNER))&&(t=Math.min(this.wot.getSetting("fixedRowsBottom"),e)),t}},{key:"getVisibleRowsCount",value:function(){return this.wot.wtViewport.rowsVisibleCalculator.count}},{key:"allRowsInViewport",value:function(){return this.wot.getSetting("totalRows")==this.getVisibleRowsCount()}},{key:"getRowHeight",value:function(t){var e=this.wot.wtSettings.settings.rowHeight(t),n=this.wot.wtViewport.oversizedRows[t];return void 0!==n&&(e=void 0===e?n:Math.max(e,n)),e}},{key:"getColumnHeaderHeight",value:function(t){var e=this.wot.wtSettings.settings.defaultRowHeight,n=this.wot.wtViewport.oversizedColumnHeaders[t];return void 0!==n&&(e=e?Math.max(e,n):n),e}},{key:"getVisibleColumnsCount",value:function(){return this.wot.wtViewport.columnsVisibleCalculator.count}},{key:"allColumnsInViewport",value:function(){return this.wot.getSetting("totalColumns")==this.getVisibleColumnsCount()}},{key:"getColumnWidth",value:function(t){var e=this.wot.wtSettings.settings.columnWidth;return"function"==typeof e?e=e(t):"object"===("undefined"==typeof e?"undefined":a(e))&&(e=e[t]),e||this.wot.wtSettings.settings.defaultColumnWidth}},{key:"getStretchedColumnWidth",value:function(t){var e=this.getColumnWidth(t),n=null==e?this.instance.wtSettings.settings.defaultColumnWidth:e,i=this.wot.wtViewport.columnsRenderCalculator;if(i){var r=i.getStretchedColumnWidth(t,n);r&&(n=r)}return n}},{key:"_modifyRowHeaderWidth",value:function(t){var e=(0,u.isFunction)(t)?t():null;return Array.isArray(e)?(e=[].concat(r(e)),e[e.length-1]=this._correctRowHeaderWidth(e[e.length-1])):e=this._correctRowHeaderWidth(e),e}},{key:"_correctRowHeaderWidth",value:function(t){return"number"!=typeof t&&(t=this.wot.getSetting("defaultColumnWidth")),this.correctHeaderWidth&&t++,t}}]),t}();e["default"]=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=document.createElement("TH");return e.insertBefore(n,t),e.removeChild(t),n}function a(t,e){var n=document.createElement("TD");return e.insertBefore(n,t),e.removeChild(t),n}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),u=n(28),c=i(u),h=!1,d=function(){function t(e){r(this,t),this.wtTable=e,this.wot=e.instance,this.instance=e.instance,this.rowFilter=e.rowFilter,this.columnFilter=e.columnFilter,this.TABLE=e.TABLE,this.THEAD=e.THEAD,this.TBODY=e.TBODY,this.COLGROUP=e.COLGROUP,this.rowHeaders=[],this.rowHeaderCount=0,this.columnHeaders=[],this.columnHeaderCount=0,this.fixedRowsTop=0,this.fixedRowsBottom=0}return s(t,[{key:"render",value:function(){if(!this.wtTable.isWorkingOnClone()){var t={};if(this.wot.getSetting("beforeDraw",!0,t),t.skipRender===!0)return}this.rowHeaders=this.wot.getSetting("rowHeaders"),this.rowHeaderCount=this.rowHeaders.length,this.fixedRowsTop=this.wot.getSetting("fixedRowsTop"),this.fixedRowsBottom=this.wot.getSetting("fixedRowsBottom"),this.columnHeaders=this.wot.getSetting("columnHeaders"),this.columnHeaderCount=this.columnHeaders.length;var e=this.wtTable.getRenderedColumnsCount(),n=this.wtTable.getRenderedRowsCount(),i=this.wot.getSetting("totalColumns"),r=this.wot.getSetting("totalRows"),o=void 0,a=!1;if((c["default"].isOverlayTypeOf(this.wot.cloneOverlay,c["default"].CLONE_BOTTOM)||c["default"].isOverlayTypeOf(this.wot.cloneOverlay,c["default"].CLONE_BOTTOM_LEFT_CORNER))&&(this.columnHeaders=[],this.columnHeaderCount=0),i>=0&&(this.adjustAvailableNodes(),a=!0,this.renderColumnHeaders(),this.renderRows(r,n,e),this.wtTable.isWorkingOnClone()||(o=this.wot.wtViewport.getWorkspaceWidth(),this.wot.wtViewport.containerWidth=null),this.adjustColumnWidths(e),this.markOversizedColumnHeaders(),this.adjustColumnHeaderHeights()),a||this.adjustAvailableNodes(),this.removeRedundantRows(n),this.wtTable.isWorkingOnClone()&&!this.wot.isOverlayName(c["default"].CLONE_BOTTOM)||this.markOversizedRows(),this.wtTable.isWorkingOnClone())this.wot.isOverlayName(c["default"].CLONE_BOTTOM)&&this.wot.cloneSource.wtOverlays.adjustElementsSize();else{this.wot.wtViewport.createVisibleCalculators(),this.wot.wtOverlays.refresh(!1),this.wot.wtOverlays.applyToDOM();var s=(0,l.outerWidth)(this.wtTable.hider),u=(0,l.outerWidth)(this.wtTable.TABLE);if(0!==s&&u!==s&&this.adjustColumnWidths(e),o!==this.wot.wtViewport.getWorkspaceWidth()){this.wot.wtViewport.containerWidth=null;var h=this.wtTable.getFirstRenderedColumn(),d=this.wtTable.getLastRenderedColumn(),f=this.wot.getSetting("defaultColumnWidth"),p=this.wot.getSetting("rowHeaderWidth");if(p=this.instance.getSetting("onModifyRowHeaderWidth",p),null!=p)for(var g=0;g<this.rowHeaderCount;g++){var m=Array.isArray(p)?p[g]:p;m=null==m?f:m,this.COLGROUP.childNodes[g].style.width=m+"px"}for(var v=h;v<d;v++){var y=this.wtTable.getStretchedColumnWidth(v),b=this.columnFilter.sourceToRendered(v);this.COLGROUP.childNodes[b+this.rowHeaderCount].style.width=y+"px"}}this.wot.getSetting("onDraw",!0)}}},{key:"removeRedundantRows",value:function(t){for(;this.wtTable.tbodyChildrenLength>t;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--}},{key:"renderRows",value:function(t,e,n){for(var i=void 0,r=void 0,o=0,a=this.rowFilter.renderedToSource(o),s=this.wtTable.isWorkingOnClone();a<t&&a>=0&&(!h&&o>1e3&&(h=!0,console.warn('Performance tip: Handsontable rendered more than 1000 visible rows. Consider limiting the number of rendered rows by specifying the table height and/or turning off the "renderAllRows" option.')),void 0===e||o!==e);){if(r=this.getOrCreateTrForRow(o,r),this.renderRowHeaders(a,r),this.adjustColumns(r,n+this.rowHeaderCount),i=this.renderCells(a,r,n),s&&!this.wot.isOverlayName(c["default"].CLONE_BOTTOM)||this.resetOversizedRow(a),r.firstChild){var l=this.wot.wtTable.getRowHeight(a);l?(l--,r.firstChild.style.height=l+"px"):r.firstChild.style.height=""}o++,a=this.rowFilter.renderedToSource(o)}}},{key:"resetOversizedRow",value:function(t){this.wot.getSetting("externalRowCalculator")||this.wot.wtViewport.oversizedRows&&this.wot.wtViewport.oversizedRows[t]&&(this.wot.wtViewport.oversizedRows[t]=void 0)}},{key:"markOversizedRows",value:function(){if(!this.wot.getSetting("externalRowCalculator")){var t=this.instance.wtTable.TBODY.childNodes.length,e=t*this.instance.wtSettings.settings.defaultRowHeight,n=(0,l.innerHeight)(this.instance.wtTable.TBODY)-1,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0;this.instance.getSetting("totalRows");if(e!==n||this.instance.getSetting("fixedRowsBottom"))for(;t;)t--,o=this.instance.wtTable.rowFilter.renderedToSource(t),i=this.instance.wtTable.getRowHeight(o),a=this.instance.wtTable.getTrForRow(o),s=a.querySelector("th"),r=s?(0,l.innerHeight)(s):(0,l.innerHeight)(a)-1,(!i&&this.instance.wtSettings.settings.defaultRowHeight<r||i<r)&&(this.instance.wtViewport.oversizedRows[o]=++r)}}},{key:"markOversizedColumnHeaders",value:function(){var t=this.wot.getOverlayName();if(this.columnHeaderCount&&!this.wot.wtViewport.hasOversizedColumnHeadersMarked[t]&&!this.wtTable.isWorkingOnClone()){for(var e=this.wtTable.getRenderedColumnsCount(),n=0;n<this.columnHeaderCount;n++)for(var i=-1*this.rowHeaderCount;i<e;i++)this.markIfOversizedColumnHeader(i);this.wot.wtViewport.hasOversizedColumnHeadersMarked[t]=!0}}},{key:"adjustColumnHeaderHeights",value:function(){for(var t=this.wot.getSetting("columnHeaders"),e=this.wot.wtTable.THEAD.childNodes,n=this.wot.wtViewport.oversizedColumnHeaders,i=0,r=t.length;i<r;i++)if(n[i]){if(!e[i]||0===e[i].childNodes.length)return;e[i].childNodes[0].style.height=n[i]+"px"}}},{key:"markIfOversizedColumnHeader",value:function(t){for(var e=this.wot.wtTable.columnFilter.renderedToSource(t),n=this.columnHeaderCount,i=this.wot.wtSettings.settings.defaultRowHeight,r=void 0,o=void 0,a=void 0,s=this.wot.getSetting("columnHeaderHeight")||[];n;)n--,r=this.wot.wtTable.getColumnHeaderHeight(n),o=this.wot.wtTable.getColumnHeader(e,n),o&&(a=(0,l.innerHeight)(o),(!r&&i<a||r<a)&&(this.wot.wtViewport.oversizedColumnHeaders[n]=a),Array.isArray(s)?null!=s[n]&&(this.wot.wtViewport.oversizedColumnHeaders[n]=s[n]):isNaN(s)||(this.wot.wtViewport.oversizedColumnHeaders[n]=s),this.wot.wtViewport.oversizedColumnHeaders[n]<(s[n]||s)&&(this.wot.wtViewport.oversizedColumnHeaders[n]=s[n]||s))}},{key:"renderCells",value:function(t,e,n){for(var i=void 0,r=void 0,o=0;o<n;o++)r=this.columnFilter.renderedToSource(o),i=0===o?e.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(r)]:i.nextSibling,"TH"==i.nodeName&&(i=a(i,e)),(0,l.hasClass)(i,"hide")||(i.className=""),i.removeAttribute("style"),this.wot.wtSettings.settings.cellRenderer(t,r,i);return i}},{key:"adjustColumnWidths",value:function(t){var e=0,n=this.wot.cloneSource?this.wot.cloneSource:this.wot,i=n.wtTable.holder,r=this.wot.getSetting("defaultColumnWidth"),o=this.wot.getSetting("rowHeaderWidth");if(i.offsetHeight<i.scrollHeight&&(e=(0,l.getScrollbarWidth)()),this.wot.wtViewport.columnsRenderCalculator.refreshStretching(this.wot.wtViewport.getViewportWidth()-e),o=this.instance.getSetting("onModifyRowHeaderWidth",o),null!=o)for(var a=0;a<this.rowHeaderCount;a++){var s=Array.isArray(o)?o[a]:o;s=null==s?r:s,this.COLGROUP.childNodes[a].style.width=s+"px"}for(var u=0;u<t;u++){var c=this.wtTable.getStretchedColumnWidth(this.columnFilter.renderedToSource(u));this.COLGROUP.childNodes[u+this.rowHeaderCount].style.width=c+"px"}}},{key:"appendToTbody",value:function(t){this.TBODY.appendChild(t),this.wtTable.tbodyChildrenLength++}},{key:"getOrCreateTrForRow",value:function(t,e){var n=void 0;return t>=this.wtTable.tbodyChildrenLength?(n=this.createRow(),this.appendToTbody(n)):n=0===t?this.TBODY.firstChild:e.nextSibling,n.className&&n.removeAttribute("class"),n}},{key:"createRow",value:function(){for(var t=document.createElement("TR"),e=0;e<this.rowHeaderCount;e++)t.appendChild(document.createElement("TH"));return t}},{key:"renderRowHeader",value:function(t,e,n){n.className="",n.removeAttribute("style"),this.rowHeaders[e](t,n,e)}},{key:"renderRowHeaders",value:function(t,e){for(var n=e.firstChild,i=0;i<this.rowHeaderCount;i++)n?"TD"==n.nodeName&&(n=o(n,e)):(n=document.createElement("TH"),e.appendChild(n)),this.renderRowHeader(t,i,n),n=n.nextSibling}},{key:"adjustAvailableNodes",value:function(){this.adjustColGroups(),this.adjustThead()}},{key:"renderColumnHeaders",value:function(){if(this.columnHeaderCount)for(var t=this.wtTable.getRenderedColumnsCount(),e=0;e<this.columnHeaderCount;e++)for(var n=this.getTrForColumnHeaders(e),i=-1*this.rowHeaderCount;i<t;i++){var r=this.columnFilter.renderedToSource(i);this.renderColumnHeader(e,r,n.childNodes[i+this.rowHeaderCount])}}},{key:"adjustColGroups",value:function(){for(var t=this.wtTable.getRenderedColumnsCount();this.wtTable.colgroupChildrenLength<t+this.rowHeaderCount;)this.COLGROUP.appendChild(document.createElement("COL")),this.wtTable.colgroupChildrenLength++;for(;this.wtTable.colgroupChildrenLength>t+this.rowHeaderCount;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.wtTable.colgroupChildrenLength--;this.rowHeaderCount&&(0,l.addClass)(this.COLGROUP.childNodes[0],"rowHeader")}},{key:"adjustThead",value:function(){var t=this.wtTable.getRenderedColumnsCount(),e=this.THEAD.firstChild;if(this.columnHeaders.length){for(var n=0,i=this.columnHeaders.length;n<i;n++){for(e=this.THEAD.childNodes[n],e||(e=document.createElement("TR"),this.THEAD.appendChild(e)),this.theadChildrenLength=e.childNodes.length;this.theadChildrenLength<t+this.rowHeaderCount;)e.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength>t+this.rowHeaderCount;)e.removeChild(e.lastChild),this.theadChildrenLength--}var r=this.THEAD.childNodes.length;if(r>this.columnHeaders.length)for(var o=this.columnHeaders.length;o<r;o++)this.THEAD.removeChild(this.THEAD.lastChild)}else e&&(0,l.empty)(e)}},{key:"getTrForColumnHeaders",value:function(t){return this.THEAD.childNodes[t]}},{key:"renderColumnHeader",value:function(t,e,n){return n.className="",n.removeAttribute("style"),this.columnHeaders[t](e,n,t)}},{key:"adjustColumns",value:function(t,e){for(var n=t.childNodes.length;n<e;){var i=document.createElement("TD");t.appendChild(i),n++}for(;n>e;)t.removeChild(t.lastChild),n--}},{key:"removeRedundantColumns",value:function(t){for(;this.wtTable.tbodyChildrenLength>t;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--}}]),t}();e["default"]=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=n(1),l=n(4),u=i(l),c=n(136),h=i(c),d=n(137),f=i(d),p=function(){function t(e){var n=this;r(this,t),this.wot=e,this.instance=this.wot,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.eventManager=new u["default"](this.wot),this.eventManager.addEventListener(window,"resize",function(){n.clientHeight=n.getWorkspaceHeight()})}return o(t,[{key:"getWorkspaceHeight",value:function(){var t=this.instance.wtOverlays.topOverlay.trimmingContainer,e=void 0,n=0;return t===window?n=document.documentElement.clientHeight:(e=(0,a.outerHeight)(t),n=e>0&&t.clientHeight>0?t.clientHeight:1/0),n}},{key:"getWorkspaceWidth",value:function(){var t=void 0,e=this.wot.getSetting("totalColumns"),n=this.instance.wtOverlays.leftOverlay.trimmingContainer,i=void 0,r=this.wot.getSetting("stretchH"),o=document.documentElement.offsetWidth,s=this.wot.getSetting("preventOverflow");return s?(0,a.outerWidth)(this.instance.wtTable.wtRootElement):(t=this.wot.getSetting("freezeOverlays")?Math.min(o-this.getWorkspaceOffset().left,o):Math.min(this.getContainerFillWidth(),o-this.getWorkspaceOffset().left,o),n===window&&e>0&&this.sumColumnWidths(0,e-1)>t?document.documentElement.clientWidth:n!==window&&(i=(0,a.getStyle)(this.instance.wtOverlays.leftOverlay.trimmingContainer,"overflow"),"scroll"==i||"hidden"==i||"auto"==i)?Math.max(t,n.clientWidth):"none"!==r&&r?t:Math.max(t,(0,a.outerWidth)(this.instance.wtTable.TABLE)))}},{key:"hasVerticalScroll",value:function(){return this.getWorkspaceActualHeight()>this.getWorkspaceHeight()}},{key:"hasHorizontalScroll",value:function(){return this.getWorkspaceActualWidth()>this.getWorkspaceWidth()}},{key:"sumColumnWidths",value:function(t,e){for(var n=0;t<e;)n+=this.wot.wtTable.getColumnWidth(t),t++;return n}},{key:"getContainerFillWidth",value:function(){if(this.containerWidth)return this.containerWidth;var t=this.instance.wtTable.holder,e=void 0,n=void 0;return n=document.createElement("div"),n.style.width="100%",n.style.height="1px",t.appendChild(n),e=n.offsetWidth,this.containerWidth=e,t.removeChild(n),e}},{key:"getWorkspaceOffset",value:function(){return(0,a.offset)(this.wot.wtTable.TABLE)}},{key:"getWorkspaceActualHeight",value:function(){return(0,a.outerHeight)(this.wot.wtTable.TABLE)}},{key:"getWorkspaceActualWidth",value:function(){return(0,a.outerWidth)(this.wot.wtTable.TABLE)||(0,a.outerWidth)(this.wot.wtTable.TBODY)||(0,a.outerWidth)(this.wot.wtTable.THEAD)}},{key:"getColumnHeaderHeight",value:function(){return isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=(0,a.outerHeight)(this.wot.wtTable.THEAD)),this.columnHeaderHeight}},{key:"getViewportHeight",value:function(){var t=this.getWorkspaceHeight(),e=void 0;return t===1/0?t:(e=this.getColumnHeaderHeight(),e>0&&(t-=e),t)}},{key:"getRowHeaderWidth",value:function(){var t=this.instance.getSetting("rowHeaderWidth"),e=this.instance.getSetting("rowHeaders");if(t){this.rowHeaderWidth=0;for(var n=0,i=e.length;n<i;n++)this.rowHeaderWidth+=t[n]||t}if(this.wot.cloneSource)return this.wot.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth))if(e.length){var r=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var o=0,s=e.length;o<s;o++)r?(this.rowHeaderWidth+=(0,a.outerWidth)(r),r=r.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.instance.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth}},{key:"getViewportWidth",value:function(){var t=this.getWorkspaceWidth(),e=void 0;return t===1/0?t:(e=this.getRowHeaderWidth(),e>0?t-e:t)}},{key:"createRowsCalculator",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=void 0,i=void 0,r=void 0,o=void 0,s=void 0,l=void 0,u=void 0;return this.rowHeaderWidth=NaN,n=this.wot.wtSettings.settings.renderAllRows?1/0:this.getViewportHeight(),i=this.wot.wtOverlays.topOverlay.getScrollPosition()-this.wot.wtOverlays.topOverlay.getTableParentOffset(),i<0&&(i=0),r=this.wot.getSetting("fixedRowsTop"),s=this.wot.getSetting("fixedRowsBottom"),u=this.wot.getSetting("totalRows"),r&&(l=this.wot.wtOverlays.topOverlay.sumCellSizes(0,r),i+=l,n-=l),s&&this.wot.wtOverlays.bottomOverlay.clone&&(l=this.wot.wtOverlays.bottomOverlay.sumCellSizes(u-s,u),n-=l),o=this.wot.wtTable.holder.clientHeight===this.wot.wtTable.holder.offsetHeight?0:(0,a.getScrollbarWidth)(),new f["default"](n,i,this.wot.getSetting("totalRows"),function(e){return t.wot.wtTable.getRowHeight(e)},e?null:this.wot.wtSettings.settings.viewportRowCalculatorOverride,e,o)}},{key:"createColumnsCalculator",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getViewportWidth(),i=void 0,r=void 0;if(this.columnHeaderHeight=NaN,i=this.wot.wtOverlays.leftOverlay.getScrollPosition()-this.wot.wtOverlays.leftOverlay.getTableParentOffset(),i<0&&(i=0),r=this.wot.getSetting("fixedColumnsLeft")){var o=this.wot.wtOverlays.leftOverlay.sumCellSizes(0,r);i+=o,n-=o}return this.wot.wtTable.holder.clientWidth!==this.wot.wtTable.holder.offsetWidth&&(n-=(0,a.getScrollbarWidth)()),new h["default"](n,i,this.wot.getSetting("totalColumns"),function(e){return t.wot.wtTable.getColumnWidth(e)},e?null:this.wot.wtSettings.settings.viewportColumnCalculatorOverride,e,this.wot.getSetting("stretchH"),function(e,n){return t.wot.getSetting("onBeforeStretchingColumnWidth",e,n)})}},{key:"createRenderCalculators",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t){var e=this.createRowsCalculator(!0),n=this.createColumnsCalculator(!0);this.areAllProposedVisibleRowsAlreadyRendered(e)&&this.areAllProposedVisibleColumnsAlreadyRendered(n)||(t=!1)}return t||(this.rowsRenderCalculator=this.createRowsCalculator(),this.columnsRenderCalculator=this.createColumnsCalculator()),this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,t}},{key:"createVisibleCalculators",value:function(){this.rowsVisibleCalculator=this.createRowsCalculator(!0),this.columnsVisibleCalculator=this.createColumnsCalculator(!0)}},{key:"areAllProposedVisibleRowsAlreadyRendered",value:function(t){return!!this.rowsVisibleCalculator&&(!(t.startRow<this.rowsRenderCalculator.startRow||t.startRow===this.rowsRenderCalculator.startRow&&t.startRow>0)&&!(t.endRow>this.rowsRenderCalculator.endRow||t.endRow===this.rowsRenderCalculator.endRow&&t.endRow<this.wot.getSetting("totalRows")-1))}},{key:"areAllProposedVisibleColumnsAlreadyRendered",value:function(t){return!!this.columnsVisibleCalculator&&(!(t.startColumn<this.columnsRenderCalculator.startColumn||t.startColumn===this.columnsRenderCalculator.startColumn&&t.startColumn>0)&&!(t.endColumn>this.columnsRenderCalculator.endColumn||t.endColumn===this.columnsRenderCalculator.endColumn&&t.endColumn<this.wot.getSetting("totalColumns")-1))}},{key:"resetHasOversizedColumnHeadersMarked",value:function(){(0,s.objectEach)(this.hasOversizedColumnHeadersMarked,function(t,e,n){n[e]=void 0})}}]),t}();e["default"]=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){f=!1;var e=this.getActiveEditor();if((0,o.isPrintableChar)(t.keyCode)||t.keyCode===o.KEY_CODES.BACKSPACE||t.keyCode===o.KEY_CODES.DELETE||t.keyCode===o.KEY_CODES.INSERT){var n=0;if(t.keyCode===o.KEY_CODES.C&&(t.ctrlKey||t.metaKey))return;e.isOpened()||(n+=10),e.htEditor&&e.instance._registerTimeout(setTimeout(function(){e.queryChoices(e.TEXTAREA.value),f=!0},n))}}e.__esModule=!0;var o=n(16),a=n(20),s=n(27),l=n(2),u=n(0),c=n(149),h=i(c),d=h["default"].prototype.extend();d.prototype.init=function(){h["default"].prototype.init.apply(this,arguments),this.query=null,this.strippedChoices=[],this.rawChoices=[]},d.prototype.getValue=function(){var t=this,e=this.rawChoices.find(function(e){var n=t.stripValueIfNeeded(e);return n===t.TEXTAREA.value});return(0,a.isDefined)(e)?e:this.TEXTAREA.value},d.prototype.createElements=function(){h["default"].prototype.createElements.apply(this,arguments),(0,u.addClass)(this.htContainer,"autocompleteEditor"),(0,u.addClass)(this.htContainer,window.navigator.platform.indexOf("Mac")===-1?"":"htMacScroll")};var f=!1;d.prototype.prepare=function(){this.instance.addHook("beforeKeyDown",r),h["default"].prototype.prepare.apply(this,arguments)},d.prototype.open=function(){this.TEXTAREA_PARENT.style.overflow="auto",h["default"].prototype.open.apply(this,arguments),this.TEXTAREA_PARENT.style.overflow="";var t=this.htEditor.getInstance(),e=this,n=void 0===this.cellProperties.trimDropdown||this.cellProperties.trimDropdown;this.TEXTAREA.style.visibility="visible",this.focus(),t.updateSettings({colWidths:n?[(0,u.outerWidth)(this.TEXTAREA)-2]:void 0,width:n?(0,u.outerWidth)(this.TEXTAREA)+(0,u.getScrollbarWidth)()+2:void 0,afterRenderer:function(t,n,i,r,o,s){var l=e.cellProperties,u=l.filteringCaseSensitive,c=l.allowHtml,h=void 0,d=void 0;o=(0,a.stringify)(o),o&&!c&&(h=u===!0?o.indexOf(this.query):o.toLowerCase().indexOf(e.query.toLowerCase()),h!==-1&&(d=o.substr(h,e.query.length),o=o.replace(d,"<strong>"+d+"</strong>"))),t.innerHTML=o},autoColumnSize:!0,modifyColWidth:function(t,e){var i=this.getPlugin("autoColumnSize").widths;return i[e]&&(t=i[e]),n?t:t+15}}),this.htEditor.view.wt.wtTable.holder.parentNode.style["padding-right"]=(0,u.getScrollbarWidth)()+2+"px",f&&(f=!1),e.instance._registerTimeout(setTimeout(function(){e.queryChoices(e.TEXTAREA.value)},0))},d.prototype.close=function(){h["default"].prototype.close.apply(this,arguments)},d.prototype.queryChoices=function(t){var e=this;this.query=t;var n=this.cellProperties.source;"function"==typeof n?n.call(this.cellProperties,t,function(t){e.rawChoices=t,e.updateChoicesList(e.stripValuesIfNeeded(t))}):Array.isArray(n)?(this.rawChoices=n,this.updateChoicesList(this.stripValuesIfNeeded(n))):this.updateChoicesList([])},d.prototype.updateChoicesList=function(t){var e=(0,u.getCaretPosition)(this.TEXTAREA),n=(0,u.getSelectionEndPosition)(this.TEXTAREA),i=this.cellProperties.sortByRelevance,r=this.cellProperties.filter,o=null,a=null;i&&(o=d.sortByRelevance(this.stripValueIfNeeded(this.getValue()),t,this.cellProperties.filteringCaseSensitive));var s=Array.isArray(o)?o.length:0;if(r===!1)s&&(a=o[0]);else{for(var c=[],h=0,f=t.length;h<f&&!(i&&s<=h);h++)s?c.push(t[o[h]]):c.push(t[h]);a=0,t=c}this.strippedChoices=t,this.htEditor.loadData((0,l.pivot)([t])),this.updateDropdownHeight(),this.flipDropdownIfNeeded(),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(a),this.instance.listen(),this.TEXTAREA.focus(),(0,u.setCaretPosition)(this.TEXTAREA,e,e===n?void 0:n)},d.prototype.flipDropdownIfNeeded=function(){var t=(0,u.offset)(this.TEXTAREA),e=(0,u.outerHeight)(this.TEXTAREA),n=this.getDropdownHeight(),i=(0,u.getTrimmingContainer)(this.instance.view.wt.wtTable.TABLE),r=i.scrollTop,o=(0,u.outerHeight)(this.instance.view.wt.wtTable.THEAD),a={row:0,col:0};i!==window&&(a=(0,u.offset)(i));var s=t.top-a.top-o+r,l=i.scrollHeight-s-o-e,c=n>l&&s>l;return c?this.flipDropdown(n):this.unflipDropdown(),this.limitDropdownIfNeeded(c?s:l,n),c},d.prototype.limitDropdownIfNeeded=function(t,e){if(e>t){var n=0,i=0,r=0,o=null;do r=this.htEditor.getRowHeight(i)||this.htEditor.view.wt.wtSettings.settings.defaultRowHeight,n+=r,i++;while(n<t);o=n-r,this.htEditor.flipped&&(this.htEditor.rootElement.style.top=parseInt(this.htEditor.rootElement.style.top,10)+e-o+"px"),this.setDropdownHeight(n-r)}},d.prototype.flipDropdown=function(t){var e=this.htEditor.rootElement.style;e.position="absolute",e.top=-t+"px",this.htEditor.flipped=!0},d.prototype.unflipDropdown=function(){var t=this.htEditor.rootElement.style;"absolute"===t.position&&(t.position="",t.top=""),this.htEditor.flipped=void 0},d.prototype.updateDropdownHeight=function(){var t=this.htEditor.getColWidth(0)+(0,u.getScrollbarWidth)()+2,e=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:e?void 0:t}),this.htEditor.view.wt.wtTable.alignOverlaysWithTrimmingContainer()},d.prototype.setDropdownHeight=function(t){this.htEditor.updateSettings({height:t})},d.prototype.finishEditing=function(t){t||this.instance.removeHook("beforeKeyDown",r),h["default"].prototype.finishEditing.apply(this,arguments)},d.prototype.highlightBestMatchingChoice=function(t){"number"==typeof t?this.htEditor.selectCell(t,0):this.htEditor.deselectCell()},d.sortByRelevance=function(t,e,n){var i=[],r=void 0,o=t.length,l=void 0,u=void 0,c=[],h=void 0,d=e.length;if(0===o){for(h=0;h<d;h++)c.push(h);return c}for(h=0;h<d;h++)r=(0,s.stripTags)((0,a.stringify)(e[h])),l=n?r.indexOf(t):r.toLowerCase().indexOf(t.toLowerCase()),l!==-1&&(u=r.length-l-o,i.push({baseIndex:h,index:l,charsLeft:u,value:r}));for(i.sort(function(t,e){if(e.index===-1)return-1;if(t.index===-1)return 1;if(t.index<e.index)return-1;if(e.index<t.index)return 1;if(t.index===e.index){if(t.charsLeft<e.charsLeft)return-1;if(t.charsLeft>e.charsLeft)return 1}return 0}),h=0,d=i.length;h<d;h++)c.push(i[h].baseIndex);return c},d.prototype.getDropdownHeight=function(){var t=this.htEditor.getInstance().getRowHeight(0)||23,e=this.cellProperties.visibleRows;return this.strippedChoices.length>=e?e*t:this.strippedChoices.length*t+8},d.prototype.stripValueIfNeeded=function(t){return this.stripValuesIfNeeded([t])[0]},d.prototype.stripValuesIfNeeded=function(t){var e=this.cellProperties.allowHtml,n=(0,l.arrayMap)(t,function(t){return(0,a.stringify)(t)}),i=(0,l.arrayMap)(n,function(t){return e?t:(0,s.stripTags)(t)});return i},d.prototype.allowKeyEventPropagation=function(t){var e={row:this.htEditor.getSelectedRange()?this.htEditor.getSelectedRange().from.row:-1},n=!1;return t===o.KEY_CODES.ARROW_DOWN&&e.row>0&&e.row<this.htEditor.countRows()-1&&(n=!0),t===o.KEY_CODES.ARROW_UP&&e.row>-1&&(n=!0),n},d.prototype.discardEditor=function(t){h["default"].prototype.discardEditor.apply(this,arguments),this.instance.view.render()},e["default"]=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(16),o=n(1),a=n(0),s=n(7),l=n(43),u=i(l),c=u["default"].prototype.extend();c.prototype.createElements=function(){u["default"].prototype.createElements.apply(this,arguments);var t=document.createElement("DIV");t.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(t),this.htContainer=t,this.assignHooks()},c.prototype.prepare=function(t,e,n,i,r,a){u["default"].prototype.prepare.apply(this,arguments);var s=this,l={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,afterOnCellMouseDown:function(t,e){var n=this.getSourceData(e.row,e.col);void 0!==n&&s.setValue(n),s.instance.destroyEditor()}};this.cellProperties.handsontable&&(0,o.extend)(l,a.handsontable),this.htOptions=l};var h=function(t){if(!(0,s.isImmediatePropagationStopped)(t)){var e,n,i=this.getActiveEditor(),o=i.htEditor.getInstance();if(t.keyCode==r.KEY_CODES.ARROW_DOWN)if(o.getSelected()||o.flipped){if(o.getSelected())if(o.flipped)e=o.getSelected()[0]+1;else if(!o.flipped){n=o.getSelected()[0];var a=o.countRows()-1;e=Math.min(a,n+1)}}else e=0;else t.keyCode==r.KEY_CODES.ARROW_UP&&(!o.getSelected()&&o.flipped?e=o.countRows()-1:o.getSelected()&&(o.flipped?(n=o.getSelected()[0],e=Math.max(0,n-1)):(n=o.getSelected()[0],e=n-1)));void 0!==e&&(e<0||o.flipped&&e>o.countRows()-1?o.deselectCell():o.selectCell(e,0),o.getData().length&&(t.preventDefault(),(0,s.stopImmediatePropagation)(t),i.instance.listen(),i.TEXTAREA.focus()))}};c.prototype.open=function(){this.instance.addHook("beforeKeyDown",h),u["default"].prototype.open.apply(this,arguments),this.htEditor&&this.htEditor.destroy(),this.htEditor=new this.instance.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.cellProperties.strict?(this.htEditor.selectCell(0,0),this.TEXTAREA.style.visibility="hidden"):(this.htEditor.deselectCell(),this.TEXTAREA.style.visibility="visible"),(0,a.setCaretPosition)(this.TEXTAREA,0,this.TEXTAREA.value.length)},c.prototype.close=function(){this.instance.removeHook("beforeKeyDown",h),this.instance.listen(),u["default"].prototype.close.apply(this,arguments)},c.prototype.focus=function(){this.instance.listen(),u["default"].prototype.focus.apply(this,arguments)},c.prototype.beginEditing=function(t){var e=this.instance.getSettings().onBeginEditing;e&&e()===!1||u["default"].prototype.beginEditing.apply(this,arguments)},c.prototype.finishEditing=function(t,e){if(this.htEditor&&this.htEditor.isListening()&&this.instance.listen(),this.htEditor&&this.htEditor.getSelected()){var n=this.htEditor.getInstance().getValue();void 0!==n&&this.setValue(n)}return u["default"].prototype.finishEditing.apply(this,arguments)},c.prototype.assignHooks=function(){var t=this;this.instance.addHook("afterDestroy",function(){t.htEditor&&t.htEditor.destroy()})},e["default"]=c},function(t,e,n){"use strict";e.__esModule=!0;var i=n(2),r=n(1),o=n(6),a="arrayMapper",s={_arrayMap:[],getValueByIndex:function(t){var e=void 0;return void 0===(e=this._arrayMap[t])?null:e},getIndexByValue:function(t){var e=void 0;return(e=this._arrayMap.indexOf(t))===-1?null:e},insertItems:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=(0,i.arrayMax)(this._arrayMap)+1,a=[];return(0,o.rangeEach)(n-1,function(n){a.push(e._arrayMap.splice(t+n,0,r+n))}),a},removeItems:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[];if(Array.isArray(t)){var o=[].concat(this._arrayMap);t.sort(function(t,e){return e-t}),r=(0,i.arrayReduce)(t,function(t,n){return e._arrayMap.splice(n,1),t.concat(o.slice(n,n+1))},[])}else r=this._arrayMap.splice(t,n);return r},unshiftItems:function(t){function e(t){return(0,i.arrayReduce)(r,function(e,n){return t>n&&e++,e},0)}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.removeItems(t,n);this._arrayMap=(0,i.arrayMap)(this._arrayMap,function(t,n){var i=e(t);return i&&(t-=i),t})},shiftItems:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._arrayMap=(0,i.arrayMap)(this._arrayMap,function(e){return e>=t&&(e+=n),e}),(0,o.rangeEach)(n-1,function(n){e._arrayMap.splice(t+n,0,t+n)})},clearMap:function(){this._arrayMap.length=0}};(0,r.defineGetter)(s,"MIXIN_NAME",a,{writable:!1,enumerable:!1}),e["default"]=s},function(t,e,n){"use strict";function i(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(6),a=0,s=1,l=2,u="px",c=function(){function t(e){i(this,t),this.hot=e,this._element=null,this.state=a}return r(t,[{key:"appendTo",value:function(t){t.appendChild(this._element),this.state=l}},{key:"build",value:function(){this._element=document.createElement("div"),this.state=s}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=a}},{key:"isAppended",value:function(){return this.state===l}},{key:"isBuilt",value:function(){return this.state>=s}},{key:"setPosition",value:function(t,e){(0,o.isNumeric)(t)&&(this._element.style.top=t+u),(0,o.isNumeric)(e)&&(this._element.style.left=e+u)}},{key:"getPosition",value:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}},{key:"setSize",value:function(t,e){(0,o.isNumeric)(t)&&(this._element.style.width=t+u),(0,o.isNumeric)(e)&&(this._element.style.height=e+u)}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(t,e){(0,o.isNumeric)(t)&&(this._element.style.marginTop=t+u),(0,o.isNumeric)(e)&&(this._element.style.marginLeft=e+u)}},{key:"getOffset",value:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}}]),t}();e["default"]=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=0,a=1,s=2,l="px",u=function(){function t(e){i(this,t),this.hot=e,this._element=null,this.state=o}return r(t,[{key:"appendTo",value:function(t){t.appendChild(this._element),this.state=s}},{key:"build",value:function(){this._element=document.createElement("div"),this.state=a}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=o}},{key:"isAppended",value:function(){return this.state===s}},{key:"isBuilt",value:function(){return this.state>=a}},{key:"setPosition",value:function(t,e){t&&(this._element.style.top=t+l),e&&(this._element.style.left=e+l)}},{key:"getPosition",value:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}},{key:"setSize",value:function(t,e){t&&(this._element.style.width=t+l),e&&(this._element.style.height=e+l)}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(t,e){t&&(this._element.style.marginTop=t+l),e&&(this._element.style.marginLeft=e+l)}},{key:"getOffset",value:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}}]),t}();e["default"]=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){d.set(t,e)}function a(t){var e=void 0;if(!(t instanceof u["default"])){if(!d.has(t))throw Error("Record translator was not registered for this object identity");t=d.get(t)}return f.has(t)?e=f.get(t):(e=new h(t),f.set(t,e)),e}e.__esModule=!0,e.RecordTranslator=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.registerIdentity=o,e.getTranslator=a;var l=n(63),u=i(l),c=n(1),h=function(){function t(e){r(this,t),this.hot=e}return s(t,[{key:"toVisualRow",value:function(t){return this.hot.runHooks("unmodifyRow",t)}},{key:"toVisualColumn",value:function(t){return this.hot.runHooks("unmodifyCol",t)}},{key:"toVisual",value:function(t,e){var n=void 0;return n=(0,c.isObject)(t)?{row:this.toVisualRow(t.row),column:this.toVisualColumn(t.column)}:[this.toVisualRow(t),this.toVisualColumn(e)]}},{key:"toPhysicalRow",value:function(t){return this.hot.runHooks("modifyRow",t)}},{key:"toPhysicalColumn",value:function(t){return this.hot.runHooks("modifyCol",t)}},{key:"toPhysical",value:function(t,e){var n=void 0;return n=(0,c.isObject)(t)?{row:this.toPhysicalRow(t.row),column:this.toPhysicalColumn(t.column)}:[this.toPhysicalRow(t),this.toPhysicalColumn(e)]}}]),t}();e.RecordTranslator=h;var d=new WeakMap,f=new WeakMap},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1),s=n(6),l=n(20),u=function(){function t(e){r(this,t),this.samples=null,this.dataFactory=e,this.customSampleCount=null,this.allowDuplicates=!1}return o(t,null,[{key:"SAMPLE_COUNT",get:function(){return 3}}]),o(t,[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:t.SAMPLE_COUNT}},{key:"setSampleCount",value:function(t){this.customSampleCount=t}},{key:"setAllowDuplicates",value:function(t){this.allowDuplicates=t}},{key:"generateRowSamples",value:function(t,e){return this.generateSamples("row",e,t)}},{key:"generateColumnSamples",value:function(t,e){return this.generateSamples("col",e,t)}},{key:"generateSamples",value:function(t,e,n){var i=this,r=new Map;return"number"==typeof n&&(n={from:n,to:n}),(0,s.rangeEach)(n.from,n.to,function(n){var o=i.generateSample(t,e,n);r.set(n,o)}),r}},{key:"generateSample",value:function(t,e,n){var r=this,o=new Map,u=[],c=void 0;return(0,s.rangeEach)(e.from,e.to,function(e){var s=void 0;if("row"===t)s=r.dataFactory(n,e);else{if("col"!==t)throw new Error("Unsupported sample type");s=r.dataFactory(e,n)}c=(0,a.isObject)(s)?Object.keys(s).length:Array.isArray(s)?s.length:(0,l.stringify)(s).length,o.has(c)||o.set(c,{needed:r.getSampleCount(),strings:[]});var h=o.get(c);if(h.needed){var d=u.indexOf(s)>-1;if(!d||r.allowDuplicates){var f="row"===t?"col":"row";h.strings.push(i({value:s},f,e)),u.push(s),h.needed--}}}),o}}]),t}();e["default"]=u},function(t,e,n){var i=n(23),r=n(24),o=n(59);t.exports=function(t){return function(e,n,a){var s,l=i(e),u=r(l.length),c=o(a,u);if(t&&n!=n){for(;u>c;)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var i=n(38),r=n(10)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){"use strict";var i=n(19).f,r=n(79),o=n(58),a=n(29),s=n(51),l=n(30),u=n(55),c=n(166),h=n(167),d=n(172),f=n(21),p=n(46).fastKey,g=f?"_s":"size",m=function(t,e){var n,i=p(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var h=t(function(t,i){s(t,h,e,"_i"),t._i=r(null),t._f=void 0,t._l=void 0,t[g]=0,void 0!=i&&u(i,n,t[c],t)});return o(h.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[g]=0},"delete":function(t){var e=this,n=m(e,t);if(n){var i=n.n,r=n.p;delete e._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),e._f==n&&(e._f=i),e._l==n&&(e._l=r),e[g]--}return!!n},forEach:function(t){s(this,h,"forEach");for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!m(this,t)}}),f&&i(h.prototype,"size",{get:function(){return l(this[g])}}),h},def:function(t,e,n){var i,r,o=m(t,e);return o?o.v=n:(t._l=o={i:r=p(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[g]++,"F"!==r&&(t._i[r]=o)),t},getEntry:m,setStrong:function(t,e,n){c(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?h(0,n.k):"values"==e?h(0,n.v):h(0,[n.k,n.v]):(t._t=void 0,h(1))},n?"entries":"values",!n,!0),d(e)}}},function(t,e,n){"use strict";var i=n(58),r=n(46).getWeak,o=n(18),a=n(15),s=n(51),l=n(55),u=n(52),c=n(22),h=u(5),d=u(6),f=0,p=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},m=function(t,e){return h(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var u=t(function(t,i){s(t,u,e,"_i"),t._i=f++,t._l=void 0,void 0!=i&&l(i,n,t[o],t)});return i(u.prototype,{"delete":function(t){if(!a(t))return!1;var e=r(t);return e===!0?p(this)["delete"](t):e&&c(e,this._i)&&delete e[this._i]},has:function(t){if(!a(t))return!1;var e=r(t);return e===!0?p(this).has(t):e&&c(e,this._i)}}),u},def:function(t,e,n){var i=r(o(e),!0);return i===!0?p(t).set(e,n):i[t._i]=n,t},ufstore:p}},function(t,e,n){t.exports=n(13).document&&document.documentElement},function(t,e,n){t.exports=!n(21)&&!n(31)(function(){return 7!=Object.defineProperty(n(74)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(45),r=n(10)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){var i=n(38);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(15),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){var i=n(15),r=n(38),o=n(10)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,n){var i=n(18);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(o){var a=t["return"];throw void 0!==a&&i(a.call(t)),o}}},function(t,e,n){"use strict";var i=n(56),r=n(3),o=n(33),a=n(32),s=n(22),l=n(45),u=n(285),c=n(48),h=n(290),d=n(10)("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",g="keys",m="values",v=function(){return this};t.exports=function(t,e,n,y,b,w,x){u(n,e,y);var _,k,C,S=function(t){if(!f&&t in O)return O[t];switch(t){case g:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},M=e+" Iterator",T=b==m,E=!1,O=t.prototype,A=O[d]||O[p]||b&&O[b],D=A||S(b),R=b?T?S("entries"):D:void 0,P="Array"==e?O.entries||A:A;if(P&&(C=h(P.call(new t)),C!==Object.prototype&&(c(C,M,!0),i||s(C,d)||a(C,d,v))),T&&A&&A.name!==m&&(E=!0,D=function(){return A.call(this)}),i&&!x||!f&&!E&&O[d]||a(O,d,D),l[e]=D,l[M]=v,b)if(_={values:T?D:S(m),keys:w?D:S(g),entries:R},x)for(k in _)k in O||o(O,k,_[k]);else r(r.P+r.F*(f||E),e,_);return _}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i=n(39),r=n(57),o=n(47),a=n(41),s=n(77),l=Object.assign;t.exports=!l||n(31)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=i})?function(t,e){for(var n=a(t),l=arguments.length,u=1,c=r.f,h=o.f;l>u;)for(var d,f=s(arguments[u++]),p=c?i(f).concat(c(f)):i(f),g=p.length,m=0;g>m;)h.call(f,d=p[m++])&&(n[d]=f[d]);return n}:l},function(t,e,n){var i=n(22),r=n(23),o=n(155)(!1),a=n(82)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),l=0,u=[];for(n in s)n!=a&&i(s,n)&&u.push(n);for(;e.length>l;)i(s,n=e[l++])&&(~o(u,n)||u.push(n));return u}},function(t,e,n){var i=n(39),r=n(23),o=n(47).f;t.exports=function(t){return function(e){for(var n,a=r(e),s=i(a),l=s.length,u=0,c=[];l>u;)o.call(a,n=s[u++])&&c.push(t?[n,a[n]]:a[n]);return c}}},function(t,e,n){var i=n(15),r=n(18),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(29)(Function.call,n(80).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";var i=n(13),r=n(19),o=n(21),a=n(10)("species");t.exports=function(t){var e=i[t];o&&e&&!e[a]&&r.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(24),r=n(174),o=n(30);t.exports=function(t,e,n,a){var s=String(o(t)),l=s.length,u=void 0===n?" ":String(n),c=i(e);if(c<=l||""==u)return s;var h=c-l,d=r.call(u,Math.ceil(h/u.length));return d.length>h&&(d=d.slice(0,h)),a?d+s:s+d}},function(t,e,n){"use strict";var i=n(60),r=n(30);t.exports=function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){e.f=n(10)},function(t,e,n){var i=n(156),r=n(10)("iterator"),o=n(45);t.exports=n(44).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){"use strict";function i(t){var e="undefined"!=typeof window&&window.jQuery;e&&(e.fn.handsontable=function(e){var n=this.first(),i=n.data("handsontable");if("string"!=typeof e){var r=e||{};return i?i.updateSettings(r):(i=new t.Core(n[0],r),n.data("handsontable",i),i.init()),n}var o=[],a=void 0;if(arguments.length>1)for(var s=1,l=arguments.length;s<l;s++)o.push(arguments[s]);if(i){if("undefined"==typeof i[e])throw new Error("Handsontable do not provide action: "+e);a=i[e].apply(i,o),"destroy"===e&&n.removeData()}return a})}e.__esModule=!0,e["default"]=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.Base=e.UndoRedo=e.TouchScroll=e.Search=e.PersistentState=e.ObserveChanges=e.MultipleSelectionHandles=e.MergeCells=e.ManualRowResize=e.ManualRowMove=e.ManualColumnResize=e.ManualColumnMove=e.ManualColumnFreeze=e.DragToScroll=e.CustomBorders=e.CopyPaste=e.ContextMenu=e.Comments=e.ColumnSorting=e.AutoRowSize=e.AutoFill=e.AutoColumnSize=void 0;var r=n(210),o=i(r),a=n(212),s=i(a),l=n(211),u=i(l),c=n(214),h=i(c),d=n(216),f=i(d),p=n(219),g=i(p),m=n(236),v=i(m),y=n(238),b=i(y),w=n(239),x=i(w),_=n(242),k=i(_),C=n(244),S=i(C),M=n(247),T=i(M),E=n(248),O=i(E),A=n(252),D=i(A),R=n(253),P=i(R),N=n(254),z=i(N),L=n(256),I=i(L),H=n(258),j=i(H),F=n(259),B=i(F),W=n(260),Y=i(W),V=n(261),U=i(V),q=n(12),X=i(q);e.AutoColumnSize=o["default"],e.AutoFill=s["default"],e.AutoRowSize=u["default"],e.ColumnSorting=h["default"],e.Comments=f["default"],e.ContextMenu=g["default"],e.CopyPaste=v["default"],e.CustomBorders=b["default"],e.DragToScroll=x["default"],e.ManualColumnFreeze=k["default"],e.ManualColumnMove=S["default"],e.ManualColumnResize=T["default"],e.ManualRowMove=O["default"],e.ManualRowResize=D["default"],e.MergeCells=P["default"],e.MultipleSelectionHandles=z["default"],e.ObserveChanges=I["default"],e.PersistentState=j["default"],e.Search=B["default"],e.TouchScroll=Y["default"],e.UndoRedo=U["default"],e.Base=X["default"]},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";function i(){function t(t){return t.currentStyle||document.defaultView.getComputedStyle(t)}var e,n={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},i=document.body,r=document.createTextNode(""),o=document.createElement("SPAN"),a=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n,!1)},s=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},l=function(a){var s,l;a?/^[a-zA-Z \.,\\\/\|0-9]$/.test(a)||(a="."):a="",void 0!==r.textContent?r.textContent=e.value+a:r.data=e.value+a,o.style.fontSize=t(e).fontSize,o.style.fontFamily=t(e).fontFamily,o.style.whiteSpace="pre",i.appendChild(o),s=o.clientWidth+2,i.removeChild(o),e.style.height=n.minHeight+"px",n.minWidth>s?e.style.width=n.minWidth+"px":s>n.maxWidth?e.style.width=n.maxWidth+"px":e.style.width=s+"px",l=e.scrollHeight?e.scrollHeight-1:0,n.minHeight>l?e.style.height=n.minHeight+"px":n.maxHeight<l?(e.style.height=n.maxHeight+"px",e.style.overflowY="visible"):e.style.height=l+"px"},u=function(){window.setTimeout(l,0)},c=function(t){if(t&&t.minHeight)if("inherit"==t.minHeight)n.minHeight=e.clientHeight;else{var i=parseInt(t.minHeight);isNaN(i)||(n.minHeight=i)}if(t&&t.maxHeight)if("inherit"==t.maxHeight)n.maxHeight=e.clientHeight;else{var a=parseInt(t.maxHeight);isNaN(a)||(n.maxHeight=a)}if(t&&t.minWidth)if("inherit"==t.minWidth)n.minWidth=e.clientWidth;else{var s=parseInt(t.minWidth);isNaN(s)||(n.minWidth=s)}if(t&&t.maxWidth)if("inherit"==t.maxWidth)n.maxWidth=e.clientWidth;else{var l=parseInt(t.maxWidth);isNaN(l)||(n.maxWidth=l)}o.firstChild||(o.className="autoResize",o.style.display="inline-block",o.appendChild(r))},h=function(t,i,r){e=t,c(i),"TEXTAREA"==e.nodeName&&(e.style.resize="none",e.style.overflowY="",e.style.height=n.minHeight+"px",e.style.minWidth=n.minWidth+"px",e.style.maxWidth=n.maxWidth+"px",e.style.overflowY="hidden"),r&&(a(e,"change",l),a(e,"cut",u),a(e,"paste",u),a(e,"drop",u),a(e,"keydown",u),a(e,"focus",l)),l()};return{init:function(t,e,n){h(t,e,n)},unObserve:function(){s(e,"change",l),s(e,"cut",u),s(e,"paste",u),s(e,"drop",u),s(e,"keydown",u),s(e,"focus",l)},resize:l}}t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(0),l=n(28),u=i(l),c=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.clone=n.makeClone(u["default"].CLONE_DEBUG),n.clone.wtTable.holder.style.opacity=.4,n.clone.wtTable.holder.style.textShadow="0 0 2px #ff0000",(0,s.addClass)(n.clone.wtTable.holder.parentNode,"wtDebugVisible"),n}return a(e,t),e}(u["default"]);u["default"].registerOverlay(u["default"].CLONE_DEBUG,c),e["default"]=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),u=n(28),c=i(u),h=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.clone=n.makeClone(c["default"].CLONE_LEFT),n}return a(e,t),s(e,[{key:"shouldBeRendered",value:function(){return!(!this.wot.getSetting("fixedColumnsLeft")&&!this.wot.getSetting("rowHeaders").length)}},{key:"resetFixedPosition",value:function(){if(this.needFullRender&&this.wot.wtTable.holder.parentNode){var t=this.clone.wtTable.holder.parentNode,e=0,n=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||n&&"horizontal"===n)e=this.getScrollPosition(),(0,l.resetCssTransform)(t);else{var i=this.wot.wtTable.hider.getBoundingClientRect(),r=Math.ceil(i.left),o=Math.ceil(i.right),a=void 0,s=void 0;s=this.wot.wtTable.hider.style.top,s=""===s?0:s,a=r<0&&o-t.offsetWidth>0?-r:0,e=a,a+="px",(0,l.setOverlayPosition)(t,a,s)}this.adjustHeaderBordersPosition(e),this.adjustElementsSize()}}},{key:"setScrollPosition",value:function(t){this.mainTableScrollableElement===window?window.scrollTo(t,(0,l.getWindowScrollTop)()):this.mainTableScrollableElement.scrollLeft=t}},{key:"onScroll",value:function(){this.wot.getSetting("onScrollVertically")}},{key:"sumCellSizes",value:function(t,e){for(var n=0,i=this.wot.wtSettings.defaultColumnWidth;t<e;)n+=this.wot.wtTable.getStretchedColumnWidth(t)||i,t++;return n}},{key:"adjustElementsSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateTrimmingContainer(),(this.needFullRender||t)&&(this.adjustRootElementSize(),this.adjustRootChildrenSize(),t||(this.areElementSizesAdjusted=!0))}},{key:"adjustRootElementSize",value:function(){var t=this.wot.wtTable.holder,e=t.clientHeight===t.offsetHeight?0:(0,l.getScrollbarWidth)(),n=this.clone.wtTable.holder.parentNode,i=n.style,r=this.wot.getSetting("preventOverflow"),o=void 0;if(this.trimmingContainer!==window||"vertical"===r){var a=this.wot.wtViewport.getWorkspaceHeight()-e;a=Math.min(a,(0,l.innerHeight)(this.wot.wtTable.wtRootElement)),i.height=a+"px"}else i.height="";this.clone.wtTable.holder.style.height=i.height,o=(0,l.outerWidth)(this.clone.wtTable.TABLE),i.width=(0===o?o:o+4)+"px"}},{key:"adjustRootChildrenSize",value:function(){var t=(0,l.getScrollbarWidth)();this.clone.wtTable.hider.style.height=this.hider.style.height,this.clone.wtTable.holder.style.height=this.clone.wtTable.holder.parentNode.style.height,0===t&&(t=30),this.clone.wtTable.holder.style.width=parseInt(this.clone.wtTable.holder.parentNode.style.width,10)+t+"px"}},{key:"applyToDOM",value:function(){var t=this.wot.getSetting("totalColumns");if(this.areElementSizesAdjusted||this.adjustElementsSize(),"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition)this.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px";else{if(0!==t)throw new Error("Incorrect value of the columnsRenderCalculator");this.spreader.style.left="0"}this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()}},{key:"syncOverlayOffset",value:function(){"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.top=""}},{key:"scrollTo",value:function(t,e){var n=this.getTableParentOffset(),i=this.wot.cloneSource?this.wot.cloneSource:this.wot,r=i.wtTable.holder,o=0;e&&r.offsetWidth!==r.clientWidth&&(o=(0,l.getScrollbarWidth)()),e?(n+=this.sumCellSizes(0,t+1),n-=this.wot.wtViewport.getViewportWidth()):n+=this.sumCellSizes(this.wot.getSetting("fixedColumnsLeft"),t),n+=o,this.setScrollPosition(n)}},{key:"getTableParentOffset",value:function(){var t=this.wot.getSetting("preventOverflow"),e=0;return t||this.trimmingContainer!==window||(e=this.wot.wtTable.holderOffset.left),e}},{key:"getScrollPosition",value:function(){return(0,l.getScrollLeft)(this.mainTableScrollableElement)}},{key:"adjustHeaderBordersPosition",value:function(t){var e=this.wot.wtTable.holder.parentNode,n=this.wot.getSetting("rowHeaders"),i=this.wot.getSetting("fixedColumnsLeft"),r=this.wot.getSetting("totalRows");if(r?(0,l.removeClass)(e,"emptyRows"):(0,l.addClass)(e,"emptyRows"),i&&!n.length)(0,l.addClass)(e,"innerBorderLeft");else if(!i&&n.length){var o=(0,l.hasClass)(e,"innerBorderLeft");t?(0,l.addClass)(e,"innerBorderLeft"):(0,l.removeClass)(e,"innerBorderLeft"),(!o&&t||o&&!t)&&this.wot.wtOverlays.adjustElementsSize()}}}]),e}(c["default"]);c["default"].registerOverlay(c["default"].CLONE_LEFT,h),e["default"]=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),u=n(28),c=i(u),h=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.clone=n.makeClone(c["default"].CLONE_TOP),n}return a(e,t),s(e,[{key:"shouldBeRendered",value:function(){return!(!this.wot.getSetting("fixedRowsTop")&&!this.wot.getSetting("columnHeaders").length)}},{key:"resetFixedPosition",value:function(){if(this.needFullRender&&this.wot.wtTable.holder.parentNode){var t=this.clone.wtTable.holder.parentNode,e=0,n=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||n&&"vertical"===n)e=this.getScrollPosition(),(0,l.resetCssTransform)(t);else{var i=this.wot.wtTable.hider.getBoundingClientRect(),r=Math.ceil(i.top),o=Math.ceil(i.bottom),a=void 0,s=void 0;a=this.wot.wtTable.hider.style.left,a=""===a?0:a,s=r<0&&o-t.offsetHeight>0?-r:0,e=s,s+="px",(0,l.setOverlayPosition)(t,a,s)}this.adjustHeaderBordersPosition(e),this.adjustElementsSize()}}},{key:"setScrollPosition",value:function(t){this.mainTableScrollableElement===window?window.scrollTo((0,l.getWindowScrollLeft)(),t):this.mainTableScrollableElement.scrollTop=t}},{key:"onScroll",value:function(){this.wot.getSetting("onScrollHorizontally")}},{key:"sumCellSizes",value:function(t,e){for(var n=0,i=this.wot.wtSettings.settings.defaultRowHeight;t<e;){var r=this.wot.wtTable.getRowHeight(t);n+=void 0===r?i:r,t++}return n}},{key:"adjustElementsSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateTrimmingContainer(),(this.needFullRender||t)&&(this.adjustRootElementSize(),this.adjustRootChildrenSize(),t||(this.areElementSizesAdjusted=!0))}},{key:"adjustRootElementSize",value:function(){var t=this.wot.wtTable.holder,e=t.clientWidth===t.offsetWidth?0:(0,l.getScrollbarWidth)(),n=this.clone.wtTable.holder.parentNode,i=n.style,r=this.wot.getSetting("preventOverflow"),o=void 0;if(this.trimmingContainer!==window||"horizontal"===r){var a=this.wot.wtViewport.getWorkspaceWidth()-e;a=Math.min(a,(0,l.innerWidth)(this.wot.wtTable.wtRootElement)),i.width=a+"px"}else i.width="";this.clone.wtTable.holder.style.width=i.width,o=(0,l.outerHeight)(this.clone.wtTable.TABLE),i.height=(0===o?o:o+4)+"px"}},{key:"adjustRootChildrenSize",value:function(){var t=(0,l.getScrollbarWidth)();this.clone.wtTable.hider.style.width=this.hider.style.width,this.clone.wtTable.holder.style.width=this.clone.wtTable.holder.parentNode.style.width,0===t&&(t=30),this.clone.wtTable.holder.style.height=parseInt(this.clone.wtTable.holder.parentNode.style.height,10)+t+"px"}},{key:"applyToDOM",value:function(){var t=this.wot.getSetting("totalRows");if(this.areElementSizesAdjusted||this.adjustElementsSize(),"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px";else{if(0!==t)throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.top="0"}this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}},{key:"syncOverlayOffset",value:function(){"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.left=""}},{key:"scrollTo",value:function(t,e){var n=this.getTableParentOffset(),i=this.wot.cloneSource?this.wot.cloneSource:this.wot,r=i.wtTable.holder,o=0;if(e&&r.offsetHeight!==r.clientHeight&&(o=(0,l.getScrollbarWidth)()),e){var a=this.wot.getSetting("fixedRowsBottom"),s=(this.wot.getSetting("fixedRowsTop"),this.wot.getSetting("totalRows"));n+=this.sumCellSizes(0,t+1),n-=this.wot.wtViewport.getViewportHeight()-this.sumCellSizes(s-a,s),n+=1}else n+=this.sumCellSizes(this.wot.getSetting("fixedRowsTop"),t);n+=o,this.setScrollPosition(n)}},{key:"getTableParentOffset",value:function(){return this.mainTableScrollableElement===window?this.wot.wtTable.holderOffset.top:0}},{key:"getScrollPosition",value:function(){return(0,l.getScrollTop)(this.mainTableScrollableElement)}},{key:"redrawSelectionBorders",value:function(t){if(t&&t.cellRange){var e=t.getBorder(this.wot);if(e){var n=t.getCorners();e.disappear(),e.appear(n)}}}},{key:"redrawAllSelectionsBorders",value:function(){var t=this.wot.selections;this.redrawSelectionBorders(t.current),this.redrawSelectionBorders(t.area),this.redrawSelectionBorders(t.fill),this.wot.wtTable.wot.wtOverlays.leftOverlay.refresh()}},{key:"adjustHeaderBordersPosition",value:function(t){var e=this.wot.wtTable.holder.parentNode,n=this.wot.getSetting("totalColumns");if(n?(0,l.removeClass)(e,"emptyColumns"):(0,l.addClass)(e,"emptyColumns"),0===this.wot.getSetting("fixedRowsTop")&&this.wot.getSetting("columnHeaders").length>0){var i=(0,l.hasClass)(e,"innerBorderTop");t||0===this.wot.getSetting("totalRows")?(0,l.addClass)(e,"innerBorderTop"):(0,l.removeClass)(e,"innerBorderTop"),(!i&&t||i&&!t)&&(this.wot.wtOverlays.adjustElementsSize(),this.redrawAllSelectionsBorders())}if(0===this.wot.getSetting("rowHeaders").length){var r=this.clone.wtTable.THEAD.querySelectorAll("th:nth-of-type(2)");if(r)for(var o=0;o<r.length;o++)r[o].style["border-left-width"]=0}}}]),e}(c["default"]);c["default"].registerOverlay(c["default"].CLONE_TOP,h),e["default"]=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);
}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),u=n(28),c=i(u),h=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.clone=n.makeClone(c["default"].CLONE_TOP_LEFT_CORNER),n}return a(e,t),s(e,[{key:"shouldBeRendered",value:function(){return!(!this.wot.getSetting("fixedRowsTop")&&!this.wot.getSetting("columnHeaders").length||!this.wot.getSetting("fixedColumnsLeft")&&!this.wot.getSetting("rowHeaders").length)}},{key:"resetFixedPosition",value:function(){if(this.updateTrimmingContainer(),this.wot.wtTable.holder.parentNode){var t=this.clone.wtTable.holder.parentNode,e=(0,l.outerHeight)(this.clone.wtTable.TABLE),n=(0,l.outerWidth)(this.clone.wtTable.TABLE),i=this.wot.getSetting("preventOverflow");if(this.trimmingContainer===window){var r=this.wot.wtTable.hider.getBoundingClientRect(),o=Math.ceil(r.top),a=Math.ceil(r.left),s=Math.ceil(r.bottom),u=Math.ceil(r.right),c="0",h="0";i&&"vertical"!==i||a<0&&u-t.offsetWidth>0&&(c=-a+"px"),i&&"horizontal"!==i||o<0&&s-t.offsetHeight>0&&(h=-o+"px"),(0,l.setOverlayPosition)(t,c,h)}else(0,l.resetCssTransform)(t);t.style.height=(0===e?e:e+4)+"px",t.style.width=(0===n?n:n+4)+"px"}}}]),e}(c["default"]);c["default"].registerOverlay(c["default"].CLONE_TOP_LEFT_CORNER,h),e["default"]=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=n(135),u=i(l),c=n(42),h=i(c),d=n(68),f=i(d),p=function(){function t(e,n){r(this,t),this.settings=e,this.cellRange=n||null,this.instanceBorders={}}return a(t,[{key:"getBorder",value:function(t){return this.instanceBorders[t.guid]?this.instanceBorders[t.guid]:void(this.instanceBorders[t.guid]=new u["default"](t,this.settings))}},{key:"isEmpty",value:function(){return null===this.cellRange}},{key:"add",value:function(t){this.isEmpty()?this.cellRange=new f["default"](t,t,t):this.cellRange.expand(t)}},{key:"replace",value:function(t,e){if(!this.isEmpty()){if(this.cellRange.from.isEqual(t))return this.cellRange.from=e,!0;if(this.cellRange.to.isEqual(t))return this.cellRange.to=e,!0}return!1}},{key:"clear",value:function(){this.cellRange=null}},{key:"getCorners",value:function(){var t=this.cellRange.getTopLeftCorner(),e=this.cellRange.getBottomRightCorner();return[t.row,t.col,e.row,e.col]}},{key:"addClassAtCoords",value:function(t,e,n,i){var r=t.wtTable.getCell(new h["default"](e,n));"object"===("undefined"==typeof r?"undefined":o(r))&&(0,s.addClass)(r,i)}},{key:"draw",value:function(t){if(this.isEmpty()){if(this.settings.border){var e=this.getBorder(t);e&&e.disappear()}}else{for(var n=t.wtTable.getRenderedRowsCount(),i=t.wtTable.getRenderedColumnsCount(),r=this.getCorners(),o=void 0,a=void 0,l=void 0,u=0;u<i;u++)if(a=t.wtTable.columnFilter.renderedToSource(u),a>=r[1]&&a<=r[3]&&(l=t.wtTable.getColumnHeader(a))){var c=[];this.settings.highlightHeaderClassName&&c.push(this.settings.highlightHeaderClassName),this.settings.highlightColumnClassName&&c.push(this.settings.highlightColumnClassName),(0,s.addClass)(l,c)}for(var h=0;h<n;h++){if(o=t.wtTable.rowFilter.renderedToSource(h),o>=r[0]&&o<=r[2]&&(l=t.wtTable.getRowHeader(o))){var d=[];this.settings.highlightHeaderClassName&&d.push(this.settings.highlightHeaderClassName),this.settings.highlightRowClassName&&d.push(this.settings.highlightRowClassName),(0,s.addClass)(l,d)}for(var f=0;f<i;f++)a=t.wtTable.columnFilter.renderedToSource(f),o>=r[0]&&o<=r[2]&&a>=r[1]&&a<=r[3]?this.settings.className&&this.addClassAtCoords(t,o,a,this.settings.className):o>=r[0]&&o<=r[2]?this.settings.highlightRowClassName&&this.addClassAtCoords(t,o,a,this.settings.highlightRowClassName):a>=r[1]&&a<=r[3]&&this.settings.highlightColumnClassName&&this.addClassAtCoords(t,o,a,this.settings.highlightColumnClassName)}if(t.getSetting("onBeforeDrawBorders",r,this.settings.className),this.settings.border){var p=this.getBorder(t);p&&p.appear(r)}}}}]),t}();e["default"]=p},function(t,e,n){"use strict";e.__esModule=!0;var i=n(14),r=n(9),o=n(26),a="autocomplete";e["default"]={editor:(0,i.getEditor)(a),renderer:(0,r.getRenderer)(a),validator:(0,o.getValidator)(a)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(14),r=n(9),o="checkbox";e["default"]={editor:(0,i.getEditor)(o),renderer:(0,r.getRenderer)(o)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(14),r=n(9),o=n(26),a="date";e["default"]={editor:(0,i.getEditor)(a),renderer:(0,r.getRenderer)("autocomplete"),validator:(0,o.getValidator)(a)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(14),r=n(9),o=n(26),a="dropdown";e["default"]={editor:(0,i.getEditor)(a),renderer:(0,r.getRenderer)("autocomplete"),validator:(0,o.getValidator)("autocomplete")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(14),r=n(9),o="handsontable";e["default"]={editor:(0,i.getEditor)(o),renderer:(0,r.getRenderer)("autocomplete")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(14),r=n(9),o=n(26),a="numeric";e["default"]={editor:(0,i.getEditor)(a),renderer:(0,r.getRenderer)(a),validator:(0,o.getValidator)(a),dataType:"number"}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(14),r=n(9),o=(n(26),"password");e["default"]={editor:(0,i.getEditor)(o),renderer:(0,r.getRenderer)(o),copyable:!1}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(25),r=n(14),o=n(9),a="text";e["default"]={editor:(0,i.isMobileBrowser)()?(0,r.getEditor)("mobile"):(0,r.getEditor)(a),renderer:(0,o.getRenderer)(a)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(14),r=n(9),o=n(26),a="time";e["default"]={editor:(0,i.getEditor)("text"),renderer:(0,r.getRenderer)("text"),validator:(0,o.getValidator)(a)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n){var i=this;this.instance=t,this.priv=e,this.GridSettings=n,this.dataSource=this.instance.getSettings().data,this.cachedLength=null,this.skipCache=!1,this.latestSourceRowsCount=0,this.dataSource&&this.dataSource[0]?this.duckSchema=this.recursiveDuckSchema(this.dataSource[0]):this.duckSchema={},this.createMap(),this.interval=f["default"].create(function(){return i.clearLengthCache()},"15fps"),this.instance.addHook("skipLengthCache",function(t){return i.onSkipLengthCache(t)}),this.onSkipLengthCache(500)}e.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(133),s=i(a),l=n(64),u=n(65),c=n(1),h=n(2),d=n(271),f=i(d),p=n(6),g=n(209),m=i(g),v=n(8);i(v);r.prototype.DESTINATION_RENDERER=1,r.prototype.DESTINATION_CLIPBOARD_GENERATOR=2,r.prototype.recursiveDuckSchema=function(t){return(0,c.duckSchema)(t)},r.prototype.recursiveDuckColumns=function(t,e,n){var i,r;if("undefined"==typeof e&&(e=0,n=""),"object"===("undefined"==typeof t?"undefined":o(t))&&!Array.isArray(t))for(r in t)(0,c.hasOwnProperty)(t,r)&&(null===t[r]?(i=n+r,this.colToPropCache.push(i),this.propToColCache.set(i,e),e++):e=this.recursiveDuckColumns(t[r],e,r+"."));return e},r.prototype.createMap=function(){var t=void 0,e=this.getSchema();if("undefined"==typeof e)throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");this.colToPropCache=[],this.propToColCache=new m["default"];var n=this.instance.getSettings().columns;if(n){var i=this.instance.getSettings().maxCols,r=Math.min(i,n.length),o=0,a=!1,s=(0,c.deepObjectSize)(e);for("function"==typeof n&&(r=s>0?s:this.instance.countSourceCols(),a=!0),t=0;t<r;t++){var l=a?n(t):n[t];if((0,c.isObject)(l)){if("undefined"!=typeof l.data){var u=a?o:t;this.colToPropCache[u]=l.data,this.propToColCache.set(l.data,u)}o++}}}else this.recursiveDuckColumns(e)},r.prototype.colToProp=function(t){return t=this.instance.runHooks("modifyCol",t),!isNaN(t)&&this.colToPropCache&&"undefined"!=typeof this.colToPropCache[t]?this.colToPropCache[t]:t},r.prototype.propToCol=function(t){var e;return e="undefined"==typeof this.propToColCache.get(t)?t:this.propToColCache.get(t),e=this.instance.runHooks("unmodifyCol",e)},r.prototype.getSchema=function(){var t=this.instance.getSettings().dataSchema;return t?"function"==typeof t?t():t:this.duckSchema},r.prototype.createRow=function(t,e,n){var i,r,o=this.instance.countCols(),a=0;e||(e=1),("number"!=typeof t||t>=this.instance.countSourceRows())&&(t=this.instance.countSourceRows()),this.instance.runHooks("beforeCreateRow",t,e,n),r=t;for(var s=this.instance.getSettings().maxRows;a<e&&this.instance.countSourceRows()<s;)"array"===this.instance.dataType?this.instance.getSettings().dataSchema?i=(0,c.deepClone)(this.getSchema()):(i=[],(0,p.rangeEach)(o-1,function(){return i.push(null)})):"function"===this.instance.dataType?i=this.instance.getSettings().dataSchema(t):(i={},(0,c.deepExtend)(i,this.getSchema())),t===this.instance.countSourceRows()?this.dataSource.push(i):this.spliceData(t,0,i),a++,r++;return this.instance.runHooks("afterCreateRow",t,a,n),this.instance.forceFullRender=!0,a},r.prototype.createCol=function(t,e,n){if(!this.instance.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var i,r,o=this.instance.countSourceRows(),a=this.dataSource,s=0;e||(e=1),("number"!=typeof t||t>=this.instance.countCols())&&(t=this.instance.countCols()),this.instance.runHooks("beforeCreateCol",t,e,n),r=t;for(var l=this.instance.getSettings().maxCols;s<e&&this.instance.countCols()<l;){if(i=(0,u.columnFactory)(this.GridSettings,this.priv.columnsSettingConflicts),"number"!=typeof t||t>=this.instance.countCols()){if(o>0)for(var c=0;c<o;c++)"undefined"==typeof a[c]&&(a[c]=[]),a[c].push(null);else a.push([null]);this.priv.columnSettings.push(i)}else{for(var h=0;h<o;h++)a[h].splice(r,0,null);this.priv.columnSettings.splice(r,0,i)}s++,r++}return this.instance.runHooks("afterCreateCol",t,s,n),this.instance.forceFullRender=!0,s},r.prototype.removeRow=function(t,e,n){e||(e=1),"number"!=typeof t&&(t=-e),e=this.instance.runHooks("modifyRemovedAmount",e,t),t=(this.instance.countSourceRows()+t)%this.instance.countSourceRows();var i=this.visualRowsToPhysical(t,e),r=this.instance.runHooks("beforeRemoveRow",t,e,i,n);if(r!==!1){var o=this.dataSource,a=void 0;a=this.filterData(t,e),a&&(o.length=0,Array.prototype.push.apply(o,a)),this.instance.runHooks("afterRemoveRow",t,e,i,n),this.instance.forceFullRender=!0}},r.prototype.removeCol=function(t,e,n){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("cannot remove column with object data source or columns option specified");e||(e=1),"number"!=typeof t&&(t=-e),t=(this.instance.countCols()+t)%this.instance.countCols();var i=this.visualColumnsToPhysical(t,e),r=i.slice(0).sort(function(t,e){return e-t}),o=this.instance.runHooks("beforeRemoveCol",t,e,i,n);if(o!==!1){for(var a=!0,s=r.length,l=this.dataSource,u=0;u<s;u++)a&&i[0]!==i[u]-u&&(a=!1);if(a)for(var c=0,h=this.instance.countSourceRows();c<h;c++)l[c].splice(i[0],e);else{for(var d=0,f=this.instance.countSourceRows();d<f;d++)for(var p=0;p<s;p++)l[d].splice(r[p],1);for(var g=0;g<s;g++)this.priv.columnSettings.splice(i[g],1)}this.instance.runHooks("afterRemoveCol",t,e,i,n),this.instance.forceFullRender=!0}},r.prototype.spliceCol=function(t,e,n){var i=arguments.length>=4?[].slice.call(arguments,3):[],r=this.instance.getDataAtCol(t),o=r.slice(e,e+n),a=r.slice(e+n);(0,h.extendArray)(i,a);for(var s=0;s<n;)i.push(null),s++;return(0,h.to2dArray)(i),this.instance.populateFromArray(e,t,i,null,null,"spliceCol"),o},r.prototype.spliceRow=function(t,e,n){var i=arguments.length>=4?[].slice.call(arguments,3):[],r=this.instance.getSourceDataAtRow(t),o=r.slice(e,e+n),a=r.slice(e+n);(0,h.extendArray)(i,a);for(var s=0;s<n;)i.push(null),s++;return this.instance.populateFromArray(t,e,[i],null,null,"spliceRow"),o},r.prototype.spliceData=function(t,e,n){var i=this.instance.runHooks("beforeDataSplice",t,e,n);i!==!1&&this.dataSource.splice(t,e,n)},r.prototype.filterData=function(t,e){var n=this.visualRowsToPhysical(t,e),i=this.instance.runHooks("beforeDataFilter",t,e,n);if(i!==!1){var r=this.dataSource.filter(function(t,e){return n.indexOf(e)==-1});return r}},r.prototype.get=function(t,e){t=this.instance.runHooks("modifyRow",t);var n=this.dataSource[t],i=this.instance.runHooks("modifyRowData",t);n=isNaN(i)?i:n;var r=null;if(n&&n.hasOwnProperty&&(0,c.hasOwnProperty)(n,e))r=n[e];else if("string"==typeof e&&e.indexOf(".")>-1){var o=e.split("."),a=n;if(!a)return null;for(var s=0,l=o.length;s<l;s++)if(a=a[o[s]],"undefined"==typeof a)return null;r=a}else"function"==typeof e&&(r=e(this.dataSource.slice(t,t+1)[0]));if(this.instance.hasHook("modifyData")){var u=(0,c.createObjectPropListener)(r);this.instance.runHooks("modifyData",t,this.propToCol(e),u,"get"),u.isTouched()&&(r=u.value)}return r};var y=(0,l.cellMethodLookupFactory)("copyable",!1);r.prototype.getCopyable=function(t,e){return y.call(this.instance,t,this.propToCol(e))?this.get(t,e):""},r.prototype.set=function(t,e,n,i){t=this.instance.runHooks("modifyRow",t,i||"datamapGet");var r=this.dataSource[t],o=this.instance.runHooks("modifyRowData",t);if(r=isNaN(o)?o:r,this.instance.hasHook("modifyData")){var a=(0,c.createObjectPropListener)(n);this.instance.runHooks("modifyData",t,this.propToCol(e),a,"set"),a.isTouched()&&(n=a.value)}if(r&&r.hasOwnProperty&&(0,c.hasOwnProperty)(r,e))r[e]=n;else if("string"==typeof e&&e.indexOf(".")>-1){var s=e.split("."),l=r,u=0,h=void 0;for(u=0,h=s.length-1;u<h;u++)"undefined"==typeof l[s[u]]&&(l[s[u]]={}),l=l[s[u]];l[s[u]]=n}else"function"==typeof e?e(this.dataSource.slice(t,t+1)[0],n):r[e]=n},r.prototype.visualRowsToPhysical=function(t,e){for(var n,i=this.instance.countSourceRows(),r=(i+t)%i,o=[],a=e;r<i&&a;)n=this.instance.runHooks("modifyRow",r),o.push(n),a--,r++;return o},r.prototype.visualColumnsToPhysical=function(t,e){for(var n=this.instance.countCols(),i=(n+t)%n,r=[],o=e;i<n&&o;){var a=this.instance.runHooks("modifyCol",i);r.push(a),o--,i++}return r},r.prototype.clear=function(){for(var t=0;t<this.instance.countSourceRows();t++)for(var e=0;e<this.instance.countCols();e++)this.set(t,this.colToProp(e),"")},r.prototype.clearLengthCache=function(){this.cachedLength=null},r.prototype.getLength=function(){var t=this,e=void 0,n=this.instance.getSettings().maxRows;e=n<0||0===n?0:n||1/0;var i=this.instance.countSourceRows();if(this.instance.hasHook("modifyRow")){var r=this.skipCache;this.interval.start(),i!==this.latestSourceRowsCount&&(r=!0),this.latestSourceRowsCount=i,null===this.cachedLength||r?((0,p.rangeEach)(i-1,function(e){e=t.instance.runHooks("modifyRow",e),null===e&&--i}),this.cachedLength=i):i=this.cachedLength}else this.interval.stop();return Math.min(i,e)},r.prototype.getAll=function(){var t={row:0,col:0},e={row:Math.max(this.instance.countSourceRows()-1,0),col:Math.max(this.instance.countCols()-1,0)};return t.row-e.row!==0||this.instance.countSourceRows()?this.getRange(t,e,r.prototype.DESTINATION_RENDERER):[]},r.prototype.getRange=function(t,e,n){var i,r,o,a,s,l=[],u=this.instance.getSettings().maxRows,c=this.instance.getSettings().maxCols;if(0===u||0===c)return[];var h=n===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;for(r=Math.min(Math.max(u-1,0),Math.max(t.row,e.row)),a=Math.min(Math.max(c-1,0),Math.max(t.col,e.col)),i=Math.min(t.row,e.row);i<=r;i++){s=[];var d=this.instance.runHooks("modifyRow",i);for(o=Math.min(t.col,e.col);o<=a&&null!==d;o++)s.push(h.call(this,i,this.colToProp(o)));null!==d&&l.push(s)}return l},r.prototype.getText=function(t,e){return s["default"].stringify(this.getRange(t,e,this.DESTINATION_RENDERER))},r.prototype.getCopyableText=function(t,e){return s["default"].stringify(this.getRange(t,e,this.DESTINATION_CLIPBOARD_GENERATOR))},r.prototype.onSkipLengthCache=function(t){var e=this;this.skipCache=!0,setTimeout(function(){e.skipCache=!1},t)},r.prototype.destroy=function(){this.interval.stop(),this.interval=null,this.instance=null,this.priv=null,this.GridSettings=null,this.dataSource=null,this.cachedLength=null,this.duckSchema=null},e["default"]=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),a=n(2),s=n(6),l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];i(this,t),this.hot=e,this.data=n,this.dataType="array",this.colToProp=function(){},this.propToCol=function(){}}return r(t,[{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.data;return t&&(e=this.getByRange({row:0,col:0},{row:Math.max(this.countRows()-1,0),col:Math.max(this.countColumns()-1,0)},!0)),e}},{key:"setData",value:function(t){this.data=t}},{key:"getAtColumn",value:function(t){var e=this,n=[];return(0,a.arrayEach)(this.data,function(i){var r=e.colToProp(t);i="string"==typeof r?(0,o.getProperty)(i,r):i[r],n.push(i)}),n}},{key:"getAtRow",value:function(t){return this.data[t]}},{key:"getAtCell",value:function(t,e){var n=null,i=this.hot.runHooks("modifyRowData",t),r=isNaN(i)?i:this.data[t];if(r){var a=this.colToProp(e);n="string"==typeof a?(0,o.getProperty)(r,a):"function"==typeof a?a(this.data.slice(t,t+1)[0]):r[a]}return n}},{key:"getByRange",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Math.min(t.row,e.row),o=Math.min(t.col,e.col),a=Math.max(t.row,e.row),l=Math.max(t.col,e.col),u=[];return(0,s.rangeEach)(r,a,function(t){var e=n.getAtRow(t),r=void 0;"array"===n.dataType?r=e.slice(o,l+1):"object"===n.dataType&&(r=i?[]:{},(0,s.rangeEach)(o,l,function(t){var o=n.colToProp(t);i?r.push(e[o]):r[o]=e[o]})),u.push(r)}),u}},{key:"countRows",value:function(){return Array.isArray(this.data)?this.data.length:0}},{key:"countColumns",value:function(){var t=0;return Array.isArray(this.data)&&("array"===this.dataType?t=this.data[0].length:"object"===this.dataType&&(t=Object.keys(this.data[0]).length)),t}},{key:"destroy",value:function(){this.data=null,this.hot=null}}]),t}();e["default"]=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n){function i(t){n.setSelectedHeaders(!1,!1,!1);var i="function"==typeof e.settings.enterMoves?e.settings.enterMoves(event):e.settings.enterMoves;t?n.transformStart(-i.row,-i.col):n.transformStart(i.row,i.col,!0)}function r(t){t?(n.selectedHeader.cols&&n.setSelectedHeaders(n.selectedHeader.rows,!1,!1),n.transformEnd(-1,0)):(n.setSelectedHeaders(!1,!1,!1),n.transformStart(-1,0))}function u(t){t?n.transformEnd(1,0):(n.setSelectedHeaders(!1,!1,!1),n.transformStart(1,0))}function d(t){t?n.transformEnd(0,1):(n.setSelectedHeaders(!1,!1,!1),n.transformStart(0,1))}function f(t){t?(n.selectedHeader.rows&&n.setSelectedHeaders(!1,n.selectedHeader.cols,!1),n.transformEnd(0,-1)):(n.setSelectedHeaders(!1,!1,!1),n.transformStart(0,-1))}function p(l){var c,p;if(t.isListening()&&(t.runHooks("beforeKeyDown",l),!b&&!(0,s.isImmediatePropagationStopped)(l)&&(e.lastKeyCode=l.keyCode,n.isSelected()))){if(c=(l.ctrlKey||l.metaKey)&&!l.altKey,v&&!v.isWaiting()&&!((0,a.isMetaKey)(l.keyCode)||(0,a.isCtrlKey)(l.keyCode)||c||y.isEditorOpened()))return void y.openEditor("",l);switch(p=l.shiftKey?n.setRangeEnd:n.setRangeStart,l.keyCode){case a.KEY_CODES.A:!y.isEditorOpened()&&c&&(n.selectAll(),l.preventDefault(),(0,s.stopPropagation)(l));break;case a.KEY_CODES.ARROW_UP:y.isEditorOpened()&&!v.isWaiting()&&y.closeEditorAndSaveChanges(c),r(l.shiftKey),l.preventDefault(),(0,s.stopPropagation)(l);break;case a.KEY_CODES.ARROW_DOWN:y.isEditorOpened()&&!v.isWaiting()&&y.closeEditorAndSaveChanges(c),u(l.shiftKey),l.preventDefault(),(0,s.stopPropagation)(l);break;case a.KEY_CODES.ARROW_RIGHT:y.isEditorOpened()&&!v.isWaiting()&&y.closeEditorAndSaveChanges(c),d(l.shiftKey),l.preventDefault(),(0,s.stopPropagation)(l);break;case a.KEY_CODES.ARROW_LEFT:y.isEditorOpened()&&!v.isWaiting()&&y.closeEditorAndSaveChanges(c),f(l.shiftKey),l.preventDefault(),(0,s.stopPropagation)(l);break;case a.KEY_CODES.TAB:n.setSelectedHeaders(!1,!1,!1);var g="function"==typeof e.settings.tabMoves?e.settings.tabMoves(l):e.settings.tabMoves;l.shiftKey?n.transformStart(-g.row,-g.col):n.transformStart(g.row,g.col,!0),l.preventDefault(),(0,s.stopPropagation)(l);break;case a.KEY_CODES.BACKSPACE:case a.KEY_CODES.DELETE:n.empty(l),y.prepareEditor(),l.preventDefault();break;case a.KEY_CODES.F2:y.openEditor(null,l),v&&v.enableFullEditMode(),l.preventDefault();break;case a.KEY_CODES.ENTER:y.isEditorOpened()?(v&&v.state!==h.EditorState.WAITING&&y.closeEditorAndSaveChanges(c),i(l.shiftKey)):t.getSettings().enterBeginsEditing?(y.openEditor(null,l),v&&v.enableFullEditMode()):i(l.shiftKey),l.preventDefault(),(0,s.stopImmediatePropagation)(l);break;case a.KEY_CODES.ESCAPE:y.isEditorOpened()&&y.closeEditorAndRestoreOriginalValue(c),l.preventDefault();break;case a.KEY_CODES.HOME:n.setSelectedHeaders(!1,!1,!1),p(l.ctrlKey||l.metaKey?new o.CellCoords(0,e.selRange.from.col):new o.CellCoords(e.selRange.from.row,0)),l.preventDefault(),(0,s.stopPropagation)(l);break;case a.KEY_CODES.END:n.setSelectedHeaders(!1,!1,!1),p(l.ctrlKey||l.metaKey?new o.CellCoords(t.countRows()-1,e.selRange.from.col):new o.CellCoords(e.selRange.from.row,t.countCols()-1)),l.preventDefault(),(0,s.stopPropagation)(l);break;case a.KEY_CODES.PAGE_UP:n.setSelectedHeaders(!1,!1,!1),n.transformStart(-t.countVisibleRows(),0),l.preventDefault(),(0,s.stopPropagation)(l);break;case a.KEY_CODES.PAGE_DOWN:n.setSelectedHeaders(!1,!1,!1),n.transformStart(t.countVisibleRows(),0),l.preventDefault(),(0,s.stopPropagation)(l)}}}function g(){function e(t,e,n){"TD"==n.nodeName&&(y.openEditor(),v&&v.enableFullEditMode())}t.addHook("afterDocumentKeyDown",p),m.addEventListener(document.documentElement,"keydown",function(e){b||t.runHooks("afterDocumentKeyDown",e)}),t.view.wt.update("onCellDblClick",e),t.addHook("afterDestroy",function(){b=!0})}var m,v,y=this,b=!1;m=new c["default"](t),this.destroyEditor=function(t){this.closeEditor(t)},this.getActiveEditor=function(){return v},this.prepareEditor=function(){var n,i,r,o,a,s,u;return v&&v.isWaiting()?void this.closeEditor(!1,!1,function(t){t&&y.prepareEditor()}):(n=e.selRange.highlight.row,i=e.selRange.highlight.col,r=t.colToProp(i),o=t.getCell(n,i),a=t.getSourceDataAtCell(t.runHooks("modifyRow",n),i),s=t.getCellMeta(n,i),u=t.getCellEditor(s),void(u?(v=(0,l.getEditorInstance)(u,t),v.prepare(n,i,r,o,a,s)):v=void 0))},this.isEditorOpened=function(){return v&&v.isOpened()},this.openEditor=function(t,e){v&&!v.cellProperties.readOnly?v.beginEditing(t,e):v&&v.cellProperties.readOnly&&e&&e.keyCode===a.KEY_CODES.ENTER&&i()},this.closeEditor=function(t,e,n){v?v.finishEditing(t,e,n):n&&n(!1)},this.closeEditorAndSaveChanges=function(t){return this.closeEditor(!1,t)},this.closeEditorAndRestoreOriginalValue=function(t){return this.closeEditor(!0,t)},g()}e.__esModule=!0;var o=n(11),a=n(16),s=n(7),l=n(14),u=n(4),c=i(u),h=n(36);e["default"]=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(36),u=i(l),c=n(0),h=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"beginEditing",value:function(t,e){if(void 0===e){var n=this.TD.querySelector('input[type="checkbox"]');(0,c.hasClass)(n,"htBadValue")||n.click()}}},{key:"finishEditing",value:function(){}},{key:"init",value:function(){}},{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"getValue",value:function(){}},{key:"setValue",value:function(){}},{key:"focus",value:function(){}}]),e}(u["default"]);e["default"]=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function _(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:_(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(61),c=i(u),h=n(302),d=i(h);n(182);var f=n(0),p=n(1),g=n(4),m=i(g),v=n(16),y=n(7),b=n(43),w=i(b),x=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.defaultDateFormat="DD/MM/YYYY",n.isCellEdited=!1,n.parentDestroyed=!1,n}return a(e,t),s(e,[{key:"init",value:function(){var t=this;if("function"!=typeof c["default"])throw new Error("You need to include moment.js to your project.");if("function"!=typeof d["default"])throw new Error("You need to include Pikaday to your project.");l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this.instance.addHook("afterDestroy",function(){t.parentDestroyed=!0,t.destroyElements()})}},{key:"createElements",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"createElements",this).call(this),this.datePicker=document.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,(0,f.addClass)(this.datePicker,"htDatepickerHolder"),document.body.appendChild(this.datePicker),this.$datePicker=new d["default"](this.getDatePickerConfig());var t=new m["default"](this);t.addEventListener(this.datePicker,"mousedown",function(t){return(0,y.stopPropagation)(t)}),this.hideDatepicker()}},{key:"destroyElements",value:function(){this.$datePicker.destroy()}},{key:"prepare",value:function(t,n,i,r,o,a){this._opened=!1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepare",this).call(this,t,n,i,r,o,a)}},{key:"open",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"open",this).call(this),this.showDatepicker(t)}},{key:"close",value:function(){var t=this;this._opened=!1,this.instance._registerTimeout(setTimeout(function(){t.instance.selection.refreshBorders()},0)),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"close",this).call(this)}},{key:"finishEditing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var i=this.originalValue;void 0!==i&&this.setValue(i)}this.hideDatepicker(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"finishEditing",this).call(this,t,n)}},{key:"showDatepicker",value:function(t){this.$datePicker.config(this.getDatePickerConfig());var e=this.TD.getBoundingClientRect(),n=this.cellProperties.dateFormat||this.defaultDateFormat,i=this.$datePicker.config(),r=void 0,o=this.instance.view.isMouseDown(),a=!!t&&(0,v.isMetaKey)(t.keyCode);this.datePickerStyle.top=window.pageYOffset+e.top+(0,f.outerHeight)(this.TD)+"px",this.datePickerStyle.left=window.pageXOffset+e.left+"px",this.$datePicker._onInputFocus=function(){},i.format=n,this.originalValue?(r=this.originalValue,(0,c["default"])(r,n,!0).isValid()&&this.$datePicker.setMoment((0,c["default"])(r,n),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),a||o||this.setValue("")):this.cellProperties.defaultDate?(r=this.cellProperties.defaultDate,i.defaultDate=r,(0,c["default"])(r,n,!0).isValid()&&this.$datePicker.setMoment((0,c["default"])(r,n),!0),a||o||this.setValue("")):this.$datePicker.gotoToday(),this.datePickerStyle.display="block",this.$datePicker.show()}},{key:"hideDatepicker",value:function(){this.datePickerStyle.display="none",this.$datePicker.hide()}},{key:"getDatePickerConfig",value:function(){var t=this,e=this.TEXTAREA,n={};this.cellProperties&&this.cellProperties.datePickerConfig&&(0,p.deepExtend)(n,this.cellProperties.datePickerConfig);var i=n.onSelect,r=n.onClose;return n.field=e,n.trigger=e,n.container=this.datePicker,n.bound=!1,n.format=n.format||this.defaultDateFormat,n.reposition=n.reposition||!1,n.onSelect=function(e){isNaN(e.getTime())||(e=(0,c["default"])(e).format(t.cellProperties.dateFormat||t.defaultDateFormat)),t.setValue(e),t.hideDatepicker(),i&&i()},n.onClose=function(){t.parentDestroyed||t.finishEditing(!1),r&&r()},n}}]),e}(w["default"]);e["default"]=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:p(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(148),c=i(u),h=n(8),d=i(h),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));
}return a(e,t),s(e,[{key:"prepare",value:function(t,n,i,r,o,a){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepare",this).call(this,t,n,i,r,o,a),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}]),e}(c["default"]);d["default"].getSingleton().add("beforeValidate",function(t,e,n,i){var r=this.getCellMeta(e,this.propToCol(n));r.editor===f&&void 0===r.strict&&(r.filter=!1,r.strict=!0)}),e["default"]=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(16),o=n(7),a=n(0),s=n(36),l=i(s),u=n(4),c=i(u),h=l["default"].prototype.extend(),d={},f=function(){this.controls={},this.controls.leftButton=document.createElement("DIV"),this.controls.leftButton.className="leftButton",this.controls.rightButton=document.createElement("DIV"),this.controls.rightButton.className="rightButton",this.controls.upButton=document.createElement("DIV"),this.controls.upButton.className="upButton",this.controls.downButton=document.createElement("DIV"),this.controls.downButton.className="downButton";for(var t in this.controls)Object.prototype.hasOwnProperty.call(this.controls,t)&&this.positionControls.appendChild(this.controls[t])};h.prototype.valueChanged=function(){return this.initValue!=this.getValue()},h.prototype.init=function(){var t=this;this.eventManager=new c["default"](this.instance),this.createElements(),this.bindEvents(),this.instance.addHook("afterDestroy",function(){t.destroy()})},h.prototype.getValue=function(){return this.TEXTAREA.value},h.prototype.setValue=function(t){this.initValue=t,this.TEXTAREA.value=t},h.prototype.createElements=function(){this.editorContainer=document.createElement("DIV"),this.editorContainer.className="htMobileEditorContainer",this.cellPointer=document.createElement("DIV"),this.cellPointer.className="cellPointer",this.moveHandle=document.createElement("DIV"),this.moveHandle.className="moveHandle",this.inputPane=document.createElement("DIV"),this.inputPane.className="inputs",this.positionControls=document.createElement("DIV"),this.positionControls.className="positionControls",this.TEXTAREA=document.createElement("TEXTAREA"),(0,a.addClass)(this.TEXTAREA,"handsontableInput"),this.inputPane.appendChild(this.TEXTAREA),this.editorContainer.appendChild(this.cellPointer),this.editorContainer.appendChild(this.moveHandle),this.editorContainer.appendChild(this.inputPane),this.editorContainer.appendChild(this.positionControls),f.call(this),document.body.appendChild(this.editorContainer)},h.prototype.onBeforeKeyDown=function(t){var e=this,n=e.getActiveEditor();if(t.target===n.TEXTAREA&&!(0,o.isImmediatePropagationStopped)(t))switch(t.keyCode){case r.KEY_CODES.ENTER:n.close(),t.preventDefault();break;case r.KEY_CODES.BACKSPACE:(0,o.stopImmediatePropagation)(t)}},h.prototype.open=function(){this.instance.addHook("beforeKeyDown",this.onBeforeKeyDown),(0,a.addClass)(this.editorContainer,"active"),(0,a.removeClass)(this.cellPointer,"hidden"),this.updateEditorPosition()},h.prototype.focus=function(){this.TEXTAREA.focus(),(0,a.setCaretPosition)(this.TEXTAREA,this.TEXTAREA.value.length)},h.prototype.close=function(){this.TEXTAREA.blur(),this.instance.removeHook("beforeKeyDown",this.onBeforeKeyDown),(0,a.removeClass)(this.editorContainer,"active")},h.prototype.scrollToView=function(){var t=this.instance.getSelectedRange().highlight;this.instance.view.scrollViewport(t)},h.prototype.hideCellPointer=function(){(0,a.hasClass)(this.cellPointer,"hidden")||(0,a.addClass)(this.cellPointer,"hidden")},h.prototype.updateEditorPosition=function(t,e){if(t&&e)t=parseInt(t,10),e=parseInt(e,10),this.editorContainer.style.top=e+"px",this.editorContainer.style.left=t+"px";else{var n=this.instance.getSelected(),i=this.instance.getCell(n[0],n[1]);if(d.cellPointer||(d.cellPointer={height:(0,a.outerHeight)(this.cellPointer),width:(0,a.outerWidth)(this.cellPointer)}),d.editorContainer||(d.editorContainer={width:(0,a.outerWidth)(this.editorContainer)}),void 0!==i){var r=this.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer==window?0:(0,a.getScrollLeft)(this.instance.view.wt.wtOverlays.leftOverlay.holder),o=this.instance.view.wt.wtOverlays.topOverlay.trimmingContainer==window?0:(0,a.getScrollTop)(this.instance.view.wt.wtOverlays.topOverlay.holder),s=(0,a.offset)(i),l=(0,a.outerWidth)(i),u={x:r,y:o};this.editorContainer.style.top=parseInt(s.top+(0,a.outerHeight)(i)-u.y+d.cellPointer.height,10)+"px",this.editorContainer.style.left=parseInt(window.innerWidth/2-d.editorContainer.width/2,10)+"px",s.left+l/2>parseInt(this.editorContainer.style.left,10)+d.editorContainer.width?this.editorContainer.style.left=window.innerWidth-d.editorContainer.width+"px":s.left+l/2<parseInt(this.editorContainer.style.left,10)+20&&(this.editorContainer.style.left="0px"),this.cellPointer.style.left=parseInt(s.left-d.cellPointer.width/2-(0,a.offset)(this.editorContainer).left+l/2-u.x,10)+"px"}}},h.prototype.updateEditorData=function(){var t=this.instance.getSelected(),e=this.instance.getDataAtCell(t[0],t[1]);this.row=t[0],this.col=t[1],this.setValue(e),this.updateEditorPosition()},h.prototype.prepareAndSave=function(){var t;this.valueChanged()&&(t=this.instance.getSettings().trimWhitespace?[[String.prototype.trim.call(this.getValue())]]:[[this.getValue()]],this.saveValue(t))},h.prototype.bindEvents=function(){var t=this;this.eventManager.addEventListener(this.controls.leftButton,"touchend",function(e){t.prepareAndSave(),t.instance.selection.transformStart(0,-1,null,!0),t.updateEditorData(),e.preventDefault()}),this.eventManager.addEventListener(this.controls.rightButton,"touchend",function(e){t.prepareAndSave(),t.instance.selection.transformStart(0,1,null,!0),t.updateEditorData(),e.preventDefault()}),this.eventManager.addEventListener(this.controls.upButton,"touchend",function(e){t.prepareAndSave(),t.instance.selection.transformStart(-1,0,null,!0),t.updateEditorData(),e.preventDefault()}),this.eventManager.addEventListener(this.controls.downButton,"touchend",function(e){t.prepareAndSave(),t.instance.selection.transformStart(1,0,null,!0),t.updateEditorData(),e.preventDefault()}),this.eventManager.addEventListener(this.moveHandle,"touchstart",function(e){if(1==e.touches.length){var n=e.touches[0],i={x:t.editorContainer.offsetLeft,y:t.editorContainer.offsetTop},r={x:n.pageX-i.x,y:n.pageY-i.y};t.eventManager.addEventListener(this,"touchmove",function(e){var n=e.touches[0];t.updateEditorPosition(n.pageX-r.x,n.pageY-r.y),t.hideCellPointer(),e.preventDefault()})}}),this.eventManager.addEventListener(document.body,"touchend",function(e){(0,a.isChildOf)(e.target,t.editorContainer)||(0,a.isChildOf)(e.target,t.instance.rootElement)||t.close()}),this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.leftOverlay.holder,"scroll",function(e){t.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer!=window&&t.hideCellPointer()}),this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.topOverlay.holder,"scroll",function(e){t.instance.view.wt.wtOverlays.topOverlay.trimmingContainer!=window&&t.hideCellPointer()})},h.prototype.destroy=function(){this.eventManager.clear(),this.editorContainer.parentNode.removeChild(this.editorContainer)},e["default"]=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:p(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(87),c=i(u),h=n(43),d=i(h),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"beginEditing",value:function(t){if("undefined"==typeof t&&this.originalValue){"undefined"!=typeof this.cellProperties.language&&c["default"].culture(this.cellProperties.language);var n=c["default"].cultureData().delimiters.decimal;t=(""+this.originalValue).replace(".",n)}l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginEditing",this).call(this,t)}}]),e}(d["default"]);e["default"]=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function f(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:f(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(0),c=n(43),h=i(c),d=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"createElements",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"createElements",this).call(this),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,(0,u.empty)(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}]),e}(h["default"]);e["default"]=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(0),a=n(7),s=n(16),l=n(36),u=i(l),c=u["default"].prototype.extend();c.prototype.init=function(){this.select=document.createElement("SELECT"),(0,o.addClass)(this.select,"htSelectEditor"),this.select.style.display="none",this.instance.rootElement.appendChild(this.select),this.registerHooks()},c.prototype.registerHooks=function(){var t=this;this.instance.addHook("afterScrollHorizontally",function(){return t.refreshDimensions()}),this.instance.addHook("afterScrollVertically",function(){return t.refreshDimensions()}),this.instance.addHook("afterColumnResize",function(){return t.refreshDimensions()}),this.instance.addHook("afterRowResize",function(){return t.refreshDimensions()})},c.prototype.prepare=function(){u["default"].prototype.prepare.apply(this,arguments);var t,e=this.cellProperties.selectOptions;t="function"==typeof e?this.prepareOptions(e(this.row,this.col,this.prop)):this.prepareOptions(e),(0,o.empty)(this.select);for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=document.createElement("OPTION");i.value=n,(0,o.fastInnerHTML)(i,t[n]),this.select.appendChild(i)}},c.prototype.prepareOptions=function(t){var e={};if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++)e[t[n]]=t[n];else"object"==("undefined"==typeof t?"undefined":r(t))&&(e=t);return e},c.prototype.getValue=function(){return this.select.value},c.prototype.setValue=function(t){this.select.value=t};var h=function(t){var e=this,n=e.getActiveEditor();switch(t.keyCode){case s.KEY_CODES.ARROW_UP:var i=n.select.selectedIndex-1;i>=0&&(n.select[i].selected=!0),(0,a.stopImmediatePropagation)(t),t.preventDefault();break;case s.KEY_CODES.ARROW_DOWN:var r=n.select.selectedIndex+1;r<=n.select.length-1&&(n.select[r].selected=!0),(0,a.stopImmediatePropagation)(t),t.preventDefault()}};c.prototype.open=function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.instance.addHook("beforeKeyDown",h)},c.prototype.close=function(){this._opened=!1,this.select.style.display="none",this.instance.removeHook("beforeKeyDown",h)},c.prototype.focus=function(){this.select.focus()},c.prototype.refreshValue=function(){var t=this.instance.getSourceDataAtCell(this.row,this.prop);this.originalValue=t,this.setValue(t),this.refreshDimensions()},c.prototype.refreshDimensions=function(){if(this.state===l.EditorState.EDITING){if(this.TD=this.getEditedCell(),!this.TD)return void this.close();var t,e=(0,o.outerWidth)(this.TD)+1,n=(0,o.outerHeight)(this.TD)+1,i=(0,o.offset)(this.TD),r=(0,o.offset)(this.instance.rootElement),a=(0,o.getScrollableElement)(this.TD),s=i.top-r.top-1-(a.scrollTop||0),u=i.left-r.left-1-(a.scrollLeft||0),c=this.checkEditorSection(),h=this.instance.getSettings();h.rowHeaders?1:0,h.colHeaders?1:0;switch(c){case"top":t=(0,o.getCssTransform)(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case"left":t=(0,o.getCssTransform)(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case"top-left-corner":t=(0,o.getCssTransform)(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom-left-corner":t=(0,o.getCssTransform)(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom":t=(0,o.getCssTransform)(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode)}0===this.instance.getSelected()[0]&&(s+=1),0===this.instance.getSelected()[1]&&(u+=1);var d=this.select.style;t&&t!=-1?d[t[0]]=t[1]:(0,o.resetCssTransform)(this.select);var f=(0,o.getComputedStyle)(this.TD);parseInt(f.borderTopWidth,10)>0&&(n-=1),parseInt(f.borderLeftWidth,10)>0&&(e-=1),d.height=n+"px",d.minWidth=e+"px",d.top=s+"px",d.left=u+"px",d.margin="0px"}},c.prototype.getEditedCell=function(){var t,e=this.checkEditorSection();switch(e){case"top":t=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=101;break;case"corner":t=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=103;break;case"left":t=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=102;break;default:t=this.instance.getCell(this.row,this.col),this.select.style.zIndex=""}return t!=-1&&t!=-2?t:void 0},e["default"]=c},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=new h["default"](t,e||{});return n.init(),n}n(97),n(114),n(123),n(124),n(108),n(122),n(105),n(106),n(107),n(96),n(119),n(117),n(115),n(120),n(121),n(116),n(118),n(109),n(110),n(111),n(113),n(112),n(94),n(95),n(90),n(93),n(92),n(91),n(67),n(99),n(100),n(102),n(101),n(98),n(104),n(103),n(125),n(128),n(126),n(127),n(130),n(129),n(132),n(131),n(179),n(180),n(181);var a=n(14),s=n(9),l=n(26),u=n(62),c=n(63),h=r(c),d=n(177),f=r(d),p=n(4),g=r(p),m=n(8),v=r(m),y=n(66),b=r(y),w=n(2),x=i(w),_=n(25),k=i(_),C=n(64),S=i(C),M=n(89),T=i(M),E=n(34),O=i(E),A=n(35),D=i(A),R=n(20),P=i(R),N=n(6),z=i(N),L=n(1),I=i(L),H=n(65),j=i(H),F=n(27),B=i(F),W=n(16),Y=i(W),V=n(0),U=i(V),q=n(7),X=i(q),G=n(178),$=i(G),K=n(5),Z=n(88),Q=r(Z);(0,f["default"])(o),o.Core=h["default"],o.DefaultSettings=Q["default"],o.EventManager=g["default"],o._getListenersCounter=p.getListenersCounter,o.buildDate="2017-07-27T11:34:25.509Z",o.packageName="handsontable",o.version="0.34.0";var J=void 0;J&&(o.baseVersion=J),o.hooks=v["default"].getSingleton(),o.__GhostTable=b["default"];var tt=[x,k,S,T,O,D,P,z,I,j,B,Y],et=[U,X];o.helper={},o.dom={},x.arrayEach(tt,function(t){x.arrayEach(Object.getOwnPropertyNames(t),function(e){"_"!==e.charAt(0)&&(o.helper[e]=t[e])})}),x.arrayEach(et,function(t){x.arrayEach(Object.getOwnPropertyNames(t),function(e){"_"!==e.charAt(0)&&(o.dom[e]=t[e])})}),o.cellTypes={},x.arrayEach((0,u.getRegisteredCellTypeNames)(),function(t){o.cellTypes[t]=(0,u.getCellType)(t)}),o.cellTypes.registerCellType=u.registerCellType,o.cellTypes.getCellType=u.getCellType,o.editors={},x.arrayEach((0,a.getRegisteredEditorNames)(),function(t){o.editors[B.toUpperCaseFirst(t)+"Editor"]=(0,a.getEditor)(t)}),o.editors.registerEditor=a.registerEditor,o.editors.getEditor=a.getEditor,o.renderers={},x.arrayEach((0,s.getRegisteredRendererNames)(),function(t){var e=(0,s.getRenderer)(t);"base"===t&&(o.renderers.cellDecorator=e),o.renderers[B.toUpperCaseFirst(t)+"Renderer"]=e}),o.renderers.registerRenderer=s.registerRenderer,o.renderers.getRenderer=s.getRenderer,o.validators={},x.arrayEach((0,l.getRegisteredValidatorNames)(),function(t){o.validators[B.toUpperCaseFirst(t)+"Validator"]=(0,l.getValidator)(t)}),o.validators.registerValidator=l.registerValidator,o.validators.getValidator=l.getValidator,o.plugins={},x.arrayEach(Object.getOwnPropertyNames($),function(t){var e=$[t];"Base"===t?o.plugins[t+"Plugin"]=e:o.plugins[t]=e}),o.plugins.registerPlugin=K.registerPlugin,t.exports=o},function(t,e,n){"use strict";function i(){function t(t){return null!==t&&!n(t)&&("string"==typeof t||"number"==typeof t)}function e(t){return null!==t&&("object"==("undefined"==typeof t?"undefined":r(t))||"function"==typeof t)}function n(t){return t!==t}var i={arrayMap:[],weakMap:new WeakMap};return{get:function(n){return t(n)?i.arrayMap[n]:e(n)?i.weakMap.get(n):void 0},set:function(n,r){if(t(n))i.arrayMap[n]=r;else{if(!e(n))throw new Error("Invalid key type");i.weakMap.set(n,r)}},"delete":function(n){t(n)?delete i.arrayMap[n]:e(n)&&i.weakMap["delete"](n)}}}e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e["default"]=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function M(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:M(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(12),h=i(c),d=n(2),f=n(34),p=n(0),g=n(66),m=i(g),v=n(1),y=n(6),b=n(5),w=n(154),x=i(w),_=n(27),k=n(11),C=new WeakMap,S=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return C.set(n,{cachedColumnHeaders:[]}),n.widths=[],n.ghostTable=new m["default"](n.hot),n.samplesGenerator=new x["default"](function(t,e){return n.hot.getDataAtCell(t,e)}),n.firstCalculation=!0,n.inProgress=!1,n.addHook("beforeColumnResize",function(t,e,i){return n.onBeforeColumnResize(t,e,i)}),n}return a(e,t),u(e,null,[{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}]),u(e,[{key:"isEnabled",value:function(){return this.hot.getSettings().autoColumnSize!==!1&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var n=this.hot.getSettings().autoColumnSize;n&&null!=n.useHeaders&&this.ghostTable.setSetting("useHeaders",n.useHeaders),this.addHook("afterLoadData",function(){return t.onAfterLoadData()}),this.addHook("beforeChange",function(e){return t.onBeforeChange(e)}),this.addHook("beforeRender",function(e){return t.onBeforeRender(e)}),this.addHook("modifyColWidth",function(e,n){return t.getColumnWidth(n,e)}),this.addHook("afterInit",function(){return t.onAfterInit()}),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var t=this.findColumnsWhereHeaderWasChanged();t.length&&this.clearCache(t),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"calculateColumnsWidth",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"number"==typeof t&&(t={from:t,to:t}),"number"==typeof n&&(n={from:n,to:n}),(0,y.rangeEach)(t.from,t.to,function(t){if(i||void 0===e.widths[t]&&!e.hot._getColWidthFromSettings(t)){var r=e.samplesGenerator.generateColumnSamples(t,n);r.forEach(function(t,n){return e.ghostTable.addColumn(n,t)})}}),this.ghostTable.columns.length&&(this.ghostTable.getWidths(function(t,n){e.widths[t]=n}),this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},i=0,r=this.hot.countCols()-1,o=null;this.inProgress=!0;var a=function s(){return t.hot?(t.calculateColumnsWidth({from:i,to:Math.min(i+e.CALCULATION_STEP,r)},n),i=i+e.CALCULATION_STEP+1,void(i<r?o=(0,f.requestAnimationFrame)(s):((0,f.cancelAnimationFrame)(o),t.inProgress=!1,t.hot.view.wt.wtOverlays.adjustElementsSize(!0),t.hot.view.wt.wtOverlays.leftOverlay.needFullRender&&t.hot.view.wt.wtOverlays.leftOverlay.clone.draw()))):((0,f.cancelAnimationFrame)(o),void(t.inProgress=!1))};this.firstCalculation&&this.getSyncCalculationLimit()&&(this.calculateColumnsWidth({from:0,to:this.getSyncCalculationLimit()},n),this.firstCalculation=!1,i=this.getSyncCalculationLimit()+1),i<r?a():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var t=this.hot.getSettings().autoColumnSize,e=t&&(0,v.hasOwnProperty)(t,"samplingRatio")?this.hot.getSettings().autoColumnSize.samplingRatio:void 0,n=t&&(0,v.hasOwnProperty)(t,"allowSampleDuplicates")?this.hot.getSettings().autoColumnSize.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&(0,p.isVisible)(this.hot.view.wt.wtTable.TABLE)&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var t=e.SYNC_CALCULATION_LIMIT,n=this.hot.countCols()-1;return(0,v.isObject)(this.hot.getSettings().autoColumnSize)&&(t=this.hot.getSettings().autoColumnSize.syncLimit,(0,_.isPercentValue)(t)?t=(0,y.valueAccordingPercent)(n,t):t>>=0),Math.min(t,n)}},{key:"getColumnWidth",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e;return void 0===i&&(i=this.widths[t],n&&"number"==typeof i&&(i=Math.max(i,k.ViewportColumnsCalculator.DEFAULT_WIDTH))),i}},{key:"getFirstVisibleColumn",value:function(){var t=this.hot.view.wt;return t.wtViewport.columnsVisibleCalculator?t.wtTable.getFirstVisibleColumn():t.wtViewport.columnsRenderCalculator?t.wtTable.getFirstRenderedColumn():-1}},{key:"getLastVisibleColumn",value:function(){var t=this.hot.view.wt;return t.wtViewport.columnsVisibleCalculator?t.wtTable.getLastVisibleColumn():t.wtViewport.columnsRenderCalculator?t.wtTable.getLastRenderedColumn():-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var t=this.hot.getColHeader(),e=C.get(this),n=e.cachedColumnHeaders,i=(0,d.arrayReduce)(t,function(t,e,i){var r=n.length;return(r-1<i||n[i]!==e)&&t.push(i),r-1<i?n.push(e):n[i]=e,t},[]);return i}},{key:"clearCache",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length?(0,d.arrayEach)(e,function(e){t.widths[e]=void 0}):this.widths.length=0}},{key:"isNeedRecalculate",value:function(){return!!(0,d.arrayFilter)(this.widths,function(t){return void 0===t}).length}},{key:"onBeforeRender",value:function(){var t=this.hot.renderCall,e=this.hot.countRows();e&&(this.calculateColumnsWidth({from:this.getFirstVisibleColumn(),to:this.getLastVisibleColumn()},void 0,t),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth())}},{key:"onAfterLoadData",value:function(){var t=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){t.hot&&t.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(t){var e=this,n=(0,d.arrayMap)(t,function(t){var n=s(t,2),i=(n[0],n[1]);return e.hot.propToCol(i)});this.clearCache(n)}},{key:"onBeforeColumnResize",value:function(t,e,n){return n&&(this.calculateColumnsWidth(t,void 0,!0),e=this.getColumnWidth(t,void 0,!1)),e}},{key:"onAfterInit",value:function(){C.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"destroy",value:function(){this.ghostTable.clean(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(h["default"]);(0,b.registerPlugin)("autoColumnSize",S),e["default"]=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function k(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:k(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(12),c=i(u),h=n(2),d=n(34),f=n(0),p=n(66),g=i(p),m=n(1),v=n(6),y=n(5),b=n(154),w=i(b),x=n(27),_=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.heights=[],n.ghostTable=new g["default"](n.hot),n.samplesGenerator=new w["default"](function(t,e){return t>=0?n.hot.getDataAtCell(t,e):t===-1?n.hot.getColHeader(e):null}),n.firstCalculation=!0,n.inProgress=!1,n.addHook("beforeRowResize",function(t,e,i){return n.onBeforeRowResize(t,e,i)}),n}return a(e,t),l(e,null,[{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 500}}]),l(e,[{key:"isEnabled",value:function(){return this.hot.getSettings().autoRowSize===!0||(0,m.isObject)(this.hot.getSettings().autoRowSize)}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){return t.onAfterLoadData()}),this.addHook("beforeChange",function(e){return t.onBeforeChange(e)}),this.addHook("beforeColumnMove",function(){return t.recalculateAllRowsHeight()}),this.addHook("beforeColumnResize",function(){return t.recalculateAllRowsHeight()}),this.addHook("beforeColumnSort",function(){return t.clearCache()}),this.addHook("beforeRender",function(e){return t.onBeforeRender(e)}),this.addHook("beforeRowMove",function(e,n){return t.onBeforeRowMove(e,n)}),this.addHook("modifyRowHeight",function(e,n){return t.getRowHeight(n,e)}),this.addHook("modifyColumnHeaderHeight",function(){return t.getColumnHeaderHeight()}),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"calculateRowsHeight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"==typeof t&&(t={from:t,to:t}),"number"==typeof n&&(n={from:n,to:n}),null!==this.hot.getColHeader(0)){var r=this.samplesGenerator.generateRowSamples(-1,n);this.ghostTable.addColumnHeadersRow(r.get(-1))}(0,v.rangeEach)(t.from,t.to,function(t){if(i||void 0===e.heights[t]){var r=e.samplesGenerator.generateRowSamples(t,n);r.forEach(function(t,n){e.ghostTable.addRow(n,t)})}}),this.ghostTable.rows.length&&(this.ghostTable.getHeights(function(t,n){e.heights[t]=n}),this.ghostTable.clean())}},{key:"calculateAllRowsHeight",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},i=0,r=this.hot.countRows()-1,o=null;this.inProgress=!0;var a=function s(){return t.hot?(t.calculateRowsHeight({from:i,to:Math.min(i+e.CALCULATION_STEP,r)},n),i=i+e.CALCULATION_STEP+1,void(i<r?o=(0,d.requestAnimationFrame)(s):((0,d.cancelAnimationFrame)(o),t.inProgress=!1,t.hot.view.wt.wtOverlays.adjustElementsSize(!0),t.hot.view.wt.wtOverlays.leftOverlay.needFullRender&&t.hot.view.wt.wtOverlays.leftOverlay.clone.draw()))):((0,d.cancelAnimationFrame)(o),void(t.inProgress=!1))};this.firstCalculation&&this.getSyncCalculationLimit()&&(this.calculateRowsHeight({from:0,to:this.getSyncCalculationLimit()},n),this.firstCalculation=!1,i=this.getSyncCalculationLimit()+1),i<r?a():(this.inProgress=!1,this.hot.view.wt.wtOverlays.adjustElementsSize(!1))}},{key:"setSamplingOptions",value:function(){var t=this.hot.getSettings().autoRowSize,e=t&&(0,m.hasOwnProperty)(t,"samplingRatio")?this.hot.getSettings().autoRowSize.samplingRatio:void 0,n=t&&(0,m.hasOwnProperty)(t,"allowSampleDuplicates")?this.hot.getSettings().autoRowSize.allowSampleDuplicates:void 0;
e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllRowsHeight",value:function(){(0,f.isVisible)(this.hot.view.wt.wtTable.TABLE)&&(this.clearCache(),this.calculateAllRowsHeight())}},{key:"getSyncCalculationLimit",value:function(){var t=e.SYNC_CALCULATION_LIMIT,n=this.hot.countRows()-1;return(0,m.isObject)(this.hot.getSettings().autoRowSize)&&(t=this.hot.getSettings().autoRowSize.syncLimit,(0,x.isPercentValue)(t)?t=(0,v.valueAccordingPercent)(n,t):t>>=0),Math.min(t,n)}},{key:"getRowHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e;return void 0!==this.heights[t]&&this.heights[t]>(e||0)&&(n=this.heights[t]),n}},{key:"getColumnHeaderHeight",value:function(){return this.heights[-1]}},{key:"getFirstVisibleRow",value:function(){var t=this.hot.view.wt;return t.wtViewport.rowsVisibleCalculator?t.wtTable.getFirstVisibleRow():t.wtViewport.rowsRenderCalculator?t.wtTable.getFirstRenderedRow():-1}},{key:"getLastVisibleRow",value:function(){var t=this.hot.view.wt;return t.wtViewport.rowsVisibleCalculator?t.wtTable.getLastVisibleRow():t.wtViewport.rowsRenderCalculator?t.wtTable.getLastRenderedRow():-1}},{key:"clearCache",value:function(){this.heights.length=0,this.heights[-1]=void 0}},{key:"clearCacheByRange",value:function(t){var e=this;"number"==typeof t&&(t={from:t,to:t}),(0,v.rangeEach)(Math.min(t.from,t.to),Math.max(t.from,t.to),function(t){e.heights[t]=void 0})}},{key:"isNeedRecalculate",value:function(){return!!(0,h.arrayFilter)(this.heights,function(t){return void 0===t}).length}},{key:"onBeforeRender",value:function(){var t=this.hot.renderCall;this.calculateRowsHeight({from:this.getFirstVisibleRow(),to:this.getLastVisibleRow()},void 0,t);var e=this.hot.getSettings().fixedRowsBottom;if(e){var n=this.hot.countRows()-1;this.calculateRowsHeight({from:n-e,to:n})}this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllRowsHeight()}},{key:"onBeforeRowMove",value:function(t,e){this.clearCacheByRange({from:t,to:e}),this.calculateAllRowsHeight()}},{key:"onBeforeRowResize",value:function(t,e,n){return n&&(this.calculateRowsHeight(t,void 0,!0),e=this.getRowHeight(t)),e}},{key:"onAfterLoadData",value:function(){var t=this;this.hot.view?this.recalculateAllRowsHeight():setTimeout(function(){t.hot&&t.recalculateAllRowsHeight()},0)}},{key:"onBeforeChange",value:function(t){var e=null;1===t.length?e=t[0][0]:t.length>1&&(e={from:t[0][0],to:t[t.length-1][0]}),null!==e&&this.clearCacheByRange(e)}},{key:"destroy",value:function(){this.ghostTable.clean(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(c["default"]);(0,y.registerPlugin)("autoRowSize",_),e["default"]=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function _(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:_(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(12),c=i(u),h=n(8),d=i(h),f=n(0),p=n(4),g=i(p),m=n(5),v=n(11),y=n(213);d["default"].getSingleton().register("modifyAutofillRange"),d["default"].getSingleton().register("beforeAutofill");var b="insert_row",w=200,x=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.eventManager=new g["default"](n),n.addingStarted=!1,n.mouseDownOnCellCorner=!1,n.mouseDragOutside=!1,n.handleDraggedCells=0,n.directions=[],n.autoInsertRow=!1,n}return a(e,t),s(e,[{key:"isEnabled",value:function(){return this.hot.getSettings().fillHandle}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",function(e){return t.onAfterCellCornerMouseDown(e)}),this.addHook("afterOnCellCornerDblClick",function(e){return t.onCellCornerDblClick(e)}),this.addHook("beforeOnCellMouseOver",function(e,n,i){return t.onBeforeCellMouseOver(n)}),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.clearMappedSettings(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"getSelectionData",value:function(){var t={from:this.hot.getSelectedRange().from,to:this.hot.getSelectedRange().to};return this.hot.getData(t.from.row,t.from.col,t.to.row,t.to.col)}},{key:"fillIn",value:function(){if(this.hot.view.wt.selections.fill.isEmpty())return!1;var t=this.hot.view.wt.selections.fill.getCorners();this.resetSelectionOfDraggedArea();var e=this.getCornersOfSelectedCells(),n=(0,y.getDragDirectionAndRange)(e,t),i=n.directionOfDrag,r=n.startOfDragCoords,o=n.endOfDragCoords;if(this.hot.runHooks("modifyAutofillRange",e,t),r&&r.row>-1&&r.col>-1){var a=this.getSelectionData(),s=(0,y.getDeltas)(r,o,a,i),l=a;if(this.hot.runHooks("beforeAutofill",r,o,a),["up","left"].indexOf(i)>-1){l=[];var u=null,c=null;if("up"===i){u=o.row-r.row+1,c=u%a.length;for(var h=0;h<u;h++)l.push(a[(h+(a.length-c))%a.length])}else{u=o.col-r.col+1,c=u%a[0].length;for(var d=0;d<a.length;d++){l.push([]);for(var f=0;f<u;f++)l[d].push(a[d][(f+(a[d].length-c))%a[d].length])}}}this.hot.populateFromArray(r.row,r.col,l,o.row,o.col,this.pluginName+".fill",null,i,s),this.setSelection(t)}else this.hot.selection.refreshBorders();return!0}},{key:"reduceSelectionAreaIfNeeded",value:function(t){return t.row<0&&(t.row=0),t.col<0&&(t.col=0),t}},{key:"getCoordsOfDragAndDropBorders",value:function(t){var e=this.hot.getSelectedRange().getTopLeftCorner(),n=this.hot.getSelectedRange().getBottomRightCorner(),i=void 0;if(this.directions.includes(y.DIRECTIONS.vertical)&&(n.row<t.row||e.row>t.row))i=new v.CellCoords(t.row,n.col);else{if(!this.directions.includes(y.DIRECTIONS.horizontal))return;i=new v.CellCoords(n.row,t.col)}return this.reduceSelectionAreaIfNeeded(i)}},{key:"showBorder",value:function(t){var e=this.getCoordsOfDragAndDropBorders(t);e&&this.redrawBorders(e)}},{key:"addRow",value:function(){var t=this;this.hot._registerTimeout(setTimeout(function(){t.hot.alter(b,void 0,1,t.pluginName+".fill"),t.addingStarted=!1},w))}},{key:"addNewRowIfNeeded",value:function(){if(this.hot.view.wt.selections.fill.cellRange&&this.addingStarted===!1&&this.autoInsertRow){var t=this.hot.getSelected(),e=this.hot.view.wt.selections.fill.getCorners(),n=this.hot.countRows();t[2]<n-1&&e[2]===n-1&&(this.addingStarted=!0,this.addRow())}}},{key:"getCornersOfSelectedCells",value:function(){return this.hot.selection.isMultiple()?this.hot.view.wt.selections.area.getCorners():this.hot.view.wt.selections.current.getCorners()}},{key:"getIndexOfLastAdjacentFilledInRow",value:function(t){for(var e=this.hot.getData(),n=this.hot.countRows(),i=void 0,r=t[2]+1;r<n;r++){for(var o=t[1];o<=t[3];o++){var a=e[r][o];if(a)return-1}var s=e[r][t[1]-1],l=e[r][t[3]+1];(s||l)&&(i=r)}return i}},{key:"addSelectionFromStartAreaToSpecificRowIndex",value:function(t,e){this.hot.view.wt.selections.fill.clear(),this.hot.view.wt.selections.fill.add(new v.CellCoords(t[0],t[1])),this.hot.view.wt.selections.fill.add(new v.CellCoords(e,t[3]))}},{key:"setSelection",value:function(t){this.hot.selection.setRangeStart(new v.CellCoords(t[0],t[1])),this.hot.selection.setRangeEnd(new v.CellCoords(t[2],t[3]))}},{key:"selectAdjacent",value:function(){var t=this.getCornersOfSelectedCells(),e=this.getIndexOfLastAdjacentFilledInRow(t);return e!==-1&&(this.addSelectionFromStartAreaToSpecificRowIndex(t,e),!0)}},{key:"resetSelectionOfDraggedArea",value:function(){this.handleDraggedCells=0,this.hot.view.wt.selections.fill.clear()}},{key:"redrawBorders",value:function(t){this.hot.view.wt.selections.fill.clear(),this.hot.view.wt.selections.fill.add(this.hot.getSelectedRange().from),this.hot.view.wt.selections.fill.add(this.hot.getSelectedRange().to),this.hot.view.wt.selections.fill.add(t),this.hot.view.render()}},{key:"getIfMouseWasDraggedOutside",value:function(t){var e=(0,f.offset)(this.hot.table).top-(window.pageYOffset||document.documentElement.scrollTop)+(0,f.outerHeight)(this.hot.table),n=(0,f.offset)(this.hot.table).left-(window.pageXOffset||document.documentElement.scrollLeft)+(0,f.outerWidth)(this.hot.table);return t.clientY>e&&t.clientX<=n}},{key:"registerEvents",value:function(){var t=this;this.eventManager.addEventListener(document.documentElement,"mouseup",function(){return t.onMouseUp()}),this.eventManager.addEventListener(document.documentElement,"mousemove",function(e){return t.onMouseMove(e)})}},{key:"onCellCornerDblClick",value:function(){var t=this.selectAdjacent();t&&this.fillIn()}},{key:"onAfterCellCornerMouseDown",value:function(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}},{key:"onBeforeCellMouseOver",value:function(t){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells++,this.showBorder(t),this.addNewRowIfNeeded())}},{key:"onMouseUp",value:function(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}},{key:"onMouseMove",value:function(t){var e=this.getIfMouseWasDraggedOutside(t);this.addingStarted===!1&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}},{key:"clearMappedSettings",value:function(){this.directions.length=0,this.autoInsertRow=!1}},{key:"mapSettings",value:function(){var t=(0,y.getMappedFillHandleSetting)(this.hot.getSettings().fillHandle);this.directions=t.directions,this.autoInsertRow=t.autoInsertRow}},{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(c["default"]);(0,m.registerPlugin)("autofill",x),e["default"]=x},function(t,e,n){"use strict";function i(t,e,n,i){var r=n.length,o=n?n[0].length:0,a=[],s=e.row-t.row,l=e.col-t.col;if(["down","up"].indexOf(i)!==-1){for(var u=[],c=0;c<=l;c++){var h=parseInt(n[0][c],10),d=parseInt(n[r-1][c],10),f=("down"===i?d-h:h-d)/(r-1)||0;u.push(f)}a.push(u)}if(["right","left"].indexOf(i)!==-1)for(var p=0;p<=s;p++){var g=parseInt(n[p][0],10),m=parseInt(n[p][o-1],10),v=("right"===i?m-g:g-m)/(o-1)||0;a.push([v])}return a}function r(t,e){var n=void 0,i=void 0,r=void 0;return e[0]===t[0]&&e[1]<t[1]?(r="left",n=new l.CellCoords(e[0],e[1]),i=new l.CellCoords(e[2],t[1]-1)):e[0]===t[0]&&e[3]>t[3]?(r="right",n=new l.CellCoords(e[0],t[3]+1),i=new l.CellCoords(e[2],e[3])):e[0]<t[0]&&e[1]===t[1]?(r="up",n=new l.CellCoords(e[0],e[1]),i=new l.CellCoords(t[0]-1,e[3])):e[2]>t[2]&&e[1]===t[1]&&(r="down",n=new l.CellCoords(t[2]+1,e[1]),i=new l.CellCoords(e[2],e[3])),{directionOfDrag:r,startOfDragCoords:n,endOfDragCoords:i}}function o(t){var e={};return t===!0?(e.directions=Object.keys(u),e.autoInsertRow=!0):(0,a.isObject)(t)?((0,s.isDefined)(t.autoInsertRow)?t.direction===u.horizontal?e.autoInsertRow=!1:e.autoInsertRow=t.autoInsertRow:e.autoInsertRow=!1,(0,s.isDefined)(t.direction)?e.directions=[t.direction]:e.directions=Object.keys(u)):"string"==typeof t?(e.directions=[t],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e}e.__esModule=!0,e.DIRECTIONS=void 0,e.getDeltas=i,e.getDragDirectionAndRange=r,e.getMappedFillHandleSetting=o;var a=n(1),s=n(20),l=n(11),u=e.DIRECTIONS={horizontal:"horizontal",vertical:"vertical"}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function S(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:S(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},h=n(61),d=i(h),f=n(0),p=n(2),g=n(20),m=n(1),v=n(12),y=i(v),b=n(5),w=n(272),x=i(w),_=n(8),k=i(_);k["default"].getSingleton().register("beforeColumnSort"),k["default"].getSingleton().register("afterColumnSort");var C=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.sortIndicators=[],n.lastSortedColumn=null,n.sortEmptyCells=!1,n}return s(e,t),u(e,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().columnSorting}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){this.setPluginOptions();var n=this;this.hot.sortIndex=[],this.hot.sort=function(){var t=Array.prototype.slice.call(arguments);return n.sortByColumn.apply(n,r(t))},"undefined"==typeof this.hot.getSettings().observeChanges&&this.enableObserveChangesPlugin(),this.addHook("afterTrimRow",function(e){return t.sort()}),this.addHook("afterUntrimRow",function(e){return t.sort()}),this.addHook("modifyRow",function(e){return t.translateRow(e)}),this.addHook("unmodifyRow",function(e){return t.untranslateRow(e)}),this.addHook("afterUpdateSettings",function(){return t.onAfterUpdateSettings()}),this.addHook("afterGetColHeader",function(e,n){return t.getColHeader(e,n)}),this.addHook("afterOnCellMouseDown",function(e,n){return t.onAfterOnCellMouseDown(e,n)}),this.addHook("afterCreateRow",function(){n.afterCreateRow.apply(n,arguments)}),this.addHook("afterRemoveRow",function(){n.afterRemoveRow.apply(n,arguments)}),this.addHook("afterInit",function(){return t.sortBySettings()}),this.addHook("afterLoadData",function(){t.hot.sortIndex=[],t.hot.view&&t.sortBySettings()}),this.hot.view&&this.sortBySettings(),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.hot.sort=void 0,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"onAfterUpdateSettings",value:function(){this.sortBySettings()}},{key:"sortBySettings",value:function(){var t=this.hot.getSettings().columnSorting,e=this.loadSortingState(),n=void 0,i=void 0;"undefined"==typeof e?(n=t.column,i=t.sortOrder):(n=e.sortColumn,i=e.sortOrder),"number"==typeof n&&(this.lastSortedColumn=n,this.sortByColumn(n,i))}},{key:"setSortingColumn",value:function(t,e){return"undefined"==typeof t?(this.hot.sortColumn=void 0,void(this.hot.sortOrder=void 0)):(this.hot.sortColumn===t&&"undefined"==typeof e?this.hot.sortOrder===!1?this.hot.sortOrder=void 0:this.hot.sortOrder=!this.hot.sortOrder:this.hot.sortOrder="undefined"==typeof e||e,void(this.hot.sortColumn=t))}},{key:"sortByColumn",value:function(t,e){if(this.setSortingColumn(t,e),"undefined"!=typeof this.hot.sortColumn){var n=this.hot.runHooks("beforeColumnSort",this.hot.sortColumn,this.hot.sortOrder);n!==!1&&this.sort(),this.updateOrderClass(),this.updateSortIndicator(),this.hot.runHooks("afterColumnSort",this.hot.sortColumn,this.hot.sortOrder),this.hot.render(),this.saveSortingState()}}},{key:"saveSortingState",value:function(){var t={};"undefined"!=typeof this.hot.sortColumn&&(t.sortColumn=this.hot.sortColumn),"undefined"!=typeof this.hot.sortOrder&&(t.sortOrder=this.hot.sortOrder),((0,m.hasOwnProperty)(t,"sortColumn")||(0,m.hasOwnProperty)(t,"sortOrder"))&&this.hot.runHooks("persistentStateSave","columnSorting",t)}},{key:"loadSortingState",value:function(){var t={};return this.hot.runHooks("persistentStateLoad","columnSorting",t),t.value}},{key:"updateOrderClass",value:function(){var t=void 0;this.hot.sortOrder===!0?t="ascending":this.hot.sortOrder===!1&&(t="descending"),this.sortOrderClass=t}},{key:"enableObserveChangesPlugin",value:function(){var t=this;this.hot._registerTimeout(setTimeout(function(){t.hot.updateSettings({observeChanges:!0})},0))}},{key:"defaultSort",value:function(t,e){return function(n,i){return"string"==typeof n[1]&&(n[1]=n[1].toLowerCase()),"string"==typeof i[1]&&(i[1]=i[1].toLowerCase()),n[1]===i[1]?0:(0,g.isEmpty)(n[1])?(0,g.isEmpty)(i[1])?0:e.columnSorting.sortEmptyCells&&t?-1:1:(0,g.isEmpty)(i[1])?(0,g.isEmpty)(n[1])?0:e.columnSorting.sortEmptyCells&&t?1:-1:isNaN(n[1])&&!isNaN(i[1])?t?1:-1:!isNaN(n[1])&&isNaN(i[1])?t?-1:1:(isNaN(n[1])||isNaN(i[1])||(n[1]=parseFloat(n[1]),i[1]=parseFloat(i[1])),n[1]<i[1]?t?-1:1:n[1]>i[1]?t?1:-1:0)}}},{key:"dateSort",value:function(t,e){return function(n,i){if(n[1]===i[1])return 0;if((0,g.isEmpty)(n[1]))return(0,g.isEmpty)(i[1])?0:e.columnSorting.sortEmptyCells&&t?-1:1;if((0,g.isEmpty)(i[1]))return(0,g.isEmpty)(n[1])?0:e.columnSorting.sortEmptyCells&&t?1:-1;var r=(0,d["default"])(n[1],e.dateFormat),o=(0,d["default"])(i[1],e.dateFormat);return r.isValid()?o.isValid()?o.isAfter(r)?t?-1:1:o.isBefore(r)?t?1:-1:0:-1:1}}},{key:"numericSort",value:function(t,e){return function(n,i){var r=parseFloat(n[1]),o=parseFloat(i[1]);if(r===o||isNaN(r)&&isNaN(o))return 0;if(e.columnSorting.sortEmptyCells){if((0,g.isEmpty)(n[1]))return t?-1:1;if((0,g.isEmpty)(i[1]))return t?1:-1}return isNaN(r)?1:isNaN(o)?-1:r<o?t?-1:1:r>o?t?1:-1:0}}},{key:"sort",value:function(){if("undefined"==typeof this.hot.sortOrder)return void(this.hot.sortIndex.length=0);var t=this.hot.getCellMeta(0,this.hot.sortColumn),e=this.hot.countEmptyRows(),n=void 0,i=void 0;this.hot.sortingEnabled=!1,this.hot.sortIndex.length=0,"undefined"==typeof t.columnSorting.sortEmptyCells&&(t.columnSorting={sortEmptyCells:this.sortEmptyCells}),i=this.hot.getSettings().maxRows===Number.POSITIVE_INFINITY?this.hot.countRows()-this.hot.getSettings().minSpareRows:this.hot.countRows()-e;for(var r=0,o=i;r<o;r++)this.hot.sortIndex.push([r,this.hot.getDataAtCell(r,this.hot.sortColumn)]);if(t.sortFunction)n=t.sortFunction;else switch(t.type){case"date":n=this.dateSort;break;case"numeric":n=this.numericSort;break;default:n=this.defaultSort}(0,x["default"])(this.hot.sortIndex,n(this.hot.sortOrder,t));for(var a=this.hot.sortIndex.length;a<this.hot.countRows();a++)this.hot.sortIndex.push([a,this.hot.getDataAtCell(a,this.hot.sortColumn)]);this.hot.sortingEnabled=!0}},{key:"updateSortIndicator",value:function(){if("undefined"!=typeof this.hot.sortOrder){var t=this.hot.getCellMeta(0,this.hot.sortColumn);this.sortIndicators[this.hot.sortColumn]=t.sortIndicator}}},{key:"translateRow",value:function(t){return this.hot.sortingEnabled&&"undefined"!=typeof this.hot.sortOrder&&this.hot.sortIndex&&this.hot.sortIndex.length&&this.hot.sortIndex[t]?this.hot.sortIndex[t][0]:t}},{key:"untranslateRow",value:function(t){if(this.hot.sortingEnabled&&this.hot.sortIndex&&this.hot.sortIndex.length)for(var e=0;e<this.hot.sortIndex.length;e++)if(this.hot.sortIndex[e][0]==t)return e}},{key:"getColHeader",value:function(t,e){if(t<0||!e.parentNode)return!1;var n=e.querySelector(".colHeader"),i=(e.getAttribute("colspan"),e.parentNode.parentNode.childNodes),r=Array.prototype.indexOf.call(i,e.parentNode);r-=i.length,n&&(this.hot.getSettings().columnSorting&&t>=0&&r===-1&&(0,f.addClass)(n,"columnSorting"),(0,f.removeClass)(n,"descending"),(0,f.removeClass)(n,"ascending"),this.sortIndicators[t]&&t===this.hot.sortColumn&&("ascending"===this.sortOrderClass?(0,f.addClass)(n,"ascending"):"descending"===this.sortOrderClass&&(0,f.addClass)(n,"descending")))}},{key:"isSorted",value:function(){return"undefined"!=typeof this.hot.sortColumn}},{key:"afterCreateRow",value:function(t,e){if(this.isSorted()){for(var n=0;n<this.hot.sortIndex.length;n++)this.hot.sortIndex[n][0]>=t&&(this.hot.sortIndex[n][0]+=e);for(var i=0;i<e;i++)this.hot.sortIndex.splice(t+i,0,[t+i,this.hot.getSourceData()[t+i][this.hot.sortColumn+this.hot.colOffset()]]);this.saveSortingState()}}},{key:"afterRemoveRow",value:function(t,e){function n(t){return(0,p.arrayReduce)(i,function(e,n){return t>n&&e++,e},0)}if(this.isSorted()){var i=this.hot.sortIndex.splice(t,e);i=(0,p.arrayMap)(i,function(t){return t[0]}),this.hot.sortIndex=(0,p.arrayMap)(this.hot.sortIndex,function(t,e){var i=n(t[0]);return i&&(t[0]-=i),t}),this.saveSortingState()}}},{key:"setPluginOptions",value:function(){var t=this.hot.getSettings().columnSorting;"object"===("undefined"==typeof t?"undefined":l(t))?this.sortEmptyCells=t.sortEmptyCells||!1:this.sortEmptyCells=!1}},{key:"onAfterOnCellMouseDown",value:function(t,e){e.row>-1||(0,f.hasClass)(t.realTarget,"columnSorting")&&(e.col!==this.lastSortedColumn&&(this.hot.sortOrder=!0),this.lastSortedColumn=e.col,this.sortByColumn(e.col))}}]),e}(y["default"]);(0,b.registerPlugin)("columnSorting",C),e["default"]=C},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a=function(){function t(){i(this,t),this.editor=this.createEditor(),this.editorStyle=this.editor.style,this.hidden=!0,this.hide()}return r(t,null,[{key:"CLASS_EDITOR_CONTAINER",get:function(){return"htCommentsContainer"}},{key:"CLASS_EDITOR",get:function(){return"htComments"}},{key:"CLASS_INPUT",get:function(){return"htCommentTextArea"}},{key:"CLASS_CELL",get:function(){return"htCommentCell"}}]),r(t,[{key:"setPosition",value:function(t,e){this.editorStyle.left=t+"px",this.editorStyle.top=e+"px"}},{key:"setSize",value:function(t,e){if(t&&e){var n=this.getInputElement();n.style.width=t+"px",n.style.height=e+"px"}}},{key:"resetSize",value:function(){var t=this.getInputElement();t.style.width="",t.style.height=""}},{key:"setReadOnlyState",value:function(t){var e=this.getInputElement();e.readOnly=t}},{key:"show",value:function(){this.editorStyle.display="block",this.hidden=!1}},{key:"hide",value:function(){this.editorStyle.display="none",this.hidden=!0}},{key:"isVisible",value:function(){return"block"===this.editorStyle.display}},{key:"setValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t||"",this.getInputElement().value=t}},{key:"getValue",value:function(){return this.getInputElement().value}},{key:"isFocused",value:function(){return document.activeElement===this.getInputElement()}},{key:"focus",value:function(){this.getInputElement().focus()}},{key:"createEditor",value:function(){var e=document.querySelector("."+t.CLASS_EDITOR_CONTAINER),n=void 0,i=void 0;return e||(e=document.createElement("div"),(0,o.addClass)(e,t.CLASS_EDITOR_CONTAINER),document.body.appendChild(e)),n=document.createElement("div"),(0,o.addClass)(n,t.CLASS_EDITOR),i=document.createElement("textarea"),(0,o.addClass)(i,t.CLASS_INPUT),n.appendChild(i),e.appendChild(n),n}},{key:"getInputElement",value:function(){return this.editor.querySelector("."+t.CLASS_INPUT)}},{key:"destroy",value:function(){this.editor.parentNode.removeChild(this.editor),this.editor=null,this.editorStyle=null}}]),t}();e["default"]=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function O(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:O(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},c=n(0),h=n(1),d=n(4),f=i(d),p=n(11),g=n(5),m=n(12),v=i(m),y=n(215),b=i(y),w=n(17),x=n(217),_=i(x);n(296);var k=new WeakMap,C="comment",S="value",M="style",T="readOnly",E=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.editor=null,n.displaySwitch=null,n.eventManager=null,n.range={},n.mouseDown=!1,n.contextMenuEvent=!1,n.timer=null,k.set(n,{tempEditorDimensions:{},cellBelowCursor:null}),n}return s(e,t),l(e,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().comments}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.editor||(this.editor=new b["default"]),this.eventManager||(this.eventManager=new f["default"](this)),this.displaySwitch||(this.displaySwitch=new _["default"](this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",function(e){return t.addToContextMenu(e)}),this.addHook("afterRenderer",function(e,n,i,r,o,a){return t.onAfterRenderer(e,a)}),this.addHook("afterScrollHorizontally",function(){return t.hide()}),this.addHook("afterScrollVertically",function(){return t.hide()}),this.addHook("afterBeginEditing",function(e){return t.onAfterBeginEditing(e)}),this.displaySwitch.addLocalHook("hide",function(){return t.hide()}),this.displaySwitch.addLocalHook("show",function(e,n){return t.showAtCell(e,n)}),this.registerListeners(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updatePlugin",this).call(this),this.displaySwitch.updateDelay(this.getDisplayDelaySetting())}},{key:"disablePlugin",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"registerListeners",value:function(){var t=this;this.eventManager.addEventListener(document,"mouseover",function(e){return t.onMouseOver(e)}),this.eventManager.addEventListener(document,"mousedown",function(e){return t.onMouseDown(e)}),this.eventManager.addEventListener(document,"mouseup",function(e){return t.onMouseUp(e)}),this.eventManager.addEventListener(this.editor.getInputElement(),"blur",function(e){return t.onEditorBlur(e)}),this.eventManager.addEventListener(this.editor.getInputElement(),"mousedown",function(e){return t.onEditorMouseDown(e)}),this.eventManager.addEventListener(this.editor.getInputElement(),"mouseup",function(e){return t.onEditorMouseUp(e)})}},{key:"setRange",value:function(t){this.range=t}},{key:"clearRange",value:function(){this.range={}}},{key:"targetIsCellWithComment",value:function(t){var e=(0,c.closest)(t.target,"TD","TBODY");return!!(e&&(0,c.hasClass)(e,"htCommentCell")&&(0,c.closest)(e,[this.hot.rootElement]))}},{key:"targetIsCommentTextArea",value:function(t){return this.editor.getInputElement()===t.target}},{key:"setComment",value:function(t){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var e=this.editor.getValue(),n="";null!=t?n=t:null!=e&&(n=e);var i=this.range.from.row,o=this.range.from.col;this.updateCommentMeta(i,o,r({},S,n)),this.hot.render()}},{key:"setCommentAtCell",value:function(t,e,n){this.setRange({from:new p.CellCoords(t,e)}),this.setComment(n)}},{key:"removeComment",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,C,void 0),t&&this.hot.render(),this.hide()}},{key:"removeCommentAtCell",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.setRange({from:new p.CellCoords(t,e)}),this.removeComment(n)}},{key:"getComment",value:function(){var t=this.range.from.row,e=this.range.from.col;return this.getCommentMeta(t,e,S)}},{key:"getCommentAtCell",value:function(t,e){return this.getCommentMeta(t,e,S)}},{key:"show",value:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var t=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return this.refreshEditor(!0),this.editor.setValue(t[C]?t[C][S]:""),this.editor.hidden&&this.editor.show(),!0}},{key:"showAtCell",value:function(t,e){return this.setRange({from:new p.CellCoords(t,e)}),this.show()}},{key:"hide",value:function(){this.editor.hidden||this.editor.hide()}},{key:"refreshEditor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||this.range.from&&this.editor.isVisible()){var e=(0,c.getScrollableElement)(this.hot.view.wt.wtTable.TABLE),n=this.hot.view.wt.wtTable.getCell(this.range.from),i=this.range.from.row,r=this.range.from.col,o=(0,c.offset)(n),a=this.hot.view.wt.wtTable.getStretchedColumnWidth(r),s=o.top<0?0:o.top,l=o.left;this.hot.view.wt.wtViewport.hasVerticalScroll()&&e!==window&&(s-=this.hot.view.wt.wtOverlays.topOverlay.getScrollPosition()),this.hot.view.wt.wtViewport.hasHorizontalScroll()&&e!==window&&(l-=this.hot.view.wt.wtOverlays.leftOverlay.getScrollPosition());var u=l+a,h=s,d=this.getCommentMeta(i,r,M),f=this.getCommentMeta(i,r,T);d?this.editor.setSize(d.width,d.height):this.editor.resetSize(),this.editor.setReadOnlyState(f),this.editor.setPosition(u,h)}}},{key:"checkSelectionCommentsConsistency",value:function(){var t=this.hot.getSelectedRange();if(!t)return!1;var e=!1,n=t.from;return this.getCommentMeta(n.row,n.col,S)&&(e=!0),e}},{key:"updateCommentMeta",value:function(t,e,n){var i=this.hot.getCellMeta(t,e)[C],r=void 0;i?(r=(0,h.deepClone)(i),(0,h.deepExtend)(r,n)):r=n,this.hot.setCellMeta(t,e,C,r)}},{key:"getCommentMeta",value:function(t,e,n){var i=this.hot.getCellMeta(t,e);if(i[C])return i[C][n]}},{key:"onMouseDown",value:function(t){
if(this.mouseDown=!0,this.hot.view&&this.hot.view.wt){if(!this.contextMenuEvent&&!this.targetIsCommentTextArea(t)){var e=(0,c.closest)(t.target,"TD","TBODY"),n=null;e&&(n=this.hot.view.wt.wtTable.getCoords(e)),(!e||this.range.from&&n&&(this.range.from.row!==n.row||this.range.from.col!==n.col))&&this.hide()}this.contextMenuEvent=!1}}},{key:"onMouseOver",value:function(t){var e=k.get(this);if(e.cellBelowCursor=document.elementFromPoint(t.clientX,t.clientY),!(this.mouseDown||this.editor.isFocused()||(0,c.hasClass)(t.target,"wtBorder")||e.cellBelowCursor!==t.target)&&this.editor)if(this.targetIsCellWithComment(t)){var n=this.hot.view.wt.wtTable.getCoords(t.target),i={from:new p.CellCoords(n.row,n.col)};this.displaySwitch.show(i)}else(0,c.isChildOf)(t.target,document)&&!this.targetIsCommentTextArea(t)&&this.displaySwitch.hide()}},{key:"onMouseUp",value:function(t){this.mouseDown=!1}},{key:"onAfterRenderer",value:function(t,e){e[C]&&e[C][S]&&(0,c.addClass)(t,e.commentedCellClassName)}},{key:"onEditorBlur",value:function(t){this.setComment()}},{key:"onEditorMouseDown",value:function(t){var e=k.get(this);e.tempEditorDimensions={width:(0,c.outerWidth)(t.target),height:(0,c.outerHeight)(t.target)}}},{key:"onEditorMouseUp",value:function(t){var e=k.get(this),n=(0,c.outerWidth)(t.target),i=(0,c.outerHeight)(t.target);n===e.tempEditorDimensions.width+1&&i===e.tempEditorDimensions.height+2||this.updateCommentMeta(this.range.from.row,this.range.from.col,r({},M,{width:n,height:i}))}},{key:"onContextMenuAddComment",value:function(){var t=this;this.displaySwitch.cancelHiding();var e=this.hot.getSelectedRange();this.contextMenuEvent=!0,this.setRange({from:e.from}),this.show(),setTimeout(function(){t.hot&&(t.hot.deselectCell(),t.editor.focus())},10)}},{key:"onContextMenuRemoveComment",value:function(t){this.contextMenuEvent=!0;for(var e=t.start.row;e<=t.end.row;e++)for(var n=t.start.col;n<=t.end.col;n++)this.removeCommentAtCell(e,n,!1);this.hot.render()}},{key:"onContextMenuMakeReadOnly",value:function(t){this.contextMenuEvent=!0;for(var e=t.start.row;e<=t.end.row;e++)for(var n=t.start.col;n<=t.end.col;n++){var i=!!this.getCommentMeta(e,n,T);this.updateCommentMeta(e,n,r({},T,!i))}}},{key:"addToContextMenu",value:function(t){var e=this;t.items.push({name:"---------"},{key:"commentsAddEdit",name:function(){return e.checkSelectionCommentsConsistency()?"Edit comment":"Add comment"},callback:function(){return e.onContextMenuAddComment()},disabled:function(){return!(this.getSelected()&&!this.selection.selectedHeader.corner)}},{key:"commentsRemove",name:function(){return"Delete comment"},callback:function(t,n){return e.onContextMenuRemoveComment(n)},disabled:function(){return e.hot.selection.selectedHeader.corner}},{key:"commentsReadOnly",name:function(){var t=this,e="Read only comment",n=(0,w.checkSelectionConsistency)(this.getSelectedRange(),function(e,n){var i=t.getCellMeta(e,n)[C];if(i&&(i=i[T]),i)return!0});return n&&(e=(0,w.markLabelAsSelected)(e)),e},callback:function(t,n){return e.onContextMenuMakeReadOnly(n)},disabled:function(){return e.hot.selection.selectedHeader.corner||!e.checkSelectionCommentsConsistency()}})}},{key:"getDisplayDelaySetting",value:function(){var t=this.hot.getSettings().comments;if((0,h.isObject)(t))return t.displayDelay}},{key:"onAfterBeginEditing",value:function(t,e){this.hide()}},{key:"destroy",value:function(){this.editor&&this.editor.destroy(),this.displaySwitch&&this.displaySwitch.destroy(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(v["default"]);(0,g.registerPlugin)("comments",E),e["default"]=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(35),s=n(1),l=n(69),u=i(l),c=250,h=250,d=function(){function t(e){r(this,t),this.wasLastActionShow=!0,this.showDebounced=null,this.hidingTimer=null,this.updateDelay(e)}return o(t,[{key:"hide",value:function(){var t=this;this.wasLastActionShow=!1,this.hidingTimer=setTimeout(function(){t.wasLastActionShow===!1&&t.runLocalHooks("hide")},h)}},{key:"show",value:function(t){this.wasLastActionShow=!0,this.showDebounced(t)}},{key:"cancelHiding",value:function(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}},{key:"updateDelay",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;this.showDebounced=(0,a.debounce)(function(e){t.wasLastActionShow&&t.runLocalHooks("show",e.from.row,e.from.col)},e)}},{key:"destroy",value:function(){this.clearLocalHooks()}}]),t}();(0,s.mixin)(d,u["default"]),e["default"]=d},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){var n=void 0;return(0,a.arrayEach)(e,function(e){var i=e.key?e.key.split(":"):null;if(Array.isArray(i)&&i[1]===t)return n=e,!1}),n}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(2),s=n(1),l=function(){function t(e){i(this,t),this.hot=e,this.commands={},this.commonCallback=null}return o(t,[{key:"registerCommand",value:function(t,e){this.commands[t]=e}},{key:"setCommonCallback",value:function(t){this.commonCallback=t}},{key:"execute",value:function(t){for(var e=this,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var l=t.split(":");t=l[0];var u=2===l.length?l[1]:null,c=this.commands[t];if(!c)throw new Error("Menu command '"+t+"' not exists.");if(u&&c.submenu&&(c=r(u,c.submenu.items)),c.disabled!==!0&&("function"!=typeof c.disabled||c.disabled.call(this.hot)!==!0)&&!(0,s.hasOwnProperty)(c,"submenu")){var h=[];"function"==typeof c.callback&&h.push(c.callback),"function"==typeof this.commonCallback&&h.push(this.commonCallback),i.unshift(l.join(":")),(0,a.arrayEach)(h,function(t){return t.apply(e.hot,i)})}}}]),t}();e["default"]=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function T(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:T(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(12),c=i(u),h=n(8),d=i(h),f=n(2),p=n(218),g=i(p),m=n(4),v=i(m),y=n(221),b=i(y),w=n(222),x=i(w),_=n(5),k=n(7),C=n(0),S=n(70);n(297),d["default"].getSingleton().register("afterContextMenuDefaultOptions"),d["default"].getSingleton().register("afterContextMenuShow"),d["default"].getSingleton().register("afterContextMenuHide"),d["default"].getSingleton().register("afterContextMenuExecute");var M=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.eventManager=new v["default"](n),n.commandExecutor=new g["default"](n.hot),n.itemsFactory=null,n.menu=null,n}return a(e,t),l(e,null,[{key:"DEFAULT_ITEMS",get:function(){return[S.ROW_ABOVE,S.ROW_BELOW,S.SEPARATOR,S.COLUMN_LEFT,S.COLUMN_RIGHT,S.SEPARATOR,S.REMOVE_ROW,S.REMOVE_COLUMN,S.SEPARATOR,S.UNDO,S.REDO,S.SEPARATOR,S.READ_ONLY,S.SEPARATOR,S.ALIGNMENT]}}]),l(e,[{key:"isEnabled",value:function(){return this.hot.getSettings().contextMenu}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){this.itemsFactory=new b["default"](this.hot,e.DEFAULT_ITEMS);var n=this.hot.getSettings().contextMenu,i={items:this.itemsFactory.getItems(n)};this.registerEvents(),"function"==typeof n.callback&&this.commandExecutor.setCommonCallback(n.callback),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this),this.callOnPluginsReady(function(){t.hot.runHooks("afterContextMenuDefaultOptions",i),t.itemsFactory.setPredefinedItems(i.items);var e=t.itemsFactory.getItems(n);t.menu=new x["default"](t.hot,{className:"htContextMenu",keepInViewport:!0}),t.hot.runHooks("beforeContextMenuSetItems",e),t.menu.setMenuItems(e),t.menu.addLocalHook("afterOpen",function(){return t.onMenuAfterOpen()}),t.menu.addLocalHook("afterClose",function(){return t.onMenuAfterClose()}),t.menu.addLocalHook("executeCommand",function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.executeCommand.apply(t,n)}),(0,f.arrayEach)(e,function(e){return t.commandExecutor.registerCommand(e.key,e)})})}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var t=this;this.eventManager.addEventListener(this.hot.rootElement,"contextmenu",function(e){return t.onContextMenu(e)})}},{key:"open",value:function(t){this.menu&&(this.menu.open(),this.menu.setPosition({top:parseInt((0,k.pageY)(t),10)-(0,C.getWindowScrollTop)(),left:parseInt((0,k.pageX)(t),10)-(0,C.getWindowScrollLeft)()}),this.menu.hotMenu.isHotTableEnv=this.hot.isHotTableEnv)}},{key:"close",value:function(){this.menu&&this.menu.close()}},{key:"executeCommand",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.commandExecutor.execute.apply(this.commandExecutor,e)}},{key:"onContextMenu",value:function(t){function e(t){return"TD"===t.nodeName||"TD"===t.parentNode.nodeName}var n=this.hot.getSettings(),i=n.rowHeaders,r=n.colHeaders,o=t.realTarget;this.close(),(0,C.hasClass)(o,"handsontableInput")||(t.preventDefault(),(0,k.stopPropagation)(t),(i||r||e(o)||(0,C.hasClass)(o,"current")&&(0,C.hasClass)(o,"wtBorder"))&&this.open(t))}},{key:"onMenuAfterOpen",value:function(){this.hot.runHooks("afterContextMenuShow",this)}},{key:"onMenuAfterClose",value:function(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}},{key:"destroy",value:function(){this.close(),this.menu&&this.menu.destroy(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(c["default"]);M.SEPARATOR={name:S.SEPARATOR},(0,_.registerPlugin)("contextMenu",M),e["default"]=M},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a=n(7),s=function(){function t(e){i(this,t);var n=(0,o.getWindowScrollTop)(),r=(0,o.getWindowScrollLeft)(),s=void 0,l=void 0,u=void 0,c=void 0,h=void 0,d=void 0;this.type=this.getSourceType(e),"literal"===this.type?(s=parseInt(e.top,10),u=parseInt(e.left,10),h=e.height||0,d=e.width||0,l=s,c=u,s+=n,u+=r):"event"===this.type&&(s=parseInt((0,a.pageY)(e),10),u=parseInt((0,a.pageX)(e),10),h=e.target.clientHeight,d=e.target.clientWidth,l=s-n,c=u-r),this.top=s,this.topRelative=l,this.left=u,this.leftRelative=c,this.scrollTop=n,this.scrollLeft=r,this.cellHeight=h,this.cellWidth=d}return r(t,[{key:"getSourceType",value:function(t){var e="literal";return t instanceof Event&&(e="event"),e}},{key:"fitsAbove",value:function(t){return this.topRelative>=t.offsetHeight}},{key:"fitsBelow",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerHeight;return this.topRelative+t.offsetHeight<=e}},{key:"fitsOnRight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerWidth;return this.leftRelative+this.cellWidth+t.offsetWidth<=e}},{key:"fitsOnLeft",value:function(t){return this.leftRelative>=t.offsetWidth}}]),t}();e["default"]=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[];return t&&t.items?t=t.items:Array.isArray(t)||(t=e),(0,a.isObject)(t)?(0,a.objectEach)(t,function(t,e){var r=n["string"==typeof t?t:e];r||(r=t),(0,a.isObject)(t)?(0,a.extend)(r,t):"string"==typeof r&&(r={name:r}),void 0===r.key&&(r.key=e),i.push(r)}):(0,s.arrayEach)(t,function(t,e){var r=n[t];!r&&l.ITEMS.indexOf(t)>=0||(r||(r={name:t,key:""+e}),(0,a.isObject)(t)&&(0,a.extend)(r,t),void 0===r.key&&(r.key=e),i.push(r))}),i}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1),s=n(2),l=n(70),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t),this.hot=e,this.predefinedItems=(0,l.predefinedItems)(),this.defaultOrderPattern=n}return o(t,[{key:"setPredefinedItems",value:function(t){var e=this,n={};this.defaultOrderPattern.length=0,(0,a.objectEach)(t,function(t,i){var r="";t.name===l.SEPARATOR?(n[l.SEPARATOR]=t,r=l.SEPARATOR):isNaN(parseInt(i,10))?(t.key=void 0===t.key?i:t.key,n[i]=t,r=t.key):(n[t.key]=t,r=t.key),e.defaultOrderPattern.push(r)}),this.predefinedItems=n}},{key:"getItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r(t,this.defaultOrderPattern,this.predefinedItems)}}]),t}();e["default"]=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(63),s=i(a),l=n(0),u=n(2),c=n(220),h=i(c),d=n(4),f=i(d),p=n(1),g=n(35),m=n(17),v=n(16),y=n(69),b=i(y),w=n(70),x=n(7),_=function(){function t(e,n){r(this,t),this.hot=e,this.options=n||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1},this.eventManager=new f["default"](this),this.container=this.createContainer(this.options.name),this.hotMenu=null,this.hotSubMenus={},this.parentMenu=this.options.parent||null,this.menuItems=null,this.origOutsideClickDeselects=null,this.keyEvent=!1,this.offset={above:0,below:0,left:0,right:0},this._afterScrollCallback=null,this.registerEvents()}return o(t,[{key:"registerEvents",value:function(){var t=this;this.eventManager.addEventListener(document.documentElement,"mousedown",function(e){return t.onDocumentMouseDown(e)})}},{key:"setMenuItems",value:function(t){this.menuItems=t}},{key:"setOffset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.offset[t]=e}},{key:"isSubMenu",value:function(){return null!==this.parentMenu}},{key:"open",value:function(){var t=this;this.container.removeAttribute("style"),this.container.style.display="block";var e=(0,g.debounce)(function(e){return t.openSubMenu(e)},300),n=(0,u.arrayFilter)(this.menuItems,function(e){return(0,m.isItemHidden)(e,t.hot)});n=(0,m.filterSeparators)(n,w.SEPARATOR);var i={data:n,colHeaders:!1,colWidths:[200],autoRowSize:!1,readOnly:!0,copyPaste:!1,columns:[{data:"name",renderer:function(e,n,i,r,o,a){return t.menuItemRenderer(e,n,i,r,o,a)}}],renderAllRows:!0,fragmentSelection:"cell",disableVisualSelection:"area",beforeKeyDown:function(e){return t.onBeforeKeyDown(e)},afterOnCellMouseOver:function(n,i,r){t.isAllSubMenusClosed()?e(i.row):t.openSubMenu(i.row)},rowHeights:function(t){return n[t].name===w.SEPARATOR?1:23}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new s["default"](this.container,i),this.hotMenu.addHook("afterInit",function(){return t.onAfterInit()}),this.hotMenu.addHook("afterSelection",function(e,n,i,r,o){return t.onAfterSelection(e,n,i,r,o)}),this.hotMenu.init(),this.hotMenu.listen(),this.blockMainTableCallbacks(),this.runLocalHooks("afterOpen")}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isOpened()&&(t&&this.parentMenu?this.parentMenu.close():(this.closeAllSubMenus(),this.container.style.display="none",this.releaseMainTableCallbacks(),this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.parentMenu&&this.parentMenu.hotMenu.listen()))}},{key:"openSubMenu",value:function(e){if(!this.hotMenu)return!1;var n=this.hotMenu.getCell(e,0);if(this.closeAllSubMenus(),!n||!(0,m.hasSubMenu)(n))return!1;var i=this.hotMenu.getSourceDataAtRow(e),r=new t(this.hot,{parent:this,name:i.name,className:this.options.className,keepInViewport:!0});return r.setMenuItems(i.submenu.items),r.open(),r.setPosition(n.getBoundingClientRect()),this.hotSubMenus[i.key]=r,r}},{key:"closeSubMenu",value:function(t){var e=this.hotMenu.getSourceDataAtRow(t),n=this.hotSubMenus[e.key];n&&(n.destroy(),delete this.hotSubMenus[e.key])}},{key:"closeAllSubMenus",value:function(){var t=this;(0,u.arrayEach)(this.hotMenu.getData(),function(e,n){return t.closeSubMenu(n)})}},{key:"isAllSubMenusClosed",value:function(){return 0===Object.keys(this.hotSubMenus).length}},{key:"destroy",value:function(){this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy()}},{key:"isOpened",value:function(){return null!==this.hotMenu}},{key:"executeCommand",value:function(t){if(this.isOpened()&&this.hotMenu.getSelected()){var e=this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelected()[0]);if(this.runLocalHooks("select",e,t),e.isCommand!==!1&&e.name!==w.SEPARATOR){var n=this.hot.getSelectedRange(),i=n?(0,m.normalizeSelection)(n):{},r=!0;(e.disabled===!0||"function"==typeof e.disabled&&e.disabled.call(this.hot)===!0||e.submenu)&&(r=!1),this.runLocalHooks("executeCommand",e.key,i,t),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",e.key,i,t),r&&this.close(!0)}}}},{key:"setPosition",value:function(t){var e=new h["default"](t);this.options.keepInViewport?(e.fitsBelow(this.container)?this.setPositionBelowCursor(e):e.fitsAbove(this.container)?this.setPositionAboveCursor(e):this.setPositionBelowCursor(e),e.fitsOnRight(this.container)?this.setPositionOnRightOfCursor(e):this.setPositionOnLeftOfCursor(e)):(this.setPositionBelowCursor(e),this.setPositionOnRightOfCursor(e))}},{key:"setPositionAboveCursor",value:function(t){var e=this.offset.above+t.top-this.container.offsetHeight;this.isSubMenu()&&(e=t.top+t.cellHeight-this.container.offsetHeight+3),this.container.style.top=e+"px"}},{key:"setPositionBelowCursor",value:function(t){var e=this.offset.below+t.top;this.isSubMenu()&&(e=t.top-1),this.container.style.top=e+"px"}},{key:"setPositionOnRightOfCursor",value:function(t){var e=void 0;e=this.isSubMenu()?1+t.left+t.cellWidth:this.offset.right+1+t.left,this.container.style.left=e+"px"}},{key:"setPositionOnLeftOfCursor",value:function(t){var e=this.offset.left+t.left-this.container.offsetWidth+(0,l.getScrollbarWidth)()+4;this.container.style.left=e+"px"}},{key:"selectFirstCell",value:function(){var t=this.hotMenu.getCell(0,0);(0,m.isSeparator)(t)||(0,m.isDisabled)(t)||(0,m.isSelectionDisabled)(t)?this.selectNextCell(0,0):this.hotMenu.selectCell(0,0)}},{key:"selectLastCell",value:function(){var t=this.hotMenu.countRows()-1,e=this.hotMenu.getCell(t,0);(0,m.isSeparator)(e)||(0,m.isDisabled)(e)||(0,m.isSelectionDisabled)(e)?this.selectPrevCell(t,0):this.hotMenu.selectCell(t,0)}},{key:"selectNextCell",value:function(t,e){var n=t+1,i=n<this.hotMenu.countRows()?this.hotMenu.getCell(n,e):null;i&&((0,m.isSeparator)(i)||(0,m.isDisabled)(i)||(0,m.isSelectionDisabled)(i)?this.selectNextCell(n,e):this.hotMenu.selectCell(n,e))}},{key:"selectPrevCell",value:function(t,e){var n=t-1,i=n>=0?this.hotMenu.getCell(n,e):null;i&&((0,m.isSeparator)(i)||(0,m.isDisabled)(i)||(0,m.isSelectionDisabled)(i)?this.selectPrevCell(n,e):this.hotMenu.selectCell(n,e))}},{key:"menuItemRenderer",value:function(t,e,n,i,r,o){var a=this,s=t.getSourceDataAtRow(n),u=document.createElement("div"),c=function(t){return(0,p.hasOwnProperty)(t,"submenu")},h=function(t){return new RegExp(w.SEPARATOR,"i").test(t.name)},d=function(t){return t.disabled===!0||"function"==typeof t.disabled&&t.disabled.call(a.hot)===!0},f=function(t){return t.disableSelection};"function"==typeof o&&(o=o.call(this.hot)),(0,l.empty)(e),(0,l.addClass)(u,"htItemWrapper"),e.appendChild(u),h(s)?(0,l.addClass)(e,"htSeparator"):"function"==typeof s.renderer?((0,l.addClass)(e,"htCustomMenuRenderer"),e.appendChild(s.renderer(t,u,n,i,r,o))):(0,l.fastInnerHTML)(u,o),d(s)?((0,l.addClass)(e,"htDisabled"),this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()})):f(s)?((0,l.addClass)(e,"htSelectionDisabled"),this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()})):c(s)?((0,l.addClass)(e,"htSubmenu"),f(s)?this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()}):this.eventManager.addEventListener(e,"mouseenter",function(){return t.selectCell(n,i,void 0,void 0,!1,!1)})):((0,l.removeClass)(e,"htSubmenu"),(0,l.removeClass)(e,"htDisabled"),f(s)?this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()}):this.eventManager.addEventListener(e,"mouseenter",function(){return t.selectCell(n,i,void 0,void 0,!1,!1)}))}},{key:"createContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(t=t.replace(/[^A-z0-9]/g,"_"),t=this.options.className+"Sub_"+t);var e=void 0;return e=t?document.querySelector("."+this.options.className+"."+t):document.querySelector("."+this.options.className),e||(e=document.createElement("div"),(0,l.addClass)(e,"htMenu "+this.options.className),t&&(0,l.addClass)(e,t),document.getElementsByTagName("body")[0].appendChild(e)),e}},{key:"blockMainTableCallbacks",value:function(){this._afterScrollCallback=function(){},this.hot.addHook("afterScrollVertically",this._afterScrollCallback),this.hot.addHook("afterScrollHorizontally",this._afterScrollCallback)}},{key:"releaseMainTableCallbacks",value:function(){this._afterScrollCallback&&(this.hot.removeHook("afterScrollVertically",this._afterScrollCallback),this.hot.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)}},{key:"onBeforeKeyDown",value:function(t){var e=this.hotMenu.getSelected(),n=!1;switch(this.keyEvent=!0,t.keyCode){case v.KEY_CODES.ESCAPE:this.close(),n=!0;break;case v.KEY_CODES.ENTER:e&&(this.hotMenu.getSourceDataAtRow(e[0]).submenu?n=!0:(this.executeCommand(t),this.close(!0)));break;case v.KEY_CODES.ARROW_DOWN:e?this.selectNextCell(e[0],e[1]):this.selectFirstCell(),n=!0;break;case v.KEY_CODES.ARROW_UP:e?this.selectPrevCell(e[0],e[1]):this.selectLastCell(),n=!0;break;case v.KEY_CODES.ARROW_RIGHT:if(e){var i=this.openSubMenu(e[0]);i&&i.selectFirstCell()}n=!0;break;case v.KEY_CODES.ARROW_LEFT:e&&this.isSubMenu()&&(this.close(),this.parentMenu&&this.parentMenu.hotMenu.listen(),n=!0)}n&&(t.preventDefault(),(0,x.stopImmediatePropagation)(t)),this.keyEvent=!1}},{key:"onAfterInit",value:function(){var t=this.hotMenu.getSettings().data,e=this.hotMenu.view.wt.wtTable.hider.style,n=this.hotMenu.view.wt.wtTable.holder.style,i=parseInt(e.width,10),r=(0,u.arrayReduce)(t,function(t,e){return t+(e.name===w.SEPARATOR?1:26)},0);n.width=i+22+"px",n.height=r+4+"px",e.height=n.height}},{key:"onAfterSelection",value:function(t,e,n,i,r){this.keyEvent===!1&&(r.value=!0)}},{key:"onDocumentMouseDown",value:function(t){this.isOpened()&&(this.container&&(0,l.isChildOf)(t.target,this.container)&&this.executeCommand(t),this.options.standalone&&this.hotMenu&&!(0,l.isChildOf)(t.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&&!(0,l.isChildOf)(t.target,".htMenu")&&(0,l.isChildOf)(t.target,document)&&this.close(!0))}}]),t}();(0,p.mixin)(_,b["default"]),e["default"]=_},function(t,e,n){"use strict";function i(){return{key:a,name:"Alignment",disabled:function(){return!(this.getSelectedRange()&&!this.selection.selectedHeader.corner)},submenu:{items:[{key:a+":left",name:function(){var t=this,e="Left",n=(0,r.checkSelectionConsistency)(this.getSelectedRange(),function(e,n){var i=t.getCellMeta(e,n).className;if(i&&i.indexOf("htLeft")!==-1)return!0});return n&&(e=(0,r.markLabelAsSelected)(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=(0,r.getAlignmentClasses)(e,function(e,n){return t.getCellMeta(e,n).className}),i="horizontal",o="htLeft";this.runHooks("beforeCellAlignment",n,e,i,o),(0,r.align)(e,i,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,i,r){return t.setCellMeta(e,n,i,r)}),this.render()},disabled:!1},{key:a+":center",name:function(){var t=this,e="Center",n=(0,r.checkSelectionConsistency)(this.getSelectedRange(),function(e,n){var i=t.getCellMeta(e,n).className;if(i&&i.indexOf("htCenter")!==-1)return!0});return n&&(e=(0,r.markLabelAsSelected)(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=(0,r.getAlignmentClasses)(e,function(e,n){return t.getCellMeta(e,n).className}),i="horizontal",o="htCenter";this.runHooks("beforeCellAlignment",n,e,i,o),(0,r.align)(e,i,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,i,r){return t.setCellMeta(e,n,i,r)}),this.render()},disabled:!1},{key:a+":right",name:function(){var t=this,e="Right",n=(0,r.checkSelectionConsistency)(this.getSelectedRange(),function(e,n){var i=t.getCellMeta(e,n).className;if(i&&i.indexOf("htRight")!==-1)return!0});return n&&(e=(0,r.markLabelAsSelected)(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=(0,r.getAlignmentClasses)(e,function(e,n){return t.getCellMeta(e,n).className}),i="horizontal",o="htRight";this.runHooks("beforeCellAlignment",n,e,i,o),(0,r.align)(e,i,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,i,r){return t.setCellMeta(e,n,i,r)}),this.render()},disabled:!1},{key:a+":justify",name:function(){var t=this,e="Justify",n=(0,r.checkSelectionConsistency)(this.getSelectedRange(),function(e,n){var i=t.getCellMeta(e,n).className;if(i&&i.indexOf("htJustify")!==-1)return!0});return n&&(e=(0,r.markLabelAsSelected)(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=(0,r.getAlignmentClasses)(e,function(e,n){return t.getCellMeta(e,n).className}),i="horizontal",o="htJustify";this.runHooks("beforeCellAlignment",n,e,i,o),(0,r.align)(e,i,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,i,r){return t.setCellMeta(e,n,i,r)}),this.render()},disabled:!1},{name:o.KEY},{key:a+":top",name:function(){var t=this,e="Top",n=(0,r.checkSelectionConsistency)(this.getSelectedRange(),function(e,n){var i=t.getCellMeta(e,n).className;if(i&&i.indexOf("htTop")!==-1)return!0});return n&&(e=(0,r.markLabelAsSelected)(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=(0,r.getAlignmentClasses)(e,function(e,n){return t.getCellMeta(e,n).className}),i="vertical",o="htTop";this.runHooks("beforeCellAlignment",n,e,i,o),(0,r.align)(e,i,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,i,r){return t.setCellMeta(e,n,i,r)}),this.render()},disabled:!1},{key:a+":middle",name:function(){var t=this,e="Middle",n=(0,r.checkSelectionConsistency)(this.getSelectedRange(),function(e,n){var i=t.getCellMeta(e,n).className;if(i&&i.indexOf("htMiddle")!==-1)return!0});return n&&(e=(0,r.markLabelAsSelected)(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=(0,r.getAlignmentClasses)(e,function(e,n){return t.getCellMeta(e,n).className}),i="vertical",o="htMiddle";this.runHooks("beforeCellAlignment",n,e,i,o),(0,r.align)(e,i,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,i,r){return t.setCellMeta(e,n,i,r)}),this.render()},disabled:!1},{key:a+":bottom",name:function(){var t=this,e="Bottom",n=(0,r.checkSelectionConsistency)(this.getSelectedRange(),function(e,n){var i=t.getCellMeta(e,n).className;if(i&&i.indexOf("htBottom")!==-1)return!0});return n&&(e=(0,r.markLabelAsSelected)(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=(0,r.getAlignmentClasses)(e,function(e,n){return t.getCellMeta(e,n).className}),i="vertical",o="htBottom";this.runHooks("beforeCellAlignment",n,e,i,o),(0,r.align)(e,i,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,i,r){return t.setCellMeta(e,n,i,r)}),this.render()},disabled:!1}]}}}e.__esModule=!0,e.KEY=void 0,e["default"]=i;var r=n(17),o=n(71),a=e.KEY="alignment"},function(t,e,n){"use strict";function i(){return{key:o,name:"Clear column",callback:function(t,e){var n=e.start.col;this.countRows()&&this.populateFromArray(0,n,[[null]],Math.max(e.start.row,e.end.row),n,"ContextMenu.clearColumn")},disabled:function(){var t=(0,r.getValidSelection)(this);if(!t)return!0;var e=[t[0],0,t[0],this.countCols()-1],n=e.join(",")==t.join(",");return t[1]<0||this.countCols()>=this.getSettings().maxCols||n}}}e.__esModule=!0,e.KEY=void 0,e["default"]=i;var r=n(17),o=e.KEY="clear_column"},function(t,e,n){"use strict";function i(){return{key:o,name:"Insert column on the left",callback:function(t,e){this.alter("insert_col",e.start.col,1,"ContextMenu.columnLeft")},disabled:function(){var t=(0,r.getValidSelection)(this);if(!t)return!0;if(!this.isColumnModificationAllowed())return!0;var e=[t[0],0,t[0],this.countCols()-1],n=e.join(",")==t.join(","),i=1===this.countCols();return t[1]<0||this.countCols()>=this.getSettings().maxCols||!i&&n},hidden:function(){return!this.getSettings().allowInsertColumn}}}e.__esModule=!0,e.KEY=void 0,e["default"]=i;var r=n(17),o=e.KEY="col_left"},function(t,e,n){"use strict";function i(){return{key:o,name:"Insert column on the right",callback:function(t,e){this.alter("insert_col",e.end.col+1,1,"ContextMenu.columnRight")},disabled:function(){var t=(0,r.getValidSelection)(this);if(!t)return!0;if(!this.isColumnModificationAllowed())return!0;var e=[t[0],0,t[0],this.countCols()-1],n=e.join(",")==t.join(","),i=1===this.countCols();return t[1]<0||this.countCols()>=this.getSettings().maxCols||!i&&n},hidden:function(){return!this.getSettings().allowInsertColumn}}}e.__esModule=!0,e.KEY=void 0,e["default"]=i;var r=n(17),o=e.KEY="col_right"},function(t,e,n){"use strict";function i(){return{key:o,name:function(){var t=this,e="Read only",n=(0,r.checkSelectionConsistency)(this.getSelectedRange(),function(e,n){return t.getCellMeta(e,n).readOnly});return n&&(e=(0,r.markLabelAsSelected)(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=(0,r.checkSelectionConsistency)(e,function(e,n){return t.getCellMeta(e,n).readOnly});e.forAll(function(e,i){
t.setCellMeta(e,i,"readOnly",!n)}),this.render()},disabled:function(){return!(this.getSelectedRange()&&!this.selection.selectedHeader.corner)}}}e.__esModule=!0,e.KEY=void 0,e["default"]=i;var r=n(17),o=e.KEY="make_read_only"},function(t,e,n){"use strict";function i(){return{key:r,name:"Redo",callback:function(){this.redo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable()}}}e.__esModule=!0,e["default"]=i;var r=e.KEY="redo"},function(t,e,n){"use strict";function i(){return{key:o,name:"Remove column",callback:function(t,e){var n=e.end.col-e.start.col+1;this.alter("remove_col",e.start.col,n,"ContextMenu.removeColumn")},disabled:function(){var t=(0,r.getValidSelection)(this),e=this.countCols();return!t||this.selection.selectedHeader.rows||this.selection.selectedHeader.corner||!this.isColumnModificationAllowed()||!e},hidden:function(){return!this.getSettings().allowRemoveColumn}}}e.__esModule=!0,e.KEY=void 0,e["default"]=i;var r=n(17),o=e.KEY="remove_col"},function(t,e,n){"use strict";function i(){return{key:o,name:"Remove row",callback:function(t,e){var n=e.end.row-e.start.row+1;this.alter("remove_row",e.start.row,n,"ContextMenu.removeRow")},disabled:function(){var t=(0,r.getValidSelection)(this),e=this.countRows();return!t||this.selection.selectedHeader.cols||this.selection.selectedHeader.corner||!e},hidden:function(){return!this.getSettings().allowRemoveRow}}}e.__esModule=!0,e.KEY=void 0,e["default"]=i;var r=n(17),o=e.KEY="remove_row"},function(t,e,n){"use strict";function i(){return{key:o,name:"Insert row above",callback:function(t,e){this.alter("insert_row",e.start.row,1,"ContextMenu.rowAbove")},disabled:function(){var t=(0,r.getValidSelection)(this);return!t||this.selection.selectedHeader.cols||this.countRows()>=this.getSettings().maxRows},hidden:function(){return!this.getSettings().allowInsertRow}}}e.__esModule=!0,e.KEY=void 0,e["default"]=i;var r=n(17),o=e.KEY="row_above"},function(t,e,n){"use strict";function i(){return{key:o,name:"Insert row below",callback:function(t,e){this.alter("insert_row",e.end.row+1,1,"ContextMenu.rowBelow")},disabled:function(){var t=(0,r.getValidSelection)(this);return!t||this.selection.selectedHeader.cols||this.countRows()>=this.getSettings().maxRows},hidden:function(){return!this.getSettings().allowInsertRow}}}e.__esModule=!0,e.KEY=void 0,e["default"]=i;var r=n(17),o=e.KEY="row_below"},function(t,e,n){"use strict";function i(){return{key:r,name:"Undo",callback:function(){this.undo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable()}}}e.__esModule=!0,e["default"]=i;var r=e.KEY="undo"},function(t,e,n){"use strict";function i(t){return{key:"copy",name:"Copy",callback:function(){t.setCopyableText(),t.copy(!0)},disabled:function(){return!t.hot.getSelected()},hidden:!1}}e.__esModule=!0,e["default"]=i},function(t,e,n){"use strict";function i(t){return{key:"cut",name:"Cut",callback:function(){t.setCopyableText(),t.cut(!0)},disabled:function(){return!t.hot.getSelected()},hidden:!1}}e.__esModule=!0,e["default"]=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function z(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:z(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},c=n(12),h=i(c),d=n(8),f=i(d),p=n(133),g=i(p),m=n(11),v=n(16),y=n(0),b=n(2),w=n(6),x=n(7),_=n(5),k=n(237),C=i(k),S=n(234),M=i(S),T=n(235),E=i(T),O=n(4),A=i(O);n(298),f["default"].getSingleton().register("afterCopyLimit"),f["default"].getSingleton().register("modifyCopyableRange"),f["default"].getSingleton().register("beforeCut"),f["default"].getSingleton().register("afterCut"),f["default"].getSingleton().register("beforePaste"),f["default"].getSingleton().register("afterPaste"),f["default"].getSingleton().register("beforeCopy"),f["default"].getSingleton().register("afterCopy");var D=1e3,R=1e3,P=new WeakMap,N=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.eventManager=new A["default"](n),n.columnsLimit=R,n.copyableRanges=[],n.pasteMode="overwrite",n.rowsLimit=D,n.textarea=void 0,P.set(n,{isTriggeredByPaste:!1}),n}return a(e,t),l(e,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().copyPaste}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var n=this.hot.getSettings();this.textarea=C["default"].getSingleton(),"object"===s(n.copyPaste)&&(this.pasteMode=n.copyPaste.pasteMode||this.pasteMode,this.rowsLimit=n.copyPaste.rowsLimit||this.rowsLimit,this.columnsLimit=n.copyPaste.columnsLimit||this.columnsLimit),this.addHook("afterContextMenuDefaultOptions",function(e){return t.onAfterContextMenuDefaultOptions(e)}),this.addHook("beforeKeyDown",function(e){return t.onBeforeKeyDown(e)}),this.registerEvents(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.textarea&&this.textarea.destroy(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"setCopyableText",value:function(){var t=this.hot.getSelectedRange();if(t){var e=t.getTopLeftCorner(),n=t.getBottomRightCorner(),i=e.row,r=e.col,o=n.row,a=n.col,s=Math.min(o,i+this.rowsLimit-1),l=Math.min(a,r+this.columnsLimit-1);this.copyableRanges.length=0,this.copyableRanges.push({startRow:i,startCol:r,endRow:s,endCol:l}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges);var u=this.getRangedCopyableData(this.copyableRanges);this.textarea.setValue(u),o===s&&a===l||this.hot.runHooks("afterCopyLimit",o-i+1,a-r+1,this.rowsLimit,this.columnsLimit)}}},{key:"getRangedCopyableData",value:function(t){var e=this,n=[],i=[],r=[];return(0,b.arrayEach)(t,function(t){(0,w.rangeEach)(t.startRow,t.endRow,function(t){i.indexOf(t)===-1&&i.push(t)}),(0,w.rangeEach)(t.startCol,t.endCol,function(t){r.indexOf(t)===-1&&r.push(t)})}),(0,b.arrayEach)(i,function(t){var i=[];(0,b.arrayEach)(r,function(n){i.push(e.hot.getCopyableData(t,n))}),n.push(i)}),g["default"].stringify(n)}},{key:"getRangedData",value:function(t){var e=this,n=[],i=[],r=[];return(0,b.arrayEach)(t,function(t){(0,w.rangeEach)(t.startRow,t.endRow,function(t){i.indexOf(t)===-1&&i.push(t)}),(0,w.rangeEach)(t.startCol,t.endCol,function(t){r.indexOf(t)===-1&&r.push(t)})}),(0,b.arrayEach)(i,function(t){var i=[];(0,b.arrayEach)(r,function(n){i.push(e.hot.getCopyableData(t,n))}),n.push(i)}),n}},{key:"copy",value:function(t){var e=this.getRangedData(this.copyableRanges),n=!!this.hot.runHooks("beforeCopy",e,this.copyableRanges);n?(this.textarea.setValue(g["default"].stringify(e)),this.textarea.select(),t&&document.execCommand("copy"),this.hot.runHooks("afterCopy",e,this.copyableRanges)):this.textarea.setValue("")}},{key:"cut",value:function(t){var e=this.getRangedData(this.copyableRanges),n=!!this.hot.runHooks("beforeCut",e,this.copyableRanges);n?(this.textarea.setValue(g["default"].stringify(e)),this.hot.selection.empty(),this.textarea.select(),t&&document.execCommand("cut"),this.hot.runHooks("afterCut",e,this.copyableRanges)):this.textarea.setValue("")}},{key:"paste",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.textarea.setValue(t),this.onPaste(),this.onInput()}},{key:"registerEvents",value:function(){var t=this;this.eventManager.addEventListener(this.textarea.element,"paste",function(e){return t.onPaste(e)}),this.eventManager.addEventListener(this.textarea.element,"input",function(e){return t.onInput(e)})}},{key:"triggerPaste",value:function(){this.textarea.select(),this.onPaste()}},{key:"onPaste",value:function(){var t=P.get(this);t.isTriggeredByPaste=!0}},{key:"onInput",value:function(){var t=this,e=P.get(this);if(this.hot.isListening()&&e.isTriggeredByPaste){e.isTriggeredByPaste=!1;var n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,h=void 0;n=this.textarea.getValue(),i=g["default"].parse(n);var d=!!this.hot.runHooks("beforePaste",i,this.copyableRanges);if(d){r=this.hot.getSelected(),o=new m.CellCoords(r[0],r[1]),a=new m.CellCoords(r[2],r[3]),s=new m.CellRange(o,o,a),l=s.getTopLeftCorner(),u=s.getBottomRightCorner(),c=l,h=new m.CellCoords(Math.max(u.row,i.length-1+l.row),Math.max(u.col,i[0].length-1+l.col));var f=a.row-o.row>=i.length-1,p=a.col-o.col>=i[0].length-1;this.hot.addHookOnce("afterChange",function(e,n){var i=e?e.length:0;if(i){var r={row:0,col:0},o=-1;(0,b.arrayEach)(e,function(t,n){var a=i>n+1?e[n+1]:null;a&&(f||(r.row+=Math.max(a[0]-t[0]-1,0)),!p&&t[1]>o&&(o=t[1],r.col+=Math.max(a[1]-t[1]-1,0)))}),t.hot.selectCell(c.row,c.col,h.row+r.row,h.col+r.col)}}),this.hot.populateFromArray(c.row,c.col,i,h.row,h.col,"CopyPaste.paste",this.pasteMode),this.hot.runHooks("afterPaste",i,this.copyableRanges)}}}},{key:"onAfterContextMenuDefaultOptions",value:function(t){t.items.push({name:"---------"},(0,M["default"])(this),(0,E["default"])(this))}},{key:"onBeforeKeyDown",value:function(t){var e=this;if(this.hot.getSelected()&&(!this.hot.getActiveEditor()||!this.hot.getActiveEditor().isOpened())&&!(0,x.isImmediatePropagationStopped)(t)&&(this.textarea.isActive()||!(0,y.getSelectionText)())){if((0,v.isCtrlKey)(t.keyCode)){if(this.hot.getSettings().fragmentSelection&&(0,y.getSelectionText)())return;return this.setCopyableText(),void(0,x.stopImmediatePropagation)(t)}var n=(t.ctrlKey||t.metaKey)&&!t.altKey;n&&(t.keyCode==v.KEY_CODES.A&&setTimeout(function(){e.setCopyableText()},0),t.keyCode==v.KEY_CODES.X&&this.cut(),t.keyCode==v.KEY_CODES.C&&this.copy(),t.keyCode==v.KEY_CODES.V&&this.triggerPaste())}}},{key:"destroy",value:function(){this.textarea&&this.textarea.destroy(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(h["default"]);(0,_.registerPlugin)("CopyPaste",N),e["default"]=N},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(){i(this,t),this.element=void 0,this.isAppended=!1,this.refCounter=0}return r(t,null,[{key:"getSingleton",value:function(){return a.append(),a}}]),r(t,[{key:"append",value:function(){this.hasBeenDestroyed()&&this.create(),this.refCounter++,!this.isAppended&&document.body&&document.body&&(this.isAppended=!0,document.body.appendChild(this.element))}},{key:"create",value:function(){this.element=document.createElement("textarea"),this.element.id="HandsontableCopyPaste",this.element.className="copyPaste",this.element.tabIndex=-1,this.element.autocomplete="off",this.element.wrap="off"}},{key:"deselect",value:function(){this.element===document.activeElement&&document.activeElement.blur()}},{key:"destroy",value:function(){this.refCounter--,this.refCounter=this.refCounter<0?0:this.refCounter,this.hasBeenDestroyed()&&this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.element=null,this.isAppended=!1)}},{key:"getValue",value:function(){return this.element.value}},{key:"hasBeenDestroyed",value:function(){return this.refCounter<1}},{key:"isActive",value:function(){return this.element===document.activeElement}},{key:"select",value:function(){this.element.focus(),this.element.select()}},{key:"setValue",value:function(t){this.element.value=t}}]),t}(),a=new o;e["default"]=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(){}var o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(8),l=i(s),u=(n(5),n(1)),c=n(11),h=function(t){return"boolean"==typeof t&&t===!0||"object"===("undefined"==typeof t?"undefined":a(t))&&t.length>0},d=function(){h(this.getSettings().customBorders)&&(this.customBorders||(o=this,this.customBorders=new r))},f=function(t){for(var e=0;e<o.view.wt.selections.length;e++)if(o.view.wt.selections[e].settings.className==t)return e;return-1},p=function(t){var e={row:t.row,col:t.col},n=new c.Selection(t,new c.CellRange(e,e,e)),i=f(t.className);i>=0?o.view.wt.selections[i]=n:o.view.wt.selections.push(n)},g=function(t,e,n){var i=x(t,e);i=_(i,n),this.setCellMeta(t,e,"borders",i),p(i)},m=function(t){for(var e=t.range,n=e.from.row;n<=e.to.row;n++)for(var i=e.from.col;i<=e.to.col;i++){var r=x(n,i),o=0;n==e.from.row&&(o++,(0,u.hasOwnProperty)(t,"top")&&(r.top=t.top)),n==e.to.row&&(o++,(0,u.hasOwnProperty)(t,"bottom")&&(r.bottom=t.bottom)),i==e.from.col&&(o++,(0,u.hasOwnProperty)(t,"left")&&(r.left=t.left)),i==e.to.col&&(o++,(0,u.hasOwnProperty)(t,"right")&&(r.right=t.right)),o>0&&(this.setCellMeta(n,i,"borders",r),p(r))}},v=function(t,e){return"border_row"+t+"col"+e},y=function(){return{width:1,color:"#000"}},b=function(){return{hide:!0}},w=function(){return{width:1,color:"#000",cornerVisible:!1}},x=function(t,e){return{className:v(t,e),border:w(),row:t,col:e,top:b(),right:b(),bottom:b(),left:b()}},_=function(t,e){return(0,u.hasOwnProperty)(e,"border")&&(t.border=e.border),(0,u.hasOwnProperty)(e,"top")&&(t.top=e.top),(0,u.hasOwnProperty)(e,"right")&&(t.right=e.right),(0,u.hasOwnProperty)(e,"bottom")&&(t.bottom=e.bottom),(0,u.hasOwnProperty)(e,"left")&&(t.left=e.left),t},k=function(t){for(var e=document.querySelectorAll("."+t),n=0;n<e.length;n++)if(e[n]&&"TD"!=e[n].nodeName){var i=e[n].parentNode;i.parentNode&&i.parentNode.removeChild(i)}},C=function(t,e){var n=v(t,e);k(n),this.removeCellMeta(t,e,"borders")},S=function(t,e,n,i){var r=this.getCellMeta(t,e).borders;r&&void 0!=r.border||(r=x(t,e)),i?r[n]=b():r[n]=y(),this.setCellMeta(t,e,"borders",r);var o=v(t,e);k(o),p(r),this.render()},M=function(t,e,n){if(t.from.row==t.to.row&&t.from.col==t.to.col)"noBorders"==e?C.call(this,t.from.row,t.from.col):S.call(this,t.from.row,t.from.col,e,n);else switch(e){case"noBorders":for(var i=t.from.col;i<=t.to.col;i++)for(var r=t.from.row;r<=t.to.row;r++)C.call(this,r,i);break;case"top":for(var o=t.from.col;o<=t.to.col;o++)S.call(this,t.from.row,o,e,n);break;case"right":for(var a=t.from.row;a<=t.to.row;a++)S.call(this,a,t.to.col,e);break;case"bottom":for(var s=t.from.col;s<=t.to.col;s++)S.call(this,t.to.row,s,e);break;case"left":for(var l=t.from.row;l<=t.to.row;l++)S.call(this,l,t.from.col,e)}},T=function(t,e){var n=!1;return t.getSelectedRange().forAll(function(i,r){var o=t.getCellMeta(i,r).borders;if(o){if(!e)return n=!0,!1;if(!(0,u.hasOwnProperty)(o[e],"hide"))return n=!0,!1}}),n},E=function(t){return'<span class="selected">'+String.fromCharCode(10003)+"</span>"+t},O=function(t){this.getSettings().customBorders&&(t.items.push({name:"---------"}),t.items.push({key:"borders",name:"Borders",disabled:function(){return this.selection.selectedHeader.corner},submenu:{items:[{key:"borders:top",name:function(){var t="Top",e=T(this,"top");return e&&(t=E(t)),t},callback:function(){var t=T(this,"top");M.call(this,this.getSelectedRange(),"top",t)}},{key:"borders:right",name:function(){var t="Right",e=T(this,"right");return e&&(t=E(t)),t},callback:function(){var t=T(this,"right");M.call(this,this.getSelectedRange(),"right",t)}},{key:"borders:bottom",name:function(){var t="Bottom",e=T(this,"bottom");return e&&(t=E(t)),t},callback:function(){var t=T(this,"bottom");M.call(this,this.getSelectedRange(),"bottom",t)}},{key:"borders:left",name:function(){var t="Left",e=T(this,"left");return e&&(t=E(t)),t},callback:function(){var t=T(this,"left");M.call(this,this.getSelectedRange(),"left",t)}},{key:"borders:no_borders",name:"Remove border(s)",callback:function(){M.call(this,this.getSelectedRange(),"noBorders")},disabled:function(){return!T(this)}}]}}))};l["default"].getSingleton().add("beforeInit",d),l["default"].getSingleton().add("afterContextMenuDefaultOptions",O),l["default"].getSingleton().add("afterInit",function(){var t=this.getSettings().customBorders;if(t){for(var e=0;e<t.length;e++)t[e].range?m.call(this,t[e]):g.call(this,t[e].row,t[e].col,t[e]);this.render(),this.view.wt.draw(!0)}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(){this.boundaries=null,this.callback=null}e.__esModule=!0;var o=n(8),a=i(o),s=n(4),l=i(s);n(5);r.prototype.setBoundaries=function(t){this.boundaries=t},r.prototype.setCallback=function(t){this.callback=t},r.prototype.check=function(t,e){var n=0,i=0;e<this.boundaries.top?i=e-this.boundaries.top:e>this.boundaries.bottom&&(i=e-this.boundaries.bottom),t<this.boundaries.left?n=t-this.boundaries.left:t>this.boundaries.right&&(n=t-this.boundaries.right),this.callback(n,i)};var u,c=function(t){t.dragToScrollListening=!1;var e=t.view.wt.wtTable.holder;u=new r,e!==window&&(u.setBoundaries(e.getBoundingClientRect()),u.setCallback(function(t,n){t<0?e.scrollLeft-=50:t>0&&(e.scrollLeft+=50),n<0?e.scrollTop-=20:n>0&&(e.scrollTop+=20)}),t.dragToScrollListening=!0)};a["default"].getSingleton().add("afterInit",function(){var t=this,e=new l["default"](this);e.addEventListener(document,"mouseup",function(){t.dragToScrollListening=!1}),e.addEventListener(document,"mousemove",function(e){t.dragToScrollListening&&u.check(e.clientX,e.clientY)})}),a["default"].getSingleton().add("afterDestroy",function(){new l["default"](this).clear()}),a["default"].getSingleton().add("afterOnCellMouseDown",function(){c(this)}),a["default"].getSingleton().add("afterOnCellCornerMouseDown",function(){c(this)}),e["default"]=r},function(t,e,n){"use strict";function i(t){return{key:"freeze_column",name:"Freeze this column",callback:function(){var e=this.getSelectedRange().from.col;t.freezeColumn(e),this.render(),this.view.wt.wtOverlays.adjustElementsSize(!0)},hidden:function(){var t=this.getSelectedRange(),e=!1;return void 0===t?e=!0:(t.from.col!==t.to.col||t.from.col<=this.getSettings().fixedColumnsLeft-1)&&(e=!0),e}}}e.__esModule=!0,e["default"]=i},function(t,e,n){"use strict";function i(t){return{key:"unfreeze_column",name:"Unfreeze this column",callback:function(){var e=this.getSelectedRange().from.col;t.unfreezeColumn(e),this.render(),this.view.wt.wtOverlays.adjustElementsSize(!0)},hidden:function(){var t=this.getSelectedRange(),e=!1;return void 0===t?e=!0:(t.from.col!==t.to.col||t.from.col>=this.getSettings().fixedColumnsLeft)&&(e=!0),e}}}e.__esModule=!0,e["default"]=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function b(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:b(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(12),c=i(u),h=n(5),d=n(2),f=n(240),p=i(f),g=n(241),m=i(g);n(299);var v=new WeakMap,y=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return v.set(n,{moveByFreeze:!1,afterFirstUse:!1}),n.frozenColumnsBasePositions=[],n.manualColumnMovePlugin=void 0,n}return a(e,t),s(e,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().manualColumnFreeze}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",function(e){return t.addContextMenuEntry(e)}),this.addHook("afterInit",function(){return t.onAfterInit()}),this.addHook("beforeColumnMove",function(e,n){return t.onBeforeColumnMove(e,n)}),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){var t=v.get(this);t.afterFirstUse=!1,t.moveByFreeze=!1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updatePlugin",this).call(this)}},{key:"freezeColumn",value:function(t){var e=v.get(this),n=this.hot.getSettings();e.afterFirstUse||(e.afterFirstUse=!0),n.fixedColumnsLeft===this.hot.countCols()||t<=n.fixedColumnsLeft-1||(e.moveByFreeze=!0,t!==this.getMovePlugin().columnsMapper.getValueByIndex(t)&&(this.frozenColumnsBasePositions[n.fixedColumnsLeft]=t),this.getMovePlugin().moveColumn(t,n.fixedColumnsLeft++))}},{key:"unfreezeColumn",value:function(t){var e=v.get(this),n=this.hot.getSettings();if(e.afterFirstUse||(e.afterFirstUse=!0),!(n.fixedColumnsLeft<=0||t>n.fixedColumnsLeft-1)){var i=this.getBestColumnReturnPosition(t);e.moveByFreeze=!0,n.fixedColumnsLeft--,this.getMovePlugin().moveColumn(t,i+1)}}},{key:"getMovePlugin",value:function(){return this.manualColumnMovePlugin||(this.manualColumnMovePlugin=this.hot.getPlugin("manualColumnMove")),this.manualColumnMovePlugin}},{key:"getBestColumnReturnPosition",value:function(t){var e=this.getMovePlugin(),n=this.hot.getSettings(),i=n.fixedColumnsLeft,r=e.columnsMapper.getValueByIndex(i),o=void 0;if(null==this.frozenColumnsBasePositions[t])for(o=e.columnsMapper.getValueByIndex(t);r<o;)i++,r=e.columnsMapper.getValueByIndex(i);else{for(o=this.frozenColumnsBasePositions[t],this.frozenColumnsBasePositions[t]=void 0;r<=o;)i++,r=e.columnsMapper.getValueByIndex(i);i=r}return i-1}},{key:"addContextMenuEntry",value:function(t){t.items.push({name:"---------"},(0,p["default"])(this),(0,m["default"])(this))}},{key:"onAfterInit",value:function(){this.getMovePlugin().isEnabled()||this.getMovePlugin().enablePlugin()}},{key:"onBeforeColumnMove",value:function(t,e){var n=v.get(this);if(n.afterFirstUse&&!n.moveByFreeze){var i=this.hot.getSettings().fixedColumnsLeft,r=e<i;if(r||(0,d.arrayEach)(t,function(t,e,n){if(t<i)return r=!0,!1}),r)return!1}n.moveByFreeze&&(n.moveByFreeze=!1)}},{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(c["default"]);(0,h.registerPlugin)("manualColumnFreeze",y),e["default"]=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(150),s=i(a),l=n(2),u=n(1),c=n(6),h=function(){function t(e){r(this,t),this.manualColumnMove=e}return o(t,[{key:"createMap",value:function(t){var e=this,n=void 0===t?this._arrayMap.length:t;this._arrayMap.length=0,(0,c.rangeEach)(n-1,function(t){e._arrayMap[t]=t})}},{key:"destroy",value:function(){this._arrayMap=null}},{key:"moveColumn",value:function(t,e){var n=this._arrayMap[t];this._arrayMap[t]=null,this._arrayMap.splice(e,0,n)}},{key:"clearNull",value:function(){this._arrayMap=(0,l.arrayFilter)(this._arrayMap,function(t){return null!==t})}}]),t}();(0,u.mixin)(h,s["default"]),e["default"]=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function R(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:R(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(12),c=i(u),h=n(8),d=i(h),f=n(2),p=n(0),g=n(6),m=n(4),v=i(m),y=n(5),b=n(243),w=i(b),x=n(245),_=i(x),k=n(246),C=i(k),S=n(11);n(300),d["default"].getSingleton().register("beforeColumnMove"),d["default"].getSingleton().register("afterColumnMove"),d["default"].getSingleton().register("unmodifyCol");var M=new WeakMap,T="ht__manualColumnMove",E="show-ui",O="on-moving--columns",A="after-selection--columns",D=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return M.set(n,{columnsToMove:[],countCols:0,fixedColumns:0,pressed:void 0,disallowMoving:void 0,target:{eventPageX:void 0,coords:void 0,TD:void 0,col:void 0}}),n.removedColumns=[],n.columnsMapper=new w["default"](n),n.eventManager=new v["default"](n),n.backlight=new _["default"](t),n.guideline=new C["default"](t),n}return a(e,t),s(e,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().manualColumnMove}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(e,n,i,r){return t.onBeforeOnCellMouseDown(e,n,i,r)}),this.addHook("beforeOnCellMouseOver",function(e,n,i,r){return t.onBeforeOnCellMouseOver(e,n,i,r)}),this.addHook("afterScrollVertically",function(){return t.onAfterScrollVertically()}),this.addHook("modifyCol",function(e,n){return t.onModifyCol(e,n)}),this.addHook("beforeRemoveCol",function(e,n){return t.onBeforeRemoveCol(e,n)}),this.addHook("afterRemoveCol",function(e,n){return t.onAfterRemoveCol(e,n)}),this.addHook("afterCreateCol",function(e,n){return t.onAfterCreateCol(e,n)}),this.addHook("afterLoadData",function(e){return t.onAfterLoadData(e)}),this.addHook("unmodifyCol",function(e){return t.onUnmodifyCol(e)}),this.registerEvents(),(0,p.addClass)(this.hot.rootElement,T),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.onAfterPluginsInitialized(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var t=this.hot.getSettings().manualColumnMove;Array.isArray(t)&&this.columnsMapper.clearMap(),(0,p.removeClass)(this.hot.rootElement,T),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"moveColumn",value:function(t,e){this.moveColumns([t],e)}},{key:"moveColumns",value:function(t,e){var n=this,i=M.get(this),r=this.hot.runHooks("beforeColumnMove",t,e);i.disallowMoving=!r,r!==!1&&((0,f.arrayEach)(t,function(t,e,i){i[e]=n.columnsMapper.getValueByIndex(t)}),(0,f.arrayEach)(t,function(t,i){var r=n.columnsMapper.getIndexByValue(t);r!==e&&n.columnsMapper.moveColumn(r,e+i)}),this.columnsMapper.clearNull()),this.hot.runHooks("afterColumnMove",t,e)}},{key:"changeSelection",value:function(t,e){var n=this.hot.selection,i=this.hot.countRows()-1;n.setRangeStartOnly(new S.CellCoords(0,t)),n.setRangeEnd(new S.CellCoords(i,e),!1)}},{key:"getColumnsWidth",value:function(t,e){for(var n=0,i=t;i<e;i++){var r=0;r=i<0?this.hot.view.wt.wtTable.getColumnWidth(i)||0:this.hot.view.wt.wtTable.getStretchedColumnWidth(i)||0,n+=r}return n}},{key:"initialSettings",value:function(){var t=this.hot.getSettings().manualColumnMove;Array.isArray(t)?this.moveColumns(t,0):void 0!==t&&this.persistentStateLoad()}},{key:"isFixedColumnsLeft",value:function(t){return t<this.hot.getSettings().fixedColumnsLeft}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.columnsMapper._arrayMap)}},{key:"persistentStateLoad",value:function(){var t={};this.hot.runHooks("persistentStateLoad","manualColumnMove",t),t.value&&(this.columnsMapper._arrayMap=t.value)}},{key:"prepareColumnsToMoving",value:function(t,e){var n=[];return(0,g.rangeEach)(t,e,function(t){n.push(t)}),n}},{key:"refreshPositions",value:function(){var t=M.get(this),e=this.hot.view.wt.wtTable.getFirstVisibleColumn(),n=this.hot.view.wt.wtTable.getLastVisibleColumn(),i=this.hot.view.wt.wtTable,r=this.hot.view.wt.wtOverlays.scrollableElement,o="number"==typeof r.scrollX?r.scrollX:r.scrollLeft,a=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,t.coordsColumn),s=t.target.eventPageX-(t.rootElementOffset-(void 0===r.scrollX?o:0)),l=i.hider.offsetWidth,u=i.TBODY.offsetLeft,c=this.backlight.getOffset().left,h=this.backlight.getSize().width,d=0;if(t.rootElementOffset+i.holder.offsetWidth+o<t.target.eventPageX&&t.coordsColumn<t.countCols&&t.coordsColumn++,t.hasRowHeaders&&(d=this.hot.view.wt.wtOverlays.leftOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsLeft(t.coordsColumn)&&(a+=o),a+=d,t.coordsColumn<0)t.fixedColumns>0?t.target.col=0:t.target.col=e>0?e-1:e;else if(t.target.TD.offsetWidth/2+a<=s){var f=t.coordsColumn>=t.countCols?t.countCols-1:t.coordsColumn;t.target.col=f+1,a+=t.target.TD.offsetWidth,t.target.col>n&&this.hot.scrollViewportTo(void 0,n+1,void 0,!0)}else t.target.col=t.coordsColumn,t.target.col<=e&&t.target.col>=t.fixedColumns&&this.hot.scrollViewportTo(void 0,e-1);t.target.col<=e&&t.target.col>=t.fixedColumns&&this.hot.scrollViewportTo(void 0,e-1);var p=s,g=a;s+h+c>=l?p=l-h-c:s+c<u+d&&(p=u+d+Math.abs(c)),a>=l-1?g=l-1:0===g?g=1:void 0!==r.scrollX&&t.coordsColumn<t.fixedColumns&&(g-=t.rootElementOffset<=r.scrollX?t.rootElementOffset:0),this.backlight.setPosition(null,p),this.guideline.setPosition(null,g)}},{key:"updateColumnsMapper",value:function(){var t=this.hot.countSourceCols(),e=this.columnsMapper._arrayMap.length;if(0===e)this.columnsMapper.createMap(t||this.hot.getSettings().startCols);else if(e<t){
var n=t-e;this.columnsMapper.insertItems(e,n)}else if(e>t){var i=t-1,r=[];(0,f.arrayEach)(this.columnsMapper._arrayMap,function(t,e,n){t>i&&r.push(e)}),this.columnsMapper.removeItems(r)}}},{key:"registerEvents",value:function(){var t=this;this.eventManager.addEventListener(document.documentElement,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(document.documentElement,"mouseup",function(){return t.onMouseUp()})}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,i){var r=this.hot.view.wt.wtTable,o=this.hot.selection.selectedHeader.cols,a=this.hot.getSelectedRange(),s=M.get(this),l=t.realTarget.className.indexOf("columnSorting")>-1;if(!a||!o||s.pressed||0!==t.button||l)return s.pressed=!1,s.columnsToMove.length=0,void(0,p.removeClass)(this.hot.rootElement,[O,E]);var u=this.guideline.isBuilt()&&!this.guideline.isAppended(),c=this.backlight.isBuilt()&&!this.backlight.isAppended();u&&c&&(this.guideline.appendTo(r.hider),this.backlight.appendTo(r.hider));var h=a.from,d=a.to,f=Math.min(h.col,d.col),g=Math.max(h.col,d.col);if(e.row<0&&e.col>=f&&e.col<=g){i.column=!0,s.pressed=!0,s.target.eventPageX=t.pageX,s.coordsColumn=e.col,s.target.TD=n,s.target.col=e.col,s.columnsToMove=this.prepareColumnsToMoving(f,g),s.hasRowHeaders=!!this.hot.getSettings().rowHeaders,s.countCols=this.hot.countCols(),s.fixedColumns=this.hot.getSettings().fixedColumnsLeft,s.rootElementOffset=(0,p.offset)(this.hot.rootElement).left;var m=s.hasRowHeaders?-1:0,v=r.holder.scrollTop+r.getColumnHeaderHeight(0)+1,y=e.col<s.fixedColumns,b=this.hot.view.wt.wtOverlays.scrollableElement,w=b.scrollX?b.scrollX-s.rootElementOffset:0,x=t.layerX-(y?w:0),_=Math.abs(this.getColumnsWidth(f,e.col)+x);this.backlight.setPosition(v,this.getColumnsWidth(m,f)+_),this.backlight.setSize(this.getColumnsWidth(f,g+1),r.hider.offsetHeight-v),this.backlight.setOffset(null,_*-1),(0,p.addClass)(this.hot.rootElement,O)}else(0,p.removeClass)(this.hot.rootElement,A),s.pressed=!1,s.columnsToMove.length=0}},{key:"onMouseMove",value:function(t){var e=M.get(this);if(e.pressed){if(t.realTarget===this.backlight.element){var n=this.backlight.getSize().width;this.backlight.setSize(0),setTimeout(function(){this.backlight.setPosition(n)})}e.target.eventPageX=t.pageX,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,i){var r=this.hot.getSelectedRange(),o=M.get(this);r&&o.pressed&&(o.columnsToMove.indexOf(e.col)>-1?(0,p.removeClass)(this.hot.rootElement,E):(0,p.addClass)(this.hot.rootElement,E),i.row=!0,i.column=!0,i.cell=!0,o.coordsColumn=e.col,o.target.TD=n)}},{key:"onMouseUp",value:function(){var t=M.get(this);if(t.coordsColumn=void 0,t.pressed=!1,t.backlightWidth=0,(0,p.removeClass)(this.hot.rootElement,[O,E,A]),this.hot.selection.selectedHeader.cols&&(0,p.addClass)(this.hot.rootElement,A),!(t.columnsToMove.length<1||void 0===t.target.col||t.columnsToMove.indexOf(t.target.col)>-1)){if(this.moveColumns(t.columnsToMove,t.target.col),this.persistentStateSave(),this.hot.render(),this.hot.view.wt.wtOverlays.adjustElementsSize(!0),!t.disallowMoving){var e=this.columnsMapper.getIndexByValue(t.columnsToMove[0]),n=this.columnsMapper.getIndexByValue(t.columnsToMove[t.columnsToMove.length-1]);this.changeSelection(e,n)}t.columnsToMove.length=0}}},{key:"onAfterScrollVertically",value:function(){var t=this.hot.view.wt.wtTable,e=t.getColumnHeaderHeight(0)+1,n=t.holder.scrollTop,i=e+n;this.backlight.setPosition(i),this.backlight.setSize(null,t.hider.offsetHeight-i)}},{key:"onAfterCreateCol",value:function(t,e){this.columnsMapper.shiftItems(t,e)}},{key:"onBeforeRemoveCol",value:function(t,e){var n=this;this.removedColumns.length=0,t!==!1&&(0,g.rangeEach)(t,t+e-1,function(t){n.removedColumns.push(n.hot.runHooks("modifyCol",t,n.pluginName))})}},{key:"onAfterRemoveCol",value:function(t,e){this.columnsMapper.unshiftItems(this.removedColumns)}},{key:"onAfterLoadData",value:function(t){this.updateColumnsMapper()}},{key:"onModifyCol",value:function(t,e){if(e!==this.pluginName){var n=this.columnsMapper.getValueByIndex(t);t=null===n?t:n}return t}},{key:"onUnmodifyCol",value:function(t){var e=this.columnsMapper.getIndexByValue(t);return null===e?t:e}},{key:"onAfterPluginsInitialized",value:function(){this.updateColumnsMapper(),this.initialSettings(),this.backlight.build(),this.guideline.build()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(c["default"]);(0,y.registerPlugin)("ManualColumnMove",D),e["default"]=D},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:p(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(151),c=i(u),h=n(0),d="ht__manualColumnMove--backlight",f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"build",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"build",this).call(this),(0,h.addClass)(this._element,d)}}]),e}(c["default"]);e["default"]=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:p(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(151),c=i(u),h=n(0),d="ht__manualColumnMove--guideline",f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"build",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"build",this).call(this),(0,h.addClass)(this._element,d)}}]),e}(c["default"]);e["default"]=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function b(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:b(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(12),c=i(u),h=n(0),d=n(4),f=i(d),p=n(7),g=n(2),m=n(6),v=n(5),y=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.currentTH=null,n.currentCol=null,n.selectedCols=[],n.currentWidth=null,n.newSize=null,n.startY=null,n.startWidth=null,n.startOffset=null,n.handle=document.createElement("DIV"),n.guide=document.createElement("DIV"),n.eventManager=new f["default"](n),n.pressed=null,n.dblclick=0,n.autoresizeTimeout=null,n.manualColumnWidths=[],(0,h.addClass)(n.handle,"manualColumnResizer"),(0,h.addClass)(n.guide,"manualColumnResizerGuide"),n}return a(e,t),s(e,[{key:"isEnabled",value:function(){return this.hot.getSettings().manualColumnResize}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){this.manualColumnWidths=[];var n=this.hot.getSettings().manualColumnResize,i=this.loadManualColumnWidths();this.addHook("modifyColWidth",function(e,n){return t.onModifyColWidth(e,n)}),this.addHook("beforeStretchingColumnWidth",function(e,n){return t.onBeforeStretchingColumnWidth(e,n)}),this.addHook("beforeColumnResize",function(e,n,i){return t.onBeforeColumnResize(e,n,i)}),"undefined"!=typeof i?this.manualColumnWidths=i:Array.isArray(n)?this.manualColumnWidths=n:this.manualColumnWidths=[],this.bindEvents(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var t=this.hot.getSettings().manualColumnResize;Array.isArray(t)?this.manualColumnWidths=t:t||(this.manualColumnWidths=[])}},{key:"disablePlugin",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"saveManualColumnWidths",value:function(){this.hot.runHooks("persistentStateSave","manualColumnWidths",this.manualColumnWidths)}},{key:"loadManualColumnWidths",value:function(){var t={};return this.hot.runHooks("persistentStateLoad","manualColumnWidths",t),t.value}},{key:"setupHandlePosition",value:function(t){var e=this;if(!t.parentNode)return!1;this.currentTH=t;var n=this.hot.view.wt.wtTable.getCoords(t).col,i=(0,h.outerHeight)(this.currentTH);if(n>=0){var r=this.currentTH.getBoundingClientRect();if(this.currentCol=n,this.selectedCols=[],this.hot.selection.isSelected()&&this.hot.selection.selectedHeader.cols){var o=this.hot.getSelectedRange(),a=o.from,s=o.to,l=a.col,u=s.col;l>=u&&(l=s.col,u=a.col),this.currentCol>=l&&this.currentCol<=u?(0,m.rangeEach)(l,u,function(t){return e.selectedCols.push(t)}):this.selectedCols.push(this.currentCol)}else this.selectedCols.push(this.currentCol);this.startOffset=r.left-6,this.startWidth=parseInt(r.width,10),this.handle.style.top=r.top+"px",this.handle.style.left=this.startOffset+this.startWidth+"px",this.handle.style.height=i+"px",this.hot.rootElement.appendChild(this.handle)}}},{key:"refreshHandlePosition",value:function(){this.handle.style.left=this.startOffset+this.currentWidth+"px"}},{key:"setupGuidePosition",value:function(){var t=parseInt((0,h.outerHeight)(this.handle),10),e=parseInt(this.handle.style.top,10)+t,n=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);(0,h.addClass)(this.handle,"active"),(0,h.addClass)(this.guide,"active"),this.guide.style.top=e+"px",this.guide.style.left=this.handle.style.left,this.guide.style.height=n-t+"px",this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style.left=this.handle.style.left}},{key:"hideHandleAndGuide",value:function(){(0,h.removeClass)(this.handle,"active"),(0,h.removeClass)(this.guide,"active")}},{key:"checkIfColumnHeader",value:function(t){if(t!=this.hot.rootElement){var e=t.parentNode;return"THEAD"===e.tagName||this.checkIfColumnHeader(e)}return!1}},{key:"getTHFromTargetElement",value:function(t){return"TABLE"!=t.tagName?"TH"==t.tagName?t:this.getTHFromTargetElement(t.parentNode):null}},{key:"onMouseOver",value:function(t){if(this.checkIfColumnHeader(t.target)){var e=this.getTHFromTargetElement(t.target);if(!e)return;var n=e.getAttribute("colspan");!e||null!==n&&1!==n||this.pressed||this.setupHandlePosition(e)}}},{key:"afterMouseDownTimeout",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.wt.wtOverlays.adjustElementsSize(!0)},n=function(n,i){var r=t.hot.runHooks("beforeColumnResize",n,t.newSize,!0);void 0!==r&&(t.newSize=r),"all"===t.hot.getSettings().stretchH?t.clearManualSize(n):t.setManualSize(n,t.newSize),i&&e(),t.saveManualColumnWidths(),t.hot.runHooks("afterColumnResize",n,t.newSize,!0)};if(this.dblclick>=2){var i=this.selectedCols.length;i>1?((0,g.arrayEach)(this.selectedCols,function(t){n(t)}),e()):(0,g.arrayEach)(this.selectedCols,function(t){n(t,!0)})}this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(t){var e=this;(0,h.hasClass)(t.target,"manualColumnResizer")&&(this.setupGuidePosition(),this.pressed=this.hot,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout(function(){return e.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick++,this.startX=(0,p.pageX)(t),this.newSize=this.startWidth)}},{key:"onMouseMove",value:function(t){var e=this;this.pressed&&(this.currentWidth=this.startWidth+((0,p.pageX)(t)-this.startX),(0,g.arrayEach)(this.selectedCols,function(t){e.newSize=e.setManualSize(t,e.currentWidth)}),this.refreshHandlePosition(),this.refreshGuidePosition())}},{key:"onMouseUp",value:function(t){var e=this,n=function(){e.hot.forceFullRender=!0,e.hot.view.render(),e.hot.view.wt.wtOverlays.adjustElementsSize(!0)},i=function(t,i){e.hot.runHooks("beforeColumnResize",t,e.newSize),i&&n(),e.saveManualColumnWidths(),e.hot.runHooks("afterColumnResize",t,e.newSize)};if(this.pressed){if(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!=this.startWidth){var r=this.selectedCols.length;r>1?((0,g.arrayEach)(this.selectedCols,function(t){i(t)}),n()):(0,g.arrayEach)(this.selectedCols,function(t){i(t,!0)})}this.setupHandlePosition(this.currentTH)}}},{key:"bindEvents",value:function(){var t=this;this.eventManager.addEventListener(this.hot.rootElement,"mouseover",function(e){return t.onMouseOver(e)}),this.eventManager.addEventListener(this.hot.rootElement,"mousedown",function(e){return t.onMouseDown(e)}),this.eventManager.addEventListener(window,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(window,"mouseup",function(e){return t.onMouseUp(e)})}},{key:"setManualSize",value:function(t,e){return e=Math.max(e,20),t=this.hot.runHooks("modifyCol",t),this.manualColumnWidths[t]=e,e}},{key:"clearManualSize",value:function(t){t=this.hot.runHooks("modifyCol",t),this.manualColumnWidths[t]=void 0}},{key:"onModifyColWidth",value:function(t,e){return this.enabled&&(e=this.hot.runHooks("modifyCol",e),this.hot.getSettings().manualColumnResize&&this.manualColumnWidths[e])?this.manualColumnWidths[e]:t}},{key:"onBeforeStretchingColumnWidth",value:function(t,e){var n=this.manualColumnWidths[e];return void 0===n&&(n=t),n}},{key:"onBeforeColumnResize",value:function(){this.hot.view.wt.wtViewport.hasOversizedColumnHeadersMarked={}}}]),e}(c["default"]);(0,v.registerPlugin)("manualColumnResize",y),e["default"]=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function R(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:R(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(12),c=i(u),h=n(8),d=i(h),f=n(2),p=n(0),g=n(6),m=n(4),v=i(m),y=n(5),b=n(249),w=i(b),x=n(250),_=i(x),k=n(251),C=i(k),S=n(11);n(301),d["default"].getSingleton().register("beforeRowMove"),d["default"].getSingleton().register("afterRowMove"),d["default"].getSingleton().register("unmodifyRow");var M=new WeakMap,T="ht__manualRowMove",E="show-ui",O="on-moving--rows",A="after-selection--rows",D=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return M.set(n,{rowsToMove:[],pressed:void 0,disallowMoving:void 0,target:{eventPageY:void 0,coords:void 0,TD:void 0,row:void 0}}),n.removedRows=[],n.rowsMapper=new w["default"](n),n.eventManager=new v["default"](n),n.backlight=new _["default"](t),n.guideline=new C["default"](t),n}return a(e,t),s(e,[{key:"isEnabled",value:function(){return!!this.hot.getSettings().manualRowMove}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(e,n,i,r){return t.onBeforeOnCellMouseDown(e,n,i,r)}),this.addHook("beforeOnCellMouseOver",function(e,n,i,r){return t.onBeforeOnCellMouseOver(e,n,i,r)}),this.addHook("afterScrollHorizontally",function(){return t.onAfterScrollHorizontally()}),this.addHook("modifyRow",function(e,n){return t.onModifyRow(e,n)}),this.addHook("beforeRemoveRow",function(e,n){return t.onBeforeRemoveRow(e,n)}),this.addHook("afterRemoveRow",function(e,n){return t.onAfterRemoveRow(e,n)}),this.addHook("afterCreateRow",function(e,n){return t.onAfterCreateRow(e,n)}),this.addHook("afterLoadData",function(e){return t.onAfterLoadData(e)}),this.addHook("beforeColumnSort",function(e,n){return t.onBeforeColumnSort(e,n)}),this.addHook("unmodifyRow",function(e){return t.onUnmodifyRow(e)}),this.registerEvents(),(0,p.addClass)(this.hot.rootElement,T),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.onAfterPluginsInitialized(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var t=this.hot.getSettings().manualRowMove;Array.isArray(t)&&this.rowsMapper.clearMap(),(0,p.removeClass)(this.hot.rootElement,T),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"moveRow",value:function(t,e){this.moveRows([t],e)}},{key:"moveRows",value:function(t,e){var n=this,i=M.get(this),r=this.hot.runHooks("beforeRowMove",t,e);i.disallowMoving=r===!1,i.disallowMoving||((0,f.arrayEach)(t,function(t,e,i){i[e]=n.rowsMapper.getValueByIndex(t)}),(0,f.arrayEach)(t,function(t,i){var r=n.rowsMapper.getIndexByValue(t);r!==e&&n.rowsMapper.moveRow(r,e+i)}),this.rowsMapper.clearNull()),this.hot.runHooks("afterRowMove",t,e)}},{key:"changeSelection",value:function(t,e){var n=this.hot.selection,i=this.hot.countCols()-1;n.setRangeStartOnly(new S.CellCoords(t,0)),n.setRangeEnd(new S.CellCoords(e,i),!1)}},{key:"getRowsHeight",value:function(t,e){for(var n=0,i=t;i<e;i++){var r=this.hot.view.wt.wtTable.getRowHeight(i)||23;n+=r}return n}},{key:"initialSettings",value:function(){var t=this.hot.getSettings().manualRowMove;if(Array.isArray(t))this.moveRows(t,0);else if(void 0!==t){var e=this.persistentStateLoad();e.length&&this.moveRows(e,0)}}},{key:"isFixedRowTop",value:function(t){return t<this.hot.getSettings().fixedRowsTop}},{key:"isFixedRowBottom",value:function(t){return t>this.hot.getSettings().fixedRowsBottom}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualRowMove",this.rowsMapper._arrayMap)}},{key:"persistentStateLoad",value:function(){var t={};return this.hot.runHooks("persistentStateLoad","manualRowMove",t),t.value?t.value:[]}},{key:"prepareRowsToMoving",value:function(){var t=this.hot.getSelectedRange(),e=[];if(!t)return e;var n=t.from,i=t.to,r=Math.min(n.row,i.row),o=Math.max(n.row,i.row);return(0,g.rangeEach)(r,o,function(t){e.push(t)}),e}},{key:"refreshPositions",value:function(){var t=M.get(this),e=t.target.coords,n=this.hot.view.wt.wtTable.getFirstVisibleRow(),i=this.hot.view.wt.wtTable.getLastVisibleRow(),r=this.hot.getSettings().fixedRowsTop,o=this.hot.countRows();e.row<r&&n>0&&this.hot.scrollViewportTo(n-1),e.row>=i&&i<o&&this.hot.scrollViewportTo(i+1,void 0,!0);var a=this.hot.view.wt.wtTable,s=t.target.TD,l=(0,p.offset)(this.hot.rootElement),u=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,e.row),c=t.target.eventPageY-l.top+a.holder.scrollTop,h=a.hider.offsetHeight,d=a.TBODY.offsetTop,f=this.backlight.getOffset().top,g=this.backlight.getSize().height;l.top+a.holder.offsetHeight<t.target.eventPageY&&t.target.coords.row++,this.isFixedRowTop(e.row)&&(u+=a.holder.scrollTop),e.row<0?t.target.row=n>0?n-1:n:s.offsetHeight/2+u<=c?(t.target.row=e.row+1,u+=0===e.row?s.offsetHeight-1:s.offsetHeight):t.target.row=e.row;var m=c,v=u;c+g+f>=h?m=h-g-f:c+f<d&&(m=d+Math.abs(f)),u>=h-1&&(v=h-1);var y=0;this.hot.view.wt.wtOverlays.topOverlay&&(y=this.hot.view.wt.wtOverlays.topOverlay.clone.wtTable.TABLE.offsetHeight),e.row>=r&&v-a.holder.scrollTop<y&&this.hot.scrollViewportTo(e.row),this.backlight.setPosition(m),this.guideline.setPosition(v)}},{key:"updateRowsMapper",value:function(){var t=this.hot.countSourceRows(),e=this.rowsMapper._arrayMap.length;if(0===e)this.rowsMapper.createMap(t||this.hot.getSettings().startRows);else if(e<t){var n=t-e;this.rowsMapper.insertItems(e,n)}else if(e>t){var i=t-1,r=[];(0,f.arrayEach)(this.rowsMapper._arrayMap,function(t,e,n){t>i&&r.push(e)}),this.rowsMapper.removeItems(r)}}},{key:"registerEvents",value:function(){var t=this;this.eventManager.addEventListener(document.documentElement,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(document.documentElement,"mouseup",function(){return t.onMouseUp()})}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeColumnSort",value:function(t,e){var n=M.get(this);n.disallowMoving=void 0!==e}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,i){var r=this.hot.view.wt.wtTable,o=this.hot.selection.selectedHeader.rows,a=this.hot.getSelectedRange(),s=M.get(this);if(!a||!o||s.pressed||0!==t.button)return s.pressed=!1,s.rowsToMove.length=0,void(0,p.removeClass)(this.hot.rootElement,[O,E]);var l=this.guideline.isBuilt()&&!this.guideline.isAppended(),u=this.backlight.isBuilt()&&!this.backlight.isAppended();l&&u&&(this.guideline.appendTo(r.hider),this.backlight.appendTo(r.hider));var c=a.from,h=a.to,d=Math.min(c.row,h.row),f=Math.max(c.row,h.row);if(e.col<0&&e.row>=d&&e.row<=f){i.row=!0,s.pressed=!0,s.target.eventPageY=t.pageY,s.target.coords=e,s.target.TD=n,s.rowsToMove=this.prepareRowsToMoving();var g=r.holder.scrollLeft+r.getColumnWidth(-1);this.backlight.setPosition(null,g),this.backlight.setSize(r.hider.offsetWidth-g,this.getRowsHeight(d,f+1)),this.backlight.setOffset((this.getRowsHeight(d,e.row)+t.layerY)*-1,null),(0,p.addClass)(this.hot.rootElement,O),this.refreshPositions()}else(0,p.removeClass)(this.hot.rootElement,A),s.pressed=!1,s.rowsToMove.length=0}},{key:"onMouseMove",value:function(t){var e=M.get(this);if(e.pressed){if(t.realTarget===this.backlight.element){var n=this.backlight.getSize().height;this.backlight.setSize(null,0),setTimeout(function(){this.backlight.setPosition(null,n)})}e.target.eventPageY=t.pageY,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,i){var r=this.hot.getSelectedRange(),o=M.get(this);r&&o.pressed&&(o.rowsToMove.indexOf(e.row)>-1?(0,p.removeClass)(this.hot.rootElement,E):(0,p.addClass)(this.hot.rootElement,E),i.row=!0,i.column=!0,i.cell=!0,o.target.coords=e,o.target.TD=n)}},{key:"onMouseUp",value:function(){var t=M.get(this),e=t.target.row,n=t.rowsToMove.length;if(t.pressed=!1,t.backlightHeight=0,(0,p.removeClass)(this.hot.rootElement,[O,E,A]),this.hot.selection.selectedHeader.rows&&(0,p.addClass)(this.hot.rootElement,A),!(n<1||void 0===e||t.rowsToMove.indexOf(e)>-1||t.rowsToMove[n-1]===e-1)){if(this.moveRows(t.rowsToMove,e),this.persistentStateSave(),this.hot.render(),!t.disallowMoving){var i=this.rowsMapper.getIndexByValue(t.rowsToMove[0]),r=this.rowsMapper.getIndexByValue(t.rowsToMove[n-1]);this.changeSelection(i,r)}t.rowsToMove.length=0}}},{key:"onAfterScrollHorizontally",value:function(){var t=this.hot.view.wt.wtTable,e=t.getColumnWidth(-1),n=t.holder.scrollLeft,i=e+n;this.backlight.setPosition(null,i),this.backlight.setSize(t.hider.offsetWidth-i)}},{key:"onAfterCreateRow",value:function(t,e){this.rowsMapper.shiftItems(t,e)}},{key:"onBeforeRemoveRow",value:function(t,e){var n=this;this.removedRows.length=0,t!==!1&&(0,g.rangeEach)(t,t+e-1,function(t){n.removedRows.push(n.hot.runHooks("modifyRow",t,n.pluginName))})}},{key:"onAfterRemoveRow",value:function(t,e){this.rowsMapper.unshiftItems(this.removedRows)}},{key:"onAfterLoadData",value:function(t){this.updateRowsMapper()}},{key:"onModifyRow",value:function(t,e){if(e!==this.pluginName){var n=this.rowsMapper.getValueByIndex(t);t=null===n?t:n}return t}},{key:"onUnmodifyRow",value:function(t){var e=this.rowsMapper.getIndexByValue(t);return null===e?t:e}},{key:"onAfterPluginsInitialized",value:function(){this.updateRowsMapper(),this.initialSettings(),this.backlight.build(),this.guideline.build()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(c["default"]);(0,y.registerPlugin)("ManualRowMove",D),e["default"]=D},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(150),s=i(a),l=n(2),u=n(1),c=n(6),h=function(){function t(e){r(this,t),this.manualRowMove=e}return o(t,[{key:"createMap",value:function(t){var e=this,n=void 0===t?this._arrayMap.length:t;this._arrayMap.length=0,(0,c.rangeEach)(n-1,function(t){e._arrayMap[t]=t})}},{key:"destroy",value:function(){this._arrayMap=null}},{key:"moveRow",value:function(t,e){var n=this._arrayMap[t];this._arrayMap[t]=null,this._arrayMap.splice(e,0,n)}},{key:"clearNull",value:function(){this._arrayMap=(0,l.arrayFilter)(this._arrayMap,function(t){return null!==t})}}]),t}();(0,u.mixin)(h,s["default"]),e["default"]=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:p(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(152),c=i(u),h=n(0),d="ht__manualRowMove--backlight",f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"build",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"build",this).call(this),(0,h.addClass)(this._element,d)}}]),e}(c["default"]);e["default"]=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:p(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(152),c=i(u),h=n(0),d="ht__manualRowMove--guideline",f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"build",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"build",this).call(this),(0,h.addClass)(this._element,d)}}]),e}(c["default"]);e["default"]=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function b(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);
if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:b(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(12),c=i(u),h=n(0),d=n(4),f=i(d),p=n(7),g=n(2),m=n(6),v=n(5),y=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.currentTH=null,n.currentRow=null,n.selectedRows=[],n.currentHeight=null,n.newSize=null,n.startY=null,n.startHeight=null,n.startOffset=null,n.handle=document.createElement("DIV"),n.guide=document.createElement("DIV"),n.eventManager=new f["default"](n),n.pressed=null,n.dblclick=0,n.autoresizeTimeout=null,n.manualRowHeights=[],(0,h.addClass)(n.handle,"manualRowResizer"),(0,h.addClass)(n.guide,"manualRowResizerGuide"),n}return a(e,t),s(e,[{key:"isEnabled",value:function(){return this.hot.getSettings().manualRowResize}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){this.manualRowHeights=[];var n=this.hot.getSettings().manualRowResize,i=this.loadManualRowHeights();"undefined"!=typeof i?this.manualRowHeights=i:Array.isArray(n)?this.manualRowHeights=n:this.manualRowHeights=[],this.addHook("modifyRowHeight",function(e,n){return t.onModifyRowHeight(e,n)}),this.bindEvents(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var t=this.hot.getSettings().manualRowResize;Array.isArray(t)?this.manualRowHeights=t:t||(this.manualRowHeights=[])}},{key:"disablePlugin",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"saveManualRowHeights",value:function(){this.hot.runHooks("persistentStateSave","manualRowHeights",this.manualRowHeights)}},{key:"loadManualRowHeights",value:function(){var t={};return this.hot.runHooks("persistentStateLoad","manualRowHeights",t),t.value}},{key:"setupHandlePosition",value:function(t){var e=this;this.currentTH=t;var n=this.hot.view.wt.wtTable.getCoords(t).row,i=(0,h.outerWidth)(this.currentTH);if(n>=0){var r=this.currentTH.getBoundingClientRect();if(this.currentRow=n,this.selectedRows=[],this.hot.selection.isSelected()&&this.hot.selection.selectedHeader.rows){var o=this.hot.getSelectedRange(),a=o.from,s=o.to,l=a.row,u=s.row;l>=u&&(l=s.row,u=a.row),this.currentRow>=l&&this.currentRow<=u?(0,m.rangeEach)(l,u,function(t){return e.selectedRows.push(t)}):this.selectedRows.push(this.currentRow)}else this.selectedRows.push(this.currentRow);this.startOffset=r.top-6,this.startHeight=parseInt(r.height,10),this.handle.style.left=r.left+"px",this.handle.style.top=this.startOffset+this.startHeight+"px",this.handle.style.width=i+"px",this.hot.rootElement.appendChild(this.handle)}}},{key:"refreshHandlePosition",value:function(){this.handle.style.top=this.startOffset+this.currentHeight+"px"}},{key:"setupGuidePosition",value:function(){var t=parseInt((0,h.outerWidth)(this.handle),10),e=parseInt(this.handle.style.left,10)+t,n=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);(0,h.addClass)(this.handle,"active"),(0,h.addClass)(this.guide,"active"),this.guide.style.top=this.handle.style.top,this.guide.style.left=e+"px",this.guide.style.width=n-t+"px",this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style.top=this.handle.style.top}},{key:"hideHandleAndGuide",value:function(){(0,h.removeClass)(this.handle,"active"),(0,h.removeClass)(this.guide,"active")}},{key:"checkIfRowHeader",value:function(t){if(t!=this.hot.rootElement){var e=t.parentNode;return"TBODY"===e.tagName||this.checkIfRowHeader(e)}return!1}},{key:"getTHFromTargetElement",value:function(t){return"TABLE"!=t.tagName?"TH"==t.tagName?t:this.getTHFromTargetElement(t.parentNode):null}},{key:"onMouseOver",value:function(t){if(this.checkIfRowHeader(t.target)){var e=this.getTHFromTargetElement(t.target);e&&(this.pressed||this.setupHandlePosition(e))}}},{key:"afterMouseDownTimeout",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.wt.wtOverlays.adjustElementsSize(!0)},n=function(n,i){var r=t.hot.runHooks("beforeRowResize",n,t.newSize,!0);void 0!==r&&(t.newSize=r),t.setManualSize(n,t.newSize),i&&e(),t.hot.runHooks("afterRowResize",n,t.newSize,!0)};if(this.dblclick>=2){var i=this.selectedRows.length;i>1?((0,g.arrayEach)(this.selectedRows,function(t){n(t)}),e()):(0,g.arrayEach)(this.selectedRows,function(t){n(t,!0)})}this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(t){var e=this;(0,h.hasClass)(t.target,"manualRowResizer")&&(this.setupGuidePosition(),this.pressed=this.hot,null==this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout(function(){return e.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick++,this.startY=(0,p.pageY)(t),this.newSize=this.startHeight)}},{key:"onMouseMove",value:function(t){var e=this;this.pressed&&(this.currentHeight=this.startHeight+((0,p.pageY)(t)-this.startY),(0,g.arrayEach)(this.selectedRows,function(t){e.newSize=e.setManualSize(t,e.currentHeight)}),this.refreshHandlePosition(),this.refreshGuidePosition())}},{key:"onMouseUp",value:function(t){var e=this,n=function(){e.hot.forceFullRender=!0,e.hot.view.render(),e.hot.view.wt.wtOverlays.adjustElementsSize(!0)},i=function(t,i){e.hot.runHooks("beforeRowResize",t,e.newSize),i&&n(),e.saveManualRowHeights(),e.hot.runHooks("afterRowResize",t,e.newSize)};if(this.pressed){if(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!=this.startHeight){var r=this.selectedRows.length;r>1?((0,g.arrayEach)(this.selectedRows,function(t){i(t)}),n()):(0,g.arrayEach)(this.selectedRows,function(t){i(t,!0)})}this.setupHandlePosition(this.currentTH)}}},{key:"bindEvents",value:function(){var t=this;this.eventManager.addEventListener(this.hot.rootElement,"mouseover",function(e){return t.onMouseOver(e)}),this.eventManager.addEventListener(this.hot.rootElement,"mousedown",function(e){return t.onMouseDown(e)}),this.eventManager.addEventListener(window,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(window,"mouseup",function(e){return t.onMouseUp(e)})}},{key:"setManualSize",value:function(t,e){return t=this.hot.runHooks("modifyRow",t),this.manualRowHeights[t]=e,e}},{key:"onModifyRowHeight",value:function(t,e){if(this.enabled){var n=this.hot.getPlugin("autoRowSize"),i=n?n.heights[e]:null;e=this.hot.runHooks("modifyRow",e);var r=this.manualRowHeights[e];if(void 0!==r&&(r===i||r>(t||0)))return r}return t}}]),e}(c["default"]);(0,v.registerPlugin)("manualRowResize",y),e["default"]=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(){var t=[];return t.getInfo=function(t,e){for(var n=0,i=this.length;n<i;n++)if(this[n].row<=t&&this[n].row+this[n].rowspan-1>=t&&this[n].col<=e&&this[n].col+this[n].colspan-1>=e)return this[n]},t.setInfo=function(t){for(var e=0,n=this.length;e<n;e++)if(this[e].row===t.row&&this[e].col===t.col)return void(this[e]=t);this.push(t)},t.removeInfo=function(t,e){for(var n=0,i=this.length;n<i;n++)if(this[n].row===t&&this[n].col===e){this.splice(n,1);break}},t}function o(t){if(this.mergedCellInfoCollection=new r,Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.mergedCellInfoCollection.setInfo(t[e])}function a(t,e){var n=this.getSettings().mergeCells;if(n&&!this.selection.isMultiple()){var i=this.mergeCells.mergedCellInfoCollection.getInfo(t[0],t[1]);i&&(t[0]=i.row,t[1]=i.col,t[2]=i.row+i.rowspan-1,t[3]=i.col+i.colspan-1)}}function s(t,e){this.mergeCells&&this.mergeCells.shiftCollection("right",t,e)}function l(t,e){this.mergeCells&&this.mergeCells.shiftCollection("left",t,e)}function u(t,e){this.mergeCells&&this.mergeCells.shiftCollection("down",t,e)}function c(t,e){this.mergeCells&&this.mergeCells.shiftCollection("up",t,e)}e.__esModule=!0;var h=n(8),d=i(h),f=(n(5),n(7)),p=n(11);o.prototype.canMergeRange=function(t){return!t.isSingle()},o.prototype.mergeRange=function(t){if(this.canMergeRange(t)){var e=t.getTopLeftCorner(),n=t.getBottomRightCorner(),i={};i.row=e.row,i.col=e.col,i.rowspan=n.row-e.row+1,i.colspan=n.col-e.col+1,this.mergedCellInfoCollection.setInfo(i)}},o.prototype.mergeOrUnmergeSelection=function(t){var e=this.mergedCellInfoCollection.getInfo(t.from.row,t.from.col);e?this.unmergeSelection(t.from):this.mergeSelection(t)},o.prototype.mergeSelection=function(t){this.mergeRange(t)},o.prototype.unmergeSelection=function(t){var e=this.mergedCellInfoCollection.getInfo(t.row,t.col);this.mergedCellInfoCollection.removeInfo(e.row,e.col)},o.prototype.applySpanProperties=function(t,e,n){var i=this.mergedCellInfoCollection.getInfo(e,n);i?i.row===e&&i.col===n?(t.setAttribute("rowspan",i.rowspan),t.setAttribute("colspan",i.colspan)):(t.removeAttribute("rowspan"),t.removeAttribute("colspan"),t.style.display="none"):(t.removeAttribute("rowspan"),t.removeAttribute("colspan"))},o.prototype.modifyTransform=function(t,e,n){var i=function(t,e){return e.row>=t.row&&e.row<=t.row+t.rowspan-1},r=function(t,e){return e.col>=t.col&&e.col<=t.col+t.colspan-1},o=function(t){return new p.CellCoords(e.to.row+t.row,e.to.col+t.col)},a={row:n.row,col:n.col};if("modifyTransformStart"==t){var s;this.lastDesiredCoords||(this.lastDesiredCoords=new p.CellCoords(null,null));for(var l,u=new p.CellCoords(e.highlight.row,e.highlight.col),c=this.mergedCellInfoCollection.getInfo(u.row,u.col),h=0,d=this.mergedCellInfoCollection.length;h<d;h++){var f=this.mergedCellInfoCollection[h];if(f=new p.CellCoords(f.row+f.rowspan-1,f.col+f.colspan-1),e.includes(f)){l=!0;break}}if(c){var g=new p.CellCoords(c.row,c.col),m=new p.CellCoords(c.row+c.rowspan-1,c.col+c.colspan-1),v=new p.CellRange(g,g,m);v.includes(this.lastDesiredCoords)||(this.lastDesiredCoords=new p.CellCoords(null,null)),a.row=this.lastDesiredCoords.row?this.lastDesiredCoords.row-u.row:a.row,a.col=this.lastDesiredCoords.col?this.lastDesiredCoords.col-u.col:a.col,n.row>0?a.row=c.row+c.rowspan-1-u.row+n.row:n.row<0&&(a.row=u.row-c.row+n.row),n.col>0?a.col=c.col+c.colspan-1-u.col+n.col:n.col<0&&(a.col=u.col-c.col+n.col)}s=new p.CellCoords(e.highlight.row+a.row,e.highlight.col+a.col);var y=this.mergedCellInfoCollection.getInfo(s.row,s.col);y&&(this.lastDesiredCoords=s,a={row:y.row-u.row,col:y.col-u.col})}else if("modifyTransformEnd"==t)for(var b=0,w=this.mergedCellInfoCollection.length;b<w;b++){var x=this.mergedCellInfoCollection[b],_=new p.CellCoords(x.row,x.col),k=new p.CellCoords(x.row+x.rowspan-1,x.col+x.colspan-1),C=new p.CellRange(_,_,k),S=e.getBordersSharedWith(C);if(C.isEqual(e))e.setDirection("NW-SE");else if(S.length>0){var M=e.highlight.isEqual(C.from);S.indexOf("top")>-1?e.to.isSouthEastOf(C.from)&&M?e.setDirection("NW-SE"):e.to.isSouthWestOf(C.from)&&M&&e.setDirection("NE-SW"):S.indexOf("bottom")>-1&&(e.to.isNorthEastOf(C.from)&&M?e.setDirection("SW-NE"):e.to.isNorthWestOf(C.from)&&M&&e.setDirection("SE-NW"))}s=o(a);var T=i(x,s),E=r(x,s);e.includesRange(C)&&(C.includes(s)||T||E)&&(T&&(a.row<0?a.row-=x.rowspan-1:a.row>0&&(a.row+=x.rowspan-1)),E&&(a.col<0?a.col-=x.colspan-1:a.col>0&&(a.col+=x.colspan-1)))}0!==a.row&&(n.row=a.row),0!==a.col&&(n.col=a.col)},o.prototype.shiftCollection=function(t,e,n){var i=[0,0];switch(t){case"right":i[0]+=1;break;case"left":i[0]-=1;break;case"down":i[1]+=1;break;case"up":i[1]-=1}for(var r=0;r<this.mergedCellInfoCollection.length;r++){var o=this.mergedCellInfoCollection[r];"right"===t||"left"===t?e<=o.col&&(o.col+=i[0]):e<=o.row&&(o.row+=i[1])}};var g=function(){var t=this,e=t.getSettings().mergeCells;e&&(t.mergeCells||(t.mergeCells=new o(e)))},m=function(){var t=this;t.mergeCells&&(t.view.wt.wtTable.getCell=function(e){if(t.getSettings().mergeCells){var n=t.mergeCells.mergedCellInfoCollection.getInfo(e.row,e.col);n&&(e=n)}return p.Table.prototype.getCell.call(this,e)})},v=function(){var t=this,e=t.getSettings().mergeCells;if(e)if(t.mergeCells){if(t.mergeCells.mergedCellInfoCollection=new r,Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t.mergeCells.mergedCellInfoCollection.setInfo(e[n])}else t.mergeCells=new o(e);else t.mergeCells&&(t.mergeCells.mergedCellInfoCollection=new r)},y=function(t){if(this.mergeCells){var e=(t.ctrlKey||t.metaKey)&&!t.altKey;e&&77===t.keyCode&&(this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render(),(0,f.stopImmediatePropagation)(t))}},b=function(t){this.getSettings().mergeCells&&(t.items.push({name:"---------"}),t.items.push({key:"mergeCells",name:function(){var t=this.getSelected(),e=this.mergeCells.mergedCellInfoCollection.getInfo(t[0],t[1]);return e?"Unmerge cells":"Merge cells"},callback:function(){this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render()},disabled:function(){return this.selection.selectedHeader.corner}}))},w=function(t,e,n,i,r,o){this.mergeCells&&this.mergeCells.applySpanProperties(t,e,n)},x=function(t){return function(e){var n=this.getSettings().mergeCells;if(n){var i=this.getSelectedRange();if(this.mergeCells.modifyTransform(t,i,e),"modifyTransformEnd"===t){var r=this.countRows(),o=this.countCols();i.from.row<0?i.from.row=0:i.from.row>0&&i.from.row>=r&&(i.from.row=i.from-1),i.from.col<0?i.from.col=0:i.from.col>0&&i.from.col>=o&&(i.from.col=o-1)}}}},_=function(t){this.lastDesiredCoords=null;var e=this.getSettings().mergeCells;if(e){var n=this.getSelectedRange();n.highlight=new p.CellCoords(n.highlight.row,n.highlight.col),n.to=t;var i=!1;do{i=!1;for(var r=0,o=this.mergeCells.mergedCellInfoCollection.length;r<o;r++){var a=this.mergeCells.mergedCellInfoCollection[r],s=new p.CellCoords(a.row,a.col),l=new p.CellCoords(a.row+a.rowspan-1,a.col+a.colspan-1),u=new p.CellRange(s,s,l);n.expandByRange(u)&&(t.row=n.to.row,t.col=n.to.col,i=!0)}}while(i)}},k=function(t,e){if(e&&"area"==e){var n=this.getSettings().mergeCells;if(n)for(var i=this.getSelectedRange(),r=new p.CellRange(i.from,i.from,i.from),o=new p.CellRange(i.to,i.to,i.to),a=0,s=this.mergeCells.mergedCellInfoCollection.length;a<s;a++){var l=this.mergeCells.mergedCellInfoCollection[a],u=new p.CellCoords(l.row,l.col),c=new p.CellCoords(l.row+l.rowspan-1,l.col+l.colspan-1),h=new p.CellRange(u,u,c);r.expandByRange(h)&&(t[0]=r.from.row,t[1]=r.from.col),o.expandByRange(h)&&(t[2]=o.from.row,t[3]=o.from.col)}}},C=function(t,e,n){var i=this.getSettings().mergeCells;if(i){var r=this.mergeCells.mergedCellInfoCollection.getInfo(t,e);!r||r.row==t&&r.col==e||(n.copyable=!1)}},S=function O(t){var e=this.getSettings().mergeCells;if(e)for(var n,i=this.countCols(),r=0;r<i;r++){if(n=this.mergeCells.mergedCellInfoCollection.getInfo(t.startRow,r),n&&n.row<t.startRow)return t.startRow=n.row,O.call(this,t);if(n=this.mergeCells.mergedCellInfoCollection.getInfo(t.endRow,r)){var o=n.row+n.rowspan-1;if(o>t.endRow)return t.endRow=o,O.call(this,t)}}},M=function A(t){var e=this.getSettings().mergeCells;if(e)for(var n,i=this.countRows(),r=0;r<i;r++){if(n=this.mergeCells.mergedCellInfoCollection.getInfo(r,t.startColumn),n&&n.col<t.startColumn)return t.startColumn=n.col,A.call(this,t);if(n=this.mergeCells.mergedCellInfoCollection.getInfo(r,t.endColumn)){var o=n.col+n.colspan-1;if(o>t.endColumn)return t.endColumn=o,A.call(this,t)}}},T=function(t){if(t&&this.mergeCells){var e=this.mergeCells.mergedCellInfoCollection,n=this.getSelectedRange();for(var i in e)if(n.highlight.row==e[i].row&&n.highlight.col==e[i].col&&n.to.row==e[i].row+e[i].rowspan-1&&n.to.col==e[i].col+e[i].colspan-1)return!1}return t},E=d["default"].getSingleton();E.add("beforeInit",g),E.add("afterInit",m),E.add("afterUpdateSettings",v),E.add("beforeKeyDown",y),E.add("modifyTransformStart",x("modifyTransformStart")),E.add("modifyTransformEnd",x("modifyTransformEnd")),E.add("beforeSetRangeEnd",_),E.add("beforeDrawBorders",k),E.add("afterIsMultipleSelection",T),E.add("afterRenderer",w),E.add("afterContextMenuDefaultOptions",b),E.add("afterGetCellMeta",C),E.add("afterViewportRowCalculatorOverride",S),E.add("afterViewportColumnCalculatorOverride",M),E.add("modifyAutofillRange",a),E.add("afterCreateCol",s),E.add("afterRemoveCol",l),E.add("afterCreateRow",u),E.add("afterRemoveRow",c),e["default"]=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function b(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:b(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(8),c=(i(u),n(0)),h=n(25),d=n(12),f=i(d),p=n(4),g=i(p),m=n(5),v=n(11),y=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.dragged=[],n.eventManager=null,n.lastSetCell=null,n}return a(e,t),s(e,[{key:"isEnabled",value:function(){return(0,h.isMobileBrowser)()}},{key:"enablePlugin",value:function(){this.enabled||(this.eventManager||(this.eventManager=new g["default"](this)),this.registerListeners(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this))}},{key:"registerListeners",value:function(){function t(t){if(1===e.dragged.length)return e.dragged.splice(0,e.dragged.length),!0;var n=e.dragged.indexOf(t);return n!=-1&&void(0===n?e.dragged=e.dragged.slice(0,1):1==n&&(e.dragged=e.dragged.slice(-1)))}var e=this;this.eventManager.addEventListener(this.hot.rootElement,"touchstart",function(t){var n=void 0;return(0,c.hasClass)(t.target,"topLeftSelectionHandle-HitArea")?(n=e.hot.getSelectedRange(),e.dragged.push("topLeft"),e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},t.preventDefault(),!1):(0,c.hasClass)(t.target,"bottomRightSelectionHandle-HitArea")?(n=e.hot.getSelectedRange(),e.dragged.push("bottomRight"),e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},t.preventDefault(),!1):void 0}),this.eventManager.addEventListener(this.hot.rootElement,"touchend",function(n){return(0,c.hasClass)(n.target,"topLeftSelectionHandle-HitArea")?(t.call(e,"topLeft"),e.touchStartRange=void 0,n.preventDefault(),!1):(0,c.hasClass)(n.target,"bottomRightSelectionHandle-HitArea")?(t.call(e,"bottomRight"),e.touchStartRange=void 0,n.preventDefault(),!1):void 0}),this.eventManager.addEventListener(this.hot.rootElement,"touchmove",function(t){var n=(0,c.getWindowScrollTop)(),i=(0,c.getWindowScrollLeft)(),r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,h=void 0;0!==e.dragged.length&&(r=document.elementFromPoint(t.touches[0].screenX-i,t.touches[0].screenY-n),r&&r!==e.lastSetCell&&("TD"!=r.nodeName&&"TH"!=r.nodeName||(o=e.hot.getCoords(r),o.col==-1&&(o.col=0),a=e.hot.getSelectedRange(),s=a.getWidth(),l=a.getHeight(),u=a.getDirection(),1==s&&1==l&&e.hot.selection.setRangeEnd(o),h=e.getCurrentRangeCoords(a,o,e.touchStartRange.direction,u,e.dragged[0]),null!==h.start&&e.hot.selection.setRangeStart(h.start),e.hot.selection.setRangeEnd(h.end),e.lastSetCell=r),t.preventDefault()))})}},{key:"getCurrentRangeCoords",value:function(t,e,n,i,r){var o=t.getTopLeftCorner(),a=t.getBottomRightCorner(),s=t.getBottomLeftCorner(),l=t.getTopRightCorner(),u={start:null,end:null};switch(n){case"NE-SW":switch(i){case"NE-SW":case"NW-SE":u="topLeft"==r?{start:new v.CellCoords(e.row,t.highlight.col),end:new v.CellCoords(s.row,e.col)}:{start:new v.CellCoords(t.highlight.row,e.col),end:new v.CellCoords(e.row,o.col)};break;case"SE-NW":"bottomRight"==r&&(u={start:new v.CellCoords(a.row,e.col),end:new v.CellCoords(e.row,o.col)})}break;case"NW-SE":switch(i){case"NE-SW":"topLeft"==r?u={start:e,end:s}:u.end=e;break;case"NW-SE":"topLeft"==r?u={start:e,end:a}:u.end=e;break;case"SE-NW":"topLeft"==r?u={start:e,end:o}:u.end=e;break;case"SW-NE":"topLeft"==r?u={start:e,end:l}:u.end=e}break;case"SW-NE":switch(i){case"NW-SE":u="bottomRight"==r?{start:new v.CellCoords(e.row,o.col),end:new v.CellCoords(s.row,e.col)}:{start:new v.CellCoords(o.row,e.col),end:new v.CellCoords(e.row,a.col)};break;case"SW-NE":u="topLeft"==r?{start:new v.CellCoords(t.highlight.row,e.col),end:new v.CellCoords(e.row,a.col)}:{start:new v.CellCoords(e.row,o.col),end:new v.CellCoords(o.row,e.col)};break;case"SE-NW":"bottomRight"==r?u={start:new v.CellCoords(e.row,l.col),end:new v.CellCoords(o.row,e.col)}:"topLeft"==r&&(u={start:s,end:e})}break;case"SE-NW":switch(i){case"NW-SE":case"NE-SW":case"SW-NE":"topLeft"==r&&(u.end=e);break;case"SE-NW":"topLeft"==r?u.end=e:u={start:e,end:o}}}return u}},{key:"isDragged",value:function(){return this.dragged.length>0}}]),e}(f["default"]);(0,m.registerPlugin)("multipleSelectionHandles",y),e["default"]=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(134),s=i(a),l=n(69),u=i(l),c=n(1),h=n(257),d=function(){function t(e){r(this,t),this.observedData=null,this.observer=null,this.paused=!1,this.setObservedData(e)}return o(t,[{key:"setObservedData",value:function(t){var e=this;this.observer&&s["default"].unobserve(this.observedData,this.observer),this.observedData=t,this.observer=s["default"].observe(this.observedData,function(t){return e.onChange(t)})}},{key:"isPaused",value:function(){return this.paused}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}},{key:"onChange",value:function(t){this.runLocalHooks("change",(0,h.cleanPatches)(t))}},{key:"destroy",value:function(){s["default"].unobserve(this.observedData,this.observer),this.observedData=null,this.observer=null}}]),t}();(0,c.mixin)(d,u["default"]),e["default"]=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function v(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:v(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(12),c=i(u),h=n(134),d=(i(h),n(255)),f=i(d),p=n(2),g=n(5),m=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.observer=null,n}return a(e,t),s(e,[{key:"isEnabled",value:function(){return this.hot.getSettings().observeChanges}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.observer||(this.observer=new f["default"](this.hot.getSourceData()),this._exposePublicApi()),this.observer.addLocalHook("change",function(e){return t.onDataChange(e)}),this.addHook("afterCreateRow",function(){return t.onAfterTableAlter()}),this.addHook("afterRemoveRow",function(){return t.onAfterTableAlter()}),this.addHook("afterCreateCol",function(){return t.onAfterTableAlter()}),this.addHook("afterRemoveCol",function(){return t.onAfterTableAlter()}),this.addHook("afterChange",function(e,n){return t.onAfterTableAlter(n)}),this.addHook("afterLoadData",function(e){return t.onAfterLoadData(e)}),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.observer&&(this.observer.destroy(),this.observer=null,this._deletePublicApi()),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"onDataChange",value:function(t){var e=this;if(!this.observer.isPaused()){var n=this.pluginName+".change",i={add:function(t){isNaN(t.col)?e.hot.runHooks("afterCreateRow",t.row,1,n):e.hot.runHooks("afterCreateCol",t.col,1,n)},remove:function(t){isNaN(t.col)?e.hot.runHooks("afterRemoveRow",t.row,1,n):e.hot.runHooks("afterRemoveCol",t.col,1,n)},replace:function(t){e.hot.runHooks("afterChange",[t.row,t.col,null,t.value],n)}};(0,p.arrayEach)(t,function(t){i[t.op]&&i[t.op](t)}),this.hot.render()}this.hot.runHooks("afterChangesObserved")}},{key:"onAfterTableAlter",value:function(t){var e=this;"loadData"!==t&&(this.observer.pause(),this.hot.addHookOnce("afterChangesObserved",function(){return e.observer.resume()}))}},{key:"onAfterLoadData",value:function(t){t||this.observer.setObservedData(this.hot.getSourceData())}},{key:"destroy",value:function(){this.observer&&(this.observer.destroy(),this._deletePublicApi()),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"_exposePublicApi",value:function(){var t=this,e=this.hot;e.pauseObservingChanges=function(){return t.observer.pause()},e.resumeObservingChanges=function(){return t.observer.resume()},e.isPausedObservingChanges=function(){return t.observer.isPaused()}}},{key:"_deletePublicApi",value:function(){var t=this.hot;delete t.pauseObservingChanges,delete t.resumeObservingChanges,delete t.isPausedObservingChanges}}]),e}(c["default"]);e["default"]=m,(0,g.registerPlugin)("observeChanges",m)},function(t,e,n){"use strict";function i(t){var e=[];return t=(0,a.arrayFilter)(t,function(t){return!/[\/]length/gi.test(t.path)&&!!r(t.path)}),t=(0,a.arrayMap)(t,function(t){var e=r(t.path);return t.row=e.row,t.col=e.col,t}),t=(0,a.arrayFilter)(t,function(t){if(["add","remove"].indexOf(t.op)!==-1&&!isNaN(t.col)){if(e.indexOf(t.col)!==-1)return!1;e.push(t.col)}return!0}),e.length=0,t}function r(t){var e=t.match(/^\/(\d+)\/?(.*)?$/);if(!e)return null;var n=o(e,3),i=n[1],r=n[2];return{row:parseInt(i,10),col:/^\d*$/.test(r)?parseInt(r,10):r}}e.__esModule=!0;var o=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.cleanPatches=i,e.parsePath=r;var a=n(2)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e,n=function(){window.localStorage[t+"__persistentStateKeys"]=JSON.stringify(e)},i=function(){var n=window.localStorage[t+"__persistentStateKeys"],i="string"==typeof n?JSON.parse(n):void 0;e=i?i:[]},r=function(){e=[],n()};i(),this.saveValue=function(i,r){window.localStorage[t+"_"+i]=JSON.stringify(r),e.indexOf(i)==-1&&(e.push(i),n())},this.loadValue=function(e,n){e="undefined"==typeof e?n:e;var i=window.localStorage[t+"_"+e];return"undefined"==typeof i?void 0:JSON.parse(i)},this.reset=function(e){window.localStorage.removeItem(t+"_"+e)},this.resetAll=function(){for(var n=0;n<e.length;n++)window.localStorage.removeItem(t+"_"+e[n]);r()}}function o(){function t(){var t=this;for(var e in i)(0,l.hasOwnProperty)(i,e)&&t.addHook(e,i[e])}function e(){var t=this;for(var e in i)(0,l.hasOwnProperty)(i,e)&&t.removeHook(e,i[e])}var n=this;this.init=function(){var i=this,o=i.getSettings().persistentState;return n.enabled=!!o,n.enabled?(i.storage||(i.storage=new r(i.rootElement.id)),i.resetState=n.resetValue,void t.call(i)):void e.call(i)},this.saveValue=function(t,e){var n=this;n.storage.saveValue(t,e)},this.loadValue=function(t,e){var n=this;e.value=n.storage.loadValue(t)},this.resetValue=function(t){var e=this;"undefined"==typeof t?e.storage.resetAll():e.storage.reset(t)};var i={persistentStateSave:n.saveValue,persistentStateLoad:n.loadValue,persistentStateReset:n.resetValue};for(var o in i)(0,l.hasOwnProperty)(i,o)&&s["default"].getSingleton().register(o)}e.__esModule=!0;var a=n(8),s=i(a),l=(n(5),n(1)),u=new o;s["default"].getSingleton().add("beforeInit",u.init),s["default"].getSingleton().add("afterUpdateSettings",u.init),e["default"]=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){this.query=function(e,n,i){var o=t.countRows(),a=t.countCols(),s=[];n||(n=r.global.getDefaultCallback()),i||(i=r.global.getDefaultQueryMethod());for(var l=0;l<o;l++)for(var u=0;u<a;u++){var c=t.getDataAtCell(l,u),h=t.getCellMeta(l,u),d=h.search.callback||n,f=h.search.queryMethod||i,p=f(e,c);if(p){var g={row:l,col:u,data:c};s.push(g)}d&&d(t,l,u,c,p)}return s}}function o(t,e,n,i,o,a,l){var u=null!==l.search&&"object"==s(l.search)&&l.search.searchResultClass||r.global.getDefaultSearchResultClass();l.isSearchResult?(0,c.addClass)(e,u):(0,c.removeClass)(e,u)}function a(){var t=this,e=!!t.getSettings().search;e?t.search=new r(t):delete t.search}e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=n(8),u=i(l),c=n(0),h=n(9);r.DEFAULT_CALLBACK=function(t,e,n,i,r){t.getCellMeta(e,n).isSearchResult=r},r.DEFAULT_QUERY_METHOD=function(t,e){return!("undefined"==typeof t||null==t||!t.toLowerCase||0===t.length)&&("undefined"!=typeof e&&null!=e&&e.toString().toLowerCase().indexOf(t.toLowerCase())!=-1)},r.DEFAULT_SEARCH_RESULT_CLASS="htSearchResult",r.global=function(){var t=r.DEFAULT_CALLBACK,e=r.DEFAULT_QUERY_METHOD,n=r.DEFAULT_SEARCH_RESULT_CLASS;return{getDefaultCallback:function(){return t},setDefaultCallback:function(e){t=e},getDefaultQueryMethod:function(){return e},setDefaultQueryMethod:function(t){e=t},getDefaultSearchResultClass:function(){return n},setDefaultSearchResultClass:function(t){n=t}}}();var d=(0,h.getRenderer)("base");(0,h.registerRenderer)("base",function(t,e,n,i,r,a,s){d.apply(this,arguments),o.apply(this,arguments)}),u["default"].getSingleton().add("afterInit",a),u["default"].getSingleton().add("afterUpdateSettings",a),e["default"]=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){
var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function m(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:m(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=n(0),c=n(2),h=n(12),d=i(h),f=n(5),p=n(34),g=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.scrollbars=[],n.clones=[],n.lockedCollection=!1,n.freezeOverlays=!1,n}return a(e,t),s(e,[{key:"isEnabled",value:function(){return(0,p.isTouchSupported)()}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterRender",function(){return t.onAfterRender()}),this.registerEvents(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.lockedCollection=!1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var t=this;this.addHook("beforeTouchScroll",function(){return t.onBeforeTouchScroll()}),this.addHook("afterMomentumScroll",function(){return t.onAfterMomentumScroll()})}},{key:"onAfterRender",value:function(){if(!this.lockedCollection){var t=this.hot.view.wt.wtOverlays,e=t.topOverlay,n=t.bottomOverlay,i=t.leftOverlay,r=t.topLeftCornerOverlay,o=t.bottomLeftCornerOverlay;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(e),n.clone&&this.scrollbars.push(n),this.scrollbars.push(i),r&&this.scrollbars.push(r),o&&o.clone&&this.scrollbars.push(o),this.clones.length=0,e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),i.needFullRender&&this.clones.push(i.clone.wtTable.holder.parentNode),r&&this.clones.push(r.clone.wtTable.holder.parentNode),o&&o.clone&&this.clones.push(o.clone.wtTable.holder.parentNode)}}},{key:"onBeforeTouchScroll",value:function(){this.freezeOverlays=!0,(0,c.arrayEach)(this.clones,function(t){(0,u.addClass)(t,"hide-tween")})}},{key:"onAfterMomentumScroll",value:function(){var t=this;this.freezeOverlays=!1,(0,c.arrayEach)(this.clones,function(t){(0,u.removeClass)(t,"hide-tween"),(0,u.addClass)(t,"show-tween")}),setTimeout(function(){(0,c.arrayEach)(t.clones,function(t){(0,u.removeClass)(t,"show-tween")})},400),(0,c.arrayEach)(this.scrollbars,function(t){t.refresh(),t.resetFixedPosition()}),this.hot.view.wt.wtOverlays.syncScrollWithMaster()}}]),e}(d["default"]);(0,f.registerPlugin)("touchScroll",g),e["default"]=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=this;this.instance=t,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,t.addHook("afterChange",function(t,n){t&&"UndoRedo.undo"!==n&&"UndoRedo.redo"!==n&&e.done(new r.ChangeAction(t))}),t.addHook("afterCreateRow",function(t,n,i){if("UndoRedo.undo"!==i&&"UndoRedo.undo"!==i&&"auto"!==i){var o=new r.CreateRowAction(t,n);e.done(o)}}),t.addHook("beforeRemoveRow",function(t,n,i,o){if("UndoRedo.undo"!==o&&"UndoRedo.redo"!==o&&"auto"!==o){var a=e.instance.getSourceDataArray();t=(a.length+t)%a.length;var s=(0,p.deepClone)(a.slice(t,t+n));e.done(new r.RemoveRowAction(t,s))}}),t.addHook("afterCreateCol",function(t,n,i){"UndoRedo.undo"!==i&&"UndoRedo.redo"!==i&&"auto"!==i&&e.done(new r.CreateColumnAction(t,n))}),t.addHook("beforeRemoveCol",function(n,i,o,a){if("UndoRedo.undo"!==a&&"UndoRedo.redo"!==a&&"auto"!==a){var s=e.instance.getSourceDataArray();n=(e.instance.countCols()+n)%e.instance.countCols();var l=[],u=[],c=[];(0,f.rangeEach)(s.length-1,function(e){var r=[],o=s[e];(0,f.rangeEach)(n,n+(i-1),function(e){r.push(o[t.runHooks("modifyCol",e)])}),l.push(r)}),(0,f.rangeEach)(i-1,function(e){c.push(t.runHooks("modifyCol",n+e))}),Array.isArray(t.getSettings().colHeaders)&&(0,f.rangeEach)(i-1,function(e){u.push(t.getSettings().colHeaders[t.runHooks("modifyCol",n+e)]||null)});var h=e.instance.getPlugin("manualColumnMove"),d=h.isEnabled()?h.columnsMapper.__arrayMap:[],p=new r.RemoveColumnAction(n,c,l,u,d);e.done(p)}}),t.addHook("beforeCellAlignment",function(t,n,i,o){var a=new r.CellAlignmentAction(t,n,i,o);e.done(a)}),t.addHook("beforeFilter",function(t){e.done(new r.FiltersAction(t))}),t.addHook("beforeRowMove",function(t,n){t!==!1&&e.done(new r.RowMoveAction(t,n))})}function o(){var t=this,e="undefined"==typeof t.getSettings().undo||t.getSettings().undo;e?t.undoRedo||(t.undoRedo=new r(t),l(t),t.addHook("beforeKeyDown",a),t.addHook("afterChange",s)):t.undoRedo&&(delete t.undoRedo,u(t),t.removeHook("beforeKeyDown",a),t.removeHook("afterChange",s))}function a(t){var e=this,n=(t.ctrlKey||t.metaKey)&&!t.altKey;n&&(89===t.keyCode||t.shiftKey&&90===t.keyCode?(e.undoRedo.redo(),(0,g.stopImmediatePropagation)(t)):90===t.keyCode&&(e.undoRedo.undo(),(0,g.stopImmediatePropagation)(t)))}function s(t,e){var n=this;if("loadData"===e)return n.undoRedo.clear()}function l(t){t.undo=function(){return t.undoRedo.undo()},t.redo=function(){return t.undoRedo.redo()},t.isUndoAvailable=function(){return t.undoRedo.isUndoAvailable()},t.isRedoAvailable=function(){return t.undoRedo.isRedoAvailable()},t.clearUndo=function(){return t.undoRedo.clear()}}function u(t){delete t.undo,delete t.redo,delete t.isUndoAvailable,delete t.isRedoAvailable,delete t.clearUndo}var c=n(8),h=i(c),d=n(2),f=n(6),p=n(1),g=n(7),m=n(11);r.prototype.done=function(t){this.ignoreNewActions||(this.doneActions.push(t),this.undoneActions.length=0)},r.prototype.undo=function(){if(this.isUndoAvailable()){var t=this.doneActions.pop(),e=(0,p.deepClone)(t),n=this.instance,i=n.runHooks("beforeUndo",e);if(i===!1)return;this.ignoreNewActions=!0;var r=this;t.undo(this.instance,function(){r.ignoreNewActions=!1,r.undoneActions.push(t)}),n.runHooks("afterUndo",e)}},r.prototype.redo=function(){if(this.isRedoAvailable()){var t=this.undoneActions.pop(),e=(0,p.deepClone)(t),n=this.instance,i=n.runHooks("beforeRedo",e);if(i===!1)return;this.ignoreNewActions=!0;var r=this;t.redo(this.instance,function(){r.ignoreNewActions=!1,r.doneActions.push(t)}),n.runHooks("afterRedo",e)}},r.prototype.isUndoAvailable=function(){return this.doneActions.length>0},r.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},r.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},r.Action=function(){},r.Action.prototype.undo=function(){},r.Action.prototype.redo=function(){},r.ChangeAction=function(t){this.changes=t,this.actionType="change"},(0,p.inherit)(r.ChangeAction,r.Action),r.ChangeAction.prototype.undo=function(t,e){for(var n=(0,p.deepClone)(this.changes),i=t.countEmptyRows(!0),r=t.countEmptyCols(!0),o=0,a=n.length;o<a;o++)n[o].splice(3,1);t.addHookOnce("afterChange",e),t.setDataAtRowProp(n,null,null,"UndoRedo.undo");for(var s=0,l=n.length;s<l;s++)t.getSettings().minSpareRows&&n[s][0]+1+t.getSettings().minSpareRows===t.countRows()&&i==t.getSettings().minSpareRows&&(t.alter("remove_row",parseInt(n[s][0]+1,10),t.getSettings().minSpareRows),t.undoRedo.doneActions.pop()),t.getSettings().minSpareCols&&n[s][1]+1+t.getSettings().minSpareCols===t.countCols()&&r==t.getSettings().minSpareCols&&(t.alter("remove_col",parseInt(n[s][1]+1,10),t.getSettings().minSpareCols),t.undoRedo.doneActions.pop())},r.ChangeAction.prototype.redo=function(t,e){for(var n=(0,p.deepClone)(this.changes),i=0,r=n.length;i<r;i++)n[i].splice(2,1);t.addHookOnce("afterChange",e),t.setDataAtRowProp(n,null,null,"UndoRedo.redo")},r.CreateRowAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_row"},(0,p.inherit)(r.CreateRowAction,r.Action),r.CreateRowAction.prototype.undo=function(t,e){var n=t.countRows(),i=t.getSettings().minSpareRows;this.index>=n&&this.index-i<n&&(this.index-=i),t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},r.CreateRowAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateRow",e),t.alter("insert_row",this.index,this.amount,"UndoRedo.redo")},r.RemoveRowAction=function(t,e){this.index=t,this.data=e,this.actionType="remove_row"},(0,p.inherit)(r.RemoveRowAction,r.Action),r.RemoveRowAction.prototype.undo=function(t,e){t.alter("insert_row",this.index,this.data.length,"UndoRedo.undo"),t.addHookOnce("afterRender",e),t.populateFromArray(this.index,0,this.data,void 0,void 0,"UndoRedo.undo")},r.RemoveRowAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},r.CreateColumnAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_col"},(0,p.inherit)(r.CreateColumnAction,r.Action),r.CreateColumnAction.prototype.undo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},r.CreateColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateCol",e),t.alter("insert_col",this.index,this.amount,"UndoRedo.redo")},r.RemoveColumnAction=function(t,e,n,i,r){this.index=t,this.indexes=e,this.data=n,this.amount=this.data[0].length,this.headers=i,this.columnPositions=r.slice(0),this.actionType="remove_col"},(0,p.inherit)(r.RemoveColumnAction,r.Action),r.RemoveColumnAction.prototype.undo=function(t,e){var n=this,i=void 0,r=this.indexes.slice(0).sort(),o=function(t,e,i){return i[n.indexes.indexOf(r[e])]},a=[];(0,f.rangeEach)(this.data.length-1,function(t){a[t]=(0,d.arrayMap)(n.data[t],o)});var s=[];s=(0,d.arrayMap)(this.headers,o);var l=[];t.runHooks("beforeCreateCol",this.indexes[0],this.indexes[this.indexes.length-1],"UndoRedo.undo"),(0,f.rangeEach)(this.data.length-1,function(e){i=t.getSourceDataAtRow(e),(0,f.rangeEach)(r.length-1,function(t){i.splice(r[t],0,a[e][t]),l.push([e,r[t],null,a[e][t]])})}),t.getPlugin("formulas")&&t.getPlugin("formulas").onAfterSetDataAtCell(l),"undefined"!=typeof this.headers&&(0,f.rangeEach)(s.length-1,function(e){t.getSettings().colHeaders.splice(r[e],0,s[e])}),t.getPlugin("manualColumnMove")&&(t.getPlugin("manualColumnMove").columnsMapper.__arrayMap=this.columnPositions),t.addHookOnce("afterRender",e),t.runHooks("afterCreateCol",this.indexes[0],this.indexes[this.indexes.length-1],"UndoRedo.undo"),t.getPlugin("formulas")&&t.getPlugin("formulas").recalculateFull(),t.render()},r.RemoveColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},r.CellAlignmentAction=function(t,e,n,i){this.stateBefore=t,this.range=e,this.type=n,this.alignment=i},r.CellAlignmentAction.prototype.undo=function(t,e){if(t.getPlugin("contextMenu").isEnabled()){for(var n=this.range.from.row;n<=this.range.to.row;n++)for(var i=this.range.from.col;i<=this.range.to.col;i++)t.setCellMeta(n,i,"className",this.stateBefore[n][i]||" htLeft");t.addHookOnce("afterRender",e),t.render()}},r.CellAlignmentAction.prototype.redo=function(t,e){t.getPlugin("contextMenu").isEnabled()&&(t.selectCell(this.range.from.row,this.range.from.col,this.range.to.row,this.range.to.col),t.getPlugin("contextMenu").executeCommand("alignment:"+this.alignment.replace("ht","").toLowerCase()),t.addHookOnce("afterRender",e),t.render())},r.FiltersAction=function(t){this.conditionsStack=t,this.actionType="filter"},(0,p.inherit)(r.FiltersAction,r.Action),r.FiltersAction.prototype.undo=function(t,e){var n=t.getPlugin("filters");t.addHookOnce("afterRender",e),n.conditionCollection.importAllConditions(this.conditionsStack.slice(0,this.conditionsStack.length-1)),n.filter()},r.FiltersAction.prototype.redo=function(t,e){var n=t.getPlugin("filters");t.addHookOnce("afterRender",e),n.conditionCollection.importAllConditions(this.conditionsStack),n.filter()},r.RowMoveAction=function(t,e){this.rows=t.slice(),this.target=e},(0,p.inherit)(r.RowMoveAction,r.Action),r.RowMoveAction.prototype.undo=function(t,e){var n=t.getPlugin("manualRowMove");t.addHookOnce("afterRender",e);for(var i=this.rows[0]<this.target?-1*this.rows.length:0,r=this.rows[0]>this.target?this.rows[0]+this.rows.length:this.rows[0],o=[],a=this.rows.length+i,s=i;s<a;s++)o.push(this.target+s);n.moveRows(o.slice(),r),t.render(),t.selection.setRangeStartOnly(new m.CellCoords(this.rows[0],0)),t.selection.setRangeEnd(new m.CellCoords(this.rows[this.rows.length-1],t.countCols()-1))},r.RowMoveAction.prototype.redo=function(t,e){var n=t.getPlugin("manualRowMove");t.addHookOnce("afterRender",e),n.moveRows(this.rows.slice(),this.target),t.render();var i=this.rows[0]<this.target?this.target-this.rows.length:this.target;t.selection.setRangeStartOnly(new m.CellCoords(i,0)),t.selection.setRangeEnd(new m.CellCoords(i+this.rows.length-1,t.countCols()-1))};var v=h["default"].getSingleton();v.add("afterInit",o),v.add("afterUpdateSettings",o),v.register("beforeUndo"),v.register("afterUndo"),v.register("beforeRedo"),v.register("afterRedo")},function(t,e,n){"use strict";function i(t,e,n,i,o,a,s){s.className&&(e.className?e.className=e.className+" "+s.className:e.className=s.className),s.readOnly&&(0,r.addClass)(e,s.readOnlyCellClassName),s.valid===!1&&s.invalidCellClassName?(0,r.addClass)(e,s.invalidCellClassName):(0,r.removeClass)(e,s.invalidCellClassName),s.wordWrap===!1&&s.noWordWrapClassName&&(0,r.addClass)(e,s.noWordWrapClassName),!a&&s.placeholder&&(0,r.addClass)(e,s.placeholderCellClassName)}e.__esModule=!0;var r=n(0);e["default"]=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n,i,r,a,d){var f=(c.cloneNode(!0),h.cloneNode(!0));if(d.allowHtml?(0,u.getRenderer)("html").apply(this,arguments):(0,u.getRenderer)("text").apply(this,arguments),e.appendChild(f),(0,o.addClass)(e,"htAutocomplete"),e.firstChild||e.appendChild(document.createTextNode(String.fromCharCode(160))),!t.acArrowListener){var p=new s["default"](t);t.acArrowListener=function(r){(0,o.hasClass)(r.target,"htAutocompleteArrow")&&t.view.wt.getSetting("onCellDblClick",null,new l.CellCoords(n,i),e)},p.addEventListener(t.rootElement,"mousedown",t.acArrowListener),t.addHookOnce("afterDestroy",function(){p.destroy()})}}e.__esModule=!0;var o=n(0),a=n(4),s=i(a),l=n(11),u=n(9),c=document.createElement("DIV");c.className="htAutocompleteWrapper";var h=document.createElement("DIV");h.className="htAutocompleteArrow",h.appendChild(document.createTextNode(String.fromCharCode(9660)));e["default"]=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n,i,r,l,u){function c(t){var e="SPACE|ENTER",n="DELETE|BACKSPACE",i=(0,v.partial)(m.isKey,t.keyCode);i(e+"|"+n)&&!(0,y.isImmediatePropagationStopped)(t)&&p(function(){(0,y.stopImmediatePropagation)(t),t.preventDefault()}),i(e)&&h(),i(n)&&h(!0)}function h(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.getSelectedRange();if(n){for(var i=n.getTopLeftCorner(),r=n.getBottomRightCorner(),o=[],a=i.row;a<=r.row;a+=1)for(var s=i.col;s<=r.col;s+=1){var l=t.getCellMeta(a,s);if("checkbox"!==l.type)return;if(l.readOnly!==!0){"undefined"==typeof l.checkedTemplate&&(l.checkedTemplate=!0),"undefined"==typeof l.uncheckedTemplate&&(l.uncheckedTemplate=!1);var u=t.getDataAtCell(a,s);e===!1?u===l.checkedTemplate?o.push([a,s,l.uncheckedTemplate]):[l.uncheckedTemplate,null,void 0].indexOf(u)!==-1&&o.push([a,s,l.checkedTemplate]):o.push([a,s,l.uncheckedTemplate])}}o.length>0&&t.setDataAtCell(o)}}function p(e){var n=t.getSelectedRange();if(n)for(var i=n.getTopLeftCorner(),r=n.getBottomRightCorner(),o=i.row;o<=r.row;o++)for(var a=i.col;a<=r.col;a++){var s=t.getCellMeta(o,a);if("checkbox"!==s.type)return;var l=t.getCell(o,a);if(null==l)e(o,a,s);else{var u=l.querySelectorAll("input[type=checkbox]");u.length>0&&!s.readOnly&&e(u)}}}(0,b.getRenderer)("base").apply(this,arguments);var g=(o(t),a()),x=u.label,k=!1;if("undefined"==typeof u.checkedTemplate&&(u.checkedTemplate=!0),"undefined"==typeof u.uncheckedTemplate&&(u.uncheckedTemplate=!1),(0,d.empty)(e),l===u.checkedTemplate||(0,f.equalsIgnoreCase)(l,u.checkedTemplate)?g.checked=!0:l===u.uncheckedTemplate||(0,f.equalsIgnoreCase)(l,u.uncheckedTemplate)?g.checked=!1:null===l?(0,d.addClass)(g,"noValue"):(g.style.display="none",(0,d.addClass)(g,_),k=!0),g.setAttribute("data-row",n),g.setAttribute("data-col",i),!k&&x){var C="";x.value?C="function"==typeof x.value?x.value.call(this,n,i,r,l):x.value:x.property&&(C=t.getDataAtRowProp(n,x.property));var S=s(C);"before"===x.position?S.appendChild(g):S.insertBefore(g,S.firstChild),g=S}e.appendChild(g),k&&e.appendChild(document.createTextNode("#bad-value#")),w.has(t)||(w.set(t,!0),t.addHook("beforeKeyDown",c))}function o(t){var e=x.get(t);return e||(e=new g["default"](t),e.addEventListener(t.rootElement,"click",function(e){return u(e,t)}),e.addEventListener(t.rootElement,"mouseup",function(e){return l(e,t)}),e.addEventListener(t.rootElement,"change",function(e){return c(e,t)}),x.set(t,e)),e}function a(){var t=document.createElement("input");return t.className="htCheckboxRendererInput",t.type="checkbox",t.setAttribute("autocomplete","off"),t.setAttribute("tabindex","-1"),t.cloneNode(!1)}function s(t){var e=document.createElement("label");return e.className="htCheckboxRendererLabel",e.appendChild(document.createTextNode(t)),e.cloneNode(!0)}function l(t,e){h(t.target)&&setTimeout(e.listen,10)}function u(t,e){if(!h(t.target))return!1;var n=parseInt(t.target.getAttribute("data-row"),10),i=parseInt(t.target.getAttribute("data-col"),10),r=e.getCellMeta(n,i);r.readOnly&&t.preventDefault()}function c(t,e){if(!h(t.target))return!1;var n=parseInt(t.target.getAttribute("data-row"),10),i=parseInt(t.target.getAttribute("data-col"),10),r=e.getCellMeta(n,i);if(!r.readOnly){var o=null;o=t.target.checked?void 0===r.uncheckedTemplate||r.checkedTemplate:void 0!==r.uncheckedTemplate&&r.uncheckedTemplate,e.setDataAtCell(n,i,o)}}function h(t){return"INPUT"===t.tagName&&"checkbox"===t.getAttribute("type")}e.__esModule=!0;var d=n(0),f=n(27),p=n(4),g=i(p),m=n(16),v=n(35),y=n(7),b=n(9),w=new WeakMap,x=new WeakMap,_="htBadValue";e["default"]=r},function(t,e,n){"use strict";function i(t,e,n,i,a,s,l){(0,o.getRenderer)("base").apply(this,arguments),null!==s&&void 0!==s||(s=""),(0,r.fastInnerHTML)(e,s)}e.__esModule=!0;var r=n(0),o=n(9);e["default"]=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n,i,r,o,u){if((0,l.isNumeric)(o)){"undefined"!=typeof u.language&&a["default"].culture(u.language),o=(0,a["default"])(o).format(u.format||"0");var c=u.className||"",h=c.length?c.split(" "):[];h.indexOf("htLeft")<0&&h.indexOf("htCenter")<0&&h.indexOf("htRight")<0&&h.indexOf("htJustify")<0&&h.push("htRight"),h.indexOf("htNumeric")<0&&h.push("htNumeric"),u.className=h.join(" ")}(0,s.getRenderer)("text")(t,e,n,i,r,o,u)}e.__esModule=!0;var o=n(87),a=i(o),s=n(9),l=n(6);e["default"]=r},function(t,e,n){"use strict";function i(t,e,n,i,s,l,u){(0,o.getRenderer)("text").apply(this,arguments),l=e.innerHTML;var c=u.hashLength||l.length,h=u.hashSymbol||"*",d="";(0,a.rangeEach)(c-1,function(){d+=h}),(0,r.fastInnerHTML)(e,d)}e.__esModule=!0;var r=n(0),o=n(9),a=n(6);e["default"]=i},function(t,e,n){"use strict";function i(t,e,n,i,s,l,u){(0,a.getRenderer)("base").apply(this,arguments),!l&&u.placeholder&&(l=u.placeholder);var c=(0,o.stringify)(l);if(t.getSettings().trimWhitespace||(c=c.replace(/ /g,String.fromCharCode(160))),u.rendererTemplate){(0,r.empty)(e);var h=document.createElement("TEMPLATE");h.setAttribute("bind","{{}}"),h.innerHTML=u.rendererTemplate,HTMLTemplateElement.decorate(h),h.model=t.getSourceDataAtRow(n),e.appendChild(h)}else(0,r.fastInnerText)(e,c)}e.__esModule=!0;var r=n(0),o=n(20),a=n(9);e["default"]=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=this,n=this;this.eventManager=new u["default"](t),this.instance=t,this.settings=t.getSettings(),this.selectionMouseDown=!1;var i=t.rootElement.getAttribute("style");i&&t.rootElement.setAttribute("data-originalstyle",i),(0,a.addClass)(t.rootElement,"handsontable");var r=document.createElement("TABLE");(0,a.addClass)(r,"htCore"),t.getSettings().tableClassName&&(0,a.addClass)(r,t.getSettings().tableClassName),this.THEAD=document.createElement("THEAD"),r.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),r.appendChild(this.TBODY),t.table=r,t.container.insertBefore(r,t.container.firstChild),this.eventManager.addEventListener(t.rootElement,"mousedown",function(t){this.selectionMouseDown=!0,n.isTextSelectionAllowed(t.target)||(l(),t.preventDefault(),window.focus())}),this.eventManager.addEventListener(t.rootElement,"mouseup",function(t){this.selectionMouseDown=!1}),this.eventManager.addEventListener(t.rootElement,"mousemove",function(t){this.selectionMouseDown&&!n.isTextSelectionAllowed(t.target)&&(l(),t.preventDefault())}),this.eventManager.addEventListener(document.documentElement,"keyup",function(e){t.selection.isInProgress()&&!e.shiftKey&&t.selection.finish()});var o;this.isMouseDown=function(){return o},this.eventManager.addEventListener(document.documentElement,"mouseup",function(e){t.selection.isInProgress()&&1===e.which&&t.selection.finish(),o=!1,!(0,a.isOutsideInput)(document.activeElement)&&t.selection.isSelected()||t.unlisten()}),this.eventManager.addEventListener(document.documentElement,"mousedown",function(e){var i=e.target,r=e.target,s=e.x||e.clientX,l=e.y||e.clientY;if(!o&&t.rootElement){if(r===t.view.wt.wtTable.holder){var u=(0,a.getScrollbarWidth)();if(document.elementFromPoint(s+u,l)!==t.view.wt.wtTable.holder||document.elementFromPoint(s,l+u)!==t.view.wt.wtTable.holder)return}else for(;r!==document.documentElement;){if(null===r){if(e.isTargetWebComponent)break;return}if(r===t.rootElement)return;r=r.parentNode}var c="function"==typeof n.settings.outsideClickDeselects?n.settings.outsideClickDeselects(i):n.settings.outsideClickDeselects;c?t.deselectCell():t.destroyEditor()}}),this.eventManager.addEventListener(r,"selectstart",function(t){n.settings.fragmentSelection||(0,a.isInput)(t.target)||t.preventDefault()});var l=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},f=[new h.Selection({className:"current",border:{width:2,color:"#5292F7",cornerVisible:function(){return n.settings.fillHandle&&!n.isCellEdited()&&!t.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!n.isCellEdited()&&!t.selection.isMultiple()}}}),new h.Selection({className:"area",border:{width:1,color:"#89AFF9",cornerVisible:function(){return n.settings.fillHandle&&!n.isCellEdited()&&t.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!n.isCellEdited()&&t.selection.isMultiple()}}}),new h.Selection({className:"highlight",highlightHeaderClassName:n.settings.currentHeaderClassName,highlightRowClassName:n.settings.currentRowClassName,highlightColumnClassName:n.settings.currentColClassName}),new h.Selection({className:"fill",border:{width:1,color:"red"}})];f.current=f[0],f.area=f[1],f.highlight=f[2],f.fill=f[3];var p={debug:function(){return n.settings.debug},externalRowCalculator:this.instance.getPlugin("autoRowSize")&&this.instance.getPlugin("autoRowSize").isEnabled(),table:r,preventOverflow:function(){return e.settings.preventOverflow},stretchH:function(){return n.settings.stretchH},data:t.getDataAtCell,totalRows:function(){return t.countRows()},totalColumns:function(){return t.countCols()},fixedColumnsLeft:function(){return n.settings.fixedColumnsLeft},fixedRowsTop:function(){return n.settings.fixedRowsTop},fixedRowsBottom:function(){return n.settings.fixedRowsBottom},minSpareRows:function(){return n.settings.minSpareRows},renderAllRows:n.settings.renderAllRows,rowHeaders:function(){var e=[];return t.hasRowHeaders()&&e.push(function(t,e){n.appendRowHeader(t,e)}),t.runHooks("afterGetRowHeaderRenderers",e),e},columnHeaders:function(){var e=[];return t.hasColHeaders()&&e.push(function(t,e){n.appendColHeader(t,e)}),t.runHooks("afterGetColumnHeaderRenderers",e),e},columnWidth:t.getColWidth,rowHeight:t.getRowHeight,cellRenderer:function(t,e,i){var r=n.instance.getCellMeta(t,e),o=n.instance.colToProp(e),a=n.instance.getDataAtRowProp(t,o);n.instance.hasHook("beforeValueRender")&&(a=n.instance.runHooks("beforeValueRender",a)),n.instance.runHooks("beforeRenderer",i,t,e,o,a,r),n.instance.getCellRenderer(r)(n.instance,i,t,e,o,a,r),n.instance.runHooks("afterRenderer",i,t,e,o,a,r)},selections:f,hideBorderOnMouseDownOver:function(){return n.settings.fragmentSelection},onCellMouseDown:function(e,i,r,a){var s={row:!1,column:!1,cells:!1};if(t.listen(),n.activeWt=a,o=!0,t.runHooks("beforeOnCellMouseDown",e,i,r,s),!(0,c.isImmediatePropagationStopped)(e)){var l=t.getSelectedRange(),u=t.selection,d=u.selectedHeader;if(e.shiftKey&&l)i.row>=0&&i.col>=0&&!s.cells?(u.setSelectedHeaders(!1,!1),u.setRangeEnd(i)):(d.cols||d.rows)&&i.row>=0&&i.col>=0&&!s.cells?(u.setSelectedHeaders(!1,!1),u.setRangeEnd(new h.CellCoords(i.row,i.col))):d.cols&&i.row<0&&!s.column?u.setRangeEnd(new h.CellCoords(l.to.row,i.col)):d.rows&&i.col<0&&!s.row?u.setRangeEnd(new h.CellCoords(i.row,l.to.col)):(!d.cols&&!d.rows&&i.col<0||d.cols&&i.col<0)&&!s.row?(u.setSelectedHeaders(!0,!1),u.setRangeStartOnly(new h.CellCoords(l.from.row,0)),u.setRangeEnd(new h.CellCoords(i.row,t.countCols()-1))):(!d.cols&&!d.rows&&i.row<0||d.rows&&i.row<0)&&!s.column&&(u.setSelectedHeaders(!1,!0),u.setRangeStartOnly(new h.CellCoords(0,l.from.col)),u.setRangeEnd(new h.CellCoords(t.countRows()-1,i.col)));else{var f=!0;if(l){var p=l.from,g=l.to,m=!u.inInSelection(i);if(i.row<0&&d.cols){var v=Math.min(p.col,g.col),y=Math.max(p.col,g.col);f=i.col<v||i.col>y}else if(i.col<0&&d.rows){var b=Math.min(p.row,g.row),w=Math.max(p.row,g.row);f=i.row<b||i.row>w}else f=m}var x=(0,c.isRightClick)(e),_=(0,c.isLeftClick)(e)||"touchstart"===e.type;i.row<0&&i.col>=0&&!s.column?(u.setSelectedHeaders(!1,!0),(_||x&&f)&&(u.setRangeStartOnly(new h.CellCoords(0,i.col)),u.setRangeEnd(new h.CellCoords(Math.max(t.countRows()-1,0),i.col),!1))):i.col<0&&i.row>=0&&!s.row?(u.setSelectedHeaders(!0,!1),(_||x&&f)&&(u.setRangeStartOnly(new h.CellCoords(i.row,0)),u.setRangeEnd(new h.CellCoords(i.row,Math.max(t.countCols()-1,0)),!1))):i.col>=0&&i.row>=0&&!s.cells?(_||x&&f)&&(u.setSelectedHeaders(!1,!1),u.setRangeStart(i)):i.col<0&&i.row<0&&(i.row=0,i.col=0,u.setSelectedHeaders(!1,!1,!0),u.setRangeStart(i))}t.runHooks("afterOnCellMouseDown",e,i,r),n.activeWt=n.wt}},onCellMouseOut:function(e,i,r,o){n.activeWt=o,t.runHooks("beforeOnCellMouseOut",e,i,r),(0,c.isImmediatePropagationStopped)(e)||(t.runHooks("afterOnCellMouseOut",e,i,r),n.activeWt=n.wt)},onCellMouseOver:function(e,i,r,a){var s={row:!1,column:!1,cell:!1};n.activeWt=a,t.runHooks("beforeOnCellMouseOver",e,i,r,s),(0,c.isImmediatePropagationStopped)(e)||(0===e.button&&o&&(i.row>=0&&i.col>=0?t.selection.selectedHeader.cols&&!s.column?t.selection.setRangeEnd(new h.CellCoords(t.countRows()-1,i.col),!1):t.selection.selectedHeader.rows&&!s.row?t.selection.setRangeEnd(new h.CellCoords(i.row,t.countCols()-1),!1):s.cell||t.selection.setRangeEnd(i):t.selection.selectedHeader.cols&&!s.column?t.selection.setRangeEnd(new h.CellCoords(t.countRows()-1,i.col),!1):t.selection.selectedHeader.rows&&!s.row?t.selection.setRangeEnd(new h.CellCoords(i.row,t.countCols()-1),!1):s.cell||t.selection.setRangeEnd(i)),t.runHooks("afterOnCellMouseOver",e,i,r),n.activeWt=n.wt)},onCellMouseUp:function(e,i,r,o){n.activeWt=o,t.runHooks("beforeOnCellMouseUp",e,i,r),t.runHooks("afterOnCellMouseUp",e,i,r),n.activeWt=n.wt},onCellCornerMouseDown:function(e){e.preventDefault(),t.runHooks("afterOnCellCornerMouseDown",e)},onCellCornerDblClick:function(e){e.preventDefault(),t.runHooks("afterOnCellCornerDblClick",e)},beforeDraw:function(t,e){n.beforeRender(t,e)},onDraw:function(t){n.onDraw(t)},onScrollVertically:function(){t.runHooks("afterScrollVertically")},onScrollHorizontally:function(){t.runHooks("afterScrollHorizontally")},onBeforeDrawBorders:function(e,n){t.runHooks("beforeDrawBorders",e,n)},onBeforeTouchScroll:function(){t.runHooks("beforeTouchScroll")},onAfterMomentumScroll:function(){t.runHooks("afterMomentumScroll")},onBeforeStretchingColumnWidth:function(e,n){return t.runHooks("beforeStretchingColumnWidth",e,n)},onModifyRowHeaderWidth:function(e){return t.runHooks("modifyRowHeaderWidth",e)},viewportRowCalculatorOverride:function(e){var i=t.countRows(),r=n.settings.viewportRowRenderingOffset;if("auto"===r&&n.settings.fixedRowsTop&&(r=10),"number"==typeof r&&(e.startRow=Math.max(e.startRow-r,0),e.endRow=Math.min(e.endRow+r,i-1)),"auto"===r){var o=e.startRow+e.endRow-e.startRow,a=Math.ceil(o/i*12);e.startRow=Math.max(e.startRow-a,0),e.endRow=Math.min(e.endRow+a,i-1)}t.runHooks("afterViewportRowCalculatorOverride",e)},viewportColumnCalculatorOverride:function(e){var i=t.countCols(),r=n.settings.viewportColumnRenderingOffset;if("auto"===r&&n.settings.fixedColumnsLeft&&(r=10),"number"==typeof r&&(e.startColumn=Math.max(e.startColumn-r,0),e.endColumn=Math.min(e.endColumn+r,i-1)),"auto"===r){var o=e.startColumn+e.endColumn-e.startColumn,a=Math.ceil(o/i*12);e.startRow=Math.max(e.startColumn-a,0),e.endColumn=Math.min(e.endColumn+a,i-1)}t.runHooks("afterViewportColumnCalculatorOverride",e)},rowHeaderWidth:function(){return n.settings.rowHeaderWidth},columnHeaderHeight:function g(){var g=t.runHooks("modifyColumnHeaderHeight");return n.settings.columnHeaderHeight||g}};t.runHooks("beforeInitWalkontable",p),this.wt=new d["default"](p),this.activeWt=this.wt,(0,s.isChrome)()||(0,s.isSafari)()||this.eventManager.addEventListener(t.rootElement,"wheel",function(t){t.preventDefault();var e=parseInt((0,a.getComputedStyle)(document.body)["font-size"],10),i=n.wt.wtOverlays.scrollableElement,r=t.wheelDeltaY||t.deltaY,o=t.wheelDeltaX||t.deltaX;switch(t.deltaMode){case 0:i.scrollLeft+=o,i.scrollTop+=r;break;case 1:i.scrollLeft+=o*e,i.scrollTop+=r*e}}),this.eventManager.addEventListener(n.wt.wtTable.spreader,"mousedown",function(t){t.target===n.wt.wtTable.spreader&&3===t.which&&(0,c.stopPropagation)(t)}),this.eventManager.addEventListener(n.wt.wtTable.spreader,"contextmenu",function(t){t.target===n.wt.wtTable.spreader&&3===t.which&&(0,c.stopPropagation)(t)}),this.eventManager.addEventListener(document.documentElement,"click",function(){n.settings.observeDOMVisibility&&n.wt.drawInterrupted&&(n.instance.forceFullRender=!0,n.render())})}e.__esModule=!0;var o=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(0),s=n(25),l=n(4),u=i(l),c=n(7),h=n(11),d=i(h);r.prototype.isTextSelectionAllowed=function(t){if((0,a.isInput)(t))return!0;var e=(0,a.isChildOf)(t,this.instance.view.wt.wtTable.spreader);return!(this.settings.fragmentSelection!==!0||!e)||(!("cell"!==this.settings.fragmentSelection||!this.isSelectedOnlyCell()||!e)||!(this.settings.fragmentSelection||!this.isCellEdited()||!this.isSelectedOnlyCell()))},r.prototype.isSelectedOnlyCell=function(){var t=this.instance.getSelected()||[],e=o(t,4),n=e[0],i=e[1],r=e[2],a=e[3];return void 0!==n&&n===r&&i===a},r.prototype.isCellEdited=function(){var t=this.instance.getActiveEditor();return t&&t.isOpened()},r.prototype.beforeRender=function(t,e){t&&this.instance.runHooks("beforeRender",this.instance.forceFullRender,e)},r.prototype.onDraw=function(t){t&&this.instance.runHooks("afterRender",this.instance.forceFullRender);
},r.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1,this.instance.renderCall=!1},r.prototype.getCellAtCoords=function(t,e){var n=this.wt.getCell(t,e);return n<0?null:n},r.prototype.scrollViewport=function(t){this.wt.scrollViewport(t)},r.prototype.appendRowHeader=function(t,e){if(e.firstChild){var n=e.firstChild;if(!(0,a.hasClass)(n,"relative"))return(0,a.empty)(e),void this.appendRowHeader(t,e);this.updateCellHeader(n.querySelector(".rowHeader"),t,this.instance.getRowHeader)}else{var i=document.createElement("div"),r=document.createElement("span");i.className="relative",r.className="rowHeader",this.updateCellHeader(r,t,this.instance.getRowHeader),i.appendChild(r),e.appendChild(i)}this.instance.runHooks("afterGetRowHeader",t,e)},r.prototype.appendColHeader=function(t,e){if(e.firstChild){var n=e.firstChild;(0,a.hasClass)(n,"relative")?this.updateCellHeader(n.querySelector(".colHeader"),t,this.instance.getColHeader):((0,a.empty)(e),this.appendColHeader(t,e))}else{var i=document.createElement("div"),r=document.createElement("span");i.className="relative",r.className="colHeader",this.updateCellHeader(r,t,this.instance.getColHeader),i.appendChild(r),e.appendChild(i)}this.instance.runHooks("afterGetColHeader",t,e)},r.prototype.updateCellHeader=function(t,e,n){var i=e,r=this.wt.wtOverlays.getParentOverlay(t)||this.wt;t.parentNode&&((0,a.hasClass)(t,"colHeader")?i=r.wtTable.columnFilter.sourceToRendered(e):(0,a.hasClass)(t,"rowHeader")&&(i=r.wtTable.rowFilter.sourceToRendered(e))),i>-1?(0,a.fastInnerHTML)(t,n(e)):((0,a.fastInnerText)(t,String.fromCharCode(160)),(0,a.addClass)(t,"cornerHeader"))},r.prototype.maximumVisibleElementWidth=function(t){var e=this.wt.wtViewport.getWorkspaceWidth(),n=e-t;return n>0?n:0},r.prototype.maximumVisibleElementHeight=function(t){var e=this.wt.wtViewport.getWorkspaceHeight(),n=e-t;return n>0?n:0},r.prototype.mainViewIsActive=function(){return this.wt===this.activeWt},r.prototype.destroy=function(){this.wt.destroy(),this.eventManager.destroy()},e["default"]=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function s(t){i(this,s),this.data=t,this.next=null,this.prev=null},a=function(){function t(){i(this,t),this.first=null,this.last=null}return r(t,[{key:"push",value:function(t){var e=new o(t);if(null===this.first)this.first=e,this.last=e;else{var n=this.last;this.last=e,e.prev=n,n.next=e}}},{key:"unshift",value:function(t){var e=new o(t);if(null===this.first)this.first=e,this.last=e;else{var n=this.first;this.first=e,e.next=n,n.prev=e}}},{key:"inorder",value:function(t){for(var e=this.first;e;)t(e),e=e.next}},{key:"remove",value:function(t){if(null===this.first)return!1;for(var e=this.first,n=void 0,i=void 0;e;){if(e.data===t)return n=e.next,i=e.prev,n&&(n.prev=i),i&&(i.next=n),e===this.first&&(this.first=n),e===this.last&&(this.last=i),!0;e=e.next}return!1}},{key:"hasCycle",value:function(){for(var t=this.first,e=this.first;;){if(null===t)return!1;if(t=t.next,null===t)return!1;if(t=t.next,e=e.next,t===e)return!0}}},{key:"pop",value:function(){if(null===this.last)return null;var t=this.last;return this.last=this.last.prev,t}},{key:"shift",value:function(){if(null===this.first)return null;var t=this.first;return this.first=this.first.next,t}},{key:"recursiveReverse",value:function(){function t(e,n){n&&(t(n,n.next),n.next=e)}if(this.first){t(this.first,this.first.next),this.first.next=null;var e=this.first;this.first=this.last,this.last=e}}},{key:"reverse",value:function(){if(this.first&&this.first.next){for(var t=this.first.next,e=this.first,n=void 0;t;)n=t.next,t.next=e,e.prev=t,e=t,t=n;this.first.next=null,this.last.prev=null,n=this.first,this.first=e,this.last=n}}}]),t}();e.NodeStructure=o,e["default"]=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return"string"==typeof t&&/fps$/.test(t)&&(t=1e3/parseInt(t.replace("fps","")||0,10)),t}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.parseDelay=r;var a=n(34),s=function(){function t(e,n){var o=this;i(this,t),this.timer=null,this.func=e,this.delay=r(n),this.stopped=!0,this._then=null,this._callback=function(){return o.__callback()}}return o(t,null,[{key:"create",value:function(e,n){return new t(e,n)}}]),o(t,[{key:"start",value:function(){return this.stopped&&(this._then=Date.now(),this.stopped=!1,this.timer=(0,a.requestAnimationFrame)(this._callback)),this}},{key:"stop",value:function(){return this.stopped||(this.stopped=!0,(0,a.cancelAnimationFrame)(this.timer),this.timer=null),this}},{key:"__callback",value:function(){if(this.timer=(0,a.requestAnimationFrame)(this._callback),this.delay){var t=Date.now(),e=t-this._then;e>this.delay&&(this._then=t-e%this.delay,this.func())}else this.func()}}]),t}();e["default"]=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(Math.abs(i-n)<=1)return[];var a=Math.ceil((n+i)/2);return r(t,e,n,a),r(t,e,a,i),o(t,e,n,a,i)}function o(t,e,n,i,r){for(var o=new s["default"],a=new s["default"],l=i-n,u=r-i,c=Math.max(l,u),h=r-n,d=0;d<c;d+=1)d<l&&o.push(t[n+d]),d<u&&a.push(t[i+d]);for(var f=0;f<h;)o.first&&a.first?e(o.first.data,a.first.data)>0?t[n+f]=a.shift().data:t[n+f]=o.shift().data:o.first?t[n+f]=o.shift().data:t[n+f]=a.shift().data,f+=1;return t}e.__esModule=!0,e["default"]=r,e.merge=o;var a=n(270),s=i(a),l=function(t,e){var n=t.toString(),i=e.toString();return n===i?0:n<i?-1:1}},function(t,e,n){"use strict";function i(t,e){return null==t&&(t=""),this.allowEmpty&&""===t?void e(!0):void(this.strict&&this.source?"function"==typeof this.source?this.source(t,r(t,e)):r(t,e)(this.source):e(!0))}function r(t,e){var n=t;return function(t){for(var i=!1,r=0,o=t.length;r<o;r++)if(n===t[r]){i=!0;break}e(i)}}e.__esModule=!0,e["default"]=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var n=!0,i=(0,u.getEditorInstance)("date",this.instance);null==t&&(t="");var r=(0,s["default"])(new Date(t)).isValid()||(0,s["default"])(t,i.defaultDateFormat).isValid(),a=(0,s["default"])(t,this.dateFormat||i.defaultDateFormat,!0).isValid();if(this.allowEmpty&&""===t&&(r=!0,a=!0),r||(n=!1),!r&&a&&(n=!0),r&&!a)if(this.correctFormat===!0){var l=o(t,this.dateFormat),c=this.instance.runHooks("unmodifyRow",this.row),h=this.instance.runHooks("unmodifyCol",this.col);this.instance.setDataAtCell(c,h,l,"dateValidator"),n=!0}else n=!1;e(n)}function o(t,e){var n=(0,s["default"])((0,l.getNormalizedDate)(t)),i=(0,s["default"])(t,e),r=t.search(/[A-z]/g)>-1,o=void 0;return o=n.isValid()&&n.format("x")===i.format("x")||!i.isValid()||r?n:i,o.format(e)}e.__esModule=!0,e["default"]=r,e.correctFormat=o;var a=n(61),s=i(a),l=n(89),u=n(14)},function(t,e,n){"use strict";function i(t,e){null==t&&(t=""),e(this.allowEmpty&&""===t?!0:""===t?!1:/^-?\d*(\.|,)?\d*$/.test(t))}e.__esModule=!0,e["default"]=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var n=!0,i=this.timeFormat||"h:mm:ss a";null===t&&(t=""),t=/^\d{3,}$/.test(t)?parseInt(t,10):t;var r=/^\d{1,2}$/.test(t);r&&(t+=":00");var o=(0,a["default"])(t,s,!0).isValid()?(0,a["default"])(t):(0,a["default"])(t,i),l=o.isValid(),u=(0,a["default"])(t,i,!0).isValid()&&!r;if(this.allowEmpty&&""===t&&(l=!0,u=!0),l||(n=!1),!l&&u&&(n=!0),l&&!u)if(this.correctFormat===!0){var c=o.format(i),h=this.instance.runHooks("unmodifyRow",this.row),d=this.instance.runHooks("unmodifyCol",this.col);this.instance.setDataAtCell(h,d,c,"timeValidator"),n=!0}else n=!1;e(n)}e.__esModule=!0,e["default"]=r;var o=n(61),a=i(o),s=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"]},function(t,e,n){"use strict";var i=n(41),r=n(59),o=n(24);t.exports=[].copyWithin||function(t,e){var n=i(this),a=o(n.length),s=r(t,a),l=r(e,a),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?a:r(u,a))-l,a-s),h=1;for(l<s&&s<l+c&&(h=-1,l+=c-1,s+=c-1);c-- >0;)l in n?n[s]=n[l]:delete n[s],s+=h,l+=h;return n}},function(t,e,n){"use strict";var i=n(41),r=n(59),o=n(24);t.exports=function(t){for(var e=i(this),n=o(e.length),a=arguments.length,s=r(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,u=void 0===l?n:r(l,n);u>s;)e[s++]=t;return e}},function(t,e,n){var i=n(15),r=n(162),o=n(10)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){var i=n(279);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(39),r=n(57),o=n(47);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var a,s=n(t),l=o.f,u=0;s.length>u;)l.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,n){"use strict";var i=n(18);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var i=n(15),r=n(171).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&i(o)&&r&&r(t,o),t}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){"use strict";var i=n(79),r=n(40),o=n(48),a={};n(32)(a,n(10)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(39),r=n(23);t.exports=function(t,e){for(var n,o=r(t),a=i(o),s=a.length,l=0;s>l;)if(o[n=a[l++]]===e)return n}},function(t,e,n){var i=n(13),r=n(85).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==n(38)(a);t.exports=function(){var t,e,n,u=function(){var i,r;for(l&&(i=a.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(o){throw t?n():e=void 0,o}}e=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(u)};else if(o){var c=!0,h=document.createTextNode("");new o(u).observe(h,{characterData:!0}),n=function(){h.data=c=!c}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(u)}}else n=function(){r.call(i,u)};return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(19),r=n(18),o=n(39);t.exports=n(21)?Object.defineProperties:function(t,e){r(t);for(var n,a=o(e),s=a.length,l=0;s>l;)i.f(t,n=a[l++],e[n]);return t}},function(t,e,n){var i=n(23),r=n(81).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):r(i(t))}},function(t,e,n){var i=n(22),r=n(41),o=n(82)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(81),r=n(57),o=n(18),a=n(13).Reflect;t.exports=a&&a.ownKeys||function(t){var e=i.f(o(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var i=n(18),r=n(72),o=n(10)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[o])?e:r(n)}},function(t,e,n){var i=n(60),r=n(30);t.exports=function(t){return function(e,n){var o,a,s=String(r(e)),l=i(n),u=s.length;return l<0||l>=u?t?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):o:t?s.slice(l,l+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e,n){var i=n(13),r=n(44),o=n(56),a=n(175),s=n(19).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=n}])}),function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";function i(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)l[e]=t[e],u[t.charCodeAt(e)]=e;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63}function r(t){var e,n,i,r,o,a,s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[s-2]?2:"="===t[s-1]?1:0,a=new c(3*s/4-o),i=o>0?s-4:s;var l=0;for(e=0,n=0;e<i;e+=4,n+=3)r=u[t.charCodeAt(e)]<<18|u[t.charCodeAt(e+1)]<<12|u[t.charCodeAt(e+2)]<<6|u[t.charCodeAt(e+3)],a[l++]=r>>16&255,a[l++]=r>>8&255,a[l++]=255&r;return 2===o?(r=u[t.charCodeAt(e)]<<2|u[t.charCodeAt(e+1)]>>4,a[l++]=255&r):1===o&&(r=u[t.charCodeAt(e)]<<10|u[t.charCodeAt(e+1)]<<4|u[t.charCodeAt(e+2)]>>2,a[l++]=r>>8&255,a[l++]=255&r),a}function o(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function a(t,e,n){for(var i,r=[],a=e;a<n;a+=3)i=(t[a]<<16)+(t[a+1]<<8)+t[a+2],r.push(o(i));return r.join("")}function s(t){for(var e,n=t.length,i=n%3,r="",o=[],s=16383,u=0,c=n-i;u<c;u+=s)o.push(a(t,u,u+s>c?c:u+s));return 1===i?(e=t[n-1],r+=l[e>>2],r+=l[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=l[e>>10],r+=l[e>>4&63],r+=l[e<<2&63],r+="="),o.push(r),o.join("")}n.toByteArray=r,n.fromByteArray=s;var l=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array;i()},{}],2:[function(t,e,n){(function(e){"use strict";function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function r(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,e,n)}function s(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?f(t,e,n,i):"string"==typeof e?h(t,e,n):p(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number')}function u(t,e,n,i){return l(e),e<=0?o(t,e):void 0!==n?"string"==typeof i?o(t,e).fill(n,i):o(t,e).fill(n):o(t,e)}function c(t,e){if(l(e),t=o(t,e<0?0:0|g(e)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|v(e,n);t=o(t,i);var r=t.write(e,n);return r!==i&&(t=t.slice(0,r)),t}function d(t,e){var n=0|g(e.length);t=o(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=d(t,e),t}function p(t,e){if(a.isBuffer(e)){var n=0|g(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||K(e.length)?o(t,0):d(t,e);if("Buffer"===e.type&&J(e.data))return d(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function m(t){return+t!=t&&(t=0),a.alloc(+t)}function v(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(i)return U(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return D(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function b(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function w(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=a.from(e,i)),a.isBuffer(e))return 0===e.length?-1:x(t,e,n,i,r);if("number"==typeof e)return e=255&e,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):x(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function x(t,e,n,i,r){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,l=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}var u;if(r){var c=-1;for(u=n;u<s;u++)if(o(t,u)===o(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===l)return c*a}else c!==-1&&(u-=u-c),c=-1}else for(n+l>s&&(n=s-l),u=n;u>=0;u--){for(var h=!0,d=0;d<l;d++)if(o(t,u+d)!==o(e,d)){h=!1;break}if(h)return u}return-1}function _(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function k(t,e,n,i){return $(U(e,t.length-n),t,n,i)}function C(t,e,n,i){return $(q(e),t,n,i)}function S(t,e,n,i){return C(t,e,n,i)}function M(t,e,n,i){return $(G(e),t,n,i)}function T(t,e,n,i){return $(X(e,t.length-n),t,n,i)}function E(t,e,n){return 0===e&&n===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o=t[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=n){var l,u,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:l=t[r+1],128===(192&l)&&(h=(31&o)<<6|63&l,h>127&&(a=h));break;case 3:l=t[r+1],u=t[r+2],128===(192&l)&&128===(192&u)&&(h=(15&o)<<12|(63&l)<<6|63&u,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:l=t[r+1],u=t[r+2],c=t[r+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(h=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,h>65535&&h<1114112&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=s}return A(i)}function A(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=tt));return n}function D(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function R(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function P(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=V(t[o]);return r}function N(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function z(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,i,r,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function I(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function H(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function j(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,i,r){return r||j(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,n,i,23,4),n+4}function B(t,e,n,i,r){return r||j(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,n,i,52,8),n+8}function W(t){if(t=Y(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],a=0;a<i;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function X(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function G(t){return Z.toByteArray(W(t))}function $(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function K(t){return t!==t}var Z=t("base64-js"),Q=t("ieee754"),J=t("isarray");n.Buffer=a,n.SlowBuffer=m,n.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:i(),n.kMaxLength=r(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,n){return s(null,t,e,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,n){return u(null,t,e,n)},a.allocUnsafe=function(t){return c(null,t)},a.allocUnsafeSlow=function(t){return c(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!J(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=a.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},a.byteLength=v,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):y.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,n,i,r){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,s=n-e,l=Math.min(o,s),u=this.slice(i,r),c=t.slice(e,n),h=0;h<l;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},a.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},a.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return k(this,t,e,n);case"ascii":return C(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;a.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(a.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=a.prototype;else{var r=e-t;i=new a(r,(void 0));for(var o=0;o<r;++o)i[o]=this[o+t]}return i},a.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||z(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},a.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||z(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},a.prototype.readUInt8=function(t,e){return e||z(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||z(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||z(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||z(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||z(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},a.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||z(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return e||z(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,e){e||z(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(t,e){e||z(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(t,e){return e||z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||z(t,4,this.length),Q.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||z(t,4,this.length),Q.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||z(t,8,this.length),Q.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||z(t,8,this.length),Q.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var r=Math.pow(2,8*n)-1;L(this,t,e,n,r,0)}var o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},a.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var r=Math.pow(2,8*n)-1;L(this,t,e,n,r,0)}var o=n-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n},a.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||L(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||L(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||L(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||L(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):H(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||L(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},a.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||L(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),
this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||L(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||L(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||L(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):H(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},a.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=a.isBuffer(t)?t:U(new a(t,i).toString()),l=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%l]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:6,isarray:7}],3:[function(t,e,n){!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function i(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function r(t){return null===t?NaN:+t}function o(t){return!isNaN(t)}function a(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}function s(t){return t.length}function l(t){for(var e=1;t*e%1;)e*=10;return e}function u(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function c(){this._=Object.create(null)}function h(t){return(t+="")===_a||t[0]===ka?ka+t:t}function d(t){return(t+="")[0]===ka?t.slice(1):t}function f(t){return h(t)in this._}function p(t){return(t=h(t))in this._&&delete this._[t]}function g(){var t=[];for(var e in this._)t.push(d(e));return t}function m(){var t=0;for(var e in this._)++t;return t}function v(){for(var t in this._)return!1;return!0}function y(){this._=Object.create(null)}function b(t){return t}function w(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function x(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=Ca.length;n<i;++n){var r=Ca[n]+e;if(r in t)return r}}function _(){}function k(){}function C(t){function e(){for(var e,i=n,r=-1,o=i.length;++r<o;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new c;return e.on=function(e,r){var o,a=i.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function S(){ua.event.preventDefault()}function M(){for(var t,e=ua.event;t=e.sourceEvent;)e=t;return e}function T(t){for(var e=new k,n=0,i=arguments.length;++n<i;)e[arguments[n]]=C(e);return e.of=function(n,i){return function(r){try{var o=r.sourceEvent=ua.event;r.target=t,ua.event=r,e[r.type].apply(n,i)}finally{ua.event=o}}},e}function E(t){return Ma(t,Aa),t}function O(t){return"function"==typeof t?t:function(){return Ta(t,this)}}function A(t){return"function"==typeof t?t:function(){return Ea(t,this)}}function D(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=ua.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?s:a:t.local?o:r}function R(t){return t.trim().replace(/\s+/g," ")}function P(t){return new RegExp("(?:^|\\s+)"+ua.requote(t)+"(?:\\s+|$)","g")}function N(t){return(t+"").trim().split(/^|\s+/)}function z(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=N(t).map(L);var r=t.length;return"function"==typeof e?i:n}function L(t){var e=P(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",R(r+" "+t))):n.setAttribute("class",R(r.replace(e," ")))}}function I(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?o:r}function H(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function j(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n&&n!==e.documentElement.namespaceURI?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ua.ns.qualify(t)).local?n:e}function F(){var t=this.parentNode;t&&t.removeChild(this)}function B(t){return{__data__:t}}function W(t){return function(){return Oa(this,t)}}function Y(t){return arguments.length||(t=i),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function V(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,o=t[n],a=0,s=o.length;a<s;a++)(r=o[a])&&e(r,a,n);return t}function U(t){return Ma(t,Ra),t}function q(t){var e,n;return function(i,r,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),r>=e&&(e=r+1);!(a=s[e])&&++e<l;);return a}}function X(t,e,n){function i(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function r(){var r=l(e,ha(arguments));i.call(this),this.addEventListener(t,this[a]=r,r.$=n),r._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+ua.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var a="__on"+t,s=t.indexOf("."),l=G;s>0&&(t=t.slice(0,s));var u=Pa.get(t);return u&&(t=u,l=$),s?e?r:i:e?_:o}function G(t,e){return function(n){var i=ua.event;ua.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{ua.event=i}}}function $(t,e){var n=G(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function K(e){var i=".dragsuppress-"+ ++za,r="click"+i,o=ua.select(n(e)).on("touchmove"+i,S).on("dragstart"+i,S).on("selectstart"+i,S);if(null==Na&&(Na=!("onselectstart"in e)&&x(e.style,"userSelect")),Na){var a=t(e).style,s=a[Na];a[Na]="none"}return function(t){if(o.on(i,null),Na&&(a[Na]=s),t){var e=function(){o.on(r,null)};o.on(r,function(){S(),e()},!0),setTimeout(e,0)}}}function Z(t,e){e.changedTouches&&(e=e.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();if(La<0){var o=n(t);if(o.scrollX||o.scrollY){i=ua.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=i[0][0].getScreenCTM();La=!(a.f||a.e),i.remove()}}return La?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function Q(){return ua.event.changedTouches[0].identifier}function J(t){return t>0?1:t<0?-1:0}function tt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function et(t){return t>1?0:t<-1?ja:Math.acos(t)}function nt(t){return t>1?Wa:t<-1?-Wa:Math.asin(t)}function it(t){return((t=Math.exp(t))-1/t)/2}function rt(t){return((t=Math.exp(t))+1/t)/2}function ot(t){return((t=Math.exp(2*t))-1)/(t+1)}function at(t){return(t=Math.sin(t/2))*t}function st(){}function lt(t,e,n){return this instanceof lt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof lt?new lt(t.h,t.s,t.l):_t(""+t,kt,lt):new lt(t,e,n)}function ut(t,e,n){function i(t){return t>360?t-=360:t<0&&(t+=360),t<60?o+(a-o)*t/60:t<180?a:t<240?o+(a-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=n<0?0:n>1?1:n,a=n<=.5?n*(1+e):n+e-n*e,o=2*n-a,new yt(r(t+120),r(t),r(t-120))}function ct(t,e,n){return this instanceof ct?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ct?new ct(t.h,t.c,t.l):t instanceof dt?pt(t.l,t.a,t.b):pt((t=Ct((t=ua.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ct(t,e,n)}function ht(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new dt(n,Math.cos(t*=Ya)*e,Math.sin(t)*e)}function dt(t,e,n){return this instanceof dt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof dt?new dt(t.l,t.a,t.b):t instanceof ct?ht(t.h,t.c,t.l):Ct((t=yt(t)).r,t.g,t.b):new dt(t,e,n)}function ft(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return r=gt(r)*ts,i=gt(i)*es,o=gt(o)*ns,new yt(vt(3.2404542*r-1.5371385*i-.4985314*o),vt(-.969266*r+1.8760108*i+.041556*o),vt(.0556434*r-.2040259*i+1.0572252*o))}function pt(t,e,n){return t>0?new ct(Math.atan2(n,e)*Va,Math.sqrt(e*e+n*n),t):new ct(NaN,NaN,t)}function gt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function mt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function vt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function yt(t,e,n){return this instanceof yt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof yt?new yt(t.r,t.g,t.b):_t(""+t,yt,ut):new yt(t,e,n)}function bt(t){return new yt(t>>16,t>>8&255,255&t)}function wt(t){return bt(t)+""}function xt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function _t(t,e,n){var i,r,o,a=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(Mt(r[0]),Mt(r[1]),Mt(r[2]))}return(o=os.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,l=15&o,l=l<<4|l):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function kt(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(r=l<.5?s/(a+o):s/(2-a-o),i=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=l>0&&l<1?0:i),new lt(i,r,l)}function Ct(t,e,n){t=St(t),e=St(e),n=St(n);var i=mt((.4124564*t+.3575761*e+.1804375*n)/ts),r=mt((.2126729*t+.7151522*e+.072175*n)/es),o=mt((.0193339*t+.119192*e+.9503041*n)/ns);return dt(116*r-16,500*(i-r),200*(r-o))}function St(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Tt(t){return"function"==typeof t?t:function(){return t}}function Et(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),Ot(e,n,t,i)}}function Ot(t,e,n,i){function r(){var t,e=l.status;if(!e&&Dt(l)||e>=200&&e<300||304===e){try{t=n.call(o,l)}catch(i){return void a.error.call(o,i)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=ua.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=ua.event;ua.event=t;try{a.progress.call(o,l)}finally{ua.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ha(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(o,l),l.send(null==i?null:i),o},o.abort=function(){return l.abort(),o},ua.rebind(o,a,"on"),null==i?o:o.get(At(i))}function At(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Dt(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Rt(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var r=n+e,o={c:t,t:r,n:null};return ss?ss.n=o:as=o,ss=o,ls||(us=clearTimeout(us),ls=1,cs(Pt)),o}function Pt(){var t=Nt(),e=zt()-t;e>24?(isFinite(e)&&(clearTimeout(us),us=setTimeout(Pt,e)),ls=0):(ls=1,cs(Pt))}function Nt(){for(var t=Date.now(),e=as;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function zt(){for(var t,e=as,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:as=e.n;return ss=t,n}function Lt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function It(t,e){var n=Math.pow(10,3*xa(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Ht(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,o=i&&n?function(t,e){for(var r=t.length,o=[],a=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>e));)s=i[a=(a+1)%i.length];return o.reverse().join(n)}:b;return function(t){var n=ds.exec(t),i=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],h=n[7],d=n[8],f=n[9],p=1,g="",m="",v=!1,y=!0;switch(d&&(d=+d.substring(1)),(u||"0"===i&&"="===a)&&(u=i="0",a="="),f){case"n":h=!0,f="g";break;case"%":p=100,m="%",f="f";break;case"p":p=100,m="%",f="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+f.toLowerCase());case"c":y=!1;case"d":v=!0,d=0;break;case"s":p=-1,f="r"}"$"===l&&(g=r[0],m=r[1]),"r"!=f||d||(f="g"),null!=d&&("g"==f?d=Math.max(1,Math.min(21,d)):"e"!=f&&"f"!=f||(d=Math.max(0,Math.min(20,d)))),f=fs.get(f)||jt;var b=u&&h;return function(t){var n=m;if(v&&t%1)return"";var r=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===s?"":s;if(p<0){var l=ua.formatPrefix(t,d);t=l.scale(t),n=l.symbol+m}else t*=p;t=f(t,d);var w,x,_=t.lastIndexOf(".");if(_<0){var k=y?t.lastIndexOf("e"):-1;k<0?(w=t,x=""):(w=t.substring(0,k),x=t.substring(k))}else w=t.substring(0,_),x=e+t.substring(_+1);!u&&h&&(w=o(w,1/0));var C=g.length+w.length+x.length+(b?0:r.length),S=C<c?new Array(C=c-C+1).join(i):"";return b&&(w=o(S+w,S.length?c-x.length:1/0)),r+=g,t=w+x,("<"===a?r+t+S:">"===a?S+r+t:"^"===a?S.substring(0,C>>=1)+r+t+S.substring(C):r+(b?t:S+t))+n}}}function jt(t){return t+""}function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Bt(t,e,n){function i(e){var n=t(e),i=o(n,1);return e-n<i-e?n:i}function r(n){return e(n=t(new gs(n-1)),1),n}function o(t,n){return e(t=new gs((+t)),n),t}function a(t,i,o){var a=r(t),s=[];if(o>1)for(;a<i;)n(a)%o||s.push(new Date((+a))),e(a,1);else for(;a<i;)s.push(new Date((+a))),e(a,1);return s}function s(t,e,n){try{gs=Ft;var i=new Ft;return i._=t,a(i,e,n)}finally{gs=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=a;var l=t.utc=Wt(t);return l.floor=l,l.round=Wt(i),l.ceil=Wt(r),l.offset=Wt(o),l.range=s,t}function Wt(t){return function(e,n){try{gs=Ft;var i=new Ft;return i._=e,t(i,n)._}finally{gs=Date}}}function Yt(t){function e(t){function e(e){for(var n,r,o,a=[],s=-1,l=0;++s<i;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(r=vs[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=E[n])&&(n=o(e,null==r?"e"===n?" ":"0":r)),a.push(n),l=s+1);return a.push(t.slice(l,s)),a.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,t,e,0);if(r!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var o=null!=i.Z&&gs!==Ft,a=new(o?Ft:gs);return"j"in i?a.setFullYear(i.y,0,i.j):"W"in i||"U"in i?("w"in i||(i.w="W"in i?1:0),a.setFullYear(i.y,0,1),a.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(a.getDay()+5)%7:i.w+7*i.U-(a.getDay()+6)%7)):a.setFullYear(i.y,i.m,i.d),a.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,i){for(var r,o,a,s=0,l=e.length,u=n.length;s<l;){if(i>=u)return-1;if(r=e.charCodeAt(s++),37===r){if(a=e.charAt(s++),o=O[a in vs?e.charAt(s++):a],!o||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(t,e,n){_.lastIndex=0;var i=_.exec(e.slice(n));return i?(t.w=k.get(i[0].toLowerCase()),n+i[0].length):-1}function r(t,e,n){w.lastIndex=0;var i=w.exec(e.slice(n));return i?(t.w=x.get(i[0].toLowerCase()),n+i[0].length):-1}function o(t,e,n){M.lastIndex=0;var i=M.exec(e.slice(n));return i?(t.m=T.get(i[0].toLowerCase()),n+i[0].length):-1}function a(t,e,n){C.lastIndex=0;var i=C.exec(e.slice(n));return i?(t.m=S.get(i[0].toLowerCase()),n+i[0].length):-1}function s(t,e,i){return n(t,E.c.toString(),e,i)}function l(t,e,i){return n(t,E.x.toString(),e,i)}function u(t,e,i){return n(t,E.X.toString(),e,i)}function c(t,e,n){var i=b.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}var h=t.dateTime,d=t.date,f=t.time,p=t.periods,g=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{gs=Ft;var e=new gs;return e._=t,i(e)}finally{gs=Date}}var i=e(t);return n.parse=function(t){try{gs=Ft;var e=i.parse(t);return e&&e._}finally{gs=Date}},n.toString=i.toString,n},e.multi=e.utc.multi=ue;var b=ua.map(),w=Ut(g),x=qt(g),_=Ut(m),k=qt(m),C=Ut(v),S=qt(v),M=Ut(y),T=qt(y);p.forEach(function(t,e){b.set(t.toLowerCase(),e)});var E={a:function(t){return m[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(h),d:function(t,e){return Vt(t.getDate(),e,2)},e:function(t,e){return Vt(t.getDate(),e,2)},H:function(t,e){return Vt(t.getHours(),e,2)},I:function(t,e){return Vt(t.getHours()%12||12,e,2)},j:function(t,e){return Vt(1+ps.dayOfYear(t),e,3)},L:function(t,e){return Vt(t.getMilliseconds(),e,3)},m:function(t,e){return Vt(t.getMonth()+1,e,2)},M:function(t,e){return Vt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Vt(t.getSeconds(),e,2)},U:function(t,e){return Vt(ps.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Vt(ps.mondayOfYear(t),e,2)},x:e(d),X:e(f),y:function(t,e){return Vt(t.getFullYear()%100,e,2)},Y:function(t,e){return Vt(t.getFullYear()%1e4,e,4)},Z:se,"%":function(){return"%"}},O={a:i,A:r,b:o,B:a,c:s,d:ee,e:ee,H:ie,I:ie,j:ne,L:ae,m:te,M:re,p:c,S:oe,U:Gt,w:Xt,W:$t,x:l,X:u,y:Zt,Y:Kt,Z:Qt,"%":le};return e}function Vt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function Ut(t){return new RegExp("^(?:"+t.map(ua.requote).join("|")+")","i")}function qt(t){for(var e=new c,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Xt(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Gt(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function $t(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Kt(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Zt(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+2));return i?(t.y=Jt(+i[0]),n+i[0].length):-1}function Qt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Jt(t){return t+(t>68?1900:2e3)}function te(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function ee(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ne(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function ie(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function re(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function oe(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function ae(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function se(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=xa(e)/60|0,r=xa(e)%60;return n+Vt(i,"0",2)+Vt(r,"0",2)}function le(t,e,n){bs.lastIndex=0;var i=bs.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function ue(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}function ce(){}function he(t,e,n){var i=n.s=t+e,r=i-t,o=i-r;n.t=t-o+(e-r)}function de(t,e){t&&ks.hasOwnProperty(t.type)&&ks[t.type](t,e)}function fe(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function pe(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)fe(t[n],e,1);e.polygonEnd()}function ge(){function t(t,e){t*=Ya,e=e*Ya/2+ja/4;var n=t-i,a=n>=0?1:-1,s=a*n,l=Math.cos(e),u=Math.sin(e),c=o*u,h=r*l+c*Math.cos(s),d=c*a*Math.sin(s);Ss.add(Math.atan2(d,h)),i=t,r=l,o=u}var e,n,i,r,o;Ms.point=function(a,s){Ms.point=t,i=(e=a)*Ya,r=Math.cos(s=(n=s)*Ya/2+ja/4),o=Math.sin(s)},Ms.lineEnd=function(){t(e,n)}}function me(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function ve(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ye(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function be(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function we(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function xe(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _e(t){return[Math.atan2(t[1],t[0]),nt(t[2])]}function ke(t,e){return xa(t[0]-e[0])<Ia&&xa(t[1]-e[1])<Ia}function Ce(t,e){t*=Ya;var n=Math.cos(e*=Ya);Se(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Se(t,e,n){++Ts,Os+=(t-Os)/Ts,As+=(e-As)/Ts,Ds+=(n-Ds)/Ts}function Me(){function t(t,r){t*=Ya;var o=Math.cos(r*=Ya),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*s)*u+(u=i*a-e*l)*u+(u=e*s-n*a)*u),e*a+n*s+i*l);Es+=u,Rs+=u*(e+(e=a)),Ps+=u*(n+(n=s)),Ns+=u*(i+(i=l)),Se(e,n,i)}var e,n,i;Hs.point=function(r,o){r*=Ya;var a=Math.cos(o*=Ya);e=a*Math.cos(r),n=a*Math.sin(r),i=Math.sin(o),Hs.point=t,Se(e,n,i)}}function Te(){Hs.point=Ce}function Ee(){function t(t,e){t*=Ya;var n=Math.cos(e*=Ya),a=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=r*l-o*s,c=o*a-i*l,h=i*s-r*a,d=Math.sqrt(u*u+c*c+h*h),f=i*a+r*s+o*l,p=d&&-et(f)/d,g=Math.atan2(d,f);zs+=p*u,Ls+=p*c,Is+=p*h,Es+=g,Rs+=g*(i+(i=a)),Ps+=g*(r+(r=s)),Ns+=g*(o+(o=l)),Se(i,r,o)}var e,n,i,r,o;Hs.point=function(a,s){e=a,n=s,Hs.point=t,a*=Ya;var l=Math.cos(s*=Ya);i=l*Math.cos(a),r=l*Math.sin(a),o=Math.sin(s),Se(i,r,o)},Hs.lineEnd=function(){t(e,n),Hs.lineEnd=Te,Hs.point=Ce}}function Oe(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function Ae(){return!0}function De(t,e,n,i,r){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(ke(n,i)){r.lineStart();for(var s=0;s<e;++s)r.point((n=t[s])[0],n[1]);return void r.lineEnd()}var l=new Pe(n,t,null,(!0)),u=new Pe(n,null,l,(!1));l.o=u,o.push(l),a.push(u),l=new Pe(i,t,null,(!1)),u=new Pe(i,null,l,(!0)),l.o=u,o.push(l),a.push(u)}}),a.sort(e),Re(o),Re(a),o.length){for(var s=0,l=n,u=a.length;s<u;++s)a[s].e=l=!l;for(var c,h,d=o[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(var s=0,u=c.length;s<u;++s)r.point((h=c[s])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p){c=f.p.z;for(var s=c.length-1;s>=0;--s)r.point((h=c[s])[0],h[1])}else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,c=f.z,p=!p}while(!f.v);r.lineEnd()}}}function Re(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Pe(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Ne(t,e,n,i){return function(r,o){function a(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function s(t,e){var n=r(t,e);m.point(n[0],n[1])}function l(){y.point=s,m.lineStart()}function u(){y.point=a,m.lineEnd()}function c(t,e){g.push([t,e]);var n=r(t,e);w.point(n[0],n[1])}function h(){w.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),w.lineEnd();var t,e=w.clean(),n=b.buffer(),i=n.length;if(g.pop(),p.push(g),g=null,i)if(1&e){t=n[0];var r,i=t.length-1,a=-1;if(i>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++a<i;)o.point((r=t[a])[0],r[1]);o.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),f.push(n.filter(ze))}var f,p,g,m=e(o),v=r.invert(i[0],i[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=h,y.lineEnd=d,f=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,f=ua.merge(f);var t=Be(v,p);f.length?(x||(o.polygonStart(),x=!0),De(f,Ie,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),f=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=Le(),w=e(b),x=!1;return y}}function ze(t){return t.length>1}function Le(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:_,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ie(t,e){return((t=t.x)[0]<0?t[1]-Wa-Ia:Wa-t[1])-((e=e.x)[0]<0?e[1]-Wa-Ia:Wa-e[1])}function He(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?ja:-ja,l=xa(o-n);xa(l-ja)<Ia?(t.point(n,i=(i+a)/2>0?Wa:-Wa),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=ja&&(xa(n-r)<Ia&&(n-=r*Ia),xa(o-s)<Ia&&(o-=s*Ia),i=je(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function je(t,e,n,i){var r,o,a=Math.sin(t-n);return xa(a)>Ia?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*a)):(e+i)/2}function Fe(t,e,n,i){var r;if(null==t)r=n*Wa,i.point(-ja,r),i.point(0,r),i.point(ja,r),i.point(ja,0),i.point(ja,-r),i.point(0,-r),i.point(-ja,-r),i.point(-ja,0),i.point(-ja,r);else if(xa(t[0]-e[0])>Ia){var o=t[0]<e[0]?ja:-ja;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function Be(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Ss.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],c=u.length;if(c)for(var h=u[0],d=h[0],f=h[1]/2+ja/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===c&&(m=0),t=u[m];var v=t[0],y=t[1]/2+ja/4,b=Math.sin(y),w=Math.cos(y),x=v-d,_=x>=0?1:-1,k=_*x,C=k>ja,S=p*b;if(Ss.add(Math.atan2(S*_*Math.sin(k),g*w+S*Math.cos(k))),o+=C?x+_*Fa:x,C^d>=n^v>=n){var M=ye(me(h),me(t));xe(M);var T=ye(r,M);xe(T);var E=(C^x>=0?-1:1)*nt(T[2]);(i>E||i===E&&(M[0]||M[1]))&&(a+=C^x>=0?1:-1)}if(!m++)break;d=v,p=b,g=w,h=t}}return(o<-Ia||o<Ia&&Ss<0)^1&a}function We(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,d){var f,p=[h,d],g=e(h,d),m=a?g?0:r(h,d):g?r(h+(h<0?ja:-ja),d):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(f=i(n,p),(ke(n,f)||ke(p,f))&&(p[0]+=Ia,p[1]+=Ia,g=e(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),f=i(p,n),t.point(f[0],f[1])):(f=i(n,p),t.point(f[0],f[1]),t.lineEnd()),n=f;else if(s&&n&&a^g){var v;m&o||!(v=i(p,n,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&ke(n,p)||t.point(p[0],p[1]),n=p,l=g,o=m},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function i(t,e,n){var i=me(t),r=me(e),a=[1,0,0],s=ye(i,r),l=ve(s,s),u=s[0],c=l-u*u;if(!c)return!n&&t;var h=o*l/c,d=-o*u/c,f=ye(a,s),p=we(a,h),g=we(s,d);be(p,g);var m=f,v=ve(p,m),y=ve(m,m),b=v*v-y*(ve(p,p)-1);if(!(b<0)){var w=Math.sqrt(b),x=we(m,(-v-w)/y);if(be(x,p),x=_e(x),!n)return x;var _,k=t[0],C=e[0],S=t[1],M=e[1];C<k&&(_=k,k=C,C=_);var T=C-k,E=xa(T-ja)<Ia,O=E||T<Ia;if(!E&&M<S&&(_=S,S=M,M=_),O?E?S+M>0^x[1]<(xa(x[0]-k)<Ia?S:M):S<=x[1]&&x[1]<=M:T>ja^(k<=x[0]&&x[0]<=C)){var A=we(m,(-v+w)/y);return be(A,p),[x,_e(A)]}}}function r(e,n){var i=a?t:ja-t,r=0;return e<-i?r|=1:e>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var o=Math.cos(t),a=o>0,s=xa(o)>Ia,l=mn(t,6*Ya);return Ne(e,n,l,a?[0,-t]:[-ja,t-ja])}function Ye(t,e,n,i){return function(r){var o,a=r.a,s=r.b,l=a.x,u=a.y,c=s.x,h=s.y,d=0,f=1,p=c-l,g=h-u;if(o=t-l,p||!(o>0)){if(o/=p,p<0){if(o<d)return;o<f&&(f=o)}else if(p>0){if(o>f)return;o>d&&(d=o)}if(o=n-l,p||!(o<0)){if(o/=p,p<0){if(o>f)return;o>d&&(d=o)}else if(p>0){if(o<d)return;o<f&&(f=o)}if(o=e-u,g||!(o>0)){if(o/=g,g<0){if(o<d)return;o<f&&(f=o)}else if(g>0){if(o>f)return;o>d&&(d=o)}if(o=i-u,g||!(o<0)){if(o/=g,g<0){if(o>f)return;o>d&&(d=o)}else if(g>0){if(o<d)return;o<f&&(f=o)}return d>0&&(r.a={x:l+d*p,y:u+d*g}),f<1&&(r.b={x:l+f*p,y:u+f*g}),r}}}}}}function Ve(t,e,n,i){function r(i,r){return xa(i[0]-t)<Ia?r>0?0:3:xa(i[0]-n)<Ia?r>0?2:1:xa(i[1]-e)<Ia?r>0?1:0:r>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,n=m.length,i=t[1],r=0;r<n;++r)for(var o,a=1,s=m[r],l=s.length,u=s[0];a<l;++a)o=s[a],u[1]<=i?o[1]>i&&tt(u,o,t)>0&&++e:o[1]<=i&&tt(u,o,t)<0&&--e,u=o;return 0!==e}function u(o,s,l,u){var c=0,h=0;if(null==o||(c=r(o,l))!==(h=r(s,l))||a(o,s)<0^l>0){do u.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+l+4)%4)!==h)}else u.point(s[0],s[1])}function c(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function h(t,e){c(t,e)&&s.point(t,e)}function d(){O.point=p,m&&m.push(v=[]),C=!0,k=!1,x=_=NaN}function f(){g&&(p(y,b),w&&k&&T.rejoin(),g.push(T.buffer())),O.point=h,k&&s.lineEnd()}function p(t,e){t=Math.max(-Fs,Math.min(Fs,t)),e=Math.max(-Fs,Math.min(Fs,e));var n=c(t,e);if(m&&v.push([t,e]),C)y=t,b=e,w=n,C=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&k)s.point(t,e);else{var i={a:{x:x,y:_},b:{x:t,y:e}};E(i)?(k||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),S=!1):n&&(s.lineStart(),s.point(t,e),S=!1)}x=t,_=e,k=n}var g,m,v,y,b,w,x,_,k,C,S,M=s,T=Le(),E=Ye(t,e,n,i),O={point:h,lineStart:d,lineEnd:f,polygonStart:function(){s=T,g=[],m=[],S=!0},polygonEnd:function(){
s=M,g=ua.merge(g);var e=l([t,i]),n=S&&e,r=g.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),r&&De(g,o,e,u,s),s.polygonEnd()),g=m=v=null}};return O}}function Ue(t){var e=0,n=ja/3,i=ln(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*ja/180,n=t[1]*ja/180):[e/ja*180,n/ja*180]},r}function qe(t,e){function n(t,e){var n=Math.sqrt(o-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),a-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,o=1+i*(2*r-i),a=Math.sqrt(o)/r;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,nt((o-(t*t+n*n)*r*r)/(2*r))]},n}function Xe(){function t(t,e){Ws+=r*t-i*e,i=t,r=e}var e,n,i,r;Xs.point=function(o,a){Xs.point=t,e=i=o,n=r=a},Xs.lineEnd=function(){t(e,n)}}function Ge(t,e){t<Ys&&(Ys=t),t>Us&&(Us=t),e<Vs&&(Vs=e),e>qs&&(qs=e)}function $e(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function i(){s.point=t}function r(){a.push("Z")}var o=Ke(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return o=Ke(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function Ke(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ze(t,e){Os+=t,As+=e,++Ds}function Qe(){function t(t,i){var r=t-e,o=i-n,a=Math.sqrt(r*r+o*o);Rs+=a*(e+t)/2,Ps+=a*(n+i)/2,Ns+=a,Ze(e=t,n=i)}var e,n;$s.point=function(i,r){$s.point=t,Ze(e=i,n=r)}}function Je(){$s.point=Ze}function tn(){function t(t,e){var n=t-i,o=e-r,a=Math.sqrt(n*n+o*o);Rs+=a*(i+t)/2,Ps+=a*(r+e)/2,Ns+=a,a=r*t-i*e,zs+=a*(i+t),Ls+=a*(r+e),Is+=3*a,Ze(i=t,r=e)}var e,n,i,r;$s.point=function(o,a){$s.point=t,Ze(e=i=o,n=r=a)},$s.lineEnd=function(){t(e,n)}}function en(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,Fa)}function n(e,n){t.moveTo(e,n),s.point=i}function i(e,n){t.lineTo(e,n)}function r(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(t){return a=t,s},result:_};return s}function nn(t){function e(t){return(s?i:n)(t)}function n(e){return an(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})}function i(e){function n(n,i){n=t(n,i),e.point(n[0],n[1])}function i(){b=NaN,C.point=o,e.lineStart()}function o(n,i){var o=me([n,i]),a=t(n,i);r(b,w,y,x,_,k,b=a[0],w=a[1],y=n,x=o[0],_=o[1],k=o[2],s,e),e.point(b,w)}function a(){C.point=n,e.lineEnd()}function l(){i(),C.point=u,C.lineEnd=c}function u(t,e){o(h=t,d=e),f=b,p=w,g=x,m=_,v=k,C.point=o}function c(){r(b,w,y,x,_,k,f,p,h,g,m,v,s,e),C.lineEnd=a,a()}var h,d,f,p,g,m,v,y,b,w,x,_,k,C={point:n,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),C.lineStart=l},polygonEnd:function(){e.polygonEnd(),C.lineStart=i}};return C}function r(e,n,i,s,l,u,c,h,d,f,p,g,m,v){var y=c-e,b=h-n,w=y*y+b*b;if(w>4*o&&m--){var x=s+f,_=l+p,k=u+g,C=Math.sqrt(x*x+_*_+k*k),S=Math.asin(k/=C),M=xa(xa(k)-1)<Ia||xa(i-d)<Ia?(i+d)/2:Math.atan2(_,x),T=t(M,S),E=T[0],O=T[1],A=E-e,D=O-n,R=b*A-y*D;(R*R/w>o||xa((y*A+b*D)/w-.5)>.3||s*f+l*p+u*g<a)&&(r(e,n,i,s,l,u,E,O,M,x/=C,_/=C,k,m,v),v.point(E,O),r(E,O,M,x,_,k,c,h,d,f,p,g,m,v))}}var o=.5,a=Math.cos(30*Ya),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function rn(t){var e=nn(function(e,n){return t([e*Va,n*Va])});return function(t){return un(e(t))}}function on(t){this.stream=t}function an(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function sn(t){return ln(function(){return t})()}function ln(t){function e(t){return t=s(t[0]*Ya,t[1]*Ya),[t[0]*d+l,u-t[1]*d]}function n(t){return t=s.invert((t[0]-l)/d,(u-t[1])/d),t&&[t[0]*Va,t[1]*Va]}function i(){s=Oe(a=dn(v,y,w),o);var t=o(g,m);return l=f-t[0]*d,u=p+t[1]*d,r()}function r(){return c&&(c.valid=!1,c=null),e}var o,a,s,l,u,c,h=nn(function(t,e){return t=o(t,e),[t[0]*d+l,u-t[1]*d]}),d=150,f=480,p=250,g=0,m=0,v=0,y=0,w=0,x=js,_=b,k=null,C=null;return e.stream=function(t){return c&&(c.valid=!1),c=un(x(a,h(_(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(x=null==t?(k=t,js):We((k=+t)*Ya),r()):k},e.clipExtent=function(t){return arguments.length?(C=t,_=t?Ve(t[0][0],t[0][1],t[1][0],t[1][1]):b,r()):C},e.scale=function(t){return arguments.length?(d=+t,i()):d},e.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],i()):[f,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Ya,m=t[1]%360*Ya,i()):[g*Va,m*Va]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Ya,y=t[1]%360*Ya,w=t.length>2?t[2]%360*Ya:0,i()):[v*Va,y*Va,w*Va]},ua.rebind(e,h,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function un(t){return an(t,function(e,n){t.point(e*Ya,n*Ya)})}function cn(t,e){return[t,e]}function hn(t,e){return[t>ja?t-Fa:t<-ja?t+Fa:t,e]}function dn(t,e,n){return t?e||n?Oe(pn(t),gn(e,n)):pn(t):e||n?gn(e,n):hn}function fn(t){return function(e,n){return e+=t,[e>ja?e-Fa:e<-ja?e+Fa:e,n]}}function pn(t){var e=fn(t);return e.invert=fn(-t),e}function gn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*i+s*r;return[Math.atan2(l*o-c*a,s*i-u*r),nt(c*o+l*a)]}var i=Math.cos(t),r=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*i+c*r),nt(c*i-s*r)]},n}function mn(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,o,a,s){var l=a*e;null!=r?(r=vn(n,r),o=vn(n,o),(a>0?r<o:r>o)&&(r+=a*Fa)):(r=t+a*Fa,o=t-.5*l);for(var u,c=r;a>0?c>o:c<o;c-=l)s.point((u=_e([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],u[1])}}function vn(t,e){var n=me(e);n[0]-=t,xe(n);var i=et(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Ia)%(2*Math.PI)}function yn(t,e,n){var i=ua.range(t,e-Ia,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function bn(t,e,n){var i=ua.range(t,e-Ia,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function wn(t){return t.source}function xn(t){return t.target}function _n(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),a=Math.cos(i),s=Math.sin(i),l=r*Math.cos(t),u=r*Math.sin(t),c=a*Math.cos(n),h=a*Math.sin(n),d=2*Math.asin(Math.sqrt(at(i-e)+r*a*at(n-t))),f=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*f,n=Math.sin(d-t)*f,i=n*l+e*c,r=n*u+e*h,a=n*o+e*s;return[Math.atan2(r,i)*Va,Math.atan2(a,Math.sqrt(i*i+r*r))*Va]}:function(){return[t*Va,e*Va]};return p.distance=d,p}function kn(){function t(t,r){var o=Math.sin(r*=Ya),a=Math.cos(r),s=xa((t*=Ya)-e),l=Math.cos(s);Ks+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=i*o-n*a*l)*s),n*o+i*a*l),e=t,n=o,i=a}var e,n,i;Zs.point=function(r,o){e=r*Ya,n=Math.sin(o*=Ya),i=Math.cos(o),Zs.point=t},Zs.lineEnd=function(){Zs.point=Zs.lineEnd=_}}function Cn(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),o=t(i*r);return[o*r*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),o=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*o,i*a),Math.asin(i&&n*o/i)]},n}function Sn(t,e){function n(t,e){a>0?e<-Wa+Ia&&(e=-Wa+Ia):e>Wa-Ia&&(e=Wa-Ia);var n=a/Math.pow(r(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var i=Math.cos(t),r=function(t){return Math.tan(ja/4+t/2)},o=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),a=i*Math.pow(r(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,i=J(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/i,1/o))-Wa]},n):Tn}function Mn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),o=i/r+t;return xa(r)<Ia?cn:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,o-J(r)*Math.sqrt(t*t+n*n)]},n)}function Tn(t,e){return[t,Math.log(Math.tan(ja/4+e/2))]}function En(t){var e,n=sn(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=ja*i(),l=r();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function On(t,e){return[Math.log(Math.tan(ja/4+e/2)),-t]}function An(t){return t[0]}function Dn(t){return t[1]}function Rn(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;i>1&&tt(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Pn(t,e){return t[0]-e[0]||t[1]-e[1]}function Nn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function zn(t,e,n,i){var r=t[0],o=n[0],a=e[0]-r,s=i[0]-o,l=t[1],u=n[1],c=e[1]-l,h=i[1]-u,d=(s*(l-u)-h*(r-o))/(h*a-s*c);return[r+d*a,l+d*c]}function Ln(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function In(){ri(this),this.edge=this.site=this.circle=null}function Hn(t){var e=ul.pop()||new In;return e.site=t,e}function jn(t){$n(t),al.remove(t),ul.push(t),ri(t)}function Fn(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,a=t.N,s=[t];jn(t);for(var l=o;l.circle&&xa(n-l.circle.x)<Ia&&xa(i-l.circle.cy)<Ia;)o=l.P,s.unshift(l),jn(l),l=o;s.unshift(l),$n(l);for(var u=a;u.circle&&xa(n-u.circle.x)<Ia&&xa(i-u.circle.cy)<Ia;)a=u.N,s.push(u),jn(u),u=a;s.push(u),$n(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],ei(u.edge,l.site,u.site,r);l=s[0],u=s[h-1],u.edge=Jn(l.site,u.site,null,r),Gn(l),Gn(u)}function Bn(t){for(var e,n,i,r,o=t.x,a=t.y,s=al._;s;)if(i=Wn(s,a)-o,i>Ia)s=s.L;else{if(r=o-Yn(s,a),!(r>Ia)){i>-Ia?(e=s.P,n=s):r>-Ia?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=Hn(t);if(al.insert(e,l),e||n){if(e===n)return $n(e),n=Hn(e.site),al.insert(l,n),l.edge=n.edge=Jn(e.site,l.site),Gn(e),void Gn(n);if(!n)return void(l.edge=Jn(e.site,l.site));$n(e),$n(n);var u=e.site,c=u.x,h=u.y,d=t.x-c,f=t.y-h,p=n.site,g=p.x-c,m=p.y-h,v=2*(d*m-f*g),y=d*d+f*f,b=g*g+m*m,w={x:(m*y-f*b)/v+c,y:(d*b-g*y)/v+h};ei(n.edge,u,p,w),l.edge=Jn(u,t,null,w),n.edge=Jn(t,p,null,w),Gn(e),Gn(n)}}function Wn(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var a=t.P;if(!a)return-(1/0);n=a.site;var s=n.x,l=n.y,u=l-e;if(!u)return s;var c=s-i,h=1/o-1/u,d=c/u;return h?(-d+Math.sqrt(d*d-2*h*(c*c/(-2*u)-l+u/2+r-o/2)))/h+i:(i+s)/2}function Yn(t,e){var n=t.N;if(n)return Wn(n,e);var i=t.site;return i.y===e?i.x:1/0}function Vn(t){this.site=t,this.edges=[]}function Un(t){for(var e,n,i,r,o,a,s,l,u,c,h=t[0][0],d=t[1][0],f=t[0][1],p=t[1][1],g=ol,m=g.length;m--;)if(o=g[m],o&&o.prepare())for(s=o.edges,l=s.length,a=0;a<l;)c=s[a].end(),i=c.x,r=c.y,u=s[++a%l].start(),e=u.x,n=u.y,(xa(i-e)>Ia||xa(r-n)>Ia)&&(s.splice(a,0,new ni(ti(o.site,c,xa(i-h)<Ia&&p-r>Ia?{x:h,y:xa(e-h)<Ia?n:p}:xa(r-p)<Ia&&d-i>Ia?{x:xa(n-p)<Ia?e:d,y:p}:xa(i-d)<Ia&&r-f>Ia?{x:d,y:xa(e-d)<Ia?n:f}:xa(r-f)<Ia&&i-h>Ia?{x:xa(n-f)<Ia?e:h,y:f}:null),o.site,null)),++l)}function qn(t,e){return e.angle-t.angle}function Xn(){ri(this),this.x=this.y=this.arc=this.site=this.cy=null}function Gn(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r.x,s=r.y,l=i.x-a,u=i.y-s,c=o.x-a,h=o.y-s,d=2*(l*h-u*c);if(!(d>=-Ha)){var f=l*l+u*u,p=c*c+h*h,g=(h*f-u*p)/d,m=(l*p-c*f)/d,h=m+s,v=cl.pop()||new Xn;v.arc=t,v.site=r,v.x=g+a,v.y=h+Math.sqrt(g*g+m*m),v.cy=h,t.circle=v;for(var y=null,b=ll._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}ll.insert(y,v),y||(sl=v)}}}}function $n(t){var e=t.circle;e&&(e.P||(sl=e.N),ll.remove(e),cl.push(e),ri(e),t.circle=null)}function Kn(t){for(var e,n=rl,i=Ye(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!Zn(e,t)||!i(e)||xa(e.a.x-e.b.x)<Ia&&xa(e.a.y-e.b.y)<Ia)&&(e.a=e.b=null,n.splice(r,1))}function Zn(t,e){var n=t.b;if(n)return!0;var i,r,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,h=t.r,d=c.x,f=c.y,p=h.x,g=h.y,m=(d+p)/2,v=(f+g)/2;if(g===f){if(m<a||m>=s)return;if(d>p){if(o){if(o.y>=u)return}else o={x:m,y:l};n={x:m,y:u}}else{if(o){if(o.y<l)return}else o={x:m,y:u};n={x:m,y:l}}}else if(i=(d-p)/(g-f),r=v-i*m,i<-1||i>1)if(d>p){if(o){if(o.y>=u)return}else o={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(f<g){if(o){if(o.x>=s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}else{if(o){if(o.x<a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}return t.a=o,t.b=n,!0}function Qn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Jn(t,e,n,i){var r=new Qn(t,e);return rl.push(r),n&&ei(r,t,e,n),i&&ei(r,e,t,i),ol[t.i].edges.push(new ni(r,t,e)),ol[e.i].edges.push(new ni(r,e,t)),r}function ti(t,e,n){var i=new Qn(t,null);return i.a=e,i.b=n,rl.push(i),i}function ei(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function ni(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function ii(){this._=null}function ri(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function oi(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ai(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function si(t){for(;t.L;)t=t.L;return t}function li(t,e){var n,i,r,o=t.sort(ui).pop();for(rl=[],ol=new Array(t.length),al=new ii,ll=new ii;;)if(r=sl,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))o.x===n&&o.y===i||(ol[o.i]=new Vn(o),Bn(o),n=o.x,i=o.y),o=t.pop();else{if(!r)break;Fn(r.arc)}e&&(Kn(e),Un(e));var a={cells:ol,edges:rl};return al=ll=rl=ol=null,a}function ui(t,e){return e.y-t.y||e.x-t.x}function ci(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function hi(t){return t.x}function di(t){return t.y}function fi(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pi(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var a=.5*(n+r),s=.5*(i+o),l=e.nodes;l[0]&&pi(t,l[0],n,i,a,s),l[1]&&pi(t,l[1],a,i,r,s),l[2]&&pi(t,l[2],n,s,a,o),l[3]&&pi(t,l[3],a,s,r,o)}}function gi(t,e,n,i,r,o,a){var s,l=1/0;return function u(t,c,h,d,f){if(!(c>o||h>a||d<i||f<r)){if(p=t.point){var p,g=e-t.x,m=n-t.y,v=g*g+m*m;if(v<l){var y=Math.sqrt(l=v);i=e-y,r=n-y,o=e+y,a=n+y,s=p}}for(var b=t.nodes,w=.5*(c+d),x=.5*(h+f),_=e>=w,k=n>=x,C=k<<1|_,S=C+4;C<S;++C)if(t=b[3&C])switch(3&C){case 0:u(t,c,h,w,x);break;case 1:u(t,w,h,d,x);break;case 2:u(t,c,x,w,f);break;case 3:u(t,w,x,d,f)}}}(t,i,r,o,a),s}function mi(t,e){t=ua.rgb(t),e=ua.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,a=e.g-i,s=e.b-r;return function(t){return"#"+xt(Math.round(n+o*t))+xt(Math.round(i+a*t))+xt(Math.round(r+s*t))}}function vi(t,e){var n,i={},r={};for(n in t)n in e?i[n]=wi(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function yi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function bi(t,e){var n,i,r,o=dl.lastIndex=fl.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=dl.exec(t))&&(i=fl.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:yi(n,i)})),o=fl.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function wi(t,e){for(var n,i=ua.interpolators.length;--i>=0&&!(n=ua.interpolators[i](t,e)););return n}function xi(t,e){var n,i=[],r=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)i.push(wi(t[n],e[n]));for(;n<o;++n)r[n]=t[n];for(;n<a;++n)r[n]=e[n];return function(t){for(n=0;n<s;++n)r[n]=i[n](t);return r}}function _i(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function ki(t){return function(e){return 1-t(1-e)}}function Ci(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Si(t){return t*t}function Mi(t){return t*t*t}function Ti(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Ei(t){return function(e){return Math.pow(e,t)}}function Oi(t){return 1-Math.cos(t*Wa)}function Ai(t){return Math.pow(2,10*(t-1))}function Di(t){return 1-Math.sqrt(1-t*t)}function Ri(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Fa*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*Fa/e)}}function Pi(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Ni(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function zi(t,e){t=ua.hcl(t),e=ua.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,a=e.c-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.c:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(t){return ht(n+o*t,i+a*t,r+s*t)+""}}function Li(t,e){t=ua.hsl(t),e=ua.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,a=e.s-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.s:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(t){return ut(n+o*t,i+a*t,r+s*t)+""}}function Ii(t,e){t=ua.lab(t),e=ua.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,a=e.a-i,s=e.b-r;return function(t){return ft(n+o*t,i+a*t,r+s*t)+""}}function Hi(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function ji(t){var e=[t.a,t.b],n=[t.c,t.d],i=Bi(e),r=Fi(e,n),o=Bi(Wi(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Va,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*Va:0}function Fi(t,e){return t[0]*e[0]+t[1]*e[1]}function Bi(t){var e=Math.sqrt(Fi(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Wi(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Yi(t){return t.length?t.pop()+",":""}function Vi(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push("translate(",null,",",null,")");i.push({i:r-4,x:yi(t[0],e[0])},{i:r-2,x:yi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function Ui(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(Yi(n)+"rotate(",null,")")-2,x:yi(t,e)})):e&&n.push(Yi(n)+"rotate("+e+")")}function qi(t,e,n,i){t!==e?i.push({i:n.push(Yi(n)+"skewX(",null,")")-2,x:yi(t,e)}):e&&n.push(Yi(n)+"skewX("+e+")")}function Xi(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push(Yi(n)+"scale(",null,",",null,")");i.push({i:r-4,x:yi(t[0],e[0])},{i:r-2,x:yi(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(Yi(n)+"scale("+e+")")}function Gi(t,e){var n=[],i=[];return t=ua.transform(t),e=ua.transform(e),Vi(t.translate,e.translate,n,i),Ui(t.rotate,e.rotate,n,i),qi(t.skew,e.skew,n,i),Xi(t.scale,e.scale,n,i),t=e=null,function(t){for(var e,r=-1,o=i.length;++r<o;)n[(e=i[r]).i]=e.x(t);return n.join("")}}function $i(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Ki(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Zi(t){for(var e=t.source,n=t.target,i=Ji(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function Qi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Ji(t,e){if(t===e)return t;for(var n=Qi(t),i=Qi(e),r=n.pop(),o=i.pop(),a=null;r===o;)a=r,r=n.pop(),o=i.pop();return a}function tr(t){t.fixed|=2}function er(t){t.fixed&=-7}function nr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ir(t){t.fixed&=-5}function rr(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,l=-1;++l<s;)o=a[l],null!=o&&(rr(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function or(t,e){return ua.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=hr,t}function ar(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function sr(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(o=t.children)&&(r=o.length))for(var r,o,a=-1;++a<r;)n.push(o[a]);for(;null!=(t=i.pop());)e(t)}function lr(t){return t.children}function ur(t){return t.value}function cr(t,e){return e.value-t.value}function hr(t){return ua.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function dr(t){return t.x}function fr(t){return t.y}function pr(t,e,n){t.y0=e,t.y=n}function gr(t){return ua.range(t.length)}function mr(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function vr(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function yr(t){return t.reduce(br,0)}function br(t,e){return t+e[1]}function wr(t,e){return xr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function xr(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function _r(t){return[ua.min(t),ua.max(t)]}function kr(t,e){return t.value-e.value}function Cr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Sr(t,e){t._pack_next=e,e._pack_prev=t}function Mr(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function Tr(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),d=Math.min(t.y-t.r,d),f=Math.max(t.y+t.r,f)}if((n=t.children)&&(u=n.length)){var n,i,r,o,a,s,l,u,c=1/0,h=-(1/0),d=1/0,f=-(1/0);if(n.forEach(Er),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(o=n[2],Dr(i,r,o),e(o),Cr(i,o),i._pack_prev=o,Cr(o,r),r=i._pack_next,a=3;a<u;a++){Dr(i,r,o=n[a]);var p=0,g=1,m=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(Mr(s,o)){p=1;break}if(1==p)for(l=i._pack_prev;l!==s._pack_prev&&!Mr(l,o);l=l._pack_prev,m++);p?(g<m||g==m&&r.r<i.r?Sr(i,r=s):Sr(i=l,r),a--):(Cr(i,o),r=o,e(o))}var v=(c+h)/2,y=(d+f)/2,b=0;for(a=0;a<u;a++)o=n[a],o.x-=v,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(Or)}}function Er(t){t._pack_next=t._pack_prev=t}function Or(t){delete t._pack_next,delete t._pack_prev}function Ar(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,a=r.length;++o<a;)Ar(r[o],e,n,i)}function Dr(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var a=e.r+n.r,s=r*r+o*o;a*=a,i*=i;var l=.5+(i-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);n.x=t.x+l*r+u*o,n.y=t.y+l*o-u*r}else n.x=t.x+i,n.y=t.y}function Rr(t,e){return t.parent==e.parent?1:2}function Pr(t){var e=t.children;return e.length?e[0]:t.t}function Nr(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function zr(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Lr(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function Ir(t,e,n){return t.a.parent===e.parent?t.a:n}function Hr(t){return 1+ua.max(t,function(t){return t.y})}function jr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Fr(t){var e=t.children;return e&&e.length?Fr(e[0]):t}function Br(t){var e,n=t.children;return n&&(e=n.length)?Br(n[e-1]):t}function Wr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Yr(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),o<0&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function Vr(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Ur(t){return t.rangeExtent?t.rangeExtent():Vr(t.range())}function qr(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function Xr(t,e){var n,i=0,r=t.length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}function Gr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Cl}function $r(t,e,n,i){var r=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)r.push(n(t[a-1],t[a])),o.push(i(e[a-1],e[a]));return function(e){var n=ua.bisect(t,e,1,s)-1;return o[n](r[n](e))}}function Kr(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?$r:qr,l=i?Ki:$i;return a=r(t,e,l,n),s=r(e,t,l,wi),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},o.range=function(t){return arguments.length?(e=t,r()):e},o.rangeRound=function(t){return o.range(t).interpolate(Hi)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(n=t,r()):n},o.ticks=function(e){return to(t,e)},o.tickFormat=function(e,n){return eo(t,e,n)},o.nice=function(e){return Qr(t,e),r()},o.copy=function(){return Kr(t,e,n,i)},r()}function Zr(t,e){return ua.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Qr(t,e){return Xr(t,Gr(Jr(t,e)[2])),Xr(t,Gr(Jr(t,e)[2])),t}function Jr(t,e){null==e&&(e=10);var n=Vr(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return o<=.15?r*=10:o<=.35?r*=5:o<=.75&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function to(t,e){return ua.range.apply(ua,Jr(t,e))}function eo(t,e,n){var i=Jr(t,e);if(n){var r=ds.exec(n);if(r.shift(),"s"===r[8]){var o=ua.formatPrefix(Math.max(xa(i[0]),xa(i[1])));return r[7]||(r[7]="."+no(o.scale(i[2]))),r[8]="f",n=ua.format(r.join("")),function(t){return n(o.scale(t))+o.symbol}}r[7]||(r[7]="."+io(r[8],i)),n=r.join("")}else n=",."+no(i[2])+"f";return ua.format(n)}function no(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function io(t,e){var n=no(e[2]);return t in Sl?Math.abs(n-no(Math.max(xa(e[0]),xa(e[1]))))+ +("e"!==t):n-2*("%"===t)}function ro(t,e,n,i){function r(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(r(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),a):i},a.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),a):e},a.nice=function(){var e=Xr(i.map(r),n?Math:Tl);return t.domain(e),i=e.map(o),a},a.ticks=function(){var t=Vr(i),a=[],s=t[0],l=t[1],u=Math.floor(r(s)),c=Math.ceil(r(l)),h=e%1?2:e;if(isFinite(c-u)){if(n){for(;u<c;u++)for(var d=1;d<h;d++)a.push(o(u)*d);a.push(o(u))}else for(a.push(o(u));u++<c;)for(var d=h-1;d>0;d--)a.push(o(u)*d);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(t,n){if(!arguments.length)return Ml;arguments.length<2?n=Ml:"function"!=typeof n&&(n=ua.format(n));var i=Math.max(1,e*t/a.ticks().length);return function(t){var a=t/o(Math.round(r(t)));return a*e<e-.5&&(a*=e),a<=i?n(t):""}},a.copy=function(){return ro(t.copy(),e,n,i)},Zr(a,t)}function oo(t,e,n){function i(e){return t(r(e))}var r=ao(e),o=ao(1/e);return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return to(n,t)},i.tickFormat=function(t,e){return eo(n,t,e)},i.nice=function(t){return i.domain(Qr(n,t))},i.exponent=function(a){return arguments.length?(r=ao(e=a),o=ao(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return oo(t.copy(),e,n)},Zr(i,t)}function ao(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function so(t,e){function n(n){return o[((r.get(n)||("range"===e.t?r.set(n,t.push(n)):NaN))-1)%o.length]}function i(e,n){return ua.range(t.length).map(function(t){return e+n*t})}var r,o,a;return n.domain=function(i){if(!arguments.length)return t;t=[],r=new c;for(var o,a=-1,s=i.length;++a<s;)r.has(o=i[a])||r.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],c=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+s);return o=i(l+c*s/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],c=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+s)|0;return o=i(l+Math.round(c*s/2+(u-l-(t.length-1+s)*c)/2),c),a=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],c=r[u-0],h=r[1-u],d=(h-c)/(t.length-s+2*l);return o=i(c+d*l,d),u&&o.reverse(),a=d*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],c=r[u-0],h=r[1-u],d=Math.floor((h-c)/(t.length-s+2*l));return o=i(c+Math.round((h-c-(t.length-s)*d)/2),d),u&&o.reverse(),a=Math.round(d*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Vr(e.a[0])},n.copy=function(){return so(t,e)},n.domain(t)}function lo(t,e){function n(){var n=0,i=e.length;for(s=[];++n<i;)s[n-1]=ua.quantile(t,n/i);return a}function a(t){if(!isNaN(t=+t))return e[ua.bisect(s,t)]}var s;return a.domain=function(e){return arguments.length?(t=e.map(r).filter(o).sort(i),n()):t},a.range=function(t){return arguments.length?(e=t,n()):e},a.quantiles=function(){return s},a.invertExtent=function(n){return n=e.indexOf(n),n<0?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},a.copy=function(){return lo(t,e)},n()}function uo(t,e,n){function i(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function r(){return o=n.length/(e-t),a=n.length-1,i}var o,a;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=e<0?NaN:e/o+t,[e,e+1/o]},i.copy=function(){return uo(t,e,n)},r()}function co(t,e){function n(n){if(n<=n)return e[ua.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return co(t,e)},n}function ho(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return to(t,e)},e.tickFormat=function(e,n){return eo(t,e,n)},e.copy=function(){return ho(t)},e}function fo(){return 0}function po(t){return t.innerRadius}function go(t){return t.outerRadius}function mo(t){return t.startAngle}function vo(t){return t.endAngle}function yo(t){return t&&t.padAngle}function bo(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function wo(t,e,n,i,r){var o=t[0]-e[0],a=t[1]-e[1],s=(r?i:-i)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=t[0]+l,h=t[1]+u,d=e[0]+l,f=e[1]+u,p=(c+d)/2,g=(h+f)/2,m=d-c,v=f-h,y=m*m+v*v,b=n-i,w=c*f-d*h,x=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-w*w)),_=(w*v-m*x)/y,k=(-w*m-v*x)/y,C=(w*v+m*x)/y,S=(-w*m+v*x)/y,M=_-p,T=k-g,E=C-p,O=S-g;return M*M+T*T>E*E+O*O&&(_=C,k=S),[[_-l,k-u],[_*n/b,k*n/b]]}function xo(t){function e(e){function a(){u.push("M",o(t(c),s))}for(var l,u=[],c=[],h=-1,d=e.length,f=Tt(n),p=Tt(i);++h<d;)r.call(this,l=e[h],h)?c.push([+f.call(this,l,h),+p.call(this,l,h)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=An,i=Dn,r=Ae,o=_o,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Pl.get(t)||_o).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function _o(t){return t.length>1?t.join("L"):t+"Z"}function ko(t){return t.join("L")+"Z"}function Co(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function So(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function Mo(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function To(t,e){return t.length<4?_o(t):t[1]+Ao(t.slice(1,-1),Do(t,e))}function Eo(t,e){return t.length<3?ko(t):t[0]+Ao((t.push(t[0]),t),Do([t[t.length-2]].concat(t,[t[1]]),e))}function Oo(t,e){return t.length<3?_o(t):t[0]+Ao(t,Do(t,e));
}function Ao(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return _o(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return i}function Do(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i}function Ro(t){if(t.length<3)return _o(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],a=[r,r,r,(i=t[1])[0]],s=[o,o,o,i[1]],l=[r,",",o,"L",Lo(Ll,a),",",Lo(Ll,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),Io(l,a,s);return t.pop(),l.push("L",i),l.join("")}function Po(t){if(t.length<4)return _o(t);for(var e,n=[],i=-1,r=t.length,o=[0],a=[0];++i<3;)e=t[i],o.push(e[0]),a.push(e[1]);for(n.push(Lo(Ll,o)+","+Lo(Ll,a)),--i;++i<r;)e=t[i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Io(n,o,a);return n.join("")}function No(t){for(var e,n,i=-1,r=t.length,o=r+4,a=[],s=[];++i<4;)n=t[i%r],a.push(n[0]),s.push(n[1]);for(e=[Lo(Ll,a),",",Lo(Ll,s)],--i;++i<o;)n=t[i%r],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Io(e,a,s);return e.join("")}function zo(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(o+r*s),i[1]=e*i[1]+(1-e)*(a+r*l);return Ro(t)}function Lo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Io(t,e,n){t.push("C",Lo(Nl,e),",",Lo(Nl,n),",",Lo(zl,e),",",Lo(zl,n),",",Lo(Ll,e),",",Lo(Ll,n))}function Ho(t,e){return(e[1]-t[1])/(e[0]-t[0])}function jo(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],a=i[0]=Ho(r,o);++e<n;)i[e]=(a+(a=Ho(r=o,o=t[e+1])))/2;return i[e]=a,i}function Fo(t){for(var e,n,i,r,o=[],a=jo(t),s=-1,l=t.length-1;++s<l;)e=Ho(t[s],t[s+1]),xa(e)<Ia?a[s]=a[s+1]=0:(n=a[s]/e,i=a[s+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),a[s]=r*n,a[s+1]=r*i));for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}function Bo(t){return t.length<3?_o(t):t[0]+Ao(t,Fo(t))}function Wo(t){for(var e,n,i,r=-1,o=t.length;++r<o;)e=t[r],n=e[0],i=e[1]-Wa,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Yo(t){function e(e){function l(){g.push("M",s(t(v),h),c,u(t(m.reverse()),h),"Z")}for(var d,f,p,g=[],m=[],v=[],y=-1,b=e.length,w=Tt(n),x=Tt(r),_=n===i?function(){return f}:Tt(i),k=r===o?function(){return p}:Tt(o);++y<b;)a.call(this,d=e[y],y)?(m.push([f=+w.call(this,d,y),p=+x.call(this,d,y)]),v.push([+_.call(this,d,y),+k.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=An,i=An,r=0,o=Dn,a=Ae,s=_o,l=s.key,u=s,c="L",h=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=o=t,e):o},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Pl.get(t)||_o).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Vo(t){return t.radius}function Uo(t){return[t.x,t.y]}function qo(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-Wa;return[n*Math.cos(i),n*Math.sin(i)]}}function Xo(){return 64}function Go(){return"circle"}function $o(t){var e=Math.sqrt(t/ja);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Ko(t){return function(){var e,n,i;(e=this[t])&&(i=e[n=e.active])&&(i.timer.c=null,i.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function Zo(t,e,n){return Ma(t,Yl),t.namespace=e,t.id=n,t}function Qo(t,e,n,i){var r=t.id,o=t.namespace;return V(t,"function"==typeof n?function(t,a,s){t[o][r].tween.set(e,i(n.call(t,t.__data__,a,s)))}:(n=i(n),function(t){t[o][r].tween.set(e,n)}))}function Jo(t){return null==t&&(t=""),function(){this.textContent=t}}function ta(t){return null==t?"__transition__":"__transition_"+t+"__"}function ea(t,e,n,i,r){function o(t){var e=g.delay;return u.t=e+l,e<=t?a(t-e):void(u.c=a)}function a(n){var r=p.active,o=p[r];o&&(o.timer.c=null,o.timer.t=NaN,--p.count,delete p[r],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var a in p)if(+a<i){var c=p[a];c.timer.c=null,c.timer.t=NaN,--p.count,delete p[a]}u.c=s,Rt(function(){return u.c&&s(n||1)&&(u.c=null,u.t=NaN),1},0,l),p.active=i,g.event&&g.event.start.call(t,t.__data__,e),f=[],g.tween.forEach(function(n,i){(i=i.call(t,t.__data__,e))&&f.push(i)}),d=g.ease,h=g.duration}function s(r){for(var o=r/h,a=d(o),s=f.length;s>0;)f[--s].call(t,a);if(o>=1)return g.event&&g.event.end.call(t,t.__data__,e),--p.count?delete p[i]:delete t[n],1}var l,u,h,d,f,p=t[n]||(t[n]={active:0,count:0}),g=p[i];g||(l=r.time,u=Rt(o,0,l),g=p[i]={tween:new c,time:l,timer:u,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++p.count)}function na(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"})}function ia(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"})}function ra(t){return t.toISOString()}function oa(t,e,n){function i(e){return t(e)}function r(t,n){var i=t[1]-t[0],r=i/n,o=ua.bisect(Ql,r);return o==Ql.length?[e.year,Jr(t.map(function(t){return t/31536e6}),n)[2]]:o?e[r/Ql[o-1]<Ql[o]/r?o-1:o]:[eu,Jr(t,n)[2]]}return i.invert=function(e){return aa(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(aa)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,aa(+n+1),e).length}var o=i.domain(),a=Vr(o),s=null==t?r(a,10):"number"==typeof t&&r(a,t);return s&&(t=s[0],e=s[1]),i.domain(Xr(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=aa(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=aa(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Vr(i.domain()),o=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],aa(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return n},i.copy=function(){return oa(t.copy(),e,n)},Zr(i,t)}function aa(t){return new Date(t)}function sa(t){return JSON.parse(t.responseText)}function la(t){var e=da.createRange();return e.selectNode(da.body),e.createContextualFragment(t.responseText)}var ua={version:"3.5.15"},ca=[].slice,ha=function(t){return ca.call(t)},da=this.document;if(da)try{ha(da.documentElement.childNodes)[0].nodeType}catch(fa){ha=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),da)try{da.createElement("DIV").style.setProperty("opacity",0,"")}catch(pa){var ga=this.Element.prototype,ma=ga.setAttribute,va=ga.setAttributeNS,ya=this.CSSStyleDeclaration.prototype,ba=ya.setProperty;ga.setAttribute=function(t,e){ma.call(this,t,e+"")},ga.setAttributeNS=function(t,e,n){va.call(this,t,e,n+"")},ya.setProperty=function(t,e,n){ba.call(this,t,e+"",n)}}ua.ascending=i,ua.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},ua.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},ua.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},ua.extent=function(t,e){var n,i,r,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(i=t[o])&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=t[o])&&(n>i&&(n=i),r<i&&(r=i))}else{for(;++o<a;)if(null!=(i=e.call(t,t[o],o))&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),r<i&&(r=i))}return[n,r]},ua.sum=function(t,e){var n,i=0,r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)o(n=+t[a])&&(i+=n);else for(;++a<r;)o(n=+e.call(t,t[a],a))&&(i+=n);return i},ua.mean=function(t,e){var n,i=0,a=t.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)o(n=r(t[s]))?i+=n:--l;else for(;++s<a;)o(n=r(e.call(t,t[s],s)))?i+=n:--l;if(l)return i/l},ua.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},ua.median=function(t,e){var n,a=[],s=t.length,l=-1;if(1===arguments.length)for(;++l<s;)o(n=r(t[l]))&&a.push(n);else for(;++l<s;)o(n=r(e.call(t,t[l],l)))&&a.push(n);if(a.length)return ua.quantile(a.sort(i),.5)},ua.variance=function(t,e){var n,i,a=t.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)o(n=r(t[u]))&&(i=n-s,s+=i/++c,l+=i*(n-s));else for(;++u<a;)o(n=r(e.call(t,t[u],u)))&&(i=n-s,s+=i/++c,l+=i*(n-s));if(c>1)return l/(c-1)},ua.deviation=function(){var t=ua.variance.apply(this,arguments);return t?Math.sqrt(t):t};var wa=a(i);ua.bisectLeft=wa.left,ua.bisect=ua.bisectRight=wa.right,ua.bisector=function(t){return a(1===t.length?function(e,n){return i(t(e),n)}:t)},ua.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var i,r,o=n-e;o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},ua.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},ua.pairs=function(t){for(var e,n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=[e=r,r=t[++n]];return o},ua.transpose=function(t){if(!(r=t.length))return[];for(var e=-1,n=ua.min(t,s),i=new Array(n);++e<n;)for(var r,o=-1,a=i[e]=new Array(r);++o<r;)a[o]=t[o][e];return i},ua.zip=function(){return ua.transpose(arguments)},ua.keys=function(t){var e=[];for(var n in t)e.push(n);return e},ua.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ua.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ua.merge=function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--a]=i[e];return n};var xa=Math.abs;ua.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var i,r=[],o=l(xa(n)),a=-1;if(t*=o,e*=o,n*=o,n<0)for(;(i=t+n*++a)>e;)r.push(i/o);else for(;(i=t+n*++a)<e;)r.push(i/o);return r},ua.map=function(t,e){var n=new c;if(t instanceof c)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(1===arguments.length)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e.call(t,i=t[r],r),i)}else for(var a in t)n.set(a,t[a]);return n};var _a="__proto__",ka="\0";u(c,{has:f,get:function(t){return this._[h(t)]},set:function(t,e){return this._[h(t)]=e},remove:p,keys:g,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:d(e),value:this._[e]});return t},size:m,empty:v,forEach:function(t){for(var e in this._)t.call(this,d(e),this._[e])}}),ua.nest=function(){function t(e,a,s){if(s>=o.length)return i?i.call(r,a):n?a.sort(n):a;for(var l,u,h,d,f=-1,p=a.length,g=o[s++],m=new c;++f<p;)(d=m.get(l=g(u=a[f])))?d.push(u):m.set(l,[u]);return e?(u=e(),h=function(n,i){u.set(n,t(e,i,s))}):(u={},h=function(n,i){u[n]=t(e,i,s)}),m.forEach(h),u}function e(t,n){if(n>=o.length)return t;var i=[],r=a[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,r={},o=[],a=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(ua.map,n,0),0)},r.key=function(t){return o.push(t),r},r.sortKeys=function(t){return a[o.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return i=t,r},r},ua.set=function(t){var e=new y;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},u(y,{has:f,add:function(t){return this._[h(t+="")]=!0,t},remove:p,values:g,size:m,empty:v,forEach:function(t){for(var e in this._)t.call(this,d(e))}}),ua.behavior={},ua.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=w(t,e,e[n]);return t};var Ca=["webkit","ms","moz","Moz","o","O"];ua.dispatch=function(){for(var t=new k,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=C(t);return t},k.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},ua.event=null,ua.requote=function(t){return t.replace(Sa,"\\$&")};var Sa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ma={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},Ta=function(t,e){return e.querySelector(t)},Ea=function(t,e){return e.querySelectorAll(t)},Oa=function(t,e){var n=t.matches||t[x(t,"matchesSelector")];return(Oa=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(Ta=function(t,e){return Sizzle(t,e)[0]||null},Ea=Sizzle,Oa=Sizzle.matchesSelector),ua.selection=function(){return ua.select(da.documentElement)};var Aa=ua.selection.prototype=[];Aa.select=function(t){var e,n,i,r,o=[];t=O(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(i=this[a]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return E(o)},Aa.selectAll=function(t){var e,n,i=[];t=A(t);for(var r=-1,o=this.length;++r<o;)for(var a=this[r],s=-1,l=a.length;++s<l;)(n=a[s])&&(i.push(e=ha(t.call(n,n.__data__,s,r))),e.parentNode=n);return E(i)};var Da={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ua.ns={prefix:Da,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Da.hasOwnProperty(n)?{space:Da[n],local:t}:t}},Aa.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=ua.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(D(e,t[e]));return this}return this.each(D(t,e))},Aa.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=N(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!P(t[r]).test(e))return!1;return!0}for(e in t)this.each(z(e,t[e]));return this}return this.each(z(t,e))},Aa.style=function(t,e,i){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(e="");for(i in t)this.each(I(i,t[i],e));return this}if(r<2){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}i=""}return this.each(I(t,e,i))},Aa.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(H(e,t[e]));return this}return this.each(H(t,e))},Aa.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Aa.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Aa.append=function(t){return t=j(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Aa.insert=function(t,e){return t=j(t),e=O(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Aa.remove=function(){return this.each(F)},Aa.data=function(t,e){function n(t,n){var i,r,o,a=t.length,h=n.length,d=Math.min(a,h),f=new Array(h),p=new Array(h),g=new Array(a);if(e){var m,v=new c,y=new Array(a);for(i=-1;++i<a;)(r=t[i])&&(v.has(m=e.call(r,r.__data__,i))?g[i]=r:v.set(m,r),y[i]=m);for(i=-1;++i<h;)(r=v.get(m=e.call(n,o=n[i],i)))?r!==!0&&(f[i]=r,r.__data__=o):p[i]=B(o),v.set(m,!0);for(i=-1;++i<a;)i in y&&v.get(y[i])!==!0&&(g[i]=t[i])}else{for(i=-1;++i<d;)r=t[i],o=n[i],r?(r.__data__=o,f[i]=r):p[i]=B(o);for(;i<h;++i)p[i]=B(n[i]);for(;i<a;++i)g[i]=t[i]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,s.push(p),l.push(f),u.push(g)}var i,r,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(i=this[0]).length);++o<a;)(r=i[o])&&(t[o]=r.__data__);return t}var s=U([]),l=E([]),u=E([]);if("function"==typeof t)for(;++o<a;)n(i=this[o],t.call(i,i.parentNode.__data__,o));else for(;++o<a;)n(i=this[o],t);return l.enter=function(){return s},l.exit=function(){return u},l},Aa.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Aa.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=W(t));for(var o=0,a=this.length;o<a;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return E(r)},Aa.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Aa.sort=function(t){t=Y.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Aa.each=function(t){return V(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Aa.call=function(t){var e=ha(arguments);return t.apply(e[0]=this,e),this},Aa.empty=function(){return!this.node()},Aa.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var o=n[i];if(o)return o}return null},Aa.size=function(){var t=0;return V(this,function(){++t}),t};var Ra=[];ua.selection.enter=U,ua.selection.enter.prototype=Ra,Ra.append=Aa.append,Ra.empty=Aa.empty,Ra.node=Aa.node,Ra.call=Aa.call,Ra.size=Aa.size,Ra.select=function(t){for(var e,n,i,r,o,a=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(o=r[u])?(e.push(i[u]=n=t.call(r.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return E(a)},Ra.insert=function(t,e){return arguments.length<2&&(e=q(this)),Aa.insert.call(this,t,e)},ua.select=function(e){var n;return"string"==typeof e?(n=[Ta(e,da)],n.parentNode=da.documentElement):(n=[e],n.parentNode=t(e)),E([n])},ua.selectAll=function(t){var e;return"string"==typeof t?(e=ha(Ea(t,da)),e.parentNode=da.documentElement):(e=ha(t),e.parentNode=null),E([e])},Aa.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(e=!1);for(n in t)this.each(X(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(X(t,e,n))};var Pa=ua.map({mouseenter:"mouseover",mouseleave:"mouseout"});da&&Pa.forEach(function(t){"on"+t in da&&Pa.remove(t)});var Na,za=0;ua.mouse=function(t){return Z(t,M())};var La=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ua.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=M().changedTouches),e)for(var i,r=0,o=e.length;r<o;++r)if((i=e[r]).identifier===n)return Z(t,i)},ua.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function e(t,e,n,o,a){return function(){function s(){var t,n,i=e(d,g);i&&(t=i[0]-b[0],n=i[1]-b[1],p|=t|n,b=i,f({type:"drag",x:i[0]+u[0],y:i[1]+u[1],dx:t,dy:n}))}function l(){e(d,g)&&(v.on(o+m,null).on(a+m,null),y(p),f({type:"dragend"}))}var u,c=this,h=ua.event.target.correspondingElement||ua.event.target,d=c.parentNode,f=i.of(c,arguments),p=0,g=t(),m=".drag"+(null==g?"":"-"+g),v=ua.select(n(h)).on(o+m,s).on(a+m,l),y=K(h),b=e(d,g);r?(u=r.apply(c,arguments),u=[u.x-b[0],u.y-b[1]]):u=[0,0],f({type:"dragstart"})}}var i=T(t,"drag","dragstart","dragend"),r=null,o=e(_,ua.mouse,n,"mousemove","mouseup"),a=e(Q,ua.touch,b,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},ua.rebind(t,i,"on")},ua.touches=function(t,e){return arguments.length<2&&(e=M().touches),e?ha(e).map(function(e){var n=Z(t,e);return n.identifier=e.identifier,n}):[]};var Ia=1e-6,Ha=Ia*Ia,ja=Math.PI,Fa=2*ja,Ba=Fa-Ia,Wa=ja/2,Ya=ja/180,Va=180/ja,Ua=Math.SQRT2,qa=2,Xa=4;ua.interpolateZoom=function(t,e){var n,i,r=t[0],o=t[1],a=t[2],s=e[0],l=e[1],u=e[2],c=s-r,h=l-o,d=c*c+h*h;if(d<Ha)i=Math.log(u/a)/Ua,n=function(t){return[r+t*c,o+t*h,a*Math.exp(Ua*t*i)]};else{var f=Math.sqrt(d),p=(u*u-a*a+Xa*d)/(2*a*qa*f),g=(u*u-a*a-Xa*d)/(2*u*qa*f),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);i=(v-m)/Ua,n=function(t){var e=t*i,n=rt(m),s=a/(qa*f)*(n*ot(Ua*e+m)-it(m));return[r+s*c,o+s*h,a*n/rt(Ua*e+m)]}}return n.duration=1e3*i,n},ua.behavior.zoom=function(){function t(t){t.on(D,h).on($a+".zoom",f).on("dblclick.zoom",p).on(N,d)}function e(t){return[(t[0]-C.x)/C.k,(t[1]-C.y)/C.k]}function i(t){return[t[0]*C.k+C.x,t[1]*C.k+C.y]}function r(t){C.k=Math.max(E[0],Math.min(E[1],t))}function o(t,e){e=i(e),C.x+=t[0]-e[0],C.y+=t[1]-e[1]}function a(e,n,i,a){e.__chart__={x:C.x,y:C.y,k:C.k},r(Math.pow(2,a)),o(m=n,i),e=ua.select(e),O>0&&(e=e.transition().duration(O)),e.call(t.event)}function s(){x&&x.domain(w.range().map(function(t){return(t-C.x)/C.k}).map(w.invert)),k&&k.domain(_.range().map(function(t){return(t-C.y)/C.k}).map(_.invert))}function l(t){A++||t({type:"zoomstart"})}function u(t){s(),t({type:"zoom",scale:C.k,translate:[C.x,C.y]})}function c(t){--A||(t({type:"zoomend"}),m=null)}function h(){function t(){s=1,o(ua.mouse(r),d),u(a)}function i(){h.on(R,null).on(P,null),f(s),c(a)}var r=this,a=z.of(r,arguments),s=0,h=ua.select(n(r)).on(R,t).on(P,i),d=e(ua.mouse(r)),f=K(r);Wl.call(r),l(a)}function d(){function t(){var t=ua.touches(p);return f=C.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function n(){var e=ua.event.target;ua.select(e).on(w,i).on(x,s),_.push(e);for(var n=ua.event.changedTouches,r=0,o=n.length;r<o;++r)m[n[r].identifier]=null;var l=t(),u=Date.now();if(1===l.length){if(u-b<500){var c=l[0];a(p,c,m[c.identifier],Math.floor(Math.log(C.k)/Math.LN2)+1),S()}b=u}else if(l.length>1){var c=l[0],h=l[1],d=c[0]-h[0],f=c[1]-h[1];v=d*d+f*f}}function i(){var t,e,n,i,a=ua.touches(p);Wl.call(p);for(var s=0,l=a.length;s<l;++s,i=null)if(n=a[s],i=m[n.identifier]){if(e)break;t=n,e=i}if(i){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,h=v&&Math.sqrt(c/v);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],r(h*f)}b=null,o(t,e),u(g)}function s(){if(ua.event.touches.length){for(var e=ua.event.changedTouches,n=0,i=e.length;n<i;++n)delete m[e[n].identifier];for(var r in m)return void t()}ua.selectAll(_).on(y,null),k.on(D,h).on(N,d),M(),c(g)}var f,p=this,g=z.of(p,arguments),m={},v=0,y=".zoom-"+ua.event.changedTouches[0].identifier,w="touchmove"+y,x="touchend"+y,_=[],k=ua.select(p),M=K(p);n(),l(g),k.on(D,null).on(N,n)}function f(){var t=z.of(this,arguments);y?clearTimeout(y):(Wl.call(this),g=e(m=v||ua.mouse(this)),l(t)),y=setTimeout(function(){y=null,c(t)},50),S(),r(Math.pow(2,.002*Ga())*C.k),o(m,g),u(t)}function p(){var t=ua.mouse(this),n=Math.log(C.k)/Math.LN2;a(this,t,e(t),ua.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var g,m,v,y,b,w,x,_,k,C={x:0,y:0,k:1},M=[960,500],E=Ka,O=250,A=0,D="mousedown.zoom",R="mousemove.zoom",P="mouseup.zoom",N="touchstart.zoom",z=T(t,"zoomstart","zoom","zoomend");return $a||($a="onwheel"in da?(Ga=function(){return-ua.event.deltaY*(ua.event.deltaMode?120:1)},"wheel"):"onmousewheel"in da?(Ga=function(){return ua.event.wheelDelta},"mousewheel"):(Ga=function(){return-ua.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=z.of(this,arguments),e=C;Fl?ua.select(this).transition().each("start.zoom",function(){C=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var n=M[0],i=M[1],r=m?m[0]:n/2,o=m?m[1]:i/2,a=ua.interpolateZoom([(r-C.x)/C.k,(o-C.y)/C.k,n/C.k],[(r-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var i=a(e),s=n/i[2];this.__chart__=C={x:r-i[0]*s,y:o-i[1]*s,k:s},u(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=C,l(t),u(t),c(t))})},t.translate=function(e){return arguments.length?(C={x:+e[0],y:+e[1],k:C.k},s(),t):[C.x,C.y]},t.scale=function(e){return arguments.length?(C={x:C.x,y:C.y,k:null},r(+e),s(),t):C.k},t.scaleExtent=function(e){return arguments.length?(E=null==e?Ka:[+e[0],+e[1]],t):E},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(M=e&&[+e[0],+e[1]],t):M},t.duration=function(e){return arguments.length?(O=+e,t):O},t.x=function(e){return arguments.length?(x=e,w=e.copy(),C={x:0,y:0,k:1},t):x},t.y=function(e){return arguments.length?(k=e,_=e.copy(),C={x:0,y:0,k:1},t):k},ua.rebind(t,z,"on")};var Ga,$a,Ka=[0,1/0];ua.color=st,st.prototype.toString=function(){return this.rgb()+""},ua.hsl=lt;var Za=lt.prototype=new st;Za.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,this.l/t)},Za.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,t*this.l)},Za.rgb=function(){return ut(this.h,this.s,this.l)},ua.hcl=ct;var Qa=ct.prototype=new st;Qa.brighter=function(t){return new ct(this.h,this.c,Math.min(100,this.l+Ja*(arguments.length?t:1)))},Qa.darker=function(t){return new ct(this.h,this.c,Math.max(0,this.l-Ja*(arguments.length?t:1)))},Qa.rgb=function(){return ht(this.h,this.c,this.l).rgb()},ua.lab=dt;var Ja=18,ts=.95047,es=1,ns=1.08883,is=dt.prototype=new st;is.brighter=function(t){return new dt(Math.min(100,this.l+Ja*(arguments.length?t:1)),this.a,this.b)},is.darker=function(t){return new dt(Math.max(0,this.l-Ja*(arguments.length?t:1)),this.a,this.b)},is.rgb=function(){return ft(this.l,this.a,this.b)},ua.rgb=yt;var rs=yt.prototype=new st;rs.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&e<r&&(e=r),n&&n<r&&(n=r),i&&i<r&&(i=r),new yt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new yt(r,r,r)},rs.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new yt(t*this.r,t*this.g,t*this.b)},rs.hsl=function(){return kt(this.r,this.g,this.b)},rs.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var os=ua.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});os.forEach(function(t,e){os.set(t,bt(e))}),ua.functor=Tt,ua.xhr=Et(b),ua.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=Ot(t,e,null==n?i:r(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?i:r(t)):n},a}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(c>=u)return a;if(r)return r=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++c):10===i&&(r=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<u;){var i=t.charCodeAt(c++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(c)&&(++c,++s);else if(i!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var i,r,o={},a={},s=[],u=t.length,c=0,h=0;(i=n())!==a;){for(var d=[];i!==o&&i!==a;)d.push(i),i=n();e&&null==(d=e(d,h++))||s.push(d)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new y,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(a).join(t)].concat(e.map(function(e){return r.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},ua.csv=ua.dsv(",","text/csv"),ua.tsv=ua.dsv("\t","text/tab-separated-values");var as,ss,ls,us,cs=this[x(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ua.timer=function(){Rt.apply(this,arguments)},ua.timer.flush=function(){Nt(),zt()},ua.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var hs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(It);ua.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=ua.round(t,Lt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),hs[8+n/3]};var ds=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,fs=ua.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ua.round(t,Lt(t,e))).toFixed(Math.max(0,Math.min(20,Lt(t*(1+1e-15),e))));
}}),ps=ua.time={},gs=Date;Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ms.setUTCDate.apply(this._,arguments)},setDay:function(){ms.setUTCDay.apply(this._,arguments)},setFullYear:function(){ms.setUTCFullYear.apply(this._,arguments)},setHours:function(){ms.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ms.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ms.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ms.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ms.setUTCSeconds.apply(this._,arguments)},setTime:function(){ms.setTime.apply(this._,arguments)}};var ms=Date.prototype;ps.year=Bt(function(t){return t=ps.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ps.years=ps.year.range,ps.years.utc=ps.year.utc.range,ps.day=Bt(function(t){var e=new gs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ps.days=ps.day.range,ps.days.utc=ps.day.utc.range,ps.dayOfYear=function(t){var e=ps.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ps[t]=Bt(function(t){return(t=ps.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ps.year(t).getDay();return Math.floor((ps.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ps[t+"s"]=n.range,ps[t+"s"].utc=n.utc.range,ps[t+"OfYear"]=function(t){var n=ps.year(t).getDay();return Math.floor((ps.dayOfYear(t)+(n+e)%7)/7)}}),ps.week=ps.sunday,ps.weeks=ps.sunday.range,ps.weeks.utc=ps.sunday.utc.range,ps.weekOfYear=ps.sundayOfYear;var vs={"-":"",_:" ",0:"0"},ys=/^\s*\d+/,bs=/^%/;ua.locale=function(t){return{numberFormat:Ht(t),timeFormat:Yt(t)}};var ws=ua.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ua.format=ws.numberFormat,ua.geo={},ce.prototype={s:0,t:0,add:function(t){he(t,this.t,xs),he(xs.s,this.s,this),this.s?this.t+=xs.t:this.s=xs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var xs=new ce;ua.geo.stream=function(t,e){t&&_s.hasOwnProperty(t.type)?_s[t.type](t,e):de(t,e)};var _s={Feature:function(t,e){de(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)de(n[i].geometry,e)}},ks={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){fe(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)fe(n[i],e,0)},Polygon:function(t,e){pe(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)pe(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)de(n[i],e)}};ua.geo.area=function(t){return Cs=0,ua.geo.stream(t,Ms),Cs};var Cs,Ss=new ce,Ms={sphere:function(){Cs+=4*ja},point:_,lineStart:_,lineEnd:_,polygonStart:function(){Ss.reset(),Ms.lineStart=ge},polygonEnd:function(){var t=2*Ss;Cs+=t<0?4*ja+t:t,Ms.lineStart=Ms.lineEnd=Ms.point=_}};ua.geo.bounds=function(){function t(t,e){b.push(w=[c=t,d=t]),e<h&&(h=e),e>f&&(f=e)}function e(e,n){var i=me([e*Ya,n*Ya]);if(v){var r=ye(v,i),o=[r[1],-r[0],0],a=ye(o,r);xe(a),a=_e(a);var l=e-p,u=l>0?1:-1,g=a[0]*Va*u,m=xa(l)>180;if(m^(u*p<g&&g<u*e)){var y=a[1]*Va;y>f&&(f=y)}else if(g=(g+360)%360-180,m^(u*p<g&&g<u*e)){var y=-a[1]*Va;y<h&&(h=y)}else n<h&&(h=n),n>f&&(f=n);m?e<p?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e):d>=c?(e<c&&(c=e),e>d&&(d=e)):e>p?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e)}else t(e,n);v=i,p=e}function n(){x.point=e}function i(){w[0]=c,w[1]=d,x.point=t,v=null}function r(t,n){if(v){var i=t-p;y+=xa(i)>180?i+(i>0?360:-360):i}else g=t,m=n;Ms.point(t,n),e(t,n)}function o(){Ms.lineStart()}function a(){r(g,m),Ms.lineEnd(),xa(y)>Ia&&(c=-(d=180)),w[0]=c,w[1]=d,v=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,h,d,f,p,g,m,v,y,b,w,x={point:t,lineStart:n,lineEnd:i,polygonStart:function(){x.point=r,x.lineStart=o,x.lineEnd=a,y=0,Ms.polygonStart()},polygonEnd:function(){Ms.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=i,Ss<0?(c=-(d=180),h=-(f=90)):y>Ia?f=90:y<-Ia&&(h=-90),w[0]=c,w[1]=d}};return function(t){f=d=-(c=h=1/0),b=[],ua.geo.stream(t,x);var e=b.length;if(e){b.sort(l);for(var n,i=1,r=b[0],o=[r];i<e;++i)n=b[i],u(n[0],r)||u(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):o.push(r=n);for(var a,n,p=-(1/0),e=o.length-1,i=0,r=o[e];i<=e;r=n,++i)n=o[i],(a=s(r[1],n[0]))>p&&(p=a,c=n[0],d=r[1])}return b=w=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[d,f]]}}(),ua.geo.centroid=function(t){Ts=Es=Os=As=Ds=Rs=Ps=Ns=zs=Ls=Is=0,ua.geo.stream(t,Hs);var e=zs,n=Ls,i=Is,r=e*e+n*n+i*i;return r<Ha&&(e=Rs,n=Ps,i=Ns,Es<Ia&&(e=Os,n=As,i=Ds),r=e*e+n*n+i*i,r<Ha)?[NaN,NaN]:[Math.atan2(n,e)*Va,nt(i/Math.sqrt(r))*Va]};var Ts,Es,Os,As,Ds,Rs,Ps,Ns,zs,Ls,Is,Hs={sphere:_,point:Ce,lineStart:Me,lineEnd:Te,polygonStart:function(){Hs.lineStart=Ee},polygonEnd:function(){Hs.lineStart=Me}},js=Ne(Ae,He,Fe,[-ja,-ja/2]),Fs=1e9;ua.geo.clipExtent=function(){var t,e,n,i,r,o,a={stream:function(t){return r&&(r.valid=!1),r=o(t),r.valid=!0,r},extent:function(s){return arguments.length?(o=Ve(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),a):[[t,e],[n,i]]}};return a.extent([[0,0],[960,500]])},(ua.geo.conicEqualArea=function(){return Ue(qe)}).raw=qe,ua.geo.albers=function(){return ua.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ua.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(i(o,a),e)||r(o,a),e}var e,n,i,r,o=ua.geo.albers(),a=ua.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ua.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?a:r>=.166&&r<.234&&i>=-.214&&i<-.115?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var u=o.scale(),c=+e[0],h=+e[1];return n=o.translate(e).clipExtent([[c-.455*u,h-.238*u],[c+.455*u,h+.238*u]]).stream(l).point,i=a.translate([c-.307*u,h+.201*u]).clipExtent([[c-.425*u+Ia,h+.12*u+Ia],[c-.214*u-Ia,h+.234*u-Ia]]).stream(l).point,r=s.translate([c-.205*u,h+.212*u]).clipExtent([[c-.214*u+Ia,h+.166*u+Ia],[c-.115*u-Ia,h+.234*u-Ia]]).stream(l).point,t},t.scale(1070)};var Bs,Ws,Ys,Vs,Us,qs,Xs={point:_,lineStart:_,lineEnd:_,polygonStart:function(){Ws=0,Xs.lineStart=Xe},polygonEnd:function(){Xs.lineStart=Xs.lineEnd=Xs.point=_,Bs+=xa(Ws/2)}},Gs={point:Ge,lineStart:_,lineEnd:_,polygonStart:_,polygonEnd:_},$s={point:Ze,lineStart:Qe,lineEnd:Je,polygonStart:function(){$s.lineStart=tn},polygonEnd:function(){$s.point=Ze,$s.lineStart=Qe,$s.lineEnd=Je}};ua.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=r(o)),ua.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,i,r,o,a,s=4.5;return t.area=function(t){return Bs=0,ua.geo.stream(t,r(Xs)),Bs},t.centroid=function(t){return Os=As=Ds=Rs=Ps=Ns=zs=Ls=Is=0,ua.geo.stream(t,r($s)),Is?[zs/Is,Ls/Is]:Ns?[Rs/Ns,Ps/Ns]:Ds?[Os/Ds,As/Ds]:[NaN,NaN]},t.bounds=function(t){return Us=qs=-(Ys=Vs=1/0),ua.geo.stream(t,r(Gs)),[[Ys,Vs],[Us,qs]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||rn(t):b,e()):n},t.context=function(t){return arguments.length?(o=null==(i=t)?new $e:new en(t),"function"!=typeof s&&o.pointRadius(s),e()):i},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(ua.geo.albersUsa()).context(null)},ua.geo.transform=function(t){return{stream:function(e){var n=new on(e);for(var i in t)n[i]=t[i];return n}}},on.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ua.geo.projection=sn,ua.geo.projectionMutator=ln,(ua.geo.equirectangular=function(){return sn(cn)}).raw=cn.invert=cn,ua.geo.rotation=function(t){function e(e){return e=t(e[0]*Ya,e[1]*Ya),e[0]*=Va,e[1]*=Va,e}return t=dn(t[0]%360*Ya,t[1]*Ya,t.length>2?t[2]*Ya:0),e.invert=function(e){return e=t.invert(e[0]*Ya,e[1]*Ya),e[0]*=Va,e[1]*=Va,e},e},hn.invert=cn,ua.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=dn(-t[0]*Ya,-t[1]*Ya,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Va,t[1]*=Va}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=mn((e=+i)*Ya,r*Ya),t):e},t.precision=function(i){return arguments.length?(n=mn(e*Ya,(r=+i)*Ya),t):r},t.angle(90)},ua.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Ya,r=t[1]*Ya,o=e[1]*Ya,a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*a)*n+(n=u*c-l*h*s)*n),l*c+u*h*s)},ua.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ua.range(Math.ceil(o/m)*m,r,m).map(d).concat(ua.range(Math.ceil(u/v)*v,l,v).map(f)).concat(ua.range(Math.ceil(i/p)*p,n,p).filter(function(t){return xa(t%m)>Ia}).map(c)).concat(ua.range(Math.ceil(s/g)*g,a,g).filter(function(t){return xa(t%v)>Ia}).map(h))}var n,i,r,o,a,s,l,u,c,h,d,f,p=10,g=p,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(f(l).slice(1),d(r).reverse().slice(1),f(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],u=+e[0][1],l=+e[1][1],o>r&&(e=o,o=r,r=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[r,l]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],i>n&&(e=i,i=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(y)):[[i,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=yn(s,a,90),h=bn(i,n,y),d=yn(u,l,90),f=bn(o,r,y),t):y},t.majorExtent([[-180,-90+Ia],[180,90-Ia]]).minorExtent([[-180,-80-Ia],[180,80+Ia]])},ua.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=wn,r=xn;return t.distance=function(){return ua.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},ua.geo.interpolate=function(t,e){return _n(t[0]*Ya,t[1]*Ya,e[0]*Ya,e[1]*Ya)},ua.geo.length=function(t){return Ks=0,ua.geo.stream(t,Zs),Ks};var Ks,Zs={sphere:_,point:_,lineStart:kn,lineEnd:_,polygonStart:_,polygonEnd:_},Qs=Cn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ua.geo.azimuthalEqualArea=function(){return sn(Qs)}).raw=Qs;var Js=Cn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},b);(ua.geo.azimuthalEquidistant=function(){return sn(Js)}).raw=Js,(ua.geo.conicConformal=function(){return Ue(Sn)}).raw=Sn,(ua.geo.conicEquidistant=function(){return Ue(Mn)}).raw=Mn;var tl=Cn(function(t){return 1/t},Math.atan);(ua.geo.gnomonic=function(){return sn(tl)}).raw=tl,Tn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Wa]},(ua.geo.mercator=function(){return En(Tn)}).raw=Tn;var el=Cn(function(){return 1},Math.asin);(ua.geo.orthographic=function(){return sn(el)}).raw=el;var nl=Cn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ua.geo.stereographic=function(){return sn(nl)}).raw=nl,On.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Wa]},(ua.geo.transverseMercator=function(){var t=En(On),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=On,ua.geom={},ua.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=Tt(n),o=Tt(i),a=t.length,s=[],l=[];for(e=0;e<a;e++)s.push([+r.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(Pn),e=0;e<a;e++)l.push([s[e][0],-s[e][1]]);var u=Rn(s),c=Rn(l),h=c[0]===u[0],d=c[c.length-1]===u[u.length-1],f=[];for(e=u.length-1;e>=0;--e)f.push(t[s[u[e]][2]]);for(e=+h;e<c.length-d;++e)f.push(t[s[c[e]][2]]);return f}var n=An,i=Dn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},ua.geom.polygon=function(t){return Ma(t,il),t};var il=ua.geom.polygon.prototype=[];il.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},il.centroid=function(t){var e,n,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},il.clip=function(t){for(var e,n,i,r,o,a,s=Ln(t),l=-1,u=this.length-Ln(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,r=this[l],o=e[(i=e.length-s)-1],n=-1;++n<i;)a=e[n],Nn(a,c,r)?(Nn(o,c,r)||t.push(zn(o,a,c,r)),t.push(a)):Nn(o,c,r)&&t.push(zn(o,a,c,r)),o=a;s&&t.push(t[0]),c=r}return t};var rl,ol,al,sl,ll,ul=[],cl=[];Vn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(qn),e.length},ni.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ii.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=si(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(oi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,ai(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(ai(this,n),t=n,n=t.U),n.C=!1,i.C=!0,oi(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?si(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,oi(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ai(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,oi(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,ai(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,oi(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,ai(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},ua.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=s[0][0],r=s[0][1],o=s[1][0],a=s[1][1];return li(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=i&&u.x<=o&&u.y>=r&&u.y<=a?[[i,a],[o,a],[o,r],[i,r]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Ia)*Ia,y:Math.round(a(t,e)/Ia)*Ia,i:e}})}var i=An,r=Dn,o=i,a=r,s=hl;return t?e(t):(e.links=function(t){return li(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return li(n(t)).cells.forEach(function(n,i){for(var r,o,a=n.site,s=n.edges.sort(qn),l=-1,u=s.length,c=s[u-1].edge,h=c.l===a?c.r:c.l;++l<u;)r=c,o=h,c=s[l].edge,h=c.l===a?c.r:c.l,i<o.i&&i<h.i&&ci(a,o,h)<0&&e.push([t[i],t[o.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(o=Tt(i=t),e):i},e.y=function(t){return arguments.length?(a=Tt(r=t),e):r},e.clipExtent=function(t){return arguments.length?(s=null==t?hl:t,e):s===hl?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===hl?null:s&&s[1]},e)};var hl=[[-1e6,-1e6],[1e6,1e6]];ua.geom.delaunay=function(t){return ua.geom.voronoi().triangles(t)},ua.geom.quadtree=function(t,e,n,i,r){function o(t){function o(t,e,n,i,r,o,a,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(xa(l-n)+xa(c-i)<.01)u(t,e,n,i,r,o,a,s);else{var h=t.point;t.x=t.y=t.point=null,u(t,h,l,c,r,o,a,s),u(t,e,n,i,r,o,a,s)}else t.x=n,t.y=i,t.point=e}else u(t,e,n,i,r,o,a,s)}function u(t,e,n,i,r,a,s,l){var u=.5*(r+s),c=.5*(a+l),h=n>=u,d=i>=c,f=d<<1|h;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]=fi()),h?r=u:s=u,d?a=c:l=c,o(t,e,n,i,r,a,s,l)}var c,h,d,f,p,g,m,v,y,b=Tt(s),w=Tt(l);if(null!=e)g=e,m=n,v=i,y=r;else if(v=y=-(g=m=1/0),h=[],d=[],p=t.length,a)for(f=0;f<p;++f)c=t[f],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),h.push(c.x),d.push(c.y);else for(f=0;f<p;++f){var x=+b(c=t[f],f),_=+w(c,f);x<g&&(g=x),_<m&&(m=_),x>v&&(v=x),_>y&&(y=_),h.push(x),d.push(_)}var k=v-g,C=y-m;k>C?y=m+k:v=g+C;var S=fi();if(S.add=function(t){o(S,t,+b(t,++f),+w(t,f),g,m,v,y)},S.visit=function(t){pi(t,S,g,m,v,y)},S.find=function(t){return gi(S,t[0],t[1],g,m,v,y)},f=-1,null==e){for(;++f<p;)o(S,t[f],h[f],d[f],g,m,v,y);--f}else t.forEach(S.add);return h=d=t=c=null,S}var a,s=An,l=Dn;return(a=arguments.length)?(s=hi,l=di,3===a&&(r=n,i=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),o):null==e?null:[[e,n],[i,r]]},o.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),o):null==e?null:[i-e,r-n]},o)},ua.interpolateRgb=mi,ua.interpolateObject=vi,ua.interpolateNumber=yi,ua.interpolateString=bi;var dl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fl=new RegExp(dl.source,"g");ua.interpolate=wi,ua.interpolators=[function(t,e){var n=typeof e;return("string"===n?os.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?mi:bi:e instanceof st?mi:Array.isArray(e)?xi:"object"===n&&isNaN(e)?vi:yi)(t,e)}],ua.interpolateArray=xi;var pl=function(){return b},gl=ua.map({linear:pl,poly:Ei,quad:function(){return Si},cubic:function(){return Mi},sin:function(){return Oi},exp:function(){return Ai},circle:function(){return Di},elastic:Ri,back:Pi,bounce:function(){return Ni}}),ml=ua.map({"in":b,out:ki,"in-out":Ci,"out-in":function(t){return Ci(ki(t))}});ua.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return n=gl.get(n)||pl,i=ml.get(i)||b,_i(i(n.apply(null,ca.call(arguments,1))))},ua.interpolateHcl=zi,ua.interpolateHsl=Li,ua.interpolateLab=Ii,ua.interpolateRound=Hi,ua.transform=function(t){var e=da.createElementNS(ua.ns.prefix.svg,"g");return(ua.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new ji(n?n.matrix:vl)})(t)},ji.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var vl={a:1,b:0,c:0,d:1,e:0,f:0};ua.interpolateTransform=Gi,ua.layout={},ua.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Zi(t[n]));return e}},ua.layout.chord=function(){function t(){var t,u,h,d,f,p={},g=[],m=ua.range(o),v=[];for(n=[],i=[],t=0,d=-1;++d<o;){for(u=0,f=-1;++f<o;)u+=r[d][f];g.push(u),v.push(ua.range(o)),t+=u}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),s&&v.forEach(function(t,e){t.sort(function(t,n){return s(r[e][t],r[e][n])})}),t=(Fa-c*o)/t,u=0,d=-1;++d<o;){for(h=u,f=-1;++f<o;){var y=m[d],b=v[y][f],w=r[y][b],x=u,_=u+=w*t;p[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:_,value:w}}i[y]={index:y,startAngle:h,endAngle:u,value:g[y]},u+=c}for(d=-1;++d<o;)for(f=d-1;++f<o;){var k=p[d+"-"+f],C=p[f+"-"+d];(k.value||C.value)&&n.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,o,a,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(c=t,n=i=null,u):c},u.sortGroups=function(t){return arguments.length?(a=t,n=i=null,u):a},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},ua.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=r-n,l=o*o+a*a;if(s*s/v<l){if(l<g){var u=e.charge/l;t.px-=o*u,t.py-=a*u}return!0}if(e.point&&l&&l<g){var u=e.pointCharge/l;t.px-=o*u,t.py-=a*u}}return!e.charge}}function e(t){t.px=ua.event.x,t.py=ua.event.y,l.resume()}var n,i,r,o,a,s,l={},u=ua.dispatch("start","tick","end"),c=[1,1],h=.9,d=yl,f=bl,p=-30,g=wl,m=.1,v=.64,y=[],w=[];return l.tick=function(){if((r*=.99)<.005)return n=null,u.end({type:"end",alpha:r=0}),!0;var e,i,l,d,f,g,v,b,x,_=y.length,k=w.length;for(i=0;i<k;++i)l=w[i],d=l.source,f=l.target,b=f.x-d.x,x=f.y-d.y,(g=b*b+x*x)&&(g=r*a[i]*((g=Math.sqrt(g))-o[i])/g,b*=g,x*=g,f.x-=b*(v=d.weight+f.weight?d.weight/(d.weight+f.weight):.5),f.y-=x*v,d.x+=b*(v=1-v),d.y+=x*v);if((v=r*m)&&(b=c[0]/2,x=c[1]/2,i=-1,v))for(;++i<_;)l=y[i],l.x+=(b-l.x)*v,l.y+=(x-l.y)*v;if(p)for(rr(e=ua.geom.quadtree(y),r,s),i=-1;++i<_;)(l=y[i]).fixed||e.visit(t(l));for(i=-1;++i<_;)l=y[i],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*h,l.y-=(l.py-(l.py=l.y))*h);u.tick({type:"tick",alpha:r})},l.nodes=function(t){return arguments.length?(y=t,l):y},l.links=function(t){return arguments.length?(w=t,l):w},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,l):f},l.friction=function(t){return arguments.length?(h=+t,l):h},l.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(m=+t,l):m},l.theta=function(t){return arguments.length?(v=t*t,l):Math.sqrt(v)},l.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:r=0})):t>0&&(u.start({type:"start",alpha:r=t}),n=Rt(l.tick)),l):r},l.start=function(){function t(t,i){if(!n){for(n=new Array(r),l=0;l<r;++l)n[l]=[];for(l=0;l<u;++l){var o=w[l];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[e],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][t]))return a;return Math.random()*i}var e,n,i,r=y.length,u=w.length,h=c[0],g=c[1];for(e=0;e<r;++e)(i=y[e]).index=e,i.weight=0;for(e=0;e<u;++e)i=w[e],"number"==typeof i.source&&(i.source=y[i.source]),"number"==typeof i.target&&(i.target=y[i.target]),++i.source.weight,++i.target.weight;for(e=0;e<r;++e)i=y[e],isNaN(i.x)&&(i.x=t("x",h)),isNaN(i.y)&&(i.y=t("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(o=[],"function"==typeof d)for(e=0;e<u;++e)o[e]=+d.call(this,w[e],e);else for(e=0;e<u;++e)o[e]=d;if(a=[],"function"==typeof f)for(e=0;e<u;++e)a[e]=+f.call(this,w[e],e);else for(e=0;e<u;++e)a[e]=f;if(s=[],"function"==typeof p)for(e=0;e<r;++e)s[e]=+p.call(this,y[e],e);else for(e=0;e<r;++e)s[e]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return i||(i=ua.behavior.drag().origin(b).on("dragstart.force",tr).on("drag.force",e).on("dragend.force",er)),arguments.length?void this.on("mouseover.force",nr).on("mouseout.force",ir).call(i):i},ua.rebind(l,u,"on")};var yl=20,bl=1,wl=1/0;ua.layout.hierarchy=function(){function t(r){var o,a=[r],s=[];for(r.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(t,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;i&&(o.value=0),o.children=u}else i&&(o.value=+i.call(t,o,o.depth)||0),delete o.children;return sr(r,function(t){var n,r;e&&(n=t.children)&&n.sort(e),i&&(r=t.parent)&&(r.value+=t.value)}),s}var e=cr,n=lr,i=ur;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(i=e,t):i},t.revalue=function(e){return i&&(ar(e,function(t){t.children&&(t.value=0)}),sr(e,function(e){var n;e.children||(e.value=+i.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},ua.layout.partition=function(){function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(a=o.length)){var a,s,l,u=-1;for(i=e.value?i/e.value:0;++u<a;)t(s=o[u],n,l=s.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,e(n[o]));return 1+i}function n(n,o){var a=i.call(this,n,o);return t(a[0],0,r[0],r[1]/e(a[0])),a}var i=ua.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},or(n,i)},ua.layout.pie=function(){function t(a){var s,l=a.length,u=a.map(function(n,i){return+e.call(t,n,i)}),c=+("function"==typeof i?i.apply(this,arguments):i),h=("function"==typeof r?r.apply(this,arguments):r)-c,d=Math.min(Math.abs(h)/l,+("function"==typeof o?o.apply(this,arguments):o)),f=d*(h<0?-1:1),p=ua.sum(u),g=p?(h-l*f)/p:0,m=ua.range(l),v=[];return null!=n&&m.sort(n===xl?function(t,e){return u[e]-u[t]}:function(t,e){return n(a[t],a[e])}),m.forEach(function(t){v[t]={data:a[t],value:s=u[t],startAngle:c,endAngle:c+=s*g+f,padAngle:d}}),v}var e=Number,n=xl,i=0,r=Fa,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var xl={};ua.layout.stack=function(){function t(s,l){if(!(d=s.length))return s;var u=s.map(function(n,i){return e.call(t,n,i)}),c=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),h=n.call(t,c,l);u=ua.permute(u,h),c=ua.permute(c,h);var d,f,p,g,m=i.call(t,c,l),v=u[0].length;for(p=0;p<v;++p)for(r.call(t,u[0][p],g=m[p],c[0][p][1]),f=1;f<d;++f)r.call(t,u[f][p],g+=c[f-1][p][1],c[f][p][1]);return s}var e=b,n=gr,i=mr,r=pr,o=dr,a=fr;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:_l.get(e)||gr,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:kl.get(e)||mr,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(r=e,t):r},t};var _l=ua.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(vr),o=t.map(yr),a=ua.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,l=0,u=[],c=[];for(e=0;e<i;++e)n=a[e],s<l?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return ua.range(t.length).reverse()},"default":gr}),kl=ua.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;n<o;++n){for(e=0,i=0;e<r;e++)i+=t[e][n][1];i>s&&(s=i),a.push(i)}for(n=0;n<o;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,i,r,o,a,s,l,u,c=t.length,h=t[0],d=h.length,f=[];for(f[0]=l=u=0,n=1;n<d;++n){for(e=0,r=0;e<c;++e)r+=t[e][n][1];for(e=0,o=0,s=h[n][0]-h[n-1][0];e<c;++e){for(i=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);i<e;++i)a+=(t[i][n][1]-t[i][n-1][1])/s;o+=a*t[e][n][1]}f[n]=l-=r?o/r*s:0,l<u&&(u=l)}for(n=0;n<d;++n)f[n]-=u;return f},expand:function(t){var e,n,i,r=t.length,o=t[0].length,a=1/r,s=[];for(n=0;n<o;++n){for(e=0,i=0;e<r;e++)i+=t[e][n][1];if(i)for(e=0;e<r;e++)t[e][n][1]/=i;else for(e=0;e<r;e++)t[e][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:mr});ua.layout.histogram=function(){function t(t,o){for(var a,s,l=[],u=t.map(n,this),c=i.call(this,u,o),h=r.call(this,c,u,o),o=-1,d=u.length,f=h.length-1,p=e?1:1/d;++o<f;)a=l[o]=[],a.dx=h[o+1]-(a.x=h[o]),a.y=0;if(f>0)for(o=-1;++o<d;)s=u[o],s>=c[0]&&s<=c[1]&&(a=l[ua.bisect(h,s,1,f)-1],a.y+=p,a.push(t[o]));return l}var e=!0,n=Number,i=_r,r=wr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=Tt(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return xr(t,e)}:Tt(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},ua.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],l=r[0],u=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,sr(s,function(t){t.r=+c(t.value)}),sr(s,Tr),i){var h=i*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;sr(s,function(t){t.r+=h}),sr(s,Tr),sr(s,function(t){t.r-=h})}return Ar(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var e,n=ua.layout.hierarchy().sort(kr),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},or(t,n)},ua.layout.tree=function(){function t(t,r){var c=a.call(this,t,r),h=c[0],d=e(h);if(sr(d,n),d.parent.m=-d.z,ar(d,i),u)ar(h,o);else{var f=h,p=h,g=h;ar(h,function(t){t.x<f.x&&(f=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var m=s(f,p)/2-f.x,v=l[0]/(p.x+s(p,f)/2+m),y=l[1]/(g.depth||1);ar(h,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,o=e.children,a=0,s=o.length;a<s;++a)i.push((o[a]=r={_:o[a],parent:e,children:(r=o[a].children)&&r.slice()||[],
A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){Lr(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+s(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+s(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function i(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var i,r=t,o=t,a=e,l=r.parent.children[0],u=r.m,c=o.m,h=a.m,d=l.m;a=Nr(a),r=Pr(r),a&&r;)l=Pr(l),o=Nr(o),o.a=t,i=a.z+h-r.z-u+s(a._,r._),i>0&&(zr(Ir(a,t,n),t,i),u+=i,c+=i),h+=a.m,u+=r.m,d+=l.m,c+=o.m;a&&!Nr(o)&&(o.t=a,o.m+=h-c),r&&!Pr(l)&&(l.t=r,l.m+=u-d,n=t)}return n}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=ua.layout.hierarchy().sort(null).value(null),s=Rr,l=[1,1],u=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(u=null==(l=e)?o:null,t):u?null:l},t.nodeSize=function(e){return arguments.length?(u=null==(l=e)?null:o,t):u?l:null},or(t,a)},ua.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),l=s[0],u=0;sr(l,function(t){var e=t.children;e&&e.length?(t.x=jr(e),t.y=Hr(e)):(t.x=a?u+=n(t,a):0,t.y=0,a=t)});var c=Fr(l),h=Br(l),d=c.x-n(c,h)/2,f=h.x+n(h,c)/2;return sr(l,r?function(t){t.x=(t.x-l.x)*i[0],t.y=(l.y-t.y)*i[1]}:function(t){t.x=(t.x-d)/(f-d)*i[0],t.y=(1-(l.y?t.y/l.y:1))*i[1]}),s}var e=ua.layout.hierarchy().sort(null).value(null),n=Rr,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},or(t,e)},ua.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function e(n){var o=n.children;if(o&&o.length){var a,s,l,u=h(n),c=[],d=o.slice(),p=1/0,g="slice"===f?u.dx:"dice"===f?u.dy:"slice-dice"===f?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==f||(s=i(c,g))<=p?(d.pop(),p=s):(c.area-=c.pop().area,r(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,g,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,a=h(e),s=i.slice(),l=[];for(t(s,a.dx*a.dy/e.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*p/i,i/(e*o*p)):1/0}function r(t,e,n,i){var r,o=-1,a=t.length,s=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++o<a;)r=t[o],r.x=s,r.y=u,r.dy=c,s+=r.dx=Math.min(n.x+n.dx-s,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++o<a;)r=t[o],r.x=s,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(i){var r=a||s(i),o=r[0];return o.x=o.y=0,o.value?(o.dx=u[0],o.dy=u[1]):o.dx=o.dy=0,a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),d&&(a=r),r}var a,s=ua.layout.hierarchy(),l=Math.round,u=[1,1],c=null,h=Wr,d=!1,f="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Wr(e):Yr(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Yr(e,t)}if(!arguments.length)return c;var i;return h=null==(c=t)?Wr:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(d=t,a=null,o):d},o.ratio=function(t){return arguments.length?(p=t,o):p},o.mode=function(t){return arguments.length?(f=t+"",o):f},or(o,s)},ua.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=ua.random.normal.apply(ua,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=ua.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},ua.scale={};var Cl={floor:b,ceil:b};ua.scale.linear=function(){return Kr([0,1],[0,1],wi,!1)};var Sl={s:1,g:1,p:1,r:1,e:1};ua.scale.log=function(){return ro(ua.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=ua.format(".0e"),Tl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ua.scale.pow=function(){return oo(ua.scale.linear(),1,[0,1])},ua.scale.sqrt=function(){return ua.scale.pow().exponent(.5)},ua.scale.ordinal=function(){return so([],{t:"range",a:[[]]})},ua.scale.category10=function(){return ua.scale.ordinal().range(El)},ua.scale.category20=function(){return ua.scale.ordinal().range(Ol)},ua.scale.category20b=function(){return ua.scale.ordinal().range(Al)},ua.scale.category20c=function(){return ua.scale.ordinal().range(Dl)};var El=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(wt),Ol=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(wt),Al=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(wt),Dl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(wt);ua.scale.quantile=function(){return lo([],[])},ua.scale.quantize=function(){return uo(0,1,[0,1])},ua.scale.threshold=function(){return co([.5],[0,1])},ua.scale.identity=function(){return ho([0,1])},ua.svg={},ua.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+i.apply(this,arguments)),c=a.apply(this,arguments)-Wa,h=s.apply(this,arguments)-Wa,d=Math.abs(h-c),f=c>h?0:1;if(u<t&&(p=u,u=t,t=p),d>=Ba)return e(u,f)+(t?e(t,1-f):"")+"Z";var p,g,m,v,y,b,w,x,_,k,C,S,M=0,T=0,E=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=o===Rl?Math.sqrt(t*t+u*u):+o.apply(this,arguments),f||(T*=-1),u&&(T=nt(m/u*Math.sin(v))),t&&(M=nt(m/t*Math.sin(v)))),u){y=u*Math.cos(c+T),b=u*Math.sin(c+T),w=u*Math.cos(h-T),x=u*Math.sin(h-T);var O=Math.abs(h-c-2*T)<=ja?0:1;if(T&&bo(y,b,w,x)===f^O){var A=(c+h)/2;y=u*Math.cos(A),b=u*Math.sin(A),w=x=null}}else y=b=0;if(t){_=t*Math.cos(h-M),k=t*Math.sin(h-M),C=t*Math.cos(c+M),S=t*Math.sin(c+M);var D=Math.abs(c-h+2*M)<=ja?0:1;if(M&&bo(_,k,C,S)===1-f^D){var R=(c+h)/2;_=t*Math.cos(R),k=t*Math.sin(R),C=S=null}}else _=k=0;if(d>Ia&&(p=Math.min(Math.abs(u-t)/2,+r.apply(this,arguments)))>.001){g=t<u^f?0:1;var P=p,N=p;if(d<ja){var z=null==C?[_,k]:null==w?[y,b]:zn([y,b],[C,S],[w,x],[_,k]),L=y-z[0],I=b-z[1],H=w-z[0],j=x-z[1],F=1/Math.sin(Math.acos((L*H+I*j)/(Math.sqrt(L*L+I*I)*Math.sqrt(H*H+j*j)))/2),B=Math.sqrt(z[0]*z[0]+z[1]*z[1]);N=Math.min(p,(t-B)/(F-1)),P=Math.min(p,(u-B)/(F+1))}if(null!=w){var W=wo(null==C?[_,k]:[C,S],[y,b],u,P,f),Y=wo([w,x],[_,k],u,P,f);p===P?E.push("M",W[0],"A",P,",",P," 0 0,",g," ",W[1],"A",u,",",u," 0 ",1-f^bo(W[1][0],W[1][1],Y[1][0],Y[1][1]),",",f," ",Y[1],"A",P,",",P," 0 0,",g," ",Y[0]):E.push("M",W[0],"A",P,",",P," 0 1,",g," ",Y[0])}else E.push("M",y,",",b);if(null!=C){var V=wo([y,b],[C,S],t,-N,f),U=wo([_,k],null==w?[y,b]:[w,x],t,-N,f);p===N?E.push("L",U[0],"A",N,",",N," 0 0,",g," ",U[1],"A",t,",",t," 0 ",f^bo(U[1][0],U[1][1],V[1][0],V[1][1]),",",1-f," ",V[1],"A",N,",",N," 0 0,",g," ",V[0]):E.push("L",U[0],"A",N,",",N," 0 0,",g," ",V[0])}else E.push("L",_,",",k)}else E.push("M",y,",",b),null!=w&&E.push("A",u,",",u," 0 ",O,",",f," ",w,",",x),E.push("L",_,",",k),null!=C&&E.push("A",t,",",t," 0 ",D,",",1-f," ",C,",",S);return E.push("Z"),E.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=po,i=go,r=fo,o=Rl,a=mo,s=vo,l=yo;return t.innerRadius=function(e){return arguments.length?(n=Tt(e),t):n},t.outerRadius=function(e){return arguments.length?(i=Tt(e),t):i},t.cornerRadius=function(e){return arguments.length?(r=Tt(e),t):r},t.padRadius=function(e){return arguments.length?(o=e==Rl?Rl:Tt(e),t):o},t.startAngle=function(e){return arguments.length?(a=Tt(e),t):a},t.endAngle=function(e){return arguments.length?(s=Tt(e),t):s},t.padAngle=function(e){return arguments.length?(l=Tt(e),t):l},t.centroid=function(){var t=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Wa;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Rl="auto";ua.svg.line=function(){return xo(b)};var Pl=ua.map({linear:_o,"linear-closed":ko,step:Co,"step-before":So,"step-after":Mo,basis:Ro,"basis-open":Po,"basis-closed":No,bundle:zo,cardinal:Oo,"cardinal-open":To,"cardinal-closed":Eo,monotone:Bo});Pl.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Nl=[0,2/3,1/3,0],zl=[0,1/3,2/3,0],Ll=[0,1/6,2/3,1/6];ua.svg.line.radial=function(){var t=xo(Wo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},So.reverse=Mo,Mo.reverse=So,ua.svg.area=function(){return Yo(b)},ua.svg.area.radial=function(){var t=Yo(Wo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ua.svg.chord=function(){function t(t,s){var l=e(this,o,t,s),u=e(this,a,t,s);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),o=s.call(t,r,i),a=l.call(t,r,i)-Wa,c=u.call(t,r,i)-Wa;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>ja)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var o=wn,a=xn,s=Vo,l=mo,u=vo;return t.radius=function(e){return arguments.length?(s=Tt(e),t):s},t.source=function(e){return arguments.length?(o=Tt(e),t):o},t.target=function(e){return arguments.length?(a=Tt(e),t):a},t.startAngle=function(e){return arguments.length?(l=Tt(e),t):l},t.endAngle=function(e){return arguments.length?(u=Tt(e),t):u},t},ua.svg.diagonal=function(){function t(t,r){var o=e.call(this,t,r),a=n.call(this,t,r),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=wn,n=xn,i=Uo;return t.source=function(n){return arguments.length?(e=Tt(n),t):e},t.target=function(e){return arguments.length?(n=Tt(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},ua.svg.diagonal.radial=function(){var t=ua.svg.diagonal(),e=Uo,n=t.projection;return t.projection=function(t){return arguments.length?n(qo(e=t)):e},t},ua.svg.symbol=function(){function t(t,i){return(Il.get(e.call(this,t,i))||$o)(n.call(this,t,i))}var e=Go,n=Xo;return t.type=function(n){return arguments.length?(e=Tt(n),t):e},t.size=function(e){return arguments.length?(n=Tt(e),t):n},t};var Il=ua.map({circle:$o,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*jl)),n=e*jl;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Hl),n=e*Hl/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Hl),n=e*Hl/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});ua.svg.symbolTypes=Il.keys();var Hl=Math.sqrt(3),jl=Math.tan(30*Ya);Aa.transition=function(t){for(var e,n,i=Fl||++Vl,r=ta(t),o=[],a=Bl||{time:Date.now(),ease:Ti,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,h=u.length;++c<h;)(n=u[c])&&ea(n,c,r,i,a),e.push(n)}return Zo(o,r,i)},Aa.interrupt=function(t){return this.each(null==t?Wl:Ko(ta(t)))};var Fl,Bl,Wl=Ko(ta()),Yl=[],Vl=0;Yl.call=Aa.call,Yl.empty=Aa.empty,Yl.node=Aa.node,Yl.size=Aa.size,ua.transition=function(t,e){return t&&t.transition?Fl?t.transition(e):t:ua.selection().transition(t)},ua.transition.prototype=Yl,Yl.select=function(t){var e,n,i,r=this.id,o=this.namespace,a=[];t=O(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,h=u.length;++c<h;)(i=u[c])&&(n=t.call(i,i.__data__,c,s))?("__data__"in i&&(n.__data__=i.__data__),ea(n,c,o,r,i[o][r]),e.push(n)):e.push(null)}return Zo(a,o,r)},Yl.selectAll=function(t){var e,n,i,r,o,a=this.id,s=this.namespace,l=[];t=A(t);for(var u=-1,c=this.length;++u<c;)for(var h=this[u],d=-1,f=h.length;++d<f;)if(i=h[d]){o=i[s][a],n=t.call(i,i.__data__,d,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(r=n[p])&&ea(r,p,s,a,o),e.push(r)}return Zo(l,s,a)},Yl.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=W(t));for(var o=0,a=this.length;o<a;o++){r.push(e=[]);for(var n=this[o],s=0,l=n.length;s<l;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return Zo(r,this.namespace,this.id)},Yl.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):V(this,null==e?function(e){e[i][n].tween.remove(t)}:function(r){r[i][n].tween.set(t,e)})},Yl.attr=function(t,e){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Gi:wi,s=ua.ns.qualify(t);return Qo(this,"attr."+t,e,s.local?o:r)},Yl.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=ua.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},Yl.style=function(t,e,i){function r(){this.style.removeProperty(t)}function o(e){return null==e?r:(e+="",function(){var r,o=n(this).getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(r=wi(o,e),function(e){this.style.setProperty(t,r(e),i)})})}var a=arguments.length;if(a<3){if("string"!=typeof t){a<2&&(e="");for(i in t)this.style(i,t[i],e);return this}i=""}return Qo(this,"style."+t,e,o)},Yl.styleTween=function(t,e,i){function r(r,o){var a=e.call(this,r,o,n(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),i)}}return arguments.length<3&&(i=""),this.tween("style."+t,r)},Yl.text=function(t){return Qo(this,"text",t,Jo)},Yl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Yl.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=ua.ease.apply(ua,arguments)),V(this,function(i){i[n][e].ease=t}))},Yl.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:V(this,"function"==typeof t?function(i,r,o){i[n][e].delay=+t.call(i,i.__data__,r,o)}:(t=+t,function(i){i[n][e].delay=t}))},Yl.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:V(this,"function"==typeof t?function(i,r,o){i[n][e].duration=Math.max(1,t.call(i,i.__data__,r,o))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},Yl.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Bl,o=Fl;try{Fl=n,V(this,function(e,r,o){Bl=e[i][n],t.call(e,e.__data__,r,o)})}finally{Bl=r,Fl=o}}else V(this,function(r){var o=r[i][n];(o.event||(o.event=ua.dispatch("start","end","interrupt"))).on(t,e)});return this},Yl.transition=function(){for(var t,e,n,i,r=this.id,o=++Vl,a=this.namespace,s=[],l=0,u=this.length;l<u;l++){s.push(t=[]);for(var e=this[l],c=0,h=e.length;c<h;c++)(n=e[c])&&(i=n[a][r],ea(n,c,a,o,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),t.push(n)}return Zo(s,a,o)},ua.svg.axis=function(){function t(t){t.each(function(){var t,u=ua.select(this),c=this.__chart__||n,h=this.__chart__=n.copy(),d=null==l?h.ticks?h.ticks.apply(h,s):h.domain():l,f=null==e?h.tickFormat?h.tickFormat.apply(h,s):b:e,p=u.selectAll(".tick").data(d,h),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ia),m=ua.transition(p.exit()).style("opacity",Ia).remove(),v=ua.transition(p.order()).style("opacity",1),y=Math.max(r,0)+a,w=Ur(h),x=u.selectAll(".domain").data([0]),_=(x.enter().append("path").attr("class","domain"),ua.transition(x));g.append("line"),g.append("text");var k,C,S,M,T=g.select("line"),E=v.select("line"),O=p.select("text").text(f),A=g.select("text"),D=v.select("text"),R="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(t=na,k="x",S="y",C="x2",M="y2",O.attr("dy",R<0?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+w[0]+","+R*o+"V0H"+w[1]+"V"+R*o)):(t=ia,k="y",S="x",C="y2",M="x2",O.attr("dy",".32em").style("text-anchor",R<0?"end":"start"),_.attr("d","M"+R*o+","+w[0]+"H0V"+w[1]+"H"+R*o)),T.attr(M,R*r),A.attr(S,R*y),E.attr(C,0).attr(M,R*r),D.attr(k,0).attr(S,R*y),h.rangeBand){var P=h,N=P.rangeBand()/2;c=h=function(t){return P(t)+N}}else c.rangeBand?c=h:m.call(t,h,c);g.call(t,c,h),v.call(t,h,h)})}var e,n=ua.scale.linear(),i=Ul,r=6,o=6,a=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in ql?e+"":Ul,t):i},t.ticks=function(){return arguments.length?(s=ha(arguments),t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,o=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Ul="bottom",ql={top:1,right:1,bottom:1,left:1};ua.svg.brush=function(){function t(n){n.each(function(){var n=ua.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=n.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=n.selectAll(".resize").data(g,b);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Xl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var l,h=ua.transition(n),d=ua.transition(a);u&&(l=Ur(u),d.attr("x",l[0]).attr("width",l[1]-l[0]),i(h)),c&&(l=Ur(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),r(h)),e(h)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"})}function i(t){t.select(".extent").attr("x",h[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function r(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function o(){function o(){32==ua.event.keyCode&&(O||(b=null,D[0]-=h[1],D[1]-=d[1],O=2),S())}function g(){32==ua.event.keyCode&&2==O&&(D[0]+=h[1],D[1]+=d[1],O=0,S())}function m(){var t=ua.mouse(x),n=!1;w&&(t[0]+=w[0],t[1]+=w[1]),O||(ua.event.altKey?(b||(b=[(h[0]+h[1])/2,(d[0]+d[1])/2]),D[0]=h[+(t[0]<b[0])],D[1]=d[+(t[1]<b[1])]):b=null),T&&v(t,u,0)&&(i(C),n=!0),E&&v(t,c,1)&&(r(C),n=!0),n&&(e(C),k({type:"brush",mode:O?"move":"resize"}))}function v(t,e,n){var i,r,o=Ur(e),l=o[0],u=o[1],c=D[n],g=n?d:h,m=g[1]-g[0];if(O&&(l-=c,u-=m+c),i=(n?p:f)?Math.max(l,Math.min(u,t[n])):t[n],O?r=(i+=c)+m:(b&&(c=Math.max(l,Math.min(u,2*b[n]-i))),c<i?(r=i,i=c):r=c),g[0]!=i||g[1]!=r)return n?s=null:a=null,g[0]=i,g[1]=r,!0}function y(){m(),C.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ua.select("body").style("cursor",null),R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),k({type:"brushend"})}var b,w,x=this,_=ua.select(ua.event.target),k=l.of(x,arguments),C=ua.select(x),M=_.datum(),T=!/^(n|s)$/.test(M)&&u,E=!/^(e|w)$/.test(M)&&c,O=_.classed("extent"),A=K(x),D=ua.mouse(x),R=ua.select(n(x)).on("keydown.brush",o).on("keyup.brush",g);if(ua.event.changedTouches?R.on("touchmove.brush",m).on("touchend.brush",y):R.on("mousemove.brush",m).on("mouseup.brush",y),C.interrupt().selectAll("*").interrupt(),O)D[0]=h[0]-D[0],D[1]=d[0]-D[1];else if(M){var P=+/w$/.test(M),N=+/^n/.test(M);w=[h[1-P]-D[0],d[1-N]-D[1]],D[0]=h[P],D[1]=d[N]}else ua.event.altKey&&(b=D.slice());C.style("pointer-events","none").selectAll(".resize").style("display",null),ua.select("body").style("cursor",_.style("cursor")),k({type:"brushstart"}),m()}var a,s,l=T(t,"brushstart","brush","brushend"),u=null,c=null,h=[0,0],d=[0,0],f=!0,p=!0,g=Gl[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:h,y:d,i:a,j:s},n=this.__chart__||e;this.__chart__=e,Fl?ua.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,h=n.x,d=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=xi(h,e.x),i=xi(d,e.y);return a=s=null,function(r){h=e.x=n(r),d=e.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(u=e,g=Gl[!u<<1|!c],t):u},t.y=function(e){return arguments.length?(c=e,g=Gl[!u<<1|!c],t):c},t.clamp=function(e){return arguments.length?(u&&c?(f=!!e[0],p=!!e[1]):u?f=!!e:c&&(p=!!e),t):u&&c?[f,p]:u?f:c?p:null},t.extent=function(e){var n,i,r,o,l;return arguments.length?(u&&(n=e[0],i=e[1],c&&(n=n[0],i=i[0]),a=[n,i],u.invert&&(n=u(n),i=u(i)),i<n&&(l=n,n=i,i=l),n==h[0]&&i==h[1]||(h=[n,i])),c&&(r=e[0],o=e[1],u&&(r=r[1],o=o[1]),s=[r,o],c.invert&&(r=c(r),o=c(o)),o<r&&(l=r,r=o,o=l),r==d[0]&&o==d[1]||(d=[r,o])),t):(u&&(a?(n=a[0],i=a[1]):(n=h[0],i=h[1],u.invert&&(n=u.invert(n),i=u.invert(i)),i<n&&(l=n,n=i,i=l))),c&&(s?(r=s[0],o=s[1]):(r=d[0],o=d[1],c.invert&&(r=c.invert(r),o=c.invert(o)),o<r&&(l=r,r=o,o=l))),u&&c?[[n,r],[i,o]]:u?[n,i]:c&&[r,o])},t.clear=function(){return t.empty()||(h=[0,0],d=[0,0],a=s=null),t},t.empty=function(){return!!u&&h[0]==h[1]||!!c&&d[0]==d[1]},ua.rebind(t,l,"on")};var Xl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$l=ps.format=ws.timeFormat,Kl=$l.utc,Zl=Kl("%Y-%m-%dT%H:%M:%S.%LZ");$l.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ra:Zl,ra.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ra.toString=Zl.toString,ps.second=Bt(function(t){return new gs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ps.seconds=ps.second.range,ps.seconds.utc=ps.second.utc.range,ps.minute=Bt(function(t){return new gs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ps.minutes=ps.minute.range,ps.minutes.utc=ps.minute.utc.range,ps.hour=Bt(function(t){var e=t.getTimezoneOffset()/60;return new gs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ps.hours=ps.hour.range,ps.hours.utc=ps.hour.utc.range,ps.month=Bt(function(t){return t=ps.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ps.months=ps.month.range,ps.months.utc=ps.month.utc.range;var Ql=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Jl=[[ps.second,1],[ps.second,5],[ps.second,15],[ps.second,30],[ps.minute,1],[ps.minute,5],[ps.minute,15],[ps.minute,30],[ps.hour,1],[ps.hour,3],[ps.hour,6],[ps.hour,12],[ps.day,1],[ps.day,2],[ps.week,1],[ps.month,1],[ps.month,3],[ps.year,1]],tu=$l.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Ae]]),eu={range:function(t,e,n){return ua.range(Math.ceil(t/n)*n,+e,n).map(aa)},floor:b,ceil:b};Jl.year=ps.year,ps.scale=function(){return oa(ua.scale.linear(),Jl,tu)};var nu=Jl.map(function(t){return[t[0].utc,t[1]]}),iu=Kl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Ae]]);nu.year=ps.year.utc,ps.scale.utc=function(){return oa(ua.scale.linear(),nu,iu)},ua.text=Et(function(t){return t.responseText}),ua.json=function(t,e){return Ot(t,"application/json",sa,e)},ua.html=function(t,e){return Ot(t,"text/html",la,e)},ua.xml=Et(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=ua,define(ua)):"object"==typeof e&&e.exports?e.exports=ua:this.d3=ua}()},{}],4:[function(t,e,n){e.exports=t("./lib/heap")},{"./lib/heap":5}],5:[function(t,e,n){(function(){var t,i,r,o,a,s,l,u,c,h,d,f,p,g,m;r=Math.floor,h=Math.min,i=function(t,e){return t<e?-1:t>e?1:0},c=function(t,e,n,o,a){var s;if(null==n&&(n=0),null==a&&(a=i),n<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);n<o;)s=r((n+o)/2),a(e,t[s])<0?o=s:n=s+1;return[].splice.apply(t,[n,n-n].concat(e)),e},s=function(t,e,n){return null==n&&(n=i),t.push(e),g(t,0,t.length-1,n)},a=function(t,e){var n,r;return null==e&&(e=i),n=t.pop(),t.length?(r=t[0],t[0]=n,m(t,0,e)):r=n,r},u=function(t,e,n){var r;return null==n&&(n=i),r=t[0],t[0]=e,m(t,0,n),r},l=function(t,e,n){var r;return null==n&&(n=i),t.length&&n(t[0],e)<0&&(r=[t[0],e],e=r[0],t[0]=r[1],m(t,0,n)),e},o=function(t,e){var n,o,a,s,l,u;for(null==e&&(e=i),s=function(){u=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)u.push(e);return u}.apply(this).reverse(),l=[],o=0,a=s.length;o<a;o++)n=s[o],l.push(m(t,n,e));return l},p=function(t,e,n){var r;if(null==n&&(n=i),r=t.indexOf(e),r!==-1)return g(t,0,r,n),m(t,r,n)},d=function(t,e,n){var r,a,s,u,c;if(null==n&&(n=i),a=t.slice(0,e),!a.length)return a;for(o(a,n),c=t.slice(e),s=0,u=c.length;s<u;s++)r=c[s],l(a,r,n);return a.sort(n).reverse()},f=function(t,e,n){var r,s,l,u,d,f,p,g,m,v;if(null==n&&(n=i),10*e<=t.length){if(u=t.slice(0,e).sort(n),!u.length)return u;for(l=u[u.length-1],g=t.slice(e),d=0,p=g.length;d<p;d++)r=g[d],n(r,l)<0&&(c(u,r,0,null,n),u.pop(),l=u[u.length-1]);return u}for(o(t,n),v=[],s=f=0,m=h(e,t.length);0<=m?f<m:f>m;s=0<=m?++f:--f)v.push(a(t,n));return v},g=function(t,e,n,r){var o,a,s;for(null==r&&(r=i),o=t[n];n>e&&(s=n-1>>1,a=t[s],r(o,a)<0);)t[n]=a,n=s;return t[n]=o},m=function(t,e,n){var r,o,a,s,l;for(null==n&&(n=i),o=t.length,l=e,a=t[e],r=2*e+1;r<o;)s=r+1,s<o&&!(n(t[r],t[s])<0)&&(r=s),t[e]=t[r],e=r,r=2*e+1;return t[e]=a,g(t,l,e,n)},t=function(){function t(t){this.cmp=null!=t?t:i,this.nodes=[]}return t.push=s,t.pop=a,t.replace=u,t.pushpop=l,t.heapify=o,t.updateItem=p,t.nlargest=d,t.nsmallest=f,t.prototype.push=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pop=function(){return a(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return this.nodes.indexOf(t)!==-1},t.prototype.replace=function(t){return u(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return l(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return o(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return p(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),function(t,i){return"function"==typeof define&&define.amd?define([],i):"object"==typeof n?e.exports=i():t.Heap=i()}(this,function(){return t})}).call(this)},{}],6:[function(t,e,n){n.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?r-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:(f?-1:1)*(1/0);a+=Math.pow(2,i),o-=u}return(f?-1:1)*a*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var a,s,l,u=8*o-r-1,c=(1<<u)-1,h=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),e+=a+h>=1?d/l:d*Math.pow(2,1-h),e*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+f]=255&s,f+=p,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;t[n+f]=255&a,f+=p,a/=256,u-=8);t[n+f-p]|=128*g}},{}],7:[function(t,e,n){var i={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}],8:[function(require,module,exports){(function(global){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(t,e){var n,i,r,o;for("undefined"==typeof e&&(e=15),r=.5,n=new Date;;){for(r*=2,o=r;o>3;o-=4)t(),t(),t(),t();for(;o>0;)t(),o--;if(i=new Date,i-n>e)break}for(o=r;o>3;o-=4)t(),t(),t(),t();for(;o>0;)t(),o--;return i=new Date,1e3*(3*r-1)/(i-n)},numeric._myIndexOf=function(t){var e,n=this.length;for(e=0;e<n;++e)if(this[e]===t)return e;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(t){function e(t){if(0===t)return"0";if(isNaN(t))return"NaN";if(t<0)return"-"+e(-t);if(isFinite(t)){var n=Math.floor(Math.log(t)/Math.log(10)),i=t/Math.pow(10,n),r=i.toPrecision(numeric.precision);return 10===parseFloat(r)&&(n++,i=1,r=i.toPrecision(numeric.precision)),parseFloat(r).toString()+"e"+n.toString()}return"Infinity"}function n(t){var r;if("undefined"==typeof t)return i.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof t)return i.push('"'+t+'"'),!1;if("boolean"==typeof t)return i.push(t.toString()),!1;if("number"==typeof t){var o=e(t),a=t.toPrecision(numeric.precision),s=parseFloat(t.toString()).toString(),l=[o,a,s,parseFloat(a).toString(),parseFloat(s).toString()];for(r=1;r<l.length;r++)l[r].length<o.length&&(o=l[r]);return i.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===t)return i.push("null"),
!1;if("function"==typeof t){i.push(t.toString());var u=!1;for(r in t)t.hasOwnProperty(r)&&(u?i.push(",\n"):i.push("\n{"),u=!0,i.push(r),i.push(": \n"),n(t[r]));return u&&i.push("}\n"),!0}if(t instanceof Array){if(t.length>numeric.largeArray)return i.push("...Large Array..."),!0;var u=!1;for(i.push("["),r=0;r<t.length;r++)r>0&&(i.push(","),u&&i.push("\n ")),u=n(t[r]);return i.push("]"),!0}i.push("{");var u=!1;for(r in t)t.hasOwnProperty(r)&&(u&&i.push(",\n"),u=!0,i.push(r),i.push(": \n"),n(t[r]));return i.push("}"),!0}var i=[];return n(t),i.join("")},numeric.parseDate=function(t){function e(t){if("string"==typeof t)return Date.parse(t.replace(/-/g,"/"));if(!(t instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,i=[];for(n=0;n<t.length;n++)i[n]=e(t[n]);return i}return e(t)},numeric.parseFloat=function(t){function e(t){if("string"==typeof t)return parseFloat(t);if(!(t instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,i=[];for(n=0;n<t.length;n++)i[n]=e(t[n]);return i}return e(t)},numeric.parseCSV=function(t){var e,n,i=t.split("\n"),r=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,a=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,s=function(t){return t.substr(0,t.length-1)},l=0;for(n=0;n<i.length;n++){var u,c=(i[n]+",").match(o);if(c.length>0){for(r[l]=[],e=0;e<c.length;e++)u=s(c[e]),a.test(u)?r[l][e]=parseFloat(u):r[l][e]=u;l++}}return r},numeric.toCSV=function(t){var e,n,i,r,o,a,s=numeric.dim(t);for(i=s[0],r=s[1],a=[],e=0;e<i;e++){for(o=[],n=0;n<i;n++)o[n]=t[e][n].toString();a[e]=o.join(", ")}return a.join("\n")+"\n"},numeric.getURL=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),e},numeric.imageURL=function(t){function e(t){var e,n,i,r,o,a,s,l,u=t.length,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";for(e=0;e<u;e+=3)n=t[e],i=t[e+1],r=t[e+2],o=n>>2,a=((3&n)<<4)+(i>>4),s=((15&i)<<2)+(r>>6),l=63&r,e+1>=u?s=l=64:e+2>=u&&(l=64),h+=c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(l);return h}function n(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=t.length);var i,r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1,a=0;t.length;for(i=e;i<n;i++)a=255&(o^t[i]),o=o>>>8^r[a];return o^-1}var i,r,o,a,s,l,u,c,h,d,f=t[0].length,p=t[0][0].length,g=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,p>>24&255,p>>16&255,p>>8&255,255&p,f>>24&255,f>>16&255,f>>8&255,255&f,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(d=n(g,12,29),g[29]=d>>24&255,g[30]=d>>16&255,g[31]=d>>8&255,g[32]=255&d,i=1,r=0,u=0;u<f;u++){for(u<f-1?g.push(0):g.push(1),s=3*p+1+(0===u)&255,l=3*p+1+(0===u)>>8&255,g.push(s),g.push(l),g.push(255&~s),g.push(255&~l),0===u&&g.push(0),c=0;c<p;c++)for(o=0;o<3;o++)s=t[o][u][c],s=s>255?255:s<0?0:Math.round(s),i=(i+s)%65521,r=(r+i)%65521,g.push(s);g.push(0)}return h=(r<<16)+i,g.push(h>>24&255),g.push(h>>16&255),g.push(h>>8&255),g.push(255&h),a=g.length-41,g[33]=a>>24&255,g[34]=a>>16&255,g[35]=a>>8&255,g[36]=255&a,d=n(g,37),g.push(d>>24&255),g.push(d>>16&255),g.push(d>>8&255),g.push(255&d),g.push(0),g.push(0),g.push(0),g.push(0),g.push(73),g.push(69),g.push(78),g.push(68),g.push(174),g.push(66),g.push(96),g.push(130),"data:image/png;base64,"+e(g)},numeric._dim=function(t){for(var e=[];"object"==typeof t;)e.push(t.length),t=t[0];return e},numeric.dim=function(t){var e,n;return"object"==typeof t?(e=t[0],"object"==typeof e?(n=e[0],"object"==typeof n?numeric._dim(t):[t.length,e.length]):[t.length]):[]},numeric.mapreduce=function(t,e){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+e+';\nif(typeof x === "number") { var xi = x; '+t+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+t+";\n    xi = x[i-1];\n    "+t+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+t+"\n}\nreturn accum;")},numeric.mapreduce2=function(t,e){return Function("x","var n = x.length;\nvar i,xi;\n"+e+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+t+";\n}\nreturn accum;")},numeric.same=function t(e,n){var i,r;if(!(e instanceof Array&&n instanceof Array))return!1;if(r=e.length,r!==n.length)return!1;for(i=0;i<r;i++)if(e[i]!==n[i]){if("object"!=typeof e[i])return!1;if(!t(e[i],n[i]))return!1}return!0},numeric.rep=function(t,e,n){"undefined"==typeof n&&(n=0);var i,r=t[n],o=Array(r);if(n===t.length-1){for(i=r-2;i>=0;i-=2)o[i+1]=e,o[i]=e;return i===-1&&(o[0]=e),o}for(i=r-1;i>=0;i--)o[i]=numeric.rep(t,e,n+1);return o},numeric.dotMMsmall=function(t,e){var n,i,r,o,a,s,l,u,c,h,d;for(o=t.length,a=e.length,s=e[0].length,l=Array(o),n=o-1;n>=0;n--){for(u=Array(s),c=t[n],r=s-1;r>=0;r--){for(h=c[a-1]*e[a-1][r],i=a-2;i>=1;i-=2)d=i-1,h+=c[i]*e[i][r]+c[d]*e[d][r];0===i&&(h+=c[0]*e[0][r]),u[r]=h}l[n]=u}return l},numeric._getCol=function(t,e,n){var i,r=t.length;for(i=r-1;i>0;--i)n[i]=t[i][e],--i,n[i]=t[i][e];0===i&&(n[0]=t[0][e])},numeric.dotMMbig=function(t,e){var n,i,r,o,a=numeric._getCol,s=e.length,l=Array(s),u=t.length,c=e[0].length,h=new Array(u),d=numeric.dotVV;for(--s,--u,i=u;i!==-1;--i)h[i]=Array(c);for(--c,i=c;i!==-1;--i)for(a(e,i,l),r=u;r!==-1;--r)o=0,n=t[r],h[r][i]=d(n,l);return h},numeric.dotMV=function(t,e){var n,i=t.length,r=(e.length,Array(i)),o=numeric.dotVV;for(n=i-1;n>=0;n--)r[n]=o(t[n],e);return r},numeric.dotVM=function(t,e){var n,i,r,o,a,s,l;for(r=t.length,o=e[0].length,a=Array(o),i=o-1;i>=0;i--){for(s=t[r-1]*e[r-1][i],n=r-2;n>=1;n-=2)l=n-1,s+=t[n]*e[n][i]+t[l]*e[l][i];0===n&&(s+=t[0]*e[0][i]),a[i]=s}return a},numeric.dotVV=function(t,e){var n,i,r=t.length,o=t[r-1]*e[r-1];for(n=r-2;n>=1;n-=2)i=n-1,o+=t[n]*e[n]+t[i]*e[i];return 0===n&&(o+=t[0]*e[0]),o},numeric.dot=function(t,e){var n=numeric.dim;switch(1e3*n(t).length+n(e).length){case 2002:return e.length<10?numeric.dotMMsmall(t,e):numeric.dotMMbig(t,e);case 2001:return numeric.dotMV(t,e);case 1002:return numeric.dotVM(t,e);case 1001:return numeric.dotVV(t,e);case 1e3:return numeric.mulVS(t,e);case 1:return numeric.mulSV(t,e);case 0:return t*e;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(t){var e,n,i,r,o=t.length,a=Array(o);for(e=o-1;e>=0;e--){for(r=Array(o),n=e+2,i=o-1;i>=n;i-=2)r[i]=0,r[i-1]=0;for(i>e&&(r[i]=0),r[e]=t[e],i=e-1;i>=1;i-=2)r[i]=0,r[i-1]=0;0===i&&(r[0]=0),a[e]=r}return a},numeric.getDiag=function(t){var e,n=Math.min(t.length,t[0].length),i=Array(n);for(e=n-1;e>=1;--e)i[e]=t[e][e],--e,i[e]=t[e][e];return 0===e&&(i[0]=t[0][0]),i},numeric.identity=function(t){return numeric.diag(numeric.rep([t],1))},numeric.pointwise=function(t,e,n){"undefined"==typeof n&&(n="");var i,r,o=[],a=/\[i\]$/,s="",l=!1;for(i=0;i<t.length;i++)a.test(t[i])?(r=t[i].substring(0,t[i].length-3),s=r):r=t[i],"ret"===r&&(l=!0),o.push(r);return o[t.length]="_s",o[t.length+1]="_k",o[t.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+t.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+e+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(t,e,n){"undefined"==typeof n&&(n="");var i,r,o=[],a=/\[i\]$/,s="",l=!1;for(i=0;i<t.length;i++)a.test(t[i])?(r=t[i].substring(0,t[i].length-3),s=r):r=t[i],"ret"===r&&(l=!0),o.push(r);return o[t.length]="var _n = "+s+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+e+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function e(t,n,i,r,o){if(r===i.length-1)return void o(t,n);var a,s=i[r];for(a=s-1;a>=0;a--)e("object"==typeof t?t[a]:t,"object"==typeof n?n[a]:n,i,r+1,o)},numeric._biforeach2=function n(t,e,i,r,o){if(r===i.length-1)return o(t,e);var a,s=i[r],l=Array(s);for(a=s-1;a>=0;--a)l[a]=n("object"==typeof t?t[a]:t,"object"==typeof e?e[a]:e,i,r+1,o);return l},numeric._foreach=function i(t,e,n,r){if(n===e.length-1)return void r(t);var o,a=e[n];for(o=a-1;o>=0;o--)i(t[o],e,n+1,r)},numeric._foreach2=function r(t,e,n,i){if(n===e.length-1)return i(t);var o,a=e[n],s=Array(a);for(o=a-1;o>=0;o--)s[o]=r(t[o],e,n+1,i);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var t,e;for(t=0;t<numeric.mathfuns2.length;++t)e=numeric.mathfuns2[t],numeric.ops2[e]=e;for(t in numeric.ops2)if(numeric.ops2.hasOwnProperty(t)){e=numeric.ops2[t];var n,i,r="";numeric.myIndexOf.call(numeric.mathfuns2,t)!==-1?(r="var "+e+" = Math."+e+";\n",n=function(t,n,i){return t+" = "+e+"("+n+","+i+")"},i=function(t,n){return t+" = "+e+"("+t+","+n+")"}):(n=function(t,n,i){return t+" = "+n+" "+e+" "+i},i=numeric.opseq.hasOwnProperty(t+"eq")?function(t,n){return t+" "+e+"= "+n}:function(t,n){return t+" = "+t+" "+e+" "+n}),numeric[t+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),r),numeric[t+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),r),numeric[t+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),r),numeric[t]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+t+"VV, VS = numeric."+t+"VS, SV = numeric."+t+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+i("x","y")+"\n}\nreturn x;\n"),numeric[e]=numeric[t],numeric[t+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],i("ret[i]","x[i]"),r),numeric[t+"eqS"]=numeric.pointwise2(["ret[i]","x"],i("ret[i]","x"),r),numeric[t+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+t+"eqV, S = numeric."+t+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(t=0;t<numeric.mathfuns2.length;++t)e=numeric.mathfuns2[t],delete numeric.ops2[e];for(t=0;t<numeric.mathfuns.length;++t)e=numeric.mathfuns[t],numeric.ops1[e]=e;for(t in numeric.ops1)numeric.ops1.hasOwnProperty(t)&&(r="",e=numeric.ops1[t],numeric.myIndexOf.call(numeric.mathfuns,t)!==-1&&Math.hasOwnProperty(e)&&(r="var "+e+" = Math."+e+";\n"),numeric[t+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+e+"(ret[i]);",r),numeric[t+"eq"]=Function("x",'if(typeof x !== "object") return '+e+"x\nvar i;\nvar V = numeric."+t+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[t+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+e+"(x[i]);",r),numeric[t]=Function("x",'if(typeof x !== "object") return '+e+"(x)\nvar i;\nvar V = numeric."+t+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(t=0;t<numeric.mathfuns.length;++t)e=numeric.mathfuns[t],delete numeric.ops1[e];for(t in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(t)&&(e=numeric.mapreducers[t],numeric[t+"V"]=numeric.mapreduce2(e[0],e[1]),numeric[t]=Function("x","s","k",e[1]+'if(typeof x !== "object") {    xi = x;\n'+e[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+t+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+e[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(t,e){return"object"==typeof t?"object"==typeof e?numeric.truncVV(t,e):numeric.truncVS(t,e):"object"==typeof e?numeric.truncSV(t,e):Math.round(t/e)*e},numeric.inv=function(t){var e,n,i,r,o,a,s,t,l=numeric.dim(t),u=Math.abs,c=l[0],h=l[1],d=numeric.clone(t),f=numeric.identity(c);for(a=0;a<h;++a){var p=-1,g=-1;for(o=a;o!==c;++o)s=u(d[o][a]),s>g&&(p=o,g=s);for(n=d[p],d[p]=d[a],d[a]=n,r=f[p],f[p]=f[a],f[a]=r,t=n[a],s=a;s!==h;++s)n[s]/=t;for(s=h-1;s!==-1;--s)r[s]/=t;for(o=c-1;o!==-1;--o)if(o!==a){for(e=d[o],i=f[o],t=e[a],s=a+1;s!==h;++s)e[s]-=n[s]*t;for(s=h-1;s>0;--s)i[s]-=r[s]*t,--s,i[s]-=r[s]*t;0===s&&(i[0]-=r[0]*t)}}return f},numeric.det=function(t){var e=numeric.dim(t);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: det() only works on square matrices");var n,i,r,o,a,s,l,u,c=e[0],h=1,d=numeric.clone(t);for(i=0;i<c-1;i++){for(r=i,n=i+1;n<c;n++)Math.abs(d[n][i])>Math.abs(d[r][i])&&(r=n);for(r!==i&&(l=d[r],d[r]=d[i],d[i]=l,h*=-1),o=d[i],n=i+1;n<c;n++){for(a=d[n],s=a[i]/o[i],r=i+1;r<c-1;r+=2)u=r+1,a[r]-=o[r]*s,a[u]-=o[u]*s;r!==c&&(a[r]-=o[r]*s)}if(0===o[i])return 0;h*=o[i]}return h*d[i][i]},numeric.transpose=function(t){var e,n,i,r,o,a=t.length,s=t[0].length,l=Array(s);for(n=0;n<s;n++)l[n]=Array(a);for(e=a-1;e>=1;e-=2){for(r=t[e],i=t[e-1],n=s-1;n>=1;--n)o=l[n],o[e]=r[n],o[e-1]=i[n],--n,o=l[n],o[e]=r[n],o[e-1]=i[n];0===n&&(o=l[0],o[e]=r[0],o[e-1]=i[0])}if(0===e){for(i=t[0],n=s-1;n>=1;--n)l[n][0]=i[n],--n,l[n][0]=i[n];0===n&&(l[0][0]=i[0])}return l},numeric.negtranspose=function(t){var e,n,i,r,o,a=t.length,s=t[0].length,l=Array(s);for(n=0;n<s;n++)l[n]=Array(a);for(e=a-1;e>=1;e-=2){for(r=t[e],i=t[e-1],n=s-1;n>=1;--n)o=l[n],o[e]=-r[n],o[e-1]=-i[n],--n,o=l[n],o[e]=-r[n],o[e-1]=-i[n];0===n&&(o=l[0],o[e]=-r[0],o[e-1]=-i[0])}if(0===e){for(i=t[0],n=s-1;n>=1;--n)l[n][0]=-i[n],--n,l[n][0]=-i[n];0===n&&(l[0][0]=-i[0])}return l},numeric._random=function o(t,e){var n,i,r=t[e],a=Array(r);if(e===t.length-1){for(i=Math.random,n=r-1;n>=1;n-=2)a[n]=i(),a[n-1]=i();return 0===n&&(a[0]=i()),a}for(n=r-1;n>=0;n--)a[n]=o(t,e+1);return a},numeric.random=function(t){return numeric._random(t,0)},numeric.norm2=function(t){return Math.sqrt(numeric.norm2Squared(t))},numeric.linspace=function(t,e,n){if("undefined"==typeof n&&(n=Math.max(Math.round(e-t)+1,1)),n<2)return 1===n?[t]:[];var i,r=Array(n);for(n--,i=n;i>=0;i--)r[i]=(i*e+(n-i)*t)/n;return r},numeric.getBlock=function(t,e,n){function i(t,o){var a,s=e[o],l=n[o]-s,u=Array(l);if(o===r.length-1){for(a=l;a>=0;a--)u[a]=t[a+s];return u}for(a=l;a>=0;a--)u[a]=i(t[a+s],o+1);return u}var r=numeric.dim(t);return i(t,0)},numeric.setBlock=function(t,e,n,i){function r(t,i,a){var s,l=e[a],u=n[a]-l;if(a===o.length-1)for(s=u;s>=0;s--)t[s+l]=i[s];for(s=u;s>=0;s--)r(t[s+l],i[s],a+1)}var o=numeric.dim(t);return r(t,i,0),t},numeric.getRange=function(t,e,n){var i,r,o,a,s=e.length,l=n.length,u=Array(s);for(i=s-1;i!==-1;--i)for(u[i]=Array(l),o=u[i],a=t[e[i]],r=l-1;r!==-1;--r)o[r]=a[n[r]];return u},numeric.blockMatrix=function(t){var e=numeric.dim(t);if(e.length<4)return numeric.blockMatrix([t]);var n,i,r,o,a,s=e[0],l=e[1];for(n=0,i=0,r=0;r<s;++r)n+=t[r][0].length;for(o=0;o<l;++o)i+=t[0][o][0].length;var u=Array(n);for(r=0;r<n;++r)u[r]=Array(i);var c,h,d,f,p,g=0;for(r=0;r<s;++r){for(c=i,o=l-1;o!==-1;--o)for(a=t[r][o],c-=a[0].length,d=a.length-1;d!==-1;--d)for(p=a[d],h=u[g+d],f=p.length-1;f!==-1;--f)h[c+f]=p[f];g+=t[r][0].length}return u},numeric.tensor=function(t,e){if("number"==typeof t||"number"==typeof e)return numeric.mul(t,e);var n=numeric.dim(t),i=numeric.dim(e);if(1!==n.length||1!==i.length)throw new Error("numeric: tensor product is only defined for vectors");var r,o,a,s,l=n[0],u=i[0],c=Array(l);for(o=l-1;o>=0;o--){for(r=Array(u),s=t[o],a=u-1;a>=3;--a)r[a]=s*e[a],--a,r[a]=s*e[a],--a,r[a]=s*e[a],--a,r[a]=s*e[a];for(;a>=0;)r[a]=s*e[a],--a;c[o]=r}return c},numeric.T=function(t,e){this.x=t,this.y=e},numeric.t=function(t,e){return new numeric.T(t,e)},numeric.Tbinop=function(t,e,n,i,r){numeric.indexOf;if("string"!=typeof r){var o;r="";for(o in numeric)numeric.hasOwnProperty(o)&&(t.indexOf(o)>=0||e.indexOf(o)>=0||n.indexOf(o)>=0||i.indexOf(o)>=0)&&o.length>1&&(r+="var "+o+" = numeric."+o+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+r+"\nif(x.y) {  if(y.y) {    return new numeric.T("+i+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+e+");\n}\nreturn new numeric.T("+t+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var t=numeric.mul,e=numeric.div;if(this.y){var n=numeric.add(t(this.x,this.x),t(this.y,this.y));return new numeric.T(e(this.x,n),e(numeric.neg(this.y),n))}return new T(e(1,this.x))},numeric.T.prototype.div=function a(t){if(t instanceof numeric.T||(t=new numeric.T(t)),t.y)return this.mul(t.reciprocal());var a=numeric.div;return this.y?new numeric.T(a(this.x,t.x),a(this.y,t.x)):new numeric.T(a(this.x,t.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var t=numeric.transpose,e=this.x,n=this.y;return n?new numeric.T(t(e),t(n)):new numeric.T(t(e))},numeric.T.prototype.transjugate=function(){var t=numeric.transpose,e=this.x,n=this.y;return n?new numeric.T(t(e),numeric.negtranspose(n)):new numeric.T(t(e))},numeric.Tunop=function(t,e,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+e+";\n}\n"+t+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var t=this;if("undefined"==typeof t.y)return new numeric.T(numeric.inv(t.x));var e,n,i,r,o,a,s,l,u,c,h,e,n,i,d,f,p,g,m,v,y,b=t.x.length,w=numeric.identity(b),x=numeric.rep([b,b],0),_=numeric.clone(t.x),k=numeric.clone(t.y);for(e=0;e<b;e++){for(p=_[e][e],g=k[e][e],d=p*p+g*g,i=e,n=e+1;n<b;n++)p=_[n][e],g=k[n][e],f=p*p+g*g,f>d&&(i=n,d=f);for(i!==e&&(y=_[e],_[e]=_[i],_[i]=y,y=k[e],k[e]=k[i],k[i]=y,y=w[e],w[e]=w[i],w[i]=y,y=x[e],x[e]=x[i],x[i]=y),r=_[e],o=k[e],l=w[e],u=x[e],p=r[e],g=o[e],n=e+1;n<b;n++)m=r[n],v=o[n],r[n]=(m*p+v*g)/d,o[n]=(v*p-m*g)/d;for(n=0;n<b;n++)m=l[n],v=u[n],l[n]=(m*p+v*g)/d,u[n]=(v*p-m*g)/d;for(n=e+1;n<b;n++){for(a=_[n],s=k[n],c=w[n],h=x[n],p=a[e],g=s[e],i=e+1;i<b;i++)m=r[i],v=o[i],a[i]-=m*p-v*g,s[i]-=v*p+m*g;for(i=0;i<b;i++)m=l[i],v=u[i],c[i]-=m*p-v*g,h[i]-=v*p+m*g}}for(e=b-1;e>0;e--)for(l=w[e],u=x[e],n=e-1;n>=0;n--)for(c=w[n],h=x[n],p=_[n][e],g=k[n][e],i=b-1;i>=0;i--)m=l[i],v=u[i],c[i]-=p*m-g*v,h[i]-=p*v+g*m;return new numeric.T(w,x)},numeric.T.prototype.get=function(t){var e,n=this.x,i=this.y,r=0,o=t.length;if(i){for(;r<o;)e=t[r],n=n[e],i=i[e],r++;return new numeric.T(n,i)}for(;r<o;)e=t[r],n=n[e],r++;return new numeric.T(n)},numeric.T.prototype.set=function(t,e){var n,i=this.x,r=this.y,o=0,a=t.length,s=e.x,l=e.y;if(0===a)return l?this.y=l:r&&(this.y=void 0),this.x=i,this;if(l){for(r||(r=numeric.rep(numeric.dim(i),0),this.y=r);o<a-1;)n=t[o],i=i[n],r=r[n],o++;return n=t[o],i[n]=s,r[n]=l,this}if(r){for(;o<a-1;)n=t[o],i=i[n],r=r[n],o++;return n=t[o],i[n]=s,s instanceof Array?r[n]=numeric.rep(numeric.dim(s),0):r[n]=0,this}for(;o<a-1;)n=t[o],i=i[n],o++;return n=t[o],i[n]=s,this},numeric.T.prototype.getRows=function(t,e){var n,i,r=e-t+1,o=Array(r),a=this.x,s=this.y;for(n=t;n<=e;n++)o[n-t]=a[n];if(s){for(i=Array(r),n=t;n<=e;n++)i[n-t]=s[n];return new numeric.T(o,i)}return new numeric.T(o)},numeric.T.prototype.setRows=function(t,e,n){var i,r=this.x,o=this.y,a=n.x,s=n.y;for(i=t;i<=e;i++)r[i]=a[i-t];if(s)for(o||(o=numeric.rep(numeric.dim(r),0),this.y=o),i=t;i<=e;i++)o[i]=s[i-t];else if(o)for(i=t;i<=e;i++)o[i]=numeric.rep([a[i-t].length],0);return this},numeric.T.prototype.getRow=function(t){var e=this.x,n=this.y;return n?new numeric.T(e[t],n[t]):new numeric.T(e[t])},numeric.T.prototype.setRow=function(t,e){var n=this.x,i=this.y,r=e.x,o=e.y;return n[t]=r,o?(i||(i=numeric.rep(numeric.dim(n),0),this.y=i),i[t]=o):i&&(i=numeric.rep([r.length],0)),this},numeric.T.prototype.getBlock=function(t,e){var n=this.x,i=this.y,r=numeric.getBlock;return i?new numeric.T(r(n,t,e),r(i,t,e)):new numeric.T(r(n,t,e))},numeric.T.prototype.setBlock=function(t,e,n){n instanceof numeric.T||(n=new numeric.T(n));var i=this.x,r=this.y,o=numeric.setBlock,a=n.x,s=n.y;return s?(r||(this.y=numeric.rep(numeric.dim(this),0),r=this.y),o(i,t,e,a),o(r,t,e,s),this):(o(i,t,e,a),void(r&&o(r,t,e,numeric.rep(numeric.dim(a),0))))},numeric.T.rep=function(t,e){var n=numeric.T;e instanceof n||(e=new n(e));var i=e.x,r=e.y,o=numeric.rep;return r?new n(o(t,i),o(t,r)):new n(o(t,i))},numeric.T.diag=function s(t){t instanceof numeric.T||(t=new numeric.T(t));var e=t.x,n=t.y,s=numeric.diag;return n?new numeric.T(s(e),s(n)):new numeric.T(s(e))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(t){return new numeric.T(numeric.identity(t))},numeric.T.prototype.getDiag=function(){var t=numeric,e=this.x,n=this.y;return n?new t.T(t.getDiag(e),t.getDiag(n)):new t.T(t.getDiag(e))},numeric.house=function(t){var e=numeric.clone(t),n=t[0]>=0?1:-1,i=n*numeric.norm2(t);e[0]+=i;var r=numeric.norm2(e);if(0===r)throw new Error("eig: internal error");return numeric.div(e,r)},numeric.toUpperHessenberg=function(t){var e=numeric.dim(t);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,i,r,o,a,s,l,u,c,h,d=e[0],f=numeric.clone(t),p=numeric.identity(d);for(i=0;i<d-2;i++){for(o=Array(d-i-1),n=i+1;n<d;n++)o[n-i-1]=f[n][i];if(numeric.norm2(o)>0){for(a=numeric.house(o),s=numeric.getBlock(f,[i+1,i],[d-1,d-1]),l=numeric.tensor(a,numeric.dot(a,s)),n=i+1;n<d;n++)for(u=f[n],c=l[n-i-1],r=i;r<d;r++)u[r]-=2*c[r-i];for(s=numeric.getBlock(f,[0,i+1],[d-1,d-1]),l=numeric.tensor(numeric.dot(s,a),a),n=0;n<d;n++)for(u=f[n],c=l[n],r=i+1;r<d;r++)u[r]-=2*c[r-i-1];for(s=Array(d-i-1),n=i+1;n<d;n++)s[n-i-1]=p[n];for(l=numeric.tensor(a,numeric.dot(a,s)),n=i+1;n<d;n++)for(h=p[n],c=l[n-i-1],r=0;r<d;r++)h[r]-=2*c[r]}}return{H:f,Q:p}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(t,e){"undefined"==typeof e&&(e=1e4),t=numeric.clone(t);var n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w=(numeric.clone(t),numeric.dim(t)),x=w[0],_=numeric.identity(x);if(x<3)return{Q:_,B:[[0,x-1]]};var k=numeric.epsilon;for(b=0;b<e;b++){for(v=0;v<x-1;v++)if(Math.abs(t[v+1][v])<k*(Math.abs(t[v][v])+Math.abs(t[v+1][v+1]))){var C=numeric.QRFrancis(numeric.getBlock(t,[0,0],[v,v]),e),S=numeric.QRFrancis(numeric.getBlock(t,[v+1,v+1],[x-1,x-1]),e);for(f=Array(v+1),m=0;m<=v;m++)f[m]=_[m];for(p=numeric.dot(C.Q,f),m=0;m<=v;m++)_[m]=p[m];for(f=Array(x-v-1),m=v+1;m<x;m++)f[m-v-1]=_[m];for(p=numeric.dot(S.Q,f),m=v+1;m<x;m++)_[m]=p[m-v-1];return{Q:_,B:C.B.concat(numeric.add(S.B,v+1))}}if(r=t[x-2][x-2],o=t[x-2][x-1],a=t[x-1][x-2],s=t[x-1][x-1],u=r+s,l=r*s-o*a,c=numeric.getBlock(t,[0,0],[2,2]),u*u>=4*l){var M,T;M=.5*(u+Math.sqrt(u*u-4*l)),T=.5*(u-Math.sqrt(u*u-4*l)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,M+T)),numeric.diag(numeric.rep([3],M*T)))}else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,u)),numeric.diag(numeric.rep([3],l)));for(n=[c[0][0],c[1][0],c[2][0]],i=numeric.house(n),f=[t[0],t[1],t[2]],p=numeric.tensor(i,numeric.dot(i,f)),m=0;m<3;m++)for(d=t[m],g=p[m],y=0;y<x;y++)d[y]-=2*g[y];for(f=numeric.getBlock(t,[0,0],[x-1,2]),p=numeric.tensor(numeric.dot(f,i),i),m=0;m<x;m++)for(d=t[m],g=p[m],y=0;y<3;y++)d[y]-=2*g[y];for(f=[_[0],_[1],_[2]],p=numeric.tensor(i,numeric.dot(i,f)),m=0;m<3;m++)for(h=_[m],g=p[m],y=0;y<x;y++)h[y]-=2*g[y];var E;for(v=0;v<x-2;v++){for(y=v;y<=v+1;y++)if(Math.abs(t[y+1][y])<k*(Math.abs(t[y][y])+Math.abs(t[y+1][y+1]))){var C=numeric.QRFrancis(numeric.getBlock(t,[0,0],[y,y]),e),S=numeric.QRFrancis(numeric.getBlock(t,[y+1,y+1],[x-1,x-1]),e);for(f=Array(y+1),m=0;m<=y;m++)f[m]=_[m];for(p=numeric.dot(C.Q,f),m=0;m<=y;m++)_[m]=p[m];for(f=Array(x-y-1),m=y+1;m<x;m++)f[m-y-1]=_[m];for(p=numeric.dot(S.Q,f),m=y+1;m<x;m++)_[m]=p[m-y-1];return{Q:_,B:C.B.concat(numeric.add(S.B,y+1))}}for(E=Math.min(x-1,v+3),n=Array(E-v),m=v+1;m<=E;m++)n[m-v-1]=t[m][v];for(i=numeric.house(n),f=numeric.getBlock(t,[v+1,v],[E,x-1]),p=numeric.tensor(i,numeric.dot(i,f)),m=v+1;m<=E;m++)for(d=t[m],g=p[m-v-1],y=v;y<x;y++)d[y]-=2*g[y-v];for(f=numeric.getBlock(t,[0,v+1],[x-1,E]),p=numeric.tensor(numeric.dot(f,i),i),m=0;m<x;m++)for(d=t[m],g=p[m],y=v+1;y<=E;y++)d[y]-=2*g[y-v-1];for(f=Array(E-v),m=v+1;m<=E;m++)f[m-v-1]=_[m];for(p=numeric.tensor(i,numeric.dot(i,f)),m=v+1;m<=E;m++)for(h=_[m],g=p[m-v-1],y=0;y<x;y++)h[y]-=2*g[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(t,e){var n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b=numeric.toUpperHessenberg(t),w=numeric.QRFrancis(b.H,e),x=numeric.T,_=t.length,k=w.B,C=numeric.dot(w.Q,numeric.dot(b.H,numeric.transpose(w.Q))),S=new x(numeric.dot(w.Q,b.Q)),M=k.length,T=Math.sqrt;for(i=0;i<M;i++)if(n=k[i][0],n===k[i][1]);else{if(o=n+1,a=C[n][n],s=C[n][o],l=C[o][n],u=C[o][o],0===s&&0===l)continue;c=-a-u,h=a*u-s*l,d=c*c-4*h,d>=0?(f=c<0?-.5*(c-T(d)):-.5*(c+T(d)),v=(a-f)*(a-f)+s*s,y=l*l+(u-f)*(u-f),v>y?(v=T(v),g=(a-f)/v,m=s/v):(y=T(y),g=l/y,m=(u-f)/y),r=new x([[m,-g],[g,m]]),S.setRows(n,o,r.dot(S.getRows(n,o)))):(f=-.5*c,p=.5*T(-d),v=(a-f)*(a-f)+s*s,y=l*l+(u-f)*(u-f),v>y?(v=T(v+p*p),g=(a-f)/v,m=s/v,f=0,p/=v):(y=T(y+p*p),g=l/y,m=(u-f)/y,f=p/y,p=0),r=new x([[m,-g],[g,m]],[[f,p],[p,-f]]),S.setRows(n,o,r.dot(S.getRows(n,o))))}var E=S.dot(t).dot(S.transjugate()),_=t.length,O=numeric.T.identity(_);for(o=0;o<_;o++)if(o>0)for(i=o-1;i>=0;i--){var A=E.get([i,i]),D=E.get([o,o]);numeric.neq(A.x,D.x)||numeric.neq(A.y,D.y)?(f=E.getRow(i).getBlock([i],[o-1]),p=O.getRow(o).getBlock([i],[o-1]),O.set([o,i],E.get([i,o]).neg().sub(f.dot(p)).div(A.sub(D)))):O.setRow(o,O.getRow(i))}for(o=0;o<_;o++)f=O.getRow(o),O.setRow(o,f.div(f.norm2()));return O=O.transpose(),O=S.transjugate().dot(O),{lambda:E.getDiag(),E:O}},numeric.ccsSparse=function(t){var e,n,i,r,o=t.length,a=[];for(i=o-1;i!==-1;--i){n=t[i];for(r in n){for(r=parseInt(r);r>=a.length;)a[a.length]=0;0!==n[r]&&a[r]++}}var e=a.length,s=Array(e+1);for(s[0]=0,i=0;i<e;++i)s[i+1]=s[i]+a[i];var l=Array(s[e]),u=Array(s[e]);for(i=o-1;i!==-1;--i){n=t[i];for(r in n)0!==n[r]&&(a[r]--,l[s[r]+a[r]]=i,u[s[r]+a[r]]=n[r])}return[s,l,u]},numeric.ccsFull=function(t){var e,n,i,r,o=t[0],a=t[1],s=t[2],l=numeric.ccsDim(t),u=l[0],c=l[1],h=numeric.rep([u,c],0);for(e=0;e<c;e++)for(i=o[e],r=o[e+1],n=i;n<r;++n)h[a[n]][e]=s[n];return h},numeric.ccsTSolve=function(t,e,n,i,r){function o(t){var e;if(0===n[t]){for(n[t]=1,e=a[t];e<a[t+1];++e)o(s[e]);r[h]=t,++h}}var a=t[0],s=t[1],l=t[2],u=a.length-1,c=Math.max,h=0;
"undefined"==typeof i&&(n=numeric.rep([u],0)),"undefined"==typeof i&&(i=numeric.linspace(0,n.length-1)),"undefined"==typeof r&&(r=[]);var d,f,p,g,m,v,y;for(d=i.length-1;d!==-1;--d)o(i[d]);for(r.length=h,d=r.length-1;d!==-1;--d)n[r[d]]=0;for(d=i.length-1;d!==-1;--d)f=i[d],n[f]=e[f];for(d=r.length-1;d!==-1;--d){for(f=r[d],p=a[f],g=c(a[f+1],p),m=p;m!==g;++m)if(s[m]===f){n[f]/=l[m];break}for(y=n[f],m=p;m!==g;++m)v=s[m],v!==f&&(n[v]-=y*l[m])}return n},numeric.ccsDFS=function(t){this.k=Array(t),this.k1=Array(t),this.j=Array(t)},numeric.ccsDFS.prototype.dfs=function(t,e,n,i,r,o){var a,s,l,u=0,c=r.length,h=this.k,d=this.k1,f=this.j;if(0===i[t])for(i[t]=1,f[0]=t,h[0]=s=e[t],d[0]=l=e[t+1];;)if(s>=l){if(r[c]=f[u],0===u)return;++c,--u,s=h[u],l=d[u]}else a=o[n[s]],0===i[a]?(i[a]=1,h[u]=s,++u,f[u]=a,s=e[a],d[u]=l=e[a+1]):++s},numeric.ccsLPSolve=function(t,e,n,i,r,o,a){var s,l,u,c,h,d,f,p,g,m=t[0],v=t[1],y=t[2],b=(m.length-1,e[0]),w=e[1],x=e[2];for(l=b[r],u=b[r+1],i.length=0,s=l;s<u;++s)a.dfs(o[w[s]],m,v,n,i,o);for(s=i.length-1;s!==-1;--s)n[i[s]]=0;for(s=l;s!==u;++s)c=o[w[s]],n[c]=x[s];for(s=i.length-1;s!==-1;--s){for(c=i[s],h=m[c],d=m[c+1],f=h;f<d;++f)if(o[v[f]]===c){n[c]/=y[f];break}for(g=n[c],f=h;f<d;++f)p=o[v[f]],p!==c&&(n[p]-=g*y[f])}return n},numeric.ccsLUP1=function(t,e){var n,i,r,o,a,s,l,u=t[0].length-1,c=[numeric.rep([u+1],0),[],[]],h=[numeric.rep([u+1],0),[],[]],d=c[0],f=c[1],p=c[2],g=h[0],m=h[1],v=h[2],y=numeric.rep([u],0),b=numeric.rep([u],0),w=numeric.ccsLPSolve,x=(Math.max,Math.abs),_=numeric.linspace(0,u-1),k=numeric.linspace(0,u-1),C=new numeric.ccsDFS(u);for("undefined"==typeof e&&(e=1),n=0;n<u;++n){for(w(c,t,y,b,n,k,C),o=-1,a=-1,i=b.length-1;i!==-1;--i)r=b[i],r<=n||(s=x(y[r]),s>o&&(a=r,o=s));for(x(y[n])<e*o&&(i=_[n],o=_[a],_[n]=o,k[o]=n,_[a]=i,k[i]=a,o=y[n],y[n]=y[a],y[a]=o),o=d[n],a=g[n],l=y[n],f[o]=_[n],p[o]=1,++o,i=b.length-1;i!==-1;--i)r=b[i],s=y[r],b[i]=0,y[r]=0,r<=n?(m[a]=r,v[a]=s,++a):(f[o]=_[r],p[o]=s/l,++o);d[n+1]=o,g[n+1]=a}for(i=f.length-1;i!==-1;--i)f[i]=k[f[i]];return{L:c,U:h,P:_,Pinv:k}},numeric.ccsDFS0=function(t){this.k=Array(t),this.k1=Array(t),this.j=Array(t)},numeric.ccsDFS0.prototype.dfs=function(t,e,n,i,r,o,a){var s,l,u,c=0,h=r.length,d=this.k,f=this.k1,p=this.j;if(0===i[t])for(i[t]=1,p[0]=t,d[0]=l=e[o[t]],f[0]=u=e[o[t]+1];;){if(isNaN(l))throw new Error("Ow!");if(l>=u){if(r[h]=o[p[c]],0===c)return;++h,--c,l=d[c],u=f[c]}else s=n[l],0===i[s]?(i[s]=1,d[c]=l,++c,p[c]=s,s=o[s],l=e[s],f[c]=u=e[s+1]):++l}},numeric.ccsLPSolve0=function(t,e,n,i,r,o,a,s){var l,u,c,h,d,f,p,g,m,v=t[0],y=t[1],b=t[2],w=(v.length-1,e[0]),x=e[1],_=e[2];for(u=w[r],c=w[r+1],i.length=0,l=u;l<c;++l)s.dfs(x[l],v,y,n,i,o,a);for(l=i.length-1;l!==-1;--l)h=i[l],n[a[h]]=0;for(l=u;l!==c;++l)h=x[l],n[h]=_[l];for(l=i.length-1;l!==-1;--l){for(h=i[l],g=a[h],d=v[h],f=v[h+1],p=d;p<f;++p)if(y[p]===g){n[g]/=b[p];break}for(m=n[g],p=d;p<f;++p)n[y[p]]-=m*b[p];n[g]=m}},numeric.ccsLUP0=function(t,e){var n,i,r,o,a,s,l,u=t[0].length-1,c=[numeric.rep([u+1],0),[],[]],h=[numeric.rep([u+1],0),[],[]],d=c[0],f=c[1],p=c[2],g=h[0],m=h[1],v=h[2],y=numeric.rep([u],0),b=numeric.rep([u],0),w=numeric.ccsLPSolve0,x=(Math.max,Math.abs),_=numeric.linspace(0,u-1),k=numeric.linspace(0,u-1),C=new numeric.ccsDFS0(u);for("undefined"==typeof e&&(e=1),n=0;n<u;++n){for(w(c,t,y,b,n,k,_,C),o=-1,a=-1,i=b.length-1;i!==-1;--i)r=b[i],r<=n||(s=x(y[_[r]]),s>o&&(a=r,o=s));for(x(y[_[n]])<e*o&&(i=_[n],o=_[a],_[n]=o,k[o]=n,_[a]=i,k[i]=a),o=d[n],a=g[n],l=y[_[n]],f[o]=_[n],p[o]=1,++o,i=b.length-1;i!==-1;--i)r=b[i],s=y[_[r]],b[i]=0,y[_[r]]=0,r<=n?(m[a]=r,v[a]=s,++a):(f[o]=_[r],p[o]=s/l,++o);d[n+1]=o,g[n+1]=a}for(i=f.length-1;i!==-1;--i)f[i]=k[f[i]];return{L:c,U:h,P:_,Pinv:k}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(t){return[numeric.sup(t[1])+1,t[0].length-1]},numeric.ccsGetBlock=function(t,e,n){var i=numeric.ccsDim(t),r=i[0],o=i[1];"undefined"==typeof e?e=numeric.linspace(0,r-1):"number"==typeof e&&(e=[e]),"undefined"==typeof n?n=numeric.linspace(0,o-1):"number"==typeof n&&(n=[n]);var a,s,l,u,c,h=e.length,d=n.length,f=numeric.rep([o],0),p=[],g=[],m=[f,p,g],v=t[0],y=t[1],b=t[2],w=numeric.rep([r],0),x=0,_=numeric.rep([r],0);for(s=0;s<d;++s){u=n[s];var k=v[u],C=v[u+1];for(a=k;a<C;++a)l=y[a],_[l]=1,w[l]=b[a];for(a=0;a<h;++a)c=e[a],_[c]&&(p[x]=a,g[x]=w[e[a]],++x);for(a=k;a<C;++a)l=y[a],_[l]=0;f[s+1]=x}return m},numeric.ccsDot=function(t,e){var n,i,r,o,a,s,l,u,c,h,d,f=t[0],p=t[1],g=t[2],m=e[0],v=e[1],y=e[2],b=numeric.ccsDim(t),w=numeric.ccsDim(e),x=b[0],_=(b[1],w[1]),k=numeric.rep([x],0),C=numeric.rep([x],0),S=Array(x),M=numeric.rep([_],0),T=[],E=[],O=[M,T,E];for(r=0;r!==_;++r){for(o=m[r],a=m[r+1],c=0,i=o;i<a;++i)for(h=v[i],d=y[i],s=f[h],l=f[h+1],n=s;n<l;++n)u=p[n],0===C[u]&&(S[c]=u,C[u]=1,c+=1),k[u]=k[u]+g[n]*d;for(o=M[r],a=o+c,M[r+1]=a,i=c-1;i!==-1;--i)d=o+i,n=S[i],T[d]=n,E[d]=k[n],C[n]=0,k[n]=0;M[r+1]=M[r]+c}return O},numeric.ccsLUPSolve=function(t,e){var n=t.L,i=t.U,r=(t.P,e[0]),o=!1;"object"!=typeof r&&(e=[[0,e.length],numeric.linspace(0,e.length-1),e],r=e[0],o=!0);var a,s,l,u,c,h,d=e[1],f=e[2],p=n[0].length-1,g=r.length-1,m=numeric.rep([p],0),v=Array(p),y=numeric.rep([p],0),b=Array(p),w=numeric.rep([g+1],0),x=[],_=[],k=numeric.ccsTSolve,C=0;for(a=0;a<g;++a){for(c=0,l=r[a],u=r[a+1],s=l;s<u;++s)h=t.Pinv[d[s]],b[c]=h,y[h]=f[s],++c;for(b.length=c,k(n,y,m,b,v),s=b.length-1;s!==-1;--s)y[b[s]]=0;if(k(i,m,y,v,b),o)return y;for(s=v.length-1;s!==-1;--s)m[v[s]]=0;for(s=b.length-1;s!==-1;--s)h=b[s],x[C]=h,_[C]=y[h],y[h]=0,++C;w[a+1]=C}return[w,x,_]},numeric.ccsbinop=function(t,e){return"undefined"==typeof e&&(e=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+e+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+t+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(t){var e,n=t[0],i=t[1],r=t[2],o=numeric.sup(i)+1,a=n.length,s=numeric.rep([o],0),l=Array(a),u=Array(a),c=numeric.rep([o],0);for(e=0;e<a;++e)c[i[e]]++;for(e=0;e<o;++e)s[e+1]=s[e]+c[e];var h,d,f=s.slice(0);for(e=0;e<a;++e)d=i[e],h=f[d],l[h]=n[e],u[h]=r[e],f[d]=f[d]+1;return[s,l,u]},numeric.ccsGather=function(t){var e,n,i,r,o,a=t[0],s=t[1],l=t[2],u=a.length-1,c=s.length,h=Array(c),d=Array(c),f=Array(c);for(o=0,e=0;e<u;++e)for(i=a[e],r=a[e+1],n=i;n!==r;++n)d[o]=e,h[o]=s[n],f[o]=l[n],++o;return[h,d,f]},numeric.sdim=function l(t,e,n){if("undefined"==typeof e&&(e=[]),"object"!=typeof t)return e;"undefined"==typeof n&&(n=0),n in e||(e[n]=0),t.length>e[n]&&(e[n]=t.length);var i;for(i in t)t.hasOwnProperty(i)&&l(t[i],e,n+1);return e},numeric.sclone=function u(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=numeric.sdim(t).length);var i,r=Array(t.length);if(e===n-1){for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r}for(i in t)t.hasOwnProperty(i)&&(r[i]=u(t[i],e+1,n));return r},numeric.sdiag=function(t){var e,n,i=t.length,r=Array(i);for(e=i-1;e>=1;e-=2)n=e-1,r[e]=[],r[e][e]=t[e],r[n]=[],r[n][n]=t[n];return 0===e&&(r[0]=[],r[0][0]=t[e]),r},numeric.sidentity=function(t){return numeric.sdiag(numeric.rep([t],1))},numeric.stranspose=function(t){var e,n,i,r=[];t.length;for(e in t)if(t.hasOwnProperty(e)){i=t[e];for(n in i)i.hasOwnProperty(n)&&("object"!=typeof r[n]&&(r[n]=[]),r[n][e]=i[n])}return r},numeric.sLUP=function(t,e){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(t,e){var n,i,r,o,a,s,l,u=t.length,c=(e.length,numeric.stranspose(e)),h=c.length,d=Array(u);for(r=u-1;r>=0;r--){for(l=[],n=t[r],a=h-1;a>=0;a--){s=0,i=c[a];for(o in n)n.hasOwnProperty(o)&&o in i&&(s+=n[o]*i[o]);s&&(l[a]=s)}d[r]=l}return d},numeric.sdotMV=function(t,e){var n,i,r,o,a=t.length,s=Array(a);for(i=a-1;i>=0;i--){n=t[i],o=0;for(r in n)n.hasOwnProperty(r)&&e[r]&&(o+=n[r]*e[r]);o&&(s[i]=o)}return s},numeric.sdotVM=function(t,e){var n,i,r,o,a=[];for(n in t)if(t.hasOwnProperty(n)){r=e[n],o=t[n];for(i in r)r.hasOwnProperty(i)&&(a[i]||(a[i]=0),a[i]+=o*r[i])}return a},numeric.sdotVV=function(t,e){var n,i=0;for(n in t)t[n]&&e[n]&&(i+=t[n]*e[n]);return i},numeric.sdot=function(t,e){var n=numeric.sdim(t).length,i=numeric.sdim(e).length,r=1e3*n+i;switch(r){case 0:return t*e;case 1001:return numeric.sdotVV(t,e);case 2001:return numeric.sdotMV(t,e);case 1002:return numeric.sdotVM(t,e);case 2002:return numeric.sdotMM(t,e);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+i)}},numeric.sscatter=function(t){var e,n,i,r,o=t[0].length,a=t.length,s=[];for(n=o-1;n>=0;--n)if(t[a-1][n]){for(r=s,i=0;i<a-2;i++)e=t[i][n],r[e]||(r[e]=[]),r=r[e];r[t[i][n]]=t[i+1][n]}return s},numeric.sgather=function c(t,e,n){"undefined"==typeof e&&(e=[]),"undefined"==typeof n&&(n=[]);var i,r,o;i=n.length;for(r in t)if(t.hasOwnProperty(r))if(n[i]=parseInt(r),o=t[r],"number"==typeof o){if(o){if(0===e.length)for(r=i+1;r>=0;--r)e[r]=[];for(r=i;r>=0;--r)e[r].push(n[r]);e[i+1].push(o)}}else c(o,e,n);return n.length>i&&n.pop(),e},numeric.cLU=function(t){var e,n,i,r,o,a,s=t[0],l=t[1],u=t[2],c=s.length,h=0;for(e=0;e<c;e++)s[e]>h&&(h=s[e]);h++;var d,f,p,g=Array(h),m=Array(h),v=numeric.rep([h],1/0),y=numeric.rep([h],-(1/0));for(i=0;i<c;i++)e=s[i],n=l[i],n<v[e]&&(v[e]=n),n>y[e]&&(y[e]=n);for(e=0;e<h-1;e++)y[e]>y[e+1]&&(y[e+1]=y[e]);for(e=h-1;e>=1;e--)v[e]<v[e-1]&&(v[e-1]=v[e]);var b=0,w=0;for(e=0;e<h;e++)m[e]=numeric.rep([y[e]-v[e]+1],0),g[e]=numeric.rep([e-v[e]],0),b+=e-v[e]+1,w+=y[e]-e+1;for(i=0;i<c;i++)e=s[i],m[e][l[i]-v[e]]=u[i];for(e=0;e<h-1;e++)for(r=e-v[e],d=m[e],n=e+1;v[n]<=e&&n<h;n++)if(o=e-v[n],a=y[e]-e,f=m[n],p=f[o]/d[r]){for(i=1;i<=a;i++)f[i+o]-=p*d[i+r];g[n][e-v[n]]=p}var c,x,_,d=[],f=[],k=[],C=[],S=[],M=[];for(c=0,x=0,e=0;e<h;e++){for(r=v[e],o=y[e],_=m[e],n=e;n<=o;n++)_[n-r]&&(d[c]=e,f[c]=n,k[c]=_[n-r],c++);for(_=g[e],n=r;n<e;n++)_[n-r]&&(C[x]=e,S[x]=n,M[x]=_[n-r],x++);C[x]=e,S[x]=e,M[x]=1,x++}return{U:[d,f,k],L:[C,S,M]}},numeric.cLUsolve=function(t,e){var n,i,r=t.L,o=t.U,a=numeric.clone(e),s=r[0],l=r[1],u=r[2],c=o[0],h=o[1],d=o[2],f=c.length,p=(s.length,a.length);for(i=0,n=0;n<p;n++){for(;l[i]<n;)a[n]-=u[i]*a[l[i]],i++;i++}for(i=f-1,n=p-1;n>=0;n--){for(;h[i]>n;)a[n]-=d[i]*a[h[i]],i--;a[n]/=d[i],i--}return a},numeric.cgrid=function(t,e){"number"==typeof t&&(t=[t,t]);var n,i,r,o=numeric.rep(t,-1);if("function"!=typeof e)switch(e){case"L":e=function(e,n){return e>=t[0]/2||n<t[1]/2};break;default:e=function(t,e){return!0}}for(r=0,n=1;n<t[0]-1;n++)for(i=1;i<t[1]-1;i++)e(n,i)&&(o[n][i]=r,r++);return o},numeric.cdelsq=function(t){var e,n,i,r,o,a=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(t),l=s[0],u=s[1],c=[],h=[],d=[];for(e=1;e<l-1;e++)for(n=1;n<u-1;n++)if(!(t[e][n]<0)){for(i=0;i<4;i++)r=e+a[i][0],o=n+a[i][1],t[r][o]<0||(c.push(t[e][n]),h.push(t[r][o]),d.push(-1));c.push(t[e][n]),h.push(t[e][n]),d.push(4)}return[c,h,d]},numeric.cdotMV=function(t,e){var n,i,r,o=t[0],a=t[1],s=t[2],l=o.length;for(r=0,i=0;i<l;i++)o[i]>r&&(r=o[i]);for(r++,n=numeric.rep([r],0),i=0;i<l;i++)n[o[i]]+=s[i]*e[a[i]];return n},numeric.Spline=function(t,e,n,i,r){this.x=t,this.yl=e,this.yr=n,this.kl=i,this.kr=r},numeric.Spline.prototype._at=function(t,e){var t,n,i,r,o=this.x,a=this.yl,s=this.yr,l=this.kl,u=this.kr,c=numeric.add,h=numeric.sub,d=numeric.mul;n=h(d(l[e],o[e+1]-o[e]),h(s[e+1],a[e])),i=c(d(u[e+1],o[e]-o[e+1]),h(s[e+1],a[e])),r=(t-o[e])/(o[e+1]-o[e]);var f=r*(1-r);return c(c(c(d(1-r,a[e]),d(r,s[e+1])),d(n,f*(1-r))),d(i,f*r))},numeric.Spline.prototype.at=function(t){if("number"==typeof t){var e,n,i,r=this.x,o=r.length,a=Math.floor;for(e=0,n=o-1;n-e>1;)i=a((e+n)/2),r[i]<=t?e=i:n=i;return this._at(t,e)}var s,o=t.length,l=Array(o);for(s=o-1;s!==-1;--s)l[s]=this.at(t[s]);return l},numeric.Spline.prototype.diff=function(){var t,e,n,i=this.x,r=this.yl,o=this.yr,a=this.kl,s=this.kr,l=r.length,u=a,c=s,h=Array(l),d=Array(l),f=numeric.add,p=numeric.mul,g=numeric.div,m=numeric.sub;for(t=l-1;t!==-1;--t)e=i[t+1]-i[t],n=m(o[t+1],r[t]),h[t]=g(f(p(n,6),p(a[t],-4*e),p(s[t+1],-2*e)),e*e),d[t+1]=g(f(p(n,-6),p(a[t],2*e),p(s[t+1],4*e)),e*e);return new numeric.Spline(i,u,c,h,d)},numeric.Spline.prototype.roots=function(){function t(t){return t*t}var e=[],n=this.x,i=this.yl,r=this.yr,o=this.kl,a=this.kr;"number"==typeof i[0]&&(i=[i],r=[r],o=[o],a=[a]);var s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D=i.length,R=n.length-1,e=Array(D),P=Math.sqrt;for(s=0;s!==D;++s){for(c=i[s],h=r[s],d=o[s],f=a[s],p=[],l=0;l!==R;l++){for(l>0&&h[l]*c[l]<0&&p.push(n[l]),_=n[l+1]-n[l],k=n[l],v=c[l],y=h[l+1],g=d[l]/_,m=f[l+1]/_,x=t(g-m+3*(v-y))+12*m*v,b=m+3*v+2*g-3*y,w=3*(m+g+2*(v-y)),x<=0?(S=b/w,C=S>n[l]&&S<n[l+1]?[n[l],S,n[l+1]]:[n[l],n[l+1]]):(S=(b-P(x))/w,M=(b+P(x))/w,C=[n[l]],S>n[l]&&S<n[l+1]&&C.push(S),M>n[l]&&M<n[l+1]&&C.push(M),C.push(n[l+1])),E=C[0],S=this._at(E,l),u=0;u<C.length-1;u++)if(O=C[u+1],M=this._at(O,l),0!==S)if(0===M||S*M>0)E=O,S=M;else{for(var N=0;;){if(A=(S*O-M*E)/(S-M),A<=E||A>=O)break;if(T=this._at(A,l),T*M>0)O=A,M=T,N===-1&&(S*=.5),N=-1;else{if(!(T*S>0))break;E=A,S=T,1===N&&(M*=.5),N=1}}p.push(A),E=C[u+1],S=this._at(E,l)}else p.push(E),E=O,S=M;0===M&&p.push(O)}e[s]=p}return"number"==typeof this.yl[0]?e[0]:e},numeric.spline=function(t,e,n,i){var r,o=t.length,a=[],s=[],l=[],u=numeric.sub,c=numeric.mul,h=numeric.add;for(r=o-2;r>=0;r--)s[r]=t[r+1]-t[r],l[r]=u(e[r+1],e[r]);"string"!=typeof n&&"string"!=typeof i||(n=i="periodic");var d=[[],[],[]];switch(typeof n){case"undefined":a[0]=c(3/(s[0]*s[0]),l[0]),d[0].push(0,0),d[1].push(0,1),d[2].push(2/s[0],1/s[0]);break;case"string":a[0]=h(c(3/(s[o-2]*s[o-2]),l[o-2]),c(3/(s[0]*s[0]),l[0])),d[0].push(0,0,0),d[1].push(o-2,0,1),d[2].push(1/s[o-2],2/s[o-2]+2/s[0],1/s[0]);break;default:a[0]=n,d[0].push(0),d[1].push(0),d[2].push(1)}for(r=1;r<o-1;r++)a[r]=h(c(3/(s[r-1]*s[r-1]),l[r-1]),c(3/(s[r]*s[r]),l[r])),d[0].push(r,r,r),d[1].push(r-1,r,r+1),d[2].push(1/s[r-1],2/s[r-1]+2/s[r],1/s[r]);switch(typeof i){case"undefined":a[o-1]=c(3/(s[o-2]*s[o-2]),l[o-2]),d[0].push(o-1,o-1),d[1].push(o-2,o-1),d[2].push(1/s[o-2],2/s[o-2]);break;case"string":d[1][d[1].length-1]=0;break;default:a[o-1]=i,d[0].push(o-1),d[1].push(o-1),d[2].push(1)}a="number"!=typeof a[0]?numeric.transpose(a):[a];var f=Array(a.length);if("string"==typeof n)for(r=f.length-1;r!==-1;--r)f[r]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(d)),a[r]),f[r][o-1]=f[r][0];else for(r=f.length-1;r!==-1;--r)f[r]=numeric.cLUsolve(numeric.cLU(d),a[r]);return f="number"==typeof e[0]?f[0]:numeric.transpose(f),new numeric.Spline(t,e,e,f,f)},numeric.fftpow2=function h(t,e){var n=t.length;if(1!==n){var i,r,o=Math.cos,a=Math.sin,s=Array(n/2),l=Array(n/2),u=Array(n/2),c=Array(n/2);for(r=n/2,i=n-1;i!==-1;--i)--r,u[r]=t[i],c[r]=e[i],--i,s[r]=t[i],l[r]=e[i];h(s,l),h(u,c),r=n/2;var d,f,p,g=-6.283185307179586/n;for(i=n-1;i!==-1;--i)--r,r===-1&&(r=n/2-1),d=g*i,f=o(d),p=a(d),t[i]=s[r]+f*u[r]-p*c[r],e[i]=l[r]+f*c[r]+p*u[r]}},numeric._ifftpow2=function d(t,e){var n=t.length;if(1!==n){var i,r,o=Math.cos,a=Math.sin,s=Array(n/2),l=Array(n/2),u=Array(n/2),c=Array(n/2);for(r=n/2,i=n-1;i!==-1;--i)--r,u[r]=t[i],c[r]=e[i],--i,s[r]=t[i],l[r]=e[i];d(s,l),d(u,c),r=n/2;var h,f,p,g=6.283185307179586/n;for(i=n-1;i!==-1;--i)--r,r===-1&&(r=n/2-1),h=g*i,f=o(h),p=a(h),t[i]=s[r]+f*u[r]-p*c[r],e[i]=l[r]+f*c[r]+p*u[r]}},numeric.ifftpow2=function(t,e){numeric._ifftpow2(t,e),numeric.diveq(t,t.length),numeric.diveq(e,e.length)},numeric.convpow2=function(t,e,n,i){numeric.fftpow2(t,e),numeric.fftpow2(n,i);var r,o,a,s,l,u=t.length;for(r=u-1;r!==-1;--r)o=t[r],s=e[r],a=n[r],l=i[r],t[r]=o*a-s*l,e[r]=o*l+s*a;numeric.ifftpow2(t,e)},numeric.T.prototype.fft=function(){var t,e,n=this.x,i=this.y,r=n.length,o=Math.log,a=o(2),s=Math.ceil(o(2*r-1)/a),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),h=Math.cos,d=Math.sin,f=-3.141592653589793/r,p=numeric.rep([l],0),g=numeric.rep([l],0);Math.floor(r/2);for(t=0;t<r;t++)p[t]=n[t];if("undefined"!=typeof i)for(t=0;t<r;t++)g[t]=i[t];for(u[0]=1,t=1;t<=l/2;t++)e=f*t*t,u[t]=h(e),c[t]=d(e),u[l-t]=h(e),c[l-t]=d(e);var m=new numeric.T(p,g),v=new numeric.T(u,c);return m=m.mul(v),numeric.convpow2(m.x,m.y,numeric.clone(v.x),numeric.neg(v.y)),m=m.mul(v),m.x.length=r,m.y.length=r,m},numeric.T.prototype.ifft=function(){var t,e,n=this.x,i=this.y,r=n.length,o=Math.log,a=o(2),s=Math.ceil(o(2*r-1)/a),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),h=Math.cos,d=Math.sin,f=3.141592653589793/r,p=numeric.rep([l],0),g=numeric.rep([l],0);Math.floor(r/2);for(t=0;t<r;t++)p[t]=n[t];if("undefined"!=typeof i)for(t=0;t<r;t++)g[t]=i[t];for(u[0]=1,t=1;t<=l/2;t++)e=f*t*t,u[t]=h(e),c[t]=d(e),u[l-t]=h(e),c[l-t]=d(e);var m=new numeric.T(p,g),v=new numeric.T(u,c);return m=m.mul(v),numeric.convpow2(m.x,m.y,numeric.clone(v.x),numeric.neg(v.y)),m=m.mul(v),m.x.length=r,m.y.length=r,m.div(r)},numeric.gradient=function(t,e){var n=e.length,i=t(e);if(isNaN(i))throw new Error("gradient: f(x) is a NaN!");var r,o,a,s,l,u,c,h,d,f,p=Math.max,g=numeric.clone(e),m=Array(n),p=(numeric.div,numeric.sub,Math.max),v=.001,y=Math.abs,b=Math.min,w=0;for(r=0;r<n;r++)for(var x=p(1e-6*i,1e-8);;){if(++w,w>20)throw new Error("Numerical gradient fails");if(g[r]=e[r]+x,o=t(g),g[r]=e[r]-x,a=t(g),g[r]=e[r],isNaN(o)||isNaN(a))x/=16;else{if(m[r]=(o-a)/(2*x),l=e[r]-x,u=e[r],c=e[r]+x,h=(o-i)/x,d=(i-a)/x,f=p(y(m[r]),y(i),y(o),y(a),y(l),y(u),y(c),1e-8),s=b(p(y(h-m[r]),y(d-m[r]),y(h-d))/f,x/f),!(s>v))break;x/=16}}return m},numeric.uncmin=function(t,e,n,i,r,o,a){var s=numeric.gradient;"undefined"==typeof a&&(a={}),"undefined"==typeof n&&(n=1e-8),"undefined"==typeof i&&(i=function(e){return s(t,e)}),"undefined"==typeof r&&(r=1e3),e=numeric.clone(e);var l,u,c=e.length,h=t(e);if(isNaN(h))throw new Error("uncmin: f(x0) is a NaN!");var d=Math.max,f=numeric.norm2;n=d(n,numeric.epsilon);var p,g,m,v,y,b,w,x,_,k,C=a.Hinv||numeric.identity(c),S=numeric.dot,M=(numeric.inv,numeric.sub),T=numeric.add,E=numeric.tensor,O=numeric.div,A=numeric.mul,D=numeric.all,R=numeric.isFinite,P=numeric.neg,N=0,z="";for(g=i(e);N<r;){if("function"==typeof o&&o(N,e,h,g,C)){z="Callback returned true";break}if(!D(R(g))){z="Gradient has Infinity or NaN";break}if(p=P(S(C,g)),!D(R(p))){z="Search direction has Infinity or NaN";break}if(k=f(p),k<n){z="Newton step smaller than tol";break}for(_=1,u=S(g,p),y=e;N<r&&!(_*k<n)&&(v=A(p,_),y=T(e,v),l=t(y),l-h>=.1*_*u||isNaN(l));)_*=.5,++N;if(_*k<n){z="Line search step size smaller than tol";break}if(N===r){z="maxit reached during line search";break}m=i(y),b=M(m,g),x=S(b,v),w=S(C,b),C=M(T(C,A((x+S(b,w))/(x*x),E(v,v))),O(T(E(w,v),E(v,w)),x)),e=y,h=l,g=m,++N}return{solution:e,f:h,gradient:g,invHessian:C,iterations:N,message:z}},numeric.Dopri=function(t,e,n,i,r,o,a){this.x=t,this.y=e,this.f=n,this.ymid=i,this.iterations=r,this.events=a,this.message=o},numeric.Dopri.prototype._at=function(t,e){function n(t){return t*t}var i,r,o,a,s,l,t,u,c,h,d,f=this,p=f.x,g=f.y,m=f.f,v=f.ymid,y=(p.length,Math.floor,.5),b=numeric.add,w=numeric.mul,x=numeric.sub;return i=p[e],r=p[e+1],a=g[e],s=g[e+1],u=r-i,o=i+y*u,l=v[e],c=x(m[e],w(a,1/(i-o)+2/(i-r))),h=x(m[e+1],w(s,1/(r-o)+2/(r-i))),d=[n(t-r)*(t-o)/n(i-r)/(i-o),n(t-i)*n(t-r)/n(i-o)/n(r-o),n(t-i)*(t-o)/n(r-i)/(r-o),(t-i)*n(t-r)*(t-o)/n(i-r)/(i-o),(t-r)*n(t-i)*(t-o)/n(i-r)/(r-o)],b(b(b(b(w(a,d[0]),w(l,d[1])),w(s,d[2])),w(c,d[3])),w(h,d[4]))},numeric.Dopri.prototype.at=function(t){var e,n,i,r=Math.floor;if("number"!=typeof t){var o=t.length,a=Array(o);for(e=o-1;e!==-1;--e)a[e]=this.at(t[e]);return a}var s=this.x;for(e=0,n=s.length-1;n-e>1;)i=r(.5*(e+n)),s[i]<=t?e=i:n=i;return this._at(t,e)},numeric.dopri=function(t,e,n,i,r,o,a){"undefined"==typeof r&&(r=1e-6),"undefined"==typeof o&&(o=1e3);var s,l,u,c,h,d,f,p,g,m,v,y,b,w=[t],x=[n],_=[i(t,n)],k=[],C=.2,S=[.075,.225],M=[44/45,-56/15,32/9],T=[19372/6561,-25360/2187,64448/6561,-212/729],E=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],O=[35/384,0,500/1113,125/192,-2187/6784,11/84],A=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],D=[.2,.3,.8,8/9,1,1],R=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],P=0,N=(e-t)/10,z=0,L=numeric.add,I=numeric.mul,H=(Math.max,Math.min),j=Math.abs,F=numeric.norminf,B=Math.pow,W=numeric.any,Y=numeric.lt,V=numeric.and,U=(numeric.sub,new numeric.Dopri(w,x,_,k,(-1),""));for("function"==typeof a&&(v=a(t,n));t<e&&z<o;)if(++z,t+N>e&&(N=e-t),s=i(t+D[0]*N,L(n,I(C*N,_[P]))),l=i(t+D[1]*N,L(L(n,I(S[0]*N,_[P])),I(S[1]*N,s))),u=i(t+D[2]*N,L(L(L(n,I(M[0]*N,_[P])),I(M[1]*N,s)),I(M[2]*N,l))),c=i(t+D[3]*N,L(L(L(L(n,I(T[0]*N,_[P])),I(T[1]*N,s)),I(T[2]*N,l)),I(T[3]*N,u))),h=i(t+D[4]*N,L(L(L(L(L(n,I(E[0]*N,_[P])),I(E[1]*N,s)),I(E[2]*N,l)),I(E[3]*N,u)),I(E[4]*N,c))),g=L(L(L(L(L(n,I(_[P],N*O[0])),I(l,N*O[2])),I(u,N*O[3])),I(c,N*O[4])),I(h,N*O[5])),d=i(t+N,g),f=L(L(L(L(L(I(_[P],N*R[0]),I(l,N*R[2])),I(u,N*R[3])),I(c,N*R[4])),I(h,N*R[5])),I(d,N*R[6])),m="number"==typeof f?j(f):F(f),m>r){if(N=.2*N*B(r/m,.25),t+N===t){U.msg="Step size became too small";break}}else{if(k[P]=L(L(L(L(L(L(n,I(_[P],N*A[0])),I(l,N*A[2])),I(u,N*A[3])),I(c,N*A[4])),I(h,N*A[5])),I(d,N*A[6])),++P,w[P]=t+N,x[P]=g,_[P]=d,"function"==typeof a){var q,X,G=t,$=t+.5*N;if(y=a($,k[P-1]),b=V(Y(v,0),Y(0,y)),W(b)||(G=$,$=t+N,v=y,y=a($,g),b=V(Y(v,0),Y(0,y))),W(b)){for(var K,Z,Q=0,J=1,tt=1;;){if("number"==typeof v)X=(tt*y*G-J*v*$)/(tt*y-J*v);else for(X=$,p=v.length-1;p!==-1;--p)v[p]<0&&y[p]>0&&(X=H(X,(tt*y[p]*G-J*v[p]*$)/(tt*y[p]-J*v[p])));if(X<=G||X>=$)break;q=U._at(X,P-1),Z=a(X,q),K=V(Y(v,0),Y(0,Z)),W(K)?($=X,y=Z,b=K,tt=1,Q===-1?J*=.5:J=1,Q=-1):(G=X,v=Z,J=1,1===Q?tt*=.5:tt=1,Q=1)}return g=U._at(.5*(t+X),P-1),U.f[P]=i(X,q),U.x[P]=X,U.y[P]=q,U.ymid[P-1]=g,U.events=b,U.iterations=z,U}}t+=N,n=g,v=y,N=H(.8*N*B(r/m,.25),4*N)}return U.iterations=z,U},numeric.LU=function(t,e){e=e||!1;var n,i,r,o,a,s,l,u,c,h=Math.abs,d=t.length,f=d-1,p=new Array(d);for(e||(t=numeric.clone(t)),r=0;r<d;++r){for(l=r,s=t[r],c=h(s[r]),i=r+1;i<d;++i)o=h(t[i][r]),c<o&&(c=o,l=i);for(p[r]=l,l!=r&&(t[r]=t[l],t[l]=s,s=t[r]),a=s[r],n=r+1;n<d;++n)t[n][r]/=a;for(n=r+1;n<d;++n){for(u=t[n],i=r+1;i<f;++i)u[i]-=u[r]*s[i],++i,u[i]-=u[r]*s[i];i===f&&(u[i]-=u[r]*s[i])}}return{LU:t,P:p}},numeric.LUsolve=function(t,e){var n,i,r,o,a,s=t.LU,l=s.length,u=numeric.clone(e),c=t.P;for(n=l-1;n!==-1;--n)u[n]=e[n];for(n=0;n<l;++n)for(r=c[n],c[n]!==n&&(a=u[n],u[n]=u[r],u[r]=a),o=s[n],i=0;i<n;++i)u[n]-=u[i]*o[i];for(n=l-1;n>=0;--n){for(o=s[n],i=n+1;i<l;++i)u[n]-=u[i]*o[i];u[n]/=o[n]}return u},numeric.solve=function(t,e,n){return numeric.LUsolve(numeric.LU(t,n),e)},numeric.echelonize=function(t){var e,n,i,r,o,a,s,l,u=numeric.dim(t),c=u[0],h=u[1],d=numeric.identity(c),f=Array(c),p=Math.abs,g=numeric.diveq;for(t=numeric.clone(t),e=0;e<c;++e){for(i=0,o=t[e],a=d[e],n=1;n<h;++n)p(o[i])<p(o[n])&&(i=n);for(f[e]=i,g(a,o[i]),g(o,o[i]),n=0;n<c;++n)if(n!==e){for(s=t[n],l=s[i],r=h-1;r!==-1;--r)s[r]-=o[r]*l;for(s=d[n],r=c-1;r!==-1;--r)s[r]-=a[r]*l}}return{I:d,A:t,P:f}},numeric.__solveLP=function(t,e,n,i,r,o,a){var s,l,u,c,h=numeric.sum,d=(numeric.log,numeric.mul),f=numeric.sub,p=numeric.dot,g=numeric.div,m=numeric.add,v=t.length,y=n.length,b=!1,w=0,x=1,_=(numeric.transpose(e),numeric.svd,numeric.transpose),k=(numeric.leq,Math.sqrt),C=Math.abs,S=(numeric.muleq,numeric.norminf,numeric.any,Math.min),M=numeric.all,T=numeric.gt,E=Array(v),O=Array(y),A=(numeric.rep([y],1),numeric.solve),D=f(n,p(e,o)),R=p(t,t);for(u=w;u<r;++u){var P,N;for(P=y-1;P!==-1;--P)O[P]=g(e[P],D[P]);var z=_(O);for(P=v-1;P!==-1;--P)E[P]=h(z[P]);x=.25*C(R/p(t,E));var L=100*k(R/p(E,E));for((!isFinite(x)||x>L)&&(x=L),c=m(t,d(x,E)),l=p(z,O),P=v-1;P!==-1;--P)l[P][P]+=1;N=A(l,g(c,x),!0);var I=g(D,p(e,N)),H=1;for(P=y-1;P!==-1;--P)I[P]<0&&(H=S(H,-.999*I[P]));if(s=f(o,d(N,H)),D=f(n,p(e,s)),!M(T(D,0)))return{solution:o,message:"",iterations:u};if(o=s,x<i)return{solution:s,message:"",iterations:u};if(a){var j=p(t,c),F=p(e,c);for(b=!0,P=y-1;P!==-1;--P)if(j*F[P]<0){b=!1;break}}else b=!(o[v-1]>=0);if(b)return{solution:s,message:"Unbounded",iterations:u}}return{solution:o,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(t,e,n,i,r){var o,a=t.length,s=n.length,l=(numeric.sum,numeric.log,numeric.mul,numeric.sub),u=numeric.dot,c=(numeric.div,numeric.add,numeric.rep([a],0).concat([1])),h=numeric.rep([s,1],-1),d=numeric.blockMatrix([[e,h]]),f=n,o=numeric.rep([a],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),p=numeric.__solveLP(c,d,f,i,r,o,!1),g=numeric.clone(p.solution);g.length=a;var m=numeric.inf(l(n,u(e,g)));if(m<0)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var v=numeric.__solveLP(t,e,n,i,r-p.iterations,g,!0);return v.iterations+=p.iterations,v},numeric.solveLP=function(t,e,n,i,r,o,a){if("undefined"==typeof a&&(a=1e3),"undefined"==typeof o&&(o=numeric.epsilon),"undefined"==typeof i)return numeric._solveLP(t,e,n,o,a);var s,l=i.length,u=i[0].length,c=e.length,h=numeric.echelonize(i),d=numeric.rep([u],0),f=h.P,p=[];for(s=f.length-1;s!==-1;--s)d[f[s]]=1;for(s=u-1;s!==-1;--s)0===d[s]&&p.push(s);var g=numeric.getRange,m=numeric.linspace(0,l-1),v=numeric.linspace(0,c-1),y=g(i,m,p),b=g(e,v,f),w=g(e,v,p),x=numeric.dot,_=numeric.sub,k=x(b,h.I),C=_(w,x(k,y)),S=_(n,x(k,r)),M=Array(f.length),T=Array(p.length);for(s=f.length-1;s!==-1;--s)M[s]=t[f[s]];for(s=p.length-1;s!==-1;--s)T[s]=t[p[s]];var E=_(T,x(M,x(h.I,y))),O=numeric._solveLP(E,C,S,o,a),A=O.solution;if(A!==A)return O;var D=x(h.I,_(r,x(y,A))),R=Array(t.length);for(s=f.length-1;s!==-1;--s)R[f[s]]=D[s];for(s=p.length-1;s!==-1;--s)R[p[s]]=A[s];return{solution:R,message:O.message,iterations:O.iterations}},numeric.MPStoLP=function(t){function e(e){throw new Error("MPStoLP: "+e+"\nLine "+n+": "+t[n]+"\nCurrent state: "+s[a]+"\n")}t instanceof String&&t.split("\n");var n,i,r,o,a=0,s=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],l=t.length,u=0,c={},h=[],d=0,f={},p=0,g=[],m=[],v=[];for(n=0;n<l;++n){r=t[n];var y=r.match(/\S*/g),b=[];for(i=0;i<y.length;++i)""!==y[i]&&b.push(y[i]);if(0!==b.length){for(i=0;i<s.length&&r.substr(0,s[i].length)!==s[i];++i);if(i<s.length){if(a=i,1===i&&(o=b[1]),6===i)return{name:o,c:g,A:numeric.transpose(m),b:v,rows:c,vars:f}}else switch(a){case 0:case 1:e("Unexpected line");case 2:switch(b[0]){case"N":0===u?u=b[1]:e("Two or more N rows");break;case"L":c[b[1]]=d,h[d]=1,v[d]=0,++d;break;case"G":c[b[1]]=d,h[d]=-1,v[d]=0,++d;break;case"E":c[b[1]]=d,h[d]=0,v[d]=0,++d;break;default:e("Parse error "+numeric.prettyPrint(b))}break;case 3:f.hasOwnProperty(b[0])||(f[b[0]]=p,g[p]=0,m[p]=numeric.rep([d],0),++p);var w=f[b[0]];for(i=1;i<b.length;i+=2)if(b[i]!==u){var x=c[b[i]];m[w][x]=(h[x]<0?-1:1)*parseFloat(b[i+1])}else g[w]=parseFloat(b[i+1]);break;case 4:for(i=1;i<b.length;i+=2)v[c[b[i]]]=(h[c[b[i]]]<0?-1:1)*parseFloat(b[i+1]);break;case 5:break;case 6:e("Internal error")}}}e("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(t,e,n,i,r,o,a){function s(t){var e,i,r=this,o=t.length,a=0,s=r.i=r.j=r.m=0;for(r.S=[],r.c=[],o||(t=[o++]);a<n;)r.S[a]=a++;for(a=0;a<n;a++)e=r.S[a],s=c(s+e+t[a%o]),i=r.S[s],r.S[a]=i,r.S[s]=e;r.g=function(t){var e=r.S,i=c(r.i+1),o=e[i],a=c(r.j+o),s=e[a];e[i]=s,e[a]=o;for(var l=e[c(o+s)];--t;)i=c(i+1),o=e[i],a=c(a+o),s=e[a],e[i]=s,e[a]=o,l=l*n+e[c(o+s)];return r.i=i,r.j=a,l},r.g(n)}function l(t,e,n,i,r){if(n=[],r=typeof t,e&&"object"==r)for(i in t)if(i.indexOf("S")<5)try{n.push(l(t[i],e-1))}catch(o){}return n.length?n:t+("string"!=r?"\0":"")}function u(t,e,n,i){for(t+="",n=0,i=0;i<t.length;i++)e[c(i)]=c((n^=19*e[c(i)])+t.charCodeAt(i));t="";for(i in e)t+=String.fromCharCode(e[i]);return t}function c(t){return t&n-1}e.seedrandom=function(c,h){var d,f=[];return c=u(l(h?[c,t]:arguments.length?c:[(new Date).getTime(),t,window],3),f),d=new s(f),u(d.S,t),e.random=function(){for(var t=d.g(i),e=a,s=0;t<r;)t=(t+s)*n,e*=n,s=d.g(1);for(;t>=o;)t/=2,e/=2,s>>>=1;return(t+s)/e},c},a=e.pow(n,i),r=e.pow(2,r),o=2*r,u(e.random(),t)}([],numeric.seedrandom,256,6,52),function(t){function e(t){if("object"!=typeof t)return t;var n,i=[],r=t.length;for(n=0;n<r;n++)i[n+1]=e(t[n]);return i}function n(t){if("object"!=typeof t)return t;var e,i=[],r=t.length;for(e=1;e<r;e++)i[e-1]=n(t[e]);return i}function i(t,e,n){var i,r,o,a,s;for(o=1;o<=n;o+=1){for(t[o][o]=1/t[o][o],s=-t[o][o],i=1;i<o;i+=1)t[i][o]=s*t[i][o];if(a=o+1,n<a)break;for(r=a;r<=n;r+=1)for(s=t[o][r],t[o][r]=0,i=1;i<=o;i+=1)t[i][r]=t[i][r]+s*t[i][o]}}function r(t,e,n,i){var r,o,a,s;for(o=1;o<=n;o+=1){for(s=0,r=1;r<o;r+=1)s+=t[r][o]*i[r];i[o]=(i[o]-s)/t[o][o]}for(a=1;a<=n;a+=1)for(o=n+1-a,i[o]=i[o]/t[o][o],s=-i[o],r=1;r<o;r+=1)i[r]=i[r]+s*t[r][o]}function o(t,e,n,i){var r,o,a,s,l,u;for(o=1;o<=n;o+=1){if(i[1]=o,u=0,a=o-1,a<1){if(u=t[o][o]-u,u<=0)break;t[o][o]=Math.sqrt(u)}else{for(s=1;s<=a;s+=1){for(l=t[s][o],r=1;r<s;r+=1)l-=t[r][o]*t[r][s];l/=t[s][s],t[s][o]=l,u+=l*l}if(u=t[o][o]-u,u<=0)break;t[o][o]=Math.sqrt(u)}i[1]=0}}function a(t,e,n,a,s,l,u,c,h,d,f,p,g,m,v,y){function b(){for(m[1]=m[1]+1,M=P,C=1;C<=d;C+=1){for(M+=1,j=-c[C],S=1;S<=a;S+=1)j+=u[S][C]*s[S];if(Math.abs(j)<X&&(j=0),C>f)v[M]=j;else if(v[M]=-Math.abs(j),j>0){for(S=1;S<=a;S+=1)u[S][C]=-u[S][C];c[C]=-c[C]}}for(C=1;C<=g;C+=1)v[P+p[C]]=0;for(z=0,H=0,C=1;C<=d;C+=1)v[P+C]<H*v[I+C]&&(z=C,H=v[P+C]/v[I+C]);return 0===z?999:0}function w(){for(C=1;C<=a;C+=1){for(j=0,S=1;S<=a;S+=1)j+=t[S][C]*u[S][z];v[C]=j}for(T=A,C=1;C<=a;C+=1)v[T+C]=0;for(S=g+1;S<=a;S+=1)for(C=1;C<=a;C+=1)v[T+C]=v[T+C]+t[C][S]*v[S];for(U=!0,C=g;C>=1;C-=1){for(j=v[C],M=R+C*(C+3)/2,T=M-C,S=C+1;S<=g;S+=1)j-=v[M]*v[D+S],M+=S;if(j/=v[T],v[D+C]=j,p[C]<f)break;if(j<0)break;U=!1,O=C}if(!U)for(F=v[N+O]/v[D+O],C=1;C<=g&&!(p[C]<f)&&!(v[D+C]<0);C+=1)H=v[N+C]/v[D+C],H<F&&(F=H,O=C);for(j=0,C=A+1;C<=A+a;C+=1)j+=v[C]*v[C];if(Math.abs(j)<=X){if(U)return y[1]=1,999;for(C=1;C<=g;C+=1)v[N+C]=v[N+C]-F*v[D+C];return v[N+g+1]=v[N+g+1]+F,700}for(j=0,C=1;C<=a;C+=1)j+=v[A+C]*u[C][z];for(B=-v[P+z]/j,q=!0,U||F<B&&(B=F,q=!1),C=1;C<=a;C+=1)s[C]=s[C]+B*v[A+C],Math.abs(s[C])<X&&(s[C]=0);for(l[1]=l[1]+B*j*(B/2+v[N+g+1]),C=1;C<=g;C+=1)v[N+C]=v[N+C]-B*v[D+C];if(v[N+g+1]=v[N+g+1]+B,!q){for(j=-c[z],S=1;S<=a;S+=1)j+=s[S]*u[S][z];if(z>f)v[P+z]=j;else if(v[P+z]=-Math.abs(j),j>0){for(S=1;S<=a;S+=1)u[S][z]=-u[S][z];c[z]=-c[z]}return 700}for(g+=1,p[g]=z,M=R+(g-1)*g/2+1,C=1;C<=g-1;C+=1)v[M]=v[C],M+=1;if(g===a)v[M]=v[a];else{for(C=a;C>=g+1&&0!==v[C]&&(W=Math.max(Math.abs(v[C-1]),Math.abs(v[C])),Y=Math.min(Math.abs(v[C-1]),Math.abs(v[C])),H=v[C-1]>=0?Math.abs(W*Math.sqrt(1+Y*Y/(W*W))):-Math.abs(W*Math.sqrt(1+Y*Y/(W*W))),W=v[C-1]/H,Y=v[C]/H,1!==W);C-=1)if(0===W)for(v[C-1]=Y*H,S=1;S<=a;S+=1)H=t[S][C-1],t[S][C-1]=t[S][C],t[S][C]=H;else for(v[C-1]=H,V=Y/(1+W),S=1;S<=a;S+=1)H=W*t[S][C-1]+Y*t[S][C],t[S][C]=V*(t[S][C-1]+H)-t[S][C],t[S][C-1]=H;v[M]=v[g]}return 0}function x(){if(M=R+O*(O+1)/2+1,T=M+O,0===v[T])return 798;if(W=Math.max(Math.abs(v[T-1]),Math.abs(v[T])),Y=Math.min(Math.abs(v[T-1]),Math.abs(v[T])),
H=v[T-1]>=0?Math.abs(W*Math.sqrt(1+Y*Y/(W*W))):-Math.abs(W*Math.sqrt(1+Y*Y/(W*W))),W=v[T-1]/H,Y=v[T]/H,1===W)return 798;if(0===W){for(C=O+1;C<=g;C+=1)H=v[T-1],v[T-1]=v[T],v[T]=H,T+=C;for(C=1;C<=a;C+=1)H=t[C][O],t[C][O]=t[C][O+1],t[C][O+1]=H}else{for(V=Y/(1+W),C=O+1;C<=g;C+=1)H=W*v[T-1]+Y*v[T],v[T]=V*(v[T-1]+H)-v[T],v[T-1]=H,T+=C;for(C=1;C<=a;C+=1)H=W*t[C][O]+Y*t[C][O+1],t[C][O+1]=V*(t[C][O]+H)-t[C][O+1],t[C][O]=H}return 0}function _(){for(T=M-O,C=1;C<=O;C+=1)v[T]=v[M],M+=1,T+=1;return v[N+O]=v[N+O+1],p[O]=p[O+1],O+=1,O<g?797:0}function k(){return v[N+g]=v[N+g+1],v[N+g+1]=0,p[g]=0,g-=1,m[2]=m[2]+1,0}var C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F,B,W,Y,V,U,q,X,G,$,K;L=Math.min(a,d),M=2*a+L*(L+5)/2+2*d+1,X=1e-60;do X+=X,G=1+.1*X,$=1+.2*X;while(G<=1||$<=1);for(C=1;C<=a;C+=1)v[C]=e[C];for(C=a+1;C<=M;C+=1)v[C]=0;for(C=1;C<=d;C+=1)p[C]=0;if(E=[],0===y[1]){if(o(t,n,a,E),0!==E[1])return void(y[1]=2);r(t,n,a,e),i(t,n,a)}else{for(S=1;S<=a;S+=1)for(s[S]=0,C=1;C<=S;C+=1)s[S]=s[S]+t[C][S]*e[C];for(S=1;S<=a;S+=1)for(e[S]=0,C=S;C<=a;C+=1)e[S]=e[S]+t[S][C]*s[C]}for(l[1]=0,S=1;S<=a;S+=1)for(s[S]=e[S],l[1]=l[1]+v[S]*s[S],v[S]=0,C=S+1;C<=a;C+=1)t[C][S]=0;for(l[1]=-l[1]/2,y[1]=0,A=a,D=A+a,N=D+L,R=N+L+1,P=R+L*(L+1)/2,I=P+d,C=1;C<=d;C+=1){for(j=0,S=1;S<=a;S+=1)j+=u[S][C]*u[S][C];v[I+C]=Math.sqrt(j)}for(g=0,m[1]=0,m[2]=0,K=0;;){if(K=b(),999===K)return;for(;;){if(K=w(),0===K)break;if(999===K)return;if(700===K)if(O===g)k();else{for(;;)if(x(),K=_(),797!==K)break;k()}}}}function s(t,i,r,o,s,l){t=e(t),i=e(i),r=e(r);var u,c,h,d,f,p,g=[],m=[],v=[],y=[],b=[];if(s=s||0,l=l?e(l):[void 0,0],o=o?e(o):[],c=t.length-1,h=r[1].length-1,!o)for(u=1;u<=h;u+=1)o[u]=0;for(u=1;u<=h;u+=1)m[u]=0;for(d=0,f=Math.min(c,h),u=1;u<=c;u+=1)v[u]=0;for(g[1]=0,u=1;u<=2*c+f*(f+5)/2+2*h+1;u+=1)y[u]=0;for(u=1;u<=2;u+=1)b[u]=0;return a(t,i,c,c,v,g,r,o,c,h,s,m,d,b,y,l),p="",1===l[1]&&(p="constraints are inconsistent, no solution!"),2===l[1]&&(p="matrix D in quadratic function is not positive definite!"),{solution:n(v),value:n(g),unconstrained_solution:n(i),iterations:n(b),iact:n(m),message:p}}t.solveQP=s}(numeric),numeric.svd=function(t){function e(t,e){return t=Math.abs(t),e=Math.abs(e),t>e?t*Math.sqrt(1+e*e/t/t):0==e?t:e*Math.sqrt(1+t*t/e/e)}var n,i=numeric.epsilon,r=1e-64/i,o=50,a=0,s=0,l=0,u=0,c=0,h=numeric.clone(t),d=h.length,f=h[0].length;if(d<f)throw"Need more rows than columns";var p=new Array(f),g=new Array(f);for(s=0;s<f;s++)p[s]=g[s]=0;var m=numeric.rep([f,f],0),v=0,y=0,b=0,w=0,x=0,_=0,k=0;for(s=0;s<f;s++){for(p[s]=y,k=0,c=s+1,l=s;l<d;l++)k+=h[l][s]*h[l][s];if(k<=r)y=0;else for(v=h[s][s],y=Math.sqrt(k),v>=0&&(y=-y),b=v*y-k,h[s][s]=v-y,l=c;l<f;l++){for(k=0,u=s;u<d;u++)k+=h[u][s]*h[u][l];for(v=k/b,u=s;u<d;u++)h[u][l]+=v*h[u][s]}for(g[s]=y,k=0,l=c;l<f;l++)k+=h[s][l]*h[s][l];if(k<=r)y=0;else{for(v=h[s][s+1],y=Math.sqrt(k),v>=0&&(y=-y),b=v*y-k,h[s][s+1]=v-y,l=c;l<f;l++)p[l]=h[s][l]/b;for(l=c;l<d;l++){for(k=0,u=c;u<f;u++)k+=h[l][u]*h[s][u];for(u=c;u<f;u++)h[l][u]+=k*p[u]}}x=Math.abs(g[s])+Math.abs(p[s]),x>w&&(w=x)}for(s=f-1;s!=-1;s+=-1){if(0!=y){for(b=y*h[s][s+1],l=c;l<f;l++)m[l][s]=h[s][l]/b;for(l=c;l<f;l++){for(k=0,u=c;u<f;u++)k+=h[s][u]*m[u][l];for(u=c;u<f;u++)m[u][l]+=k*m[u][s]}}for(l=c;l<f;l++)m[s][l]=0,m[l][s]=0;m[s][s]=1,y=p[s],c=s}for(s=f-1;s!=-1;s+=-1){for(c=s+1,y=g[s],l=c;l<f;l++)h[s][l]=0;if(0!=y){for(b=h[s][s]*y,l=c;l<f;l++){for(k=0,u=c;u<d;u++)k+=h[u][s]*h[u][l];for(v=k/b,u=s;u<d;u++)h[u][l]+=v*h[u][s]}for(l=s;l<d;l++)h[l][s]=h[l][s]/y}else for(l=s;l<d;l++)h[l][s]=0;h[s][s]+=1}for(i*=w,u=f-1;u!=-1;u+=-1)for(var C=0;C<o;C++){var S=!1;for(c=u;c!=-1;c+=-1){if(Math.abs(p[c])<=i){S=!0;break}if(Math.abs(g[c-1])<=i)break}if(!S){a=0,k=1;var M=c-1;for(s=c;s<u+1&&(v=k*p[s],p[s]=a*p[s],!(Math.abs(v)<=i));s++)for(y=g[s],b=e(v,y),g[s]=b,a=y/b,k=-v/b,l=0;l<d;l++)x=h[l][M],_=h[l][s],h[l][M]=x*a+_*k,h[l][s]=-x*k+_*a}if(_=g[u],c==u){if(_<0)for(g[u]=-_,l=0;l<f;l++)m[l][u]=-m[l][u];break}if(C>=o-1)throw"Error: no convergence.";for(w=g[c],x=g[u-1],y=p[u-1],b=p[u],v=((x-_)*(x+_)+(y-b)*(y+b))/(2*b*x),y=e(v,1),v=v<0?((w-_)*(w+_)+b*(x/(v-y)-b))/w:((w-_)*(w+_)+b*(x/(v+y)-b))/w,a=1,k=1,s=c+1;s<u+1;s++){for(y=p[s],x=g[s],b=k*y,y=a*y,_=e(v,b),p[s-1]=_,a=v/_,k=b/_,v=w*a+y*k,y=-w*k+y*a,b=x*k,x*=a,l=0;l<f;l++)w=m[l][s-1],_=m[l][s],m[l][s-1]=w*a+_*k,m[l][s]=-w*k+_*a;for(_=e(v,b),g[s-1]=_,a=v/_,k=b/_,v=a*y+k*x,w=-k*y+a*x,l=0;l<d;l++)x=h[l][s-1],_=h[l][s],h[l][s-1]=x*a+_*k,h[l][s]=-x*k+_*a}p[c]=0,p[u]=v,g[u]=w}for(s=0;s<g.length;s++)g[s]<i&&(g[s]=0);for(s=0;s<f;s++)for(l=s-1;l>=0;l--)if(g[l]<g[s]){for(a=g[l],g[l]=g[s],g[s]=a,u=0;u<h.length;u++)n=h[u][s],h[u][s]=h[u][l],h[u][l]=n;for(u=0;u<m.length;u++)n=m[u][s],m[u][s]=m[u][l],m[u][l]=n;s=l}return{U:h,S:g,V:m}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){!function(){"use strict";function t(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function n(t,e,n){var i=e.x,r=e.y,o=n.x-i,a=n.y-r;if(0!==o||0!==a){var s=((t.x-i)*o+(t.y-r)*a)/(o*o+a*a);s>1?(i=n.x,r=n.y):s>0&&(i+=o*s,r+=a*s)}return o=t.x-i,a=t.y-r,o*o+a*a}function i(e,n){for(var i,r=e[0],o=[r],a=1,s=e.length;a<s;a++)i=e[a],t(i,r)>n&&(o.push(i),r=i);return r!==i&&o.push(i),o}function r(t,e){var i,r,o,a,s=t.length,l="undefined"!=typeof Uint8Array?Uint8Array:Array,u=new l(s),c=0,h=s-1,d=[],f=[];for(u[c]=u[h]=1;h;){for(r=0,i=c+1;i<h;i++)o=n(t[i],t[c],t[h]),o>r&&(a=i,r=o);r>e&&(u[a]=1,d.push(c,a,a,h)),h=d.pop(),c=d.pop()}for(i=0;i<s;i++)u[i]&&f.push(t[i]);return f}function o(t,e,n){var o=void 0!==e?e*e:1;return t=n?t:i(t,o),t=r(t,o)}"function"==typeof define&&define.amd?define(function(){return o}):"undefined"!=typeof e?e.exports=o:"undefined"!=typeof self?self.simplify=o:window.simplify=o}()},{}],10:[function(t,e,n){"use strict";function i(t,e,n,i){this.points=t,this.ids=e,this.dimension=i,this.length=n}function r(t){var e,n,r;if(Array.isArray(t)){if(e=t.length,0===e)return new i(null,null,0,0);n=t[0].length,r=a(h.mallocDouble(e*(n+1)),[e,n+1]),l(t,r.hi(e,n))}else{e=t.shape[0],n=t.shape[1];var o=t.dtype;o="int8"===o||"int16"===o||"int32"===o?"int32":"uint8"===o||"uint8_clamped"===o||"buffer"===o||"uint16"===o||"uint32"===o?"uint32":"float32"===o?"float32":"float64",r=a(h.malloc(e*(n+1)),[e,n+1]),u.assign(r.hi(e,n),t)}for(var p=0;p<e;++p)r.set(p,n,p);for(var g=c.malloc([e,n],t.dtype),m=h.mallocInt32(e),v=0,y=g.data,b=r.data,w=(f.log2(f.nextPow2(e)),s.compile(r.order,!0,r.dtype)),x=[r];v<e;){var _=x.shift(),k=_,C=0|k.shape[0];if(C>1){var S,M=f.log2(v+1)%n,T=d.root(C);S=w(k,T,function(t,e){return t.get(M)-e.get(M)});for(var E=g.index(v,0),O=S.offset,p=0;p<n;++p)y[E++]=b[O++];m[v]=b[O],v+=1,x.push(k.hi(T)),C>2&&x.push(k.lo(T+1))}else{for(var O=k.offset,E=g.index(v,0),p=0;p<n;++p)y[E+p]=b[O++];m[v]=b[O],v+=1}}return h.free(r.data),new i(g,m,e,n)}function o(t){var e=t.p,n=t.i;if(e){for(var r=e.length,o=h.mallocFloat64(r),s=0;s<r;++s)o[s]=e[s];for(var l=n.length,u=h.mallocInt32(l),s=0;s<l;++s)u[s]=n[s];var c=r/l|0;return new i(a(o,[l,c]),u,l,c)}return new i(null,null,0,t.d)}e.exports=r,e.exports.deserialize=o;var a=t("ndarray"),s=t("ndarray-select"),l=t("ndarray-pack"),u=t("ndarray-ops"),c=t("ndarray-scratch"),h=t("typedarray-pool"),d=t("inorder-tree-layout"),f=t("bit-twiddle"),p=t("./lib/heap.js"),g=i.prototype;g.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},g.range=function(t,e,n){var i=this.length;if(!(i<1)){for(var r=this.dimension,o=0;o<r;++o)if(e[o]<t[o])return;var a,s=this.points,u=this.ids,d=c.malloc([i,2,r]),p=h.mallocInt32(i),g=d.data,m=s.data,v=1,y=0;for(p[0]=0,l(t,d.pick(0,0)),l(e,d.pick(0,1));y<v;){for(var b=p[y],w=f.log2(b+1)%r,x=d.index(y,0,0),_=d.index(y,1,0),k=s.index(b,0),C=!0,o=0;o<r;++o){var S=m[k+o];if(S<g[x+o]||g[_+o]<S){C=!1;break}}if(C&&(a=n(u[b]),void 0!==a))break;var M=m[k+w],T=g[_+w],E=g[x+w];if(E<=M){var O=2*b+1;if(O<i){p[v]=O;for(var A=d.index(v,0,0),o=0;o<r;++o)g[A+o]=g[x+o];for(var D=d.index(v,1,0),o=0;o<r;++o)g[D+o]=g[_+o];g[D+w]=Math.min(T,M),v+=1}}if(M<=T){var R=2*(b+1);if(R<i){p[v]=R;for(var A=d.index(v,0,0),o=0;o<r;++o)g[A+o]=g[x+o];for(var D=d.index(v,1,0),o=0;o<r;++o)g[D+o]=g[_+o];g[A+w]=Math.max(E,M),v+=1}}y+=1}return c.free(d),h.free(p),a}},g.rnn=function(t,e,n){if(!(e<0)){var i=this.length;if(!(i<1)){var r,o=this.dimension,a=this.points,s=this.ids,l=c.malloc([i,o]),u=h.mallocInt32(i),d=l.data,p=a.data,g=1,m=0,v=e*e;u[0]=0;for(var y=0;y<o;++y)l.set(0,y,0);for(;m<g;){for(var b=u[m],w=a.index(b,0),x=0,y=0;y<o;++y)x+=Math.pow(t[y]-p[w+y],2);if(x<=v&&(r=n(s[b]),void 0!==r))break;for(var _=f.log2(b+1)%o,k=0,C=l.index(m,0),y=0;y<o;++y)y!==_&&(k+=d[C+y]);var S=t[_],M=p[w+_],T=d[C+_],E=T,O=T;S<M?O=Math.max(T,Math.pow(M-S,2)):E=Math.max(T,Math.pow(M-S,2));var A=E+k,D=O+k;if(A<=v){var R=2*b+1;if(R<i){u[g]=R;for(var P=l.index(g,0),y=0;y<o;++y)d[P+y]=d[C+y];d[P+_]=E,g+=1}}if(D<=v){var N=2*(b+1);if(N<i){u[g]=N;for(var P=l.index(g,0),y=0;y<o;++y)d[P+y]=d[C+y];d[P+_]=O,g+=1}}m+=1}return c.free(l),h.free(u),r}}},g.nn=function(t,e){var n=this.length;if(n<1)return-1;if("number"==typeof e){if(e<0)return-1}else e=1/0;var i=this.dimension,r=this.points,o=r.data,a=h.mallocFloat64(i),s=new p(n,i+1),l=s.index,u=s.data;l[0]=0;for(var c=0;c<=i;++c)u[c]=0;s.count+=1;for(var d=-1,g=e;s.count>0&&!(u[0]>=g);){for(var m=l[0],v=r.index(m,0),y=0,c=0;c<i;++c)y+=Math.pow(t[c]-o[v+c],2);y<g&&(g=y,d=m);for(var b=f.log2(m+1)%i,w=0,c=0;c<i;++c){var x=u[c+1];c!==b&&(w+=x),a[c]=x}var _=t[b],k=o[v+b],C=a[b],S=C,M=C;_<k?M=Math.max(C,Math.pow(k-_,2)):S=Math.max(C,Math.pow(k-_,2));var T=S+w,E=M+w;if(s.pop(),T<g){var O=2*m+1;if(O<n){var A=s.count;l[A]=O;var D=A*(i+1);u[D]=T;for(var c=1;c<=i;++c)u[D+c]=a[c-1];u[D+b+1]=S,s.push()}}if(E<g){var R=2*(m+1);if(R<n){var A=s.count;l[A]=R;var D=A*(i+1);u[D]=E;for(var c=1;c<=i;++c)u[D+c]=a[c-1];u[D+b+1]=M,s.push()}}}return h.freeFloat64(a),s.dispose(),d<0?-1:this.ids[d]},g.knn=function(t,e,n){if("number"==typeof n){if(n<0)return[]}else n=1/0;var i=this.length;if(i<1)return[];if("number"==typeof e){if(e<=0)return[];e=0|Math.min(e,i)}else e=i;var r=this.ids,o=this.dimension,a=this.points,s=a.data,l=h.mallocFloat64(o),u=new p(e,1),c=u.index,d=u.data,g=new p(i,o+1),m=g.index,v=g.data;m[0]=0;for(var y=0;y<=o;++y)v[y]=0;g.count+=1;for(var b=n;g.count>0&&!(v[0]>=b);){for(var w=m[0],x=a.index(w,0),_=0,y=0;y<o;++y)_+=Math.pow(t[y]-s[x+y],2);if(_<b){u.count>=e&&u.pop();var k=u.count;c[k]=w,d[k]=-_,u.push(),u.count>=e&&(b=-d[0])}for(var C=f.log2(w+1)%o,S=0,y=0;y<o;++y){var M=v[y+1];y!==C&&(S+=M),l[y]=M}var T=t[C],E=s[x+C],O=l[C],A=O,D=O;T<E?D=Math.max(O,Math.pow(E-T,2)):A=Math.max(O,Math.pow(E-T,2));var R=A+S,P=D+S;if(g.pop(),R<b){var N=2*w+1;if(N<i){var z=g.count;m[z]=N;var L=z*(o+1);v[L]=R;for(var y=1;y<=o;++y)v[L+y]=l[y-1];v[L+C+1]=A,g.push()}}if(P<b){var I=2*(w+1);if(I<i){var z=g.count;m[z]=I;var L=z*(o+1);v[L]=P;for(var y=1;y<=o;++y)v[L+y]=l[y-1];v[L+C+1]=D,g.push()}}}h.freeFloat64(l),g.dispose();for(var H=new Array(u.count),r=this.ids,y=u.count-1;y>=0;--y)H[y]=r[c[0]],u.pop();return u.dispose(),H},g.dispose=function(){h.free(this.points.data),h.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0}},{"./lib/heap.js":11,"bit-twiddle":12,"inorder-tree-layout":13,ndarray:28,"ndarray-ops":15,"ndarray-pack":20,"ndarray-scratch":26,"ndarray-select":27,"typedarray-pool":32}],11:[function(t,e,n){"use strict";function i(t){return 1&t?t-1>>1:(t>>1)-1}function r(t,e){this.count=0,this.dataSize=e,this.index=o.mallocInt32(t),this.data=o.mallocFloat64(t*e)}e.exports=r;var o=t("typedarray-pool"),a=r.prototype;a.heapSwap=function(t,e){var n=this.data,i=this.index,r=this.dataSize,o=i[t];i[t]=i[e],i[e]=o;for(var a=r*t,s=r*e,l=0;l<r;++l){var u=n[a];n[a]=n[s],n[s]=u,a+=1,s+=1}},a.heapUp=function(t){for(var e=this.dataSize,n=(this.index,this.data),r=n[e*t];t>0;){var o=i(t);if(o>=0){var a=n[e*o];if(r<a){this.heapSwap(t,o),t=o;continue}}break}},a.heapDown=function(t){for(var e=this.dataSize,n=(this.index,this.data),i=this.count,r=n[e*t];;){var o=r,a=2*t+1,s=2*(t+1),l=t;if(a<i){var u=n[e*a];u<o&&(l=a,o=u)}if(s<i){var c=n[e*s];c<o&&(l=s)}if(l===t)break;this.heapSwap(t,l),t=l}},a.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},a.push=function(){this.heapUp(this.count),this.count+=1},a.dispose=function(){o.freeInt32(this.index),o.freeFloat64(this.data)}},{"typedarray-pool":32}],12:[function(t,e,n){"use strict";"use restrict";function i(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var r=32;n.INT_BITS=r,n.INT_MAX=2147483647,n.INT_MIN=-1<<r-1,n.sign=function(t){return(t>0)-(t<0)},n.abs=function(t){var e=t>>r-1;return(t^e)-e},n.min=function(t,e){return e^(t^e)&-(t<e)},n.max=function(t,e){return t^(t^e)&-(t<e)},n.isPow2=function(t){return!(t&t-1||!t)},n.log2=function(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1},n.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},n.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},n.countTrailingZeros=i,n.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},n.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},n.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var o=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,i=e,r=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=1&n,--r;t[e]=i<<r&255}}(o),n.reverse=function(t){return o[255&t]<<24|o[t>>>8&255]<<16|o[t>>>16&255]<<8|o[t>>>24&255]},n.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},n.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},n.interleave3=function(t,e,n){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|n<<2},n.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},n.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},{}],13:[function(t,e,n){"use strict";function i(t){var e=(g.nextPow2(t+1)>>>1)-1,n=t-e;return g.nextPow2(n)-1>=e?e:(e>>>1)+n}function r(t){return 0}function o(t){return t-1}function a(t,e){if(t<=0)return 0;var n=i(t);return e>n?a(t-n-1,e-n-1):e===n?g.log2(t):a(n,e)}function s(t,e){return Math.max(e-1,0)}function l(t,e){return Math.min(e+1,t-1)}function u(t,e){if(t<=0)return-1;var n=i(t);if(e>n){var r=u(t-n-1,e-n-1);return r<0?n:r+n+1}if(e===n)return-1;var r=u(n,e);return r<0?n:r}function c(t,e){if(t<=0)return 0;var n=i(t);return e>n?c(t-n-1,e-n-1)+n+1:e===n?i(e):c(n,e)}function h(t,e){if(t<=0)return 0;var n=i(t);return e>n?h(t-n-1,e-n-1)+n+1:e===n?i(t-n-1)+n+1:h(n,e)}function d(t,e){return 0===a(t,e)}function f(t,e){t|=0,e|=0;for(var n=0;t>1;){var r=i(t);if(e>r)n+=r+1,t-=r+1,e-=r+1;else{if(e===r)break;t=r}}return n}function p(t,e){t|=0,e|=0;for(var n=0;t>1;){var r=i(t);if(e>r)n+=r+1,t-=r+1,e-=r+1;else{if(e===r){n+=t-1;break}t=r}}return n}var g=t("bit-twiddle");n.root=i,n.begin=r,n.end=o,n.height=a,n.prev=s,n.next=l,n.parent=u,n.left=c,n.right=h,n.leaf=d,n.lo=f,n.hi=p},{"bit-twiddle":14}],14:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],15:[function(t,e,n){"use strict";function i(t){if(!t)return s;for(var e=0;e<t.args.length;++e){var n=t.args[e];0===e?t.args[e]={name:n,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:t.args[e]={name:n,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function r(t){return a({args:t.args,pre:i(t.pre),body:i(t.body),post:i(t.proc),funcName:t.funcName})}function o(t){for(var e=[],n=0;n<t.args.length;++n)e.push("a"+n);var i=new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""));return i(r(t))}var a=t("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in l){var e=l[t];n[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),n[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),n[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),n[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in u){var e=u[t];n[t]=o({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),n[t+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in c){var e=c[t];n[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),n[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),n[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var h=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<h.length;++t){var e=h[t];n[e]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),n[e+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var d=["max","min","atan2","pow"];!function(){for(var t=0;t<d.length;++t){var e=d[t];n[e]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),n[e+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),n[e+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var f=["atan2","pow"];!function(){for(var t=0;t<f.length;++t){var e=f[t];n[e+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),n[e+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),n[e+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),n[e+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),n.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":16}],16:[function(t,e,n){"use strict";function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function r(t){var e=new i;e.pre=t.pre,e.body=t.body,e.post=t.post;var n=t.args.slice(0);e.argTypes=n;for(var r=0;r<n.length;++r){var a=n[r];if("array"===a||"object"==typeof a&&a.blockIndices){if(e.argTypes[r]="array",e.arrayArgs.push(r),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+r),r<e.pre.args.length&&e.pre.args[r].count>0)throw new Error("cwise: pre() block may not reference array args");if(r<e.post.args.length&&e.post.args[r].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(r),e.shimArgs.push("scalar"+r);else if("index"===a){if(e.indexArgs.push(r),r<e.pre.args.length&&e.pre.args[r].count>0)throw new Error("cwise: pre() block may not reference array index");if(r<e.body.args.length&&e.body.args[r].lvalue)throw new Error("cwise: body() block may not write to array index");if(r<e.post.args.length&&e.post.args[r].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(r),r<e.pre.args.length&&e.pre.args[r].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(r<e.body.args.length&&e.body.args[r].lvalue)throw new Error("cwise: body() block may not write to array shape");if(r<e.post.args.length&&e.post.args[r].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[r]);e.argTypes[r]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(r)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,o(e)}var o=t("./lib/thunk.js");e.exports=r},{"./lib/thunk.js":18}],17:[function(t,e,n){"use strict";function i(t,e,n){var i,r,o=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,l=[],u=[],c=0,h=0;for(i=0;i<o;++i)u.push(["i",i,"=0"].join(""));for(r=0;r<a;++r)for(i=0;i<o;++i)h=c,c=t[i],0===i?u.push(["d",r,"s",i,"=t",r,"p",c].join("")):u.push(["d",r,"s",i,"=(t",r,"p",c,"-s",h,"*t",r,"p",h,")"].join(""));for(l.push("var "+u.join(",")),i=o-1;i>=0;--i)c=t[i],l.push(["for(i",i,"=0;i",i,"<s",c,";++i",i,"){"].join(""));for(l.push(n),i=0;i<o;++i){for(h=c,c=t[i],r=0;r<a;++r)l.push(["p",r,"+=d",r,"s",i].join(""));s&&(i>0&&l.push(["index[",h,"]-=s",h].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function r(t,e,n,r){for(var o=e.length,a=n.arrayArgs.length,s=n.blockSize,l=n.indexArgs.length>0,u=[],c=0;c<a;++c)u.push(["var offset",c,"=p",c].join(""));for(var c=t;c<o;++c)u.push(["for(var j"+c+"=SS[",e[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",s,"){"].join("")),u.push(["s",e[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",e[c],"=",s].join("")),u.push(["j",c,"-=",s,"}"].join("")),l&&u.push(["index[",e[c],"]=j",c].join(""));for(var c=0;c<a;++c){for(var h=["offset"+c],d=t;d<o;++d)h.push(["j",d,"*t",c,"p",e[d]].join(""));u.push(["p",c,"=(",h.join("+"),")"].join(""))}u.push(i(e,n,r));for(var c=t;c<o;++c)u.push("}");return u.join("\n")}function o(t){for(var e=0,n=t[0].length;e<n;){for(var i=1;i<t.length;++i)if(t[i][e]!==t[0][e])return e;++e}return e}function a(t,e,n){for(var i=t.body,r=[],o=[],a=0;a<t.args.length;++a){var s=t.args[a];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var h=e.offsetArgIndex.indexOf(a),d=e.offsetArgs[h];c=d.array,u="+q"+h;case"array":u="p"+c+u;var f="l"+a,p="a"+c;if(0===e.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(r.push(["var ",f,"=",p,".get(",u,")"].join("")),i=i.replace(l,f),o.push([p,".set(",u,",",f,")"].join(""))):i=i.replace(l,[p,".get(",u,")"].join("")):i=i.replace(l,[p,"[",u,"]"].join("")):"generic"===n[c]?(r.push(["var ",f,"=",p,".get(",u,")"].join("")),i=i.replace(l,f),s.lvalue&&o.push([p,".set(",u,",",f,")"].join(""))):(r.push(["var ",f,"=",p,"[",u,"]"].join("")),i=i.replace(l,f),s.lvalue&&o.push([p,"[",u,"]=",f].join("")));else{for(var g=[s.name],m=[u],v=0;v<Math.abs(e.arrayBlockIndices[c]);v++)g.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(v+1)+"*t"+c+"b"+v);if(l=new RegExp(g.join(""),"g"),u=m.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");i=i.replace(l,[p,"[",u,"]"].join(""))}break;case"scalar":i=i.replace(l,"Y"+e.scalarArgs.indexOf(a));break;case"index":i=i.replace(l,"index");break;case"shape":i=i.replace(l,"shape")}}}return[r.join("\n"),i,o.join("\n")].join("\n").trim()}function s(t){for(var e=new Array(t.length),n=!0,i=0;i<t.length;++i){var r=t[i],o=r.match(/\d+/);o=o?o[0]:"",0===r.charAt(0)?e[i]="u"+r.charAt(1)+o:e[i]=r.charAt(0)+o,i>0&&(n=n&&e[i]===e[i-1])}return n?e[0]:e.join("")}function l(t,e){for(var n=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,l=new Array(t.arrayArgs.length),c=new Array(t.arrayArgs.length),h=0;h<t.arrayArgs.length;++h)c[h]=e[2*h],l[h]=e[2*h+1];for(var d=[],f=[],p=[],g=[],m=[],h=0;h<t.arrayArgs.length;++h){t.arrayBlockIndices[h]<0?(p.push(0),g.push(n),d.push(n),f.push(n+t.arrayBlockIndices[h])):(p.push(t.arrayBlockIndices[h]),g.push(t.arrayBlockIndices[h]+n),d.push(0),f.push(t.arrayBlockIndices[h]));for(var v=[],y=0;y<l[h].length;y++)p[h]<=l[h][y]&&l[h][y]<g[h]&&v.push(l[h][y]-p[h]);m.push(v)}for(var b=["SS"],w=["'use strict'"],x=[],y=0;y<n;++y)x.push(["s",y,"=SS[",y,"]"].join(""));for(var h=0;h<t.arrayArgs.length;++h){b.push("a"+h),b.push("t"+h),b.push("p"+h);for(var y=0;y<n;++y)x.push(["t",h,"p",y,"=t",h,"[",p[h]+y,"]"].join(""));for(var y=0;y<Math.abs(t.arrayBlockIndices[h]);++y)x.push(["t",h,"b",y,"=t",h,"[",d[h]+y,"]"].join(""))}for(var h=0;h<t.scalarArgs.length;++h)b.push("Y"+h);if(t.shapeArgs.length>0&&x.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var _=new Array(n),h=0;h<n;++h)_[h]="0";x.push(["index=[",_.join(","),"]"].join(""))}for(var h=0;h<t.offsetArgs.length;++h){for(var k=t.offsetArgs[h],C=[],y=0;y<k.offset.length;++y)0!==k.offset[y]&&(1===k.offset[y]?C.push(["t",k.array,"p",y].join("")):C.push([k.offset[y],"*t",k.array,"p",y].join("")));0===C.length?x.push("q"+h+"=0"):x.push(["q",h,"=",C.join("+")].join(""))}var S=u([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));x=x.concat(S),w.push("var "+x.join(","));for(var h=0;h<t.arrayArgs.length;++h)w.push("p"+h+"|=0");t.pre.body.length>3&&w.push(a(t.pre,t,c));
var M=a(t.body,t,c),T=o(m);T<n?w.push(r(T,m[0],t,M)):w.push(i(m[0],t,M)),t.post.body.length>3&&w.push(a(t.post,t,c)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+w.join("\n")+"\n----------");var E=[t.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",T,s(c)].join(""),O=new Function(["function ",E,"(",b.join(","),"){",w.join("\n"),"} return ",E].join(""));return O()}var u=t("uniq");e.exports=l},{uniq:19}],18:[function(t,e,n){"use strict";function i(t){var e=["'use strict'","var CACHED={}"],n=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],l=[],u=[],c=0;c<t.arrayArgs.length;++c){var h=t.arrayArgs[c];n.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),o.push("t"+h),o.push("r"+h),a.push("t"+h),a.push("r"+h+".join()"),s.push("array"+h+".data"),s.push("array"+h+".stride"),s.push("array"+h+".offset|0"),c>0&&(l.push("array"+t.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[c]))),u.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[c])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var c=0;c<t.scalarArgs.length;++c)s.push("scalar"+t.scalarArgs[c]);n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),e.push("var "+n.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------");var d=new Function("compile",e.join("\n"));return d(r.bind(void 0,t))}var r=t("./compile.js");e.exports=i},{"./compile.js":17}],19:[function(t,e,n){"use strict";function i(t,e){for(var n=1,i=t.length,r=t[0],o=t[0],a=1;a<i;++a)if(o=r,r=t[a],e(r,o)){if(a===n){n++;continue}t[n++]=r}return t.length=n,t}function r(t){for(var e=1,n=t.length,i=t[0],r=t[0],o=1;o<n;++o,r=i)if(r=i,i=t[o],i!==r){if(o===e){e++;continue}t[e++]=i}return t.length=e,t}function o(t,e,n){return 0===t.length?t:e?(n||t.sort(e),i(t,e)):(n||t.sort(),r(t))}e.exports=o},{}],20:[function(t,e,n){"use strict";var i=t("ndarray"),r=t("./doConvert.js");e.exports=function(t,e){for(var n=[],o=t,a=1;o instanceof Array;)n.push(o.length),a*=o.length,o=o[0];return 0===n.length?i():(e||(e=i(new Float64Array(a),n)),r(e,t),e)}},{"./doConvert.js":21,ndarray:28}],21:[function(t,e,n){e.exports=t("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":22}],22:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./lib/thunk.js":24,dup:16}],23:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17,uniq:25}],24:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{"./compile.js":23,dup:18}],25:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],26:[function(t,e,n){"use strict";function i(t){var e=t.dtype;"generic"!==e&&"array"!==e||(e="double");var n=h.malloc(t.size,e),i=u(n,t.shape);return c.assign(i,t),i}function r(t,e){e||(e="double");for(var n=1,i=new Array(t.length),r=t.length-1;r>=0;--r)i[r]=n,n*=t[r];return u(h.malloc(n,e),t,i,0)}function o(t){"generic"!==t.dtype&&"array"!==t.dtype&&h.free(t.data)}function a(t,e){e||(e="double");for(var n=1,i=new Array(t.length),r=t.length-1;r>=0;--r)i[r]=n,n*=t[r];for(var o=h.malloc(n,e),r=0;r<n;++r)o[r]=0;return u(o,t,i,0)}function s(t,e){e||(e="double");for(var n=1,i=new Array(t.length),r=t.length-1;r>=0;--r)i[r]=n,n*=t[r];for(var o=h.malloc(n,e),r=0;r<n;++r)o[r]=1;return u(o,t,i,0)}function l(t,e){var n,i;e||(e="double");var r=1,o=new Array(t.length);for(n=t.length-1;n>=0;--n)o[n]=r,r*=t[n];var a=h.malloc(r,e);for(n=0;n<r;++n)a[n]=0;var s=1/0,l=0;for(n=t.length-1;n>=0;n--)l+=o[n],s=Math.min(s,t[n]);for(n=0,i=0;n<s;n++,i+=l)a[i]=1;return u(a,t,o,0)}var u=t("ndarray"),c=t("ndarray-ops"),h=t("typedarray-pool");n.clone=i,n.malloc=r,n.free=o,n.zeros=a,n.ones=s,n.eye=l},{ndarray:28,"ndarray-ops":15,"typedarray-pool":32}],27:[function(t,e,n){"use strict";function i(t){return"s"+t}function r(t){return"t"+t}function o(t){return"u"+t}function a(t){return"v"+t}function s(t){return"i"+t}function l(t){return"p"+t}function u(t){return"x"+t}function c(t){var e=t.slice();return e.splice(t.indexOf(0),1),e.unshift(0),e}function h(t,e,n){function h(n,o,c){if(e)M.push(l(0),".offset=",y,"+",r(t[0]),"*(",o,");",l(1),".offset=",y,"+",r(t[0]),"*(",c,");",n,"=",m,"(",l(0),",",l(1),");");else{M.push(u(0),"=",y,"+",r(0),"*(",o,");",u(1),"=",y,"+",r(0),"*(",c,");"),f>1&&M.push("_cmp:");for(var h=f-1;h>0;--h)M.push("for(",s(h),"=0;",s(h),"<",i(h),";",s(h),"++){");C?M.push(n,"=",v,".get(",u(0),")-",v,".get(",u(1),");"):M.push(n,"=",v,"[",u(0),"]-",v,"[",u(1),"];"),f>1&&M.push("if(",n,")break _cmp;");for(var h=1;h<f;++h)M.push(u(0),"+=",a(h),";",u(1),"+=",a(h),"}")}}function d(e,n){M.push(u(0),"=",y,"+",r(t[0]),"*(",e,");",u(1),"=",y,"+",r(t[0]),"*(",n,");");for(var a=f-1;a>0;--a)M.push("for(",s(t[a]),"=0;",s(t[a]),"<",i(t[a]),";",s(t[a]),"++){");C?M.push(w,"=",v,".get(",u(0),");",v,".set(",u(0),",",v,".get(",u(1),"));",v,".set(",u(1),",",w,");"):M.push(w,"=",v,"[",u(0),"];",v,"[",u(0),"]=",v,"[",u(1),"];",v,"[",u(1),"]=",w,";");for(var a=1;a<f;++a)M.push(u(0),"+=",o(t[a]),";",u(1),"+=",o(t[a]),"}")}t=c(t);var f=t.length,C="generic"===n,S="ndSelect"+n+t.join("_")+"_"+(e?"cmp":"lex"),M=[],T=[p,g];e&&T.push(m);for(var E=[v+"="+p+".data",y+"="+p+".offset|0",b+"=Math.random",w],O=0;O<2;++O)E.push(u(O)+"=0");for(var O=0;O<f;++O)E.push(i(O)+"="+p+".shape["+O+"]|0",r(O)+"="+p+".stride["+O+"]|0",s(O)+"=0");for(var O=1;O<f;++O)O>1?E.push(a(O)+"=("+r(O)+"-"+i(O-1)+"*"+r(O-1)+")|0",o(t[O])+"=("+r(t[O])+"-"+i(t[O-1])+"*"+r(t[O-1])+")|0"):E.push(a(O)+"="+r(O),o(t[O])+"="+r(t[O]));if(e)for(var O=0;O<2;++O)E.push(l(O)+"="+p+".pick(0)");E.push(k+"=0",x+"=0",_+"="+i(t[0])+"-1"),M.push("while(",x,"<",_,"){",k,"=(",b,"()*(",_,"-",x,"+1)+",x,")|0;"),d(k,_),M.push(k,"=",x,";","for(",s(0),"=",x,";",s(0),"<",_,";",s(0),"++){"),h(w,s(0),_),M.push("if(",w,"<0){"),d(k,s(0)),M.push(k,"++;"),M.push("}}"),d(k,_),M.push("if(",k,"===",g,"){",x,"=",k,";","break;","}else if(",g,"<",k,"){",_,"=",k,"-1;","}else{",x,"=",k,"+1;","}","}"),e?M.push(l(0),".offset=",y,"+",x,"*",r(0),";","return ",l(0),";"):M.push("return ",p,".pick(",x,");");var A=["'use strict';function ",S,"(",T,"){","var ",E.join(),";",M.join(""),"};return ",S].join(""),D=new Function(A);return D()}function d(t,e,n){var i=t.join()+e+n,r=C[i];return r?r:C[i]=h(t,e,n)}function f(t,e,n){if(e|=0,0===t.dimension||t.shape[0]<=e||e<0)return null;var i=!!n,r=d(t.order,i,t.dtype);return i?r(t,e,n):r(t,e)}e.exports=f,e.exports.compile=d;var p="a",g="K",m="C",v="d",y="o",b="R",w="T",x="L",_="H",k="X",C={}},{}],28:[function(t,e,n){function i(t,e){return t[0]-e[0]}function r(){var t,e=this.stride,n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(e[t]),t];n.sort(i);var r=new Array(n.length);for(t=0;t<r.length;++t)r[t]=n[t][1];return r}function o(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var i="generic"===t;if(e===-1){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",a=new Function(o);return a()}if(0===e){var o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",a=new Function("TrivialArray",o);return a(h[t][0])}var o=["'use strict'"],s=l(e),u=s.map(function(t){return"i"+t}),c="this.offset+"+s.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),d=s.map(function(t){return"b"+t}).join(","),f=s.map(function(t){return"c"+t}).join(",");o.push("function "+n+"(a,"+d+","+f+",d){this.data=a","this.shape=["+d+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+s.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),e<4?(o.push("function "+n+"_order(){"),2===e?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),i?o.push("return this.data.set("+c+",v)}"):o.push("return this.data["+c+"]=v}"),o.push("proto.get=function "+n+"_get("+u.join(",")+"){"),i?o.push("return this.data.get("+c+")}"):o.push("return this.data["+c+"]}"),o.push("proto.index=function "+n+"_index(",u.join(),"){return "+c+"}"),o.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+s.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+s.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var p=s.map(function(t){return"a"+t+"=this.shape["+t+"]"}),g=s.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+g.join(","));for(var m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");o.push("return new "+n+"(this.data,"+s.map(function(t){return"a"+t}).join(",")+","+s.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+s.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+s.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+n+"(this.data,"+s.map(function(t){return"a"+t}).join(",")+","+s.map(function(t){return"b"+t}).join(",")+",c)}");for(var v=new Array(e),y=new Array(e),m=0;m<e;++m)v[m]="a[i"+m+"]",y[m]="b[i"+m+"]";o.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+v.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset");for(var m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+s.map(function(t){return"shape["+t+"]"}).join(",")+","+s.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",o.join("\n"));return a(h[t],r)}function a(t){if(u(t))return"buffer";if(c)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function s(t,e,n,i){if(void 0===t){var r=h.array[0];return r([])}"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var s=e.length;if(void 0===n){n=new Array(s);for(var l=s-1,u=1;l>=0;--l)n[l]=u,u*=e[l]}if(void 0===i){i=0;for(var l=0;l<s;++l)n[l]<0&&(i-=(e[l]-1)*n[l])}for(var c=a(t),d=h[c];d.length<=s+1;)d.push(o(c,d.length-1));var r=d[s+1];return r(t,e,n,i)}var l=t("iota-array"),u=t("is-buffer"),c="undefined"!=typeof Float64Array,h={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=s},{"iota-array":29,"is-buffer":30}],29:[function(t,e,n){"use strict";function i(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}e.exports=i},{}],30:[function(t,e,n){e.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}},{}],31:[function(t,e,n){"use strict";function i(t,e,n){var r=0|t[n];if(r<=0)return[];var o,a=new Array(r);if(n===t.length-1)for(o=0;o<r;++o)a[o]=e;else for(o=0;o<r;++o)a[o]=i(t,e,n+1);return a}function r(t,e){var n,i;for(n=new Array(t),i=0;i<t;++i)n[i]=e;return n}function o(t,e){switch("undefined"==typeof e&&(e=0),typeof t){case"number":if(t>0)return r(0|t,e);break;case"object":if("number"==typeof t.length)return i(t,e,0)}return[]}e.exports=o},{}],32:[function(t,e,n){(function(e,i){"use strict";function r(t){if(t){var e=t.length||t.byteLength,n=y.log2(e);_[n].push(t)}}function o(t){r(t.buffer)}function a(t){var t=y.nextPow2(t),e=y.log2(t),n=_[e];return n.length>0?n.pop():new ArrayBuffer(t)}function s(t){return new Uint8Array(a(t),0,t)}function l(t){return new Uint16Array(a(2*t),0,t)}function u(t){return new Uint32Array(a(4*t),0,t)}function c(t){return new Int8Array(a(t),0,t)}function h(t){return new Int16Array(a(2*t),0,t)}function d(t){return new Int32Array(a(4*t),0,t)}function f(t){return new Float32Array(a(4*t),0,t)}function p(t){return new Float64Array(a(8*t),0,t)}function g(t){return w?new Uint8ClampedArray(a(t),0,t):s(t)}function m(t){return new DataView(a(t),0,t)}function v(t){t=y.nextPow2(t);var e=y.log2(t),n=k[e];return n.length>0?n.pop():new i(t)}var y=t("bit-twiddle"),b=t("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var w="undefined"!=typeof Uint8ClampedArray,x=e.__TYPEDARRAY_POOL;x.UINT8C||(x.UINT8C=b([32,0])),x.BUFFER||(x.BUFFER=b([32,0]));var _=x.DATA,k=x.BUFFER;n.free=function(t){if(i.isBuffer(t))k[y.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,n=0|y.log2(e);_[n].push(t)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=o,n.freeArrayBuffer=r,n.freeBuffer=function(t){k[y.log2(t.length)].push(t)},n.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return a(t);switch(e){case"uint8":return s(t);case"uint16":return l(t);case"uint32":return u(t);case"int8":return c(t);case"int16":return h(t);case"int32":return d(t);case"float":case"float32":return f(t);case"double":case"float64":return p(t);case"uint8_clamped":return g(t);case"buffer":return v(t);case"data":case"dataview":return m(t);default:return null}return null},n.mallocArrayBuffer=a,n.mallocUint8=s,n.mallocUint16=l,n.mallocUint32=u,n.mallocInt8=c,n.mallocInt16=h,n.mallocInt32=d,n.mallocFloat32=n.mallocFloat=f,n.mallocFloat64=n.mallocDouble=p,n.mallocUint8Clamped=g,n.mallocDataView=m,n.mallocBuffer=v,n.clearCache=function(){for(var t=0;t<32;++t)x.UINT8[t].length=0,x.UINT16[t].length=0,x.UINT32[t].length=0,x.INT8[t].length=0,x.INT16[t].length=0,x.INT32[t].length=0,x.FLOAT[t].length=0,x.DOUBLE[t].length=0,x.UINT8C[t].length=0,_[t].length=0,k[t].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"bit-twiddle":12,buffer:2,dup:31}],33:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(t.topojson={})}(this,function(t){"use strict";function e(){}function n(t){if(!t)return e;var n,i,r=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,e){e||(n=i=0),t[0]=(n+=t[0])*r+a,t[1]=(i+=t[1])*o+s}}function i(t){if(!t)return e;var n,i,r=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,e){e||(n=i=0);var l=(t[0]-a)/r|0,u=(t[1]-s)/o|0;t[0]=l-n,t[1]=u-i,n=l,i=u}}function r(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}function o(t,e){for(var n=0,i=t.length;n<i;){var r=n+i>>>1;t[r]<e?n=r+1:i=r}return n}function a(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return s(t,e)})}:s(t,e)}function s(t,e){var n={type:"Feature",id:e.id,properties:e.properties||{},geometry:l(t,e)};return null==e.id&&delete n.id,n}function l(t,e){function i(t,e){e.length&&e.pop();for(var n,i=h[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n=i[o].slice()),c(n,o);t<0&&r(e,a)}function o(t){return t=t.slice(),c(t,0),t}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0].slice()),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0].slice());return e}function l(t){return t.map(s)}function u(t){var e=t.type;return"GeometryCollection"===e?{type:e,geometries:t.geometries.map(u)}:e in d?{type:e,coordinates:d[e](t)}:null}var c=n(t.transform),h=t.arcs,d={Point:function(t){return o(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(o)},LineString:function(t){return a(t.arcs)},MultiLineString:function(t){return t.arcs.map(a)},Polygon:function(t){return l(t.arcs)},MultiPolygon:function(t){return t.arcs.map(l)}};return u(e)}function u(t,e){function n(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=i[i.length-1],e<0?[n,r]:[r,n]}function i(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),s.push(i)}}var r={},o={},a={},s=[],l=-1;return e.forEach(function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++l],e[l]=n,e[i]=r)}),e.forEach(function(t){var e,i,r=n(t),s=r[0],l=r[1];if(e=a[s])if(delete a[e.end],e.push(t),e.end=l,i=o[l]){delete o[i.start];var u=i===e?e:e.concat(i);o[u.start=e.start]=a[u.end=i.end]=u}else o[e.start]=a[e.end]=e;else if(e=o[l])if(delete o[e.start],e.unshift(t),e.start=s,i=a[s]){delete a[i.end];var c=i===e?e:i.concat(e);o[c.start=i.start]=a[c.end=e.end]=c}else o[e.start]=a[e.end]=e;else e=[t],o[e.start=s]=a[e.end=l]=e}),i(a,o),i(o,a),e.forEach(function(t){r[t<0?~t:t]||s.push([t])}),s}function c(t){return l(t,h.apply(this,arguments))}function h(t,e,n){function i(t){var e=t<0?~t:t;(c[e]||(c[e]=[])).push({i:t,g:l})}function r(t){t.forEach(i)}function o(t){t.forEach(r)}function a(t){"GeometryCollection"===t.type?t.geometries.forEach(a):t.type in h&&(l=t,h[t.type](t.arcs))}var s=[];if(arguments.length>1){var l,c=[],h={LineString:r,MultiLineString:o,Polygon:o,MultiPolygon:function(t){t.forEach(o)}};a(e),c.forEach(arguments.length<3?function(t){s.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&s.push(t[0].i)})}else for(var d=0,f=t.arcs.length;d<f;++d)s.push(d);return{type:"MultiLineString",arcs:u(t,s)}}function d(t){var e=t[0],n=t[1],i=t[2];return Math.abs((e[0]-i[0])*(n[1]-e[1])-(e[0]-n[0])*(i[1]-e[1]))}function f(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return o/2}function p(t){return l(t,g.apply(this,arguments))}function g(t,e){function n(t){t.forEach(function(e){e.forEach(function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)})}),o.push(t)}function i(e){return f(l(t,{type:"Polygon",arcs:[e]}).coordinates[0])>0}var r={},o=[],a=[];return e.forEach(function(t){"Polygon"===t.type?n(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(n)}),o.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,a.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),o.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:a.map(function(e){var n,o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].length<2&&o.push(t)})})}),o=u(t,o),(n=o.length)>1)for(var a,s=i(e[0][0]),l=0;l<n;++l)if(s===i(o[l])){a=o[0],o[0]=o[l],o[l]=a;break}return o})}}function m(t){function e(t,e){t.forEach(function(t){t<0&&(t=~t);var n=r[t];n?n.push(e):r[t]=[e]})}function n(t,n){t.forEach(function(t){e(t,n)})}function i(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){i(t,e)}):t.type in s&&s[t.type](t.arcs,e)}var r={},a=t.map(function(){return[]}),s={LineString:e,MultiLineString:n,Polygon:n,MultiPolygon:function(t,e){t.forEach(function(t){n(t,e)})}};t.forEach(i);for(var l in r)for(var u=r[l],c=u.length,h=0;h<c;++h)for(var d=h+1;d<c;++d){var f,p=u[h],g=u[d];(f=a[p])[l=o(f,g)]!==g&&f.splice(l,0,g),(f=a[g])[l=o(f,p)]!==p&&f.splice(l,0,p)}return a}function v(t,e){return t[1][2]-e[1][2]}function y(){function t(t,e){for(;e>0;){var n=(e+1>>1)-1,r=i[n];if(v(t,r)>=0)break;i[r._=e]=r,i[t._=e=n]=t}}function e(t,e){for(;;){var n=e+1<<1,o=n-1,a=e,s=i[a];if(o<r&&v(i[o],s)<0&&(s=i[a=o]),n<r&&v(i[n],s)<0&&(s=i[a=n]),a===e)break;i[s._=e]=s,i[t._=e=a]=t}}var n={},i=[],r=0;return n.push=function(e){return t(i[e._=r]=e,r++),r},n.pop=function(){if(!(r<=0)){var t,n=i[0];return--r>0&&(t=i[r],e(i[t._=0]=t,0)),n}},n.remove=function(n){var o,a=n._;if(i[a]===n)return a!==--r&&(o=i[r],(v(o,n)<0?t:e)(i[o._=a]=o,a)),a},n}function b(t,e){function r(t){s.remove(t),t[1][2]=e(t),s.push(t)}var o=n(t.transform),a=i(t.transform),s=y();return e||(e=d),t.arcs.forEach(function(t){var n,i,l,u,c=[],h=0;for(i=0,l=t.length;i<l;++i)u=t[i],o(t[i]=[u[0],u[1],1/0],i);for(i=1,l=t.length-1;i<l;++i)n=t.slice(i-1,i+2),n[1][2]=e(n),c.push(n),s.push(n);for(i=0,l=c.length;i<l;++i)n=c[i],n.previous=c[i-1],n.next=c[i+1];for(;n=s.pop();){var d=n.previous,f=n.next;n[1][2]<h?n[1][2]=h:h=n[1][2],d&&(d.next=f,d[2]=n[2],r(d)),f&&(f.previous=d,f[0]=n[0],r(f))}t.forEach(a)}),t}var w="1.6.24";t.version=w,t.mesh=c,t.meshArcs=h,t.merge=p,t.mergeArcs=g,t.feature=a,t.neighbors=m,t.presimplify=b})},{}],34:[function(t,e,n){var i;i=t("../color/sort.coffee"),e.exports=function(t,e,n,r,o,a,s){var l,u,c;for(r||(r="asc"),o instanceof Array||(o=[o]),n instanceof Array||(n=[n]),a&&void 0!==s&&"number"!=typeof s&&(s=a.id.nesting.indexOf(s)),c=0,l=0;l<n.length&&(u=n[l],t=a&&t.d3plus&&t.d3plus.sortKeys?t.d3plus.sortKeys[u]:t[u],e=a&&e.d3plus&&e.d3plus.sortKeys?e.d3plus.sortKeys[u]:e[u],c=a&&o.indexOf(u)>=0?i(t,e):t<e?-1:1,0===c&&l!==n.length-1);)l++;return"asc"===r?c:-c}},{"../color/sort.coffee":51}],35:[function(t,e,n){e.exports=function(t,e){var n;return t instanceof Array&&(n=void 0===e||null===e?e:e.constructor,t.indexOf(e)>=0||t.indexOf(n)>=0)}},{}],36:[function(t,e,n){var i,r;i=t("./comparator.coffee"),r=t("../core/fetch/sort.coffee"),e.exports=function(t,e,n,o,a,s){var l,u,c,h;if(!t||t.length<=1)return t||[];if(a)for(e||(e=a.order.value||a.size.value||a.id.value),n||(n=a.order.sort.value),o||(o=a.color.value||[]),c=0,h=t.length;c<h;c++)l=t[c],l.d3plus||(l.d3plus={}),u="d3plus"in l&&"d3plus"in l.d3plus?l.d3plus:l,l.d3plus.sortKeys=r(a,u,e,o,s);return t.sort(function(t,r){return i(t,r,e,n,o,a,s)})}},{"../core/fetch/sort.coffee":67,"./comparator.coffee":34}],37:[function(t,e,n){e.exports=function(t,e){return void 0===e?t:e===!1?[]:e instanceof Array?e:(t instanceof Array||(t=[]),t.indexOf(e)>=0?t.splice(t.indexOf(e),1):t.push(e),t)}},{}],38:[function(t,e,n){var i;i=function(t){var e,n,r,o;if(o=i.tested,t in o)return o[t];for(n=0,r=!1;n<document.styleSheets.length;){if(e=document.styleSheets[n],e.href&&e.href.indexOf(t)>=0){r=!0;break}n++}return r},i.tested={},e.exports=i},{}],39:[function(t,e,n){e.exports=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)},{}],40:[function(t,e,n){var i,r;i=t("./ie.js"),r=t("./touch.coffee"),r?e.exports={click:"click",down:"touchstart",up:"touchend",over:i?"mouseenter":"mouseover",out:i?"mouseleave":"mouseout",move:"mousemove"}:e.exports={click:"click",down:"mousedown",up:"mouseup",over:i?"mouseenter":"mouseover",out:i?"mouseleave":"mouseout",move:"mousemove"}},{"./ie.js":39,"./touch.coffee":45}],41:[function(t,e,n){var i;i=function(){var t;return t="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":"",i=function(){return t},t},e.exports=i},{}],42:[function(t,e,n){e.exports="rtl"===d3.select("html").attr("dir")},{}],43:[function(t,e,n){e.exports={y:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},x:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}}},{}],44:[function(t,e,n){var i;i=function(){var t,e,n,r,o;return t=document.createElement("p"),t.style.width="100%",t.style.height="200px",e=document.createElement("div"),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e),r=t.offsetWidth,e.style.overflow="scroll",o=t.offsetWidth,r===o&&(o=e.clientWidth),document.body.removeChild(e),n=r-o,i=function(){return n},n},e.exports=i},{}],45:[function(t,e,n){e.exports=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},{}],46:[function(t,e,n){e.exports=function(t){var e;return e=d3.hsl(t),e.l>.45&&(e.s>.8&&(e.s=.8),e.l=.45),e.toString()}},{}],47:[function(t,e,n){e.exports=function(t,e){var n;return void 0===e&&(e=.5),n=d3.hsl(t),e=(1-n.l)*e,n.l+=e,n.s-=e,n.toString()}},{}],48:[function(t,e,n){e.exports=function(t,e,n,i){var r,o,a;return n||(n=1),i||(i=1),t=d3.rgb(t),e=d3.rgb(e),a=(n*t.r+i*e.r-n*i*e.r)/(n+i-n*i),o=(n*t.g+i*e.g-n*i*e.g)/(n+i-n*i),r=(n*t.b+i*e.b-n*i*e.b)/(n+i-n*i),d3.rgb(a,o,r).toString()}},{}],49:[function(t,e,n){var i;i=t("./scale.coffee"),e.exports=function(t,e){var n;return n=t||Math.floor(20*Math.random()),(e=e||i)(n)}},{"./scale.coffee":50}],50:[function(t,e,n){e.exports=d3.scale.ordinal().range(["#b22200","#282F6B","#EACE3F","#B35C1E","#224F20","#5F487C","#759143","#419391","#993F88","#e89c89","#ffee8d","#afd5e8","#f7ba77","#a5c697","#c5b5e5","#d1d392","#bbefd0","#e099cf"])},{}],51:[function(t,e,n){e.exports=function(t,e){var n,i;return n=d3.hsl(t),i=d3.hsl(e),t=0===n.s?361:n.h,e=0===i.s?361:i.h,t===e?n.l-i.l:t-e}},{}],52:[function(t,e,n){e.exports=function(t){var e,n,i,r,o;return r=d3.rgb(t),i=r.r,n=r.g,e=r.b,o=(299*i+587*n+114*e)/1e3,o>=128?"#444444":"#f7f7f7"}},{}],53:[function(t,e,n){e.exports=function(t){var e,n,i;return t+="",t=t.replace(RegExp(" ","g"),""),0===t.indexOf("rgb")&&(t=t.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===t.indexOf("hsl")&&(t=t.split(",")[2].split(")")[0]),n=d3.rgb(t).toString(),e=["black","#000","#000000","0%","0,0,0"],i=e.indexOf(t)>=0,"#000000"!==n||i}},{}],54:[function(t,e,n){var i,r,o;i=t("../../client/ie.js"),o=t("./wiki.coffee"),r=function(t,e,n){n=n||"",i||"undefined"!=typeof InstallTrigger?console.log("[ D3plus ] "+e):0===t.indexOf("group")?console[t]("%c[ D3plus ]%c "+e,"font-weight: 800;color: #b35c1e;margin-left: 0px;","font-weight:200;"+n):console[t]("%c"+e,n+"font-weight:200;")},r.comment=function(t){this("log",t,"color:#aaa;")},r.error=function(t,e){this("groupCollapsed","ERROR: "+t,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(e),this.groupEnd()},r.group=function(t){this("group",t,"color:#888;")},r.groupCollapsed=function(t){this("groupCollapsed",t,"color:#888;")},r.groupEnd=function(){i||console.groupEnd()},r.log=function(t){this("log",t,"color:#444444;")},r.stack=function(){var t,e,n,r,o,a,s;i||(t=new Error,t.stack&&(a=t.stack.split("\n"),a=a.filter(function(t){return 0!==t.indexOf("Error")&&t.indexOf("d3plus.js:")<0&&t.indexOf("d3plus.min.js:")<0}),a.length&&a[0].length&&(o=window.chrome?"at ":"@",s=a[0],s.indexOf(o)>=0&&(s=s.split(o)[1]),a=s.split(":"),3===a.length&&a.pop(),e=a.pop(),r=a.join(":").split("/"),r=r[r.length-1],n="line "+e+" of "+r+": "+s,this("log",n,"color:#D74B03;"))))},r.time=function(t){i||console.time(t)},r.timeEnd=function(t){i||console.timeEnd(t)},r.warning=function(t,e){this("groupCollapsed",t,"color:#888;"),this.stack(),this.wiki(e),this.groupEnd()},r.wiki=function(t){t&&(t in o&&(t=d3plus.repo+"wiki/"+o[t]),this("log","documentation: "+t,"color:#aaa;"))},e.exports=r},{"../../client/ie.js":39,"./wiki.coffee":55}],55:[function(t,e,n){e.exports={active:"Visualizations#active",aggs:"Visualizations#aggs",alt:"Forms#alt",attrs:"Visualizations#attrs",axes:"Visualizations#axes",background:"Visualizations#background",color:"Visualizations#color",cols:"Visualizations#cols",config:"Visualizations#config",container:"Visualizations#container",coords:"Visualizations#coords",csv:"Visualizations#csv",data:"Visualizations#data",depth:"Visualizations#depth",descs:"Visualizations#descs",dev:"Visualizations#dev",draw:"Visualizations#draw",edges:"Visualizations#edges",error:"Visualizations#error",focus:"Visualizations#focus",font:"Visualizations#font",footer:"Visualizations#footer",format:"Visualizations#format",height:"Visualizations#height",history:"Visualizations#history",hover:"Forms#hover",icon:"Visualizations#icon",id:"Visualizations#id",keywords:"Forms#keywords",labels:"Visualizations#labels",legend:"Visualizations#legend",links:"Visualizations#links",margin:"Visualizations#margin",messages:"Visualizations#messages",method:"Methods",mouse:"Visualizations#mouse",nodes:"Visualizations#nodes",open:"Forms#open",order:"Visualizations#order",remove:"Forms#remove",search:"Forms#search",select:"Forms#select",selectAll:"Forms#selectAll",shape:"Visualizations#shape",size:"Visualizations#size",temp:"Visualizations#temp",text:"Visualizations#text",time:"Visualizations#time",timeline:"Visualizations#timeline",timing:"Visualizations#timing",title:"Visualizations#title",tooltip:"Visualizations#tooltip",total:"Visualizations#total",type:"Visualizations#type",ui:"Visualizations#ui",width:"Visualizations#width",x:"Visualizations#x",y:"Visualizations#y",
zoom:"Visualizations#zoom"}},{}],56:[function(t,e,n){var i=t("../../util/buckets.coffee"),r=t("../fetch/value.coffee"),o=t("../console/print.coffee");e.exports=function(t){if(t.dev.value&&o.time("getting color data range"),t.color.domain.value)var e=t.color.domain.value;else{var e=[];t.data.pool.forEach(function(n){var i=parseFloat(r(t,n,t.color.value));"number"==typeof i&&!isNaN(i)&&e.indexOf(i)<0&&e.push(i)})}if(t.dev.value&&o.timeEnd("getting color data range"),e.length>1){if(t.dev.value&&o.time("calculating color scale"),e=d3.extent(e),e[0]<0&&e[1]>0){var n=t.color.range;3==n.length&&(e.push(e[1]),e[1]=0)}else if(e[1]>0&&e[0]>=0){var n=t.color.heatmap;e=i(e,n.length)}else{var n=t.color.range.slice(0);e[0]<0?n.pop():n.shift()}t.color.valueScale=d3.scale.sqrt().domain(e).range(n).interpolate(d3.interpolateRgb),t.dev.value&&o.timeEnd("calculating color scale")}else t.color.valueScale=null}},{"../../util/buckets.coffee":207,"../console/print.coffee":54,"../fetch/value.coffee":69}],57:[function(t,e,n){var i=t("../fetch/value.coffee"),r=t("../console/print.coffee"),o=t("../../object/validate.coffee");e.exports=function(t,e){t.dev.value&&r.time("filtering data");var n=d3.keys(t.data.keys||{});"attrs"in t&&(n=n.concat(d3.keys(t.attrs.keys||{}))),e=e.filter(function(e){var n=i(t,e,t.id.value);return null!==n});var a=t.types[t.type.value].requirements||[];t.data.filters.forEach(function(r){n.indexOf(t[r].value)>=0&&a.indexOf(r)>=0&&(e=e.filter(function(e){var n=i(t,e,t[r].value);return"y"===r&&t.y2.value&&null===n?n=i(t,e,t.y2.value):"x"===r&&t.x2.value&&null===n&&(n=i(t,e,t.x2.value)),"size"===r?"number"==typeof n:null!==n}))});var s=t.data.solo.length?"solo":"mute";return t.data[s].length?t.data[s].forEach(function(n){function a(e){var i=t[n][s].value,r=!1;return i.forEach(function(t){"function"==typeof t?r=t(e):t===e&&(r=!0)}),"solo"===s?r:!r}function l(e,r){if(!r&&t[n].nesting){var s=t[n].nesting;o(s)&&(s=d3.values(s));for(var l=0;l<s.length;l++){var u=e.filter(function(e){return a(i(t,e,s[l]))});u.length&&(e=u)}}else e=e.filter(function(e){return a(i(t,e,t[n].value))});return e}e=l(e),"id"===n&&("nodes"in t&&t.nodes.value&&(t.dev.value&&r.time("filtering nodes"),t.nodes.restricted=l(t.nodes.value),t.dev.value&&r.timeEnd("filtering nodes")),"edges"in t&&t.edges.value&&(t.dev.value&&r.time("filtering edges"),t.edges.restricted=t.edges.value.filter(function(e){var n=l([e[t.edges.source],e[t.edges.target]]);return 2===n.length}),t.dev.value&&r.timeEnd("filtering edges")))}):"nodes"in t&&(t.nodes.restricted=void 0,t.edges.restricted=void 0),t.dev.value&&r.timeEnd("filtering data"),e}},{"../../object/validate.coffee":175,"../console/print.coffee":54,"../fetch/value.coffee":69}],58:[function(t,e,n){var i=t("./nest.js"),r=t("../fetch/value.coffee"),o=t("../console/print.coffee"),a=t("../../util/uniques.coffee");e.exports=function(t){var e;if(t.data.time={values:[]},t.time&&t.time.value){t.dev.value&&(e="analyzing time periods",o.time(e)),t.data.time.values=a(t.data.value,t.time.value,r,t),t.data.time.values.sort(function(t,e){return t-e});var n=[];t.data.time.values.forEach(function(e,i){if(0!==i){var r=t.data.time.values[i-1];n.push(e-r),i===t.data.time.values.length-1&&(t.data.time.total=e-t.data.time.values[0])}}),n=d3.min(n),t.data.time.step=n;var s=["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],l=[1e3,60,60,24,30,12,1];t.data.time.periods=s;var u=function(e,n,i){return t.data.time.stepDivider||(arr=l.slice(0,i),arr.length?t.data.time.stepDivider=arr.reduce(function(t,e){return t*e}):t.data.time.stepDivider=1),Math.round(Math.floor(n-e)/t.data.time.stepDivider)},c=t.data.time.total;s.forEach(function(e,i){var r="Date"===e?28:l[i];if(!t.data.time.stepType&&(i===s.length-1||Math.round(n)<r)){t.data.time.stepType=e;var o=t.data.time.values[0],a=t.data.time.values[t.data.time.values.length-1];t.data.time.stepIntervals=u(o,a,i)}!t.data.time.totalType&&(i===s.length-1||Math.round(c)<r)&&(t.data.time.totalType=e),n/=r,c/=r}),t.data.time.values.forEach(function(e,n){if(0!==n){var i=t.data.time.values[0];t.data.time.dataSteps.push(u(i,e,s.indexOf(t.data.time.stepType)))}else t.data.time.dataSteps=[0]});var h=t.time.format.value,d=t.format.locale.value,f=[function(t){return t.getMilliseconds()},function(t){return t.getSeconds()},function(t){return t.getMinutes()},function(t){return t.getHours()},function(t){return 1!=t.getDate()},function(t){return t.getMonth()},function(t){return!0}];t.data.time.functions=f;var p=function(t,e,n){if(t===e)return n&&d.timeFormat[t+"Small"]?d.timeFormat[t+"Small"]:d.timeFormat[t];if(s.indexOf(t)>=4||s.indexOf(e)<=3)return d.timeFormat[e+"-"+t];var i;return i="Date"===e?d.timeFormat[e]:d.timeFormat[e+"-Date"],"Hours"===t?i+" "+d.timeFormat[t]:i+" "+d.timeFormat["Hours-"+t]};if(t.data.time.getFormat=p,h)"string"==typeof h?t.data.time.format=d3.locale(d.format).timeFormat(h):"function"==typeof h?t.data.time.format=h:h instanceof Array&&(t.data.time.format=d3.locale(d.format).timeFormat.multi(h)),t.data.time.multiFormat=t.data.time.format;else{for(var g=t.data.time.stepType,m=t.data.time.totalType,v=[],y=s.indexOf(g);y<=s.indexOf(m);y++){var b=y-1<s.indexOf(g)?s[y]:s[y-1],w=s[y]===b&&g!==m,x=p(b,s[y],w);v.push([x,f[y]])}t.data.time.format=d3.locale(d.format).timeFormat(p(g,m)),v.length>1?(v[v.length-1][1]=function(t){return!0},t.data.time.multiFormat=d3.locale(d.format).timeFormat.multi(v)):t.data.time.multiFormat=t.data.time.format}t.data.time.ticks=[];for(var _=d3.min(t.data.time.values),k=d3.max(t.data.time.values),C=0;C<=t.data.time.stepIntervals;C++){var S=new Date(_);S["set"+t.data.time.stepType](S["get"+t.data.time.stepType]()+C),S<=k&&t.data.time.ticks.push(S)}t.dev.value&&o.timeEnd(e)}if(t.dev.value&&(e="nesting data by time and depths",o.time(e)),t.data.nested={},0===t.data.time.values.length)t.data.nested.all={},t.id.nesting.forEach(function(e,n){var r=t.id.nesting.slice(0,n+1);t.data.nested.all[e]=i(t,t.data.value,r)});else{var M=t.data.value.reduce(function(e,n){var i=r(t,n,t.time.value).getTime();return i in e||(e[i]=[]),e[i].push(n),e},{});t.data.time.values.forEach(function(e){var n=e.getTime();t.data.nested[n]={},t.id.nesting.forEach(function(e,r){var o=t.id.nesting.slice(0,r+1);t.data.nested[n][e]=i(t,M[n],o)})})}t.dev.value&&o.timeEnd(e)}},{"../../util/uniques.coffee":213,"../console/print.coffee":54,"../fetch/value.coffee":69,"./nest.js":62}],59:[function(t,e,n){var i;i=t("../fetch/value.coffee"),e.exports=function(t,e,n){var r,o,a,s,l,u,c,h,d,f;if(o=d3.nest(),t.id.grouping.value)for(void 0===n&&(n=t.id.nesting),a=s=0,u=n.length;s<u;a=++s)h=n[a],a<t.depth.value&&!function(e){return o.key(function(n){return i(t,n.d3plus,e)})}(h);for(d=[],l=0,c=e.length;l<c;l++)r=e[l],f=t.size.value?i(t,r,t.size.value):1,f&&"number"==typeof f&&f>0&&(delete r.d3plus.r,delete r.d3plus.x,delete r.d3plus.y,d.push({d3plus:r,id:r[t.id.value],value:f}));return o.entries(d)}},{"../fetch/value.coffee":69}],60:[function(t,e,n){var i,r,o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=t("../console/print.coffee"),r=t("../../object/validate.coffee"),e.exports=function(t,e){var n,a,s,l,u,c,h,d,f;if(h=e+" key analysis",t.dev.value&&i.time(h),t[e].keys={},n=function(i){var a,s,l,u,c,h,d;if(i instanceof Array){for(c=[],s=0,u=i.length;s<u;s++)a=i[s],c.push(n(a));return c}if(r(i)){h=[];for(l in i)d=i[l],0===l.indexOf("d3plus")||o.call(t[e].keys,l)>=0||null===d?h.push(void 0):h.push(t[e].keys[l]=typeof d);return h}},r(t[e].value)){l=d3.keys(t[e].value).length===t.id.nesting.length,u=t[e].value;for(a in u)if(d=u[a],l&&t.id.nesting.indexOf(a)>=0&&r(d))for(s in d)f=d[s],n(f);else n(d)}else{c=t[e].value;for(a in c)d=c[a],n(d)}if(t.dev.value)return i.time(h)}},{"../../object/validate.coffee":175,"../console/print.coffee":54}],61:[function(t,e,n){var i,r;i=t("../console/print.coffee"),r=t("../../object/validate.coffee"),e.exports=function(t,e,n){var o,a,s,l;return o=t.dev.value,o&&i.time("loading "+e),l=t[e].url,t[e].filetype.value?a=t[e].filetype.value:(a=l.slice(l.length-5).split("."),a=a.length>1&&a[1],a?("txt"===a&&(a="text"),t[e].filetype.accepted.indexOf(a)<0&&(a="json")):a="json"),(s="dsv"===a?d3.dsv(t[e].delimiter.value,"text/plain"):d3[a])(l,function(s,u){var c,h;if(!s&&u){if("function"==typeof t[e].callback){if(h=t[e].callback(u))if(r(h)&&e in h)for(c in h)c in t&&(t[c].value=h[c]);else t[e].value=h}else t[e].value=u;["json"].indexOf(a)<0&&t[e].value.forEach(function(t){var e;e=[];for(c in t)isNaN(t[c])?"false"===t[c].toLowerCase()?e.push(t[c]=!1):"true"===t[c].toLowerCase()?e.push(t[c]=!0):"null"===t[c].toLowerCase()?e.push(t[c]=null):"undefined"===t[c].toLowerCase()?e.push(t[c]=void 0):e.push(void 0):e.push(t[c]=parseFloat(t[c]));return e}),t[e].changed=!0,t[e].loaded=!0}else t.error.internal='Could not load data from: "'+l+'"';return o&&i.timeEnd("loading "+e),n()})}},{"../../object/validate.coffee":175,"../console/print.coffee":54}],62:[function(t,e,n){var i=t("../fetch/value.coffee"),r=t("../../object/validate.coffee"),o=t("../../util/uniques.coffee"),a=function(t,e,n,r){void 0===r&&(r=!0);var a=d3.nest(),c=[],h="temp"in t?["active","temp","total"]:[];n.length?n.forEach(function(e,n){a.key(function(n){return i(t,n,e)})}):a.key(function(t){return!0}),r&&t.axes&&t.axes.discrete&&(!t.time||t[t.axes.discrete].value!==t.time.value)&&a.key(function(e){return i(t,e,t[t.axes.discrete].value)});var d=n.length&&t.id.nesting.indexOf(n[n.length-1])>=0,f=n.length&&d?n.length-1:0;d?t.id.nesting[f]:t.depth.value;a.rollup(function(e){if(1===e.length&&"d3plus"in e[0])return c.push(e[0]),e[0];e=e.reduce(function(t,e){return e.values instanceof Array?t.concat(e.values):(t.push(e),t)},[]);var r={d3plus:{data:{},depth:f}},a=d3.sum(e,function(t){return"d3plus"in t&&t.d3plus.merged?1:0});if(a===e.length)for(var u=0;u<e.length;u++){var d=e[u];r.d3plus.merged||(r.d3plus.merged=[]),r.d3plus.merged=r.d3plus.merged.concat(d.d3plus.merged),d.d3plus.text&&(r.d3plus.text=d.d3plus.text)}for(var p=0;p<h.length;p++){var g=h[p],m=t.aggs&&t.aggs.value[v]?t.aggs.value[v]:"sum";"d3plus"in e[0]&&g in e[0].d3plus?r.d3plus[g]=d3.sum(e,function(t){return t.d3plus[g]}):"function"==typeof m?r.d3plus[g]=m(e):r.d3plus[g]=d3[m](e,function(e){var n="total"===g?1:0;return t[g].value&&(n=i(t,e,t[g].value),"number"!=typeof n&&(n=n?1:0)),n})}for(var v in t.data.keys){if(v in r.d3plus.data)r[v]=r.d3plus[v];else{var y=t.aggs&&t.aggs.value[v]?t.aggs.value[v]:"sum",b=typeof y,w=t.data.keys[v],x=t.id.nesting.indexOf(v)>=0,_="time"in t&&v===t.time.value;if(v in r.d3plus.data)r[v]=r.d3plus[v];else if("function"===b)r[v]=t.aggs.value[v](e);else if(_)r[v]=l(o(e,v));else if(t.axes&&t.axes.discrete&&t[t.axes.discrete].value===v)r[v]=o(e,v);else if("number"!==w||"string"!==b||x){var k=s(e,v),C=1===k.length?k[0][v]:o(k,v);if(1===k.length)r[v]=C;else if(C&&C.length)C instanceof Array||(C=[C]),x&&t.id.nesting.indexOf(v)>f?r[v]=k:r[v]=C;else if(x){var S=t.id.nesting.indexOf(v)-1;S>=f&&(!("endPoint"in r.d3plus)||r.d3plus.endPoint>f)&&(r.d3plus.endPoint=f)}}else{var M=e.map(function(t){return t[v]});M=M.filter(function(t){return typeof t===w}),M.length&&(r[v]=d3[y](M))}}v in r&&r[v]instanceof Array&&1===r[v].length&&(r[v]=r[v][0])}for(var T=0;T<n.length;T++){var E=n[T];E in r||(r[E]=i(t,e[0],E))}return c.push(r),r});var p=function(e,i,r){if(e.children){"number"==t.data.keys[n[i]]&&(e.key=parseFloat(e.key)),r[n[i]]=e.key,delete e.key;for(var o in r)e[o]=r[o];i++,e.children.forEach(function(t){p(t,i,r)})}};return a=a.entries(e).map(u).map(function(t){return p(t,0,{}),t}),c},s=function(t,e){function n(t){t instanceof Array?t.forEach(n):r(t)&&e in t&&(t[e]instanceof Array?t[e].forEach(n):i.push(t))}var i=[];return n(t),i},l=function(t){function e(t){for(var i=0;i<t.length;i++){var r=t[i];r&&(r.constructor===Array?e(r):n.push(r))}}var n=[];return e(t),o(n)},u=function(t){return t.values&&t.values.length?(t.children=t.values.map(function(t){return u(t)}),delete t.values,t):t.values?t.values:t};e.exports=a},{"../../object/validate.coffee":175,"../../util/uniques.coffee":213,"../fetch/value.coffee":69}],63:[function(t,e,n){var i=t("../../array/sort.coffee"),r=t("./nest.js"),o=t("../fetch/value.coffee"),a=(t("../fetch/color.coffee"),t("../fetch/text.js"));e.exports=function(t,e,n){var s;if(s=t.size.threshold.value===!1?0:"number"==typeof t.size.threshold.value?t.size.threshold.value:"function"==typeof t.size.threshold.value?t.size.threshold.value(t):"number"==typeof t.types[t.type.value].threshold?t.types[t.type.value].threshold:"function"==typeof t.types[t.type.value].threshold?t.types[t.type.value].threshold(t):.02,"number"==typeof s&&s>0){var l=[],u=0===t.depth.value?0:{},c=[],h=[],d=[],f={},p=d3.nest();n&&p.key(function(e){return o(t,e,n)}),p.rollup(function(e){var i=e.length;t.aggs.value[t.size.value]?"function"==typeof t.aggs.value[t.size.value]?i=t.aggs.value[t.size.value](e):"string"==typeof t.aggs.value[t.size.value]&&(i=d3[t.aggs.value[t.size.value]](e,function(e){return o(t,e,t.size.value)})):i=d3.sum(e,function(e){return o(t,e,t.size.value)});var r=n?o(t,e[0],n):"all";return f[r]=i,i}).entries(e),e.forEach(function(e){var i=o(t,e,t.id.value),r=o(t,e,t.size.value),a=n?o(t,e,n):"all",u=r/f[a]>=s;if(u&&l.indexOf(i)<0&&(l.push(i),t.depth.value)){var c=o(t,e,t.id.nesting[t.depth.value-1]);h.indexOf(c)<0&&h.push(c)}});var g=e.filter(function(e){var n=o(t,e,t.id.value),i=l.indexOf(n)>=0,r=t.depth.value?o(t,e,t.id.nesting[t.depth.value-1]):null;if(null!==r&&h.indexOf(r)<0&&d.indexOf(r)<0&&d.push(r),!i){var a=o(t,e,t.size.value);a>0&&(0===t.depth.value?a>u&&(u=a):(r in u||(u[r]=0),a>u[r]&&(u[r]=a)),c.push(e))}return i});if(c.length>1){c=i(c,t.size.value,"desc",[],t);var m=t.id.nesting.slice(0,t.depth.value);t.types[t.type.value].requirements.indexOf(t.axes.discrete)>=0&&m.push(t[t.axes.discrete].value);var v=r(t,c,m);v.forEach(function(e){var n=t.id.nesting[t.depth.value-1],i=o(t,e,n);if(children=n?c.filter(function(e){return o(t,e,n)===i}):c,children.length>1){t.id.nesting.forEach(function(n,i){if(t.depth.value==i){var r=e[n];"string"==typeof r?e[n]="d3plus_other_"+r:e[n]="d3plus_other"}else i>t.depth.value&&delete e[n]}),t.color.value&&"string"===t.color.type&&(0===t.depth.value?e[t.color.value]=t.color.missing:e[t.color.value]=o(t,i,t.color.value,n)),t.icon.value&&(e[t.icon.value]=o(t,i,t.icon.value,n)),i&&(e.d3plus.depth=t.depth.value);var r;0===t.depth.value?(r=t.format.value(t.format.locale.value.ui.values,{key:"threshold",vars:t}),r+=" < "+t.format.value(u,{key:t.size.value,vars:t})):(r=a(t,e,t.depth.value-1),r=r.length?r[0].split(" < ")[0]:t.format.value(t.format.locale.value.ui.values,{key:"threshold",vars:t}),d.indexOf(i)<0&&(r+=" < "+t.format.value(u[i],{key:t.size.value,vars:t}))),d.indexOf(i)<0&&(r+=" ("+t.format.value(100*s,{key:"share",vars:t})+")"),e.d3plus.threshold=u,e.d3plus.merged=children,t.text.value&&(e[t.text.value]=r),e.d3plus.text=r}})}else v=c;return g.concat(v)}return e}},{"../../array/sort.coffee":36,"../fetch/color.coffee":65,"../fetch/text.js":68,"../fetch/value.coffee":69,"./nest.js":62}],64:[function(t,e,n){var i;i=t("../../font/sizes.coffee"),e.exports=function(t,e){var n,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w;if(w=e.values||t.data.time.ticks,m=e.style||{},s=e.limit||t.width.value,v={},c=t.data.time.periods,g=t.data.time.stepType,y=t.data.time.totalType,o=t.data.time.functions,a=t.data.time.getFormat,l=t.format.locale.value.format,t.time.format.value)v.format=t.data.time.format,v.values=w,v.sizes=i(w.map(function(t){return v.format(t)}),m);else for(u=c.indexOf(g);u<=c.indexOf(y);){if(b=w.filter(function(t){var e,n;if(u===c.indexOf(g))return!0;if(e=!0,n=u-1,u<0)return!0;for(;n>=c.indexOf(g)&&e;)e=!o[n](t),n--;return e}),c[u]===y)r=d3.locale(l).timeFormat(a(c[u],y));else{for(h=u,r=[];h<=c.indexOf(y);)d=h-1<c.indexOf(g)?h:h-1,d=c[d],p=c[h]===d&&g!==y,n=a(d,c[h],p),r.push([n,o[h]]),h++;r[r.length-1][1]=function(){return!0},r=d3.locale(l).timeFormat.multi(r)}if(f=i(b.map(function(t){return r(t)}),m),d3.sum(f,function(t){return t.width})<s||u===c.indexOf(y)){v.format=r,v.values=b,v.sizes=f;break}u++}return v}},{"../../font/sizes.coffee":104}],65:[function(t,e,n){var i,r,o,a,s,l,u;i=t("./value.coffee"),a=t("../../color/random.coffee"),l=t("../../color/validate.coffee"),u=t("../../object/validate.coffee"),s=t("../../util/uniques.coffee"),e.exports=function(t,e,n){var a,l,c,h,d,f;if(d=u(e),d&&"d3plus"in e&&"color"in e.d3plus)return e.d3plus.color;if(void 0===n&&(n=t.id.value),"number"==typeof n&&(n=t.id.nesting[n]),t.color.value){for(c=[],h=t.id.nesting.indexOf(n);h>=0;){if(l=t.id.nesting[h],f=s(e,t.color.value,i,t,l),1===f.length&&(f=f[0]),!(f instanceof Array)&&void 0!==f&&null!==f){a=r(t,e,f,n),c.indexOf(a)<0&&c.push(a);break}h--}return 1===c.length?c[0]:t.color.missing}return o(t,e,n)},r=function(t,e,n,i){return n?t.color.valueScale?t.color.valueScale(n):l(n)?n:o(t,n,i):t.color.value&&"function"==typeof t.color.valueScale?t.color.valueScale(0):o(t,e,i)},o=function(t,e,n){return u(e)&&(e=i(t,e,n)),e instanceof Array&&(e=e[0]),a(e,t.color.scale.value)}},{"../../color/random.coffee":49,"../../color/validate.coffee":53,"../../object/validate.coffee":175,"../../util/uniques.coffee":213,"./value.coffee":69}],66:[function(t,e,n){var i=t("../data/filter.js"),r=t("../data/nest.js"),o=t("../console/print.coffee"),a=t("../../string/format.js"),s=t("../../string/list.coffee");e.exports=function(t,e,n){if(!t.data.value)return[];void 0===n&&(n=t.depth.value);var l=t.id.nesting[n];if(!e||e instanceof Array||(e=[e]),!e&&"time"in t){e=[];var u=t.time.solo.value.length?"solo":"mute",c=t.time[u].value;if(c.length){e=[];for(var h=0;h<c.length;h++){var d=c[h];if("function"==typeof d)for(var f=0;f<t.data.time.values.length;f++){var p=t.data.time.values[f].getTime();d(p)&&e.push(p)}else if(d.constructor===Date)e.push(new Date(d).getTime());else{d+="",4===d.length&&parseInt(d)+""===d&&(d+="/01/01");var g=new Date(d);"Invalid Date"!==g&&e.push(g.getTime())}}"mute"===u&&(e=t.data.time.values.filter(function(t){return e.indexOf(t.getTime())<0}))}else e.push("all")}else e=["all"];if(e.indexOf("all")>=0&&t.data.time.values.length){e=t.data.time.values.slice(0);for(var m=0;m<e.length;m++)e[m]=e[m].getTime()}var v=[t.type.value,l,n].concat(t.data.filters).concat(e),y=t.data.solo.length?"solo":"mute",b=d3.keys(t.data.cache),w=t.types[t.type.value].filter||void 0;if(t.data[y].length)for(var x=0;x<t.data[y].length;x++){var _=t.data[y][x],k=t[_][y].value.slice(0);k.unshift(_),k.unshift(y),v=v.concat(k)}t.axes&&t.axes.discrete&&v.push(t.axes.discrete),v=v.join("_"),t.data.cacheID=v;for(var C=0;C<b.length;C++){var S=b[C].split("_").slice(1).join("_");if(S===v){v=(new Date).getTime()+"_"+v,t.data.cache[v]=t.data.cache[b[C]],delete t.data.cache[b[C]];break}}var M;if(t.data.cache[v])return t.dev.value&&o.comment("data already cached"),M=t.data.cache[v].data,"nodes"in t&&(t.nodes.restricted=t.data.cache[v].nodes,t.edges.restricted=t.data.cache[v].edges),"function"==typeof w&&(M=w(t,M)),M;var T=[];if(M=[],t.data.value&&t.data.value.length)for(var E=0;E<e.length;E++){var O=e[E];t.data.nested[O]?M=M.concat(t.data.nested[O][l]):T.push(O)}if(0===M.length&&T.length&&!t.error.internal){T.length>1&&(T=d3.extent(T)),T=T.map(function(e){return t.data.time.format(new Date(e))}),T=T.join(" - ");var A=t.format.locale.value.error.dataYear,D=t.format.locale.value.ui.and;T=s(T,D),t.error.internal=a(A,T),t.time.missing=!0}else{if(t.time&&(t.time.missing=!1),e.length>1){var R=!1;if(["x","y","x2","y2"].forEach(function(e){t[e].value===t.time.value&&"discrete"===t[e].scale.value&&(R=!0)}),!R){var P=t.id.nesting.slice(0,n+1);M=r(t,M,P)}}M=M?i(t,M):[],20===b.length&&(b.sort(),delete t.data.cache[b[0]]),v=(new Date).getTime()+"_"+v,t.data.cache[v]={data:M},"nodes"in t&&(t.data.cache[v].nodes=t.nodes.restricted,t.data.cache[v].edges=t.edges.restricted),"function"==typeof w&&(M=w(t,M)),t.dev.value&&o.comment("storing data in cache")}return M}},{"../../string/format.js":176,"../../string/list.coffee":177,"../console/print.coffee":54,"../data/filter.js":57,"../data/nest.js":62}],67:[function(t,e,n){var i,r,o;o=t("./value.coffee"),i=t("./color.coffee"),r=t("./text.js"),e.exports=function(t,e,n,a,s){var l,u,c,h,d,f;for(n instanceof Array||(n=[n]),a instanceof Array||(a=[a]),t&&(void 0===s?s=t.id.value:"number"!=typeof s&&(s=t.id.nesting.indexOf(s))),d={},u=0,h=n.length;u<h;u++)c=n[u],f=t?a.indexOf(c)>=0?i(t,e,s):c===t.text.value?r(t,e,s):3===d3.keys(e).length&&e.d3plus&&e.key&&e.values?o(t,e.values.map(function(t){return t.d3plus}),c,s):o(t,e,c,s):e[c],[t.data.keys[c],t.attrs.keys[c]].indexOf("number")>=0?(l=t.order.agg.value||t.aggs.value[c]||"sum",l.constructor===String&&(l=d3[l]),f instanceof Array||(f=[f]),f=l(f)):(f instanceof Array&&(f=f[0]),f="string"==typeof f?f.toLowerCase():f),d[c]=f;return d}},{"./color.coffee":65,"./text.js":68,"./value.coffee":69}],68:[function(t,e,n){var i=t("./value.coffee"),r=t("../../object/validate.coffee"),o=t("../../util/uniques.coffee");e.exports=function(t,e,n){"number"!=typeof n&&(n=t.depth.value);var a,s=t.id.nesting[n];t.text.nesting&&r(t.text.nesting)?a=t.text.nesting[s]?t.text.nesting[s]:t.text.value:(a=[],t.text.value&&n===t.depth.value&&a.push(t.text.value),a.push(s)),a instanceof Array||(a=[a]);var l=[];if(r(e)&&"d3plus"in e&&e.d3plus.text)l.push(e.d3plus.text.toString()),l.push(t.format.value(e.d3plus.text.toString(),{vars:t,data:e}));else{var u=r(e)?e:void 0;u&&e[t.id.value]instanceof Array?e=e[t.id.value]:e instanceof Array||(e=[e]),a.forEach(function(n){var r=o(e,n,i,t,s);r.length&&(r.length>1&&(r=r.filter(function(t){return t instanceof Array||"string"==typeof t&&t.indexOf(" < ")<0})),r=r.map(function(e){return e instanceof Array?(e=e.filter(function(t){return t}),e.map(function(e){return t.format.value(e.toString(),{vars:t,data:u,key:n})})):e?t.format.value(e.toString(),{vars:t,data:u,key:n}):void 0}),1===r.length&&(r=r[0]),l.push(r))})}return l}},{"../../object/validate.coffee":175,"../../util/uniques.coffee":213,"./value.coffee":69}],69:[function(t,e,n){var i,r,o,a,s,l,u,c,h,d;h=t("../../object/validate.coffee"),c=t("../../util/uniques.coffee"),u=function(t,e,n,a){var s,l,u,d;if(l=h(e),"function"==typeof n&&l)return n(e,t);if(l){if(n in e)return e[n];if(s=t.data.cacheID+"_"+a,i(e,s,t),n in e.d3plus.data[s])return e.d3plus.data[s][n];if(a in e)e=e[a];else{if(!(t.id.value in e))return null;if(e=e[t.id.value],a!==n&&(u=o(t,e,a,t.id.value)),null!==u&&void 0!==u||(u=r(t,e,a,t.id.value)),null===u||void 0===u)return null;if(a===n)return u;e=u}}return e instanceof Array&&!h(e[0])&&(e=c(e)),e instanceof Array&&h(e[0])&&(d=c(e,n),d.length)?d:(d=o(t,e,n,a))?d:d=r(t,e,n,a)},o=function(t,e,n,i){var r;return t.data.viz instanceof Array&&n in t.data.keys&&(r=c(l(t.data.viz,e,i),n)),r&&r.length?r:null},r=function(t,e,n,i){var r,o,a,s;if("attrs"in t&&t.attrs.value&&n in t.attrs.keys)if(r=h(t.attrs.value)&&i in t.attrs.value?t.attrs.value[i]:t.attrs.value,r instanceof Array){if(a=c(l(r,e,i),n),a.length)return a}else if(e instanceof Array){if(r=[function(){var t,n,i;if(o in r){for(i=[],t=0,n=e.length;t<n;t++)o=e[t],i.push(r[o]);return i}}()],r.length&&(s=c(r,n),s.length))return s}else if(e in r)return r[e][n];return null},l=function(t,e,n){return e instanceof Array?t.filter(function(t){return e.indexOf(t[n])>=0}):t.filter(function(t){return t[n]===e})},i=function(t,e,n){return"d3plus"in t||(t.d3plus={}),"data"in t.d3plus||(t.d3plus.data={}),!(n.data.changed||n.attrs&&n.attrs.changed)&&e in t.d3plus.data||(t.d3plus.data[e]={}),t},d=function(t,e,n,i,r){var o,a,s,l,u,c,d;if(null===r)return r;c="time"in t&&t.time.value===i,r instanceof Array||(r=[r]);for(s=l=0,u=r.length;l<u;s=++l)d=r[s],c&&null!==d&&d.constructor!==Date&&(d+="",4===d.length&&parseInt(d)+""===d&&(d+="/01/01"),a=new Date(d),"Invalid Date"!==a&&(r[s]=a));return 1===r.length&&(r=r[0]),null===r||!h(e)||"string"!=typeof i||i in e||(o=t.data.cacheID+"_"+n,e.d3plus.data[o][i]=r),r},s=function(t,e,n,i){var r,o,a,s,l;for(l=[],o=0,a=e.length;o<a;o++)r=e[o],h(r)?(s=u(t,r,n,i),l.push(d(t,r,i,n,s))):l.push(r);return"number"!=typeof l[0]&&(l=c(l)),1===l.length?l[0]:l},a=function(t,e,n,i){var r,o;return n?"number"==typeof n?n:(r=h(e),i||(i=t.id.value),r&&e.values instanceof Array?o=s(t,e.values,n,i):r&&e[n]instanceof Array?o=s(t,e[n],n,i):e instanceof Array?o=s(t,e,n,i):(o=u(t,e,n,i),o=d(t,e,i,n,o)),o):null},e.exports=a},{"../../object/validate.coffee":175,"../../util/uniques.coffee":213}],70:[function(t,e,n){e.exports=function(t){var e,n,i;return["div","svg"].indexOf(t)<0&&(t="div"),n={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",display:"block"},e="div"===t?{}:{position:"absolute"},i=d3.select("body").selectAll(t+".d3plus_tester").data([0]),i.enter().append(t).attr("class","d3plus_tester").style(n).attr(e),i}},{}],71:[function(t,e,n){e.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},error:{accepted:"{0} ist kein gültiger {1} für {2}-Darstellungen. Benutzen Sie bitte: {3}.",connections:"Keine Verbindungen verfügbar für {0}.",data:"Keine Daten verfügbar",dataYear:"Für {0} sind keine Daten verfügbar.",lib:"{0}-Darstellungen erfordern das Laden der Bibliothek {1}.",libs:"{0}-Darstellungen erfordern das Laden folgender Bibliotheken: {1}.",method:"{0}-Darstellungen erfordern die Methode {1}.",methods:"Weitere Einstellungen für folgende Methoden {1} sind bei {0}-Darstellungen erforderlich."},lowercase:["ein","ein","und","wie","bei","aber","durch","für","von","wenn","in","in","in der Nähe","noch","von","auf","auf","oder","pro","das","die","zu","mit","über","gegen","gegen."],method:{active:"aktive Segmente",color:"Farbe",depth:"Tiefe",dev:"ausführlich",focus:"Fokus",icon:"Symbol",id:"Kennung",height:"Höhe",labels:"Beschriftungen",legend:"Legende",margin:"Rand",messages:"Statusmeldungen",order:"Reihenfolge",search:"Suche",shape:"Form",size:"Größe",style:"Stil",temp:"temporäre Segmente",text:"Text",time:"Zeit",timeline:"Zeitleiste",total:"Segmente gesamt",type:"Typ",width:"Breite",x:"x-Achse",y:"y-Achse",zoom:"Zoom",mode:"Modus",mute:"ausblenden",solo:"isolieren"},time:["Datum","Tag","Monat","Zeit","Jahr"],visualization:{bubbles:"Blasen",chart:"Diagramm",geo_map:"Karte",line:"Liniendiagramm",network:"Netzwerk",rings:"Ringe",scatter:"Punktdiagramm",stacked:"Gestapelte Fläche",tree_map:"Baumdiagramm",bar:"Balkendiagramm",box:"Boxplot",paths:"Pfade",pie:"Kreisdiagramm",table:"Tabelle"},ui:{and:"und",back:"zurück",collapse:"Zum Ausblenden klicken",error:"Fehler",expand:"Zum Einblenden klicken",loading:"Lade...",more:"{0} weitere",moreInfo:"Für zusätzliche Informationen klicken",noResults:"Keine Ergebnisse für {0} gefunden.",primary:"Primäre Verbindungen",share:"teilen",total:"gesamt",values:"Werte",including:"einschließlich",or:"oder",iqr:"Interquartilsabstände {0}",max:"Maximalwert",min:"Minimalwert",percentile:"Perzentil P{0}",tukey_bottom:"Unterer Ausreißer",tukey_top:"Oberer Ausreißer",quartile_first:"Unteres Quartil Q1",quartile_third:"Oberes Quartil Q3",median:"Medianwert"},message:{data:"analysiere Daten",draw:"Darstellung wird gerendert",initializing:"initialisiere {0}",loading:"Daten werden geladen",tooltipReset:"Tooltips zurücksetzen",ui:"aktualisiere Oberfläche"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","BIP","HVAC","ID","IT","FuE","TV","UI"]}},{}],72:[function(t,e,n){e.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",deprecated:"the {0} method has been removed, please update your code to use {1}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",mute:"hide",order:"order",search:"search",shape:"shape",size:"size",solo:"isolate",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d","Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p","Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",iqr:"interquartile range for {0}",loading:"loading...",max:"maximum",median:"median",min:"minimum",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",percentile:"{0} percentile",primary:"primary connections",quartile_first:"first quartile",quartile_third:"third quartile",share:"share",total:"total",tukey_bottom:"bottom tukey",tukey_top:"top tukey",values:"values"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"],visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geo_map:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",tree_map:"Tree Map"}}},{}],73:[function(t,e,n){e.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],
shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},dev:{accepted:"{0} no es un valor aceptado para {1}, por favor utilice uno de los siguientes: {2}.",deprecated:"el método {0} ha sido eliminado, por favor, actualiza tu código para utilizar {1}.",noChange:"{0} no se actualiza porque no cambió.",noContainer:"no se puede encontrar un contenedor en la página correspondiente a {0}.",of:"de",oldStyle:"propiedades de estilo para {0} ahora se han incorporado directamente en. {1} ().",sameEdge:"los vínculos no se pueden enlazar con si mismos. eliminando automáticamente el vínculo {0} que se autorreferencia.",set:"{0} se ha establecido.",setLong:"{0} ha sido establecido a {1}.",setContainer:"defina un div contenedor utilizando .container ()"},error:{accepted:"{0} no es un {1} aceptado para visualizaciones de {2}, por favor utilice uno de los siguientes: {3}.",connections:"no hay conexiones disponibles para {0}.",data:"No hay datos disponibles",dataYear:"no hay datos disponibles para {0}.",lib:"{0} visualizaciones requieren cargar las siguientes librerías: {1}.",libs:"{0} visualizaciones requieren cargar las siguientes librerías: {1}.",method:"{0} visualizaciones requieren establecer el ​​método {1}.",methods:"{0} visualizaciones requieren establecer los siguientes métodos: {1}."},lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],method:{active:"segmentos activos",color:"color",depth:"profundidad",dev:"detallado",focus:"foco",icon:"ícono",id:"id",height:"alto",labels:"rótulo",legend:"leyenda",margin:"margen",messages:"mensajes de estado",order:"orden",search:"búsqueda",shape:"forma",size:"tamaño",style:"estilo",temp:"segmentos temporales",text:"texto",time:"tiempo",timeline:"línea de tiempo",total:"segmentos totales",type:"tipo",width:"anchura",x:"eje x",y:"eje Y",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"aislar"},time:["fecha","día","mes","hora","año"],visualization:{bubbles:"Burbujas",chart:"Gráfico",geo_map:"Mapa",line:"Gráfico de linea",network:"Red",rings:"Anillos",scatter:"Gráfico De Dispersión",stacked:"Área Apilada",tree_map:"Tree Map",bar:"Gráfico De Barras",box:"Diagrama de Cajas",paths:"Caminos",pie:"Gráfico de Pastel",table:"Tabla"},ui:{and:"y",back:"atrás",collapse:"click para cerrar",error:"error",expand:"haga clic para ampliar",loading:"Cargando ...",more:"{0} más",moreInfo:"clic para más información",noResults:"no se encontraron resultados para {0}.",primary:"relaciones principales",share:"porcentaje",total:"total",values:"valores",including:"Incluyendo",or:"o",iqr:"rango intercuartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"Tukey inferior",tukey_top:"la parte superior de Tukey",quartile_first:"primer cuartil",quartile_third:"tercer cuartil",median:"mediana"},message:{data:"analizando los datos",draw:"visualizando",initializing:"inicializando {0}",loading:"cargando datos",tooltipReset:"restableciendo las descripciones emergentes",ui:"actualizando la interfaz de usuario"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","UI"]}},{}],74:[function(t,e,n){e.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]},dev:{accepted:"{0} n'est pas une option valide pour {1}, les valeurs possibles sont: {2}.",deprecated:"{0} a été éliminé de la version courante, mettez à jour votre code source avec {1}.",noChange:"{0} n'a pas été mis à jour car inchangé.",noContainer:"impossible de trouver un contenant correspondant à {0}.",of:"de",oldStyle:"les propriétés de {0} ont été imbriquées dans .{1}().",sameEdge:"un arc ne peut pas boucler sur lui même. L'auto-référence est automatiquement éliminée {0}.",set:"{0} a été mis à jour.",setLong:"{0} a été mis à jour à {1}.",setContainer:"merci de choisir un div qui utilise .container()"},error:{accepted:"{0} n'est pas correct {1} pour {2} visualisations, merci d'utilisez une des options suivantes: {3}.",connections:"Pas de connections disponibles pour {0}.",data:"Pas de données disponibles",dataYear:"Pas de données disponibles pour {0}.",lib:"La visualisation de {0} nécessite le chargement de la librairie {1}.",libs:"La visualisation de {0} nécessite le chargement des librairies {1}.",method:"La visualisation du {0} exige la définition de {1}.",methods:"La visualisation du {0} exige les définitions de {1}."},lowercase:["un","une","de","des","et","mais","les","ou","pour","avec","comme","par","vers","si","dans","près","ni","dessus","que","le","la","via","sinon","alors"],method:{active:"segments actifs",color:"couleur",depth:"profondeur",dev:"verbeux",focus:"focus",icon:"ícone",id:"id",height:"hauteur",labels:"labels",legend:"légende",margin:"marge",messages:"messages",order:"ordre",search:"recherche",shape:"format",size:"taille",style:"style",temp:"segments temporaires",text:"texte",time:"temps",timeline:"ligne temporelle",total:"segments totaux",type:"type",width:"largeur",x:"axe x",y:"axe y",zoom:"zoom",mode:"mode",mute:"cacher",solo:"isoler"},time:["année","date","jour","heure","mois"],visualization:{bubbles:"Bulles",chart:"Graphique",geo_map:"Carte",line:"Courbes",network:"Réseau",rings:"Anneaux",scatter:"Nuage de points",stacked:"Aires empilées",tree_map:"Arbre",bar:"Diagramme en barres",box:"Boîtes à Moustaches",paths:"Chemins",pie:"Camembert",table:"Table"},ui:{and:"et",back:"retour",collapse:"clic pour réduire",error:"erreur",expand:"clic pour agrandir",loading:"chargement ...",more:"plus {0}",moreInfo:"clic pour plus d'information",noResults:"pas de résultat correspondant à {0}.",primary:"connections primaires",share:"part",total:"total",values:"valeurs",including:"incluant",or:"ou",iqr:"gamme interquartile pour {0}",max:"maximum",min:"le minimum",percentile:"{0} percentile",tukey_bottom:"tukey bas",tukey_top:"top tukey",quartile_first:"premier quartile",quartile_third:"le troisième quartile",median:"médian"},message:{data:"analyse des données",draw:"tracé en cours",initializing:"Initialisation {0}",loading:"chargement",tooltipReset:"réinitialisation des bulles",ui:"rafraichissement de l'interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","IT","TV","UI"]}},{}],75:[function(t,e,n){e.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["₩",""],dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},error:{accepted:"{0}하지 허용 {1} {2} 시각화는 다음 중 하나를 사용하십시오에 대해 : {3}.",connections:"{0}에 대한 연결이 없음.",data:"자료 없음",dataYear:"{0}에 대한 자료가 없음.",lib:"{0} 시각화는 {1} 라이브러리를로드 할 필요합니다.",libs:"{0} 시각화는 다음과 같은 라이브러리를로드 할 필요 : {1}.",method:"{0} 시각화를 위해 {1} 메서드를 설정해야 한다.",methods:"{0} 시각화를 위해 다음과 같은 메서드를 설정해야한다: {1}."},lowercase:[""],method:{active:"활성 세그먼트",color:"색",depth:"깊이",dev:"풀어서",focus:"집중하다",icon:"상",id:"신분증",height:"높이",labels:"라벨",legend:"범례",margin:"여유",messages:"상태 메시지",order:"주문",search:"수색",shape:"모양",size:"크기",style:"스타일",temp:"임시 세그먼트",text:"본문",time:"시각",timeline:"타임 라인",total:"총 세그먼트",type:"유형",width:"폭",x:"X 축",y:"Y 축",zoom:"줌",mode:"모드",mute:"숨김",solo:"독주"},time:["날짜","요일","월","시간","년"],visualization:{bubbles:"버블 차트",chart:"차트",geo_map:"지도형",line:"선형 그래프",network:"네트워크 그래프",rings:"반지",scatter:"산포도",stacked:"누적 된 지역",tree_map:"트리 맵",bar:"막대 차트",box:"박스 플롯",paths:"경로",pie:"파이 차트",table:"탁자"},ui:{and:"과",back:"뒤로",collapse:"축소하려면 클릭",error:"오류",expand:"확장하려면 클릭",loading:"로드 중 ...",more:"{0} 이상",moreInfo:"추가 정보를 위해 클릭하십시오",noResults:"일치하는 결과값이 없음 {0}.",primary:"기본 연결",share:"비중",total:"합계",values:"값",including:"...을 포함하여",or:"또는",iqr:"대한 사 분위 범위 {0}",max:"최고",min:"최저한의",percentile:"{0} 백분위 수",tukey_bottom:"바닥 Tukey에",tukey_top:"상단 Tukey에",quartile_first:"1 분위",quartile_third:"3 분위",median:"중앙값"},message:{data:"데이터 분석 중",draw:"데이터 시각화 중",initializing:"초기화 {0}",loading:"데이터 로딩 중",tooltipReset:"툴팁을 재설정",ui:"UI 업데이트 중"},uppercase:["CEO","최고 경영자","최고 재무 책임자 (CFO)","CFO는","CNC","COO","구구","CPU","CPU에","GDP","HVAC","ID","IT","R & D","TV","UI"]}},{}],76:[function(t,e,n){e.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," ден."],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]},error:{accepted:"{0} не е прифатлива за {1} {2} визуелизација, ве молиме користете една од следниве: {3}.",connections:"не е достапна за врски {0}.",data:"нема податоци",dataYear:"Не е достапен за податоци {0}.",lib:"{0} визуализации бараат вчитување на библиотеката {1} .",libs:"{0} визуализации бараат вчитување на следниве библиотеки: {1}.",method:"{0} визуализации бара поставување на {1} методот.",methods:"{0} визуализации бараат поставување на следниве методи: {1}."},lowercase:["a","и","во","но","на","или","да","се","со"],method:{active:"активни сегменти",color:"боја",depth:"длабочина",dev:"опширно",focus:"фокус",icon:"икона",id:"проект",height:"височина",labels:"етикети",legend:"легенда",margin:"маргина",messages:"пораки за статусот",order:"со цел",search:"барај",shape:"форма",size:"големина",style:"стил",temp:"привремени сегменти",text:"текст",time:"време",timeline:"времеплов",total:"Вкупно сегменти",type:"тип",width:"ширина",x:"x оската",y:"Y оската",zoom:"зум",mode:"режим",mute:"се скрие",solo:"изолирање"},time:["датум","ден","месец","време","година"],visualization:{bubbles:"меурчиња",chart:"Графикон",geo_map:"Гео мапа",line:"Линиски график",network:"мрежа",rings:"прстени",scatter:"Распрскан график",stacked:"Наредена површина",tree_map:"Мапа во вид на дрво",bar:"бар шема",box:"правоаголен дијаграм",paths:"патеки",pie:"пита графикон",table:"Табела"},ui:{and:"и",back:"назад",collapse:"кликни за да се собере",error:"грешка",expand:"Кликни за проширување",loading:"Се вчитува ...",more:"{0} повеќе",moreInfo:"кликнете за повеќе информации",noResults:"Не се пронајдени резултати за појавување на {0}.",primary:"основните врски",share:"удел",total:"Вкупниот",values:"вредности",including:"Вклучувајќи",or:"или",iqr:"interquartile опсег за {0}",max:"максималната",min:"минимум",percentile:"{0} перцентил",tukey_bottom:"дното Tukey",tukey_top:"Топ Tukey",quartile_first:"првиот квартал",quartile_third:"третиот квартал",median:"средната"},message:{data:"анализа на податоци",draw:"цртање на визуелизација",initializing:"иницијализација {0}",loading:"податоци за товарење",tooltipReset:"ресетирање на објаснувањата",ui:"ажурирање на кориничкиот интерфејс"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"]}},{}],77:[function(t,e,n){e.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} não é um valor válido para {1}, por favor use um dos seguintes procedimentos: {2}.",deprecated:"{0} método foi removido, por favor atualize seu código para utilizar {1}.",noChange:"{0} não foi atualizado porque ele não mudou.",noContainer:"Não foi possível encontrar um local na página correspondente a {0}.",of:"do",oldStyle:"propriedades de estilo para {0} já foram incorporados diretamente no. {1} ().",sameEdge:"bordas não podem vincular a si mesmos. removendo automaticamente borda de auto-referência {0}.",set:"{0} foi definido.",setLong:"{0} foi definido para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} não é um {1} reconhecido para visualizações {2}, favor usar um dos seguintes procedimentos: {3}.",connections:"Não há conexões disponíveis para {0}.",data:"Não há dados disponíveis",dataYear:"Não há dados disponíveis para {0}.",lib:"A visualização {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualização {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualização {0} exige a definição do método {1}.",methods:"A visualização {0} exige a definição dos métodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"ícone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"mensagens de status",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporários",text:"texto",time:"Tempo",timeline:"cronograma",total:"segmentos totais",type:"digitar",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"isolar"},time:["data","dia","mês","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Gráfico",geo_map:"Mapa",line:"Gráfico de Linha",network:"Rede",rings:"Anéis",scatter:"dispersão",stacked:"Evolução",tree_map:"Tree Map",bar:"Gráfico de Barras",box:"box Plot",paths:"caminhos",pie:"Carta de torta",table:"Mesa"},ui:{and:"e",back:"voltar",collapse:"clique para entrar em colapso",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"Clique para mais informações",noResults:"nenhum resultado para {0}.",primary:"conexões primárias",share:"participação",total:"total",values:"valores",including:"Incluindo",or:"ou",iqr:"intervalo interquartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"tukey bottom",tukey_top:"tukey topo",quartile_first:"primeiro quartil",quartile_third:"terceiro quartil",median:"mediana"},message:{data:"analisando dados",draw:"desenhando visualização",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","P&D","TV","IU"]}},{}],78:[function(t,e,n){e.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},error:{accepted:"{0} não é uma {1} válida para a visualização {2}, por favor escolha uma das seguintes: {3}.",connections:"não existem ligações disponíveis para {0}.",data:"não existem dados disponíveis",dataYear:"não existem dados disponíveis para {0}.",lib:"a visualização {0} necessita que a biblioteca {1} seja carregada.",libs:"a visualização {0} necessita que as seguintes bibliotecas sejam carregadas: {1}.",method:"A visualização {0} exige a definição do método {1}.",methods:"A visualização {0} exige a definição dos seguintes métodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"ícone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"estado",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporários",text:"texto",time:"tempo",timeline:"linha temporal",total:"segmentos totais",type:"digitar",width:"largura",x:"eixo dos xx",y:"eixo dos yy",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"isolar"},time:["data","dia","mês","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Diagrama",geo_map:"Mapa",line:"Gráfico de Linha",network:"Grafo",rings:"Anéis",scatter:"Gráfico de Dispersão",stacked:"Gráfico de Área",tree_map:"Tree Map",bar:"Gráfico de Barras",box:"Diagrama de Caixa e Bigodes",paths:"caminhos",pie:"Gráfico de Setores",table:"Mesa"},ui:{and:"e",back:"voltar",collapse:"Clique para colapsar",error:"erro",expand:"clique para expandir",loading:"a carregar ...",more:"mais {0}",moreInfo:"Clique para mais informações",noResults:"nenhum resultado para {0}.",primary:"ligações principais",share:"proporção",total:"total",values:"valores",including:"Incluindo",or:"ou",iqr:"intervalo interquartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"tukey bottom",tukey_top:"tukey topo",quartile_first:"primeiro quartil",quartile_third:"terceiro quartil",median:"mediana"},message:{data:"a analisar os dados",draw:"a desenhar a visualização",initializing:"a inicializar {0}",loading:"a carregar os dados",tooltipReset:"a actualizar as caixas de informação",ui:"a actualizar o interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","IU"]}},{}],79:[function(t,e,n){e.exports={format:{decimal:",",thousands:" ",grouping:[3],currency:[""," руб."],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]},error:{accepted:"{0} не является обслуживаемым {1} для {2} визуализаций, пожалуйста, используйте одно из следующих действий: {3}.",connections:"нет соединений, доступных для {0}.",data:"данные недоступны",dataYear:"нет данных для {0}.",lib:"{0} визуализаций требуют загрузки {1} библиотеки.",libs:"{0} визуализаций требует загрузки следующие библиотеки: {1}.",method:"{0} визуализаций требуют установки {1} метод.",methods:"{0} визуализаций требуют установки следующих методов: {1}."},lowercase:["и","как","в","но","для","из","если в","в","недалеко","ни","на","на","или","в","что","к","с","с помощью","против","против"],method:{active:"активные сегменты",color:"цвет",depth:"глубина",dev:"подробный",focus:"фокус",icon:"значок",id:"Я бы",height:"высота",labels:"надписи",legend:"легенда",margin:"поле",messages:"сообщения о состоянии",order:"заказ",search:"поиск",shape:"форма",size:"размер",style:"стиль",temp:"временные сегменты",text:"текст",time:"время",timeline:"график",total:"всего сегментов",type:"тип",width:"ширина",x:"ось х",y:"ось Y",zoom:"масштаб",mode:"Режим",mute:"скрывать",solo:"изолировать"},time:["дата","день недели","месяц","время","год"],visualization:{bubbles:"Пузыри",chart:"Диаграмма",geo_map:"Карта Geo",line:"линия Участок",network:"сеть",rings:"Кольца",scatter:"Scatter Plot",stacked:"Stacked Площадь",tree_map:"Дерево Карта",bar:"гистограмма",box:"Box Участок",paths:"пути",pie:"Круговая диаграмма",table:"Таблица"},ui:{and:"а также",back:"назад",collapse:"нажмите, чтобы свернуть",error:"ошибка",expand:"нажмите, чтобы развернуть",loading:"загрузка ...",more:"{0} более",moreInfo:"нажмите для получения дополнительной информации",noResults:"нет результатов, соответствующих {0}.",primary:"первичные соединения",share:"доля",total:"Всего",values:"значения",including:"в том числе",or:"или",iqr:"межквартильный диапазон для {0}",max:"максимальная",min:"минимальный",percentile:"{0} процентиль",tukey_bottom:"нижний Тьюки",tukey_top:"сверху Тьюки",quartile_first:"первый квартиль",quartile_third:"третий квартиль",median:"медиана"},message:{data:"данные анализа",draw:"рисование визуализация",initializing:"инициализацией {0}",loading:"Загрузка данных",tooltipReset:"сброс всплывающих подсказок",ui:"обновление пользовательского интерфейса"},uppercase:["ID"]}},{}],80:[function(t,e,n){e.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["¥",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},error:{accepted:"{0}对于{2}的可视化效果并不是一个可接受的{1}, 请使用如下的一个：{3}.",connections:"没有对{0}可用的连接。",data:"无可用数据",dataYear:"没有数据对{0}可用。",lib:"{0}的可视化要求装载{1}库。",libs:"{0}的可视化需要加载以下库：{1}。",method:"{0}的可视化要求设置{1}方法。",methods:"{0}的可视化要求设置以下方法：{1}。"},lowercase:["一个","和","在","但是","在...里","的","或者","这","向","与...一起"],method:{active:"活跃段",color:"颜色",depth:"深度",dev:"详细",focus:"焦点",icon:"图标",id:"身份认证",height:"高度",labels:"标签",legend:"图例注释",margin:"外边距",messages:"状态消息",order:"规则",search:"搜索",shape:"形状",size:"大小",style:"样式",temp:"暂时性区段",text:"文本",time:"时间",timeline:"时间轴",total:"总段",type:"类型",width:"宽度",x:"X轴",y:"Y轴",zoom:"缩放",mode:"模式",mute:"隐藏",solo:"隔离"},time:["日","星期","月","时间","年"],visualization:{bubbles:"气泡",chart:"图表",geo_map:"地理地图",line:"线图",network:"网络",rings:"特性",scatter:"散点图",stacked:"堆积面积图",tree_map:"树图",bar:"条图",box:"箱形图",paths:"路径",pie:"饼形图",table:"表"},ui:{and:"和",back:"后面",collapse:"点击合并",error:"错误",expand:"单击以展开",loading:"载入中...",more:"{0}更多",moreInfo:"点击了解更多信息",noResults:"没有结果匹配{0}。",primary:"主要连接",share:"共享",total:"总",values:"值",including:"包括",or:"要么",iqr:"间距范围为{0}",max:"最大值",min:"最低限度",percentile:"{0}百分",tukey_bottom:"底部杜克",tukey_top:"顶部杜克",quartile_first:"第一个四分位数",quartile_third:"第三个四分位数",median:"中位数"},message:{data:"分析数据",draw:"绘制可视化",initializing:"初始化{0}",loading:"加载数据",tooltipReset:"重置工具提示",ui:"更新UI"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","电视","用户界面","研发"]}},{}],81:[function(t,e,n){e.exports={de_DE:t("./languages/de_DE.js"),en_US:t("./languages/en_US.coffee"),es_ES:t("./languages/es_ES.js"),fr_FR:t("./languages/fr_FR.js"),ko_KR:t("./languages/ko_KR.js"),mk_MK:t("./languages/mk_MK.js"),pt_BR:t("./languages/pt_BR.js"),pt_PT:t("./languages/pt_PT.js"),ru_RU:t("./languages/ru_RU.js"),zh_CN:t("./languages/zh_CN.js")}},{"./languages/de_DE.js":71,"./languages/en_US.coffee":72,"./languages/es_ES.js":73,"./languages/fr_FR.js":74,"./languages/ko_KR.js":75,"./languages/mk_MK.js":76,"./languages/pt_BR.js":77,"./languages/pt_PT.js":78,"./languages/ru_RU.js":79,"./languages/zh_CN.js":80}],82:[function(t,e,n){var i,r,o,a,s,l,u,c,h;r=t("../../util/copy.coffee"),s=t("../console/print.coffee"),l=t("./process/detect.coffee"),u=t("./set.coffee"),c=t("../../string/format.js"),h=t("../../object/validate.coffee"),e.exports=function(t,e){var n,i,s;s=[];for(n in e)i=e[n],t[n]=r(i),t[n].initialized=a(t,t[n],n),s.push(t.self[n]=o(t,n));return s},a=function(t,e,n,i){var r,o,u,d,f;e.previous=!1,e.changed=!1,e.initialized=!1,e.callback=!1,"init"in e&&!("value"in e)&&(e.value=e.init(t),delete e.init),"process"in e&&(e.value=l(t,e,e.value));for(f in e)if("deprecates"===f)for(o=e[f]instanceof Array?e[f]:[e[f]],u=0,d=o.length;u<d;u++)r=o[u],t.self[r]=function(e,n){return function(r){var o,a,l;return l=t.format.locale.value.dev.deprecated,e="."+e+"()",a=i?'"'+n+'" in .'+i+"()":"."+n+"()",o=i||n,s.error(c(l,e,a),o),t.self}}(r,n);else"global"===f?n in t||(t[n]=[]):"value"!==f&&h(e[f])&&a(t,e[f],f,n);return!0},o=function(t,e){return function(n,r){var o,a,l,u,d,f,p,g;if(o="accepted"in t[e]?t[e].accepted:null,"function"==typeof o&&(o=o(t)),o instanceof Array||(o=[o]),n===Object)return t[e];if(!arguments.length&&o.indexOf(void 0)<0)return"value"in t[e]?t[e].value:t[e];if("style"===e&&"object"==typeof n){g=t.format.locale.value.dev.oldStyle;for(f in n)s.warning(c(g,'"'+f+'"',f),f),t.self[f](n[f])}if("font"===e){"string"==typeof n&&(n={family:n}),p=!0,l=function(t,e,n,i){h(t[n])&&e in t[n]&&(h(t[n][e])?t[n][e].process?t[n][e].value=t[n][e].process(i):t[n][e].value=i:t[n][e]=i)},a=function(t,e,n){var i;if(h(t)){if(p)for(i in t)l(t,e,i,n);else"font"in t&&l(t,e,"font",n);p=!1;for(i in t)a(t[i],e,n)}};for(u in n)d=n[u],"secondary"!==u&&(h(d)&&(d=d.value),d&&a(t,u,d))}return i(t,e,t,e,n),"function"==typeof r&&(t[e].callback=r),t[e].chainable===!1?t[e].value:t.self}},i=function(t,e,n,r,o){var a,s,l,c;if(["accepted","changed","initialized","previous","process"].indexOf(r)<0)if(c=h(o),l=h(n[r])&&"objectAccess"in n[r]&&n[r].objectAccess===!1,a=c&&(l||!("value"in o)&&(!h(n[r])||!(d3.keys(o)[0]in n[r]))),null===o||!c||a)u(t,e,n,r,o);else if(c)for(s in o)i(t,e,n[r],s,o[s])}},{"../../object/validate.coffee":175,"../../string/format.js":176,"../../util/copy.coffee":210,"../console/print.coffee":54,"./process/detect.coffee":90,"./set.coffee":96}],83:[function(t,e,n){e.exports=function(t){return t||(t=!1),{accepted:[!1,Array,Function,Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:t,process:Array,value:[]}}},{}],84:[function(t,e,n){var i;i=t("../../../client/rtl.coffee"),e.exports=function(t){var e;return e=["left","center","right"],t===!1&&e.unshift(!1),e.indexOf(t)<0&&(t="left"),{accepted:e,process:function(t){return i?"left"===t?"right":"right"===t?"left":t:t},value:t}}},{"../../../client/rtl.coffee":42}],85:[function(t,e,n){e.exports=function(t){var e;return e=["line-through","none","overline","underline"],t===!1&&e.unshift(!1),e.indexOf(t)<0&&(t="none"),{accepted:e,value:t}}},{}],86:[function(t,e,n){var i,r;r=t("../../../font/validate.coffee"),i=["Helvetica Neue","HelveticaNeue","Helvetica","Arial","sans-serif"],e.exports=function(t){return void 0===t&&(t=i),{process:r,value:t}}},{"../../../font/validate.coffee":105}],87:[function(t,e,n){e.exports=function(t){var e;return e=["top","middle","bottom"],t===!1&&e.unshift(!1),e.indexOf(t)<0&&(t="bottom"),{accepted:e,mapping:{top:"0ex",middle:"0.5ex",bottom:"1ex"},process:function(t){return this.text=t,this.mapping[t]},value:t}}},{}],88:[function(t,e,n){e.exports=function(t){var e;return e=["capitalize","lowercase","none","uppercase"],t===!1&&e.unshift(!1),e.indexOf(t)<0&&(t="none"),{accepted:e,value:t}}},{}],89:[function(t,e,n){e.exports=function(t,e,n){var i;return e.history&&e.history.reset(),t.constructor===String?t.indexOf("/")>=0?(n.url=t,[]):(i=d3.selectAll(t),i.size()?i:(t.indexOf(".")>=0&&(n.url=t),[])):t}},{}],90:[function(t,e,n){var i,r;i=t("../../../util/copy.coffee"),r=t("../../../array/update.coffee"),e.exports=function(t,e,n){return e.process===Array?r(i(e.value),n):"object"==typeof e.process&&"string"==typeof n?e.process[n]:"function"==typeof e.process?e.process(n,t,e):n}},{"../../../array/update.coffee":37,"../../../util/copy.coffee":210}],91:[function(t,e,n){var i;i=t("../../../client/css.coffee"),e.exports=function(t,e,n){return t===!1||t.indexOf("fa-")<0||0===t.indexOf("fa-")&&i("font-awesome")?t:n.fallback}},{"../../../client/css.coffee":38}],92:[function(t,e,n){e.exports=function(t,e){var n,i,r,o,a,s,l,u,c,h,d,f,p;if("string"==typeof t){for(t=t.split(" "),n=i=0,a=t.length;i<a;n=++i)p=t[n],t[n]=parseFloat(p,10);t=1===t.length?t[0]:2===t.length?{top:t[0],right:t[1],bottom:t[0],left:t[1]}:3===t.length?{top:t[0],right:t[1],bottom:t[2],left:t[1]}:4===t.length?{top:t[0],right:t[1],bottom:t[2],left:t[3]}:0}if(f=["top","right","bottom","left"],"number"==typeof t)for(r=0,s=f.length;r<s;r++)d=f[r],e[d]=t;else for(o=0,l=f.length;o<l;o++)d=f[o],e[d]=t[d];for(e.css="",h=[],n=c=0,u=f.length;c<u;n=++c)d=f[n],n&&(e.css+=" "),h.push(e.css+=e[d]+"px");return h}},{}],93:[function(t,e,n){var i,r,o,a;i=t("../../array/contains.coffee"),r=t("../../string/format.js"),o=t("../../string/list.coffee"),a=t("../console/print.coffee"),e.exports=function(t,e,n,s,l){var u,c,h,d,f,p,g,m;if("function"==typeof e&&(e=e(t)),e instanceof Array||(e=[e]),c=i(e,n),c===!1&&void 0!==n){for(p=[],m=JSON.stringify(n),"string"!=typeof n&&(m='"'+m+'"'),d=0,f=e.length;d<f;d++)u=e[d],"string"==typeof u?p.push('"'+u+'"'):"function"==typeof u?p.push(u.toString().split("()")[0].substring(9)):void 0===u?p.push("undefined"):p.push(JSON.stringify(u));p=o(p,t.format.locale.value.ui.or),t.type&&["mode","shape"].indexOf(s)>=0?(g=t.format.locale.value.error.accepted,h=t.format.locale.value.visualization[t.type.value]||t.type.value,a.warning(r(g,m,s,h,p),s)):(g=t.format.locale.value.dev.accepted,a.warning(r(g,m,l,p),s))}return!c}},{"../../array/contains.coffee":35,"../../string/format.js":176,"../../string/list.coffee":177,"../console/print.coffee":54}],94:[function(t,e,n){e.exports=function(t){var e;return e=["auto","optimizeSpeed","crispEdges","geometricPrecision"],e.indexOf(t)>=0||(t="crispEdges"),{accepted:e,value:t}}},{}],95:[function(t,e,n){var i,r;r=t("../../object/validate.coffee"),i=function(t,e){var n;t.changed&&(t.changed=!1),"draw"===e&&(t.frozen=!1,t.update=!0,t.first=!1);for(n in t)n.indexOf("d3plus")<0&&r(t[n])&&i(t[n],n)},e.exports=i},{"../../object/validate.coffee":175}],96:[function(t,e,n){var i,r,o,a,s,l,u,c,h;i=t("../../util/copy.coffee"),r=t("../../util/d3selection.coffee"),h=t("../../object/validate.coffee"),o=t("../../object/merge.coffee"),a=t("../console/print.coffee"),s=t("./process/detect.coffee"),l=t("./rejected.coffee"),u=t("../../string/format.js"),c=t("../../array/update.coffee"),e.exports=function(t,e,n,d,f){var p,g,m,v,y,b,w,x,_,k,C,S,M,T;if(S="value"!==d&&d&&d!==e?'"'+d+'" '+t.format.locale.value.dev.of+" ."+e+"()":"."+e+"()",p="value"===d&&"accepted"in n?n.accepted:h(n[d])&&"accepted"in n[d]?n[d].accepted:[f],!l(t,p,f,e,S)){if(h(n[d])&&"value"in n[d]&&(k=d,n=n[d],d="value"),"value"===d&&"process"in n&&(f=s(t,n,f)),n[d]instanceof Array||n[d]!==f||void 0===f){if(n.changed=!0,n.loaded&&(n.loaded=!1),"history"in t&&"draw"!==e&&(g=i(n),g.method=e,t.history.chain.push(g)),n.previous=n[d],"id"in t&&"value"===d&&"nesting"in n)if("id"!==e){if("object"!=typeof n.nesting&&(n.nesting={}),h(f)){for(b in f)"string"==typeof f[b]&&(f[b]=[f[b]]);n.nesting=o(n.nesting,f),t.id.value in n.nesting||(n.nesting[t.id.value]=f[d3.keys(f)[0]])}else f instanceof Array?n.nesting[t.id.value]=f:n.nesting[t.id.value]=[f];n[d]=n.nesting[t.id.value][0]}else f instanceof Array?(n.nesting=f,"depth"in t&&t.depth.value<f.length?n[d]=f[t.depth.value]:(n[d]=f[0],"depth"in t&&(t.depth.value=0))):(n[d]=f,n.nesting=[f],"depth"in t&&(t.depth.value=0));else"depth"===e?(f>=t.id.nesting.length?t.depth.value=t.id.nesting.length-1:f<0?t.depth.value=0:t.depth.value=f,t.id.value=t.id.nesting[t.depth.value],"object"==typeof t.text.nesting&&(_=t.text.nesting[t.id.value],_&&(t.text.nesting[t.id.value]="string"==typeof _?[_]:_,t.text.value=_ instanceof Array?_[0]:_))):h(n[d])&&h(f)?n[d]=o(n[d],f):n[d]=f;"value"===d&&n.global&&(y=n[d].length>0,w=k||d,w in t&&(y&&t.data[w].indexOf(e)<0||!y&&t.data[w].indexOf(e)>=0)&&(t.data[w]=c(t.data[w],e))),"value"===d&&n.dataFilter&&t.data&&t.data.filters.indexOf(e)<0&&t.data.filters.push(e),t.dev.value&&n.changed&&void 0!==n[d]&&(x=n[d]instanceof Array&&n[d].length>10,v=r(n[d]),M="function"==typeof n[d],T=x||v||M?null:"string"==typeof n[d]?n[d]:JSON.stringify(n[d]),null!==T&&T.length<260?(C=t.format.locale.value.dev.setLong,a.log(u(C,S,'"'+T+'"'))):(C=t.format.locale.value.dev.set,a.log(u(C,S))))}else C=t.format.locale.value.dev.noChange,t.dev.value&&a.comment(u(C,S));
"value"===d&&n.callback&&!n.url&&(m="function"==typeof n.callback?n.callback:n.callback.value,m&&m(f,t.self))}}},{"../../array/update.coffee":37,"../../object/merge.coffee":174,"../../object/validate.coffee":175,"../../string/format.js":176,"../../util/copy.coffee":210,"../../util/d3selection.coffee":211,"../console/print.coffee":54,"./process/detect.coffee":90,"./rejected.coffee":93}],97:[function(t,e,n){var i=t("../console/print.coffee"),r=t("../../string/format.js");e.exports=function(t){if(t.dev.value){var e="analyzing edges list";i.time(e)}var n=t.types[t.type.value].requirements;n instanceof Array||(n=[n]);var o=n.indexOf("nodes")>=0&&!t.nodes.value;if(o){t.nodes.value=[];var a=[];t.nodes.changed=!0}t.edges.value.forEach(function(e){["source","target"].forEach(function(n){var i=typeof e[t.edges[n]];if("object"!==i)if("number"!==i||o||"number"===t.data.keys[t.id.value])if(o&&a.indexOf(e[t.edges[n]])>=0)e[t.edges[n]]=t.nodes.value.filter(function(i){return i[t.id.value]===e[t.edges[n]]})[0];else{var r={};r[t.id.value]=e[t.edges[n]],e[t.edges[n]]=r}else e[t.edges[n]]=t.nodes.value[e[t.edges[n]]];var s=e[t.edges[n]];o&&a.indexOf(s[t.id.value])<0&&(a.push(s[t.id.value]),t.nodes.value.push(s))}),"keys"in t.data||(t.data.keys={}),t.id.value in t.data.keys||(t.data.keys[t.id.value]=typeof e[t.edges.source][t.id.value])}),t.edges.value=t.edges.value.filter(function(e){var n=e[t.edges.source][t.id.value],o=e[t.edges.target][t.id.value];if(n===o){var a=t.format.locale.value.dev.sameEdge;return i.warning(r(a,'"'+n+'"'),"edges"),!1}return!0}),t.edges.linked=!0,t.dev.value&&i.timeEnd(e)}},{"../../string/format.js":176,"../console/print.coffee":54}],98:[function(t,e,n){var i=t("./hideElement.js");e.exports=function(t){function e(t,e){[].forEach.call(e.attributes,function(e){if(/^data-/.test(e.name)){var n=e.name.substr(5).replace(/-(.)/g,function(t,e){return e.toUpperCase()});t[n]=e.value}}),n.forEach(function(n){null!==e.getAttribute(n)&&(t[n]=e.getAttribute(n))})}var n=[t.color.value,t.icon.value,t.keywords.value,t.alt.value,"style"];t.text.value||t.self.text("text"),n=n.concat(t.id.nesting),t.self.data({element:t.data.value});var r=t.data.element.value.node().tagName.toLowerCase(),o=t.data.element.value.attr("type"),a=[];if("select"===r){var s=t.data.element.value.node().id;s&&t.self.container({id:s}),t.data.element.value.selectAll("option").each(function(n,i){var r={};if(r.text=d3.select(this).text(),e(r,this),a.push(r),this.selected)for(var i=t.id.nesting.length-1;i>=0;i--){var o=t.id.nesting[i];if(o in r){t.self.focus(r[o]);break}}})}else if("input"===r&&"radio"===o){var l=t.data.element.value.node().getAttribute("name");l&&t.self.container({id:l}),t.data.element.value.each(function(n,r){var o={};e(o,this);var s=o[t.id.value]||this.id||!1;if(s&&isNaN(parseFloat(s))){var l=d3.select("label[for="+s+"]");l.empty()||(o.text=l.html(),l.call(i))}a.push(o),this.checked&&t.self.focus(o[t.id.value])})}!t.focus.value.length&&a.length&&(t.data.element.value.node().selectedIndex=0,t.self.focus(a[0][t.id.value]));var u=d3.select("legend[for="+t.container.id+"]");u.empty()||(t.self.title(u.html()),u.call(i));var c=!!t.container.value&&t.container.value.node().tagName.toLowerCase();return t.container.value!==!1&&"body"!==c||(t.container.value=d3.select(t.data.element.value.node().parentNode)),t.data.element.value.call(i),a}},{"./hideElement.js":99}],99:[function(t,e,n){e.exports=function(t){t.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}},{}],100:[function(t,e,n){var i=t("../console/print.coffee");e.exports=function(t){if("network"===t.type.value){if(t.dev.value){var e="analyzing node positions";i.time(e)}var n=t.nodes.value.filter(function(t){return"number"==typeof t.x&&"number"==typeof t.y}).length;if(n===t.nodes.value.length)t.nodes.positions=!0;else{var r=d3.layout.force().size([t.width.viz,t.height.viz]).nodes(t.nodes.value).links(t.edges.value),o=t.edges.strength.value;o&&("string"==typeof o?r.linkStrength(function(t){return t[o]}):r.linkStrength(o));var a=50,s=.01;r.start();for(var l=a;l>0&&(r.tick(),!(r.alpha()<s));--l);r.stop(),t.nodes.positions=!0}t.dev.value&&i.timeEnd(e)}}},{"../console/print.coffee":54}],101:[function(t,e,n){var i;i=t("numeric"),e.exports=function(t,e){var n,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T;for(null==e&&(e={}),null==e.maxDegree&&(e.maxDegree=5),n=t.length,b=Number.MAX_VALUE,s=null,o=function(){var n,i,r;for(r=[],c=n=1,i=e.maxDegree+1;1<=i?n<i:n>i;c=1<=i?++n:--n)r.push(function(){var e,n,i;for(i=[],n=0,e=t.length;n<e;n++)y=t[n],i.push(Math.pow(y[0],c));return i}());return r}(),M=function(){var e,n,i;for(i=[],e=0,n=t.length;e<n;e++)y=t[e],i.push(y[1]);return i}(),d=g=0,x=1<<e.maxDegree;0<=x?g<x:g>x;d=0<=x?++g:--g){for(a=[function(){var t,e,i;for(i=[],w=t=0,e=n;0<=e?t<e:t>e;w=0<=e?++t:--t)i.push(1);return i}()],h=[0],f=v=0,_=e.maxDegree;0<=_?v<_:v>_;f=0<=_?++v:--v)(d&1<<f)>0&&(a.push(o[f]),h.push(f+1));r=i.transpose(a),p=h.length,l=i.dot(i.dot(i.inv(i.dot(a,r)),a),M),T=i.dot(r,l),k=i.sub(M,T),S=i.dot(k,k),C=S/(n-p),m=-.5*n*Math.log(2*Math.PI)-.5*n*Math.log(C)-S/(2*C),u=-2*m+p*(Math.log(n)-Math.log(2*Math.PI)),u<b&&(b=u,s=[h,l,T])}return s}},{numeric:8}],102:[function(t,e,n){var i;i=t("static-kdtree"),e.exports=function(t,e){var n,r,o,a,s,l,u,c,h,d,f,p;return null==e&&(e=10),p=i(t),u=function(){var n,i,r;for(r=[],n=0,i=t.length;n<i;n++)c=t[n],r.push(p.knn(c,e+1).slice(1));return r}(),f=function(e,n){var i,r,o,a,s,l;for(i=t[e],r=t[n],a=0,e=s=0,l=i.length;0<=l?s<l:s>l;e=0<=l?++s:--s)o=i[e]-r[e],a+=o*o;return a},a=function(){var n,i,o;for(o=[],r=n=0,i=t.length;0<=i?n<i:n>i;r=0<=i?++n:--n)o.push(f(r,u[r][e-1]));return o}(),h=function(t,e){return Math.max(f(t,e),a[e])},s=function(t){var n,i,r,o,a;for(o=0,a=u[t],i=0,r=a.length;i<r;i++)n=a[i],o+=h(t,n);return e/o},l=function(){var e,n,i;for(i=[],r=e=0,n=t.length;0<=n?e<n:e>n;r=0<=n?++e:--e)i.push(s(r));return i}(),d=function(){var i,a,s,c,h,d;for(d=[],r=i=0,c=t.length;0<=c?i<c:i>c;r=0<=c?++i:--i){for(n=0,h=u[r],a=0,s=h.length;a<s;a++)o=h[a],n+=l[o];n/=e,d.push([r,n/l[r]])}return d}(),d.sort(function(t,e){return e[1]-t[1]})}},{"static-kdtree":10}],103:[function(t,e,n){e.exports=function(t){var e,n,i;return n=d3.median(t),e=d3.median(t.map(function(t){return Math.abs(t-n)})),i=t.map(function(t,i){return[i,Math.abs(t-n)/e]}),i.sort(function(t,e){return e[1]-t[1]})}},{}],104:[function(t,e,n){var i;i=t("../core/font/tester.coffee"),e.exports=function(t,e,n){var r,o,a,s,l,u,c;return n||(n={}),e=e||{},u=n.parent||i("svg").append("text"),s=[],t instanceof Array||(t=[t]),c=u.selectAll("tspan").data(t),r={left:"0px",position:"absolute",top:"0px",x:0,y:0},l=0,"letter-spacing"in e&&(l=parseFloat(e["letter-spacing"]),delete e["letter-spacing"]),a=function(t){var e;return e=0,l&&(e=(d3.select(t).text().length-1)*l),t.getComputedTextLength()+e},o=function(t){return t.parentNode.getBBox().height||t.getBoundingClientRect().height},c.enter().append("tspan").text(String).style(e).attr(r).each(function(t){if("function"==typeof n.mod)return n.mod(this)}).each(function(t){var e,n,i;return e=d3.select(this).selectAll("tspan"),e.size()?(i=[],e.each(function(){return i.push(a(this))}),i=d3.max(i)):i=a(this),n=o(this),s.push({height:n,text:t,width:i})}),c.remove(),n.parent||u.remove(),s}},{"../core/font/tester.coffee":70}],105:[function(t,e,n){var i,r;i=t("../core/font/tester.coffee"),r=function(t){var e,n,o,a,s,l,u,c,h,d,f,p,g,m;for(t instanceof Array||(t=t.split(",")),s=0,u=t.length;s<u;s++)o=t[s],o.trim();if(a=t.join(", "),e=r.complete,a in e)return e[a];for(f=function(t){return g.append("span").style("font-family",t).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")},p=function(t,e){var n,i,r;return n=f(t),i=n.node().offsetWidth,r=e.node().offsetWidth,n.remove(),i!==r},g=i("div"),h=f("monospace"),d=f("sans-serif"),l=0,c=t.length;l<c;l++)if(n=t[l],m=p(n+",monospace",h),m||(m=p(n+",sans-serif",d)),m){m=n;break}return m||(m="sans-serif"),h.remove(),d.remove(),e[a]=m,m},r.complete={},e.exports=r},{"../core/font/tester.coffee":70}],106:[function(t,e,n){var i=t("../array/sort.coffee"),r=t("../core/methods/attach.coffee"),o=t("../core/data/format.js"),a=t("../core/data/keys.coffee"),s=t("../core/data/load.coffee"),l=t("../core/fetch/data.js"),u=t("../client/ie.js"),c=t("../core/methods/reset.coffee"),h=t("../core/console/print.coffee");e.exports=function(){var e={types:{auto:t("./types/auto.js"),button:t("./types/button/button.coffee"),drop:t("./types/drop/drop.coffee"),toggle:t("./types/toggle.js")}};return e.self=function(t){var n=e.data.value instanceof Array&&e.data.value.length>e.data.large;if(e.draw.timing=e.draw.first||n||u?0:e.timing.ui,e.data.value instanceof Array){if(e.dev.value&&h.group('drawing "'+e.type.value+'"'),e.data.changed&&(e.data.cache={},a(e,"data"),o(e)),e.data.viz=l(e),e.data.sort.value&&(e.data.changed||e.order.changed||e.order.sort.changed)&&i(e.data.viz,e.order.value||e.text.value,e.order.sort.value,e.color.value,e),e.focus.value===!1&&["auto","button"].indexOf(e.type.value)<0){var r=e.data.element.value;if(r&&"select"===r.node().tagName.toLowerCase()){var d=r.property("selectedIndex");d=d<0?0:d;var f=r.selectAll("option")[0][d],p=f.getAttribute("data-"+e.id.value)||f.getAttribute(e.id.value);p&&(e.focus.value=p)}e.focus.value===!1&&e.data.viz.length&&(e.focus.value=e.data.viz[0][e.id.value]),e.dev.value&&e.focus.value!==!1&&h.log('"value" set to "'+e.focus.value+'"')}var g=function(t,n){n="number"!=typeof n?1===e.id.nesting.length?0:e.id.nesting.length-1:n;var i=e.id.nesting[n];return n>0&&(!(i in t)||t[i]instanceof Array)?g(t,n-1):i};if(e.data.changed){"auto"===e.search.value?e.data.viz.length>10?(e.search.enabled=!0,e.dev.value&&h.log("Search enabled.")):(e.search.enabled=!1,e.dev.value&&h.log("Search disabled.")):e.search.enabled=e.search.value;var m=e.data.element.value?e.data.element.value.node().tagName.toLowerCase():"";if(e.data.element.value&&"select"===m){var v=[];for(var y in e.data.nested.all)v=v.concat(e.data.nested.all[y]);options=e.data.element.value.selectAll("option").data(v,function(t){var e=!!t&&g(t);return!!(t&&e in t)&&t[e]}),options.exit().remove(),options.enter().append("option"),options.each(function(t){var n=g(t),i=n===e.id.value?e.text.value||e.id.value:e.text.nesting!==!0&&n in e.text.nesting?e.text.nesting[n]:n;for(var r in t)"object"!=typeof t[r]&&(r===i&&d3.select(this).html(t[r]),["alt","value"].indexOf(r)>=0?d3.select(this).attr(r,t[r]):d3.select(this).attr("data-"+r,t[r]));t[n]===e.focus.value?this.selected=!0:this.selected=!1})}}else if(e.focus.changed&&e.data.element.value){var b=e.data.element.value.node().tagName.toLowerCase();if("select"===b)e.data.element.value.selectAll("option").each(function(t){t[g(t)]===e.focus.value?this.selected=!0:this.selected=!1});else{var b=e.data.element.value.attr("type").toLowerCase();"radio"===b&&e.data.element.value.each(function(t){this.value===e.focus.value?this.checked=!0:this.checked=!1})}}if("auto"!==e.type.value){if(!e.container.ui){e.container.ui=e.container.value.selectAll("div#d3plus_"+e.type.value+"_"+e.container.id).data(["container"]);var w=e.data.element.value?e.data.element.value[0][0]:null;if(w)if(w.id)w="#"+w.id;else{var x=w.getAttribute(e.id.value)?e.id.value:"data-"+e.id.value;w=w.getAttribute(x)?"["+x+"="+w.getAttribute(x)+"]":null}e.container.ui.enter().insert("div",w).attr("id","d3plus_"+e.type.value+"_"+e.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}e.container.ui.style("display",e.ui.display.value),e.container.ui.transition().duration(e.draw.timing).style("margin",e.ui.margin.css);var _=e.container.ui.selectAll("div.d3plus_title").data(e.title.value?[e.title.value]:[]);_.enter().insert("div","#d3plus_"+e.type.value+"_"+e.container.id).attr("class","d3plus_title").style("display","inline-block"),_.style("color",e.font.color).style("font-family",e.font.family.value).style("font-size",e.font.size+"px").style("font-weight",e.font.weight).style("padding",e.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",e.ui.border+"px").text(String).each(function(t){e.margin.left=this.offsetWidth})}if(e.data.value.length){var k=e.format.locale.value.visualization[e.type.value];e.dev.value&&h.time("drawing "+k),e.types[e.type.value](e),e.dev.value&&h.timeEnd("drawing "+k)}else!e.data.url||e.data.loaded&&!e.data.stream||s(e,"data",e.self.draw);e.dev.value&&h.timeEnd("total draw time"),c(e)}},r(e,{active:t("./methods/active.coffee"),alt:t("./methods/alt.coffee"),color:t("./methods/color.coffee"),config:t("./methods/config.coffee"),container:t("./methods/container.coffee"),data:t("./methods/data.js"),depth:t("./methods/depth.coffee"),dev:t("./methods/dev.coffee"),draw:t("./methods/draw.js"),focus:t("./methods/focus.coffee"),font:t("./methods/font.coffee"),format:t("./methods/format.coffee"),height:t("./methods/height.coffee"),history:t("./methods/history.coffee"),hover:t("./methods/hover.coffee"),icon:t("./methods/icon.coffee"),id:t("./methods/id.coffee"),keywords:t("./methods/keywords.coffee"),margin:t("./methods/margin.coffee"),open:t("./methods/open.coffee"),order:t("./methods/order.coffee"),remove:t("./methods/remove.coffee"),search:t("./methods/search.coffee"),select:t("./methods/select.coffee"),selectAll:t("./methods/selectAll.coffee"),text:t("./methods/text.coffee"),timing:t("./methods/timing.coffee"),title:t("./methods/title.coffee"),type:t("./methods/type.coffee"),ui:t("./methods/ui.coffee"),width:t("./methods/width.coffee")}),e.self}},{"../array/sort.coffee":36,"../client/ie.js":39,"../core/console/print.coffee":54,"../core/data/format.js":58,"../core/data/keys.coffee":60,"../core/data/load.coffee":61,"../core/fetch/data.js":66,"../core/methods/attach.coffee":82,"../core/methods/reset.coffee":95,"./methods/active.coffee":107,"./methods/alt.coffee":108,"./methods/color.coffee":109,"./methods/config.coffee":110,"./methods/container.coffee":111,"./methods/data.js":112,"./methods/depth.coffee":113,"./methods/dev.coffee":114,"./methods/draw.js":115,"./methods/focus.coffee":116,"./methods/font.coffee":117,"./methods/format.coffee":118,"./methods/height.coffee":119,"./methods/history.coffee":120,"./methods/hover.coffee":121,"./methods/icon.coffee":122,"./methods/id.coffee":123,"./methods/keywords.coffee":124,"./methods/margin.coffee":125,"./methods/open.coffee":126,"./methods/order.coffee":127,"./methods/remove.coffee":128,"./methods/search.coffee":129,"./methods/select.coffee":130,"./methods/selectAll.coffee":131,"./methods/text.coffee":132,"./methods/timing.coffee":133,"./methods/title.coffee":134,"./methods/type.coffee":135,"./methods/ui.coffee":136,"./methods/width.coffee":137,"./types/auto.js":138,"./types/button/button.coffee":139,"./types/drop/drop.coffee":144,"./types/toggle.js":161}],107:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[!1,Array,Function,Number,String],value:!1}},{"../../core/methods/filter.coffee":83}],108:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[!1,Array,Function,Object,String],mute:i(!0),solo:i(!0),value:"alt"}},{"../../core/methods/filter.coffee":83}],109:[function(t,e,n){e.exports={accepted:[String],value:"color"}},{}],110:[function(t,e,n){e.exports={accepted:[Object],objectAccess:!1,process:function(t,e){var n,i;for(n in t)i=t[n],n in e.self&&e.self[n](i);return t},value:{}}},{}],111:[function(t,e,n){var i;i=t("../../util/d3selection.coffee"),e.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(t){return t===!1?d3.select("body"):i(t)?t:t instanceof Array?d3.select(t[0][0]):(this.selector=t,d3.select(t))},value:d3.select("body")}},{"../../util/d3selection.coffee":211}],112:[function(t,e,n){var i=t("../../util/d3selection.coffee"),r=t("../../core/methods/process/data.coffee");e.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(t,e){var n=!1;return i(t)?n=t:"string"!=typeof t||d3.select(t).empty()||(n=d3.select(t)),n&&e.self.container(d3.select(n.node().parentNode)),n},value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(t,e){return"default"===e.container.id&&t.length&&e.self.container({id:"default"+t.length}),r(t,e,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.coffee":89,"../../util/d3selection.coffee":211}],113:[function(t,e,n){e.exports={accepted:[Number],value:0}},{}],114:[function(t,e,n){e.exports={accepted:[Boolean],value:!1}},{}],115:[function(t,e,n){var i=t("../../util/d3selection.coffee"),r=t("../../core/parse/hideElement.js"),o=t("../../core/parse/element.js"),a=t("../../core/console/print.coffee"),s=t("../../string/format.js");e.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(t,e){if(this.initialized===!1)return this.initialized=!0,t;if(!e.data.value||e.data.value instanceof Array&&!i(e.data.value)?e.data.element.value&&e.data.element.value.call(r):e.data.value=o(e),void 0===t&&"function"==typeof this.value&&(t=this.value),e.container.value===!1){var n=e.format.locale.value.dev.setContainer;a.warning(n,"container")}else if(e.container.value.empty()){var n=e.format.locale.value.dev.noContainer,l=e.container.selector||"";a.warning(s(n,'"'+l+'"'),"container")}else e.dev.value&&a.time("total draw time"),e.container.value.call(e.self);if("function"==typeof t&&e.history.chain.length){var u={};e.history.chain.forEach(function(t){var e=t.method;delete t.method,u[e]=t}),t(u),e.history.chain=[]}return t},update:!0,value:void 0}},{"../../core/console/print.coffee":54,"../../core/parse/element.js":98,"../../core/parse/hideElement.js":99,"../../string/format.js":176,"../../util/d3selection.coffee":211}],116:[function(t,e,n){e.exports={accepted:[!1,Number,String],deprecates:"highlight",process:function(t,e){var n,i,r,o,a,s,l,u,c,h;if(i=e.data.element.value,i&&["string","number"].indexOf(typeof t)>=0)if(r=i.node().tagName.toLowerCase(),o=i.attr("type"),"select"===r)for(h=i.selectAll("option"),a=s=0,u=h.length;s<u;a=++s)n=h[a],n&&n[e.id.value]===t&&(i.node().selectedIndex=a);else if("input"===r&&"radio"===o)for(l=0,c=i.length;l<c;l++)n=i[l],this.checked=n&&n[e.id.value]===t;return t},value:!1}},{}],117:[function(t,e,n){var i,r,o,a;o=t("../../core/methods/font/family.coffee"),i=t("../../core/methods/font/align.coffee"),r=t("../../core/methods/font/decoration.coffee"),a=t("../../core/methods/font/transform.coffee"),e.exports={align:i(),color:"#444444",decoration:r(),family:o(),secondary:{align:i(),color:"#444444",decoration:r(),family:o(),size:12,spacing:0,transform:a(),weight:200},size:12,spacing:0,transform:a(),weight:200}},{"../../core/methods/font/align.coffee":84,"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],118:[function(t,e,n){var i,r,o,a;i=t("../../number/format.coffee"),r=t("../../core/locale/locale.coffee"),o=t("../../object/merge.coffee"),a=t("../../string/title.coffee"),e.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(r)},process:function(t){var e,n;return e="en_US",n=r[e],t!==e&&(n=o(n,r[t])),this.language=t,n},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(t,e){if("string"==typeof t)e.self.format({locale:t});else if("function"==typeof t)return t;return this.value},text:{accepted:[!1,Function],value:!1},value:function(t,e){var n,r,o;return e||(e={}),o=e.vars||{},o.time&&o.time.value&&e.key===o.time.value?(r=t.constructor===Date?t:new Date(t),o.data.time.format(r)):"number"==typeof t?(n=this.number.value||i)(t,e):"string"==typeof t?(n=this.text.value||a)(t,e):JSON.stringify(t)}}},{"../../core/locale/locale.coffee":81,"../../number/format.coffee":173,"../../object/merge.coffee":174,"../../string/title.coffee":179}],119:[function(t,e,n){e.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}},{}],120:[function(t,e,n){e.exports={back:function(){if(this.states.length)return this.states.pop()()},chain:[],reset:function(){var t;for(t=[];this.states.length;)t.push(this.states.pop()());return t},states:[]}},{}],121:[function(t,e,n){e.exports={accepted:[Boolean,Number,String],value:!1}},{}],122:[function(t,e,n){var i;i=t("../../core/methods/process/icon.coffee"),e.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:i,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:i,rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:i,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:i,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:i,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}},{"../../core/methods/process/icon.coffee":91}],123:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[Array,String],dataFilter:!0,mute:i(!0),nesting:["value"],solo:i(!0),value:"value"}},{"../../core/methods/filter.coffee":83}],124:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[!1,Array,Function,Object,String],mute:i(!0),solo:i(!0),value:"keywords"}},{"../../core/methods/filter.coffee":83}],125:[function(t,e,n){var i;i=t("../../core/methods/process/margin.coffee"),e.exports={accepted:[Number,Object,String],process:function(t){var e;return void 0===t&&(t=this.value),e=t,i(t,this),e},value:0}},{"../../core/methods/process/margin.coffee":92}],126:[function(t,e,n){e.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}},{}],127:[function(t,e,n){e.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],deprecates:["sort"],value:"asc"},value:!1}},{}],128:[function(t,e,n){e.exports={accepted:[void 0,Function],process:function(t,e){this.initialized&&e.container.ui.remove(),delete e.container.ui},value:void 0}},{}],129:[function(t,e,n){e.exports={accepted:["auto",Boolean],process:function(t){return"Boolean"==typeof t&&(this.enabled=t),t},term:"",value:"auto"}},{}],130:[function(t,e,n){e.exports={accepted:[String],chainable:!1,process:function(t,e){var n;return n=e.container.value,n&&t?n.select(t):t},value:void 0}},{}],131:[function(t,e,n){e.exports={accepted:[String],chainable:!1,process:function(t,e){var n;return n=e.container.value,n&&t?n.selectAll(t):t},value:void 0}},{}],132:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[!1,String],nesting:!0,mute:i(!0),solo:i(!0),secondary:{accepted:[!1,String],nesting:!0,value:!1},value:!1}},{"../../core/methods/filter.coffee":83}],133:[function(t,e,n){e.exports={mouseevents:60,ui:200}},{}],134:[function(t,e,n){var i,r,o,a;i=t("../../core/methods/font/decoration.coffee"),r=t("../../core/methods/font/family.coffee"),a=t("../../core/methods/font/transform.coffee"),o=t("../../string/strip.js"),e.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:i(),family:r(),size:16,transform:a(),weight:400},link:!1,process:function(t,e){var n;return 0===e.container.id.indexOf("default")&&t&&(n=o(t).toLowerCase(),e.self.container({id:n})),t},value:!1}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88,"../../string/strip.js":178}],135:[function(t,e,n){e.exports={accepted:function(t){return d3.keys(t.types)},value:"auto"}},{}],136:[function(t,e,n){var i,r,o,a,s;o=t("../../core/methods/font/family.coffee"),i=t("../../core/methods/font/align.coffee"),r=t("../../core/methods/font/decoration.coffee"),a=t("../../core/methods/process/margin.coffee"),s=t("../../core/methods/font/transform.coffee"),e.exports={align:i("center"),border:1,color:{primary:{process:function(t,e){var n;return n=this.value,e.ui.color.secondary.value||(e.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),t},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:i("center"),color:"#444",decoration:r(),family:o(),size:11,transform:s(),weight:200},margin:{process:function(t){var e;return void 0===t&&(t=this.value),e=t,a(t,this),e},value:5},padding:{process:function(t){var e;return void 0===t&&(t=this.value),e=t,a(t,this),e},value:5}}},{"../../core/methods/font/align.coffee":84,"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88,"../../core/methods/process/margin.coffee":92}],137:[function(t,e,n){e.exports={accepted:[!1,Number],secondary:!1,value:!1}},{}],138:[function(t,e,n){e.exports=function(t){var e=t.data.value.length;1===e?t.self.type("button").draw():e<5?t.self.type("toggle").draw():t.self.type("drop").draw()}},{}],139:[function(t,e,n){e.exports=function(e){var n,i,r,o,a,s,l,u;return s=t("../../../core/console/print.coffee"),r=t("./functions/color.coffee"),o=t("./functions/icons.js"),a=t("./functions/mouseevents.coffee"),l=t("./functions/style.js"),n=e.container.ui.selectAll("div.d3plus_node").data(e.data.viz,function(t){return t[e.id.value]}),e.dev.value&&s.time("enter"),n.enter().append("div").attr("class","d3plus_node").call(r,e).call(l,e).call(o,e).call(a,e),e.dev.value&&s.timeEnd("enter"),e.draw.update||e.draw.timing?(e.dev.value&&s.time("ordering"),n.order(),e.dev.value&&s.timeEnd("ordering"),u=n):(i=[e.focus.previous,e.focus.value,e.hover.previous,e.hover.value].filter(function(t){return t}),u=n.filter(function(t){return i.indexOf(t[e.id.value])>=0})),e.dev.value&&s.time("update"),u.classed("d3plus_button_active",function(t){return e.focus.value===t[e.id.value]}),e.draw.timing?u.transition().duration(e.draw.timing).call(r,e).call(l,e):u.call(r,e).call(l,e),u.call(o,e).call(a,e),e.dev.value&&s.timeEnd("update"),n.exit().remove()}},{"../../../core/console/print.coffee":54,"./functions/color.coffee":140,"./functions/icons.js":141,"./functions/mouseevents.coffee":142,"./functions/style.js":143}],140:[function(t,e,n){e.exports=function(e,n){var i,r,o;return i=t("../../../../color/legible.coffee"),r=t("../../../../color/lighter.coffee"),o=t("../../../../color/text.coffee"),e.style("background-color",function(t){var e;return e=n.focus.value===t[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===t[n.id.value]&&(e=d3.rgb(e).darker(.15).toString()),e}).style("color",function(t){var e,r,a,s;return s=n.focus.value===t[n.id.value]?.75:1,a=t[n.icon.value]&&n.data.viz.length<n.data.large,!a&&t[n.color.value]?r=i(t[n.color.value]):(e=n.focus.value===t[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===t[n.id.value]&&(e=d3.rgb(e).darker(.15).toString()),r=o(e)),r=d3.rgb(r),"rgba("+r.r+","+r.g+","+r.b+","+s+")"}).style("border-color",n.ui.color.secondary.value)}},{"../../../../color/legible.coffee":46,"../../../../color/lighter.coffee":47,"../../../../color/text.coffee":52}],141:[function(t,e,n){var i=t("../../../../client/prefix.coffee"),r=t("../../../../client/rtl.coffee");e.exports=function(t,e){var n="right"===e.font.align.value&&!r||r&&"right"===e.font.align.value;t.each(function(t,o){var a=["label"];t[e.icon.value]&&e.data.viz.length<=e.data.large&&a.push("icon");var s=e.icon.button.value;t[e.id.value]===e.focus.value&&e.icon.select.value?(s=e.icon.select.value,a.push("selected")):s&&t.d3plus.icon!==!1&&a.push("selected");var l=0,u=d3.select(this).selectAll("div.d3plus_button_element").data(a,function(t){return t});u.enter().append("div").style("display",function(t){return"label"===t?"block":"absolute"}),u.order().attr("class",function(t){var e="";return"selected"===t&&0===s.indexOf("fa-")&&(e=" fa "+s),"d3plus_button_element d3plus_button_"+t+e}).html(function(n){if("label"===n){var i=e.text.value&&e.text.value in t&&!(t[e.text.value]instanceof Array)?e.text.value:e.id.value;return e.format.value(t[i])}return"selected"===n&&s.indexOf("fa-")<0?s:""}).style("background-image",function(n){return"icon"===n?"url('"+t[e.icon.value]+"')":"none"}).style("background-color",function(n){return"icon"===n&&"knockout"===t.style?t[e.color.value]||e.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(t){return"label"===t?e.font.align.value:"center"}).style("position",function(t){return"label"==t?"static":"absolute"}).style("width",function(t){return"label"===t?"auto":(l=e.height.value?e.height.value-(e.ui.padding.top+e.ui.padding.bottom)-2*e.ui.border:e.font.size+e.ui.border,l+"px")}).style("height",function(t){return"icon"===t?l+"px":"auto"}).style("margin-top",function(t){if("label"===t)return"0px";if(this.offsetHeight||this.getBoundingClientRect().height)var n=this.offsetHeight||this.getBoundingClientRect().height;else if("selected"===t)var n=e.font.size;else var n=l;return-n/2+"px"}).style("top",function(t){return"label"===t?"auto":"50%"}).style("left",function(t){return"icon"===t&&!n||"selected"===t&&n?e.ui.padding.left+"px":"auto"}).style("right",function(t){return"icon"===t&&n||"selected"===t&&!n?e.ui.padding.right+"px":"auto"}).style(i()+"transition",function(t){return"selected"===t?e.draw.timing/1e3+"s":"none"}).style(i()+"transform",function(t){var n="selected"===t?e.icon.select.rotate:"none";return"string"==typeof n?n:"rotate("+n+"deg)"}).style("opacity",function(t){return"selected"===t?e.icon.select.opacity:1}),u.exit().remove();var c=d3.select(this).selectAll(".d3plus_button_label");if(l>0){var h=e.ui.padding;h=3===a.length?h.top+"px "+(2*h.right+l)+"px "+h.bottom+"px "+(2*h.left+l)+"px":a.indexOf("icon")>=0&&!r||a.indexOf("selected")>=0&&r?h.top+"px "+h.right+"px "+h.bottom+"px "+(2*h.left+l)+"px":h.top+"px "+(2*h.right+l)+"px "+h.bottom+"px "+h.left+"px",c.style("padding",h)}else c.style("padding",e.ui.padding.css);if("number"==typeof e.width.value){var d=e.width.value;d-=parseFloat(c.style("padding-left"),10),d-=parseFloat(c.style("padding-right"),10),d-=2*e.ui.border,d+="px"}else var d="auto";c.style("width",d)})}},{"../../../../client/prefix.coffee":41,"../../../../client/rtl.coffee":42}],142:[function(t,e,n){e.exports=function(e,n,i){var r,o;return i=t("./color.coffee"),r=t("../../../../client/pointer.coffee"),o=t("../../../../client/ie.js"),e.on(r.over,function(t,e){return n.self.hover(t[n.id.value]),o||!n.draw.timing?d3.select(this).style("cursor","pointer").call(i,n):d3.select(this).style("cursor","pointer").transition().duration(n.timing.mouseevents).call(i,n)}).on(r.out,function(t){return n.self.hover(!1),o||!n.draw.timing?d3.select(this).style("cursor","auto").call(i,n):d3.select(this).style("cursor","auto").transition().duration(n.timing.mouseevents).call(i,n)}).on(r.click,function(t){return n.focus.value!==!1?n.self.focus(t[n.id.value]).draw():n.focus.callback?n.focus.callback(t,n.self):void 0})}},{"../../../../client/ie.js":39,"../../../../client/pointer.coffee":40,"./color.coffee":140}],143:[function(t,e,n){e.exports=function(t,e){t.style("position","relative").style("margin",e.ui.margin.css).style("display",e.ui.display.value).style("border-style","solid").style("border-width",e.ui.border+"px").style("font-family",e.font.family.value).style("font-size",e.font.size+"px").style("font-weight",e.font.weight).style("letter-spacing",e.font.spacing+"px")}},{}],144:[function(t,e,n){e.exports=function(e){var n,i,r,o,a,s,l,u,c,h,d;return r=t("./functions/element.coffee"),
o=t("./functions/keyboard.coffee"),d=t("./functions/window.js"),h=t("./functions/width.js"),n=t("./functions/button.js"),l=t("./functions/selector.js"),u=t("./functions/title.js"),s=t("./functions/search.js"),a=t("./functions/list.js"),i=t("./functions/data.js"),c=t("./functions/update.js"),e.margin.top=0,e.margin.title=0,r(e),o(e),d(e),h(e),n(e),l(e),u(e),s(e),a(e),i(e),c(e)}},{"./functions/button.js":147,"./functions/data.js":148,"./functions/element.coffee":149,"./functions/keyboard.coffee":152,"./functions/list.js":153,"./functions/search.js":155,"./functions/selector.js":156,"./functions/title.js":157,"./functions/update.js":158,"./functions/width.js":159,"./functions/window.js":160}],145:[function(t,e,n){e.exports=function(t,e,n){var i=[],n=n||t.active.value;if(n instanceof Array)for(var r=0;r<n.length;r++)i.push(this(t,e,n[r]));else{var o=typeof n;"number"===o?i.push(t.depth.value===n):"function"===o?i.push(n(e)):i.push(e===n)}return i.indexOf(!0)>=0}},{}],146:[function(t,e,n){var i=t("../../../../core/console/print.coffee");e.exports=function(t){t.dev.value&&i.time("rotating arrow");var e="&#x276f;"===t.icon.drop.value?90:0;if(t.open.value!=t.open.flipped.value)var n=180+e;else var n=e;t.container.button.icon({select:{opacity:t.open.value?.5:1,rotate:n}}).draw(),t.dev.value&&i.timeEnd("rotating arrow")}},{"../../../../core/console/print.coffee":54}],147:[function(t,e,n){var i=t("../../../../util/copy.coffee"),r=t("../../../../client/pointer.coffee"),o=t("../../../form.js"),a=t("../../../../core/console/print.coffee");e.exports=function(t){if("button"in t.container||(t.dev.value&&a.time("creating main button"),t.container.button=o().container(t.container.ui).type("button").ui({margin:0}),t.dev.value&&a.timeEnd("creating main button")),t.focus.changed||t.data.changed||t.depth.changed){var e=t.depth.value,n=i(t.data.value.filter(function(n){for(var i=!1,r=0;r<t.id.nesting.length;r++){var o=t.id.nesting[r];if(i=o in n&&n[o]===t.focus.value){e=r;break}}return i})[0]);n||(n=t.container.button.data()[0]||t.data.viz[0]),t.container.button.data([n]).id(t.id.nesting).depth(e)}var s=t.hover.value===!0&&t.focus.value;t.container.button.draw({update:t.draw.update}).focus("").font(t.font).format(t.format).hover(s).icon({button:t.icon.drop.value,select:t.icon.drop.value,value:t.icon.value}).text(t.text.value).timing({ui:t.draw.timing}).ui({border:t.ui.border,color:t.ui.color,padding:t.ui.padding.css}).width(t.width.value).draw();var l=t.container.button.container(Object).ui;t.margin.top+=l.node().offsetHeight||l.node().getBoundingClientRect().height,l.on(r.click,function(){t.self.open(!t.open.value).draw()})}},{"../../../../client/pointer.coffee":40,"../../../../core/console/print.coffee":54,"../../../../util/copy.coffee":210,"../../../form.js":106}],148:[function(t,e,n){var i=t("../../../../string/format.js"),r=t("../../../../string/strip.js");e.exports=function(t){if(t.data.url&&!t.data.loaded){var e={};e[t.text.value||t.id.value]=t.format.value(t.format.locale.value.ui.loading),t.data.filtered=[e],t.data.changed="loading"!==t.data.lastFilter,t.data.lastFilter="loading"}else if(t.open.value)if(t.search.term){var n=r(t.search.term).split("_"),o=[t.id.value,t.text.value,t.alt.value,t.keywords.value];o=o.filter(function(t){return t}),n=n.filter(function(t){return""!==t});var a=[],s=[],l=[],u=[];if(t.id.nesting.forEach(function(e){u=u.concat(t.data.nested.all[e])}),u.forEach(function(e){var i=!1;o.forEach(function(o){if(!i&&o in e&&"string"==typeof e[o]){var u=e[o].toLowerCase();if([t.text.value,t.id.value].indexOf(o)>=0&&0===u.indexOf(t.search.term))a.push(e),i=!0;else if(u.indexOf(t.search.term)>=0)s.push(e),i=!0;else{var c=r(u).split("_");for(var h in c){if(i)break;for(var d in n)if(0===c[h].indexOf(n[d])){l.push(e),i=!0;break}}}}})}),t.data.filtered=d3.merge([a,s,l]),t.data.filtered.forEach(function(t,e){t.d3plus_order=e}),t.data.changed=!0,t.data.lastFilter="search",0===t.data.filtered.length){var c={},h=t.format.value(t.format.locale.value.ui.noResults);c[t.text.value||t.id.value]=i(h,'"'+t.search.term+'"'),t.data.filtered=[c]}}else t.data.filtered=t.data.viz,t.data.changed="viz"!==t.data.lastFilter,t.data.lastFilter="viz",t.id.nesting.length>1&&t.depth.value<t.id.nesting.length-1&&(t.data.filtered=t.data.filtered.filter(function(e){return"endPoint"in e.d3plus&&e.d3plus.endPoint===t.depth.value&&(e.d3plus.icon=!1),!0}),t.data.changed="depth"!==t.data.lastFilter,t.data.lastFilter="depth");else t.data.filtered=[]}},{"../../../../string/format.js":176,"../../../../string/strip.js":178}],149:[function(t,e,n){e.exports=function(t){if(t.data.element.value)return t.data.element.value.on("focus."+t.container.id,function(){return t.self.hover(!0).draw()}),t.data.element.value.on("blur."+t.container.id,function(){var e;if(e=!t.search.enabled||d3.event.relatedTarget!==t.container.value.select("input").node())return t.self.open(!1).hover(!1).draw()}),t.data.element.value.on("change."+t.container.id,function(){return t.self.focus(this.value).draw()}),t.data.element.value.on("keydown.cancel_"+t.container.id,function(){if(9!==d3.event.keyCode)return d3.event.preventDefault()})}},{}],150:[function(t,e,n){e.exports=function(t){var e=t.height.secondary,n=t.container.button.container().node().getBoundingClientRect(),i=window.innerHeight-n.bottom-2*t.ui.border-t.ui.margin.top-t.ui.margin.bottom-t.ui.padding.top-t.ui.padding.bottom;i<3*n.height&&(i=n.top-10,t.self.open({flipped:!0})),"number"!=typeof e&&(e=i),e>t.height.max&&(e=t.height.max),t.self.height({secondary:e})}},{}],151:[function(t,e,n){var i,r,o,a;i=t("./active.js"),r=t("../../../../util/copy.coffee"),o=t("../../../form.js"),a=t("../../../../core/console/print.coffee"),e.exports=function(t){var e,n,s;t.open.value&&(t.dev.value&&a.time("updating list items"),"items"in t.container||(t.container.items=o().container(t.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),n=t.draw.timing?t.data.large:1,s=r(t.order),s.value=t.search.term.length?"d3plus_order":t.order.value,e=t.depth.value===t.id.nesting.length-1,(t.focus.changed||t.container.items.focus()===!1)&&t.container.items.focus(t.focus.value,function(e){var n,r,o,a;r=t.data.filtered.filter(function(n){return n[t.id.value]===e})[0],t.depth.value<t.id.nesting.length-1&&t.id.nesting[t.depth.value+1]in r?(o=t.depth.value,a=t.id.solo.value,t.history.states.push(function(){return t.self.depth(o).id({solo:a}).draw()}),t.self.depth(t.depth.value+1).id({solo:[e]}).draw()):(t.depth.changed||t.self.open(!1),n=e!==t.focus.value,n&&t.active.value&&(n=i(t,e)),n&&t.self.focus(e).draw())}),t.container.items.active(t.active.value).data({large:n,sort:t.data.sort.value,value:t.data.filtered}).draw({update:t.draw.update}).font(t.font.secondary).format(t.format).hover(t.hover.value).id(t.id.value).icon({button:!e&&t.icon.next,select:!!e&&t.icon.select,value:t.icon.value}).order(s).text(t.text.secondary.value||t.text.value).timing({ui:t.draw.timing}).ui({color:{primary:1===t.id.nesting.length?t.ui.color.primary.value:t.ui.color.secondary.value,secondary:t.ui.color.secondary.value},padding:t.ui.padding.css}).draw(),t.dev.value&&a.timeEnd("updating list items"))}},{"../../../../core/console/print.coffee":54,"../../../../util/copy.coffee":210,"../../../form.js":106,"./active.js":145}],152:[function(t,e,n){e.exports=function(t){return d3.select(window).on("keydown."+t.container.id,function(){var e,n,i,r,o,a,s,l,u,c,h,d,f;if(u=d3.event.keyCode,t.open.value||t.hover.value===!0){for(h=t.hover.value===!0?"focus":"hover",s=!1,d=t.data.filtered,a=l=0,c=d.length;l<c;a=++l)if(e=d[a],e[t.id.value]===t[h].value){s=a;break}if(9===u&&t.open.value&&(!t.search.enabled||t.search.enabled&&!d3.event.shiftKey))return t.self.open(!1).hover(!1).draw();if([38,40].indexOf(u)>=0)return s===!1?s=0:38===u?t.open.value&&(s<=0?s=t.data.filtered.length-1:s-=1):40===u&&t.open.value&&(s>=t.data.filtered.length-1?s=0:s+=1),o="boolean"!=typeof t.hover.value?t.data.filtered[s][t.id.value]:t.focus.value,t.self.hover(o).open(!0).draw();if(13===u)return"boolean"!=typeof t.hover.value?(n=t.data.filtered.filter(function(e){return e[t.id.value]===t.hover.value})[0],i=t.depth.value,i<t.id.nesting.length-1&&t.id.nesting[i+1]in n?(f=t.id.solo.value,r=function(){return t.self.depth(i).id({solo:f}).draw()},t.history.states.push(r),t.self.depth(t.depth.value+1).id({solo:[t.hover.value]}).draw()):t.self.focus(t.hover.value).hover(!0).draw()):t.self.hover(t.focus.value).open(!0).draw();if(27===u){if(t.open.value)return t.self.open(!1).hover(!0).draw();if(t.hover.value===!0)return t.self.hover(!1).draw()}}})}},{}],153:[function(t,e,n){var i=t("../../../../core/console/print.coffee");e.exports=function(t){t.dev.value&&i.time("populating list"),t.container.list=t.container.selector.selectAll("div.d3plus_drop_list").data(["list"]),t.container.list.enter().append("div").attr("class","d3plus_drop_list").attr("id","d3plus_drop_list_"+t.container.id).style("overflow-y","auto").style("overflow-x","hidden"),t.dev.value&&i.timeEnd("populating list")}},{"../../../../core/console/print.coffee":54}],154:[function(t,e,n){var i=t("../../../../core/console/print.coffee");e.exports=function(t){if(t.open.value){t.dev.value&&i.time("calculating height");var e=!1;if("none"==t.container.selector.style("display"))var e=!0;e&&t.container.selector.style("display","block");var n=t.container.selector.style("height"),r=t.container.selector.property("scrollTop"),o=t.container.list.style("max-height"),a=t.container.list.property("scrollTop");t.container.selector.style("height","auto"),t.container.list.style("max-height","200000px"),t.container.listHeight=parseFloat(t.container.selector.style("height"),10),t.container.list.style("max-height",o).property("scrollTop",a),t.container.selector.style("height",n).property("scrollTop",r);var s=!1;if(t.container.listHeight>t.height.secondary&&(t.container.listHeight=t.height.secondary,s=!0),e&&t.container.selector.style("display","none"),t.dev.value&&i.timeEnd("calculating height"),s){t.dev.value&&i.time("calculating scroll position");var l=t.container.list.select("div").selectAll("div.d3plus_node"),u=l[0][0],c="boolean"!=typeof t.hover.value?t.hover.value:t.focus.value;l.each(function(e,n){e[t.id.value]===c&&(u=this)});var e=!1;"none"===t.container.selector.style("display")&&(e=!0,t.container.selector.style("display","block"));var h=u.offsetTop,d=u.offsetHeight||u.getBoundingClientRect().height,f=t.container.list.property("scrollTop");e&&t.container.selector.style("display","none"),e||t.data.changed||t.depth.changed?t.container.listScroll=h:(t.container.listScroll=f,h<f?t.container.listScroll=h:h+d>f+t.height.secondary-t.search.height&&(t.container.listScroll=h-(t.height.secondary-d-t.search.height))),t.dev.value&&i.timeEnd("calculating scroll position")}else t.container.listScroll=0}else t.container.listScroll=t.container.list.property("scrollTop"),t.container.listHeight=0}},{"../../../../core/console/print.coffee":54}],155:[function(t,e,n){var i=t("../../../../client/prefix.coffee"),r=t("../../../../core/console/print.coffee");e.exports=function(e){function n(t){t.style("padding",e.ui.padding.css).style("display","block").style("background-color",d3.rgb(e.ui.color.primary.value).darker(.15).toString())}function o(t){var n=e.width.secondary-2*e.ui.padding.left-2*e.ui.padding.right+2*e.ui.border;t.style("padding",e.ui.padding.left/2+e.ui.padding.right/2+"px").style("width",n+"px").style("border-width","0px").style("font-family",e.font.secondary.family.value).style("font-size",e.font.secondary.size+"px").style("font-weight",e.font.secondary.weight).style("text-align",e.font.secondary.align).style("outline","none").style(i()+"border-radius","0").attr("placeholder",e.format.value(e.format.locale.value.method.search))}e.dev.value&&r.time("creating search");var a=t("./data.js"),s=t("./items.coffee"),l=t("./update.js");e.container.search=e.container.selector.selectAll("div.d3plus_drop_search").data(e.search.enabled?["search"]:[]),e.draw.timing?(e.container.search.transition().duration(e.draw.timing).call(n),e.container.search.select("input").transition().duration(e.draw.timing).call(o)):(e.container.search.call(n),e.container.search.select("input").call(o)),e.container.search.enter().insert("div","#d3plus_drop_list_"+e.container.id).attr("class","d3plus_drop_search").attr("id","d3plus_drop_search_"+e.container.id).call(n).append("input").attr("id","d3plus_drop_input_"+e.container.id).style("-webkit-appearance","none").call(o),e.container.search.select("input").on("keyup."+e.container.id,function(t){var n=this.value;e.search.term!==n&&(e.search.term=n,a(e),s(e),l(e))}),e.container.search.exit().remove();var u=e.container.selector.style("display");e.container.selector.style("display","block"),e.search.height=e.search.enabled?e.container.search.node().offsetHeight||e.container.search.node().getBoundingClientRect().height:0,e.container.selector.style("display",u),e.search.enabled&&(e.margin.title+=e.search.height),e.dev.value&&r.timeEnd("creating search")}},{"../../../../client/prefix.coffee":41,"../../../../core/console/print.coffee":54,"./data.js":148,"./items.coffee":151,"./update.js":158}],156:[function(t,e,n){e.exports=function(t){t.container.selector=t.container.ui.selectAll("div.d3plus_drop_selector").data(["selector"]),t.container.selector.enter().append("div").attr("class","d3plus_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),t.container.selector.style("padding",t.ui.border+"px")}},{}],157:[function(t,e,n){var i=t("../../../../client/pointer.coffee"),r=t("../../../../color/lighter.coffee"),o=t("../../../../core/console/print.coffee"),a=t("../../../../color/text.coffee");e.exports=function(t){function e(e){e.style("padding",t.ui.padding.css).style("display","block").style("background-color",t.ui.color.secondary.value).style("font-family",t.font.secondary.family.value).style("font-size",t.font.secondary.size+"px").style("font-weight",t.font.secondary.weight).style("text-align",t.font.secondary.align).style("color",a(t.ui.color.secondary.value))}function n(e){if(!e.empty()){var n=0===t.icon.back.value.indexOf("fa-")?" fa "+t.icon.back.value:"";n="d3plus_drop_back"+n;var i=0===t.icon.back.value.indexOf("fa-")?"":t.icon.back.value;e.style("position","absolute").attr("class",n).style("top",t.ui.padding.top+t.font.secondary.size/2/2.5+"px").html(i)}}function s(e){var n=u?t.focus.value:t.format.locale.value.ui.back;e.text(t.format.value(n)).style("padding","0px "+(t.ui.padding.left+t.ui.padding.right)+"px")}if(t.open.value){t.dev.value&&o.time("creating title and back button");var l=1===t.id.solo.value.length&&t.depth.value>0,u=l,c=t.container.button.data(Object).viz[0];u=!0;for(var h=0;h<t.id.nesting.length;h++){var d=t.id.nesting[h];if(d in c&&c[d]===t.focus.value){u=!1;break}}t.container.title=t.container.selector.selectAll("div.d3plus_drop_title").data(l?["title"]:[]),t.draw.timing?(t.container.title.transition().duration(t.draw.timing).call(e),t.container.title.select("div.d3plus_drop_title_text").transition().duration(t.draw.timing).call(s)):(t.container.title.call(e),t.container.title.select("div.d3plus_drop_title_text").call(s)),t.container.title.select("span.d3plus_drop_back").call(n);var f=t.container.title.enter().insert("div","#d3plus_drop_list_"+t.container.id).attr("class","d3plus_drop_title").attr("id","d3plus_drop_title_"+t.container.id).call(e);f.append("span").attr("id","d3plus_drop_back_"+t.container.id).attr("class","d3plus_drop_back").call(n),f.append("div").attr("id","d3plus_drop_title_text_"+t.container.id).attr("class","d3plus_drop_title_text").call(s),t.container.title.on(i.over,function(e,n){var i=r(t.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(t.timing.mouseevents).style("background-color",i).style("color",a(i))}).on(i.out,function(e){var n=t.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(t.timing.mouseevents).style("background-color",n).style("color",a(n))}).on(i.click,function(e){t.history.back()}),t.container.title.exit().remove(),l&&(t.margin.title+=t.container.title.node().offsetHeight||t.container.title.node().getBoundingClientRect().height),t.dev.value&&o.timeEnd("creating title and back button")}}},{"../../../../client/pointer.coffee":40,"../../../../color/lighter.coffee":47,"../../../../color/text.coffee":52,"../../../../core/console/print.coffee":54}],158:[function(t,e,n){var i=t("./items.coffee"),r=t("./height.js"),o=t("../../../../core/console/print.coffee"),a=t("./scroll.js"),s=t("./arrow.js");e.exports=function(t){function e(e){var n=t.open.flipped.value;e.style("top",function(){return n?"auto":t.margin.top-t.ui.border+"px"}).style("bottom",function(){return n?t.margin.top+t.ui.border+"px":"auto"})}function n(n){n.style("left",function(){return"left"===t.font.align.value?t.margin.left+"px":"center"===t.font.align.value?t.margin.left-(t.width.secondary-t.width.value)/2+"px":"auto"}).style("right",function(){return"right"===t.font.align.value?"0px":"auto"}).style("height",t.container.listHeight+"px").style("padding",t.ui.border+"px").style("background-color",t.ui.color.secondary.value).style("z-index",function(){return t.open.value?"9999":"-1"}).style("width",t.width.secondary-2*t.ui.border+"px").style("opacity",t.open.value?1:0).call(e)}function l(n){n.style("display",t.open.value?null:"none").call(e),t.search.enabled&&t.open.value&&t.container.selector.select("div.d3plus_drop_search input").node().focus()}function u(t){return function(){var e=d3.interpolateNumber(this.scrollTop,t);return function(t){this.scrollTop=e(t)}}}t.draw.timing?t.container.ui.transition().duration(t.draw.timing).each("start",function(){t.open.value&&d3.select(this).style("z-index",9999)}).style("margin",t.ui.margin.css).each("end",function(){t.open.value||d3.select(this).style("z-index","auto")}):t.container.ui.style("margin",t.ui.margin.css).style("z-index",function(){return t.open.value?9999:"auto"}),i(t),r(t),a(t),s(t),t.dev.value&&o.time("drawing list");var c=t.open.value?t.height.secondary-t.margin.title:0;t.draw.timing?(t.container.selector.transition().duration(t.draw.timing).each("start",function(){d3.select(this).style("display",t.open.value?"block":null)}).call(n).each("end",function(){d3.select(this).transition().duration(t.draw.timing).call(l)}),t.container.list.transition().duration(t.draw.timing).style("width",t.width.secondary-2*t.ui.border+"px").style("max-height",c+"px").tween("scroll",u(t.container.listScroll))):(t.container.selector.call(n).call(l),t.container.list.style("width",t.width.secondary-2*t.ui.border+"px").style("max-height",c+"px").property("scrollTop",t.container.listScroll)),t.dev.value&&o.timeEnd("drawing list")}},{"../../../../core/console/print.coffee":54,"./arrow.js":146,"./height.js":150,"./items.coffee":151,"./scroll.js":154}],159:[function(t,e,n){var i=t("../../../../util/copy.coffee"),r=t("../../../../core/font/tester.coffee"),o=t("../../../form.js"),a=t("../../../../core/console/print.coffee"),s=t("../../../../object/validate.coffee");e.exports=function(t){function e(e){var i="primary"===e?"value":e,s="value"===i?t.icon.drop.value:t.icon.select.value||t.icon.drop.value,l="value"===i?t.text.value:t.text.secondary.value||t.text.value,u="value"===i?t.font:t.font.secondary;t.dev.value&&a.time("calculating "+e+" width");var c=o().container(r()).data({large:9999,value:n}).draw({update:!1}).font(u).format(t.format).icon({button:s,value:t.icon.value}).id(t.id.value).timing({ui:0}).text(l||t.id.value).type("button").ui({border:"primary"===e?t.ui.border:0,display:"inline-block",margin:0,padding:t.ui.padding.css}).width(!1).draw(),h=[];c.selectAll("div.d3plus_node").each(function(t){h.push(this.offsetWidth+1)}).remove();var d={};d[i]=d3.max(h),t.self.width(d),t.dev.value&&a.timeEnd("calculating "+e+" width")}var n=[];for(var l in t.data.nested.all){var u=t.data.nested.all[l],c=s(t.text.nesting)&&l in t.text.nesting?t.text.nesting[l][0]:l;[t.id.value,t.text.value].indexOf(c)<0&&(u=i(u),u.forEach(function(e){e[t.text.value||t.id.value]=e[c]})),n=n.concat(u)}"number"!=typeof t.width.value&&e("primary"),"number"!=typeof t.width.secondary&&(t.text.secondary.value&&t.text.value!==t.text.secondary.value?e("secondary"):t.self.width({secondary:t.width.value}))}},{"../../../../core/console/print.coffee":54,"../../../../core/font/tester.coffee":70,"../../../../object/validate.coffee":175,"../../../../util/copy.coffee":210,"../../../form.js":106}],160:[function(t,e,n){var i=t("../../../../util/child.coffee"),r=function(t,e){if(void 0===e)var e=window;d3.select(e).on("click."+t.container.id,function(){var e=d3.event.target||d3.event.toElement,n=e.parentNode;n&&["d3plus_node","d3plus_drop_title"].indexOf(n.className)>=0&&(e=n.parentNode),e&&n&&!i(t.container.ui,e)&&(t.open.value||t.hover.value)&&t.self.open(!1).hover(!1).draw()});try{var n=window.parent.location.host===window.location.host}catch(o){var n=!1}n&&e.self!==window.top&&r(t,e.parent)};e.exports=r},{"../../../../util/child.coffee":208}],161:[function(t,e,n){var i=t("../form.js");e.exports=function(t){"buttons"in t.container||(t.container.buttons=i().container(t.container.ui).type("button"));var e=t.data.viz.length,n=!!t.width.value&&t.width.value/e,r=t.container.ui.selectAll("div.d3plus_toggle").data(t.data.viz,function(e){return e[t.id.value]});r.exit().remove(),r.enter().append("div").attr("class","d3plus_toggle").style("display","inline-block").style("vertical-align","top"),r.order().each(function(e){"form"in e.d3plus||(e.d3plus.form=i().container(d3.select(this)));var r=t.id.nesting.length>t.depth.value?t.id.nesting[t.depth.value+1]:t.id.value;e[r]instanceof Array?e.d3plus.form.container({id:t.container.id+"_"+e[t.id.value]}).data(e[r]).id(t.id.nesting.slice(1)).type("drop"):e.d3plus.form.data([e]).id(t.id.value).type("button"),e.d3plus.form.color(t.color).focus(t.focus.value,function(e){e!==t.focus.value&&t.self.focus(e).draw()}).hover(t.hover.value).icon({select:!1,value:t.icon.value}).font(t.font).format(t.format).order(t.order).text(t.text.value).ui({border:t.ui.border,color:t.ui.color,display:"inline-block",margin:0,padding:t.ui.padding.css}).width(n).draw()}),t.data.element.value&&t.data.element.value.on("focus."+t.container.id,function(){t.self.focus(this.value).hover(this.value).draw()}).on("blur."+t.container.id,function(){t.self.hover(!1).draw()})}},{"../form.js":106}],162:[function(t,e,n){var i,r,o,a,s,l,u,c,h,d,f;d=t("simplify-js"),e.exports=function(t,e){var n,r,a,l,u,h,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F,B,W,Y,V,U,q,X,G,$,K,Z,Q,J,tt,et,nt,it,rt,ot,at,st,lt,ut,ct,ht,dt,ft,pt,gt,mt,vt,yt,bt,wt;if(t.length<3)return null;if(x=[],g=.5,u=5,null==e&&(e={}),null==e.maxAspectRatio&&(e.maxAspectRatio=15),null==e.minWidth&&(e.minWidth=0),null==e.minHeight&&(e.minHeight=0),null==e.tolerance&&(e.tolerance=.02),null==e.nTries&&(e.nTries=20),null!=e.angle&&(e.angle instanceof Array?h=e.angle:"number"==typeof e.angle?h=[e.angle]:"string"!=typeof e.angle||isNaN(e.angle)||(h=[Number(e.angle)])),null==h&&(h=d3.range(-90,90+u,u)),null!=e.aspectRatio&&(e.aspectRatio instanceof Array?m=e.aspectRatio:"number"==typeof e.aspectRatio?m=[e.aspectRatio]:"string"!=typeof e.aspectRatio||isNaN(e.aspectRatio)||(m=[Number(e.aspectRatio)])),null!=e.origin&&e.origin instanceof Array&&($=e.origin[0]instanceof Array?e.origin:[e.origin]),p=Math.abs(d3.geom.polygon(t).area()),0===p)return null;if(nt=d3.extent(t,function(t){return t[0]}),V=nt[0],j=nt[1],it=d3.extent(t,function(t){return t[1]}),U=it[0],F=it[1],mt=Math.min(j-V,F-U)*e.tolerance,gt=function(){var e,n,i;for(i=[],e=0,n=t.length;e<n;e++)K=t[e],i.push({x:K[0],y:K[1]});return i}(),mt>0&&(gt=d(gt,mt),t=function(){var t,e,n;for(n=[],t=0,e=gt.length;t<e;t++)K=gt[t],n.push([K.x,K.y]);return n}()),e.vdebug&&x.push({type:"simplify",poly:t}),rt=d3.extent(t,function(t){return t[0]}),V=rt[0],j=rt[1],ot=d3.extent(t,function(t){return t[1]}),U=ot[0],F=ot[1],v=[[V,U],[j,U],[j,F],[V,F]],at=[j-V,F-U],b=at[0],y=at[1],yt=Math.min(b,y)/50,null==$)for($=[],w=d3.geom.polygon(t).centroid(),o(w,t)&&$.push(w);$.length<e.nTries;)ft=Math.random()*b+V,pt=Math.random()*y+U,dt=[ft,pt],o(dt,t)&&$.push(dt);for(e.vdebug&&x.push({type:"origins",points:$}),N=0,I=null,S=0,O=h.length;S<O;S++)for(a=h[S],l=-a*Math.PI/180,e.vdebug&&x.push({type:"angle",angle:a}),k=M=0,A=$.length;M<A;k=++M)for(X=$[k],st=i(t,X,l),Q=st[0],tt=st[1],lt=i(t,X,l+Math.PI/2),Z=lt[0],J=lt[1],q=[],null!=Q&&null!=tt&&q.push([(Q[0]+tt[0])/2,(Q[1]+tt[1])/2]),null!=Z&&null!=J&&q.push([(Z[0]+J[0])/2,(Z[1]+J[1])/2]),e.vdebug&&x.push({type:"modifOrigin",idx:k,p1W:Q,p2W:tt,p1H:Z,p2H:J,modifOrigins:q}),T=0,D=q.length;T<D;T++)if(G=q[T],e.vdebug&&x.push({type:"origin",cx:G[0],cy:G[1]}),ut=i(t,G,l),Q=ut[0],tt=ut[1],null!==Q&&null!==tt&&(Y=Math.min(f(G,Q),f(G,tt)),H=2*Math.sqrt(Y),ct=i(t,G,l+Math.PI/2),Z=ct[0],J=ct[1],null!==Z&&null!==J&&(W=Math.min(f(G,Z),f(G,J)),L=2*Math.sqrt(W),!(H*L<N))))for(null!=m?r=m:(B=Math.max(1,e.minWidth/L,N/(L*L)),z=Math.min(e.maxAspectRatio,H/e.minHeight,H*H/N),r=d3.range(B,z+g,g)),P=0,R=r.length;P<R;P++)if(n=r[P],E=Math.max(e.minWidth,Math.sqrt(N*n)),ht=Math.min(H,L*n),!(ht*L<N))for(ht-E>=yt&&e.vdebug&&x.push({type:"aRatio",aRatio:n});ht-E>=yt;)vt=(E+ht)/2,_=vt/n,bt=G[0],wt=G[1],et=[[bt-vt/2,wt-_/2],[bt+vt/2,wt-_/2],[bt+vt/2,wt+_/2],[bt-vt/2,wt+_/2]],et=c(et,l,G),s(et,t)?(C=!0,N=vt*_,I={cx:bt,cy:wt,width:vt,height:_,angle:a},E=vt):(C=!1,ht=vt),e.vdebug&&x.push({type:"rectangle",cx:bt,cy:wt,width:vt,height:_,areaFraction:vt*_/p,angle:a,insidePoly:C});return[I,N,x]},f=function(t,e){var n,i;return n=e[0]-t[0],i=e[1]-t[1],n*n+i*i},l=function(t,e,n){var i,r,o,a,s;return s=e[1]<n[1]?[e,n]:[n,e],i=s[0],r=s[1],t[1]!==r[1]&&t[1]!==i[1]||(t[1]+=Number.MIN_VALUE),!(t[1]>r[1]||t[1]<i[1])&&(!(t[0]>i[0]&&t[0]>r[0])&&(t[0]<i[0]&&t[0]<r[0]||(o=(r[1]-i[1])/(r[0]-i[0]),a=(t[1]-i[1])/(t[0]-i[0]),a>o)))},o=function(t,e){var n,i,r,o,a;for(o=-1,a=e.length,i=e[a-1],r=0;++o<a;)n=i,i=e[o],l(t,n,i)&&r++;return r%2!==0},a=function(t,e,n){var i,r,o;return i=1e-9,r=t[0],o=t[1],!(r<Math.min(e[0],n[0])-i||r>Math.max(e[0],n[0])+i||o<Math.min(e[1],n[1])-i||o>Math.max(e[1],n[1])+i)},r=function(t,e,n,i){var r,o,a,s,l,u,c,h,d,f;return h=1e-9,s=t[0]-e[0],u=t[1]-e[1],l=n[0]-i[0],c=n[1]-i[1],a=s*c-u*l,Math.abs(a)<h?null:(r=t[0]*e[1]-t[1]*e[0],o=n[0]*i[1]-n[1]*i[0],d=(r*l-o*s)/a,f=(r*c-o*u)/a,[d,f])},h=function(t,e,n,i){var o;return o=r(t,e,n,i),null!=o&&(a(o,t,e)&&a(o,n,i))},s=function(t,e){var n,i,r,a,s,l,u,c;for(s=-1,u=t.length,c=e.length,r=t[u-1];++s<u;)for(n=r,r=t[s],l=-1,a=e[c-1];++l<c;)if(i=a,a=e[l],h(n,r,i,a))return!1;return o(t[0],e)},u=function(t,e,n){var i,r,o,a;return null==n&&(n=[0,0]),o=t[0]-n[0],a=t[1]-n[1],i=Math.cos(e),r=Math.sin(e),[i*o-r*a+n[0],r*o+i*a+n[1]]},c=function(t,e,n){var i,r,o,a;for(a=[],i=0,r=t.length;i<r;i++)o=t[i],a.push(u(o,e,n));return a},i=function(t,e,n){var i,o,s,l,u,c,h,d,p,g,m,v,y,b,w;for(u=1e-9,e=[e[0]+u*Math.cos(n),e[1]+u*Math.sin(n)],b=e[0],w=e[1],v=[b+Math.cos(n),w+Math.sin(n)],h=0,Math.abs(v[0]-b)<u&&(h=1),c=-1,g=t.length,o=t[g-1],d=Number.MAX_VALUE,p=Number.MAX_VALUE,s=null,l=null;++c<g;)i=o,o=t[c],m=r(e,v,i,o),null!=m&&a(m,i,o)&&(y=f(e,m),m[h]<e[h]?y<d&&(d=y,s=m):m[h]>e[h]&&y<p&&(p=y,l=m));return[s,l]}},{"simplify-js":9}],163:[function(t,e,n){e.exports=function(t,e,n){var i,r,o,a;return r={x:0,y:0},t<0&&(t=2*Math.PI+t),"square"===n?(o=45*(Math.PI/180),t<=Math.PI?t<Math.PI/2?t<o?(r.x+=e,a=Math.tan(t)*e,r.y+=a):(r.y+=e,i=e/Math.tan(t),r.x+=i):t<Math.PI-o?(r.y+=e,i=e/Math.tan(Math.PI-t),r.x-=i):(r.x-=e,a=Math.tan(Math.PI-t)*e,r.y+=a):t<3*Math.PI/2?t<o+Math.PI?(r.x-=e,a=Math.tan(t-Math.PI)*e,r.y-=a):(r.y-=e,i=e/Math.tan(t-Math.PI),r.x-=i):t<2*Math.PI-o?(r.y-=e,i=e/Math.tan(2*Math.PI-t),r.x+=i):(r.x+=e,a=Math.tan(2*Math.PI-t)*e,r.y-=a)):(r.x+=e*Math.cos(t),r.y+=e*Math.sin(t)),r}},{}],164:[function(t,e,n){var i;i=t("../geom/offset.coffee"),e.exports=function(t){var e,n,r,o,a,s,l,u,c,h,d,f,p,g,m,v;if(!t)return[];for(t=t.slice(1).slice(0,-1).split(/L|A/),h=[],r=0,a=t.length;r<a;r++)if(c=t[r],c=c.split(" "),1===c.length)h.push(c[0].split(",").map(function(t){return parseFloat(t)}));else{for(d=h[h.length-1],o=c.pop().split(",").map(function(t){return parseFloat(t)}),f=parseFloat(c.shift().split(",")[0]),v=Math.sqrt(Math.pow(o[0]-d[0],2)+Math.pow(o[1]-d[1],2)),e=Math.acos((f*f+f*f-v*v)/(2*f*f)),u="1"===c[1].split(",")[0],u&&(e=2*Math.PI-e),s=e/(2*Math.PI)*(f*Math.PI*2),p=s/5,g=Math.atan2(-d[1],-d[0])-Math.PI,m=e/p,n=m;n<e;)l=i(g+n,f),h.push([l.x,l.y]),n+=m;h.push(o)}return h}},{"../geom/offset.coffee":163}],165:[function(t,e,n){var i,r,o;i={},i.version="1.9.8 - Cornflower",i.repo="https://github.com/alexandersimoes/d3plus/",i.array={comparator:t("./array/comparator.coffee"),contains:t("./array/contains.coffee"),sort:t("./array/sort.coffee"),update:t("./array/update.coffee")},i.client={css:t("./client/css.coffee"),ie:t("./client/ie.js"),pointer:t("./client/pointer.coffee"),prefix:t("./client/prefix.coffee"),rtl:t("./client/rtl.coffee"),scroll:t("./client/scroll.js"),scrollbar:t("./client/scrollbar.coffee"),touch:t("./client/touch.coffee")},i.color={legible:t("./color/legible.coffee"),lighter:t("./color/lighter.coffee"),mix:t("./color/mix.coffee"),random:t("./color/random.coffee"),scale:t("./color/scale.coffee"),sort:t("./color/sort.coffee"),text:t("./color/text.coffee"),validate:t("./color/validate.coffee")},i.data={bestRegress:t("./data/bestRegress.coffee"),lof:t("./data/lof.coffee"),mad:t("./data/mad.coffee")},i.font={sizes:t("./font/sizes.coffee"),validate:t("./font/validate.coffee")},i.form=t("./form/form.js"),i.geom={largestRect:t("./geom/largestRect.coffee"),offset:t("./geom/offset.coffee"),path2poly:t("./geom/path2poly.coffee")},i.network={cluster:t("./network/cluster.coffee"),distance:t("./network/distance.coffee"),normalize:t("./network/normalize.coffee"),shortestPath:t("./network/shortestPath.coffee"),smallestGap:t("./network/smallestGap.coffee"),subgraph:t("./network/subgraph.coffee")},i.number={format:t("./number/format.coffee")},i.object={merge:t("./object/merge.coffee"),validate:t("./object/validate.coffee")},i.string={format:t("./string/format.js"),list:t("./string/list.coffee"),strip:t("./string/strip.js"),title:t("./string/title.coffee")},i.textwrap=t("./textwrap/textwrap.coffee"),i.tooltip={create:t("./tooltip/create.js"),move:t("./tooltip/move.coffee"),remove:t("./tooltip/remove.coffee")},i.util={buckets:t("./util/buckets.coffee"),child:t("./util/child.coffee"),closest:t("./util/closest.coffee"),copy:t("./util/copy.coffee"),d3selection:t("./util/d3selection.coffee"),dataurl:t("./util/dataURL.coffee"),uniques:t("./util/uniques.coffee")},i.viz=t("./viz/viz.coffee"),o=t("./client/css.coffee"),r=t("./core/console/print.coffee"),o("d3plus.css")&&r.warning("d3plus.css has been deprecated, you do not need to load this file.",i.repo+"releases/tag/v1.4.0"),"undefined"!=typeof window&&(window.d3plus=i),e.exports=i},{"./array/comparator.coffee":34,"./array/contains.coffee":35,"./array/sort.coffee":36,"./array/update.coffee":37,"./client/css.coffee":38,"./client/ie.js":39,"./client/pointer.coffee":40,"./client/prefix.coffee":41,"./client/rtl.coffee":42,"./client/scroll.js":43,"./client/scrollbar.coffee":44,"./client/touch.coffee":45,"./color/legible.coffee":46,"./color/lighter.coffee":47,"./color/mix.coffee":48,"./color/random.coffee":49,"./color/scale.coffee":50,"./color/sort.coffee":51,"./color/text.coffee":52,"./color/validate.coffee":53,"./core/console/print.coffee":54,"./data/bestRegress.coffee":101,"./data/lof.coffee":102,"./data/mad.coffee":103,"./font/sizes.coffee":104,"./font/validate.coffee":105,"./form/form.js":106,"./geom/largestRect.coffee":162,"./geom/offset.coffee":163,"./geom/path2poly.coffee":164,"./network/cluster.coffee":167,"./network/distance.coffee":168,"./network/normalize.coffee":169,"./network/shortestPath.coffee":170,"./network/smallestGap.coffee":171,"./network/subgraph.coffee":172,
"./number/format.coffee":173,"./object/merge.coffee":174,"./object/validate.coffee":175,"./string/format.js":176,"./string/list.coffee":177,"./string/strip.js":178,"./string/title.coffee":179,"./textwrap/textwrap.coffee":203,"./tooltip/create.js":204,"./tooltip/move.coffee":205,"./tooltip/remove.coffee":206,"./util/buckets.coffee":207,"./util/child.coffee":208,"./util/closest.coffee":209,"./util/copy.coffee":210,"./util/d3selection.coffee":211,"./util/dataURL.coffee":212,"./util/uniques.coffee":213,"./viz/viz.coffee":336}],166:[function(t,e,n){window.d3=t("d3"),window.topojson=t("topojson")},{d3:3,topojson:33}],167:[function(t,e,n){var i;i=t("./normalize.coffee"),e.exports=function(t,e){var n,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N;if(g=[],null==e&&(e={}),(null==e.nodes||"object"!=typeof e.nodes)&&(D=i(t,e),t=D[0],e=D[1],null===e))return null;d=e.distance,E=e.nodeid,N=e.startpoint,p=e.endpoint,O=e.nodes,A={};for(v in O)A[v]={node:O[v].node,degree:0};for(C=0,k={},m=0,x=t.length;m<x;m++)f=t[m],r=E(N(f)),o=E(p(f)),r in k||(k[r]={}),o in k||(k[o]={}),o in k[r]||(k[r][o]=0,k[o][r]=0,C++,A[r].degree+=1,A[o].degree+=1);u={},n=0;for(v in A)T=A[v],u[v]={score:T.degree/(2*C),nodes:[v]};for(r in k)for(o in k[r])k[r][o]=1/(2*C)-A[r].degree*A[o].degree/(4*C*C);for(y=0;y<1e3;){h=-1,S=void 0,M=void 0;for(r in k)for(o in k[r])k[r][o]>h&&(h=k[r][o],S=r,M=o);if(h<0)break;for(w in k[S])w!==M&&(w in k[M]?k[M][w]+=k[S][w]:k[M][w]=k[S][w]-2*u[M].score*u[w].score,k[w][M]=k[M][w]),delete k[w][S];for(w in k[M])w in k[S]||w===M||(k[M][w]-=2*u[S].score*u[w].score,k[w][M]=k[M][w]);for(R=u[S].nodes,b=0,_=R.length;b<_;b++)T=R[b],u[M].nodes.push(T);u[M].score+=u[S].score,e.vdebug&&g.push({type:"merge",father:M,child:S,nodes:u[M].nodes}),delete u[S],delete k[S],n+=h,y++}return l=function(){var t;t=[];for(a in u)c=u[a],t.push([a,c.nodes.length]);return t}(),l.sort(function(t,e){return e[1]-t[1]}),P=function(){var t,e,n;for(n=[],t=0,e=l.length;t<e;t++)s=l[t],n.push(u[s[0]].nodes);return n}(),[P,g]}},{"./normalize.coffee":169}],168:[function(t,e,n){e.exports=function(t,e){var n,i;return t instanceof Array||(t=[t.x,t.y]),e instanceof Array||(e=[e.x,e.y]),n=Math.abs(t[0]-e[0]),i=Math.abs(t[1]-e[1]),Math.sqrt(n*n+i*i)}},{}],169:[function(t,e,n){var i;i=t("../core/console/print.coffee"),e.exports=function(t,e){var n,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P;if(A=e.source,R=e.target,a=e.directed,s=e.distance,M=e.nodeid,D=e.startpoint,c=e.endpoint,n=e.K,P=e.vdebug,a||(a=!1),null==n&&(n=1),null==M?M=function(t){return t}:"string"==typeof M&&(M=function(t){return function(e){return e[t]}}(M)),null!=A&&"object"==typeof A&&(A=M(A)),null!=R&&"object"==typeof R&&(R=M(R)),null==D?D=function(t){return t.source}:"string"==typeof D&&(D=function(t){return function(e){return e[t]}}(D)),null==c?c=function(t){return t.target}:"string"==typeof c&&(c=function(t){return function(e){return e[t]}}(c)),null==s)s=function(t){return 1};else if("number"==typeof s)s=function(t){return function(e){return t}}(s);else if("string"==typeof s)s=function(t){return function(e){return e[t]}}(s);else if(s instanceof Array){for(u={},d=v=0,w=t.length;v<w;d=++v)l=t[d],r=M(D(l)),o=M(c(l)),u[r+"_"+o]=s[d];s=function(t){return r=M(D(t)),o=M(c(t)),u[r+"_"+o]}}for(T={},y=0,x=t.length;y<x;y++){for(l=t[y],C=D(l),S=c(l),g=M(C),m=M(S),E=[C,S],b=0,_=E.length;b<_;b++)k=E[b],f=M(k),f in T||(T[f]={node:k,outedges:[]});T[g].outedges.push(l),a||T[m].outedges.push(l)}return h=null,0===t.length?h="The length of edges is 0":n<0?h="K can not have negative value":null==s(t[0])?h="Check the distance function/attribute":null==D(t[0])?h="Check the startpoint function/attribute":null==c(t[0])?h="Check the endpoint function/attribute":(p=M(D(t[0])),null==p||"string"!=(O=typeof p)&&"number"!==O?h="Check the nodeid function/attribute":null==A||A in T?null==R||R in T||(h="The target is not in the graph"):h="The source is not in the graph"),null!=h?(i.error(h),null):[t,{source:A,target:R,directed:a,distance:s,nodeid:M,startpoint:D,endpoint:c,K:n,nodes:T,vdebug:P}]}},{"../core/console/print.coffee":54}],170:[function(t,e,n){var i,r;i=t("heap"),r=t("./normalize.coffee"),e.exports=function(t,e,n){var o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P;if(null==n&&(n={}),n.source=e,(null==n.nodes||"object"!=typeof n.nodes)&&(S=r(t,n),t=S[0],n=S[1],null===n))return null;e=n.source,D=n.target,u=n.directed,c=n.distance,_=n.nodeid,A=n.startpoint,d=n.endpoint,o=n.K,k=n.nodes;for(m in k)x=k[m],x.count=0;for(p=new i(function(t,e){return t.distance-e.distance}),P={},null==D&&(P[e]=!0),p.push({edge:null,target:e,distance:0}),w=0,O=[];!p.empty()&&(w=Math.max(w,p.size()),C=p.pop(),R=C.target,k[R].count++,null==D?O.push(C):R===D&&O.push(C),O.length!==o);)if(k[R].count<=o)for(M=k[R].outedges,g=0,y=M.length;g<y;g++){if(h=M[g],a=_(A(h)),l=_(d(h)),u||l!==R||(T=[l,a],a=T[0],l=T[1]),null==D){if(P[l])continue;P[l]=!0}s=C.distance+c(h),p.push({edge:h,previous:C,target:l,distance:s})}for(f=function(e){for(t=[];null!=e.edge;)t.push(e.edge),e=e.previous;return t.reverse()},v=0,b=O.length;v<b;v++)E=O[v],null!=D&&(delete E.target,E.edges=f(E)),delete E.edge,delete E.previous;return O}},{"./normalize.coffee":169,heap:4}],171:[function(t,e,n){var i;i=t("./distance.coffee"),e.exports=function(t,e){var n,r;return e||(e={}),n=[],r=d3.geom.quadtree().x(function(t){return e.accessor?e.accessor(t)[0]:t[0]}).y(function(t){return e.accessor?e.accessor(t)[1]:t[1]}),r(t).visit(function(t){var r,o,a,s,l,u,c,h;if(!t.leaf)for(c=t.nodes,r=0,a=c.length;r<a;r++)if(l=c[r],l&&l.point)if(e.origin)n.push(i(l,e));else for(h=t.nodes,o=0,s=h.length;o<s;o++)u=h[o],u&&u.point&&u.point!==l.point&&n.push(i(l,u));return!1}),e.all?n.sort(function(t,e){return t-e}):d3.min(n)}},{"./distance.coffee":168}],172:[function(t,e,n){var i;i=t("./normalize.coffee"),e.exports=function(t,e,n){var r,o,a,s,l,u,c,h,d,f,p,g;return null==n&&(n={}),n.source=e,null!=n.nodes&&"object"==typeof n.nodes||(f=i(t,n),t=f[0],n=f[1],null!==n)?(e=n.source,a=n.directed,s=n.distance,h=n.nodeid,p=n.startpoint,u=n.endpoint,r=n.K,d=n.nodes,g={},g[e]=!0,o=function(t,e){var n,i,l,c,f,m,v,y,b;for(v=d[t].outedges,b=[],c=0,f=v.length;c<f;c++)l=v[c],n=h(p(l)),i=h(u(l)),a||i!==t||(y=[i,n],n=y[0],i=y[1]),i in g?b.push(void 0):(m=e+s(l),m<=r?(g[i]=!0,b.push(o(i,m))):b.push(void 0));return b},o(e,0),{nodes:function(){var t;t=[];for(c in g)t.push(d[c].node);return t}(),edges:function(){var e,n,i;for(i=[],e=0,n=t.length;e<n;e++)l=t[e],h(p(l))in g&&h(u(l))in g&&i.push(l);return i}()}):null}},{"./normalize.coffee":169}],173:[function(t,e,n){var i;i=t("../core/locale/languages/en_US.coffee"),e.exports=function(t,e){var n,r,o,a,s,l,u,c,h,d,f,p;return void 0===t||null===t||t===!1?"":(e||(e={}),l="locale"in e?e.locale:i,d=l.time.slice(),r=d3.locale(l.format),e||(e={}),f=e.vars||{},o=e.key,a=!("labels"in e)||e.labels,s=t.toString().split(".")[0].length,f.time&&f.time.value&&d.push(f.time.value),"string"==typeof o&&d.indexOf(o.toLowerCase())>=0?u=t:"share"===o?(u=0===t?0:t>=100?r.numberFormat(",f")(t):t>99?r.numberFormat(".3g")(t):r.numberFormat(".2g")(t),u+="%"):t<10&&t>-10?(s=t.toString().split("."),c=1,s.length>1&&(c=d3.min([parseFloat(s[1]).toString().length,2]),-1<t&&t<1||(p=s[1].length-parseFloat(s[1]).toString().length,c+=1+p)),u=r.numberFormat("."+c+"g")(t)):s>3?(h=d3.formatPrefix(t).symbol,h=h.replace("G","B"),t=d3.formatPrefix(t).scale(t),t=r.numberFormat(".3g")(t),t=t.replace(l.format.decimal,"."),t=parseFloat(t)+"",t=t.replace(".",l.format.decimal),u=t+h):u=3===s?r.numberFormat(",f")(t):0===t?0:t===parseInt(t,10)?r.numberFormat(".2")(t):r.numberFormat(".3g")(t),u.length>2&&""+u.indexOf(".0")===u.length-2&&(u=u.slice(0,u.length-2)),a&&o&&"format"in f&&o in f.format.affixes.value?(n=f.format.affixes.value[o],n[0]+u+n[1]):u)}},{"../core/locale/languages/en_US.coffee":72}],174:[function(t,e,n){var i,r;i=t("../util/d3selection.coffee"),r=t("./validate.coffee"),e.exports=function(t,e){var n,o;return n=function(t,e,o){var a,s,l;s=[];for(a in t)l=t[a],"undefined"!=typeof l?!o&&r(l)?("object"!=typeof e[a]&&(e[a]={}),s.push(n(l,e[a],0===a.indexOf("d3plus")))):!i(l)&&l instanceof Array?s.push(e[a]=l.slice(0)):s.push(e[a]=l):s.push(void 0);return s},o={},t&&n(t,o),e&&n(e,o),o}},{"../util/d3selection.coffee":211,"./validate.coffee":175}],175:[function(t,e,n){e.exports=function(t){return t&&t.constructor===Object}},{}],176:[function(t,e,n){e.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();return e.unkeyed_index=0,e.replace(/\{(\w*)\}/g,function(n,i){if(""===i&&(i=e.unkeyed_index,e.unkeyed_index++),i==+i)return"undefined"!==t[i]?t[i]:n;for(var r=0;r<t.length;r++)if("object"==typeof t[r]&&"undefined"!=typeof t[r][i])return t[r][i];return n}.bind(e))}},{}],177:[function(t,e,n){var i,r;i=t("./format.js"),r=t("../core/locale/languages/en_US.coffee").ui,e.exports=function(t,e,n,o){var a;return t instanceof Array?(t=t.slice(0),e||(e=r.and),o||(o=r.moreText),2===t.length?t.join(" "+e+" "):(n&&t.length>n&&(a=t.length-n+1,t=t.slice(0,n-1),t[n-1]=i(o,a)),t.length>1&&(t[t.length-1]=e+" "+t[t.length-1]),t.join(", "))):t}},{"../core/locale/languages/en_US.coffee":72,"./format.js":176}],178:[function(t,e,n){e.exports=function(t){var e=["!","@","#","$","%","^","&","*","(",")","[","]","{","}",".",",","/","\\","|","'",'"',";",":","<",">","?","=","+"],n=[[/[\300-\306]/g,"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]];return t+="",""+t.replace(/[^A-Za-z0-9\-_]/g,function(t){if(" "===t)return"_";if(e.indexOf(t)>=0)return"";for(var i=t,r=0;r<n.length;r++)if(new RegExp(n[r][0]).test(t)){i=n[r][1];break}return i})}},{}],179:[function(t,e,n){var i;i=t("../core/locale/languages/en_US.coffee"),e.exports=function(t,e){var n,r,o,a,s;return t?(e||(e={}),o=e.key,"."===t.charAt(t.length-1)?t.charAt(0).toUpperCase()+t.substr(1):(a="locale"in this?this.locale.value:i,s=a.lowercase.map(function(t){return t.toLowerCase()}),r=a.uppercase,r=r.concat(r.map(function(t){return t+"s"})),n=r.map(function(t){return t.toLowerCase()}),t.replace(/[^\s!-#%&(-\x2A,-:;\x3F@\x5B-\x5D_\x7B}\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]*/g,function(e,i){var o,a;return e?(o=n.indexOf(e.toLowerCase()),a=o>=0?r[o]:s.indexOf(e.toLowerCase())>=0&&0!==i&&i!==t.length-1?e.toLowerCase():e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()):""}))):""}},{"../core/locale/languages/en_US.coffee":72}],180:[function(t,e,n){var i,r;i=t("./foreign.coffee"),r=t("./tspan.coffee"),e.exports=function(t){t.text.html.value?i(t):r(t)}},{"./foreign.coffee":181,"./tspan.coffee":184}],181:[function(t,e,n){e.exports=function(t){var e,n,i,r,o;o=t.container.value,i=o.attr("font-family")||o.style("font-family"),e=t.align.value||o.attr("text-anchor")||o.style("text-anchor"),n=o.attr("fill")||o.style("fill"),r=o.attr("opacity")||o.style("opacity"),e="end"===e?"right":"middle"===e?"center":"left",d3.select(o.node().parentNode).append("foreignObject").attr("width",t.width.value+"px").attr("height",t.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",i).style("font-size",t.size.value[1]+"px").style("color",n).style("text-align",e).style("opacity",r).text(t.text.current)}},{}],182:[function(t,e,n){e.exports=function(t){var e,n,i,r,o,a,s,l,u,c;if(n=t.container.value,r=n.node().previousElementSibling,a=r?r.tagName.toLowerCase():"",r&&(r=d3.select(r)),t.container.x=t.x.value||parseFloat(n.attr("x"),10),t.container.y=t.y.value||parseFloat(n.attr("y"),10),r&&(t.shape.accepted.indexOf(a)>=0&&t.self.shape(a),"rect"===a?(u=parseFloat(r.attr("x"),10)||0,c=parseFloat(r.attr("y"),10)||0,t.padding.value===!1&&(e=Math.abs(u-t.container.x),e&&t.self.padding(e)),t.container.x||(t.container.x=u+t.padding.value),t.container.y||(t.container.y=c+t.padding.value),t.width.value||(l=parseFloat(r.attr("width")),t.self.width(l)),t.height.value||(i=parseFloat(r.attr("height")),t.self.height(i))):"circle"===a?(o=parseFloat(r.attr("r"),10),u=parseFloat(r.attr("cx"),10)||0,u-=o,c=parseFloat(r.attr("cy"),10)||0,c-=o,t.padding.value===!1&&(e=Math.abs(u-t.container.x),e&&t.self.padding(e)),t.container.x||(t.container.x=u+t.padding.value),t.container.y||(t.container.y=c+t.padding.value),t.width.value||t.self.width(2*o,10),t.height.value||t.self.height(2*o,10)):(t.width.value||t.self.width(500),t.height.value||t.self.height(500))),t.container.x||(t.container.x=0),t.container.y||(t.container.y=0),t.width.inner=t.width.value-2*t.padding.value,t.height.inner=t.height.value-2*t.padding.value,s=n.attr("font-size")||n.style("font-size"),s=parseFloat(s,10),t.container.fontSize=s,t.container.dy=parseFloat(n.attr("dy"),10),!t.size.value)return t.resize.value?t.self.size([4,80]):t.self.size([s/2,s])}},{}],183:[function(t,e,n){e.exports=function(t){var e;if(t.text.value||(e=t.container.value.text(),e&&(e.indexOf("tspan")>=0&&(e.replace(/\<\/tspan\>\<tspan\>/g," "),e.replace(/\<\/tspan\>/g,""),e.replace(/\<tspan\>/g,"")),e=e.replace(/(\r\n|\n|\r)/gm,""),e=e.replace(/^\s+|\s+$/g,""),t.self.text(e))),t.text.value instanceof Array?t.text.phrases=t.text.value.filter(function(t){return["string","number"].indexOf(typeof t)>=0}):t.text.phrases=[t.text.value+""],!t.align.value)return t.container.align=t.container.value.style("text-anchor")||t.container.value.attr("text-anchor")}},{}],184:[function(t,e,n){var i;i=t("../../client/rtl.coffee"),e.exports=function(t){var e,n,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R;return d=function(e){var i;return i=!g||e?t.container.value.append("tspan"):t.container.value.insert("tspan","tspan"),i.attr("x",O+"px").attr("dy",n+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic")},h=t.rotate.value===-90||90===t.rotate.value,M=h?t.height.inner:t.width.inner,s=h?t.width.inner:t.height.inner,e="circle"===t.shape.value?"middle":t.align.value||t.container.align||"start",A="end"===e||"start"===e&&i?M:"middle"===e?M/2:0,S=t.valign.value||"top",O=t.container.x+A,o=t.resize.value?t.size.value[1]:t.container.fontSize||t.size.value[0],n=t.container.dy||1.1*o,_=null,p=null,T=null,g=!1,R=0,"circle"===t.shape.value&&("middle"===S?R=s/n%1*n/2:"end"===S&&(R=s/n%1*n)),t.container.value.attr("text-anchor",e).attr("font-size",o+"px").style("font-size",o+"px").attr("x",t.container.x).attr("y",t.container.y),C=function(){if(_.remove(),g?(l++,_=t.container.value.select("tspan")):(l--,_=d3.select(t.container.value.node().lastChild)),!_.empty())return T=_.text().match(/[^\s-]+-?/g),r()},u=function(){var e;return"circle"===t.shape.value?(e=(l-1)*n+R,e>s/2&&(e+=n),2*Math.sqrt(e*(2*(M/2)-e))):M},r=function(){var e,n;return T&&T.length?(n=T.pop(),e=n.charAt(n.length-1),1===n.length&&t.text.split.value.indexOf(n)>=0?r():(t.text.split.value.indexOf(e)>=0&&(n=n.substr(0,n.length-1)),_.text(T.join(" ")+" "+n+"..."),_.node().getComputedTextLength()>u()?r():void 0)):C()},f=function(e){var n,i,r,o;if(n=_.text(),o="",g){if(o=t.text.current.charAt(t.text.current.length-p.length-1)," "===o)for(r="",i=2;" "===o;)r+=" ",o=t.text.current.charAt(t.text.current.length-p.length-i),i++;else r="";p=e+r+p,_.text(e+r+n)}else{if(o=t.text.current.charAt(p.length)," "===o)for(r="",i=1;" "===o;)r+=" ",o=t.text.current.charAt(p.length+i),i++;else r="";p+=r+e,_.text(n+r+e)}if(Math.floor(_.node().getComputedTextLength())>u()||"\n"===o)return _.text(n),n.length&&(_=d()),_.text(e),g?l--:l++},x=1,l=null,c=null,E=function(){var e,i,r,o,a,u;for(t.container.value.text("").html(""),T=t.text.words.slice(),g&&T.reverse(),p="",_=d(!0),l=x,i=0,r=T.length;i<r;i++){if(u=T[i],l*n>s){C();break}for(f(u),a=!0;a;){for(o=t.text.current.charAt(p.length),e=1;" "===o;)o=t.text.current.charAt(p.length+e),e++;a=t.text.split.value.indexOf(o)>=0,a&&f(o)}}return l*n>s&&C(),c=Math.abs(l-x)+1},E(),c=0,t.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return c++}),"circle"===t.shape.value&&(w=s-c*n,w>n&&("middle"===S?(x=(w/n/2>>0)+1,E()):"bottom"===S&&(g=!0,x=s/n>>0,E()))),c=0,t.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return c++}),"top"===S?D=0:(a=c*n,D="middle"===S?s/2-a/2:s-a),D-=.2*n,k="translate(0,"+D+")",180===t.rotate.value||t.rotate.value===-180?(y=t.container.x+M/2,b=t.container.y+s/2):(m=t.rotate.value<0?M:s,y=t.container.x+m/2,b=t.container.y+m/2),v="rotate("+t.rotate.value+", "+y+", "+b+")",t.container.value.attr("transform",v+k)}},{"../../client/rtl.coffee":42}],185:[function(t,e,n){var i,r,o,a;i=t("./flow.coffee"),r=t("../../font/sizes.coffee"),a=function(t){var e;t.text.phrases.length&&(t.text.current=t.text.phrases.shift()+"",t.text.words=t.text.current.match(t.text.split["break"]),e=t.text.current.charAt(0),e!==t.text.words[0].charAt(0)&&(t.text.words[0]=e+t.text.words[0]),t.container.value.html(""),t.resize.value?o(t):i(t))},e.exports=a,o=function(t){var e,n,o,s,l,u,c,h,d,f,p,g,m,v,y,b,w;for(w=[],c=0;c<t.text.words.length;)e=c===t.text.words.length-1?"":" ",w.push(t.text.words[c]+e),c++;f=t.rotate.value===-90||90===t.rotate.value,y=f?t.height.inner:t.width.inner,l=f?t.width.inner:t.height.inner,p=Math.floor(t.size.value[1]),h="circle"===t.shape.value?.75*y:y,m=r(w,{"font-size":p+"px"},{parent:t.container.value}),d=d3.max(m,function(t){return t.width}),n=1.165+y/l*.11,v=d3.sum(m,function(e){var n;return n=t.container.dy||1.2*p,e.width*n})*n,s="circle"===t.shape.value?Math.PI*Math.pow(y/2,2):h*l,(d>h||v>s)&&(o=Math.sqrt(s/v),b=h/d,g=d3.min([o,b]),p=d3.max([t.size.value[0],Math.floor(p*g)])),u=Math.floor(.8*l),p>u&&(p=u),d*(p/t.size.value[1])<=h?(p!==t.size.value[1]&&t.self.size([t.size.value[0],p]),i(t)):a(t)}},{"../../font/sizes.coffee":104,"./flow.coffee":180}],186:[function(t,e,n){e.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(t){var e;return e=["left","center","right"].indexOf(t),e>=0&&(t=this.accepted[e+1]),t},value:!1}},{}],187:[function(t,e,n){arguments[4][110][0].apply(n,arguments)},{dup:110}],188:[function(t,e,n){var i;i=t("../../util/d3selection.coffee"),e.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(t){return t!==!1&&(i(t)?t:t instanceof Array?d3.select(t[0][0]):(this.selector=t,d3.select(t)))},value:!1}},{"../../util/d3selection.coffee":211}],189:[function(t,e,n){arguments[4][114][0].apply(n,arguments)},{dup:114}],190:[function(t,e,n){var i,r;i=t("../../core/console/print.coffee"),r=t("../../string/format.js"),e.exports={accepted:[void 0],process:function(t,e){var n,o;return this.initialized===!1?t:(e.container.value===!1?(o=e.format.locale.value.dev.setContainer,i.warning(o,"container")):e.container.value.empty()?(o=e.format.locale.value.dev.noContainer,n=e.container.selector||"",i.warning(r(o,'"'+n+'"'),"container")):(e.dev.value&&i.time("total draw time"),e.container.value.call(e.self)),t)},value:void 0}},{"../../core/console/print.coffee":54,"../../string/format.js":176}],191:[function(t,e,n){var i,r;i=t("../../core/locale/locale.coffee"),r=t("../../object/merge.coffee"),e.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(i)},process:function(t){var e,n;return e="en_US",n=i[e],t!==e&&(n=r(n,i[t])),this.language=t,n},value:"en_US"},process:function(t,e){if(this.initialized&&"string"==typeof t)e.self.format({locale:t});else if("function"==typeof t)return t;return this.value},value:"en_US"}},{"../../core/locale/locale.coffee":81,"../../object/merge.coffee":174}],192:[function(t,e,n){e.exports={accepted:[!1,Number],value:!1}},{}],193:[function(t,e,n){arguments[4][192][0].apply(n,arguments)},{dup:192}],194:[function(t,e,n){arguments[4][114][0].apply(n,arguments)},{dup:114}],195:[function(t,e,n){e.exports={accepted:[-180,-90,0,90,180],value:0}},{}],196:[function(t,e,n){e.exports={accepted:["circle","square"],value:!1}},{}],197:[function(t,e,n){e.exports={accepted:[Array,!1],value:!1}},{}],198:[function(t,e,n){e.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(t){var e;return e=this.split.value,this.split["break"]=new RegExp("[^\\s\\"+e.join("\\")+"]+\\"+e.join("?\\")+"?","g"),!1},split:{accepted:[Array],process:function(t){return this["break"]=new RegExp("[^\\s\\"+t.join("\\")+"]+\\"+t.join("?\\")+"?","g"),t},value:["-","/",";",":","&"]}}},{}],199:[function(t,e,n){e.exports={accepted:[!1,"top","middle","bottom"],value:!1}},{}],200:[function(t,e,n){arguments[4][192][0].apply(n,arguments)},{dup:192}],201:[function(t,e,n){arguments[4][192][0].apply(n,arguments)},{dup:192}],202:[function(t,e,n){arguments[4][192][0].apply(n,arguments)},{dup:192}],203:[function(t,e,n){var i,r,o,a,s;i=t("../core/methods/attach.coffee"),o=t("./helpers/parseSize.coffee"),r=t("../core/console/print.coffee"),a=t("./helpers/parseText.coffee"),s=t("./helpers/wrap.coffee"),e.exports=function(){var e;return e={self:function(t){return t.each(function(){o(e),e.size.value[0]<=e.height.inner?(a(e),s(e)):e.container.value.html(""),e.dev.value&&r.timeEnd("total draw time")}),e.self}},i(e,{align:t("./methods/align.coffee"),config:t("./methods/config.coffee"),container:t("./methods/container.coffee"),dev:t("./methods/dev.coffee"),draw:t("./methods/draw.coffee"),format:t("./methods/format.coffee"),height:t("./methods/height.coffee"),padding:t("./methods/padding.coffee"),resize:t("./methods/resize.coffee"),rotate:t("./methods/rotate.coffee"),text:t("./methods/text.coffee"),shape:t("./methods/shape.coffee"),size:t("./methods/size.coffee"),valign:t("./methods/valign.coffee"),width:t("./methods/width.coffee"),x:t("./methods/x.coffee"),y:t("./methods/y.coffee")}),e.self}},{"../core/console/print.coffee":54,"../core/methods/attach.coffee":82,"./helpers/parseSize.coffee":182,"./helpers/parseText.coffee":183,"./helpers/wrap.coffee":185,"./methods/align.coffee":186,"./methods/config.coffee":187,"./methods/container.coffee":188,"./methods/dev.coffee":189,"./methods/draw.coffee":190,"./methods/format.coffee":191,"./methods/height.coffee":192,"./methods/padding.coffee":193,"./methods/resize.coffee":194,"./methods/rotate.coffee":195,"./methods/shape.coffee":196,"./methods/size.coffee":197,"./methods/text.coffee":198,"./methods/valign.coffee":199,"./methods/width.coffee":200,"./methods/x.coffee":201,"./methods/y.coffee":202}],204:[function(t,e,n){function i(){d3.selectAll("div.d3plus_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3plus_tooltip_data_help").style("background-color","#ccc")}var r=t("../core/locale/languages/en_US.coffee"),o=t("../client/pointer.coffee"),a=t("../color/legible.coffee"),s=t("./move.coffee"),l=t("../client/prefix.coffee"),u=t("../client/rtl.coffee"),c=t("./remove.coffee"),h=t("../client/scroll.js"),d=t("../client/scrollbar.coffee"),f=t("../string/list.coffee"),p=t("../color/text.coffee");e.exports=function(t){var e=t.fullscreen?250:200,n=l();t.width=t.width||e,t.max_width=t.max_width||386,t.id=t.id||"default",t.size=t.fullscreen||t.html?"large":"small",t.offset=t.offset||0,t.arrow_offset=t.arrow?8:0,t.x=t.x||0,t.y=t.y||0,t.parent=t.parent||d3.select("body"),t.curtain=t.curtain||"#fff",t.curtainopacity=t.curtainopacity||.8,t.background=t.background||"#fff",t.fontcolor=t.fontcolor||"#444",t.fontfamily=t.fontfamily||"sans-serif",t.fontweight=t.fontweight||"normal",t.fontsize=t.fontsize||"12px",t.style=t.style||"default",t.zindex="small"==t.size?2e3:500,t.locale=t.locale||r,t.stacked=t.stacked||!1;var g=t.parent?t.parent.node().offsetHeight||t.parent.node().getBoundingClientRect().height:0;if(t.iconsize||(t.iconsize="small"==t.size?22:50),t.parent.node()===document.body){t.limit=[window.innerWidth+h.x(),window.innerHeight+h.y()];var m=d();document.body.scrollHeight>window.innerHeight&&(t.limit[0]-=m)}else t.limit=[parseFloat(t.parent.style("width"),10),parseFloat(t.parent.style("height"),10)];if(t.title instanceof Array){var v=t.locale.ui.and,y=t.locale.ui.more;t.title=f(t.title,v,3,y)}if(c(t.id),t.anchor={},t.fullscreen)t.anchor.x="center",t.anchor.y="center",t.x=t.parent?t.parent.node().offsetWidth/2:window.innerWidth/2,t.y=t.parent?g/2:window.innerHeight/2;else if(t.align){var b=t.align.split(" ");t.anchor.y=b[0],b[1]?t.anchor.x=b[1]:t.anchor.x="center"}else t.anchor.x="center",t.anchor.y="top";var w=t.width-30;if(t.fullscreen){t.parent.append("div").attr("id","d3plus_tooltip_curtain_"+t.id).attr("class","d3plus_tooltip_curtain").style("background-color",t.curtain).style("opacity",t.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(o.click,function(){c(t.id)})}var x=t.parent.append("div").datum(t).attr("id","d3plus_tooltip_id_"+t.id).attr("class","d3plus_tooltip d3plus_tooltip_"+t.size).style("color",t.fontcolor).style("font-family",t.fontfamily).style("font-weight",t.fontweight).style("font-size",t.fontsize+"px").style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(o.out,i);t.max_height&&x.style("max-height",t.max_height+"px"),t.fixed?(x.style("z-index",500),t.mouseevents=!0):x.style("z-index",2e3);var _=x.append("div").datum(t).attr("class","d3plus_tooltip_container").style("background-color",t.background).style("padding","6px");if(t.fullscreen&&t.html&&!t.stacked){C=t.parent?.75*t.parent.node().offsetWidth:.75*window.innerWidth,I=t.parent?.75*g:.75*window.innerHeight,_.style("width",C+"px").style("height",I+"px");var k=_.append("div").attr("class","d3plus_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",t.width+"px")}else{if("auto"==t.width){var C="auto";_.style("max-width",t.max_width+"px")}else var C=t.width-14+"px";var k=_.style("width",C)}if(t.title||t.icon)var S=k.append("div").attr("class","d3plus_tooltip_header").style("position","relative").style("z-index",1);if(t.fullscreen){x.append("div").attr("class","d3plus_tooltip_close").style("background-color",t.color).style("color",p(t.color)).style("position","absolute").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(o.over,function(){d3.select(this).style("cursor","pointer").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(o.out,function(){d3.select(this).style("cursor","auto").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(o.click,function(){c(t.id)});d3.select("body").on("keydown.esc_"+t.id,function(){27===d3.event.keyCode&&(c(t.id),d3.select("body").on("keydown.esc_"+t.id,null))})}if(t.mouseevents){if(t.mouseevents!==!0){var M=d3.select(t.mouseevents).on(o.out),T=function(){var e=d3.event.toElement||d3.event.relatedTarget;if(e)var n="string"==typeof e.className?e.className:e.className.baseVal,r=0==n.indexOf("d3plus_tooltip");else var r=!1;e&&(E(x.node(),e)||E(t.mouseevents,e)||r)||(M(d3.select(t.mouseevents).datum()),i(),d3.select(t.mouseevents).on(o.out,M))},E=function(t,e){for(var n=e.parentNode;null!==n;){if(n==t)return!0;n=n.parentNode}return!1};d3.select(t.mouseevents).on(o.out,T),x.on(o.out,T);var O=d3.select(t.mouseevents).on(o.move);O&&x.on(o.move,O)}}else x.style("pointer-events","none");if(t.arrow){x.append("div").attr("class","d3plus_tooltip_arrow").style("background-color",t.background).style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(n+"transform","rotate(45deg)").style("z-index",-1)}if(t.icon){var A=S.append("div").attr("class","d3plus_tooltip_icon").style("width",t.iconsize+"px").style("height",t.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+t.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==t.style&&A.style("background-color",t.color),w-=A.node().offsetWidth}if(t.title){var D=t.max_width-6;t.icon&&(D-=t.iconsize+6),D+="px";S.append("div").attr("class","d3plus_tooltip_title").style("max-width",D).style("color",t.icon?t.fontcolor:a(t.color)).style("vertical-align","top").style("width",w+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===t.size?"18px":"16px").style("line-height","large"===t.size?"20px":"17px").style("padding","large"===t.size?"3px 6px":"3px").text(t.title)}if(t.description){k.append("div").attr("class","d3plus_tooltip_description").style("font-size","12px").style("padding","6px").text(t.description)}if(t.data||t.html&&!t.fullscreen)var R=k.append("div").attr("class","d3plus_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(t.data){var P=0,N={},z=null;t.data.forEach(function(e,r){e.group&&z!=e.group&&(z=e.group,R.append("div").attr("class","d3plus_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(e.group));var s=R.append("div").attr("class","d3plus_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(e);e.highlight===!0?s.style("color",a(t.color)):(e.allColors||e.highlight!==t.color)&&s.style("color",a(e.highlight));var c=s.append("div").attr("class","d3plus_tooltip_data_name").style("display","inline-block").html(e.name).on(o.out,function(){d3.event.stopPropagation()});if(e.link&&c.style("cursor","pointer").on(o.click,e.link),e.value instanceof Array){var h=t.locale.ui.and,d=t.locale.ui.more;e.value=list(e.value,h,3,d)}var f=s.append("div").attr("class","d3plus_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(e.value).on(o.out,function(){d3.event.stopPropagation()});if(u?f.style("left","6px"):f.style("right","6px"),t.mouseevents&&e.desc){var p=s.append("div").attr("class","d3plus_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(n+"transition","height 0.5s").style("width","85%").text(e.desc).on(o.out,function(){d3.event.stopPropagation()}),g=p.node().offsetHeight||p.node().getBoundingClientRect().height;p.style("height","0px");var m=c.append("div").attr("class","d3plus_tooltip_data_help").style("background-color","#ccc").style(n+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(l+"transition","background-color 0.5s").text("?").on(o.over,function(){
var t=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",t),p.style("height",g+"px")}).on(o.out,function(){d3.event.stopPropagation()});c.style("cursor","pointer").on(o.over,function(){i();var t=d3.select(this.parentNode).style("color");m.style("background-color",t),p.style("height",g+"px")}),s.on(o.out,function(){d3.event.stopPropagation(),i()})}var v=parseFloat(f.style("width"),10);v>t.width/2&&(v=t.width/2),v>P&&(P=v),r!=t.data.length-1&&(e.group&&e.group==t.data[r+1].group||!e.group&&!t.data[r+1].group)&&R.append("div").attr("class","d3plus_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),R.selectAll(".d3plus_tooltip_data_name").style("width",function(){var t=parseFloat(d3.select(this.parentNode).style("width"),10);return t-P-30+"px"}),R.selectAll(".d3plus_tooltip_data_value").style("width",P+"px").each(function(t){var e=parseFloat(d3.select(this).style("height"),10);N[t.name]=e}),R.selectAll(".d3plus_tooltip_data_name").style("min-height",function(t){return N[t.name]+"px"})}!t.html||t.fullscreen&&!t.stacked||(R.append("div").html(t.html),t.js&&t.js(_));var L=k.append("div").attr("class","d3plus_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(t.footer&&L.html(t.footer),t.height=x.node().offsetHeight||x.node().getBoundingClientRect().height,t.html&&t.fullscreen&&!t.stacked){var I=t.height-12,C=x.node().offsetWidth-t.width-44;_.append("div").attr("class","d3plus_tooltip_html").style("width",C+"px").style("height",I+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(t.html),t.js&&t.js(_)}if(t.width=x.node().offsetWidth,"center"!=t.anchor.y?t.height+=t.arrow_offset:t.width+=t.arrow_offset,t.data||(!t.fullscreen||t.stacked)&&t.html){if(!t.fullscreen||t.stacked)var H=t.fixed?g-t.y-10:g-10,I=t.height<H?t.height:H;else var I=t.height;I-=parseFloat(_.style("padding-top"),10),I-=parseFloat(_.style("padding-bottom"),10),S&&(I-=S.node().offsetHeight||S.node().getBoundingClientRect().height,I-=parseFloat(S.style("padding-top"),10),I-=parseFloat(S.style("padding-bottom"),10)),L&&(I-=L.node().offsetHeight||L.node().getBoundingClientRect().height,I-=parseFloat(L.style("padding-top"),10),I-=parseFloat(L.style("padding-bottom"),10)),R.style("max-height",I+"px")}t.height=x.node().offsetHeight||x.node().getBoundingClientRect().height,s(t.x,t.y,t.id)}},{"../client/pointer.coffee":40,"../client/prefix.coffee":41,"../client/rtl.coffee":42,"../client/scroll.js":43,"../client/scrollbar.coffee":44,"../color/legible.coffee":46,"../color/text.coffee":52,"../core/locale/languages/en_US.coffee":72,"../string/list.coffee":177,"./move.coffee":205,"./remove.coffee":206}],205:[function(t,e,n){var i,r;r=t("../client/scroll.js"),e.exports=function(t,e,n){var o,a,s;return n||(n="default"),s=d3.select("div#d3plus_tooltip_id_"+n),s.node()&&(o=s.datum(),o.cx=t,o.cy=e,o.fixed||(a="body"===o.parent.node().tagName.toLowerCase()?[r.x(),r.y()]:[0,0],"center"!==o.anchor.y?("right"===o.anchor.x?o.x=o.cx-o.arrow_offset-4:"center"===o.anchor.x?o.x=o.cx-o.width/2:"left"===o.anchor.x&&(o.x=o.cx-o.width+o.arrow_offset+2),"bottom"===o.anchor.y?o.flip=o.cy+o.height+o.offset<=o.limit[1]:"top"===o.anchor.y&&(o.flip=o.cy-o.height-o.offset<a[1]),o.flip?o.y=o.cy+o.offset+o.arrow_offset:o.y=o.cy-o.height-o.offset-o.arrow_offset):(o.y=o.cy-o.height/2,"right"===o.anchor.x?o.flip=o.cx+o.width+o.offset<=o.limit[0]:"left"===o.anchor.x&&(o.flip=o.cx-o.width-o.offset<a[0]),"center"===o.anchor.x?(o.flip=!1,o.x=o.cx-o.width/2):o.flip?o.x=o.cx+o.offset+o.arrow_offset:o.x=o.cx-o.width-o.offset),o.x<a[0]?o.x=a[0]:o.x+o.width>o.limit[0]&&(o.x=o.limit[0]-o.width),o.y<a[1]?o.y=a[1]:o.y+o.height>o.limit[1]&&(o.y=o.limit[1]-o.height)),s.style("top",o.y+"px").style("left",o.x+"px"),o.arrow&&s.selectAll(".d3plus_tooltip_arrow").call(i)),s},i=function(t){return t.style("bottom",function(t){return"center"===t.anchor.y||t.flip?"auto":"-5px"}).style("right",function(t){return"center"!==t.anchor.y||t.flip?"auto":"-5px"}).style("top",function(t){return"center"!==t.anchor.y&&t.flip?"-5px":"center"===t.anchor.y?"50%":"auto"}).style("left",function(t){return"center"===t.anchor.y&&t.flip?"-5px":"center"!==t.anchor.y?"50%":"auto"}).style("margin-left",function(t){var e;return"center"===t.anchor.y?"auto":(e="right"===t.anchor.x?-t.width/2+t.arrow_offset/2:"left"===t.anchor.x?t.width/2-2*t.arrow_offset-5:-5,t.cx-t.width/2-5<e?(e=t.cx-t.width/2-5,e<2-t.width/2&&(e=2-t.width/2)):-(t.limit[0]-t.cx-t.width/2+5)>e&&(e=-(t.limit[0]-t.cx-t.width/2+5),e>t.width/2-11&&(e=t.width/2-11)),e+"px")}).style("margin-top",function(t){var e;return"center"!==t.anchor.y?"auto":(e="bottom"===t.anchor.y?-t.height/2+t.arrow_offset/2-1:"top"===t.anchor.y?t.height/2-2*t.arrow_offset-2:-9,t.cy-t.height/2-t.arrow_offset<e?(e=t.cy-t.height/2-t.arrow_offset,e<4-t.height/2&&(e=4-t.height/2)):-(t.limit[1]-t.cy-t.height/2+t.arrow_offset)>e&&(e=-(t.limit[1]-t.cy-t.height/2+t.arrow_offset),e>t.height/2-22&&(e=t.height/2-22)),e+"px")})}},{"../client/scroll.js":43}],206:[function(t,e,n){e.exports=function(t){return t?(d3.selectAll("div#d3plus_tooltip_curtain_"+t).remove(),d3.selectAll("div#d3plus_tooltip_id_"+t).remove()):(d3.selectAll("div.d3plus_tooltip_curtain").remove(),d3.selectAll("div.d3plus_tooltip").remove())}},{}],207:[function(t,e,n){e.exports=function(t,e){var n,i;return n=[],i=1/(e-1)*(t[1]-t[0]),d3.range(t[0],t[1]+i,i)}},{}],208:[function(t,e,n){var i;i=t("./d3selection.coffee"),e.exports=function(t,e){var n;if(!t||!e)return!1;for(i(t)&&(t=t.node()),i(t)&&(e=e.node()),n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1}},{"./d3selection.coffee":211}],209:[function(t,e,n){e.exports=function(t,e){var n,i;return e.constructor===String?(i=t.indexOf(e),i>-1?t[i]:t[0]):(n=t[0],t.forEach(function(t){if(Math.abs(e-t)<Math.abs(e-n))return n=t}),n)}},{}],210:[function(t,e,n){var i,r,o;r=t("../object/merge.coffee"),o=t("../object/validate.coffee"),i=function(t){var e;return o(t)?r(t):t instanceof Array?(e=[],t.forEach(function(t){return e.push(i(t))}),e):t},e.exports=i},{"../object/merge.coffee":174,"../object/validate.coffee":175}],211:[function(t,e,n){var i;i=t("../client/ie.js"),e.exports=function(t){return i?"object"==typeof t&&t instanceof Array&&"size"in t&&"select"in t:t instanceof d3.selection}},{"../client/ie.js":39}],212:[function(t,e,n){e.exports=function(t,e){var n;n=new Image,n.src=t,n.crossOrigin="Anonymous",n.onload=function(){var t,n;t=document.createElement("canvas"),t.width=this.width,t.height=this.height,n=t.getContext("2d"),n.drawImage(this,0,0),e.call(this,t.toDataURL("image/png")),t=null}}},{}],213:[function(t,e,n){var i,r;i=t("../object/validate.coffee"),r=function(t,e,n,o,a,s){var l,u,c,h,d,f,p,g,m,v,y,b,w,x;if(void 0===t)return[];if(o&&void 0===a&&(a=o.id.value),s=!0===s&&void 0===s,t instanceof Array||(t=[t]),v=[],void 0===e)return t.reduce(function(t,e){var n;return n=JSON.stringify(e),v.indexOf(n)<0&&(t.indexOf(e)<0&&t.push(e),v.push(n)),t},[]);if(x=[],l=function(t){var e;if(void 0!==t&&null!==t&&(e=JSON.stringify(t),v.indexOf(e)<0))return x.push(t),v.push(e)},"function"==typeof n&&o)for(c=0,f=t.length;c<f;c++)for(u=t[c],w=r(n(o,u,e,a)),h=0,p=w.length;h<p;h++)b=w[h],l(b);else if("function"==typeof e)for(d=0,g=t.length;d<g;d++)u=t[d],w=e(u),l(w);else for(y=0,m=t.length;y<m;y++)u=t[y],i(u)&&(w=u[e],l(w));return s?x.sort(function(t,e){return t-e}):x},e.exports=r},{"../object/validate.coffee":175}],214:[function(t,e,n){e.exports=function(t){var e,n,i,r,o;for(t.container.value.style("position",function(){var t,e;return t=d3.select(this).style("position"),e=["absolute","fixed"].indexOf(t)>=0,e?t:"relative"}),t.container.changed&&t.container.value.html(""),r=["width","height"],n=0,i=r.length;n<i;n++)o=r[n],t[o].value||(e=function(n){var i,r;return void 0===n.tagName||["BODY","HTML"].indexOf(n.tagName)>=0?(r=window["inner"+o.charAt(0).toUpperCase()+o.slice(1)],i=document!==n&&d3.select(n),i&&("width"===o?(r-=parseFloat(i.style("margin-left"),10),r-=parseFloat(i.style("margin-right"),10),r-=parseFloat(i.style("padding-left"),10),r-=parseFloat(i.style("padding-right"),10)):(r-=parseFloat(i.style("margin-top"),10),r-=parseFloat(i.style("margin-bottom"),10),r-=parseFloat(i.style("padding-top"),10),r-=parseFloat(i.style("padding-bottom"),10))),t[o].value=r<=20?t[o].small:r):(r=parseFloat(d3.select(n).style(o),10),"number"==typeof r&&r>0?t[o].value=r:"BODY"!==n.tagName?e(n.parentNode):void 0)},e(t.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));t.container.value.style("width",t.width.value+"px").style("height",t.height.value+"px")}},{}],215:[function(t,e,n){var i=t("../../core/data/format.js"),r=t("../../core/data/color.js"),o=t("../../core/data/keys.coffee"),a=t("../../core/data/load.coffee"),s=t("./ui/drawer.js"),l=t("./ui/legend.js"),u=t("./ui/timeline.coffee"),c=t("./errorCheck.js"),h=t("../../core/fetch/data.js"),d=t("./finish.js"),f=t("./focus/tooltip.coffee"),p=t("./ui/history.coffee"),g=t("../../core/parse/edges.js"),m=t("../../core/parse/nodes.js"),v=t("../../core/console/print.coffee"),y=t("../../tooltip/remove.coffee"),b=t("./types/run.coffee"),w=t("./shapes/draw.js"),x=t("../../string/format.js"),_=t("./svg/enter.js"),k=t("./svg/update.js"),C=t("./ui/titles.js"),S=t("../../object/validate.coffee");e.exports=function(t){var e=[],n=t.type.value,M=t.format.locale.value,T=M.message.ui,E=M.message.draw,O=["data","attrs","coords","nodes","edges"];if(O.forEach(function(n){t.error.value||t[n].loaded||!t[n].url||e.push({"function":function(t,e){a(t,n,e)},message:M.message.loading,wait:!0})}),t.draw.update){var A=M.visualization[n]||n,D=t.types[n].setup||!1,R=t.types[n].requirements||[],P=x(M.message.initializing,A),N=M.message.data;R instanceof Array||(R=[R]),A=A.toLowerCase(),t.error.value||"function"!=typeof D||e.push({"function":function(t){if(t.dev.value){var e="running "+A+" setup";v.time(e)}D(t),t.dev.value&&v.timeEnd(e)},message:P}),t.container.changed&&e.push({"function":_,message:P}),n in t.g.apps||e.push({"function":function(t){if(t.dev.value){var e="creating "+A+" group";v.time(e)}t.g.apps[n]=t.g.app.append("g").attr("id",n).attr("opacity",0),t.dev.value&&v.timeEnd(e)},message:P}),t.data.changed&&e.push({"function":function(t){t.data.cache={},delete t.nodes.restricted,delete t.edges.restricted,o(t,"data")},message:N}),t.attrs.changed&&e.push({"function":function(t){o(t,"attrs")},message:N}),e.push({"function":function(t){if(!t.color.type||t.color.changed||t.data.changed||t.attrs.changed||t.id.changed||t.depth.changed||t.id.solo.changed||!t.time.fixed.value&&(t.time.solo.changed||t.time.mute.changed)){if(t.color.valueScale=!1,t.dev.value){var e="checking color type";v.time(e)}if(t.color.type=!1,t.color.value){var n=t.color.value;S(n)&&(n=n[t.id.value]?n[t.id.value]:n[d3.keys(n)[0]]),t.data.keys&&n in t.data.keys?t.color.type=t.data.keys[n]:t.attrs.keys&&n in t.attrs.keys&&(t.color.type=t.attrs.keys[n])}else t.data.keys&&(t.color.type=t.data.keys[t.id.value]);t.dev.value&&v.timeEnd(e)}},message:N}),R.indexOf("edges")>=0&&t.edges.value&&(!t.edges.linked||t.edges.changed)&&e.push({"function":g,message:N}),R.indexOf("nodes")>=0&&t.edges.value&&(!t.nodes.positions||t.nodes.changed||t.type.changed)&&e.push({"function":m,message:N}),(t.data.changed||t.time.changed||t.time.format.changed||t.type.changed||t.id.changed||t.x.scale.changed&&[t.x.scale.value,t.x.scale.previous].indexOf("discrete")>=0||t.y.scale.changed&&[t.y.scale.value,t.y.scale.previous].indexOf("discrete")>=0)&&e.push({"function":i,message:N}),t.error.value||e.push({"function":function(t){var e=t.time.fixed.value?["all"]:null;if(t.dev.value){var n=e?"fetching pool data":"fetching data";v.time(n)}t.data.pool=h(t,e),t.dev.value&&v.timeEnd(n),e?(t.dev.value&&v.time("fetching data for current year"),t.data.viz=h(t),t.dev.value&&v.timeEnd("fetching data for current year")):t.data.viz=t.data.pool,t.draw.timing=t.data.viz.length<t.data.large?t.timing.transitions:0},message:N}),t.error.value||e.push({check:function(t){return t.color.value&&"number"===t.color.type&&t.color.valueScale===!1},"function":r,message:N})}return e.push({"function":function(t){if(t.dev.value){var e=t.format.locale.value.message.tooltipReset;v.time(e)}t.type.previous&&n!==t.type.previous&&y(t.type.previous),y(n),t.dev.value&&v.timeEnd(e)},message:T}),t.error.value||e.push({"function":c,message:T}),e.push({"function":function(t){if(t.margin.process(),C(t),!t.error.value)if(t.draw.update)s(t),u(t),l(t);else{t.dev.value&&v.time("calculating margins");var e=t.container.value.select("div#d3plus_drawer").node().offsetHeight||t.container.value.select("div#d3plus_drawer").node().getBoundingClientRect().height,n=t.g.timeline.node().getBBox();n=t.timeline.value?n.height+t.ui.padding:0;var i=t.g.legend.node().getBBox();i=t.legend.value?i.height+t.ui.padding:0,t.margin.bottom+=e+n+i,t.dev.value&&v.timeEnd("calculating margins")}p(t),t.height.viz-=t.margin.top+t.margin.bottom,t.width.viz-=t.margin.left+t.margin.right},message:T}),t.error.value||e.push({"function":f,message:T}),e.push({"function":k,message:E}),!t.error.value&&t.draw.update&&e.push({"function":[b,w],message:E}),e.push({"function":d,message:E}),e}},{"../../core/console/print.coffee":54,"../../core/data/color.js":56,"../../core/data/format.js":58,"../../core/data/keys.coffee":60,"../../core/data/load.coffee":61,"../../core/fetch/data.js":66,"../../core/parse/edges.js":97,"../../core/parse/nodes.js":100,"../../object/validate.coffee":175,"../../string/format.js":176,"../../tooltip/remove.coffee":206,"./errorCheck.js":216,"./finish.js":217,"./focus/tooltip.coffee":218,"./shapes/draw.js":228,"./svg/enter.js":241,"./svg/update.js":242,"./types/run.coffee":245,"./ui/drawer.js":246,"./ui/history.coffee":247,"./ui/legend.js":248,"./ui/timeline.coffee":250,"./ui/titles.js":251}],216:[function(t,e,n){var i=t("../../core/fetch/text.js"),r=t("../../core/console/print.coffee"),o=t("../../core/methods/rejected.coffee"),a=t("../../string/format.js"),s=t("../../string/list.coffee");e.exports=function(t){t.dev.value&&r.time("checking for errors");var e=["id"],n=t.types[t.type.value].requirements;n&&(n instanceof Array?e=e.concat(t.types[t.type.value].requirements):e.push(n));var l=[];if(e.forEach(function(e){if("string"==typeof e)t[e].value||l.push('"'+e+'"');else if("function"==typeof e){var n=e(t);!n.status&&n.text&&l.push('"'+n.text+'"')}}),l.length>1){var u=t.format.locale.value.error.methods,c=t.format.locale.value.visualization[t.type.value]||t.type.value,h=t.format.locale.value.ui.and;l=s(l,h),t.error.internal=a(u,c,l)}else if(1===l.length){var u=t.format.locale.value.error.method,c=t.format.locale.value.visualization[t.type.value]||t.type.value;t.error.internal=a(u,c,l[0])}if(!t.error.internal&&e.indexOf("edges")>=0&&e.indexOf("focus")>=0){var d=t.edges.connections(t.focus.value[0],t.id.value);if(0==d.length){var f=i(t,t.focus.value[0],t.depth.value),u=t.format.locale.value.error.connections;t.error.internal=a(u,'"'+f+'"')}}var e=["d3"];t.types[t.type.value].libs&&(e=e.concat(t.types[t.type.value].libs));var l=[];if(e.forEach(function(t){window[t]||l.push('"'+t+'"')}),l.length>1){var u=t.format.locale.value.error.libs,c=t.format.locale.value.visualization[t.type.value],h=t.format.locale.value.ui.and;l=s(l,h),t.error.internal=a(u,c,l)}else if(1===l.length){var u=t.format.locale.value.error.lib,c=t.format.locale.value.visualization[t.type.value];t.error.internal=a(u,c,l[0])}var p=t.shape.accepted(t);p instanceof Array||(p=[p]);var g=t.shape.value;if(g&&!o(t,p,g,"shape")||t.self.shape(p[0]),"modes"in t.types[t.type.value]){var m=t.types[t.type.value].modes;m instanceof Array||(m=[m]);var v=t.type.mode.value;v&&!o(t,m,v,"mode")||t.self.type({mode:m[0]})}t.dev.value&&r.timeEnd("checking for errors")}},{"../../core/console/print.coffee":54,"../../core/fetch/text.js":68,"../../core/methods/rejected.coffee":93,"../../string/format.js":176,"../../string/list.coffee":177}],217:[function(t,e,n){var i=t("./shapes/edges.js"),r=t("./shapes/paths.js"),o=t("./ui/message.js"),a=t("./focus/viz.js"),s=t("../../core/methods/reset.coffee"),l=t("../../core/console/print.coffee"),u=t("./shapes/labels.js"),c=t("../../string/title.coffee"),h=t("./zoom/bounds.coffee"),d=t("./zoom/labels.coffee"),f=t("./zoom/mouse.coffee");e.exports=function(t){if(t.draw.first?setTimeout(function(){a(t)},t.draw.timing):a(t),!t.error.value){var e=t.zoom.viewport||t.zoom.bounds;t.types[t.type.value].zoom&&t.zoom.value&&e?(t.dev.value&&l.time("calculating zoom"),t.draw.first||t.zoom.reset?h(t,e,0):(t.type.changed||t.focus.changed||t.height.changed||t.width.changed||t.nodes.changed||t.legend.changed||t.timeline.changed||t.ui.changed)&&h(t,e),t.dev.value&&l.timeEnd("calculating zoom")):(t.zoom.bounds=[[0,0],[t.width.viz,t.height.viz]],t.zoom.scale=1,h(t))}var n=t.zoom.size?t.zoom.size.width:t.width.viz,p=t.zoom.size?t.zoom.size.height:t.height.viz,g=t.zoom.bounds?t.zoom.bounds[0][0]:0,m=t.zoom.bounds?t.zoom.bounds[0][1]:0;if(t.g.overlay.attr("width",n).attr("height",p).attr("x",g).attr("y",m),t.error.value||(t.draw.update?(t.edges.path?r(t):i(t),u(t,"data"),t.edges.label&&!t.edges.path&&setTimeout(function(){u(t,"edges")},t.draw.timing+200)):(t.labels.value||t.labels.changed)&&t.types[t.type.value].zoom&&t.zoom.value&&t.draw.timing&&setTimeout(function(){d(t)},t.draw.timing)),!t.error.value){var v=t.types[t.type.value].requirements||[];v instanceof Array||(v=[v]);var y=v.indexOf("data")>=0;t.error.internal||t.data.viz&&t.returned.nodes.length||!y||(t.error.internal=t.format.locale.value.error.data)}var b=t.type.previous;if(b&&t.type.value!=b&&t.g.apps[b]&&(t.dev.value&&l.time('hiding "'+b+'"'),t.draw.timing?t.g.apps[b].transition().duration(t.draw.timing).attr("opacity",0):t.g.apps[b].attr("opacity",0),t.dev.value&&l.timeEnd()),!t.error.value){var w=y&&0===t.data.viz.length||t.error.internal||t.error.value?0:t.focus.value.length&&t.types[t.type.value].zoom&&t.zoom.value?1-t.tooltip.curtain.opacity:1,x=t.draw.timing;t.group.transition().duration(x).attr("opacity",w),t.g.data.transition().duration(x).attr("opacity",w),t.g.edges.transition().duration(x).attr("opacity",w)}t.error.value?o(t,t.error.value):t.error.internal?(t.error.internal=c(t.error.internal),l.warning(t.error.internal),o(t,t.error.internal),t.error.internal=null):o(t),setTimeout(function(){s(t),t.types[t.type.value].zoom&&t.zoom.value?(t.g.zoom.datum(t).call(t.zoom.behavior.on("zoom",f)),t.zoom.scroll.value||t.g.zoom.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null),t.zoom.click.value||t.g.zoom.on("dblclick.zoom",null),t.zoom.pan.value||t.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)):t.g.zoom.call(t.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},t.draw.timing)}},{"../../core/console/print.coffee":54,"../../core/methods/reset.coffee":95,"../../string/title.coffee":179,"./focus/viz.js":219,"./shapes/edges.js":229,"./shapes/labels.js":231,"./shapes/paths.js":233,"./ui/message.js":249,"./zoom/bounds.coffee":252,"./zoom/labels.coffee":254,"./zoom/mouse.coffee":255}],218:[function(t,e,n){var i,r,o,a;i=t("../tooltip/create.js"),r=t("../../../core/fetch/value.coffee"),o=t("../../../core/console/print.coffee"),a=t("../../../tooltip/remove.coffee"),e.exports=function(t){var e,n,s;n=t.focus,!t.error.internal&&1===n.value.length&&n.value.length&&!t.small&&n.tooltip.value?(t.dev.value&&o.time("drawing focus tooltip"),e=t.data.pool.filter(function(e){return r(t,e,t.id.value)===n.value[0]}),e.length>=1?e=e[0]:(e={},e[t.id.value]=n.value[0]),s=t.labels.padding,i({anchor:"top left",arrow:!1,data:e,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:t.height.viz-2*s,mouseevents:!0,offset:0,vars:t,width:t.tooltip.large,x:t.width.value-t.margin.right-s,y:t.margin.top+s}),t.width.viz-=t.tooltip.large+2*s,t.dev.value&&o.timeEnd("drawing focus tooltip")):a("visualization_focus")}},{"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../tooltip/remove.coffee":206,"../tooltip/create.js":243}],219:[function(t,n,i){var r=t("../../../client/pointer.coffee"),o=t("../../../client/ie.js"),a=t("../../../core/fetch/value.coffee"),s=t("../../../core/console/print.coffee"),l=t("../../../util/uniques.coffee");n.exports=function(t){if(t.g.edge_focus.selectAll("g").remove(),t.g.data_focus.selectAll("g").remove(),t.focus.value.length&&t.types[t.type.value].zoom&&t.zoom.value){t.dev.value&&s.time("drawing focus elements");var n=t.g.edges.selectAll("g");if(n.size()>0){n.each(function(e){var n=e[t.edges.source][t.id.value],i=e[t.edges.target][t.id.value];if(n==t.focus.value[0]||i==t.focus.value[0]){var r=t.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(r).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var i=t.edges.arrows.value;t.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",t.color.focus).style("stroke-width",function(){return o&&t.types[t.type.value].zoom?0:t.edges.size.value?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var r="_"+e.d3plus.bucket;else var r="";return"source"==n&&i?"url(#d3plus_edge_marker_focus"+r+")":"none"}).attr("marker-end",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var r="_"+e.d3plus.bucket;else var r="";return"target"==n&&i?"url(#d3plus_edge_marker_focus"+r+")":"none"}),t.g.edge_focus.selectAll("text").style("fill",t.color.focus)}var u=l(t.edges.connections(t.focus.value[0],t.id.value,!0),t.id.value,a,t);u.push(t.focus.value[0]);var c=[],h=[],d=[0],f=[0];t.g.data.selectAll("g").each(function(n){if(u.indexOf(n[t.id.value])>=0){var i=t.g.data_focus.node().appendChild(this.cloneNode(!0)),i=d3.select(i).datum(n).attr("opacity",1);"coordinates"==t.shape.value?t.zoom.viewport=t.path.bounds(t.zoom.coords[n.d3plus.id]):"d3plus"in n&&("x"in n.d3plus&&c.push(n.d3plus.x),"y"in n.d3plus&&h.push(n.d3plus.y),"r"in n.d3plus?(d.push(n.d3plus.r),f.push(n.d3plus.r)):("width"in n.d3plus&&d.push(n.d3plus.width/2),"height"in n.d3plus&&f.push(n.d3plus.height/2)));for(e in r){var o=d3.select(this).on(r[e]);o&&i.on(r[e],o)}}});if(c.length&&h.length){var p=d3.extent(c),g=d3.extent(h),m=d3.max(d),v=d3.max(f);t.zoom.viewport=[[p[0]-m,g[0]-v],[p[1]+m,g[1]+v]]}t.g.data_focus.selectAll("path").style("stroke-width",o&&t.types[t.type.value].zoom?0:2*t.data.stroke.width),t.dev.value&&s.timeEnd("drawing focus elements")}else t.zoom.viewport=!1}},{"../../../client/ie.js":39,"../../../client/pointer.coffee":40,"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../util/uniques.coffee":213}],220:[function(t,e,n){var i,r,o,a;a=t("./style.coffee"),r=t("../../../geom/largestRect.coffee"),o=t("../../../geom/path2poly.coffee"),i={start:{},end:{}},e.exports=function(t,e,n,s){var l,u,c,h;l=d3.svg.arc().innerRadius(0).outerRadius(function(t){return t.d3plus.r}).startAngle(function(t){return t.d3plus.startAngle}).endAngle(function(t){return t.d3plus.endAngle}),c=function(e){var n,i;return t.labels.value&&(e.d3plus.label?e.d3plus_label=e.d3plus.label:(n=o(l(e)),i=r(n,{angle:0}),i[0]?e.d3plus_label={w:i[0].width,h:i[0].height,x:i[0].cx,y:i[0].cy}:delete e.d3plus_label)),[e]},t.draw.timing?(h=d3.svg.arc().innerRadius(0).outerRadius(function(t){return t.d3plus.r}).startAngle(function(t){return void 0===i.start[t.d3plus.id]&&(i.start[t.d3plus.id]=0),isNaN(i.start[t.d3plus.id])&&(i.start[t.d3plus.id]=t.d3plus.startAngle),i.start[t.d3plus.id]}).endAngle(function(t){return void 0===i.end[t.d3plus.id]&&(i.end[t.d3plus.id]=0),isNaN(i.end[t.d3plus.id])&&(i.end[t.d3plus.id]=t.d3plus.endAngle),i.end[t.d3plus.id]}),u=function(t,e){return t.attrTween("d",function(t){var n,r,o,a;return void 0===e?(a=t.d3plus.startAngle,n=t.d3plus.endAngle):0===e&&(a=0,n=0),o=d3.interpolate(i.start[t.d3plus.id],a),r=d3.interpolate(i.end[t.d3plus.id],n),function(e){return i.start[t.d3plus.id]=o(e),i.end[t.d3plus.id]=r(e),h(t)}})},n.append("path").attr("class","d3plus_data").call(a,t).attr("d",h),e.selectAll("path.d3plus_data").data(c).transition().duration(t.draw.timing).call(a,t).call(u),s.selectAll("path.d3plus_data").transition().duration(t.draw.timing).call(u,0)):(n.append("path").attr("class","d3plus_data"),e.selectAll("path.d3plus_data").data(c).call(a,t).attr("d",l))}},{"../../../geom/largestRect.coffee":162,"../../../geom/path2poly.coffee":164,"./style.coffee":237}],221:[function(t,e,n){var i=t("../../../core/fetch/text.js"),r=t("../../../font/sizes.coffee"),o=t("../../../geom/largestRect.coffee"),a=t("./style.coffee");e.exports=function(t,e,n,s){var l=d3.svg.area().x(function(t){return t.d3plus.x}).y0(function(t){return t.d3plus.y0}).y1(function(t){return t.d3plus.y}).interpolate(t.shape.interpolate.value),u=d3.svg.area().x(function(t){return t.d3plus.x}).y0(function(t){return t.d3plus.y0}).y1(function(t){return t.d3plus.y0}).interpolate(t.shape.interpolate.value);n.append("path").attr("class","d3plus_data").attr("d",function(t){return u(t.values)}).call(a,t);var c={"font-weight":t.labels.font.weight,"font-family":t.labels.font.family.value};e.selectAll("path.d3plus_data").data(function(e){if(t.labels.value&&e.values.length>1){var n=d3.max(e.values,function(t){return t.d3plus.y0-t.d3plus.y}),a=!1;if(n>t.labels.font.size){var s=[],l=[],u=i(t,e);e.values.forEach(function(t){s.push([t.d3plus.x,t.d3plus.y]),l.push([t.d3plus.x,t.d3plus.y0])}),s=s.concat(l.reverse());var h=null;if(u.length){var d=r(u[0],c);h=d[0].width/d[0].height}a=o(s,{angle:d3.range(-70,71,1),aspectRatio:h,tolerance:0})}if(a&&a[0]){var f={w:~~a[0].width,h:~~a[0].height,x:~~a[0].cx,y:~~a[0].cy,angle:a[0].angle*-1,padding:2,names:u};0!==a[0].angle?f.translate={x:f.x,y:f.y}:f.translate=!1,f.w>=10&&f.h>=10&&(e.d3plus_label=f)}}return[e]}),t.draw.timing?e.selectAll("path.d3plus_data").transition().duration(t.draw.timing).attr("d",function(t){return l(t.values)}).call(a,t):e.selectAll("path.d3plus_data").attr("d",function(t){return l(t.values)}).call(a,t)}},{"../../../core/fetch/text.js":68,"../../../font/sizes.coffee":104,"../../../geom/largestRect.coffee":162,"./style.coffee":237}],222:[function(t,e,n){var i=(t("../../../core/fetch/text.js"),t("../../../geom/largestRect.coffee"),t("./style.coffee"));e.exports=function(t,e,n,r){function o(t){t.attr("transform","scale(1)")}function a(t){t.attr("transform",function(t){var e=Math.min(t.d3plus.width,t.d3plus.height),n=Math.floor(e/16);return"scale("+n+")"})}n.append("path").attr("class","d3plus_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(o).call(i,t),e.selectAll("path.d3plus_data").data(function(t){return[t]}),t.draw.timing?e.selectAll("path.d3plus_data").transition().duration(t.draw.timing).call(a).call(i,t):e.selectAll("path.d3plus_data").call(a).call(i,t)}},{"../../../core/fetch/text.js":68,"../../../geom/largestRect.coffee":162,"./style.coffee":237}],223:[function(t,e,n){var i,r,o,a;r=t("../../../core/fetch/value.coffee"),i=t("../../../core/fetch/color.coffee"),o=t("../../../color/lighter.coffee"),a=t("./segments.coffee"),e.exports=function(t,e,n){var r,s,l,u;return s=t.d3plus.shape||e.shape.value,"line"===e.shape.value&&"circle"!==s?"none":"area"===e.shape.value||"active"===s||"line"===e.shape.value?i(e,t):"temp"===s?n?i(e,t):"url(#d3plus_hatch_"+t.d3plus.id+")":t.d3plus["static"]?o(i(e,t),.75):(r=a(e,t,"active"),l=a(e,t,"temp"),u=a(e,t,"total"),!e.active.value&&!e.temp.value||r===!0||r&&u&&r>=u&&!l||r&&!u?i(e,t):e.active.spotlight.value?e.color.missing:o(i(e,t),.75))}},{"../../../color/lighter.coffee":47,"../../../core/fetch/color.coffee":65,"../../../core/fetch/value.coffee":69,"./segments.coffee":236}],224:[function(t,e,n){var i,r,o,a,s,l,u,c;i=t("../../../util/copy.coffee"),r=t("../../../network/distance.coffee"),o=t("../../../core/fetch/text.js"),a=t("../../../font/sizes.coffee"),l=t("../../../geom/largestRect.coffee"),u=t("../../../geom/path2poly.coffee"),c=t("./style.coffee"),s={},e.exports=function(t,e,n,h){var d,f;return d=d3.geo[t.coords.projection.value](),d.center&&d.center(t.coords.center),t.zoom.scale||(t.zoom.scale=1),t.zoom.area=1/t.zoom.scale/t.zoom.scale,t.path=d3.geo.path().projection(d),t.draw.timing?e.selectAll("path.d3plus_data").attr("d",t.path).transition().duration(t.draw.timing).call(c,t):e.selectAll("path.d3plus_data").attr("d",t.path).call(c,t),n.append("path").attr("id",function(t){return t.id}).attr("class","d3plus_data").attr("d",t.path).call(c,t),f=t.old_height!==t.height.viz||t.height.changed||t.old_width!==t.width.viz||t.width.changed,t.old_height=t.height.viz,t.old_width=t.width.viz,t.coords.changed||f||t.coords.mute.changed||t.coords.solo.changed||t.type.changed||t.text.changed||t.coords.projection.changed||t.labels.changed?(t.zoom.bounds=null,t.zoom.reset=!0,t.zoom.coords={},e.each(function(e){var n,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O;if(t.coords.simplify.value&&e.geometry.coordinates.length>1){for(v=[],c=[],n=0,w=i(e),M=i(e),e.geometry.coordinates=e.geometry.coordinates.filter(function(e,i){var r;return M.geometry.coordinates=[e],r=t.path.area(M),r>0&&(c.push(r),r>n&&(w.geometry.coordinates=[e],n=r),!0)}),f=t.path.centroid(w),T=e.geometry.coordinates,y=b=0,x=T.length;b<x;y=++b)d=T[y],M.geometry.coordinates=[d],v.push(r(t.path.centroid(M),f));m=v.reduce(function(t,e,n){return e&&t.push(c[n]/e),t},[]),g=d3.quantile(m,t.coords.threshold.value),M.geometry.coordinates=e.geometry.coordinates.filter(function(t,e){var n,i;return i=v[e],n=c[e],0===i||n/i>=g}),p=w.geometry.coordinates[0],p&&"MultiPolygon"===w.geometry.type&&(p=p[0],w.geometry.coordinates[0]=p,w.geometry.type="Polygon")}else M=e,w=e,p=e.geometry.coordinates[0];return t.zoom.coords[e.d3plus.id]=M,delete e.d3plus_label,t.labels.value&&(_=o(t,e),p&&_.length&&(k=u(t.path(w)),O={"font-weight":t.labels.font.weight,"font-family":t.labels.font.family.value},C=null,1===_[0].split(" ").length&&(E=a(_[0],O)[0],C=E.width/E.height),S=l(k,{angle:0,aspectRatio:C}),S&&(S=S[0],e.d3plus_label={anchor:"middle",valign:"center",h:S.height,w:S.width,x:S.cx,y:S.cy,names:_}))),s[e.id]=e.d3plus_label,h=t.path.bounds(M),t.zoom.bounds?(t.zoom.bounds[0][0]>h[0][0]&&(t.zoom.bounds[0][0]=h[0][0]),t.zoom.bounds[0][1]>h[0][1]&&(t.zoom.bounds[0][1]=h[0][1]),t.zoom.bounds[1][0]<h[1][0]&&(t.zoom.bounds[1][0]=h[1][0]),t.zoom.bounds[1][1]<h[1][1]?t.zoom.bounds[1][1]=h[1][1]:void 0):t.zoom.bounds=h})):t.focus.value.length?void 0:(t.zoom.viewport=!1,e.each(function(t){return t.d3plus_label=s[t.id]}))}},{"../../../core/fetch/text.js":68,"../../../font/sizes.coffee":104,"../../../geom/largestRect.coffee":162,"../../../geom/path2poly.coffee":164,"../../../network/distance.coffee":168,"../../../util/copy.coffee":210,"./style.coffee":237}],225:[function(t,e,n){var i=t("./style.coffee");e.exports=function(t,e,n,r){function o(t){t.attr("d",d3.svg.symbol().type("cross").size(10))}function a(t){t.attr("d",d3.svg.symbol().type("cross").size(function(t){var e=Math.min(t.d3plus.width,t.d3plus.height);return d3.scale.pow().exponent(2)(e/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(i,t),e.selectAll("path.d3plus_data").data(function(t){return[t]}),t.draw.timing?e.selectAll("path.d3plus_data").transition().duration(t.draw.timing).call(a).call(i,t):e.selectAll("path.d3plus_data").call(a).call(i,t)}},{"./style.coffee":237}],226:[function(t,e,n){var i=t("./style.coffee");e.exports=function(t,e,n,r){function o(t){t.attr("d",d3.svg.symbol().type("diamond").size(10));
}function a(t){t.attr("d",d3.svg.symbol().type("diamond").size(function(t){var e=Math.min(t.d3plus.width,t.d3plus.height);return d3.scale.pow().exponent(2)(e/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(i,t),e.selectAll("path.d3plus_data").data(function(t){return[t]}),t.draw.timing?e.selectAll("path.d3plus_data").transition().duration(t.draw.timing).call(a).call(i,t):e.selectAll("path.d3plus_data").call(a).call(i,t)}},{"./style.coffee":237}],227:[function(t,e,n){var i=t("./style.coffee");e.exports=function(t,e,n,r){function o(e,n,i,r){if(!n)var n=0;if("number"!=typeof i)var i=void 0;if("number"!=typeof r)var r=void 0;e.attrTween("d",function(e){if(void 0==i)var o=e.d3plus.r?e.d3plus.r:d3.max([e.d3plus.width,e.d3plus.height]);else var o=i;if(void 0==r)var a=e.d3plus.segments[e.d3plus.shape];else var a=r;t.arcs[e.d3plus.shape][e.d3plus.id]||(t.arcs[e.d3plus.shape][e.d3plus.id]={r:0},t.arcs[e.d3plus.shape][e.d3plus.id].a=2*Math.PI);var l=d3.interpolate(t.arcs[e.d3plus.shape][e.d3plus.id].r,o+n),u=d3.interpolate(t.arcs[e.d3plus.shape][e.d3plus.id].a,a);return function(n){return t.arcs[e.d3plus.shape][e.d3plus.id].r=l(n),t.arcs[e.d3plus.shape][e.d3plus.id].a=u(n),s(e)}})}function a(t){return t.d3plus.label?t.d3plus_label=t.d3plus.label:delete t.d3plus_label,[t]}t.arcs||(t.arcs={donut:{},active:{},temp:{}});var s=d3.svg.arc().startAngle(0).endAngle(function(e){var n=t.arcs[e.d3plus.shape][e.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(e){if(e.d3plus["static"])return 0;var n=t.arcs[e.d3plus.shape][e.d3plus.id].r;return n*t.data.donut.size}).outerRadius(function(e){return t.arcs[e.d3plus.shape][e.d3plus.id].r});t.draw.timing?(r.selectAll("path.d3plus_data").transition().duration(t.draw.timing).call(o,0,0).each("end",function(e){delete t.arcs[e.d3plus.shape][e.d3plus.id]}),e.selectAll("path.d3plus_data").data(a).transition().duration(t.draw.timing).call(o).call(i,t),n.append("path").attr("class","d3plus_data").transition().duration(0).call(o,0,0).call(i,t).transition().duration(t.draw.timing).call(o).call(i,t)):(r.selectAll("path.d3plus_data").each(function(e){delete t.arcs[e.d3plus.shape][e.d3plus.id]}),n.append("path").attr("class","d3plus_data"),e.selectAll("path.d3plus_data").data(a).call(o).call(i,t))}},{"./style.coffee":237}],228:[function(t,e,n){var i=t("../../../util/child.coffee"),r=t("../../../util/closest.coffee"),o=t("../tooltip/create.js"),a=t("../../../client/pointer.coffee"),s=t("../../../core/fetch/value.coffee"),l=t("../../../core/fetch/color.coffee"),u=t("../../../core/fetch/text.js"),c=t("../../../color/legible.coffee"),h=t("../../../core/console/print.coffee"),d=t("../../../tooltip/remove.coffee"),f=t("./segments.coffee"),p=t("./fill.js"),g=t("../../../string/strip.js"),m=t("../../../client/touch.coffee"),v=t("../zoom/propagation.coffee"),y=t("../../../util/uniques.coffee"),b=t("../../../object/validate.coffee"),w=t("../zoom/direction.coffee"),x={arc:t("./arc.coffee"),area:t("./area.js"),check:t("./check.js"),coordinates:t("./coordinates.coffee"),cross:t("./cross.js"),diamond:t("./diamond.js"),donut:t("./donut.js"),line:t("./line.js"),radial:t("./radial.coffee"),rect:t("./rect.coffee"),triangle_down:t("./triangle_down.js"),triangle_up:t("./triangle_up.js"),whisker:t("./whisker.coffee")};e.exports=function(t){function e(e){if(!e.d3plus.id){e.d3plus.id="";for(var n=0;n<=t.depth.value;n++)e.d3plus.id+=s(t,e,t.id.nesting[n])+"_";e.d3plus.id+=A,["x","y","x2","y2"].forEach(function(n){if("discrete"==t[n].scale.value){var i=s(t,e,t[n].value);i.constructor===Date&&(i=i.getTime()),e.d3plus.id+="_"+i}}),e.d3plus.suffix&&(e.d3plus.id+="_"+e.d3plus.suffix),e.d3plus.id=g(e.d3plus.id)}return e}function n(e,n){var i=t.types[t.type.value].scale,r=1;i&&(b[i]&&t.shape.value in i?r=i[t.shape.value]:"function"==typeof i?r=i(t,t.shape.value):"number"==typeof i&&(r=i)),r=n?r:1,e.attr("transform",function(t){if(["line","area","coordinates"].indexOf(A)<0){var e=t.d3plus.x||0,n=t.d3plus.y||0;return"translate("+e+","+n+")scale("+r+")"}return"scale("+r+")"})}function _(e){e.attr("id",function(t){return"d3plus_group_"+t.d3plus.id}).attr("class",function(e){var n=t["class"].value?" "+s(t,e,t["class"].value):"";return"d3plus_"+A+n})}function k(e){if(e&&t.g.edges.selectAll("g").size()>0){t.g.edge_hover.selectAll("*").remove(),t.g.edges.selectAll("g").each(function(n){var i=e[t.id.value],r=n[t.edges.source][t.id.value],o=n[t.edges.target][t.id.value];if(r==i||r=="left_"+i||r=="right_"+i||o==i||o=="left_"+i||o=="right_"+i){var a=t.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(a).datum(n).attr("opacity",1).selectAll("line, path").datum(n)}});var n=t.edges.arrows.value;t.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",t.color.primary).style("stroke-width",function(e){return t.edges.path&&e.dy?Math.max(1,e.dy):t.edges.size.value?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var i=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var r="_"+e.d3plus.bucket;else var r="";return"source"==i&&n?"url(#d3plus_edge_marker_highlight"+r+")":"none"}).attr("marker-end",function(e){var i=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var r="_"+e.d3plus.bucket;else var r="";return"target"==i&&n?"url(#d3plus_edge_marker_highlight"+r+")":"none"}),t.g.edge_hover.selectAll("text").style("fill",t.color.primary),t.draw.timing?(t.g.edge_hover.transition().duration(t.timing.mouseevents).attr("opacity",1),t.g.edges.transition().duration(t.timing.mouseevents).attr("opacity",.5)):t.g.edge_hover.attr("opacity",1)}else t.draw.timing?(t.g.edge_hover.transition().duration(t.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),t.g.edges.transition().duration(t.timing.mouseevents).attr("opacity",1)):t.g.edge_hover.selectAll("*").remove()}var C=t.returned.nodes||[],S=t.returned.edges||[];t.draw.timing=C.length<t.data.large&&S.length<t.edges.large?t.timing.transitions:0;var M={arc:"arc",area:"area",check:"check",circle:"rect",coordinates:"coordinates",cross:"cross",donut:"donut",diamond:"diamond",line:"line",plus:"cross",radial:"radial",rect:"rect",square:"rect",triangle_down:"triangle_down",triangle:"triangle_up",triangle_up:"triangle_up",whisker:"whisker"},T={};C.forEach(function(e){var n=e.d3plus&&e.d3plus.shape?e.d3plus.shape:t.shape.value;n in M&&(e.d3plus&&(e.d3plus.shape=n),n=M[n],T[n]||(T[n]=[]),T[n].push(e))});for(var E in M)if(!(M[E]in T)||0===d3.keys(T).length){var O=t.g.data.selectAll("g.d3plus_"+M[E]);t.draw.timing?O.transition().duration(t.draw.timing).attr("opacity",0).remove():O.remove()}for(var A in T){var D=t.g.data.selectAll("g.d3plus_"+A).data(T[A],function(n){if(n.d3plus||(n.d3plus={}),"coordinates"===A)return n.d3plus.id=n.id,n.id;if(!n.d3plus.id)if(n.values)n.values.forEach(function(t){t=e(t),t.d3plus.shape="circle"}),n.d3plus.id=n.key;else if(n=e(n),!n.d3plus.segments){n.d3plus.segments={donut:2*Math.PI};var i=f(t,n,"active"),r=f(t,n,"temp"),o=f(t,n,"total");o&&(i?n.d3plus.segments.active=i/o*(2*Math.PI):n.d3plus.segments.active=0,r?n.d3plus.segments.temp=r/o*(2*Math.PI)+n.d3plus.segments.active:n.d3plus.segments.temp=0)}return!!n.d3plus&&n.d3plus.id});if(t.draw.timing)var R=D.exit().transition().duration(t.draw.timing).attr("opacity",0).remove();else var R=D.exit().remove();t.draw.timing?D.transition().duration(t.draw.timing).call(n).call(_):D.call(n).call(_);var P=t.draw.timing?0:1,N=D.enter().append("g").attr("opacity",P).call(n).call(_);t.draw.timing&&N.transition().duration(t.draw.timing).attr("opacity",1),D.order(),t.dev.value&&h.time('drawing "'+A+'" shapes'),x[A](t,D,N,R,n),t.dev.value&&h.timeEnd('drawing "'+A+'" shapes'),["rect","donut"].indexOf(A)>=0&&t.types[t.type.value].fill&&(t.dev.value&&h.time('filling "'+A+'" shapes'),p(t,D,N,R,n),t.dev.value&&h.timeEnd('filling "'+A+'" shapes'))}if(k(),t.tooltip.value)t.g.data.selectAll("g").on(a.over,function(e){if(m&&v(t,d3.event),d3.event.buttons||!t.mouse.value||!t.mouse.over.value||t.draw.frozen||e.d3plus&&e.d3plus["static"])d(t.type.value);else{var i="function"!=typeof t.mouse.over.value;if("function"==typeof t.mouse.over.value&&(i=t.mouse.over.value(e,t.self)),i){var s=w(e.d3plus_data||e,t),l="function"==typeof t.mouse.viz||"function"==typeof t.mouse.viz[a.click]||t.zoom.value&&(t.types[t.type.value].zoom||e.d3plus.threshold&&e.d3plus.merged||1===s||s===-1&&t.history.states.length&&!t.tooltip.value["long"]);if(d3.select(this).style("cursor",l?"pointer":"auto").transition().duration(t.timing.mouseevents).call(n,!0),d3.select(this).selectAll(".d3plus_data").transition().duration(t.timing.mouseevents).attr("opacity",1),t.covered=!1,e.values&&t.axes.discrete){var u="x"===t.axes.discrete?0:1,c=d3.mouse(t.container.value.node())[u],h=y(e.values,function(e){return e.d3plus[t.axes.discrete]}),f=r(h,c);e.d3plus_data=e.values[h.indexOf(f)],e.d3plus=e.values[h.indexOf(f)].d3plus}var p=e.d3plus_data?e.d3plus_data:e;o({vars:t,data:p}),"function"==typeof t.mouse.viz?t.mouse.viz(e.d3plus_data||e,t):t.mouse.viz[a.over]&&t.mouse.viz[a.over](e.d3plus_data||e,t),k(e)}}}).on(a.move,function(e){if(m&&v(t,d3.event),d3.event.buttons||!t.mouse.value||!t.mouse.move.value||t.draw.frozen||e.d3plus&&e.d3plus["static"])d(t.type.value);else{var n="function"!=typeof t.mouse.move.value;if("function"==typeof t.mouse.move.value&&(n=t.mouse.move.value(e,t.self)),n){var i=w(e.d3plus_data||e,t),s="function"==typeof t.mouse.viz||"function"==typeof t.mouse.viz[a.click]||t.zoom.value&&(t.types[t.type.value].zoom||e.d3plus.threshold&&e.d3plus.merged||1===i||i===-1&&t.history.states.length&&!t.tooltip.value["long"]);d3.select(this).style("cursor",s?"pointer":"auto");t.types[t.type.value].tooltip||"follow";if(e.values&&t.axes.discrete){var l="x"===t.axes.discrete?0:1,u=d3.mouse(t.container.value.node())[l],c=y(e.values,function(e){return e.d3plus[t.axes.discrete]}),h=r(c,u);e.d3plus_data=e.values[c.indexOf(h)],e.d3plus=e.values[c.indexOf(h)].d3plus}var f=e.d3plus_data?e.d3plus_data:e;o({vars:t,data:f}),"function"==typeof t.mouse.viz?t.mouse.viz(e.d3plus_data||e,t):t.mouse.viz[a.move]&&t.mouse.viz[a.move](e.d3plus_data||e,t)}}}).on(a.out,function(e){if(m&&v(t,d3.event),!d3.event.buttons&&t.mouse.value&&t.mouse.out.value){var r="function"!=typeof t.mouse.out.value;if("function"==typeof t.mouse.out.value&&(r=t.mouse.out.value(e,t.self)),r){var o=i(this,d3.event.toElement);o||t.draw.frozen||e.d3plus&&e.d3plus["static"]||(d3.select(this).transition().duration(t.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(t.timing.mouseevents).attr("opacity",t.data.opacity),t.covered||d(t.type.value),"function"==typeof t.mouse.viz?t.mouse.viz(e.d3plus_data||e,t):t.mouse.viz[a.out]&&t.mouse.viz[a.out](e.d3plus_data||e,t),k())}}else d(t.type.value)});else{var z=function(){v(t,d3.event)};t.g.data.selectAll("g").on(a.over,z).on(a.move,z).on(a.out,z)}d3.select(window).on("scroll.d3plus",function(){d(t.type.value)}),t.g.data.selectAll("g").on(a.click,function(e){if((!t.mouse.viz||t.mouse.viz.click!==!1)&&t.mouse.value&&t.mouse.click.value&&!d3.event.defaultPrevented&&!t.draw.frozen&&(!e.d3plus||!e.d3plus["static"])){var i="function"!=typeof t.mouse.click.value;if("function"==typeof t.mouse.click.value&&(i=t.mouse.click.value(e,t.self)),i){if(e.values&&t.axes.discrete){var h="x"===t.axes.discrete?0:1,f=d3.mouse(t.container.value.node())[h],p=y(e.values,function(e){return e.d3plus[t.axes.discrete]}),g=r(p,f);e.d3plus_data=e.values[p.indexOf(g)],e.d3plus=e.values[p.indexOf(g)].d3plus}"function"==typeof t.mouse.viz?t.mouse.viz(e.d3plus_data||e,t):t.mouse.viz[a.out]?t.mouse.viz[a.out](e.d3plus_data||e,t):t.mouse.viz[a.click]&&t.mouse.viz[a.click](e.d3plus_data||e,t);var m=w(e.d3plus_data||e,t),v=t.id.solo.value,b=u(t,e)[0],x=c(l(t,e)),_=t.title.sub.value||!1,C=t.title.sub.font.color,S=t.title.total.font.color;if(e.d3plus.threshold&&e.d3plus.merged&&t.zoom.value)t.history.states.push(function(){t.self.id({solo:v}).title({sub:{font:{color:C},value:_},total:{font:{color:S}}}).draw()}),t.self.id({solo:v.concat(y(e.d3plus.merged,t.id.value,s,t))}).title({sub:{font:{color:x},value:b},total:{font:{color:x}}}).draw();else if(1===m&&t.zoom.value){var M=s(t,e.d3plus_data||e,t.id.value);t.history.states.push(function(){t.self.depth(t.depth.value-1).id({solo:v}).title({sub:{font:{color:C},value:_},total:{font:{color:S}}}).draw()}),t.self.depth(t.depth.value+1).id({solo:v.concat(M)}).title({sub:{font:{color:x},value:b},total:{font:{color:x}}}).draw()}else if(m===-1&&t.zoom.value&&t.history.states.length&&!t.tooltip.value["long"])t.history.back();else if(t.types[t.type.value].zoom&&t.zoom.value)k(),d3.select(this).transition().duration(t.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(t.timing.mouseevents).attr("opacity",t.data.opacity),d(t.type.value),t.draw.update=!1,e&&e[t.id.value]!=t.focus.value[0]?t.self.focus(e[t.id.value]).draw():t.self.focus(!1).draw();else if(t.types[t.type.value].requirements.indexOf("focus")<0){k();var T=e.d3plus_data?e.d3plus_data:e;o({vars:t,data:T})}}}})}},{"../../../client/pointer.coffee":40,"../../../client/touch.coffee":45,"../../../color/legible.coffee":46,"../../../core/console/print.coffee":54,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/validate.coffee":175,"../../../string/strip.js":178,"../../../tooltip/remove.coffee":206,"../../../util/child.coffee":208,"../../../util/closest.coffee":209,"../../../util/uniques.coffee":213,"../tooltip/create.js":243,"../zoom/direction.coffee":253,"../zoom/propagation.coffee":256,"./arc.coffee":220,"./area.js":221,"./check.js":222,"./coordinates.coffee":224,"./cross.js":225,"./diamond.js":226,"./donut.js":227,"./fill.js":230,"./line.js":232,"./radial.coffee":234,"./rect.coffee":235,"./segments.coffee":236,"./triangle_down.js":238,"./triangle_up.js":239,"./whisker.coffee":240}],229:[function(t,e,n){var i=t("../../../util/buckets.coffee"),r=t("../../../geom/offset.coffee");e.exports=function(t){function e(e){e.attr("opacity",0).style("stroke-width",0).style("stroke",t.background.value).style("fill","none")}function n(e){var n=t.edges.arrows.value;e.attr("opacity",function(e){return"number"===p?f:"function"===p?f(e,t):t.edges.opacity.scale.value(e[f])}).style("stroke-width",function(e){return t.edges.scale(e[t.edges.size.value])}).style("stroke",t.edges.color).attr("marker-start",function(e){var i=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var r="_"+e.d3plus.bucket;else var r="";return"source"==i&&n?"url(#d3plus_edge_marker_default"+r+")":"none"}).attr("marker-end",function(e){var i=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var r="_"+e.d3plus.bucket;else var r="";return"target"==i&&n?"url(#d3plus_edge_marker_default"+r+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function o(e){e.attr("x1",function(e){return e[t.edges.source].d3plus.edges[e[t.edges.target][t.id.value]].x}).attr("y1",function(e){return e[t.edges.source].d3plus.edges[e[t.edges.target][t.id.value]].y}).attr("x2",function(e){return e[t.edges.target].d3plus.edges[e[t.edges.source][t.id.value]].x}).attr("y2",function(e){return e[t.edges.target].d3plus.edges[e[t.edges.source][t.id.value]].y})}function a(t){t.attr("d",function(t){return g(t.d3plus.spline)})}function s(e){if(delete e.d3plus_label,t.g.edges.selectAll("line, path").size()<t.edges.large&&t.edges.label&&e[t.edges.label]){if("spline"in e.d3plus)var n=this.getTotalLength(),i=this.getPointAtLength(n/2),r=this.getPointAtLength(n/2-.1*n),o=this.getPointAtLength(n/2+.1*n),a=Math.atan2(o.y-r.y,o.x-r.x),s=a*(180/Math.PI),l=(this.parentNode.getBBox(),.8*n),u=i.x,c=i.y;else var h=(this.getBBox(),e[t.edges.source]),d=e[t.edges.target],f={x:h.d3plus.edges[d[t.id.value]].x,y:h.d3plus.edges[d[t.id.value]].y},p={x:d.d3plus.edges[h[t.id.value]].x,y:d.d3plus.edges[h[t.id.value]].y},g=p.x-f.x,m=p.y-f.y,i={x:p.x-g/2,y:p.y-m/2},a=Math.atan2(m,g),s=a*(180/Math.PI),n=Math.sqrt(g*g+m*m),l=n,u=i.x,c=i.y;l+=2*t.labels.padding;var v=0;t.edges.arrows.value&&(v="number"==typeof t.edges.arrows.value?t.edges.arrows.value:8,v/=t.zoom.behavior.scaleExtent()[1],l-=2*v),(s<-90||s>90)&&(s-=180),l*t.zoom.behavior.scaleExtent()[0]>20&&(e.d3plus_label={x:u,y:c,translate:{x:u,y:c},w:l,h:15+2*t.labels.padding,angle:s,anchor:"middle",valign:"center",color:t.edges.color,resize:!1,names:[t.format.value(e[t.edges.label])],background:1})}}var l=t.returned.edges||[],u=t.zoom.behavior.scaleExtent()[0];if("string"==typeof t.edges.size.value){var c=d3.extent(l,function(e){return e[t.edges.size.value]}),h=d3.min(t.returned.nodes||[],function(t){return t.d3plus.r})*(2*t.edges.size.scale);t.edges.scale=d3.scale.sqrt().domain(c).range([t.edges.size.min,h*u])}else{var d="number"==typeof t.edges.size.value?t.edges.size.value:t.edges.size.min;t.edges.scale=function(){return d}}var f=t.edges.opacity.value,p=typeof f;t.edges.opacity.changed&&"string"===p&&t.edges.opacity.scale.value.domain(d3.extent(l,function(t){return t[f]})).range([t.edges.opacity.min.value,1]);var g=d3.svg.line().interpolate(t.edges.interpolate.value),m=t.edges.arrows.value?"string"==typeof t.edges.size.value?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof t.edges.size.value)for(var v=i(t.edges.scale.range(),4),y=[],b=0;b<3;b++)y.push(v[b+1]+(v[1]-v[0])*(b+2)*2);else var w="number"==typeof t.edges.arrows.value?t.edges.arrows.value:8,y="number"==typeof t.edges.size.value?t.edges.size.value/w:w;var x=t.defs.selectAll(".d3plus_edge_marker").data(m,String),_=function(e){e.attr("d",function(e){var n=e.split("_");if(2==n.length&&t.edges.scale){n=parseInt(n[1]);var i=y[n]}else var i=y;return"target"==t.edges.arrows.direction.value?"M 0,-"+i/2+" L "+.85*i+",0 L 0,"+i/2+" L 0,-"+i/2:"M 0,-"+i/2+" L -"+.85*i+",0 L 0,"+i/2+" L 0,-"+i/2}).attr("fill",function(e){var n=e.split("_")[0];return"default"==n?t.edges.color:"focus"==n?t.color.focus:t.color.primary}).attr("transform","scale("+1/u+")")};t.draw.timing?(x.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),x.select("path").transition().duration(t.draw.timing).attr("opacity",1).call(_)):(x.exit().remove(),x.select("path").attr("opacity",1).call(_));var k=t.draw.timing?0:1,C=x.enter().append("marker").attr("id",function(t){return"d3plus_edge_marker_"+t}).attr("class","d3plus_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",k).attr("vector-effect","non-scaling-stroke").call(_);t.draw.timing&&C.transition().duration(t.draw.timing).attr("opacity",1);var S="string"==typeof t.edges.size.value?i(t.edges.scale.domain(),4):null,M=t.edges.arrows.direction.value,T=l.filter(function(e){if(e.d3plus||(e.d3plus={}),e.d3plus.id="edge_"+e[t.edges.source][t.id.value]+"_"+e[t.edges.target][t.id.value],e.d3plus.spline!==!0){if(S){var n=e[t.edges.size.value];e.d3plus.bucket=n<S[1]?0:n<S[2]?1:2;var i=.85*y[e.d3plus.bucket]/u}else{delete e.d3plus.bucket;var i=.85*y/u}var o=e[t.edges.source],a=e[t.edges.target];if(!o.d3plus||!a.d3plus)return!1;var s=Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x),l=Math.atan2(a.d3plus.y-o.d3plus.y,a.d3plus.x-o.d3plus.x),c="source"==M&&t.edges.arrows.value?o.d3plus.r+i:o.d3plus.r,h="target"==M&&t.edges.arrows.value?a.d3plus.r+i:a.d3plus.r,d=r(s,c,t.shape.value),f=r(l,h,t.shape.value);return"edges"in o.d3plus||(o.d3plus.edges={}),o.d3plus.edges[a[t.id.value]]={x:o.d3plus.x-d.x,y:o.d3plus.y-d.y},"edges"in a.d3plus||(a.d3plus.edges={}),a.d3plus.edges[o[t.id.value]]={x:a.d3plus.x-f.x,y:a.d3plus.y-f.y},!0}return!1}),E=t.g.edges.selectAll("g.d3plus_edge_line").data(T,function(t){return t.d3plus.id}),O=l.filter(function(e){if(e.d3plus.spline){if(S){var n=e[t.edges.size.value];e.d3plus.bucket=n<S[1]?0:n<S[2]?1:2;var i=.85*y[e.d3plus.bucket]/u}else{delete e.d3plus.bucket;var i=.85*y/u}var o=e[t.edges.source],a=e[t.edges.target],s=o.d3plus.edges?o.d3plus.edges[a[t.id.value]]||{}:{},l=a.d3plus.edges?a.d3plus.edges[o[t.id.value]]||{}:{},c=t.edges.arrows.value&&"source"==M?i:0,h=t.edges.arrows.value&&"target"==M?i:0,d=.1,f=o.d3plus.x>a.d3plus.x?1-d:1+d,p=o.d3plus.x>a.d3plus.x?1+d:1-d,g="number"==typeof s.angle?s.angle:Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x)*f,m=r(g,o.d3plus.r+c,t.shape.value),v="number"==typeof l.angle?l.angle:Math.atan2(a.d3plus.y-o.d3plus.y,a.d3plus.x-o.d3plus.x)*p,b=r(v,a.d3plus.r+h,t.shape.value),w=[o.d3plus.x-m.x,o.d3plus.y-m.y],x=!!s.offset&&r(g,s.offset),_=x?[w[0]-x.x,w[1]-x.y]:w,k=[a.d3plus.x-b.x,a.d3plus.y-b.y],C=!!l.offset&&r(v,l.offset),T=C?[k[0]-C.x,k[1]-C.y]:k,E=T[0]-_[0],O=T[1]-_[1],A="number"==typeof s.radius?s.radius:Math.sqrt(E*E+O*O)/4,D="number"==typeof l.radius?l.radius:Math.sqrt(E*E+O*O)/4,R=r(g,A-o.d3plus.r-2*c),P=r(v,D-a.d3plus.r-2*h);e.d3plus.spline=[w,k];var N=Math.abs(Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x)).toFixed(5),z=Math.abs(g).toFixed(5),L=Math.abs(v-Math.PI).toFixed(5);return(z!==L||[z,L].indexOf(N)<0)&&(e.d3plus.spline.splice(1,0,[_[0]-R.x,_[1]-R.y],[T[0]-P.x,T[1]-P.y]),x&&e.d3plus.spline.splice(1,0,_),C&&e.d3plus.spline.splice(e.d3plus.spline.length-1,0,T)),!0}return!1}),A=t.g.edges.selectAll("g.d3plus_edge_path").data(O,function(t){return t.d3plus.id});t.draw.timing?(E.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),A.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),E.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(t.draw.timing/2).attr("opacity",0).remove(),A.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(t.draw.timing/2).attr("opacity",0).remove(),E.selectAll("line").data(function(t){return[t]}).transition().duration(t.draw.timing).call(o).call(n).each("end",s),A.selectAll("path").data(function(t){return[t]}).transition().duration(t.draw.timing).call(a).call(n).each("end",s),E.enter().append("g").attr("class","d3plus_edge_line").append("line").call(o).call(e).transition().duration(t.draw.timing).call(n).each("end",s),A.enter().append("g").attr("class","d3plus_edge_path").append("path").call(a).call(e).transition().duration(t.draw.timing).call(n).each("end",s)):(E.exit().remove(),A.exit().remove(),E.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),A.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),E.selectAll("line").data(function(t){return[t]}).call(o).call(n).call(s),A.selectAll("path").data(function(t){return[t]}).call(a).call(n).call(s),E.enter().append("g").attr("class","d3plus_edge_line").append("line").call(o).call(e).call(n).call(s),A.enter().append("g").attr("class","d3plus_edge_path").append("path").call(a).call(e).call(n).call(s))}},{"../../../geom/offset.coffee":163,"../../../util/buckets.coffee":207}],230:[function(t,e,n){var i=t("../../../util/copy.coffee"),r=t("../../../core/fetch/color.coffee"),o=(t("../../../core/fetch/value.coffee"),t("./segments.coffee")),a=t("./style.coffee");e.exports=function(t,e,n,s){function l(t){t.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function u(e,n){n||(n=0),e.attr("x",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return-e/2-n/2}).attr("y",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return-e/2-n/2}).attr("width",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return e+n}).attr("height",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return e+n}).attr("rx",function(e){var i=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,r=["circle","donut"].indexOf(t.shape.value)>=0;return r?(i+n)/2:0}).attr("ry",function(e){var i=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,r=["circle","donut"].indexOf(t.shape.value)>=0;return r?(i+n)/2:0}).attr("shape-rendering",function(e){return["square"].indexOf(t.shape.value)>=0?t.shape.rendering.value:"auto"})}function c(e,n,i,r){n||(n=0),"number"!=typeof i&&(i=void 0),"number"!=typeof r&&(r=void 0),e.attrTween("d",function(e){if(void 0===i)var o=e.d3plus.r?e.d3plus.r:d3.max([e.d3plus.width,e.d3plus.height]);else var o=i;if(void 0===r)var a=e.d3plus.segments[e.d3plus.shape];else var a=r;t.arcs[e.d3plus.shape][e.d3plus.id]||(t.arcs[e.d3plus.shape][e.d3plus.id]={r:0},t.arcs[e.d3plus.shape][e.d3plus.id].a="donut"===e.d3plus.shape?2*Math.PI:0);var s=d3.interpolate(t.arcs[e.d3plus.shape][e.d3plus.id].r,o+n),l=d3.interpolate(t.arcs[e.d3plus.shape][e.d3plus.id].a,a);return function(n){return t.arcs[e.d3plus.shape][e.d3plus.id].r=s(n),t.arcs[e.d3plus.shape][e.d3plus.id].a=l(n),h(e)}})}t.arcs||(t.arcs={donut:{},active:{},temp:{}});var h=d3.svg.arc().startAngle(0).endAngle(function(e){var n=t.arcs[e.d3plus.shape][e.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(e){if(e.d3plus["static"]||"donut"!==t.shape.value)return 0;var n=t.arcs[e.d3plus.shape][e.d3plus.id].r;return n*t.data.donut.size}).outerRadius(function(e){var n=t.arcs[e.d3plus.shape][e.d3plus.id].r;return"donut"===t.shape.value?n:2*n});e.each(function(e){function n(e){e.attr("stroke",p).attr("stroke-width",1).attr("shape-rendering",t.shape.rendering.value)}var s=o(t,e,"active"),h=o(t,e,"temp"),d=o(t,e,"total"),f=d3.select(this),p=r(t,e),g=[],m=[];if(d&&t.types[t.type.value].fill){if(h){var v=i(e);v.d3plus.shape="temp",g.push(v),m=["temp"]}if(s&&(s<d||h)){var v=i(e);v.d3plus.shape="active",g.push(v)}}var y=t.defs.selectAll("pattern#d3plus_hatch_"+e.d3plus.id).data(m);t.draw.timing?(y.selectAll("rect").transition().duration(t.draw.timing).style("fill",p),y.selectAll("line").transition().duration(t.draw.timing).style("stroke",p)):(y.selectAll("rect").style("fill",p),y.selectAll("line").style("stroke",p));var b=y.enter().append("pattern").attr("id","d3plus_hatch_"+e.d3plus.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");b.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",p).attr("fill-opacity",.25),b.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(n),b.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(n),b.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(n);var w=g.length?[e]:[],x=f.selectAll("#d3plus_clip_"+e.d3plus.id).data(w);x.enter().insert("clipPath",".d3plus_mouse").attr("id","d3plus_clip_"+e.d3plus.id).append("rect").attr("class","d3plus_clipping").call(l),t.draw.timing?(x.selectAll("rect").transition().duration(t.draw.timing).call(u),x.exit().transition().delay(t.draw.timing).remove()):(x.selectAll("rect").call(u),x.exit().remove());var _=f.selectAll("path.d3plus_fill").data(g);_.transition().duration(t.draw.timing).call(a,t).call(c),_.enter().insert("path","rect.d3plus_mouse").attr("class","d3plus_fill").attr("clip-path","url(#d3plus_clip_"+e.d3plus.id+")").transition().duration(0).call(a,t).call(c,0,void 0,0).transition().duration(t.draw.timing).call(c).call(a,t),_.exit().transition().duration(t.draw.timing).call(c,0,void 0,0).remove()})}},{"../../../core/fetch/color.coffee":65,"../../../core/fetch/value.coffee":69,"../../../util/copy.coffee":210,"./segments.coffee":236,"./style.coffee":237}],231:[function(t,e,n){var i=(t("../../../util/copy.coffee"),t("../../../core/fetch/text.js")),r=t("../../../core/fetch/value.coffee"),o=t("../../../color/mix.coffee"),a=t("../../../core/console/print.coffee"),s=(t("../../../client/rtl.coffee"),t("./segments.coffee")),l=t("./color.coffee"),u=t("../../../string/list.coffee"),c=t("../../../color/text.coffee"),h=t("../../../textwrap/textwrap.coffee");e.exports=function(t,e){var n=t.types[t.type.value].zoom?t.zoom.behavior.scaleExtent():[1,1],d=t.g[e].selectAll("g"),f=function(e){e.attr("opacity",function(e){var i=parseFloat(d3.select(this).attr("font-size"),10);return e.visible=i*(t.zoom.scale/n[1])>=2,e.visible?1:0})},p=function(e){t.draw.timing?e.transition().duration(t.draw.timing).attr("opacity",0).remove():e.remove()},g=function(e){var i="bottom"===t.labels.valign.value?"top":"bottom";e.attr("font-weight",t.labels.font.weight).attr("font-family",t.labels.font.family.value).attr("stroke","none").attr("pointer-events",function(t){return t.mouse?"auto":"none"}).attr("fill",function(e){if(e.color)return e.color;var n=l(e.parent,t),i=c(n),r=e.text?.15:1;return o(n,i,.2,r)}).each(function(e){if(e.resize instanceof Array){e.resize[0],e.resize[1]}var r=e.resize,o=!0;if(e.text){r instanceof Array||(r=[9,50],o=e.resize);var a=e.y-e.h*n[1]/2+e.padding/2;"bottom"===i&&(a+=e.h*n[1]/2),h().align("center").container(d3.select(this)).height(e.h*n[1]/2).padding(e.padding/2).resize(o).size(r).text(t.format.value(100*e.text,{key:"share",vars:t})).width(e.w*n[1]).valign(i).x(e.x-e.w*n[1]/2+e.padding/2).y(a).draw()}else{e.resize instanceof Array||(r=[7,40*(n[1]/n[0])],o=e.resize);var s="bottom"===t.labels.valign.value?e.share:0;h().align(e.anchor||t.labels.align.value).container(d3.select(this)).height(e.h*n[1]-e.share).padding(e.padding/2).resize(o).size(r).shape(e.shape||"square").text(e.names).valign(t.labels.valign.value).width(e.w*n[1]).x(e.x-e.w*n[1]/2+e.padding/2).y(e.y-e.h*n[1]/2+e.padding/2+s).draw()}}).attr("transform",function(t){var e=d3.select(this).attr("transform")||"",i=t.angle||0,r=t.translate&&t.translate.x?t.translate.x:0,o=t.translate&&t.translate.y?t.translate.y:0;return e.length&&(e=e.split(")").slice(-3).join(")")),"rotate("+i+","+r+","+o+")scale("+1/n[1]+")translate("+(t.x*n[1]-t.x)+","+(t.y*n[1]-t.y)+")"+e})};if("edges"===e||t.labels.value){if(t.dev.value){var m="drawing "+e+" labels";a.time(m)}d.each(function(e){function o(e){var n="string"==typeof l.background?l.background:"none"===t.background.value?"#ffffff":t.background.value,i="string"==typeof l.background?l.background:n,r=_.attr("transform").split(")");r.pop(),r.pop(),r.push(""),r=r.join(")"),e.attr("fill",i).attr(O).attr("transform",r)}var a=e.d3plus&&"label"in e.d3plus&&!e.d3plus.label,l=e.d3plus_label||null,c=e.d3plus_share,h=e.d3plus.text?e.d3plus.text:l&&l.names?l.names:t.labels.text.value?r(t,e,t.labels.text.value):i(t,e),d=l&&"group"in l?l.group:d3.select(this),m=0,v=t.types[t.type.value].fill;if(h instanceof Array||(h=[h]),l)if(["line","area"].indexOf(t.shape.value)>=0)var y=!0;else if(e&&"d3plus"in e)var b=s(t,e,"active"),w=s(t,e,"temp"),x=s(t,e,"total"),y=!w&&!b||b>=x||!b&&w>=x;if(a||!(l&&l.force||y)&&v)delete e.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+e.d3plus.id+", rect#d3plus_label_bg_"+e.d3plus.id).call(p),t.g.labels.selectAll("text#d3plus_label_"+e.d3plus.id+", rect#d3plus_label_bg_"+e.d3plus.id).call(p);else{if(c&&e.d3plus.share&&c.w-2*t.labels.padding>=10&&c.h-2*t.labels.padding>=10&&"middle"!=t.labels.valign.value){c.resize=t.labels.resize.value!==!1&&(!(c&&"resize"in c)||c.resize),c.padding=t.labels.padding,c.text=e.d3plus.share,c.parent=e;var _=d.selectAll("text#d3plus_share_"+e.d3plus.id).data([c],function(t){return t.w+""+t.h+t.text});t.draw.timing&&1===t.zoom.scale?(_.transition().duration(t.draw.timing/2).call(g),_.enter().append("text").attr("id","d3plus_share_"+e.d3plus.id).attr("class","d3plus_share").attr("opacity",0).call(g).transition().duration(t.draw.timing/2).delay(t.draw.timing/2).attr("opacity",1)):(_.attr("opacity",1).call(g),_.enter().append("text").attr("id","d3plus_share_"+e.d3plus.id).attr("class","d3plus_share").attr("opacity",1).call(g)),m=_.node().getBBox().height+t.labels.padding,_.exit().call(p)}else d.selectAll("text.d3plus_share").call(p);if(l&&(l.resize=t.labels.resize.value!==!1&&(!(l&&"resize"in l)||l.resize),l.padding="number"==typeof l.padding?l.padding:t.labels.padding),l&&l.w*n[1]-l.padding>=20&&l.h*n[1]-l.padding>=10&&h.length){for(var k=t.format.locale.value.ui.and,C=t.format.locale.value.ui.more,S=0;S<h.length;S++)h[S]instanceof Array&&(h[S]=u(h[S],k,3,C));l.names=h,l.share=m,l.parent=e;var _=d.selectAll("text#d3plus_label_"+e.d3plus.id).data([l],function(t){
return!!t&&t.w+"_"+t.h+"_"+t.x+"_"+t.y+"_"+t.names.join("_")}),M=l.resize?void 0:t.labels.font.size*n[0]+"px";if(t.draw.timing&&1===t.zoom.scale?(_.transition().duration(t.draw.timing/2).call(g).call(f),_.enter().append("text").attr("font-size",M).attr("id","d3plus_label_"+e.d3plus.id).attr("class","d3plus_label").attr("opacity",0).call(g).transition().duration(t.draw.timing/2).delay(t.draw.timing/2).call(f)):(_.attr("opacity",1).call(g).call(f),_.enter().append("text").attr("font-size",M).attr("id","d3plus_label_"+e.d3plus.id).attr("class","d3plus_label").call(g).call(f)),_.exit().call(p),0===_.size()||0===_.selectAll("tspan").size())delete e.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+e.d3plus.id+", rect#d3plus_label_bg_"+e.d3plus.id).call(p),t.g.labels.selectAll("text#d3plus_label_"+e.d3plus.id+", rect#d3plus_label_bg_"+e.d3plus.id).call(p);else{if(l.background){var T=["background"],E=_.node().getBBox(),O={height:E.height,width:E.width,x:E.x,y:E.y>0?E.y:-E.height/2};O.width+=t.labels.padding*n[0],O.height+=t.labels.padding*n[0],O.x-=t.labels.padding*n[0]/2,O.y-=t.labels.padding*n[0]/2;var A=_.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];A=A.replace(/([^a-z])\s([^a-z])/gi,"$1,$2"),A=A.split(","),A.length>1&&(A=A[A.length-1],A=A.substring(0,A.length-1),O.y+=parseFloat(A))}else var T=[],O={};var D=d.selectAll("rect#d3plus_label_bg_"+e.d3plus.id).data(T),R="number"==typeof l.background?l.background:"string"==typeof l.background?1:.6;t.draw.timing?(D.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),D.transition().duration(t.draw.timing).attr("opacity",R).call(o),D.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+e.d3plus.id).attr("class","d3plus_label_bg").attr("opacity",0).call(o).transition().duration(t.draw.timing).attr("opacity",R)):(D.exit().remove(),D.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+e.d3plus.id).attr("class","d3plus_label_bg"),D.attr("opacity",R).call(o))}}else delete e.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+e.d3plus.id+", rect#d3plus_label_bg_"+e.d3plus.id).call(p),t.g.labels.selectAll("text#d3plus_label_"+e.d3plus.id+", rect#d3plus_label_bg_"+e.d3plus.id).call(p)}}),t.dev.value&&a.timeEnd(m)}else{if(t.dev.value){var m="removing "+e+" labels";a.time(m)}d.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(p),t.g.labels.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(p),t.dev.value&&a.timeEnd(m)}}},{"../../../client/rtl.coffee":42,"../../../color/mix.coffee":48,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../string/list.coffee":177,"../../../textwrap/textwrap.coffee":203,"../../../util/copy.coffee":210,"./color.coffee":223,"./segments.coffee":236}],232:[function(t,e,n){function i(t){t.attr("x",function(t){return t.d3plus.x}).attr("y",function(t){return t.d3plus.y}).attr("width",0).attr("height",0)}function r(t,e){void 0===e&&(e=0),t.attr("x",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return t.d3plus.x-(n/2+e/2)}).attr("y",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return t.d3plus.y-(n/2+e/2)}).attr("width",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return n+e}).attr("height",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return n+e}).attr("rx",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return(n+e)/2}).attr("ry",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return(n+e)/2})}function o(t,e,n,i){var o=t.draw.timing?t.timing.mouseevents:0;void 0===i&&(i=0),o?(d3.select(e.parentNode).selectAll("path.d3plus_line").transition().duration(o).style("stroke-width",function(e){var r=n;if(r.constructor!==Number){var o=c(t,e,n);r=o&&o.length?d3.max(o):t.data.stroke.width}return r+i}),d3.select(e.parentNode).selectAll("rect").transition().duration(o).style("stroke-width",function(e){var i=n;if(i.constructor!==Number){var r=c(t,e,n);i=r&&r.length?d3.max(r):t.data.stroke.width}return i}).call(r,i)):(d3.select(e.parentNode).selectAll("path.d3plus_line").style("stroke-width",function(e){var r=n;if(r.constructor!==Number){var o=c(t,e,n);r=o&&o.length?d3.max(o):t.data.stroke.width}return r+i}),d3.select(e.parentNode).selectAll("rect").style("stroke-width",function(e){var i=n;if(i.constructor!==Number){var r=c(t,e,n);i=r&&r.length?d3.max(r):t.data.stroke.width}return i}).call(r,i))}var a=t("../../../util/copy.coffee"),s=t("../../../util/closest.coffee"),l=t("../../../client/pointer.coffee"),u=t("./style.coffee"),c=t("../../../core/fetch/value.coffee");e.exports=function(t,e,n,h){var d=d3.svg.line().x(function(t){return t.d3plus.x}).y(function(t){return t.d3plus.y}).interpolate(t.shape.interpolate.value),f=t.size.value||t.data.stroke.width,p=t[t.axes.discrete],g=function(e){var n=f;if(n.constructor!==Number){var i=c(t,e,f);n=i&&i.length?d3.max(i):t.data.stroke.width}return n<15?15:n},m=p.ticks.values.map(function(t){return t.constructor===Date?t.getTime():t});e.each(function(e){var n=!1,h=[],v=[],y=a(e),b=d3.select(this);y.values=[],y.segment_key=y.key,e.values.forEach(function(i,r,o){var l=c(t,i,p.value);l.constructor===Date&&(l=l.getTime());var u=m.indexOf(s(m,l));n===!1||n===u-1?(y.values.push(i),y.segment_key+="_"+u):(y.values.length>1?h.push(y):v.push(y.values[0]),y=a(e),y.values=[i]),r===o.length-1&&(y.values.length>1?h.push(y):v.push(y.values[0])),n=u});var w=b.selectAll("path.d3plus_line").data(h,function(t){return t.d3plus||(t.d3plus={}),t.d3plus.shape="line",t.segment_key}),x=b.selectAll("rect.d3plus_anchor").data(v,function(t){return t.d3plus||(t.d3plus={}),t.d3plus.r=f,t.d3plus.id});t.draw.timing?(w.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),w.transition().duration(t.draw.timing).attr("d",function(t){return d(t.values)}).call(u,t),w.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round").attr("d",function(t){return d(t.values)}).call(u,t).attr("opacity",0).transition().duration(t.draw.timing).attr("opacity",1),x.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(t){return t.d3plus.id}).call(i).call(u,t),x.transition().duration(t.draw.timing).call(r).call(u,t),x.exit().transition().duration(t.draw.timing).call(i).remove()):(w.exit().remove(),w.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round"),w.attr("d",function(t){return d(t.values)}).call(u,t),x.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(t){return t.d3plus.id}),x.exit().remove(),x.call(r).call(u,t));var _=b.selectAll("path.d3plus_mouse").data(h,function(t){return t.segment_key});_.enter().append("path").attr("class","d3plus_mouse").attr("d",function(t){return d(t.values)}).style("stroke","black").style("stroke-width",g).style("fill","none").style("stroke-linecap","round").attr("opacity",0),_.on(l.over,function(e){!t.draw.frozen&&t.mouse.value&&t.mouse.over.value&&o(t,this,f,2)}).on(l.out,function(e){!t.draw.frozen&&t.mouse.value&&t.mouse.out.value&&o(t,this,f,0)}),t.draw.timing?_.transition().duration(t.draw.timing).attr("d",function(t){return d(t.values)}).style("stroke-width",g):_.attr("d",function(t){return d(t.values)}).style("stroke-width",g),_.exit().remove()})}},{"../../../client/pointer.coffee":40,"../../../core/fetch/value.coffee":69,"../../../util/closest.coffee":209,"../../../util/copy.coffee":210,"./style.coffee":237}],233:[function(t,e,n){e.exports=function(t){function e(e){e.attr("d",t.edges.path).style("stroke-width",function(t){return Math.max(1,t.dy)}).style("stroke","#ddd").style("fill","none").attr("transform",function(t){return"translate("+t.d3plus.x+","+t.d3plus.y+")"})}var n=t.returned.edges||[],i=t.g.edges.selectAll("g.d3plus_edge_path").data(n,function(e){return e.d3plus.id="path_"+e[t.edges.source][t.id.value]+"_"+e[t.edges.target][t.id.value],e.d3plus.id});t.draw.timing?(i.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),i.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(t.draw.timing/2).attr("opacity",0).remove(),i.selectAll("path").data(function(t){return[t]}).transition().duration(t.draw.timing).call(e),i.enter().append("g").attr("class","d3plus_edge_path").append("path").style("stroke-width",0).transition().duration(t.draw.timing).call(e)):(i.exit().remove(),i.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),i.selectAll("path").data(function(t){return[t]}).call(e),i.enter().append("g").attr("class","d3plus_edge_path").append("path").call(e))}},{}],234:[function(t,e,n){var i,r,o,a;a=t("./style.coffee"),o={},i={},r={r:{},a:{}},e.exports=function(t,e,n,s){var l,u,c,h,d;c=t.id.nesting[t.depth.value+1],h=d3.svg.line.radial().interpolate("linear-closed").radius(function(t){return t.d3plus.r}).angle(function(t){return t.d3plus.a}),l=function(e){return t.labels.value&&(e.d3plus.label?e.d3plus_label=e.d3plus.label:delete e.d3plus_label),[e]},t.draw.timing?(e.each(function(e){var n,i,r,o,a;for(o=e[c],a=[],i=0,r=o.length;i<r;i++)n=o[i],a.push(n.d3plus.id=n[t.id.value]+"_"+n[c]);return a}),u=d3.svg.line.radial().interpolate("linear-closed").radius(function(t,e){return void 0===o[t.d3plus.id]&&(o[t.d3plus.id]=0),isNaN(o[t.d3plus.id])&&(o[t.d3plus.id]=t.d3plus.r),o[t.d3plus.id]}).angle(function(t,e){return void 0===i[t.d3plus.id]&&(i[t.d3plus.id]=t.d3plus.a),isNaN(i[t.d3plus.id])&&(i[t.d3plus.id]=t.d3plus.a),i[t.d3plus.id]}),d=function(t,e){return t.attrTween("d",function(t){var n,a,s,l,h,d,f;for(f=t[c],s=l=0,h=f.length;l<h;s=++l)a=f[s],n=a.d3plus.a,void 0===e?d=a.d3plus.r:0===e&&(d=0),r.a[a.d3plus.id]=d3.interpolate(i[a.d3plus.id],n),r.r[a.d3plus.id]=d3.interpolate(o[a.d3plus.id],d);return function(e){var n,l,h;for(h=t[c],s=n=0,l=h.length;n<l;s=++n)a=h[s],i[a.d3plus.id]=r.a[a.d3plus.id](e),o[a.d3plus.id]=r.r[a.d3plus.id](e);return u(t[c])}})},n.append("path").attr("class","d3plus_data").call(a,t).attr("d",function(t){return u(t[c])}),e.selectAll("path.d3plus_data").data(l).transition().duration(t.draw.timing).call(a,t).call(d),s.selectAll("path.d3plus_data").transition().duration(t.draw.timing).call(d,0)):(n.append("path").attr("class","d3plus_data"),e.selectAll("path.d3plus_data").data(l).call(a,t).attr("d",function(t){return h(t[c])}))}},{"./style.coffee":237}],235:[function(t,e,n){var i;i=t("./style.coffee"),e.exports=function(t,e,n,r){var o,a,s;return o=function(e){var n,i;return t.labels.value&&!e.d3plus.label?(i=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,e.d3plus_label={w:i,h:n,x:0,y:0},e.d3plus_share={w:i,h:n,x:0,y:0},e.d3plus_label.shape="circle"===e.d3plus.shape?"circle":"square"):e.d3plus.label?e.d3plus_label=e.d3plus.label:delete e.d3plus_label,[e]},a=function(t){return t.attr("x",function(t){return t.d3plus.init&&"x"in t.d3plus.init?t.d3plus.init.x:t.d3plus.init&&"width"in t.d3plus.init?-t.d3plus.width/2:0}).attr("y",function(t){return t.d3plus.init&&"y"in t.d3plus.init?t.d3plus.init.y:t.d3plus.init&&"height"in t.d3plus.init?-t.d3plus.height/2:0}).attr("width",function(t){return t.d3plus.init&&"width"in t.d3plus.init?t.d3plus.init.width:0}).attr("height",function(t){return t.d3plus.init&&"height"in t.d3plus.init?t.d3plus.init.height:0})},s=function(e){return e.attr("x",function(t){var e;return e=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,-e/2}).attr("y",function(t){var e;return e=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,-e/2}).attr("width",function(t){return t.d3plus.r?2*t.d3plus.r:t.d3plus.width}).attr("height",function(t){return t.d3plus.r?2*t.d3plus.r:t.d3plus.height}).attr("rx",function(t){var e,n;return e="circle"===t.d3plus.shape,n=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,e?(n+2)/2:0}).attr("ry",function(t){var e,n;return n="circle"===t.d3plus.shape,e=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,n?(e+2)/2:0}).attr("transform",function(t){return"rotate"in t.d3plus?"rotate("+t.d3plus.rotate+")":""}).attr("shape-rendering",function(e){return"square"!==e.d3plus.shape||"rotate"in e.d3plus?"auto":t.shape.rendering.value})},t.draw.timing?(n.append("rect").attr("class","d3plus_data").call(a).call(i,t),e.selectAll("rect.d3plus_data").data(o).transition().duration(t.draw.timing).call(s).call(i,t),r.selectAll("rect.d3plus_data").transition().duration(t.draw.timing).call(a)):(n.append("rect").attr("class","d3plus_data"),e.selectAll("rect.d3plus_data").data(o).call(s).call(i,t))}},{"./style.coffee":237}],236:[function(t,e,n){var i;i=t("../../../core/fetch/value.coffee"),e.exports=function(t,e,n){var r;return r=t[n].value,r?n in e.d3plus?e.d3plus[n]:i(t,e,r):e.d3plus[n]}},{"../../../core/fetch/value.coffee":69}],237:[function(t,e,n){var i,r,o;i=t("./color.coffee"),r=t("../../../client/ie.js"),o=t("../../../core/fetch/value.coffee"),e.exports=function(t,e){return t.attr("fill",function(t){return t.d3plus&&t.d3plus.spline?"none":i(t,e)}).style("stroke",function(t){var n;return t.d3plus&&t.d3plus.stroke?t.d3plus.stroke:(n=t.values?i(t.values[0],e):i(t,e,!0),d3.rgb(n).darker(.6))}).style("stroke-width",function(t){var n;if(r&&e.types[e.type.value].zoom)return 0;if("line"===t.d3plus.shape&&e.size.value){if(e.size.value.constructor===Number)return e.size.value;if(n=o(e,t,e.size.value),n&&n.length)return d3.max(n)}return e.data.stroke.width}).attr("opacity",e.data.opacity).attr("vector-effect","non-scaling-stroke")}},{"../../../client/ie.js":39,"../../../core/fetch/value.coffee":69,"./color.coffee":223}],238:[function(t,e,n){var i=t("./style.coffee");e.exports=function(t,e,n,r){function o(t){t.attr("d",d3.svg.symbol().type("triangle-down").size(10))}function a(t){t.attr("d",d3.svg.symbol().type("triangle-down").size(function(t){var e=Math.min(t.d3plus.width,t.d3plus.height);return d3.scale.pow().exponent(2)(e/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(i,t),e.selectAll("path.d3plus_data").data(function(t){return[t]}),t.draw.timing?e.selectAll("path.d3plus_data").transition().duration(t.draw.timing).call(a).call(i,t):e.selectAll("path.d3plus_data").call(a).call(i,t)}},{"./style.coffee":237}],239:[function(t,e,n){var i=t("./style.coffee");e.exports=function(t,e,n,r){function o(t){t.attr("d",d3.svg.symbol().type("triangle-up").size(10))}function a(t){t.attr("d",d3.svg.symbol().type("triangle-up").size(function(t){var e=Math.min(t.d3plus.width,t.d3plus.height);return d3.scale.pow().exponent(2)(e/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(i,t),e.selectAll("path.d3plus_data").data(function(t){return[t]}),t.draw.timing?e.selectAll("path.d3plus_data").transition().duration(t.draw.timing).call(a).call(i,t):e.selectAll("path.d3plus_data").call(a).call(i,t)}},{"./style.coffee":237}],240:[function(t,e,n){e.exports=function(t,e,n,i){var r,o,a,s,l,u,c,h,d;o=function(t){return t.d3plus.text?t.d3plus_label={w:h,h:h,x:0,y:0,background:"#fff",resize:!1,angle:["left","right"].indexOf(t.d3plus.position)>=0?90:0}:t.d3plus.label?t.d3plus_label=t.d3plus.label:delete t.d3plus_label,[t]},d=function(e){return e.style("stroke-width",t.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",t.shape.rendering.value)},a=function(t){return t.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)},c=function(t){return t.attr("x1",function(t){var e,n,i;return["top","bottom"].indexOf(t.d3plus.position)>=0?0:(e=t.d3plus.offset||0,n=t.d3plus.width||0,i=e<0?-n:n,i+e)}).attr("x2",function(t){return["top","bottom"].indexOf(t.d3plus.position)>=0?0:t.d3plus.offset||0}).attr("y1",function(t){var e,n,i;return["left","right"].indexOf(t.d3plus.position)>=0?0:(n=t.d3plus.offset||0,e=t.d3plus.height||0,i=n<0?-e:e,i+n)}).attr("y2",function(t){return["left","right"].indexOf(t.d3plus.position)>=0?0:t.d3plus.offset||0}).attr("marker-start","url(#d3plus_whisker_marker)")},s=t.defs.selectAll("#d3plus_whisker_marker").data([0]),s.enter().append("marker").attr("id","d3plus_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line"),r=e.datum(),r?(u=r.d3plus.position,l=["top","bottom"].indexOf(u)>=0?"horizontal":"vertical",h="horizontal"===l?r.d3plus.width:r.d3plus.height):(l="horizontal",h=0),s.select("line").attr("x1","horizontal"===l?-h/2:0).attr("x2","horizontal"===l?h/2:0).attr("y1","vertical"===l?-h/2:0).attr("y2","vertical"===l?h/2:0).call(d).style("stroke-width",2*t.data.stroke.width),t.draw.timing?(n.append("line").attr("class","d3plus_data").call(d).call(a),e.selectAll("line.d3plus_data").data(o).transition().duration(t.draw.timing).call(d).call(c),i.selectAll("line.d3plus_data").transition().duration(t.draw.timing).call(a)):(n.append("line").attr("class","d3plus_data"),e.selectAll("line.d3plus_data").data(o).call(d).call(c))}},{}],241:[function(t,e,n){var i=t("../../../client/pointer.coffee"),r=t("../../../client/prefix.coffee"),o=t("../../../core/console/print.coffee"),a=t("../../../client/touch.coffee"),s=t("../zoom/propagation.coffee");e.exports=function(t){t.dev.value&&o.time("creating SVG elements"),t.svg=t.container.value.selectAll("svg#d3plus").data([0]),t.svg.enter().insert("svg","#d3plus_message").attr("id","d3plus").attr("width",t.width.value).attr("height",t.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink"),t.g.bg=t.svg.selectAll("rect#bg").data(["bg"]),t.g.bg.enter().append("rect").attr("id","bg").attr("fill",t.background.value).attr("stroke","none").attr("width",t.width.value).attr("height",t.height.value),t.g.timeline=t.svg.selectAll("g#timeline").data(["timeline"]),t.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+t.height.value+")"),t.g.legend=t.svg.selectAll("g#key").data(["key"]),t.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+t.height.value+")"),t.g.footer=t.svg.selectAll("g#footer").data(["footer"]),t.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+t.height.value+")");var e="clipping_"+t.container.id;t.g.clipping=t.svg.selectAll("#clipping").data(["clipping"]),t.g.clipping.enter().append("clipPath").attr("id",e).append("rect").attr("width",t.width.viz).attr("height",t.height.viz),t.g.container=t.svg.selectAll("g#container").data(["container"]),t.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+e+")").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.g.zoom=t.g.container.selectAll("g#zoom").data(["zoom"]),t.g.zoom.enter().append("g").attr("id","zoom"),t.g.viz=t.g.zoom.selectAll("g#d3plus_viz").data(["d3plus_viz"]),t.g.viz.enter().append("g").attr("id","d3plus_viz"),t.g.overlay=t.g.viz.selectAll("rect#d3plus_overlay").data([{id:"d3plus_overlay"}]),t.g.overlay.enter().append("rect").attr("id","d3plus_overlay").attr("width",t.width.value).attr("height",t.height.value).attr("opacity",0),t.g.overlay.on(i.move,function(e){a&&s(t,d3.event),t.types[t.type.value].zoom&&t.zoom.pan.value&&t.zoom.behavior.scaleExtent()[0]<t.zoom.scale?d3.select(this).style("cursor",r()+"grab"):d3.select(this).style("cursor","auto")}).on(i.up,function(e){a&&s(t,d3.event),t.types[t.type.value].zoom&&t.zoom.pan.value&&t.zoom.behavior.scaleExtent()[0]<t.zoom.scale?d3.select(this).style("cursor",r()+"grab"):d3.select(this).style("cursor","auto")}).on(i.down,function(e){a&&s(t,d3.event),t.types[t.type.value].zoom&&t.zoom.pan.value&&t.zoom.behavior.scaleExtent()[0]<t.zoom.scale?d3.select(this).style("cursor",r()+"grabbing"):d3.select(this).style("cursor","auto")}),t.g.app=t.g.viz.selectAll("g#app").data(["app"]),t.g.app.enter().append("g").attr("id","app"),t.g.edges=t.g.viz.selectAll("g#edges").data(["edges"]),t.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),t.g.edge_focus=t.g.viz.selectAll("g#focus").data(["focus"]),t.g.edge_focus.enter().append("g").attr("id","focus"),t.g.edge_hover=t.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),t.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),t.g.data=t.g.viz.selectAll("g#data").data(["data"]),t.g.data.enter().append("g").attr("id","data").attr("opacity",0),t.g.data_focus=t.g.viz.selectAll("g#data_focus").data(["data_focus"]),t.g.data_focus.enter().append("g").attr("id","data_focus"),t.g.labels=t.g.viz.selectAll("g#d3plus_labels").data(["d3plus_labels"]),t.g.labels.enter().append("g").attr("id","d3plus_labels"),t.defs=t.svg.selectAll("defs").data(["defs"]),t.defs.enter().append("defs"),t.dev.value&&o.timeEnd("creating SVG elements")}},{"../../../client/pointer.coffee":40,"../../../client/prefix.coffee":41,"../../../client/touch.coffee":45,"../../../core/console/print.coffee":54,"../zoom/propagation.coffee":256}],242:[function(t,e,n){var i=t("../../../core/console/print.coffee");e.exports=function(t){t.dev.value&&i.time("updating SVG elements"),t.draw.timing?(t.container.value.transition().duration(t.draw.timing).style("width",t.width.value+"px").style("height",t.height.value+"px"),t.svg.transition().duration(t.draw.timing).attr("width",t.width.value).attr("height",t.height.value),t.g.bg.transition().duration(t.draw.timing).attr("width",t.width.value).attr("height",t.height.value).attr("fill",t.background.value),t.g.clipping.select("rect").transition().duration(t.draw.timing).attr("width",t.width.viz).attr("height",t.height.viz),t.g.container.transition().duration(t.draw.timing).attr("transform","translate("+t.margin.left+","+t.margin.top+")")):(t.container.value.style("width",t.width.value+"px").style("height",t.height.value+"px"),t.svg.attr("width",t.width.value).attr("height",t.height.value),t.g.bg.attr("width",t.width.value).attr("height",t.height.value).attr("fill",t.background.value),t.g.clipping.select("rect").attr("width",t.width.viz).attr("height",t.height.viz),t.g.container.attr("transform","translate("+t.margin.left+","+t.margin.top+")")),t.dev.value&&i.timeEnd("updating SVG elements")}},{"../../../core/console/print.coffee":54}],243:[function(t,e,n){var i=t("../../../array/sort.coffee"),r=t("../../../tooltip/create.js"),o=t("../../../core/data/nest.js"),a=t("./data.js"),s=t("../../../core/fetch/color.coffee"),l=t("../../../core/fetch/text.js"),u=t("../../../core/fetch/value.coffee"),c=t("../../../object/merge.coffee"),h=t("../../../tooltip/remove.coffee"),d=t("../shapes/segments.coffee"),f=t("../../../client/scroll.js"),p=t("../../../util/uniques.coffee"),g=t("../../../object/validate.coffee"),m=t("../zoom/direction.coffee");e.exports=function(t){function e(e){function f(t){return"string"==typeof n[t].value?n[t].value:n.format.locale.value.method[t]}var m,x="depth"in t?t.depth:y,M={},T=n.id.nesting[x+1]in v?x+1:x,E=n.id.nesting[T],P="merged"in v.d3plus?v.d3plus.merged:v[E];P instanceof Array||(P=[P]);var N=u(n,v,n.size.value);if(n.tooltip.children.value){if(P=P.slice(0),P.length>1&&g(P[0])&&(P=o(n,P,[E])),n.size.value&&g(P[0])){var z=[],L=P.filter(function(t){var e=u(n,t,n.size.value);return!(null===e||"d3plus"in t&&t.d3plus.merged)||void z.push(t)});i(L,n.size.value,"desc",[],n),P=L.concat(z)}var I=n.tooltip.children.value===!0?3:n.tooltip.children.value,H="short"===S?I:n.data.large,j=P.length,F=d3.min([j,H]);m={values:[]};for(var B=0;B<F&&P.length;B++){var W=P.shift(),Y=l(n,W,T)[0],V=g(W)?u(n,W,E,T):W;if(V!==v[n.id.nesting[x]]&&Y&&!m[Y]){var U=g(W)?u(n,W,n.size.value,E):null,q=s(n,W,E);m[Y]=!U||U instanceof Array?"":n.format.value(U,{key:n.size.value,vars:n,data:W});var X={};X[Y]=m[Y],m.values.push(X),q&&(m.d3plus_colors||(m.d3plus_colors={}),m.d3plus_colors[Y]=q)}else B--}j>F&&(m.d3plusMore=j-F)}v.d3plus.tooltip&&(M=c(M,v.d3plus.tooltip)),n.tooltip.size.value&&(N&&"number"!=typeof n.size.value&&(M[f("size")]=N),n.axes.opposite&&n[n.axes.opposite].value!==n.size.value&&(M[f(n.axes.opposite)]=u(n,v,n[n.axes.opposite].value)),n.axes.opposite&&n[n.axes.opposite+"2"].value!==n.size.value&&(M[f(n.axes.opposite+"2")]=u(n,v,n[n.axes.opposite+"2"].value)),n.color.valueScale&&(M[f("color")]=u(n,v,n.color.value)));var G=d(n,v,"active"),$=d(n,v,"temp"),K=d(n,v,"total");"number"==typeof G&&G>0&&K&&(M[f("active")]=G+"/"+K+" ("+n.format.value(G/K*100,{key:"share",vars:n,data:v})+")"),"number"==typeof $&&$>0&&K&&(M[f("temp")]=$+"/"+K+" ("+n.format.value($/K*100,{key:"share",vars:n,data:v})+")"),n.tooltip.share.value&&v.d3plus.share&&(M.share=n.format.value(100*v.d3plus.share,{key:"share",vars:n,data:v}));var T="depth"in t?t.depth:y,Z=t.title||l(n,v,T)[0],Q=p(v,n.icon.value,u,n,n.id.nesting[T]),J=t.titleOnly?[]:a(n,v,S,M,m,T);if(Q=1===Q.length&&"string"==typeof Q[0]&&Q[0],J.length>0||O||!v.d3plus_label&&"short"==S&&Z||v.d3plus_label&&(!("visible"in v.d3plus_label)||"visible"in v.d3plus_label&&v.d3plus_label.visible===!1)){Z||(Z=n.format.value(V,{key:n.id.value,vars:n}));var T="d3plus"in v&&"merged"in v.d3plus?y-1:"depth"in t?t.depth:y;if(T<0&&(T=0),T=n.id.nesting[T],"string"==typeof n.icon.style.value)var tt=n.icon.style.value;else if("object"==typeof n.icon.style.value&&n.icon.style.value[T])var tt=n.icon.style.value[T];else var tt="default";var et=n.tooltip.small;t.width?et=t.width:k&&(et=n.tooltip.large);var nt=!k&&"long"!==t.length||k&&n.tooltip.fullscreen.value?d3.select("body"):n.container.value;!t.description&&v&&n.tooltip.sub.value&&(t.description=u(n,v,n.tooltip.sub.value)),r({align:C,arrow:w,locale:n.format.locale.value,background:n.tooltip.background,curtain:n.tooltip.curtain.color,curtainopacity:n.tooltip.curtain.opacity,fontcolor:n.tooltip.font.color,fontfamily:n.tooltip.font.family.value,fontsize:n.tooltip.font.size,fontweight:n.tooltip.font.weight,data:J,color:s(n,v),allColors:!0,footer:t.footer===!1?t.footer:O,fullscreen:k,html:e,js:t.js,icon:Q,id:_,max_height:t.maxheight,max_width:et,mouseevents:b,offset:R,parent:nt,stacked:n.tooltip.stacked.value,style:tt,title:Z,description:t.description,width:t.width||k||0!=J.length?et:"auto",x:A,y:D})}else h(_)}"d3plus"in t.data||(t.data.d3plus={});var n=t.vars,v=t.data,y="d3plus"in v&&"depth"in v.d3plus?v.d3plus.depth:n.depth.value,b=(t.ex,!!t.mouseevents&&t.mouseevents),w=!("arrow"in t)||t.arrow,x=u(n,v,n.id.value),_=t.id||n.type.value;if(!d3.event||"click"!=d3.event.type||!n.tooltip.html.value&&!n.tooltip.value["long"]||"fullscreen"in t){var k=!1,C=t.anchor||n.tooltip.anchor,S=t.length||"short",M=m(v,n);if(M===-1){var T=n.id.nesting[y-1];u(n,x,T)}var E="";if(n.mouse.click.value&&(!n.mouse.viz||n.mouse.viz.click!==!1))if(1===M&&n.zoom.value)var E=n.format.value(n.format.locale.value.ui.expand);else if(M===-1&&n.zoom.value&&n.history.states.length&&!n.tooltip.value["long"])var E=n.format.value(n.format.locale.value.ui.collapse);else if(n.small||"short"!=S||!n.tooltip.html.value&&!n.tooltip.value["long"]||1===n.focus.value.length&&n.focus.value[0]==x){if("long"==S)var E=n.footer.value||""}else var E=n.format.locale.value.ui.moreInfo;var O=!!E.length&&n.format.value(E,{key:"footer",vars:n})}else{var k=!0,w=!1,b=!0,S="long",O=n.footer.value;n.covered=!0}if("x"in t)var A=t.x;else if("static"===n.types[n.type.value].tooltip){var A=v.d3plus.x;n.zoom.translate&&n.zoom.scale&&(A=n.zoom.translate[0]+A*n.zoom.scale),A+=n.margin.left,"long"!==t.length&&(D+=f.x(),A+=n.container.value.node().getBoundingClientRect().left,A+=parseFloat(n.container.value.style("padding-left"),10))}else var A=d3.mouse(d3.select("html").node())[0];if("y"in t)var D=t.y;else if("static"==n.types[n.type.value].tooltip){var D=v.d3plus.y;n.zoom.translate&&n.zoom.scale&&(D=n.zoom.translate[1]+D*n.zoom.scale),D+=n.margin.top,"long"!==t.length&&(D+=f.y(),D+=n.container.value.node().getBoundingClientRect().top,D+=parseFloat(n.container.value.style("padding-top"),10))}else var D=d3.mouse(d3.select("html").node())[1];if("offset"in t)var R=t.offset;else if("static"==n.types[n.type.value].tooltip){var R=v.d3plus.r?v.d3plus.r:v.d3plus.height/2;n.zoom.scale&&(R*=n.zoom.scale)}else var R=3;if(k||"long"===t.length)if("string"==typeof n.tooltip.html.value)e(n.tooltip.html.value);else if("function"==typeof n.tooltip.html.value)e(n.tooltip.html.value(x));else if(n.tooltip.html.value&&"object"==typeof n.tooltip.html.value&&n.tooltip.html.value.url){var P=n.tooltip.html.value.url;"function"==typeof P&&(P=P(x)),d3.json(P,function(t){var i=n.tooltip.html.value.callback?n.tooltip.html.value.callback(t):t;e(i)})}else e(t.html);else e(t.html)}},{"../../../array/sort.coffee":36,"../../../client/scroll.js":43,"../../../core/data/nest.js":62,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/merge.coffee":174,"../../../object/validate.coffee":175,"../../../tooltip/create.js":204,"../../../tooltip/remove.coffee":206,"../../../util/uniques.coffee":213,"../shapes/segments.coffee":236,"../zoom/direction.coffee":253,"./data.js":244}],244:[function(t,e,n){var i=t("../../../util/copy.coffee"),r=t("../../../core/fetch/value.coffee"),o=t("../../../core/fetch/color.coffee"),a=t("../../../core/fetch/text.js"),s=t("../../../color/legible.coffee"),l=t("../../../object/merge.coffee"),u=t("../../../client/prefix.coffee"),c=t("../../../string/format.js"),h=t("../../../object/validate.coffee");e.exports=function(t,e,n,d,f,p){function g(n,i){if(t.attrs.value[i])var o=i;else var o=null;i&&(i=t.format.value(i));var a=v[n]||r(t,e,n,o);if(h(a))x.push({name:t.format.value(n),value:t.format.value(a.value,{key:a.key,vars:t}),group:i});else if(null!=a&&"undefined"!=a&&!(a instanceof Array)&&("string"==typeof a&&a.indexOf("d3plus_other")<0||"string"!=typeof a)){var s=t.format.locale.value.ui[n]?t.format.value(t.format.locale.value.ui[n]):t.format.value(n),l=b.indexOf(n)>=0;a instanceof Array?a.forEach(function(i){i=t.format.value(i,{key:n,vars:t,data:e})}):a=t.format.value(a,{key:n,vars:t,data:e});var u={name:s,value:a,highlight:l,group:i};if(t.descs.value)if("function"==typeof t.descs.value){var c=t.descs.value(n);"string"==typeof c&&(u.desc=c)}else n in t.descs.value&&(u.desc=t.descs.value[n]);x.push(u)}}if(t.small)return[];if(!n)var n="long";if("long"==n)var m="short";else var m="long";var v={};if(d&&"string"==typeof d)d=[d];else if(d&&"object"==typeof d){v=l(v,d);var d=[];for(var y in v)d.push(y)}else if(!d)var d=[];var b=[];if(t.tooltip.value instanceof Array)var w=t.tooltip.value;else if("string"==typeof t.tooltip.value)var w=[t.tooltip.value];else{if(t.tooltip.value[t.id.nesting[p]])var w=t.tooltip.value[t.id.nesting[p]];else var w=t.tooltip.value;w instanceof Array||(w=w[n]?w[n]:w[m]?[]:l({"":[]},w)),"string"==typeof w?w=[w]:w instanceof Array||(w=l({"":[]},w))}var x=[];if(w.constructor===Array&&(w={"":w}),t.id.nesting.length&&p<t.id.nesting.length-1){var w=i(w);t.id.nesting.forEach(function(t,e){e>p&&w[t]&&delete w[t]})}for(var _ in w){w[_].constructor!==Array&&(w[_]=[w[_]]);for(var k=d.length;k>0;k--)w[_].indexOf(d[k-1])>=0&&d.splice(k-1,1)}if(t.tooltip.value["long"]&&"object"==typeof t.tooltip.value["long"]){for(var _ in t.tooltip.value["long"])for(var k=d.length;k>0;k--){var C=d[k-1];t.tooltip.value["long"][_].indexOf(C)>=0&&(w[_]||(w[_]=[]),w[_].push(C),d.splice(k-1,1))}}d.length&&(w[""]||(w[""]=[]),w[""]=w[""].concat(d));for(var _ in w)w[_].forEach(function(t){g(t,_)});if(f){var S=t.format.locale.value.ui.including,M=f.d3plus_colors;f.values.forEach(function(e){var n=d3.keys(e)[0];x.push({group:t.format.value(S),highlight:!(!M||!M[n])&&M[n],name:n,value:e[n]})}),f.d3plusMore&&x.push({group:t.format.value(S),highlight:!0,name:c(t.format.locale.value.ui.more,f.d3plusMore),value:""})}if(t.tooltip.connections.value&&"long"===n){var T=t.edges.connections(e[t.id.value],t.id.value,!0);T.length&&T.forEach(function(e){var n=t.data.viz.filter(function(n){return n[t.id.value]===e[t.id.value]}),n=n.length?n[0]:e,i=a(t,n)[0],r=o(t,n),l=t.tooltip.font.size,c="square"==t.shape.value?0:l;styles=["background-color: "+r,"border-color: "+s(r),"border-style: solid","border-width: "+t.data.stroke.width+"px","display: inline-block","height: "+l+"px","left: 0px","position: absolute","width: "+l+"px","top: 0px",u()+"border-radius: "+c+"px"],node="<div style='"+styles.join("; ")+";'></div>";var h=function(){t.self.focus([n[t.id.value]]).draw();
};x.push({group:t.format.value(t.format.locale.value.ui.primary),highlight:!1,link:h,name:"<div id='d3plustooltipfocuslink_"+n[t.id.value]+"' class='d3plus_tooltip_focus_link' style='position:relative;padding-left:"+1.5*l+"px;'>"+node+i+"</div>"})})}return x}},{"../../../client/prefix.coffee":41,"../../../color/legible.coffee":46,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/merge.coffee":174,"../../../object/validate.coffee":175,"../../../string/format.js":176,"../../../util/copy.coffee":210}],245:[function(t,e,n){var i;i=t("../../../core/console/print.coffee"),e.exports=function(t){var e,n,r,o,a,s,l,u,c,h;if(t.group=t.g.apps[t.type.value],t.mouse.viz=!1,t.edges.path=!1,h=t.types[t.type.value],u=h.requirements||[],r=u.indexOf("data")>=0,o=!r||r&&t.data.viz.length,!t.error.internal&&o){for(e=t.format.locale.value.visualization[t.type.value],t.dev.value&&i.time("running "+e),l=t.data.viz,a=0,s=l.length;a<s;a++)n=l[a],n.d3plus&&(delete n.d3plus.shape,delete n.d3plus.label,delete n.d3plus.rotate,delete n.d3plus.share);c=h(t),t.dev.value&&i.timeEnd("running "+e)}else c=null;t.returned={nodes:[],edges:null},c instanceof Array?t.returned.nodes=c:c&&(c.nodes&&(t.returned.nodes=c.nodes),c.edges&&(t.returned.edges=c.edges))}},{"../../../core/console/print.coffee":54}],246:[function(t,e,n){var i=t("../../../util/copy.coffee"),r=t("../../../form/form.js"),o=t("../../../core/console/print.coffee"),a=t("../../../object/validate.coffee");e.exports=function(t){var e=t.ui.value&&t.ui.value.length,n=t.ui.position.value;t.dev.value&&e&&o.time("drawing custom UI elements");var s=t.container.value.selectAll("div#d3plus_drawer").data(["d3plus_drawer"]);s.enter().append("div").attr("id","d3plus_drawer");var l={};t.ui.position.accepted.forEach(function(e){l[e]=e==n?t.margin.bottom+"px":"auto"}),s.style("text-align",t.ui.align.value).style("position","absolute").style("width",t.width.value-2*t.ui.padding+"px").style("height","auto").style(l);var u=s.selectAll("div.d3plus_drawer_ui").data(e?t.ui.value:[],function(t){return t.method||!1});u.exit().remove(),u.enter().append("div").attr("class","d3plus_drawer_ui").style("display","inline-block"),u.style("padding",t.ui.padding+"px").each(function(e){e.form||(e.form=r().container(d3.select(this)).data({sort:!1}).id("id").text("text"));var n,o;"string"==typeof e.method&&e.method in t?(n=t[e.method].value,o=function(n){n!==t[e.method].value&&t.self[e.method](n).draw()}):(n=e.focus||e.value[0],a(n)&&(n=n[d3.keys(n)[0]]),"function"==typeof e.method&&(o=function(i){i!==n&&(n=i,e.focus=i,e.method(i,t.self))}));var s,l=[];e.label?s=e.label:"string"==typeof e.method&&e.method in t&&(s=t.format.locale.value.method[e.method]||e.method),e.value.forEach(function(e){var n={};a(e)?(n.id=e[d3.keys(e)[0]],n.text=t.format.value(d3.keys(e)[0])):(n.id=e,n.text=t.format.value(e)),l.push(n)});var u=i(t.ui.font);u.align=i(t.font.align),u.secondary=i(u),e.form.data(l).font(u).focus(e.value.length>1&&n).focus({callback:o}).format(t.format.locale.language).format({number:t.format.number.value,text:t.format.text.value}).title(t.format.value(s)).type(e.type||"auto").ui({align:t.ui.align.value,border:t.ui.border,color:{primary:t.ui.color.primary.value,secondary:t.ui.color.secondary.value},padding:t.ui.padding,margin:0}).width(e.width||!1).draw()});var c=s.node().offsetHeight||s.node().getBoundingClientRect().height;c&&(t.margin[n]+=c),t.dev.value&&e&&o.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.coffee":54,"../../../form/form.js":106,"../../../object/validate.coffee":175,"../../../util/copy.coffee":210}],247:[function(t,e,n){var i,r,o,a;i=t("../../../client/pointer.coffee"),r=t("../../../color/lighter.coffee"),o=t("../../../core/console/print.coffee"),a=t("../../../client/css.coffee"),e.exports=function(t){var e,n,s,l,u,c,h,d,f,p,g,m,v,y,b;return!t.small&&t.history.states.length>0?(t.dev.value&&o.time("drawing back button"),e=t.container.value.selectAll("div#d3plus_back_button").data(["d3plus_back_button"]).style("position","relative").style("z-index",1900),f=t.title.sub.font.size,n=t.title.sub.font.color,u=t.title.sub.font.family.value,b=t.title.sub.font.weight,d=t.title.sub.padding,m=!1,t.title.sub.value&&["start","left"].indexOf(t.title.sub.font.align)<0?m="sub":t.title.total.value&&["start","left"].indexOf(t.title.total.font.align)<0?m="total":t.title.value&&["start","left"].indexOf(t.title.font.align)<0&&(m="title"),m?(p=function(t){var e;return e=t.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0],e=e.replace(/([^a-z])\s([^a-z])/gi,"$1,$2"),e=e.split(","),e=e[e.length-1],parseFloat(e.substring(0,e.length-1))},v=t.svg.select(".d3plus_title."+m),y=p(v)+p(v.select("text"))):(y=t.margin.top-t.title.padding,h=f+2*d,t.margin.top+=h),s=parseFloat(t.container.value.style("padding-top"),10),y+=s,s=parseFloat(t.container.value.style("padding-left"),10),c=t.margin.left+f/2+s,g=function(t){return t.style("position","absolute").style("left",c+"px").style("top",y+"px").style("color",n).style("font-family",u).style("font-weight",b).style("font-size",f+"px")},l=e.enter().append("div").attr("id","d3plus_back_button").style("opacity",0).call(g).html(function(){var e;return a("font-awesome")&&0===t.icon.back.value.indexOf("fa-")?(e="<i class='fa "+t.icon.back.value,e+="' style='margin-top:2px;margin-right:4px;'></i>"):e=t.icon.back.value+" ",e+t.format.value(t.format.locale.value.ui.back)}),e.on(i.over,function(){if(!t.small&&t.history.states.length>0)return d3.select(this).style("cursor","pointer").transition().duration(t.timing.mouseevents).style("color",r(n,.25))}).on(i.out,function(){if(!t.small&&t.history.states.length>0)return d3.select(this).style("cursor","auto").transition().duration(t.timing.mouseevents).style("color",n)}).on(i.click,function(){return t.history.back()}).transition().duration(t.draw.timing).style("opacity",1).call(g),t.dev.value?o.timeEnd("drawing back button"):void 0):t.container.value.selectAll("div#d3plus_back_button").transition().duration(t.draw.timing).style("opacity",0).remove()}},{"../../../client/css.coffee":38,"../../../client/pointer.coffee":40,"../../../color/lighter.coffee":47,"../../../core/console/print.coffee":54}],248:[function(t,e,n){var i=t("../../../array/sort.coffee"),r=t("../../../util/buckets.coffee"),o=t("../../../util/copy.coffee"),a=t("../tooltip/create.js"),s=t("../../../core/data/nest.js"),l=t("../../../util/dataURL.coffee"),u=t("../../../client/pointer.coffee"),c=t("../../../core/fetch/value.coffee"),h=t("../../../core/fetch/color.coffee"),d=t("../../../core/fetch/text.js"),f=t("../../../core/console/print.coffee"),p=t("../../../tooltip/remove.coffee"),g=t("../../../color/text.coffee"),m=t("../../../util/uniques.coffee"),v=t("../../../client/scroll.js"),y=t("../../../string/strip.js"),b=t("../../../textwrap/textwrap.coffee"),w=(t("../../../client/touch.coffee"),t("../../../object/validate.coffee"));e.exports=function(t){function e(e){e.attr("transform",function(e,n){var i=P+n*(t.ui.padding+_);return"translate("+i+","+t.ui.padding+")"})}function n(e){e.attr("width",_).attr("height",_).attr("fill",function(e){d3.select(this.parentNode).select("text").remove();var n=m(e,t.icon.value,c,t,F),i=h(t,e,F);if(t.legend.icons.value&&1===n.length&&"string"==typeof n[0]){n=n[0];var r,o=y(n+"_"+i),a=t.icon.style.value,s=t.defs.selectAll("pattern#"+o).data([o]);r="string"==typeof a?t.icon.style.value:w(a)&&a[F]?a[F]:"default",i="knockout"==r?i:"none",s.select("rect").transition().duration(t.draw.timing).attr("fill",i).attr("width",_).attr("height",_),s.select("image").transition().duration(t.draw.timing).attr("width",_).attr("height",_);var u=s.enter().append("pattern").attr("id",o).attr("width",_).attr("height",_);return u.append("rect").attr("fill",i).attr("stroke","none").attr("width",_).attr("height",_),u.append("image").attr("xlink:href",n).attr("width",_).attr("height",_).each(function(t){0===n.indexOf("/")||n.indexOf(window.location.hostname)>=0?l(n,function(t){s.select("image").attr("xlink:href",t)}):s.select("image").attr("xlink:href",n)}),"url(#"+o+")"}if(t.legend.labels.value){var f;if(f=t.legend.text.value?[c(t,e,t.legend.text.value,j)]:d(t,e,j),1===f.length&&!(f[0]instanceof Array)&&f[0].length){var p=d3.select(this.parentNode).append("text"),v=t.legend.font.size;v instanceof Array||(v=[v]),p.attr("font-size",v[v.length-1]+"px").attr("font-weight",t.legend.font.weight).attr("font-family",t.legend.font.family.value).attr("stroke","none").attr("fill",g(i)).attr("x",0).attr("y",0).each(function(e){b().align("middle").container(d3.select(this)).height(_).padding(t.ui.padding).resize(v.length>1).size(v).text(f[0]).width(_).valign("middle").draw()}),p.select("tspan").empty()&&p.remove()}}return i})}var x=!0,_=0;if(!t.error.internal&&t.color.value&&!t.small&&t.legend.value)if(t.color.valueScale)if(t.color.valueScale){t.dev.value&&f.time("drawing color scale"),t.g.legend.selectAll("g.d3plus_color").transition().duration(t.draw.timing).attr("opacity",0).remove();var k=t.color.valueScale.domain(),C=t.color.valueScale.range();k.length<=2&&(k=r(k,6));var S=t.g.legend.selectAll("g.d3plus_scale").data(["scale"]);S.enter().append("g").attr("class","d3plus_scale").attr("opacity",0);var M=t.container.id+"_legend_heatmap",T=S.selectAll("#"+M).data(["heatmap"]);T.enter().append("linearGradient").attr("id",M).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var E=T.selectAll("stop").data(d3.range(0,C.length));E.enter().append("stop").attr("stop-opacity",1),E.attr("offset",function(t){return Math.round(t/(C.length-1)*100)+"%"}).attr("stop-color",function(t){return C[t]}),E.exit().remove();var O=S.selectAll("rect#gradient").data(["gradient"]);O.enter().append("rect").attr("id","gradient").attr("x",function(e){return"middle"==t.legend.align?t.width.value/2:"end"==t.legend.align?t.width.value:0}).attr("y",t.ui.padding).attr("width",0).attr("height",t.legend.gradient.height).attr("stroke",t.legend.font.color).attr("stroke-width",1).style("fill","url(#"+M+")");var A=S.selectAll("text.d3plus_tick").data(d3.range(0,k.length));A.enter().append("text").attr("class","d3plus_tick").attr("stroke","none").attr("x",function(e){return"middle"==t.legend.align?t.width.value/2:"end"==t.legend.align?t.width.value:0}).attr("y",function(e){return this.getBBox().height+t.legend.gradient.height+2*t.ui.padding});var D=0;A.order().attr("font-weight",t.legend.font.weight).attr("font-family",t.legend.font.family.value).attr("font-size",t.legend.font.size+"px").style("text-anchor",t.legend.font.align).attr("fill",t.legend.font.color).text(function(e){return t.format.value(k[e],{key:t.color.value,vars:t})}).attr("y",function(e){return this.getBBox().height+t.legend.gradient.height+2*t.ui.padding}).each(function(t){var e=Math.ceil(this.getBBox().width);e>D&&(D=e)}),D+=2*t.labels.padding;var R=D*(k.length-1);if(R+D<t.width.value){R+D<t.width.value/2&&(R=t.width.value/2,D=R/k.length,R-=D);var P;P="start"==t.legend.align?t.ui.padding:"end"==t.legend.align?t.width.value-t.ui.padding-R:t.width.value/2-R/2,A.transition().duration(t.draw.timing).attr("x",function(t){return P+D*t}),A.exit().transition().duration(t.draw.timing).attr("opacity",0).remove();var N=S.selectAll("rect.d3plus_tick").data(d3.range(0,k.length));N.enter().append("rect").attr("class","d3plus_tick").attr("x",function(e){return"middle"==t.legend.align?t.width.value/2:"end"==t.legend.align?t.width.value:0}).attr("y",t.ui.padding).attr("width",0).attr("height",t.ui.padding+t.legend.gradient.height).attr("fill",t.legend.font.color),N.transition().duration(t.draw.timing).attr("x",function(t){var e=0===t?1:0;return P+D*t-e}).attr("y",t.ui.padding).attr("width",1).attr("height",t.ui.padding+t.legend.gradient.height).attr("fill",t.legend.font.color),N.exit().transition().duration(t.draw.timing).attr("width",0).remove(),O.transition().duration(t.draw.timing).attr("x",function(e){return"middle"==t.legend.align?t.width.value/2-R/2:"end"==t.legend.align?t.width.value-R-t.ui.padding:t.ui.padding}).attr("y",t.ui.padding).attr("width",R).attr("height",t.legend.gradient.height),S.transition().duration(t.draw.timing).attr("opacity",1),t.dev.value&&f.timeEnd("drawing color scale")}else x=!1}else x=!1;else{t.dev.value&&f.time("grouping data by colors");var z;if(t.nodes.value&&t.types[t.type.value].requirements.indexOf("nodes")>=0){if(z=o(t.nodes.restriced||t.nodes.value),t.data.viz.length)for(var L=0;L<z.length;L++){var I=t.data.viz.filter(function(e){return e[t.id.value]===z[L][t.id.value]});I.length&&(z[L]=I[0])}}else z=t.data.viz;z.length&&"key"in z[0]&&"values"in z[0]&&(z=d3.merge(z.map(function(t){return t.values})));var H=function(e){return h(t,e,j)},j=0,F=t.id.value,B=t.id.nesting.indexOf(t.color.value);if(B>=0)j=B,F=t.id.nesting[B];else for(var W=0;W<=t.depth.value;W++){j=W,F=t.id.nesting[W];var Y=m(z,function(e){return c(t,e,F)}),V=m(z,H);if(Y.length>=V.length&&V.length>1)break}var U=[t.color.value],C=s(t,z,U,!1);t.dev.value&&f.timeEnd("grouping data by color");var q=t.width.value;_=t.legend.size;var R=_*C.length+t.ui.padding*(C.length+1);if(_ instanceof Array){t.dev.value&&f.time("calculating legend size");for(var L=_[1];L>=_[0];L--)if(R=L*C.length+t.ui.padding*(C.length+1),q>=R){_=L;break}t.dev.value&&f.timeEnd("calculating legend size")}else"number"!=typeof _&&_!==!1&&(_=30);if(q<R||1==C.length)x=!1;else{if(R-=2*t.ui.padding,t.dev.value&&f.time("sorting legend"),"function"==typeof t.legend.order.value)C=t.legend.order.value(C);else{var X=t[t.legend.order.value].value,G=t.color.value;X?"color"!==t.legend.order.value&&(G=[]):X=t[t.color.value].value,i(C,X,t.legend.order.sort.value,G,t,j)}t.dev.value&&f.timeEnd("sorting legend"),t.dev.value&&f.time("drawing legend");var P;P="start"==t.legend.align?t.ui.padding:"end"==t.legend.align?q-t.ui.padding-R:q/2-R/2,t.g.legend.selectAll("g.d3plus_scale").transition().duration(t.draw.timing).attr("opacity",0).remove();var $={},K=t.g.legend.selectAll("g.d3plus_color").data(C,function(e){var n=h(t,e,F);return n in $||($[n]=-1),$[n]++,$[n]+"_"+n});K.enter().append("g").attr("class","d3plus_color").attr("opacity",0).call(e).append("rect").attr("class","d3plus_color").attr("stroke","none").call(n),K.order().transition().duration(t.draw.timing).call(e).attr("opacity",1).selectAll("rect.d3plus_color").call(n),K.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),t.legend.tooltip.value&&K.on(u.over,function(e,n){d3.select(this).style("cursor","pointer");var i,r=this.getBoundingClientRect(),o=r.left+_/2+v.x(),s=r.top+_/2+v.y()+5,l=c(t,e,F),h=t.id.nesting.indexOf(F);i=t.legend.title.value?c(t,e,t.legend.title.value,j):h>=0?d(t,e,h)[0]:t.format.value(c(t,e,t.color.value,F),{key:t.color.value,vars:t,data:e});var f,p;if(t.legend.filters.value&&!(l instanceof Array)){f="<div style='text-align:center;'>";var g=t.format.locale.value;f+="<div class='mute'>"+t.format.value(g.method.mute)+"</div>",f+="<div class='solo'>"+t.format.value(g.method.solo)+"</div>",f+="</div>",p=function(e){var n={border:"1px solid #ccc",display:"inline-block",margin:"1px 2px",padding:"3px 5px"};e.select(".mute").style(n).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var e=t.id.mute.value;t.history.states.push(function(){t.self.id({mute:e}).draw()}),t.self.id({mute:l}).draw()}),e.select(".solo").style(n).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var e=t.id.solo.value;t.history.states.push(function(){t.self.id({solo:e}).draw()}),t.self.id({solo:l}).draw()})}}a({data:e,html:f,js:p,depth:j,footer:!1,vars:t,x:o,y:s,mouseevents:this,title:i,titleOnly:!t.legend.data.value,offset:.4*_})}).on(u.out,function(e){p(t.type.value)}),t.dev.value&&f.timeEnd("drawing legend")}}else x=!1;if(t.legend.value&&key&&x){if(t.dev.value&&f.time("positioning legend"),_)var Z=_+t.ui.padding;else var Q=t.g.legend.node().getBBox(),Z=Q.height+Q.y;0===t.margin.bottom&&(t.margin.bottom+=t.ui.padding),t.margin.bottom+=Z,t.g.legend.transition().duration(t.draw.timing).attr("transform","translate(0,"+(t.height.value-t.margin.bottom)+")"),t.dev.value&&f.timeEnd("positioning legend")}else t.dev.value&&f.time("hiding legend"),t.g.legend.transition().duration(t.draw.timing).attr("transform","translate(0,"+t.height.value+")"),t.dev.value&&f.timeEnd("hiding legend")}},{"../../../array/sort.coffee":36,"../../../client/pointer.coffee":40,"../../../client/scroll.js":43,"../../../client/touch.coffee":45,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/data/nest.js":62,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/validate.coffee":175,"../../../string/strip.js":178,"../../../textwrap/textwrap.coffee":203,"../../../tooltip/remove.coffee":206,"../../../util/buckets.coffee":207,"../../../util/copy.coffee":210,"../../../util/dataURL.coffee":212,"../../../util/uniques.coffee":213,"../tooltip/create.js":243}],249:[function(t,e,n){var i=t("../../../client/pointer.coffee"),r=t("../../../color/text.coffee");e.exports=function(t,e){function n(e){e.style(a).style("position","absolute").style("background-color",l).style("text-align","center").style("left",function(){return"center"==s?"50%":"0px"}).style("width",function(){return"center"==s?"auto":t.width.value+"px"}).style("margin-left",function(){return"center"==s?-(this.offsetWidth/2)+"px":"0px"}).style("top",function(){return"center"==s?"50%":"top"==s?"0px":"auto"}).style("bottom",function(){return"bottom"==s?"0px":"auto"}).style("margin-top",function(){if("large"==o){var t=this.offsetHeight||this.getBoundingClientRect().height;return-t/2+"px"}return"0px"})}e=t.messages.value?e:null;var o=t.messages.style.value||(e===t.error.internal?"large":t.messages.style.backup);if("large"===o)var a=t.messages,s="center";else{if(t.footer.value)var a=t.footer;else if(t.title.value)var a=t.title;else if(t.title.sub.value)var a=t.title.sub;else if(t.title.total.value)var a=t.title.total;else var a=t.title.sub;var s=a.position}var a={color:a.font.color,"font-family":a.font.family.value,"font-weight":a.font.weight,"font-size":a.font.size+"px",padding:a.padding+"px"},l=t.messages.background.value;l||(l=t.background.value,"none"!==l&&"transparent"!==l||(l=r(a.color))),t.g.message=t.container.value.selectAll("div#d3plus_message").data(["message"]);var u=t.g.message.enter().append("div").attr("id","d3plus_message").attr("opacity",0);u.append("div").attr("class","d3plus_message_text").style("display","block"),t.g.message.select(".d3plus_message_text").text(e?e:t.g.message.text());var c=navigator.onLine,h=75,d=t.g.message.selectAll(".d3plus_message_branding").data(t.messages.branding.value&&"center"===s?[0]:[]);d.enter().append("div").attr("class","d3plus_message_branding").style("margin-top","15px").style("padding-top","0px").style("display","block").style("font-size","11px").style("background-size",h+"px").style("background-position","center 10px").style("background-repeat","no-repeat").style("cursor","pointer").on(i.click,function(){window.open("http://www.d3plus.org/","_blank")});var f=d3.hsl(l).l<.5?t.messages.branding.image.dark:t.messages.branding.image.light;d.text(c?"Powered by:":"Powered by D3plus").style("background-color",c?l:"transparent").style("background-image",c?"url('"+f+"')":"none").style("min-width",c?h+"px":"auto").style("height",c?h+"px":"auto"),d.exit().remove(),t.g.message.style("display",e?"inline-block":"none").call(n).style("opacity",e?1:0)}},{"../../../client/pointer.coffee":40,"../../../color/text.coffee":52}],250:[function(t,e,n){var i,r,o,a,s,l,u,c,h,d;i=t("../../../util/closest.coffee"),r=t("../../../client/css.coffee"),a=t("../../../font/sizes.coffee"),o=t("../../../client/pointer.coffee"),s=t("../../../color/mix.coffee"),u=t("../../../client/prefix.coffee"),c=t("../../../core/console/print.coffee"),h=t("../../../color/text.coffee"),d=t("../../../core/data/time.coffee"),l=!1,e.exports=function(t){var e,n,a,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F,B,W,Y,V,U,q,X,G,$,K,Z,Q,J,tt,et,nt,it,rt,ot,at;if(!t.timeline.value||t.error.internal&&t.data.missing||t.small||!t.data.time||!(t.data.time.values.length>1))return t.g.timeline.transition().duration(t.draw.timing).attr("transform","translate(0,"+t.height.value+")");if(t.dev.value&&c.time("drawing timeline"),U={"font-weight":t.ui.font.weight,"font-family":t.ui.font.family.value,"font-size":t.ui.font.size+"px","text-anchor":"middle"},at=t.data.time.ticks.map(function(t){return new Date(t)}),K=d(t,{values:at,style:U}),et=K.values.map(Number),$=K.format,t.time.solo.value.length)for(x=d3.extent(t.time.solo.value),w=_=0,S=x.length;_<S;w=++_)v=x[w],v.constructor!==Date&&(v+="",4===v.length&&parseInt(v)+""===v&&(v+="/01/01"),v=new Date(v),x[w]=v);else x=d3.extent(at);if(ot=at.slice(),it=d3.max(K.sizes.map(function(t){return t.height})),k=~~d3.max(K.sizes.map(function(t){return t.width}))+1,k+=2*t.ui.padding,Q=t.timeline.height.value||it+2*t.ui.padding,tt=k*at.length,L=Q,W=Q-2*t.ui.padding>=it,e=t.width.value-2*t.ui.padding,W&&t.timeline.play.value&&(e-=L+t.ui.padding),!W||et.length<at.length||e<k*et.length){for(O=k,k=(e-k)/at.length,tt=k*at.length,J=1,X=~~(O/(tt/et.length))+1;X<et.length-1&&(et.length-1)%X!==0;)X++;et=et.filter(function(t,e){return e%X===0})}else J=0,T=new Date(at[0]),F=t.data.time.stepType,T["set"+F](T["get"+F]()+at.length),ot.push(T);return H=new Date(x[0]),H=i(ot,H),y=new Date(x[1]),J||y["set"+t.data.time.stepType](y["get"+t.data.time.stepType]()+1),y=i(ot,y),rt=ot.map(Number),E=rt.indexOf(+H),M=rt.indexOf(+y),f=[H,y],j="start"===t.timeline.align?t.ui.padding:"end"===t.timeline.align?t.width.value-t.ui.padding-tt:t.width.value/2-tt/2,W&&t.timeline.play.value&&(j+=(L+t.ui.padding)/2),B=function(){return clearInterval(l),l=!1,D.call(R,"icon")},g=function(){var t,e,n;if(null!==d3.event.sourceEvent){if(l&&B(),f=a.extent(),n=i(ot,f[0]),e=i(ot,f[1]),n===e&&(E=rt.indexOf(+n),n<f[0]||0===E?e=ot[E+1]:n=ot[E-1]),E=rt.indexOf(+n),M=rt.indexOf(+e),M-E>=1)t=[n,e];else if(E+1<=at.length)t=[n,ot[E+1]];else{for(t=[n],w=1;w<=1;)E+w<=at.length?t.push(ot[E+w]):t.unshift(ot[E-(E+w-at.length)]),w++;t=[t[0],t[t.length-1]]}return f=t,Y.attr("fill",V),d3.select(this).call(a.extent(t))}},I=function(){var e;return M-E===at.length-J?e=[]:(e=rt.filter(function(t,e){return e>=E&&e<M+J}),e=e.map(function(t){return new Date(t)})),z(),t.self.time({solo:e}).draw()},m=function(){var e,n,r,o;if(null!==d3.event.sourceEvent&&(t.time.solo.value.length?(o=d3.extent(t.time.solo.value),r=rt.indexOf(+i(ot,o[0])),n=rt.indexOf(+i(ot,o[1])),e=r!==E||n!==M):e=M-E!==at.length-J,e))return I()},A=t.g.timeline.selectAll("rect.d3plus_timeline_play").data(W&&t.timeline.play.value?[0]:[]),N=function(e){return e.attr("width",L+1).attr("height",Q+1).attr("fill",t.ui.color.primary.value).attr("stroke",t.ui.color.primary.value).attr("stroke-width",1).attr("x",j-L-1-t.ui.padding).attr("y",t.ui.padding)},A.enter().append("rect").attr("class","d3plus_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(N),A.transition().duration(t.draw.timing).call(N),A.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),D=t.g.timeline.selectAll("text.d3plus_timeline_playIcon").data(W&&t.timeline.play.value?[0]:[]),R=function(e,n){var i;return n=t.timeline.play[n],r("font-awesome")?(n=n.awesome,i="FontAwesome"):(n=n.fallback,i="inherit"),e.style("font-family",i).text(n)},P=function(e){var n;return n=Q/2+t.ui.padding+1,e.attr("fill",h(t.ui.color.primary.value)).attr("stroke","none").attr(U).attr("x",j-(L-1)/2-t.ui.padding).attr("y",n).attr("dy","0.5ex").call(R,l?"pause":"icon")},D.enter().append("text").attr("class","d3plus_timeline_playIcon").call(P).style("pointer-events","none").attr("opacity",0),D.call(P).transition().duration(t.draw.timing).attr("opacity",1),D.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),z=function(){return M-E===at.length-J?(A.on(o.hover,null).on(o.click,null).transition().duration(t.draw.timing).attr("opacity",.3),D.transition().duration(t.draw.timing).attr("opacity",.3)):(A.on(o.over,function(){return d3.select(this).style("cursor","pointer")}).on(o.out,function(){return d3.select(this).style("cursor","auto")}).on(o.click,function(){return l?B():(D.call(R,"pause"),M===at.length?(M-=E,E=0):(E++,M++),I(),l=setInterval(function(){return M===at.length-J?B():(E++,M++,I())},t.timeline.play.timing.value))}).transition().duration(t.draw.timing).attr("opacity",1),D.transition().duration(t.draw.timing).attr("opacity",1))},z(),V=function(e){var n,i,r;return i=J?e<=f[1]:e<f[1],e>=f[0]&&i?(r=1,n=h(t.ui.color.secondary.value)):(r=.5,n=h(t.ui.color.primary.value)),J&&t.background.value&&"none"!==t.background.value&&(n=d3.rgb(h(t.background.value))),n=d3.rgb(n),"rgba("+n.r+","+n.g+","+n.b+","+r+")"},n=t.g.timeline.selectAll("rect.d3plus_timeline_background").data(["background"]),n.enter().append("rect").attr("class","d3plus_timeline_background").attr("shape-rendering","crispEdges").attr("width",tt+2).attr("height",Q+2).attr("fill",t.ui.color.primary.value).attr("x",j-1).attr("y",t.ui.padding),n.transition().duration(t.draw.timing).attr("width",tt+2).attr("height",Q+2).attr("fill",t.ui.color.primary.value).attr("x",j-1).attr("y",t.ui.padding),G=t.g.timeline.selectAll("g#ticks").data(["ticks"]),G.enter().append("g").attr("id","ticks").attr("transform","translate("+t.width.value/2+","+t.ui.padding+")"),p=t.g.timeline.selectAll("g#brush").data(["brush"]),p.enter().append("g").attr("id","brush"),C=t.g.timeline.selectAll("g#labels").data(["labels"]),C.enter().append("g").attr("id","labels"),Y=C.selectAll("text").data(at,function(t,e){return e}),Y.enter().append("text").attr("stroke","none").attr("y",0).attr("dy","0.5ex").attr("x",0),nt=d3.time.scale().domain(d3.extent(ot)).rangeRound([0,tt]),Y.order().attr(U).text(function(t,e){return et.indexOf(+t)>=0?$(t):""}).attr("opacity",function(e,n){return t.data.time.dataSteps.indexOf(n)>=0?1:.4}).attr("fill",V).attr("transform",function(e,n){var i,r;return i=j+nt(e),J||(i+=k/2),r=Q/2+t.ui.padding+1,J&&(r+=Q/2+it),"translate("+Math.round(i)+","+Math.round(r)+")"}),Y.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),a=d3.svg.brush().x(nt).extent(f).on("brush",g).on("brushend",m),q=t.axes.discrete&&t[t.axes.discrete].value===t.time.value?t[t.axes.discrete].ticks.color:t.x.ticks.color,G.attr("transform","translate("+j+","+(t.ui.padding+1)+")").transition().duration(t.draw.timing).call(d3.svg.axis().scale(nt).orient("top").ticks(function(){return ot}).tickFormat("").tickSize(-Q).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(e){return et.indexOf(+e)>=0?q:s(q,t.background.value,.4,1)}),G.selectAll("path").attr("fill","none"),p.attr("transform","translate("+j+","+(t.ui.padding+1)+")").attr("opacity",1).call(a),Y.attr("pointer-events","none"),p.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",Q).attr("shape-rendering","crispEdges").on(o.move,function(){var e;return e=t.timeline.hover.value,["grab","grabbing"].indexOf(e)>=0&&(e=u()+e),d3.select(this).style("cursor",e)}),p.selectAll("rect.extent").attr("opacity",.75).attr("height",Q).attr("fill",t.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(o.move,function(){var e;return e=t.timeline.hover.value,["grab","grabbing"].indexOf(e)>=0&&(e=u()+e),d3.select(this).style("cursor",e)}),t.timeline.handles.value?(b=p.selectAll("g.resize").selectAll("rect.d3plus_handle").data(["d3plus_handle"]),b.enter().insert("rect","rect").attr("class","d3plus_handle"),b.attr("fill",t.timeline.handles.color).attr("transform",function(e){var n;return n="resize e"===this.parentNode.className.baseVal?-t.timeline.handles.size:0,"translate("+n+",0)"}).attr("width",t.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",t.timeline.handles.opacity),p.selectAll("g.resize").selectAll("rect").attr("height",Q)):p.selectAll("g.resize").remove(),Z=t.g.timeline.node().getBBox(),0===t.margin.bottom&&(t.margin.bottom+=t.ui.padding),t.margin.bottom+=Z.height+Z.y,t.g.timeline.transition().duration(t.draw.timing).attr("transform","translate(0,"+Math.round(t.height.value-t.margin.bottom-t.ui.padding/2)+")"),t.margin.bottom+=t.ui.padding,t.dev.value?c.time("drawing timeline"):void 0}},{"../../../client/css.coffee":38,"../../../client/pointer.coffee":40,"../../../client/prefix.coffee":41,"../../../color/mix.coffee":48,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/data/time.coffee":64,"../../../font/sizes.coffee":104,"../../../util/closest.coffee":209}],251:[function(t,e,n){var i=t("../../../client/pointer.coffee"),r=t("../../../core/fetch/value.coffee"),o=t("../../../core/console/print.coffee"),a=t("../../../client/rtl.coffee"),s=t("../../../textwrap/textwrap.coffee");e.exports=function(t){function e(e){e.attr("font-size",function(t){return t.style.font.size}).attr("fill",function(e){return e.link?t.links.font.color:e.style.font.color}).attr("font-family",function(e){return e.link?t.links.font.family.value:e.style.font.family.value}).attr("font-weight",function(e){return e.link?t.links.font.weight:e.style.font.weight}).style("text-decoration",function(e){return e.link?t.links.font.decoration.value:e.style.font.decoration.value}).style("text-transform",function(e){return e.link?t.links.font.transform.value:e.style.font.transform.value})}function n(t){var e=t.style.font.align;return"center"==e?"middle":"left"==e&&!a||"right"==e&&a?"start":"left"==e&&a||"right"==e&&!a?"end":e}var l=t.size.value?t.size.value:"number"===t.color.type&&t.color.value;if(t.data.viz&&t.title.total.value&&!t.small)if(l){t.dev.value&&o.time("calculating total value");var u=t.data.pool;t.focus.value.length&&(u=t.data.viz.filter(function(e){return e[t.id.value]==t.focus.value[0]}));var c,h=t.aggs.value[l]||"sum";if(h.constructor===Function?c=h(u):(u=u.reduce(function(e,n){var i=r(t,n,l);return i instanceof Array?e=e.concat(i):e.push(i),e},[]),c=d3[h](u)),0!==c&&null!==c&&void 0!==c||(c=!1),"number"==typeof c){var d="";if(t.data.mute.length||t.data.solo.length||t.focus.value.length){var f=d3.sum(t.data.value,function(e){if(t.time.solo.value.length>0)var n=t.time.solo.value.indexOf(r(t,e,t.time.value))>=0;else if(t.time.mute.value.length>0)var n=t.time.solo.value.indexOf(r(t,e,t.time.value))<0;else var n=!0;if(n)return r(t,e,l)});if(f>c){var d=c/f*100,p=t.format.value(f,{key:t.size.value,vars:t});d=" ("+t.format.value(d,{key:"share",vars:t})+" of "+p+")"}}c=t.format.value(c,{key:t.size.value,vars:t});var g=t.title.total.value,m=g.prefix||t.format.value(t.format.locale.value.ui.total)+": ";c=m+c,g.suffix?c+=g.suffix:null,c+=d}t.dev.value&&o.timeEnd("calculating total value")}else var c=!1;else var c=!1;var v=[];if(t.footer.value&&v.push({link:t.footer.link,style:t.footer,type:"footer",value:t.footer.value}),!t.small){if(t.title.value){var y=t.title.value;"function"==typeof y&&(y=y(t.self)),v.push({link:t.title.link,style:t.title,type:"title",value:y})}if(t.title.sub.value){var y=t.title.sub.value;"function"==typeof y&&(y=y(t.self)),v.push({link:t.title.sub.link,style:t.title.sub,type:"sub",value:y})}t.title.total.value&&c&&v.push({link:t.title.total.link,style:t.title.total,type:"total",value:c})}t.dev.value&&o.time("drawing titles");var b=t.svg.selectAll("g.d3plus_title").data(v,function(t){return t.type}),w=t.title.width||t.width.value-t.margin.left-t.margin.right;b.enter().append("g").attr("class",function(t){return"d3plus_title "+t.type}).attr("opacity",0).append("text").attr("stroke","none").call(e),b.each(function(i){var r=d3.select(this).select("text").call(e),o=n(i);s().align(o).container(r).height(t.height.value/2).size(!1).text(i.value).width(w).draw(),i.y=t.margin[i.style.position],
t.margin[i.style.position]+=this.getBBox().height+2*i.style.padding}).on(i.over,function(e){e.link&&d3.select(this).transition().duration(t.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",t.links.hover.color).attr("font-family",t.links.hover.family.value).attr("font-weight",t.links.hover.weight).style("text-decoration",t.links.hover.decoration.value).style("text-transform",t.links.hover.transform.value)}).on(i.out,function(n){n.link&&d3.select(this).transition().duration(t.timing.mouseevents).style("cursor","auto").select("text").call(e)}).on(i.click,function(t){if(t.link){var e="/"!=t.link.charAt(0)?"_blank":"_self";window.open(t.link,e)}}).attr("opacity",1).attr("transform",function(e){var i=e.style.position,r="top"==i?0+e.y:t.height.value-e.y;"bottom"==i?r-=this.getBBox().height+e.style.padding:r+=e.style.padding;var o=n(e);if("start"===o)var a=t.margin.left+t.title.padding;else{d3.select(this).select("text").node().getBBox().width;a="middle"===o?t.width.value/2-w/2:t.width.value-w-t.margin.right-t.title.padding}return"translate("+a+","+r+")"}),b.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),t.margin.top>0&&(t.margin.top+=t.title.padding),t.margin.bottom>0&&(t.margin.bottom+=t.title.padding);var x=t.title.height;x&&t.margin[t.title.position]<x&&(t.margin[t.title.position]=x),t.dev.value&&o.timeEnd("drawing titles")}},{"../../../client/pointer.coffee":40,"../../../client/rtl.coffee":42,"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../textwrap/textwrap.coffee":203}],252:[function(t,e,n){var i,r;i=t("./labels.coffee"),r=t("./transform.coffee"),e.exports=function(t,e,n){var o,a,s,l,u,c,h,d,f;return e||(e=t.zoom.bounds),"number"!=typeof n&&(n=t.timing.transitions),t.zoom.size={height:e[1][1]-e[0][1],width:e[1][0]-e[0][0]},f=t.types[t.type.value],s=t.coords.fit.value,o="auto"===s||f.requirements.indexOf("coords")<0?d3.max([t.zoom.size.width/t.width.viz,t.zoom.size.height/t.height.viz]):t.zoom.size[s]/t["app_"+s],u=d3.min([t.width.viz,t.height.viz]),c=f.zoom?2*t.coords.padding:0,h=(u-c)/u/o,a=t.zoom.behavior.scaleExtent(),a[0]!==a[1]&&e!==t.zoom.bounds||t.zoom.behavior.scaleExtent([h,16*h]),l=t.zoom.behavior.scaleExtent()[1],h>l&&(h=l),t.zoom.scale=h,d=[t.width.viz/2-t.zoom.size.width*h/2-e[0][0]*h,t.height.viz/2-t.zoom.size.height*h/2-e[0][1]*h],t.zoom.translate=d,t.zoom.behavior.translate(d).scale(h),t.zoom.size={height:t.zoom.bounds[1][1]-t.zoom.bounds[0][1],width:t.zoom.bounds[1][0]-t.zoom.bounds[0][0]},t.zoom.reset=!1,(t.labels.value||t.labels.changed)&&i(t),r(t,n)}},{"./labels.coffee":254,"./transform.coffee":257}],253:[function(t,e,n){e.exports=function(t,e){var n,i,r;return i=e.id.nesting.length-1,n=e.depth.value,r=e.id.nesting[n+1],e.types[e.type.value].nesting===!1?0:(t.d3plus.merged||r in t&&n<i)&&(!t||r in t)?1:!(n===i&&n>0||t&&r&&!(r in t))||!e.small&&e.tooltip.html.value?0:-1}},{}],254:[function(t,e,n){var i;i=t("../../../core/console/print.coffee"),e.exports=function(t){var e,n;if(t.dev.value&&i.time("determining label visibility"),n=t.zoom.behavior.scaleExtent(),e=function(e){return e.attr("opacity",function(e){var i;return e||(e={}),i=parseFloat(d3.select(this).attr("font-size"),10),e.visible=i*(t.zoom.scale/n[1])>=2,e.visible?1:0})},t.draw.timing?t.g.viz.selectAll("text.d3plus_label").transition().duration(t.draw.timing).call(e):t.g.viz.selectAll("text.d3plus_label").call(e),t.dev.value)return i.timeEnd("determining label visibility")}},{"../../../core/console/print.coffee":54}],255:[function(t,e,n){var i,r,o;i=t("./labels.coffee"),r=t("../../../tooltip/remove.coffee"),o=t("./transform.coffee"),e.exports=function(t){var e,n,a,s,l,u,c,h,d,f,p;return n=d3.event.sourceEvent?d3.event.sourceEvent.type:null,l=d3.event.translate,s=d3.event.scale,a=t.zoom.bounds,h=(t.width.viz-t.zoom.size.width*s)/2,c=h>0?h:0,u=h>0?t.width.viz-h:t.width.viz,p=(t.height.viz-t.zoom.size.height*s)/2,f=p>0?p:0,d=p>0?t.height.viz-p:t.height.viz,l[0]+a[0][0]*s>c?l[0]=-a[0][0]*s+c:l[0]+a[1][0]*s<u&&(l[0]=u-a[1][0]*s),l[1]+a[0][1]*s>f?l[1]=-a[0][1]*s+f:l[1]+a[1][1]*s<d&&(l[1]=d-a[1][1]*s),t.zoom.behavior.translate(l).scale(s),t.zoom.translate=l,t.zoom.scale=s,"wheel"===n&&r(t.type.value),(t.labels.value||t.labels.changed)&&("wheel"===n?(e=t.draw.timing?100:250,clearTimeout(t.zoom.wheel),t.zoom.wheel=setTimeout(function(){return i(t)},e)):i(t)),"dblclick"===n?o(t,t.timing.transitions):o(t,0)}},{"../../../tooltip/remove.coffee":206,"./labels.coffee":254,"./transform.coffee":257}],256:[function(t,e,n){e.exports=function(t,e){var n,i,r,o;i=t.zoom,e||(e=d3.event),o=i.scale>i.behavior.scaleExtent()[0],n=t.types[t.type.value].zoom&&i.value&&i.scroll.value,r=e.touches&&e.touches.length>1&&n,r||o||e.stopPropagation()}},{}],257:[function(t,e,n){e.exports=function(t,e){var n;return"number"!=typeof e&&(e=t.timing.transitions),n="translate("+t.zoom.translate+")",n+="scale("+t.zoom.scale+")",e?t.g.viz.transition().duration(e).attr("transform",n):t.g.viz.attr("transform",n)}},{}],258:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[!1,Function,Object,String],deprecates:"active_var",mute:i(!0),solo:i(!0),spotlight:{accepted:[Boolean],deprecates:"spotlight",value:!1},value:!1}},{"../../core/methods/filter.coffee":83}],259:[function(t,e,n){e.exports={accepted:[Object],deprecated:"nesting_aggs",objectAccess:!1,value:{}}},{}],260:[function(t,e,n){var i;i=t("../../core/methods/process/data.coffee"),e.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},keys:{},process:i,value:!1}},{"../../core/methods/process/data.coffee":89}],261:[function(t,e,n){var i,r;i=t("../../core/methods/process/margin.coffee"),r=t("../../core/methods/rendering.coffee"),e.exports={background:{color:"#fafafa",rendering:r(),stroke:{color:"#ccc",width:1}},margin:{accepted:[Number,Object,String],process:function(t){var e;return void 0===t&&(t=this.value),e=t,i(t,this),e},value:10},mirror:{accepted:[Boolean],deprecates:["mirror_axis","mirror_axes"],value:!1},ticks:{accepted:[Boolean],value:!0}}},{"../../core/methods/process/margin.coffee":92,"../../core/methods/rendering.coffee":94}],262:[function(t,e,n){e.exports={accepted:[String],value:"#ffffff"}},{}],263:[function(t,e,n){e.exports={accepted:[Function,String],value:!1}},{}],264:[function(t,e,n){var i,r;i=t("../../core/methods/filter.coffee"),r=t("../../color/scale.coffee"),e.exports={accepted:[!1,Array,Function,Object,String],deprecates:"color_var",domain:{accepted:[!1,Array],value:!1},focus:"#444444",heatmap:["#282F6B","#419391","#AFD5E8","#EACE3F","#B35C1E","#B22200"],missing:"#eeeeee",mute:i(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3plus","category10","category20","category20b","category20c"],process:function(t){return t instanceof Array?d3.scale.ordinal().range(t):"d3plus"===t?r:"string"==typeof t?d3.scale[t]():t},value:"d3plus"},solo:i(!0),secondary:"#e5b3bb",value:!1}},{"../../color/scale.coffee":50,"../../core/methods/filter.coffee":83}],265:[function(t,e,n){e.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(t,e){return"string"==typeof t&&(t=[t]),t},value:!1}},{}],266:[function(t,e,n){arguments[4][110][0].apply(n,arguments)},{dup:110}],267:[function(t,e,n){var i;i=t("../../util/d3selection.coffee"),e.exports={accepted:[!1,Array,Object,String],id:"default",process:function(t,e){return t!==!1&&("default"===e.container.id&&e.self.container({id:"d3plus_"+ +new Date}),i(t)?t.append("div"):t instanceof Array?d3.select(t[0][0]).append("div"):(this.selector=t,d3.select(t).append("div")))},value:!1}},{"../../util/d3selection.coffee":211}],268:[function(t,e,n){var i,r;i=t("../../core/methods/filter.coffee"),r=t("../../core/methods/process/data.coffee"),e.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},key:!1,mute:i(!1),padding:20,process:r,projection:{accepted:["albers","albersUsa","azimuthalEqualArea","azimuthalEquidistant","conicConformal","conicEqualArea","conicEquidistant","equirectangular","gnomonic","mercator","orthographic","stereographic","transverseMercator",Function],value:"mercator"},simplify:{accepted:[Boolean],value:!0},solo:i(!1),threshold:{accepted:[Number],value:.9},value:!1}},{"../../core/methods/filter.coffee":83,"../../core/methods/process/data.coffee":89}],269:[function(t,e,n){var i,r,o;i=t("../../core/fetch/value.coffee"),r=t("../../client/ie.js"),o=t("../../string/strip.js"),e.exports={accepted:[void 0,!0,Array,String],chainable:!1,data:[],process:function(t,e){var n,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F;if(void 0===e.returned)return[];if(t=t||e.cols.value,t instanceof Array?l=t:"string"==typeof t&&(l=[t]),c=[],j=[],e.title.value?(H=e.title.value,"function"==typeof H&&(H=H(e.self)),H=o(H),E=250,H=H.substr(0,E)):H="D3plus Visualization Data",t===!0)for(l=d3.keys(e.data.keys),c.push(l),N=e.data.value,g=0,y=N.length;g<y;g++){for(h=N[g],I=[],m=0,b=l.length;m<b;m++)a=l[m],F=h[a],"string"===e.data.keys[a]&&(F='"'+F+'"'),I.push(F);c.push(I)}else{for(l||(l=[e.id.value],e.time.value&&l.push(e.time.value),e.size.value&&l.push(e.size.value),e.text.value&&l.push(e.text.value)),v=0,w=l.length;v<w;v++)a=l[v],j.push(e.format.value(a));for(c.push(j),z=e.returned.nodes,T=0,x=z.length;T<x;T++)if(A=z[T],null!=A.values&&A.values instanceof Array)for(L=A.values,O=0,_=L.length;O<_;O++){for(F=L[O],I=[],D=0,k=l.length;D<k;D++)s=l[D],F=i(e,F,s),"string"==typeof F&&(F='"'+F+'"'),I.push(F);c.push(I)}else{for(I=[],R=0,C=l.length;R<C;R++)s=l[R],I.push(i(e,A,s));c.push(I)}}for(u="data:text/csv;charset=utf-8,",p=P=0,S=c.length;P<S;p=++P)a=c[p],d=a.join(","),u+=p<c.length?d+"\n":d;return r?(n=new Blob([u],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(n,H+".csv")):(f=encodeURI(u),M=document.createElement("a"),M.setAttribute("href",f),M.setAttribute("download",H+".csv"),M.click()),this.data=c,l},value:void 0}},{"../../client/ie.js":39,"../../core/fetch/value.coffee":69,"../../string/strip.js":178}],270:[function(t,e,n){var i;i=t("../../core/methods/process/data.coffee"),e.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},donut:{size:.35},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(t,e){return i(t,e,this)},solo:[],stroke:{width:1},value:!1}},{"../../core/methods/process/data.coffee":89}],271:[function(t,e,n){e.exports={accepted:[Function,Number],value:0}},{}],272:[function(t,e,n){e.exports={accepted:[!1,Function,Object],value:!1}},{}],273:[function(t,e,n){arguments[4][114][0].apply(n,arguments)},{dup:114}],274:[function(t,e,n){var i=t("../../core/console/print.coffee"),r=t("../../string/format.js");e.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(t,e){if(this.initialized===!1)return this.initialized=!0,t;if(void 0===t&&"function"==typeof this.value&&(t=this.value),e.container.value===!1){var n=e.format.locale.value.dev.setContainer;i.warning(n,"container")}else if(e.container.value.empty()){var n=e.format.locale.value.dev.noContainer,o=e.container.selector||"";i.warning(r(n,'"'+o+'"'),"container")}else e.dev.value&&i.time("total draw time"),e.container.value.call(e.self);if("function"==typeof t&&e.history.chain.length){var a={};e.history.chain.forEach(function(t){var e=t.method;delete t.method,a[e]=t}),t(a),e.history.chain=[]}return t},update:!0,value:void 0}},{"../../core/console/print.coffee":54,"../../string/format.js":176}],275:[function(t,e,n){var i=t("../../core/methods/process/data.coffee");e.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(t,e,n){var i=this;if(!i.value)return[];if(!e)var e="id";var r=i.restricted||i.value,o=[];if(!t)return r;var a=r.filter(function(r){var a=!1;return r[i.source][e]==t?(a=!0,n&&o.push(r[i.target])):r[i.target][e]==t&&(a=!0,n&&o.push(r[i.source])),a});return n?o:a},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],value:d3.scale.linear()},value:1},process:i,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.coffee":89}],276:[function(t,e,n){e.exports={accepted:[Boolean,String],value:!1}},{}],277:[function(t,e,n){e.exports={accepted:[!1,Array,Function,Number,String],deprecates:"highlight",process:function(t){return t===!1?[]:t instanceof Array?t:[t]},tooltip:{accepted:[Boolean],value:!0},value:[]}},{}],278:[function(t,e,n){var i,r,o,a;i=t("../../core/methods/font/align.coffee"),r=t("../../core/methods/font/decoration.coffee"),o=t("../../core/methods/font/family.coffee"),a=t("../../core/methods/font/transform.coffee"),e.exports={align:i(),color:"#444444",decoration:r(),family:o(),secondary:{align:i(),color:"#444444",decoration:r(),family:o(),size:12,spacing:0,transform:a(),weight:200},size:12,spacing:0,transform:a(),weight:200}},{"../../core/methods/font/align.coffee":84,"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],279:[function(t,e,n){var i,r,o;r=t("../../core/methods/font/family.coffee"),i=t("../../core/methods/font/decoration.coffee"),o=t("../../core/methods/font/transform.coffee"),e.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:i(),family:r(),size:11,transform:o(),weight:200},link:!1,padding:0,position:"bottom",value:!1}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],280:[function(t,e,n){var i,r,o,a;i=t("../../number/format.coffee"),r=t("../../core/locale/locale.coffee"),o=t("../../object/merge.coffee"),a=t("../../string/title.coffee"),e.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(r)},process:function(t){var e,n;return e="en_US",n=r[e],t!==e&&(n=o(n,r[t])),this.language=t,n},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(t,e){if("string"==typeof t)e.self.format({locale:t});else if("function"==typeof t)return t;return this.value},text:{accepted:[!1,Function],value:!1},value:function(t,e){var n,r,o;return e||(e={}),e.locale||(e.locale=this.locale.value),o=e.vars||{},o.time&&o.time.value&&e.key===o.time.value?(r=t.constructor===Date?t:new Date(t),o.data.time.format(r)):"number"==typeof t?(n=this.number.value||i)(t,e):"string"==typeof t?(n=this.text.value||a)(t,e):JSON.stringify(t)}}},{"../../core/locale/locale.coffee":81,"../../number/format.coffee":173,"../../object/merge.coffee":174,"../../string/title.coffee":179}],281:[function(t,e,n){e.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}},{}],282:[function(t,e,n){var i,r,o,a,s,l,u,c;i=t("../../../core/methods/font/align.coffee"),r=t("../../../core/methods/font/decoration.coffee"),o=t("../../../core/methods/font/family.coffee"),a=t("../../../core/methods/filter.coffee"),l=t("../../../core/methods/font/position.coffee"),u=t("../../../core/methods/rendering.coffee"),c=t("../../../core/methods/font/transform.coffee"),s={x:"bottom",x2:"top",y:"left",y2:"right"},e.exports=function(t){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:r(!1),family:o(""),size:!1,spacing:0,transform:c(!1),weight:!1},rendering:u(),value:!0},dataFilter:!0,deprecates:[t+"axis",t+"axis_val",t+"axis_var"],domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:u(),value:!0},label:{accepted:[Boolean,String],fetch:function(e){return this.value===!0?e.format.value(e[t].value,{key:t,vars:e}):this.value},font:{color:"#444",decoration:r(),family:o(),size:12,spacing:0,transform:c(),weight:200},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(t){return t instanceof Array&&(t=t.filter(function(t){return!isNaN(t)}),t=t.length?t.join(", "):"none"),t},value:"10, 10"},color:"#888",font:{align:i("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:r(),family:o(),padding:{accepted:[Number],value:10},position:l("middle"),size:12,transform:c(),weight:200},process:Array,rendering:u(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(t){return t instanceof Array&&(t=t.filter(function(t){return!isNaN(t)}),t=t.length?t.join(", "):"none"),t},value:"none"},rendering:u(),width:2,value:!0},mute:a(!0),orient:{accepted:["top","right","bottom","left"],value:s[t]},padding:{accepted:[Number],value:.1},persist:{position:{accepted:[Boolean],value:!1},size:{accepted:[Boolean],value:!0}},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],deprecates:["layout","unique_axis",t+"axis_scale"],process:function(e,n){var i,r,o,a;for(o=["log","discrete","share"],i=0,r=o.length;i<r;i++)a=o[i],a===e?n.axes[a]=t:n.axes[a]===t&&(n.axes[a]=!1);return"discrete"===e&&(n.axes.opposite=0===t.indexOf("x")?"y":"x"),e},value:"linear"},solo:a(!0),stacked:{accepted:[Boolean],process:function(e,n){return e||n.axes.stacked!==t?e&&(n.axes.stacked=t):n.axes.stacked=!1,e},value:!1},ticks:{accepted:[!1,Array],color:"#ccc",font:{color:"#666",decoration:r(),family:o(),size:10,spacing:0,transform:c(),weight:200},labels:{accepted:[Boolean,Array],value:!0},rendering:u(),size:10,width:1,value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}},{"../../../core/methods/filter.coffee":83,"../../../core/methods/font/align.coffee":84,"../../../core/methods/font/decoration.coffee":85,"../../../core/methods/font/family.coffee":86,"../../../core/methods/font/position.coffee":87,"../../../core/methods/font/transform.coffee":88,"../../../core/methods/rendering.coffee":94}],283:[function(t,e,n){e.exports={accepted:[Boolean],back:function(){if(this.states.length)return this.states.pop()()},chain:[],reset:function(){var t;for(t=[];this.states.length;)t.push(this.states.pop()());return t},states:[],value:!0}},{}],284:[function(t,e,n){var i;i=t("../../core/methods/process/icon.coffee"),e.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:i,rotate:0,value:"fa-angle-left"},deprecates:"icon_var",style:{accepted:[Object,String],deprecates:"icon_style",value:"default"},value:!1}},{"../../core/methods/process/icon.coffee":91}],285:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[Array,String],dataFilter:!0,deprecates:["id_var","nesting"],grouping:{accepted:[Boolean],value:!0},mute:i(!0),nesting:["id"],solo:i(!0),value:"id"}},{"../../core/methods/filter.coffee":83}],286:[function(t,e,n){var i,r,o;i=t("../../core/methods/font/decoration.coffee"),r=t("../../core/methods/font/family.coffee"),o=t("../../core/methods/font/transform.coffee"),e.exports={accepted:[Boolean],align:{accepted:["start","middle","end","left","center","right"],process:function(t){var e;return e=["left","center","right"].indexOf(t),e>=0&&(t=this.accepted[e]),t},value:"middle"},color:{accepted:[!1,String],value:!1},font:{decoration:i(),family:r(),size:11,transform:o(),weight:200},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],287:[function(t,e,n){var i;i=t("../../core/methods/font/family.coffee"),e.exports={accepted:[Boolean],align:"middle",data:{accepted:[Boolean],value:!0},filters:{accepted:[Boolean],value:!1},font:{align:"middle",color:"#444444",family:i(),size:[8,14],weight:200},gradient:{height:10},icons:{accepted:[Boolean],value:!0},labels:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text",Function],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},title:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":86}],288:[function(t,e,n){var i,r,o;i=t("../../core/methods/font/decoration.coffee"),r=t("../../core/methods/font/family.coffee"),o=t("../../core/methods/font/transform.coffee"),e.exports={font:{color:"#444444",decoration:i(),family:r(),transform:o(),weight:200},hover:{color:"#444444",decoration:i(),family:r(),transform:o(),weight:200}}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],289:[function(t,e,n){arguments[4][125][0].apply(n,arguments)},{"../../core/methods/process/margin.coffee":92,dup:125}],290:[function(t,e,n){var i,r,o;i=t("../../core/methods/font/decoration.coffee"),r=t("../../core/methods/font/family.coffee"),o=t("../../core/methods/font/transform.coffee"),e.exports={accepted:[Boolean,String],background:{accepted:[!1,String],value:!1},branding:{accepted:[Boolean],image:{dark:"http://d3plus.org/assets/img/icon-transparent-invert.png",light:"http://d3plus.org/assets/img/icon-transparent.png"},value:!1},font:{color:"#444",decoration:i(),family:r(),size:16,transform:o(),weight:200},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],291:[function(t,e,n){e.exports={accepted:[Boolean],click:{accepted:[Boolean,Function],value:!0},move:{accepted:[Boolean,Function],value:!0},out:{accepted:[Boolean,Function],value:!0},over:{accepted:[Boolean,Function],value:!0},value:!0}},{}],292:[function(t,e,n){var i;i=t("../../core/methods/process/data.coffee"),e.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:i,value:!1}},{"../../core/methods/process/data.coffee":89}],293:[function(t,e,n){e.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],value:!1},deprecates:["sort"],sort:{accepted:["asc","desc"],value:"desc"},value:!1}},{}],294:[function(t,e,n){e.exports={accepted:[Boolean],value:!1,timeout:400,process:function(t,e){var n,i;return!!t&&(n=null,i=function(){var t,n,i;if(n=e.container.value.node().parentNode.getBoundingClientRect(),i=n.width,t=n.height,e.self.width(i),e.self.height(t),e.width.changed||e.height.changed)return e.self.draw()},d3.select(window).on("resize."+e.container.id,function(t){return function(e){return clearTimeout(n),n=setTimeout(i,t.timeout)}}(this)),t)}}},{}],295:[function(t,e,n){var i;i=t("../../core/methods/rendering.coffee"),e.exports={accepted:function(t){var e;return e=t.types[t.type.value].shapes,!e||e instanceof Array||(e=[e]),e.length?e:["square"]},interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],deprecates:"stack_type",value:"linear"},rendering:i(),value:!1}},{"../../core/methods/rendering.coffee":94}],296:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,deprecates:["value","value_var"],mute:i(!0),scale:{accepted:[Function],deprecates:"size_scale",domain:{min:{accepted:[!1,Number],value:!1},max:{accepted:[!1,Number],value:!1}},range:{max:{accepted:[Function,Number],value:function(t){return Math.floor(d3.max([d3.min([t.width.viz,t.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3}},value:d3.scale.sqrt()},solo:i(!0),threshold:{accepted:[Boolean,Function,Number],value:!1},value:!1}},{"../../core/methods/filter.coffee":83}],297:[function(t,e,n){e.exports={value:!1}},{}],298:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[!1,Function,Object,String],deprecates:["else_var","else"],mute:i(!0),solo:i(!0),value:!1}},{"../../core/methods/filter.coffee":83}],299:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[Array,Boolean,Function,Object,String],deprecates:["name_array","text_var"],nesting:!0,mute:i(!0),solo:i(!0),value:!1}},{"../../core/methods/filter.coffee":83}],300:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,deprecates:["year","year_var"],fixed:{accepted:[Boolean],deprecates:["static_axis","static_axes"],value:!0},format:{accepted:[!1,Array,Function,String],value:!1},mute:i(!1),solo:i(!1),value:!1}},{"../../core/methods/filter.coffee":83}],301:[function(t,e,n){e.exports={accepted:[Boolean],align:"middle",hover:{accepted:["all-scroll","col-resize","crosshair","default","grab","grabbing","move","pointer"],value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[!1,Number],value:!1},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"",fallback:"►"},pause:{accepted:[!1,String],awesome:"",fallback:"❚❚"},timing:{accepted:[Number],value:1500},value:!0},value:!0}},{}],302:[function(t,e,n){e.exports={mouseevents:60,transitions:600,ui:200}},{}],303:[function(t,e,n){var i,r,o,a;i=t("../../core/methods/font/decoration.coffee"),r=t("../../core/methods/font/family.coffee"),a=t("../../core/methods/font/transform.coffee"),o=t("../../string/strip.js"),e.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:i(),family:r(),size:16,transform:a(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(t,e){var n;return 0===e.container.id.indexOf("default")&&t&&(n=o(t).toLowerCase(),e.self.container({id:n})),t},sub:{accepted:[!1,Function,String],deprecates:"sub_title",font:{align:"center",color:"#444444",decoration:i(),family:r(),size:12,transform:a(),weight:200},link:!1,padding:1,position:"top",value:!1},total:{accepted:[Boolean,Object],deprecates:"total_bar",font:{align:"center",color:"#444444",decoration:i(),family:r(),size:12,transform:a(),weight:200,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88,"../../string/strip.js":178}],304:[function(t,e,n){var i,r;i=t("../../core/methods/font/family.coffee"),r=t("../../core/methods/font/transform.coffee"),e.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#ffffff",children:{accepted:[Boolean,Number],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},deprecates:"tooltip_info",extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:i(),size:12,transform:r(),weight:200},fullscreen:{accepted:[Boolean],value:!1},html:{accepted:[!1,Function,Object,String],deprecates:"click_function",value:!1},iqr:{accepted:[Boolean],value:!0},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,stacked:{accepted:[Boolean],value:!1},sub:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],305:[function(t,e,n){var i;i=t("../../core/methods/filter.coffee"),e.exports={accepted:[!1,Function,Object,String],deprecates:["total_var"],mute:i(!0),solo:i(!0),value:!1}},{"../../core/methods/filter.coffee":83}],306:[function(t,e,n){e.exports={accepted:function(t){return d3.keys(t.types)},mode:{accepted:function(t){return t.types[t.type.value].modes||[!1]},value:!1},value:"tree_map"}},{}],307:[function(t,e,n){var i,r,o,a;o=t("../../core/methods/font/family.coffee"),i=t("../../core/methods/font/align.coffee"),r=t("../../core/methods/font/decoration.coffee"),a=t("../../core/methods/font/transform.coffee"),e.exports={accepted:[Array,Boolean],align:i("center"),border:1,color:{primary:{process:function(t,e){var n;return n=this.value,e.ui.color.secondary.value||(e.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),t},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:r(),family:o(),size:11,transform:a(),weight:200},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}},{"../../core/methods/font/align.coffee":84,"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],308:[function(t,e,n){e.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}},{}],309:[function(t,e,n){e.exports={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],deprecates:"scroll_zoom",value:!0},value:!0}},{}],310:[function(t,e,n){var i,r,o,a,s,l,u,c;r=t("../../util/closest.coffee"),o=t("../../core/fetch/value.coffee"),a=t("./helpers/graph/draw.coffee"),s=t("./helpers/graph/nest.coffee"),l=t("../../array/sort.coffee"),u=t("./helpers/graph/stack.coffee"),c=t("../../core/data/threshold.js"),i=function(t){var e,n,i,r,s,c,h,d,f,p,g;if(a(t,{buffer:t.axes.opposite,zero:!0}),r=t.x.domain.viz.concat(t.y.domain.viz),r.indexOf(void 0)>=0)return[];for(n=l(t.data.viz,null,null,null,t),i=t[t.axes.discrete],f=t[t.axes.opposite],s=0,h=n.length;s<h;s++)for(p=n[s],p.d3plus||(p.d3plus={}),g=p.values,c=0,d=g.length;c<d;c++)e=g[c],e.d3plus||(e.d3plus={}),e.d3plus.x=i.scale.viz(o(t,e,i.value)),e.d3plus.x+=t.axes.margin.viz.left,e.d3plus.y=f.scale.viz(o(t,e,f.value)),e.d3plus.y+=t.axes.margin.viz.top,e.d3plus.merged instanceof Array&&(p.d3plus.merged||(p.d3plus.merged=[]),p.d3plus.merged=p.d3plus.merged.concat(e.d3plus.merged)),e.d3plus.text&&!p.d3plus.text&&(p.d3plus.text=e.d3plus.text);return u(t,n)},i.filter=function(t,e){return s(t,c(t,e,t[t.axes.discrete].value))},i.requirements=["data","x","y"],i.setup=function(t){var e,n,i;return t.axes.discrete||(e=t.time.value===t.y.value?"y":"x",t.self[e]({scale:"discrete"})),t[t.axes.discrete].zerofill.value||t.self[t.axes.discrete]({zerofill:!0}),t[t.axes.opposite].stacked.value||"stacked"!==t.type.value||t.self[t.axes.opposite]({stacked:!0}),i=t[t.axes.opposite],n=t.size,!i.value&&n.value||n.changed&&n.previous===i.value?t.self[t.axes.opposite](n.value):!n.value&&i.value||i.changed&&i.previous===n.value?t.self.size(i.value):void 0},i.shapes=["area"],i.threshold=function(t){return 20/t.height.viz},i.tooltip="static",e.exports=i},{"../../array/sort.coffee":36,"../../core/data/threshold.js":63,"../../core/fetch/value.coffee":69,"../../util/closest.coffee":209,"./helpers/graph/draw.coffee":317,"./helpers/graph/nest.coffee":323,"./helpers/graph/stack.coffee":324}],311:[function(t,e,n){var i,r,o,a,s,l,u,c=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=t("../../util/buckets.coffee"),o=t("../../core/fetch/value.coffee"),a=t("./helpers/graph/draw.coffee"),s=t("./helpers/graph/nest.coffee"),l=t("./helpers/graph/stack.coffee"),
u=t("../../util/uniques.coffee"),i=function(t){var e,n,i,s,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F,B,W,Y,V,U,q;if(d=t.axes.discrete,m="x"===d?"height":"width",V="x"===d?"width":"height",L=t.axes.opposite,i="x"===d?"left":"top",D="x"===d?"top":"left",a(t,{buffer:!0,zero:L}),g=t.x.domain.viz.concat(t.y.domain.viz),g.indexOf(void 0)>=0)return[];if(O=t.data.viz,t.axes.stacked)for(b=0,_=O.length;b<_;b++)j=O[b],l(t,j.values);for(W=t.axes[V]/t[t.axes.discrete].ticks.values.length,H=t[t.axes.discrete].padding.value,H<1&&(H*=W),2*H>W&&(H=.1*W),T=W-2*H,t.axes.stacked||(t[d].persist.position.value?(F=t[d].value,p=c.call(t.id.nesting,F)>=0?d3.max(O,function(t){return t.values.length}):u(O,t.id.value,o,t).length,T/=p,R=W/2-T/2-H,U=d3.scale.ordinal(),1===p?U.domain([0]).range([0]):U.domain([0,p-1]).range([-R,R])):U=d3.scale.linear()),h=[],N=t[L],P=N.scale.viz.domain().slice(),0===L.indexOf("y")&&(P=P.reverse()),P[0]<=0&&P[1]>=0?q=0:P[0]<0?q(d3.max(P)):q=d3.min(P),t[d].persist.position.value&&!t.axes.stacked&&(y=u(d3.merge(O.map(function(t){return t.values})),t.id.value,o,t,t.id.value,!1),U.domain(y),1===y.length?U.range([0]):U.range(r(U.range(),y.length))),M=d3.max(O,function(t){return t.values.length}),w=0,k=O.length;w<k;w++)for(I=O[w],t.axes.stacked?(e=1,A=T):t[d].persist.position.value?(e=p,A=T):(e=I.values.length,t[d].persist.size.value?(A=T/M,R=W/2-(M-e)*(A/2)-A/2-H):(A=T/e,R=W/2-A/2-H),U.domain([0,e-1]),U.range([-R,R])),B=I.values,v=x=0,C=B.length;x<C;v=++x){if(s=B[v],E=t.axes.stacked?0:U(t[d].persist.position.value?o(t,s,t.id.value):v%e),t.axes.stacked)Y=s.d3plus[L],n=s.d3plus[L+"0"];else{if(z=o(t,s,N.value),null===z&&(N=t[L+"2"],z=o(t,s,N.value)),0===z)continue;"log"===N.scale.value&&(q=z<0?-1:1),Y=N.scale.viz(z),n=N.scale.viz(q)}f=o(t,s,t[d].value),s.d3plus[d]=t[d].scale.viz(f),s.d3plus[d]+=t.axes.margin.viz[i]+E,S=n-Y,s.d3plus[L]=n-S/2,t.axes.stacked||(s.d3plus[L]+=t.axes.margin.viz[D]),delete s.d3plus.r,s.d3plus[V]=A,s.d3plus[m]=Math.abs(S),s.d3plus.init={},s.d3plus.init[L]=N.scale.viz(q),s.d3plus.init[L]-=s.d3plus[L],s.d3plus.init[L]+=t.axes.margin.viz[D],s.d3plus.init[V]=s.d3plus[V],t.text.value?delete s.d3plus.label:s.d3plus.label=!1,h.push(s)}return h},i.filter=function(t,e){return s(t,e,t[t.axes.discrete].value)},i.requirements=["data","x","y"],i.setup=function(t){var e,n,i;return t.axes.discrete||(e=t.time.value===t.y.value?"y":"x",t.self[e]({scale:"discrete"})),i=t[t.axes.opposite],n=t.size,!i.value&&n.value||n.changed&&n.previous===i.value?t.self[t.axes.opposite](n.value):!n.value&&i.value||i.changed&&i.previous===n.value?t.self.size(i.value):void 0},i.shapes=["square"],e.exports=i},{"../../core/fetch/value.coffee":69,"../../util/buckets.coffee":207,"../../util/uniques.coffee":213,"./helpers/graph/draw.coffee":317,"./helpers/graph/nest.coffee":323,"./helpers/graph/stack.coffee":324}],312:[function(t,e,n){var i,r,o,a,s,l;r=t("../../core/fetch/value.coffee"),o=t("./helpers/graph/draw.coffee"),a=t("../../string/format.js"),s=t("../../string/strip.js"),l=t("../../util/uniques.coffee"),i=function(t){var e,n,i,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E;return o(t,{buffer:!0}),u=t.x.domain.viz.concat(t.y.domain.viz),u.indexOf(void 0)>=0?[]:(i=t.axes.discrete,w=t.axes.opposite,n="x"===i?t.axes.margin.viz.left:t.axes.margin.viz.top,b="x"===w?t.axes.margin.viz.left:t.axes.margin.viz.top,c="x"===i?"height":"width",E="x"===i?"width":"height",M=t.axes[E]/t[i].ticks.values.length,S=t.size.value,S="number"==typeof S?S:100,M=d3.min([M-2*t.labels.padding,S]),v=t.type.mode.value,v instanceof Array||(v=[v,v]),g=function(e){var n,i,o;i={};for(n in t.data.keys)o=l(e,n,r,t),i[n]=1===o.length?o[0]:o;return i},y=!1,f=[],h=t.format.value(t.format.locale.value.ui.iqr),d=t.format.value(t.format.locale.value.ui.max),m=t.format.value(t.format.locale.value.ui.min),x=t.format.value(t.format.locale.value.ui.percentile),e=t.format.value(t.format.locale.value.ui.tukey_bottom),T=t.format.value(t.format.locale.value.ui.tukey_top),_=t.format.value(t.format.locale.value.ui.quartile_first),k=t.format.value(t.format.locale.value.ui.quartile_third),p=t.format.value(t.format.locale.value.ui.median),C=[],d3.nest().key(function(e){return r(t,e,t[i].value)}).rollup(function(o){var u,S,O,A,D,R,P,N,z,L,I,H,j,F,B,W,Y,V,U,q,X,G,$,K,Z,Q,J,tt,et,nt,it,rt;for(G=t[w].scale.viz,nt=o.map(function(e){return r(t,e,t[w].value)}),nt.sort(function(t,e){return t-e}),tt=l(nt),N=d3.quantile(nt,.25),W=d3.quantile(nt,.5),$=d3.quantile(nt,.75),K={},"tukey"===v[1]?(L=N-$,Z=$-1.5*L,Q=T):"extent"===v[1]?(Z=d3.max(nt),Q=d):"number"==typeof v[1]&&(Z=d3.quantile(nt,(100-v[1])/100),Q=a(x,v[1])),Z=d3.min([d3.max(nt),Z]),t.tooltip.extent.value&&(K[Q]={key:t[w].value,value:Z}),t.tooltip.iqr.value&&(K[k]={key:t[w].value,value:$},K[p]={key:t[w].value,value:W},K[_]={key:t[w].value,value:N}),"tukey"===v[0]?(L=N-$,u=N+1.5*L,S=e):"extent"===v[0]?(u=d3.min(nt),S=m):"number"==typeof v[0]&&(u=d3.quantile(nt,v[0]/100),Q=a(x,v[0])),u=d3.max([d3.min(nt),u]),t.tooltip.extent.value&&(K[S]={key:t[w].value,value:u}),A=[],O=[],J=[],X=[],z=0,F=o.length;z<F;z++)D=o[z],et=r(t,D,t[w].value),et>=N&&et<=$?A.push(D):et>=u&&et<N?O.push(D):et<=Z&&et>$?J.push(D):X.push(D);for(H=r(t,o[0],t[i].value),it=t[i].scale.viz(H),it+=n,j=t.format.value(H,{key:t[i].value,vars:t}),H.constructor===Date&&(H=H.getTime()),H=s(H),A=g(A),A.d3plus={color:"white",id:"box_"+H,init:{},label:!1,shape:"square",stroke:"#444",text:a(h,j)},A.d3plus[E]=M,A.d3plus.init[E]=M,A.d3plus[c]=Math.abs(G(N)-G($)),A.d3plus[i]=it,rt=d3.min([G(N),G($)])+A.d3plus[c]/2,rt+=b,A.d3plus[w]=rt,A.d3plus.tooltip=K,C.push(A),V={d3plus:{id:"median_line_"+H,position:"height"===c?"top":"right",shape:"whisker","static":!0}},q=t.format.value(W,{key:t[w].value,vars:t}),j={background:"#fff",names:[q],padding:0,resize:!1,x:0,y:0},R=Math.abs(G(W)-G(N)),P=Math.abs(G(W)-G($)),U=2*d3.min([R,P]),Y=2*t.data.stroke.width+2*t.labels.padding,j["width"===E?"w":"h"]=M-Y,j["width"===c?"w":"h"]=U-Y,V.d3plus.label=j,V.d3plus[E]=M,V.d3plus[i]=it,V.d3plus[w]=G(W)+b,C.push(V),O=g(O),O.d3plus={id:"bottom_whisker_line_"+H,offset:A.d3plus[c]/2,position:"height"===c?"bottom":"left",shape:"whisker","static":!0},"x"===w&&(O.d3plus.offset*=-1),O.d3plus[c]=Math.abs(G(u)-G(N)),O.d3plus[E]=M,O.d3plus[i]=it,O.d3plus[w]=rt,C.push(O),J=g(J),J.d3plus={id:"top_whisker_line_"+H,offset:A.d3plus[c]/2,position:"height"===c?"top":"right",shape:"whisker","static":!0},"y"===w&&(J.d3plus.offset*=-1),J.d3plus[c]=Math.abs(G(Z)-G($)),J.d3plus[E]=M,J.d3plus[i]=it,J.d3plus[w]=rt,C.push(J),I=0,B=X.length;I<B;I++)D=X[I],D.d3plus[i]=it,D.d3plus[w]=G(r(t,D,t.y.value)),D.d3plus[w]+=b,D.d3plus.r=4,D.d3plus.shape=t.shape.value;return y=!X.length&&Z-u===0,f.push(W),C=C.concat(X),o}).entries(t.data.viz),y&&1===l(f).length?[]:C)},i.modes=["tukey","extent",Array,Number],i.requirements=["data","x","y"],i.shapes=["circle","check","cross","diamond","square","triangle","triangle_up","triangle_down"],i.setup=function(t){var e;if(!t.axes.discrete)return e=t.time.value===t.y.value?"y":"x",t.self[e]({scale:"discrete"})},e.exports=i},{"../../core/fetch/value.coffee":69,"../../string/format.js":176,"../../string/strip.js":178,"../../util/uniques.coffee":213,"./helpers/graph/draw.coffee":317}],313:[function(t,e,n){var i,r,o,a,s,l,u;i=t("../../array/sort.coffee"),s=t("../../core/fetch/value.coffee"),o=t("../../core/fetch/color.coffee"),a=t("../../core/fetch/text.js"),u=t("../../color/legible.coffee"),l=t("../../core/data/group.coffee"),r=function(t){var e,n,r,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F,B,W,Y;if(v=l(t,t.data.viz),v=i(v,null,null,null,t),d=v.length,d<4?(r=d,A=1):(D=t.width.viz/t.height.viz,r=Math.ceil(Math.sqrt(d*D)),A=Math.ceil(Math.sqrt(d/D))),d>0)for(;(A-1)*r>=d;)A--;for(n=t.width.viz/r,e=t.height.viz/A,t.size.value?(H=t.size.scale.domain.min.value,I=t.size.scale.domain.max.value,g="number"==typeof H?H:d3.min(t.data.viz,function(e){return s(t,e,t.size.value,t.id.value,"min")}),p="number"==typeof I?I:d3.max(t.data.viz,function(e){return s(t,e,t.size.value,t.id.value)}),f=[g,p]):f=[0,0],E=5,P=d3.min([n,e])/2-2*E,_=t.labels.value&&!t.small&&P>=40?d3.max([20,d3.min([.25*P,50])]):0,P-=_,N=d3.min([P,t.size.scale.range.min.value]),R=t.size.scale.value.domain(f).rangeRound([N,P]),T=d3.layout.pack().children(function(t){return t.values}).padding(E).radius(function(t){return R(t)}).size([n-2*E,e-2*E-_]).value(function(t){return t.value}),h=[],O=0,y=b=0,k=v.length;b<k;y=++b){for(c=v[y],L=T.nodes(c),F=n*y%t.width.viz,Y=e*O,w=0,C=L.length;w<C;w++)z=L[w],z.children?(M={d3plus:{}},M[t.id.value]=z.key):M=z.d3plus,M.d3plus.depth=t.id.grouping.value?z.depth:t.depth.value,M.d3plus.x=z.x,M.d3plus.xOffset=F,M.d3plus.y=z.y,M.d3plus.yOffset=Y+_,M.d3plus.r=z.r,h.push(M);(y+1)%r===0&&O++}for(m=P/d3.max(h,function(t){return t.d3plus.r}),j=T.size()[0]/2,W=T.size()[1]/2,x=0,S=h.length;x<S;x++)c=h[x],c.d3plus.x=(c.d3plus.x-j)*m+j+c.d3plus.xOffset,c.d3plus.y=(c.d3plus.y-W)*m+W+c.d3plus.yOffset,c.d3plus.r=c.d3plus.r*m,delete c.d3plus.xOffset,delete c.d3plus.yOffset,c.d3plus["static"]=c.d3plus.depth<t.depth.value&&t.id.grouping.value,!_||0!==c.d3plus.depth&&t.id.grouping.value!==!1?delete c.d3plus.label:(c.d3plus.text=a(t,c[t.id.value],c.d3plus.depth),B=_>3*t.labels.padding?t.labels.padding:0,c.d3plus.label={x:0,y:-(P+B+_/2),w:2*P,h:_-B,padding:0,resize:!0,color:u(o(t,c,c.d3plus.depth)),force:!0});return h.sort(function(t,e){return t.d3plus.depth-e.d3plus.depth})},r.fill=!0,r.requirements=["data"],r.scale=1.05,r.shapes=["circle","donut"],e.exports=r},{"../../array/sort.coffee":36,"../../color/legible.coffee":46,"../../core/data/group.coffee":59,"../../core/fetch/color.coffee":65,"../../core/fetch/text.js":68,"../../core/fetch/value.coffee":69}],314:[function(t,e,n){var i,r;r=t("../../../core/console/print.coffee"),i=function(t){var e,n;n={circle:"scatter",donut:"scatter",line:"line",square:"scatter",area:"stacked"},e=n[t.shape.value],r.warning('The "chart" visualization type has been deprecated and will be removed in version 2.0. Please use the "'+e+'" visualization type.'),t.self.type(e).draw()},i.shapes=["circle","donut","line","square","area"],e.exports=i},{"../../../core/console/print.coffee":54}],315:[function(t,e,n){var i;i=function(t){var e,n,i,r,o,a;return e=t.coords.value,i=t.coords.key||d3.keys(e.objects)[0],a=topojson.feature(e,e.objects[i]),n=a.features,o=t.coords.solo.value,r=t.coords.mute.value,n=n.filter(function(e){return e[t.id.value]=e.id,o.length?o.indexOf(e.id)>=0:!r.length||r.indexOf(e.id)<0})},i.libs=["topojson"],i.nesting=!1,i.requirements=["coords"],i.scale=1,i.shapes=["coordinates"],i.zoom=!0,e.exports=i},{}],316:[function(t,e,n){var i,r,o;i=t("../../../../core/fetch/color.coffee"),r=t("../../../../color/legible.coffee"),o=t("../../../../core/console/print.coffee"),e.exports=function(t){var e,n,a,s,l,u,c,h,d,f,p,g;for(e=t.axes,c=t.axes.margin.viz,s=e.stacked||!e.ticks.value?[]:t.data.viz,g=2*s.length>t.data.large?0:t.draw.timing,d=function(n,o){return 0===o.indexOf("y")?n.attr("x1",-2).attr("x2",-8).attr("y1",function(t){return t.d3plus.y-c.top}).attr("y2",function(t){return t.d3plus.y-c.top}):n.attr("x1",function(t){return t.d3plus.x-c.left}).attr("x2",function(t){return t.d3plus.x-c.left}).attr("y1",e.height+2).attr("y2",e.height+8),n.style("stroke",function(e){return r(i(t,e))}).style("stroke-width",t.data.stroke.width).attr("shape-rendering",t.shape.rendering.value)},t.dev.value&&o.time("creating axis tick groups"),p=t.group.select("g#d3plus_graph_plane").selectAll("g.d3plus_data_tick").data(s,function(n){var i;return i=e.discrete?"_"+n.d3plus[e.discrete]:"","tick_"+n[t.id.value]+"_"+n.d3plus.depth+i}),p.enter().append("g").attr("class","d3plus_data_tick").attr("opacity",0),t.dev.value&&o.timeEnd("creating axis tick groups"),h=["x","y"],l=0,u=h.length;l<u;l++)n=h[l],t.dev.value&&g&&o.time("creating "+n+" ticks"),a=g&&n!==e.discrete?s:[],f=p.selectAll("line.d3plus_data_"+n).data(a,function(e){return"tick_"+e[t.id.value]+"_"+e.d3plus.depth}),t.dev.value&&g&&o.timeEnd("creating "+n+" ticks"),t.dev.value&&g&&o.time("styling "+n+" ticks"),g>0?f.transition().duration(g).call(d,n):f.call(d,n),f.enter().append("line").attr("class","d3plus_data_"+n).call(d,n),t.dev.value&&g&&o.timeEnd("styling "+n+" ticks");g>0?(p.transition().duration(g).attr("opacity",1),p.exit().transition().duration(g).attr("opacity",0).remove()):(p.attr("opacity",1),p.exit().remove())}},{"../../../../color/legible.coffee":46,"../../../../core/console/print.coffee":54,"../../../../core/fetch/color.coffee":65}],317:[function(t,e,n){var i,r,o,a;i=t("./includes/axes.coffee"),r=t("./includes/svg.coffee"),o=t("./includes/mouse.coffee"),a=t("./includes/plot.coffee"),e.exports=function(t,e){void 0===e&&(e={}),i(t,e),a(t,e),r(t,e),t.mouse.viz=e.mouse===!0&&o}},{"./includes/axes.coffee":318,"./includes/mouse.coffee":320,"./includes/plot.coffee":321,"./includes/svg.coffee":322}],318:[function(t,e,n){var i,r,o,a,s,l,u,c,h,d,f,p;i=t("../../../../../array/sort.coffee"),a=t("./buffer.coffee"),o=t("../../../../../util/buckets.coffee"),l=t("../../../../../core/fetch/data.js"),u=t("../../../../../core/fetch/value.coffee"),d=t("../../../../../core/console/print.coffee"),p=t("../../../../../util/uniques.coffee"),e.exports=function(t,e){var n,i,o,l,g,m,v,y,b,w,x,_;for(o=s(t),!o&&t.axes.dataset||(t.axes.dataset=c(t)),t.axes.scale=!(!e.buffer||e.buffer===!0)&&f(t,e.buffer),n=t.width.viz>t.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"],g=0,v=n.length;g<v;g++)i=n[g],b=0===i.indexOf("x")?"y":"x",x=t.order.changed||t.order.sort.changed||t.order.value===!0&&t[b].changed,t[i].value&&(!t[i].ticks.values||o||x||t[i].value===t.time.value&&t.time.fixed.value)&&(t.dev.value&&d.time("calculating "+i+" axis"),t[i].reset=!0,t[i].ticks.values=!1,i===t.axes.discrete&&t[i].value!==t.time.value&&(t[i].ticks.values=p(t.axes.dataset,t[i].value,u,t)),_=e.zero===!0||0===i.indexOf(e.zero),w=r(t,i,_),0===i.indexOf("y")&&(w=w.reverse()),t[i].scale.viz=h(t,i,w),t[i].domain.viz=w,t.dev.value&&d.timeEnd("calculating "+i+" axis"));if(t.axes.mirror.value&&(l=d3.extent(t.y.domain.viz.concat(t.x.domain.viz)),t.x.domain.viz=l,t.x.scale.viz.domain(l),l=l.slice().reverse(),t.y.domain.viz=l,t.y.scale.viz.domain(l)),e.buffer)for(m=0,y=n.length;m<y;m++)i=n[m],i!==t.axes.discrete&&a(t,i,e.buffer)},s=function(t){var e,n,i,r,o,a,s,l,u,c,h,d,f;if(n=!t.time.fixed.value&&(t.time.solo.changed||t.time.mute.changed),n||(n=t.id.solo.changed||t.id.mute.changed),n)return n;for(i=["data","time","id","depth","type","width","height","x","y","x2","y2"],r=0,l=i.length;r<l;r++)if(a=i[r],t[a].changed){n=!0;break}if(n)return n;for(f=["mute","range","scale","solo","stacked","zerofill"],h=["x","y","x2","y2"],o=0,u=h.length;o<u;o++)for(e=h[o],s=0,c=f.length;s<c;s++)if(d=f[s],t[e][d].changed){n=!0;break}return n},c=function(t){var e,n;return t.time.fixed.value?(n=d3.range(0,t.id.nesting.length),d3.merge(d3.merge([function(){var i,r,o;for(o=[],i=0,r=n.length;i<r;i++)e=n[i],o.push(l(t,"all",e));return o}()]))):t.data.viz},r=function(t,e,n,r){var o,a,s,l,c,h,d,f,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z;if(S=0===e.indexOf("x")?"y":"x",t[e].range.value&&2===t[e].range.value.length)return t[e].range.value.slice();if("share"===t[e].scale.value)return t[e].ticks.values=d3.range(0,1.1,.1),[0,1];if(t[e].stacked.value){for(R=[],M=t.axes.dataset,g=0,b=M.length;g<b;g++)d=M[g],d.values?R=R.concat(d.values):R.push(d);return c=d3.nest().key(function(e){return u(t,e,t[S].value)}).rollup(function(n){var i,r;return r=d3.sum(n,function(n){var i;return i=u(t,n,t[e].value),i>0?i:0}),i=d3.sum(n,function(n){var i;return i=u(t,n,t[e].value),i<0?i:0}),[i,r]}).entries(R),z=d3.merge(c.map(function(t){return t.values})),d3.extent(z)}if(t[e].value===t.time.value)return t.time.solo.value.length?d3.extent(t.time.solo.value).map(function(t){return t.constructor!==Date?(t+="",4===t.length&&parseInt(t)+""===t&&(t+="/01/01"),new Date(t)):t}):d3.extent(t.data.time.ticks);for(z=[],T=t.axes.dataset,m=0,w=T.length;m<w;m++)d=T[m],N=u(t,d,t[e].value),N instanceof Array?z=z.concat(N):z.push(N);if(z=z.filter(function(t){return null!==t}),e===t.axes.discrete){if(D=t.order.value===!0?t[S].value:t.order.value){for(A=t.order.sort.value,o=t.order.agg.value||t.aggs.value[D]||"max",a=typeof o,h=z.reduce(function(t,e){return t[e]=[],t},{}),E=t.axes.dataset,y=0,x=E.length;y<x;y++)if(d=E[y],d.values)for(O=d.values,k=0,_=O.length;k<_;k++)P=O[k],f=u(t,P,t[e].value),h[f].push(u(t,P,D));else f=u(t,d,t[e].value),h[f].push(u(t,d,D));for(v in h)P=h[v],"string"===a?h[v]=d3[o](P):"function"===a&&(h[v]=o(P,D));return h=i(d3.entries(h),"value",A),h=h.reduce(function(t,e){return t.push(e.key),t},[])}return z[0].constructor===String?p(z).sort(function(t,e){return""+t.localeCompare(""+e)}):p(z).sort(function(t,e){return t-e})}return z.sort(function(t,e){return t-e}),"log"===t[e].scale.value&&(0===z[0]&&(z[0]=1),0===z[z.length-1]&&(z[z.length-1]=-1)),n&&(l=z.every(function(t){return t>0}),s=z.every(function(t){return t<0}),(l||s)&&(C=l?1:-1,z.push("log"===t[e].scale.value?C:0))),d3.extent(z)},h=function(t,e,n){var i,r,a,s,l;return r=0===e.indexOf("x")?t.width.viz:t.height.viz,s=t[e].scale.value,["discrete","share"].indexOf(s)>=0&&(s="linear"),l=10,"string"==typeof n[0]?(s="ordinal",i=o([0,r],n.length)):(i=[0,r],"linear"===t[e].scale.value&&(l=Math.floor(r/(4*t[e].ticks.font.size)))),t[e].scale.ticks=l,a=d3.scale[s]().domain(n).range(i),"clamp"in a&&a.clamp(!0),a},f=function(t,e){var n,i,r;return e===!0&&(e="size"),e in t&&(e=t[e].value),r=t.size.scale.range.min.value,"function"==typeof r&&(r=r(t)),i=t.size.scale.range.max.value,"function"==typeof i&&(i=i(t)),e===!1?t.size.scale.value.domain([0,1]).rangeRound([i,i]):"number"==typeof e?t.size.scale.value.domain([0,1]).rangeRound([e,e]):e?(t.dev.value&&d.time("calculating buffer scale"),n=d3.extent(t.axes.dataset,function(n){var i;return i=u(t,n,e),i?i:0}),n[0]===n[1]&&(r=i),t.dev.value&&d.timeEnd("calculating buffer scale"),t.size.scale.value.domain(n).rangeRound([r,i])):void 0}},{"../../../../../array/sort.coffee":36,"../../../../../core/console/print.coffee":54,"../../../../../core/fetch/data.js":66,"../../../../../core/fetch/value.coffee":69,"../../../../../util/buckets.coffee":207,"../../../../../util/uniques.coffee":213,"./buffer.coffee":319}],319:[function(t,e,n){var i,r;i=t("../../../../../util/buckets.coffee"),r=t("../../../../../util/closest.coffee"),e.exports=function(t,e,n){var o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L;if("share"!==t[e].scale.value&&!t[e].range.value&&t[e].reset){if(A=t[e].scale.viz.copy(),"clamp"in A&&A.clamp(!1),e===t.axes.discrete){if(p=A.domain(),"string"==typeof p[0]){for(y=p.length;y>=0;)p.splice(y,0,"d3plus_buffer_"+y),y--;return M=A.range(),M=i(d3.extent(M),p.length),t[e].scale.viz.domain(p).range(M)}if(0===e.indexOf("y")&&(p=p.slice().reverse()),1===t[e].ticks.values.length)p=[p[0],p[0]],t[e].value===t.time.value&&1!==t.data.time.ticks.length?(u=r(t.data.time.ticks,p[0]),D=t.data.time.ticks.indexOf(u),D>0?p[0]=t.data.time.ticks[D-1]:(d=t.data.time.ticks[D+1]-u,p[0]=new Date(u.getTime()-d)),D<t.data.time.ticks.length-1?p[1]=t.data.time.ticks[D+1]:(d=u-t.data.time.ticks[D-1],p[1]=new Date(u.getTime()+d))):(p[0]-=1,p[1]+=1);else if(t.axes.scale)f=Math.abs(p[1]-p[0]),a=f/(t[e].ticks.values.length-1),a/=2,T=A.range()[1],k=1.5*t.axes.scale.range()[1],v=A.invert(-k),m=A.invert(T+k),p[0]-a<v?(p[0]=p[0]-a,p[p.length-1]=p[p.length-1]+a):(p=[v,m],0===e.indexOf("y")&&(p=p.reverse()),g=A.domain(),g=g[1]-g[0],g||(p[0]-=1,p[1]+=1));else if(t[e].value===t.time.value)f=Math.abs(p[1]-p[0]),a=f/(t[e].ticks.values.length-1),a/=2,p[0]=p[0]-a,p[1]=p[1]+a;else{for(f=Math.abs(p[1]-p[0]),o=f/2,y=p.length,S=p.slice();y>=0;)h=y?S[y-1]+o:S[y]-o,p.splice(y,0,h),y--;M=A.range(),M=i(d3.extent(M),p.length),t[e].scale.viz.domain(p).range(M)}return 0===e.indexOf("y")&&(p=p.reverse()),t[e].scale.viz.domain(p)}if("x"===n&&0===e.indexOf("x")||"y"===n&&0===e.indexOf("y")||n===!0)return p=A.domain(),l=p[0]>=0&&p[1]>=0,s=p[0]<=0&&p[1]<=0,"log"===t[e].scale.value?(L=l?1:-1,l&&0===e.indexOf("y")&&(p=p.slice().reverse()),x=Math.pow(10,parseInt(Math.abs(p[0])).toString().length-1)*L,w=p[0]%x,b=w,w&&b/x<=.1&&(b+=x*L),_=0===w?x:b,p[0]-=_,0===p[0]&&(p[0]=L),N=Math.pow(10,parseInt(Math.abs(p[1])).toString().length-1)*L,P=p[1]%N,R=Math.abs(N-P),P&&R/N<=.1&&(R+=N*L),z=0===P?N:R,p[1]+=z,0===p[1]&&(p[1]=L),l&&0===e.indexOf("y")&&(p=p.reverse())):(L=0,0===e.indexOf("y")&&(p=p.slice().reverse()),O=p.filter(function(t){return t.constructor===String}),a=.05*Math.abs(p[1]-p[0])||1,O.length||(p[0]=p[0]-a,p[1]=p[1]+a,(l&&p[0]<L||s&&p[0]>L)&&(p[0]=L),(l&&p[1]<L||s&&p[1]>L)&&(p[1]=L)),0===e.indexOf("y")&&(p=p.reverse())),t[e].scale.viz.domain(p);if(t.axes.scale)return c=!1,t.axes.mirror.value&&(C=0===e.indexOf("y")?"x":"y",c=t[C].scale.viz,E=t.width.viz>t.height.viz?"x":"y"),e===E&&c?p=c.domain().slice().reverse():(T=A.range()[1],k=t.axes.scale.range()[1],v=A.invert(1.5*-k),m=A.invert(T+1.5*k),p=[v,m],0===e.indexOf("y")&&(p=p.reverse()),g=A.domain(),g=g[1]-g[0],g||(p[0]-=1,p[1]+=1),0===e.indexOf("y")&&(p=p.reverse())),t[e].scale.viz.domain(p)}}},{"../../../../../util/buckets.coffee":207,"../../../../../util/closest.coffee":209}],320:[function(t,e,n){var i,r,o,a,s,l;i=t("../../../../../util/copy.coffee"),r=t("../../../../../client/pointer.coffee"),o=t("../../../../../core/fetch/color.coffee"),a=t("../../../../../core/fetch/value.coffee"),s=t("../../../../../color/legible.coffee"),l=t("../../../../../color/text.coffee"),e.exports=function(t,e){var n,i,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S;return n=d3.event.type===r.click&&(e.tooltip.value["long"]||e.tooltip.html.value),u=[r.over,r.move].indexOf(d3.event.type)>=0,C=t.d3plus.x,S=t.d3plus.y,v=t.d3plus.r||0,w=e.types[e.type.value].scale||1,v*=w,c=e.axes,m=e.axes.margin.viz,k=e.draw.timing?e.timing.mouseevents:0,!n&&u?(i=s(o(e,t)),h=["x","y","x2","y2"].filter(function(n){var i;return i=a(e,t,e[n].value),i&&!(i instanceof Array)&&n!==e.axes.stacked&&e[n].mouse.value})):h=[],d=function(t){return t.attr("x1",function(t){return 0===t.indexOf("x")?C:C-v}).attr("y1",function(t){return 0===t.indexOf("y")?S:S+v}).attr("x2",function(t){return 0===t.indexOf("x")?C:C-v}).attr("y2",function(t){return 0===t.indexOf("y")?S:S+v}).attr("opacity",0)},f=function(t){return t.style("stroke",function(t){return"area"===e.shape.value?"white":i}).attr("stroke-dasharray",function(t){return e[t].mouse.dasharray.value}).attr("shape-rendering",function(t){return e[t].mouse.rendering.value}).style("stroke-width",function(t){return e[t].mouse.width})},p=function(n){return n.attr("x1",function(t){return 0===t.indexOf("x")?C:C-v}).attr("y1",function(t){return 0===t.indexOf("y")?S:S+v}).attr("x2",function(n){return 0===n.indexOf("x")?C:t.d3plus.x0?t.d3plus.x0:"y"===n?m.left-e[n].ticks.size:m.left+c.width+e[n].ticks.size}).attr("y2",function(n){return 0===n.indexOf("y")?S:t.d3plus.y0?t.d3plus.y0:"x"===n?c.height+m.top+e[n].ticks.size:m.top-e[n].ticks.size}).style("opacity",1)},g=e.g.labels.selectAll("line.d3plus_mouse_axis_label").data(h),k?(g.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(d).call(f),g.transition().duration(k).call(p).call(f),g.exit().transition().duration(k).call(d).remove()):(g.call(p).call(f),g.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(d).call(f),g.exit().remove()),x=function(n){return n.attr("font-size",function(t){return e[t].ticks.font.size+"px"}).attr("font-family",function(t){return e[t].ticks.font.family.value}).attr("font-weight",function(t){return e[t].ticks.font.weight}).attr("x",function(t){return 0===t.indexOf("x")?C:"y"===t?m.left-5-e[t].ticks.size:m.left+c.width+5+e[t].ticks.size}).attr("y",function(n){return 0===n.indexOf("y")?S:t.d3plus.y0?t.d3plus.y+(t.d3plus.y0-t.d3plus.y)/2+m.top-6:"x"===n?c.height+m.top+5+e[n].ticks.size:m.top-5-e[n].ticks.size-1.35*e[n].ticks.font.size}).attr("fill","area"===e.shape.value?"white":l(i))},_=e.g.labels.selectAll("text.d3plus_mouse_axis_label").data(h),_.enter().append("text").attr("class","d3plus_mouse_axis_label").attr("id",function(t){return t+"_d3plusmouseaxislabel"}).attr("dy",function(t){return 0===t.indexOf("y")?.35*e[t].ticks.font.size:e[t].ticks.font.size}).style("text-anchor",function(t){return"y"===t?"end":"y2"===t?"start":"middle"}).attr("opacity",0).attr("pointer-events","none").call(x),_.text(function(n){var i,r;return i=e.axes.stacked||n,r=a(e,t,e[i].value),e.format.value(r,{key:e[i].value,vars:e,labels:e[i].affixes.value})}),k?(_.transition().duration(k).delay(k).attr("opacity",1).call(x),_.exit().transition().duration(k).attr("opacity",0).remove()):(_.attr("opacity",1).call(x),_.exit().remove()),y=function(n){var r;return r=function(t){var e;return e=d3.select("text#"+t+"_d3plusmouseaxislabel"),e.size()?e.node().getBBox():{width:0,height:0}},n.attr("x",function(t){var n;return n=r(t).width,0===t.indexOf("x")?C-n/2-5:"y"===t?m.left-e[t].ticks.size-n-10:m.left+c.width+e[t].ticks.size}).attr("y",function(n){var i;return i=r(n).height,0===n.indexOf("y")?S-(i/2+5):t.d3plus.y0?t.d3plus.y+(t.d3plus.y0-t.d3plus.y)/2+m.top-(i/2+5):"x"===n?c.height+m.top+e[n].ticks.size:m.top-e[n].ticks.size-i-10}).attr("width",function(t){return r(t).width+10}).attr("height",function(t){return r(t).height+10}).style("stroke","area"===e.shape.value?"transparent":i).attr("fill",i).attr("shape-rendering",function(t){return e[t].mouse.rendering.value}).style("stroke-width",function(t){return e[t].mouse.width})},b=e.g.labels.selectAll("rect.d3plus_mouse_axis_label").data(h),k?(b.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").attr("opacity",0).call(y),b.transition().duration(k).delay(k).attr("opacity",1).call(y),b.exit().transition().duration(k).attr("opacity",0).remove()):(b.attr("opacity",1).call(y),b.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(y),b.exit().remove())}},{"../../../../../client/pointer.coffee":40,"../../../../../color/legible.coffee":46,"../../../../../color/text.coffee":52,"../../../../../core/fetch/color.coffee":65,"../../../../../core/fetch/value.coffee":69,"../../../../../util/copy.coffee":210}],321:[function(t,e,n){var i,r,o,a,s,l,u,c,h,d,f;i=t("../../../../../util/buckets.coffee"),r=t("./buffer.coffee"),a=t("../../../../../core/fetch/value.coffee"),s=t("../../../../../font/sizes.coffee"),h=t("../../../../../textwrap/textwrap.coffee"),d=t("../../../../../core/data/time.coffee"),f=t("../../../../../util/uniques.coffee"),e.exports=function(t,e){var n,i,s,l,c,h,f,p,g,m,v,y,b,w,x,_,k,C,S,M;for(t.axes.margin.viz={top:t.axes.margin.top,right:t.axes.margin.right,bottom:t.axes.margin.bottom,left:t.axes.margin.left},t.axes.height=t.height.viz,t.axes.width=t.width.viz,n=t.width.viz>t.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"],c=0,p=n.length;c<p;c++)if(i=n[c],t[i].value){if(t[i].ticks.values===!1)if(t[i].value===t.time.value){for(C=t.time.solo.value,C=C.length?C.map(function(t){return t.constructor!==Date&&(t+="",4===t.length&&parseInt(t)+""===t&&(t+="/01/01"),t=new Date(t)),t}):t.data.time.values,l=d3.extent(C),x=t.data.time.stepType,C=[l[0]],k=l[0];k<l[1];)v=new Date(k),k=new Date(v["set"+x](v["get"+x]()+1)),C.push(k);t[i].ticks.values=C}else 1===i.indexOf("2")?(b=t[i.slice(0,1)].scale.viz,w=t[i].scale.viz,C=t[i.slice(0,1)].scale.ticks,t[i].ticks.values=b.ticks(C).map(function(t){return parseFloat(d3.format(".5f")(w.invert(b(t))))})):t[i].ticks.values=t[i].scale.viz.ticks(t[i].scale.ticks);t[i].ticks.values.length||(M=a(t,t.data.viz,t[i].value),M instanceof Array||(M=[M]),t[i].ticks.values=M),y=0===i.indexOf("x")?"y":"x",(1===t[i].ticks.values.length||e.buffer&&e.buffer!==y&&i===t.axes.discrete&&t[i].reset===!0)&&r(t,i,e.buffer),t[i].reset=!1,t[i].value===t.time.value?(s={"font-family":t[i].ticks.font.family.value,"font-weight":t[i].ticks.font.weight,"font-size":t[i].ticks.font.size+"px","text-transform":t[i].ticks.font.transform.value,"letter-spacing":t[i].ticks.font.spacing+"px"},S=d(t,{values:t[i].ticks.values,limit:t.width.viz,style:s}),t[i].ticks.value?t[i].ticks.visible=t[i].ticks.value.map(Number):t[i].ticks.labels.value.constructor===Array?t[i].ticks.visible=t[i].ticks.labels.value.map(Number):t[i].ticks.visible=S.values.map(Number),t[i].ticks.format=S.format):t[i].ticks.value?(t[i].ticks.values=t[i].ticks.value,t[i].ticks.labels.value.constructor===Array?t[i].ticks.visible=t[i].ticks.labels.value:t[i].ticks.visible=t[i].ticks.value):t[i].ticks.labels.value.constructor===Array?t[i].ticks.visible=t[i].ticks.labels.value:"log"===t[i].scale.value?(C=t[i].ticks.values,_=C.filter(function(t){return"1"===Math.abs(t).toString().charAt(0)}),_.length<3?t[i].ticks.visible=C:t[i].ticks.visible=_):t[i].ticks.visible=t[i].ticks.values,t[i].value===t.time.value&&(t[i].ticks.visible=t[i].ticks.visible.map(function(t){return t.constructor===Number&&(""+t).length>4?t:(t+="",4===t.length&&parseInt(t)+""===t&&(t+="/01/01"),new Date(t).getTime())}))}if(t.small)for(t.axes.width-=t.axes.margin.viz.left+t.axes.margin.viz.right,t.axes.height-=t.axes.margin.viz.top+t.axes.margin.viz.bottom,h=0,g=n.length;h<g;h++)i=n[h],t[i].label.height=0;else t.small||u(t);for(f=0,m=n.length;f<m;f++)i=n[f],t[i].axis.svg=o(t,i)},u=function(t){var e,n,r,o,a,u,c,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N;for(w=t.x.scale.viz.domain(),A=t.y.scale.viz.domain(),t.x2.value&&(m=t.x2.scale.viz.domain()),t.y2.value&&(T=t.y2.scale.viz.domain()),d=["y","y2"],n=0,a=d.length;n<a;n++)e=d[n],t[e].value&&(c="y"===e?"left":"right",E={"font-size":t[e].ticks.font.size+"px","font-family":t[e].ticks.font.family.value,"font-weight":t[e].ticks.font.weight,"text-transform":t[e].ticks.font.transform.value,"letter-spacing":t[e].ticks.font.spacing+"px"},N=t[e].ticks.visible,"log"===t[e].scale.value?P=N.map(function(t){return l(t)}):"share"===t[e].scale.value?P=N.map(function(n){return t.format.value(100*n,{key:"share",vars:t,output:e})}):t[e].value===t.time.value?P=N.map(function(n,i){return t[e].ticks.format(new Date(n))}):("string"==typeof N[0]&&(N=t[e].scale.viz.domain().filter(function(t){return 0!==t.indexOf("d3plus_buffer_")})),P=N.map(function(n){return t.format.value(n,{key:t[e].value,vars:t,labels:t[e].affixes.value,output:e})})),t[e].ticks.labels.value?(t[e].ticks.hidden=!1,O=d3.max(s(P,E),function(t){return t.width}),O&&(O=Math.ceil(O+t.labels.padding),t.axes.margin.viz[c]+=O)):t[e].ticks.hidden=!0,D=t[e].label.fetch(t),D?(R={"font-family":t[e].label.font.family.value,"font-weight":t[e].label.font.weight,"font-size":t[e].label.font.size+"px","text-transform":t[e].label.font.transform.value,"letter-spacing":t[e].label.font.spacing+"px"},t[e].label.height=s([D],R)[0].height):t[e].label.height=0,t[e].label.value&&(t.axes.margin.viz[c]+=t[e].label.height,t.axes.margin.viz[c]+=2*t[e].label.padding));for(t.axes.width-=t.axes.margin.viz.left+t.axes.margin.viz.right,t.x.scale.viz.range(i([0,t.axes.width],w.length)),m&&t.x2.scale.viz.range(i([0,t.axes.width],m.length)),f=["x","x2"],r=0,u=f.length;r<u;r++)e=f[r],t[e].value&&(c="x"===e?"bottom":"top",t[e].ticks.labels.value?(t[e].ticks.hidden=!1,v={"font-size":t[e].ticks.font.size+"px","font-family":t[e].ticks.font.family.value,"font-weight":t[e].ticks.font.weight,"text-transform":t[e].ticks.font.transform.value,"letter-spacing":t[e].ticks.font.spacing+"px"},M=t[e].ticks.visible,"log"===t[e].scale.value?S=M.map(function(t){return l(t)}):"share"===t[e].scale.value?S=M.map(function(n){return t.format.value(100*n,{key:"share",vars:t,output:e})}):t[e].value===t.time.value?S=M.map(function(n,i){return t[e].ticks.format(new Date(n))}):("string"==typeof M[0]&&(M=t[e].scale.viz.domain().filter(function(t){return 0!==t.indexOf("d3plus_buffer_")})),S=M.map(function(n){return t.format.value(n,{key:t[e].value,vars:t,labels:t[e].affixes.value,output:e})})),C=s(S,v),
b=d3.max(C,function(t){return t.width}),y=d3.max(C,function(t){return t.height}),1===M.length?k=t.axes.width:(k=t[e].scale.viz(M[1])-t[e].scale.viz(M[0]),k=Math.abs(k)),b>k&&S.join("").indexOf(" ")>0?(t[e].ticks.wrap=!0,C=s(S,v,{mod:function(e){return h().container(d3.select(e)).height(t.axes.height/2).width(k).draw()}}),b=d3.max(C,function(t){return t.width}),y=d3.max(C,function(t){return t.height})):t[e].ticks.wrap=!1,t[e].ticks.baseline="auto",b<=k?t[e].ticks.rotate=0:b<t.axes.height/2?(C=s(S,v,{mod:function(e){return h().container(d3.select(e)).width(t.axes.height/2).height(k).draw()}}),y=d3.max(C,function(t){return t.width}),b=d3.max(C,function(t){return t.height}),t[e].ticks.rotate=-90):(b=0,y=0),b&&y||(t[e].ticks.hidden=!0,t[e].ticks.rotate=0),b=Math.ceil(b),y=Math.ceil(y),t[e].ticks.maxHeight=y,t[e].ticks.maxWidth=b,y&&(t.axes.margin.viz[c]+=y+t.labels.padding),o=t[e].ticks.visible[t[e].ticks.visible.length-1],p=t[e].scale.viz(o),p+=b/2+t.axes.margin.viz.left,p>t.width.value&&(g=p-t.width.value+t.axes.margin.viz.right,t.axes.width-=g,t.axes.margin.viz.right+=g)):t[e].ticks.hidden=!0,x=t[e].label.fetch(t),x?(_={"font-family":t[e].label.font.family.value,"font-weight":t[e].label.font.weight,"font-size":t[e].label.font.size+"px","text-transform":t[e].label.font.transform.value,"letter-spacing":t[e].label.font.spacing+"px"},t[e].label.height=s([x],_)[0].height):t[e].label.height=0,t[e].label.value&&(t.axes.margin.viz[c]+=t[e].label.height,t.axes.margin.viz[c]+=2*t[e].label.padding));if(t.axes.height-=t.axes.margin.viz.top+t.axes.margin.viz.bottom,t.x.scale.viz.range(i([0,t.axes.width],w.length)),m&&t.x2.scale.viz.range(i([0,t.axes.width],m.length)),t.y.scale.viz.range(i([0,t.axes.height],A.length)),T)return t.y2.scale.viz.range(i([0,t.axes.height],T.length))},o=function(t,e){return d3.svg.axis().tickSize(t[e].ticks.size).tickPadding(5).orient(t[e].orient.value).scale(t[e].scale.viz).tickValues(t[e].ticks.values).tickFormat(function(n,i){var r,o;return t[e].ticks.hidden?null:(o=t[e].scale.value,r=n.constructor===Date?+n:n,t[e].ticks.visible.indexOf(r)>=0?"share"===o?t.format.value(100*n,{key:"share",vars:t,labels:t[e].affixes.value,output:e}):n.constructor===Date?t[e].ticks.format(n):"log"===o?l(n):t.format.value(n,{key:t[e].value,vars:t,labels:t[e].affixes.value,output:e}):null)})},c="⁰¹²³⁴⁵⁶⁷⁸⁹",l=function(t){var e,n,i;return n=Math.round(Math.log(Math.abs(t))/Math.LN10),i=Math.abs(t).toString().charAt(0),e="10 "+(n+"").split("").map(function(t){return c[t]}).join(""),"1"!==i&&(e=i+" x "+e),t<0?"-"+e:e}},{"../../../../../core/data/time.coffee":64,"../../../../../core/fetch/value.coffee":69,"../../../../../font/sizes.coffee":104,"../../../../../textwrap/textwrap.coffee":203,"../../../../../util/buckets.coffee":207,"../../../../../util/uniques.coffee":213,"./buffer.coffee":319}],322:[function(t,e,n){var i,r,o;i=t("../../../../../color/mix.coffee"),r=t("../../../../../textwrap/textwrap.coffee"),o=t("../../../../../object/validate.coffee"),e.exports=function(t){var e,n,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F,B,W,Y,V,U,q,X,G,$,K,Z,Q,J,tt,et,nt,it,rt,ot,at,st,lt,ut,ct;if(p=t.x.domain.viz.concat(t.y.domain.viz),p.indexOf(void 0)>=0)return null;for(h={width:t.axes.width,height:t.axes.height,fill:t.axes.background.color,stroke:t.axes.background.stroke.color,"stroke-width":t.axes.background.stroke.width,"shape-rendering":t.axes.background.rendering.value},n={left:"start",center:"middle",right:"end"},s=t.small?[]:[0],ot=function(e,n){return e.attr("x1",function(e){return 0===n.indexOf("x")?t.x.scale.viz(e):0}).attr("x2",function(e){return 0===n.indexOf("x")?t.x.scale.viz(e):t.axes.width}).attr("y1",function(e){return 0===n.indexOf("y")?t.y.scale.viz(e):0}).attr("y2",function(e){return 0===n.indexOf("y")?t.y.scale.viz(e):t.axes.height})},at=function(e,n,r){var o,a,s;return o=r?t[n].grid.color:t[n].ticks.color,a="log"===t[n].scale.value,s=t[n].ticks.visible||[],e.attr("stroke",function(e){var l;return 0===e?t[n].axis.color:(e.constructor===Date&&(e=+e),l=s.indexOf(e)>=0,!l||a&&"1"!==Math.abs(e).toString().charAt(0)?r&&"transparent"!==t.axes.background.color?i(o,t.axes.background.color,.4,1):"transparent"!==t.background.value?i(o,t.background.value,.4,1):i(o,"white",.4,1):o)}).attr("stroke-width",t[n].ticks.width).attr("shape-rendering",t[n].ticks.rendering.value)},g=function(e,n,i){var r;return r=0===n?"axis":"ticks",n=t[e][r].font[i],n&&(n.length||"number"==typeof n)?n:t[e].ticks.font[i]},rt=function(e,n){var r;return r="log"===t[n].scale.value,e.attr("font-size",function(t){return g(n,t,"size")+"px"}).attr("stroke","none").attr("fill",function(e){var o;return o=g(n,e,"color"),r&&"1"!==Math.abs(e).toString().charAt(0)?i(o,t.background.value,.4,1):o}).attr("font-family",function(t){return g(n,t,"family").value}).attr("font-weight",function(t){return g(n,t,"weight")}).style("text-transform",function(t){return g(n,t,"transform").value}).style("letter-spacing",function(t){return g(n,t,"spacing")+"px"})},z=function(e,n){var i,r;return i=0===n.indexOf("x")?"height":"width",r=0===n.indexOf("x")?"y":"x",e.attr(r+"1",0).attr(r+"2",t.axes[i]).attr(n+"1",function(t){return t.coords.line}).attr(n+"2",function(t){return t.coords.line}).attr("stroke",function(e){return e.color||t[n].lines.color}).attr("stroke-width",t[n].lines.width).attr("shape-rendering",t[n].lines.rendering.value).attr("stroke-dasharray",t[n].lines.dasharray.value)},R=function(e,i){var r;return r=0===i.indexOf("x")?"y":"x",e.attr(r,function(t){return t.coords.text[r]+"px"}).attr(i,function(t){return t.coords.text[i]+"px"}).attr("dy",t[i].lines.font.position.value).attr("text-anchor",n[t[i].lines.font.align.value]).attr("transform",function(t){return t.transform}).attr("font-size",t[i].lines.font.size+"px").attr("fill",function(e){return e.color||t[i].lines.color}).attr("font-family",t[i].lines.font.family.value).attr("font-weight",t[i].lines.font.weight)},Y="translate("+t.axes.margin.viz.left+","+t.axes.margin.viz.top+")",W=t.group.selectAll("g#d3plus_graph_plane").data([0]),W.transition().duration(t.draw.timing).attr("transform",Y),W.enter().append("g").attr("id","d3plus_graph_plane").attr("transform",Y),c=W.selectAll("rect#d3plus_graph_background").data([0]),c.transition().duration(t.draw.timing).attr(h),c.enter().append("rect").attr("id","d3plus_graph_background").attr("x",0).attr("y",0).attr(h),j=W.selectAll("path#d3plus_graph_mirror").data([0]),j.enter().append("path").attr("id","d3plus_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0),j.transition().duration(t.draw.timing).attr("opacity",function(){return t.axes.mirror.value?1:0}).attr("d",function(){var t,e;return e=h.width,t=h.height,"M "+e+" "+t+" L 0 "+t+" L "+e+" 0 Z"}),Q=0!==t.x.ticks.rotate,ut=function(e,n){var i,o;return o="x"===n?t.axes.height:0,i=e.attr("transform","translate(0,"+o+")").call(t[n].axis.svg.scale(t[n].scale.viz)).selectAll("g.tick"),i.selectAll("line").attr("y2",function(e){var i;return e.constructor===Date&&(e=+e),i=d3.select(this).attr("y2"),t[n].ticks.visible.indexOf(e)>=0?i:i/2}),i.select("text").style("text-anchor",Q&&"x"===n?"end":Q?"start":"middle").call(rt,n).each(function(e){if(d3.select(this).attr("dy","0px").attr("font-size",function(t){return g(n,t,"size")+"px"}),e.constructor===Date&&(e=+e),!t[n].ticks.hidden&&t[n].ticks.visible.indexOf(e)>=0)return r().container(d3.select(this)).rotate(t[n].ticks.rotate).align(Q?"end":"center").valign(Q?"middle":"x"===n?"top":"bottom").width(t[n].ticks.maxWidth+2).height(t[n].ticks.maxHeight).padding(0).x(-t[n].ticks.maxWidth/2).y("x2"===n?-(t[n].ticks.maxHeight+2*t.labels.padding):0).draw()})},ct=function(e,n){var i,r;return r="y2"===n?t.axes.width:0,i=e.attr("transform","translate("+r+", 0)").call(t[n].axis.svg.scale(t[n].scale.viz)).selectAll("g.tick"),i.selectAll("line").attr("y2",function(e){var n;return e.constructor===Date&&(e=+e),n=d3.select(this).attr("y2"),t.x.ticks.visible.indexOf(e)>=0?n:n/2}),i.select("text").call(rt,n)},G=["x","x2","y","y2"],b=0,S=G.length;b<S;b++)a=G[b],tt=0===a.indexOf("x")?ut:ct,U=s.length&&t[a].value?[0]:[],l=W.selectAll("g#d3plus_graph_"+a+"ticks").data(U),l.transition().duration(t.draw.timing).call(tt,a),l.selectAll("line").transition().duration(t.draw.timing).call(at,a),y=l.enter().append("g").attr("id","d3plus_graph_"+a+"ticks").call(tt,a),y.selectAll("path").attr("fill","none").attr("stroke","none"),y.selectAll("line").call(at,a),l.exit().transition().duration(t.data.timing).attr("opacity",0).remove();for(C=function(e,n){return e.attr("x",0===n.indexOf("x")?t.width.viz/2:-(t.axes.height/2+t.axes.margin.viz.top)).attr("y","x"===n?t.height.viz-t[n].label.height/2-t[n].label.padding:"y2"===n?t.width.viz-t[n].label.height/2-t[n].label.padding:t[n].label.height/2+t[n].label.padding).attr("transform",0===n.indexOf("y")?"rotate(-90)":null).attr("font-family",t[n].label.font.family.value).attr("font-weight",t[n].label.font.weight).attr("font-size",t[n].label.font.size+"px").attr("fill",t[n].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central").style("text-transform",t[n].label.font.transform.value).style("letter-spacing",t[n].label.font.spacing+"px")},$=["x","y"],w=0,M=$.length;w<M;w++)a=$[w],t[a].grid.value?v=t[a].ticks.value?t[a].ticks.value:t[a].ticks.values:(v=[],B="x"===a?"y":"x",t[a].ticks.values.indexOf(0)>=0&&t[B].axis.value&&(v=[0])),t[a].value===t.time.value&&(v=v.map(function(t){return t+="",4===t.length&&parseInt(t)+""===t&&(t+="/01/01"),new Date(t).getTime()})),m=W.selectAll("g#d3plus_graph_"+a+"grid").data([0]),m.enter().append("g").attr("id","d3plus_graph_"+a+"grid"),L=m.selectAll("line").data(v,function(t,e){return t.constructor===Date?t.getTime():t}),L.transition().duration(t.draw.timing).call(ot,a).call(at,a,!0),L.enter().append("line").style("opacity",0).call(ot,a).call(at,a,!0).transition().duration(t.draw.timing).delay(t.draw.timing/2).style("opacity",1),L.exit().transition().duration(t.draw.timing/2).style("opacity",0).remove();for(K=["x","x2","y","y2"],x=0,T=K.length;x<T;x++)a=K[x],t[a].value?(u=t[a].label.fetch(t),k=s&&u&&!t.small?[0]:[],e=t.format.affixes.value[t[a].value],u&&!t[a].affixes.value&&e&&(J=t[a].affixes.separator.value,J===!0?J=["[","]"]:J===!1&&(J=["",""]),u+=" "+J[0]+e[0]+" "+e[1]+J[1])):(u="",k=[]),_=t.group.selectAll("text#d3plus_graph_"+a+"label").data(k),_.text(u).transition().duration(t.draw.timing).call(C,a),_.enter().append("text").attr("stroke","none").attr("id","d3plus_graph_"+a+"label").text(u).call(C,a),_.exit().transition().duration(t.data.timing).attr("opacity",0).remove();for(Z=["x","y","x2","y2"],H=0,E=Z.length;H<E;H++)if(a=Z[H],t[a].value){for(P=W.selectAll("g#d3plus_graph_"+a+"_userlines").data([0]),P.enter().append("g").attr("id","d3plus_graph_"+a+"_userlines"),f=t[a].scale.viz.domain(),0===a.indexOf("y")&&(f=f.slice().reverse()),et=[],D=[],st=t[a].lines.value||[],F=0,O=st.length;F<O;F++)A=st[F],d=o(A)?A.position:A,lt=a===t.axes.discrete?f.indexOf(d)>=0:d>=f[0]&&d<=f[1],lt&&(d=o(A)?A:{position:d},d.coords={line:t[a].scale.viz(d.position)},D.push(d),d.text&&(d.axis=a,d.padding=.5*t[a].lines.font.padding.value,d.align=t[a].lines.font.align.value,V=t[a].lines.font.position.text,nt="middle"===V?0:2*d.padding,"top"===V&&(nt=-nt),0===a.indexOf("x")?(it="left"===d.align?t.axes.height:"center"===d.align?t.axes.height/2:0,"left"===d.align&&(it-=2*d.padding),"right"===d.align&&(it+=2*d.padding)):(it="left"===d.align?0:"center"===d.align?t.axes.width/2:t.axes.width,"right"===d.align&&(it-=2*d.padding),"left"===d.align&&(it+=2*d.padding)),d.coords.text={},d.coords.text[0===a.indexOf("x")?"y":"x"]=it,d.coords.text[a]=t[a].scale.viz(d.position)+nt,d.transform=0===a.indexOf("x")?"rotate(-90,"+d.coords.text.x+","+d.coords.text.y+")":null,et.push(d)));L=P.selectAll("line.d3plus_graph_"+a+"line").data(D,function(t){return t.position}),L.enter().append("line").attr("class","d3plus_graph_"+a+"line").attr("opacity",0).call(z,a),L.transition().duration(t.draw.timing).attr("opacity",1).call(z,a),L.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),I=P.selectAll("text.d3plus_graph_"+a+"line_text").data(et,function(t){return t.position}),I.enter().append("text").attr("class","d3plus_graph_"+a+"line_text").attr("id",function(t){var e;return e=t.position+"",e=e.replace("-","neg"),e=e.replace(".","p"),"d3plus_graph_"+a+"line_text_"+e}).attr("opacity",0).call(R,a),I.text(function(t){return t.text}).transition().duration(t.draw.timing).attr("opacity",1).call(R,a),I.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),X=function(e){var n;return n=function(t){var e;return e=t.position+"",e=e.replace("-","neg"),e=e.replace(".","p"),W.select("text#d3plus_graph_"+t.axis+"line_text_"+e).node().getBBox()},e.attr("x",function(t){return n(t).x-t.padding}).attr("y",function(t){return n(t).y-t.padding}).attr("transform",function(t){return t.transform}).attr("width",function(t){return n(t).width+2*t.padding}).attr("height",function(t){return n(t).height+2*t.padding}).attr("fill","transparent"!==t.axes.background.color?t.axes.background.color:"white")},q=t[a].lines.font.background.value?et:[],N=P.selectAll("rect.d3plus_graph_"+a+"line_rect").data(q,function(t){return t.position}),N.enter().insert("rect","text.d3plus_graph_"+a+"line_text").attr("class","d3plus_graph_"+a+"line_rect").attr("pointer-events","none").attr("opacity",0).call(X),N.transition().delay(t.draw.timing).each("end",function(e){return d3.select(this).transition().duration(t.draw.timing).attr("opacity",1).call(X)}),N.exit().transition().duration(t.draw.timing).attr("opacity",0).remove()}}},{"../../../../../color/mix.coffee":48,"../../../../../object/validate.coffee":175,"../../../../../textwrap/textwrap.coffee":203}],323:[function(t,e,n){var i,r,o;i=t("../../../../core/fetch/value.coffee"),r=t("../../../../string/strip.js"),o=t("../../../../util/uniques.coffee"),e.exports=function(t,e,n){var a,s,l,u,c,h,d;return void 0===n?n=t.id.nesting.slice(0,t.depth.value+1):n.constructor!==Array&&(n=[n]),void 0===s&&(s=[]),e||(e=t.data.viz),a=t[t.axes.discrete],u=t[t.axes.opposite],d=a.value===t.time.value,d?(h=t.data.time.ticks,l=t.time.solo.value.length?"solo":"mute",t.time[l].value.length&&(c=t.time[l].value.slice().map(function(t){return t.constructor!==Date&&(t+="",4===t.length&&parseInt(t)+""===t&&(t+="/01/01"),t=new Date(t)),+t}),h=h.filter(function(t){return"solo"===l?c.indexOf(+t)>=0:c.indexOf(+t)<0}))):h=a.ticks.values?a.ticks.values:o(e,a.value,i,t),d3.nest().key(function(e){var o,a,s,l,u;for(l="nesting",a=0,s=n.length;a<s;a++)o=n[a],u=i(t,e,o),u instanceof Array&&(u=u.join("_")),l+="_"+r(u);return l}).rollup(function(e){var n,r,s,c,f,p,g,m,v,y,b,w;if(n=o(e,a.value,i,t),w=n.length&&n[0].constructor===Date,w&&(n=n.map(Number)),a.zerofill.value)for(r="log"===a.scale.value?u.scale.viz.domain().every(function(t){return t<0})?-1:1:0,s=c=0,p=h.length;c<p;s=++c)if(b=h[s],y=d?+b:b,n.indexOf(y)<0){for(m={d3plus:{}},v=t.id.nesting,f=0,g=v.length;f<g;f++)l=v[f],l in e[0]&&(m[l]=e[0][l]);m[a.value]=b,m[u.value]=0,m[u.value]=r,e.splice(s,0,m)}return"string"==typeof e[0][a.value]?e:e.sort(function(e,n){var r,o,s,l,c;return r=i(t,e,a.value),s=i(t,n,a.value),(c=r-s)?c:(o=i(t,e,u.value),l=i(t,n,u.value),o-l)})}).entries(e)}},{"../../../../core/fetch/value.coffee":69,"../../../../string/strip.js":178,"../../../../util/uniques.coffee":213}],324:[function(t,e,n){var i;i=t("../../../../core/fetch/value.coffee"),e.exports=function(t,e){var n,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b;for(v=t.axes.stacked||t.axes.opposite,r=t[v].scale.viz(0),g=t[v].scale.value,f="x"===v?"y":"x",u="y"===v?t.axes.margin.viz.top:t.axes.margin.viz.left,d="share"===g?"expand":"zero",m=d3.layout.stack().values(function(t){return t.values||[t]}).offset(d).x(function(t){return t.d3plus[f]}).y(function(e){return r-t[v].scale.viz(i(t,e,t[v].value))}).out(function(e,n,o){var a,s;return s=i(t,e,t[v].value),a=s<0,"share"===g?(e.d3plus[v+"0"]=(1-n)*r,e.d3plus[v]=e.d3plus[v+"0"]-o*r):(e.d3plus[v+"0"]=r,t.axes.stacked&&(e.d3plus[v+"0"]-=n),e.d3plus[v]=e.d3plus[v+"0"]-o),e.d3plus[v]+=u,e.d3plus[v+"0"]+=u}),p=[],h=[],o=0,s=e.length;o<s;o++)if(n=e[o],b=i(t,n,t[v].value),b instanceof Array){for(c=!0,a=0,l=b.length;a<l;a++)if(y=b[a],y>=0){c=!1;break}c?h.push(n):p.push(n)}else b>=0&&p.push(n),b<0&&h.push(n);return 0===p.length||0===h.length?m(e):(p.length&&(p=m(p)),h.length&&(h=m(h)),p.concat(h))}},{"../../../../core/fetch/value.coffee":69}],325:[function(t,e,n){var i,r,o,a,s,l;i=t("../../core/fetch/value.coffee"),r=t("./helpers/graph/draw.coffee"),a=t("./helpers/graph/nest.coffee"),s=t("../../array/sort.coffee"),l=t("./helpers/graph/stack.coffee"),o=function(t){var e,n,o,a,u,c,h,d,f,p,g;if(r(t,{buffer:t.axes.opposite,mouse:!0}),o=t.x.domain.viz.concat(t.y.domain.viz),o.indexOf(void 0)>=0)return[];for(n=s(t.data.viz,null,null,null,t),a=0,c=n.length;a<c;a++)for(d=n[a],f=d.values,u=0,h=f.length;u<h;u++)e=f[u],p=i(t,e,t.x.value),null!==p?(e.d3plus.x2=!1,e.d3plus.x=t.x.scale.viz(p)):(e.d3plus.x2=!0,e.d3plus.x=t.x2.scale.viz(i(t,e,t.x2.value))),e.d3plus.x+=t.axes.margin.viz.left,g=i(t,e,t.y.value),null!==g?(e.d3plus.y2=!1,e.d3plus.y=t.y.scale.viz(g)):(e.d3plus.y2=!0,e.d3plus.y=t.y2.scale.viz(i(t,e,t.y2.value))),e.d3plus.y+=t.axes.margin.viz.top;return t.axes.stacked?l(t,n):n},o.filter=function(t,e){return a(t,e)},o.requirements=["data","x","y"],o.setup=function(t){var e;t.axes.discrete||(e=t.time.value===t.y.value?"y":"x",t.self[e]({scale:"discrete"}))},o.shapes=["line"],o.tooltip="static",e.exports=o},{"../../array/sort.coffee":36,"../../core/fetch/value.coffee":69,"./helpers/graph/draw.coffee":317,"./helpers/graph/nest.coffee":323,"./helpers/graph/stack.coffee":324}],326:[function(t,e,n){var i=t("../../network/smallestGap.coffee"),r=t("../../core/fetch/value.coffee"),o=function(t){var e=t.nodes.restricted||t.nodes.value,n=t.edges.restricted||t.edges.value,o=d3.extent(e,function(t){return t.x}),a=d3.extent(e,function(t){return t.y}),s=[1,1];if("number"==typeof t.size.value?s=[t.size.value,t.size.value]:t.size.value&&(s=d3.extent(e,function(e){var n=r(t,e,t.size.value);return 0===n?null:n})),"undefined"==typeof s[0]&&(s=[1,1]),"number"==typeof t.size.value)var l=t.size.value,u=t.size.value;else{var l=i(e,{accessor:function(t){return[t.x,t.y]}}),c=l/2,h=t.size.value?t.nodes.overlap:.4;if(l*=h,t.edges.arrows.value&&(l=.5*l),s[0]===s[1]){var u=c;l=c}else{var d=o[1]+1.1*l-(o[0]-1.1*l),f=a[1]+1.1*l-(a[0]-1.1*l),p=d/f,g=t.width.viz/t.height.viz;if(g>p)var m=t.height.viz/f;else var m=t.width.viz/d;var u=.25*l;u*m<2&&(u=2/m)}}var v=t.size.scale.value.domain(s).range([u,l]);t.zoom.bounds=[[o[0]-1.1*l,a[0]-1.1*l],[o[1]+1.1*l,a[1]+1.1*l]];var y=[],b={};return e.forEach(function(e){var n=t.data.viz.filter(function(n){return n[t.id.value]==e[t.id.value]})[0],i=n||{};i[t.id.value]=e[t.id.value],i.d3plus={},i.d3plus.x=e.x,i.d3plus.y=e.y;var o=r(t,i,t.size.value);i.d3plus.r=o?v(o):v.range()[0],b[i[t.id.value]]={x:i.d3plus.x,y:i.d3plus.y,r:i.d3plus.r},y.push(i)}),y.sort(function(t,e){return e.d3plus.r-t.d3plus.r}),n.forEach(function(e,n){e.d3plus&&delete e.d3plus.spline,e[t.edges.source].d3plus={};var i=b[e[t.edges.source][t.id.value]];void 0!==i?(e[t.edges.source].d3plus.r=i.r,e[t.edges.source].d3plus.x=i.x,e[t.edges.source].d3plus.y=i.y):delete e[t.edges.source].d3plus,e[t.edges.target].d3plus={};var r=b[e[t.edges.target][t.id.value]];void 0!==r?(e[t.edges.target].d3plus.r=r.r,e[t.edges.target].d3plus.x=r.x,e[t.edges.target].d3plus.y=r.y):delete e[t.edges.target].d3plus}),{nodes:y,edges:n}};o.nesting=!1,o.requirements=["nodes","edges"],o.scale=1.05,o.shapes=["circle","square","donut"],o.tooltip="static",o.zoom=!0,e.exports=o},{"../../core/fetch/value.coffee":69,"../../network/smallestGap.coffee":171}],327:[function(t,e,n){var i,r,o,a,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=t("../../network/shortestPath.coffee"),i=t("../../core/fetch/value.coffee"),o=t("../../util/uniques.coffee"),a=function(t){var e,n,r,o,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F,B,W,Y,V,U,q,X,G,$,K,Z,Q,J,tt,et,nt,it,rt,ot,at,st,lt,ut,ct,ht,dt;for(p=[],U={},U[t.focus.value[0]]=0,U[t.focus.value[1]]=0,q={all:[[t.focus.value[0]],[t.focus.value[1]]]},K=a.paths,V=v=0,k=K.length;v<k;V=++v)for(Y=K[V],p=p.concat(Y.edges),_=t.focus.value[0],q[V]=[_],Z=Y.edges,f=y=0,C=Z.length;y<C;f=++y)d=Z[f],d[t.edges.source]=t.data.viz.filter(function(e){return d[t.edges.source][t.id.value]===e[t.id.value]})[0],d[t.edges.target]=t.data.viz.filter(function(e){return d[t.edges.target][t.id.value]===e[t.id.value]})[0],I=d[t.edges.source][t.id.value]===_?"target":"source",H=d[t.edges[I]][t.id.value],void 0===U[H]&&(U[H]=V),q[V].push(H),_=H;ot=0;for(V in q)if(Y=q[V],"all"!==V){for(z=0,g=b=0,S=Y.length;b<S;g=++b)if(m=Y[g],0!==g&&g!==Y.length-1&&U[m]===parseFloat(V)){for(z=1,X=Y[g-1],L=Y[g+1],G=null,j=null,Q=q.all,u=D=0,M=Q.length;D<M;u=++D)l=Q[u],s.call(l,X)>=0&&(G=u),s.call(l,L)>=0&&(j=u);null!==G&&null===j?G+1===q.all.length-1?q.all.splice(G+1,0,[m]):q.all[G+1].push(m):j-G===1?q.all.splice(j,0,[m]):j-G>1&&q.all[j-1].push(m)}ot+=z}for(rt=Math.floor(t.height.viz/ot),dt=[],g=0;g<ot;)g%2===0?dt.push(g):dt.unshift(g),g++;for(w=t.size.value&&!t.small?30:0,ht=d3.scale.ordinal().domain(dt).range(d3.range(rt/2-w,t.height.viz+rt/2-w,(t.height.viz-rt)/(ot-1))),h=q.all.length,c=Math.floor(t.width.viz/h),ut=d3.scale.linear().domain([0,h-1]).rangeRound([c/2,t.width.viz-c/2]),P=5,R=.4*d3.min([c,rt-w]),st=d3.extent(t.data.viz,function(e){var n;return n=i(t,e,t.size.value),n||0}),at=t.size.scale.value.domain(st).rangeRound([P,R]),J=t.data.viz,N=0,T=J.length;N<T;N++){for(F=J[N],null==F.d3plus&&(F.d3plus={}),tt=q.all,u=B=0,E=tt.length;B<E;u=++B)l=tt[u],et=F[t.id.value],s.call(l,et)>=0&&(F.d3plus.x=ut(u));F.d3plus.y=ht(U[F[t.id.value]]),t.size.value?(lt=i(t,F,t.size.value),F.d3plus.r=lt?at(lt):P):F.d3plus.r=R,F.d3plus.r<.1*c&&!t.small?F.d3plus.label={x:0,y:F.d3plus.r+2*t.labels.padding,w:.6*c,h:w+R-F.d3plus.r,resize:!1}:delete F.d3plus.label}for(nt=a.paths,V=W=0,O=nt.length;W<O;V=++W)for(Y=nt[V],_=t.focus.value[0],it=Y.edges,f=$=0,A=it.length;$<A;f=++$)d=it[f],I=d[t.edges.source][t.id.value]===_?"target":"source",x="target"===I?"source":"target",H=d[t.edges[I]][t.id.value],U[_]!==U[H]?(d.d3plus={spline:!0},null==(e=d[t.edges.source]).d3plus&&(e.d3plus={}),null==(n=d[t.edges.source].d3plus).edges&&(n.edges={}),null==(r=d[t.edges.target]).d3plus&&(r.d3plus={}),null==(o=d[t.edges.target].d3plus).edges&&(o.edges={}),ct=d[I].d3plus.x-d[x].d3plus.x,d[x].d3plus.edges[d[I][t.id.value]]={angle:Math.PI,radius:c/2},d[I].d3plus.edges[d[x][t.id.value]]={angle:0,radius:c/2,offset:ct-c}):delete d.d3plus,_=H;return{nodes:t.data.viz,edges:p}},a.filter=function(t,e){var n,s,l,u,c,h,d,f,p,g,m,v,y,b,w,x,_,k,C;for(u=t.edges.filtered||t.edges.value,a.paths=r(u,t.focus.value[0],{target:t.focus.value[1],distance:t.edges.size.value||void 0,nodeid:t.id.value,startpoint:t.edges.source,endpoint:t.edges.target,K:t.edges.limit.value||5}),a.nodes=[],n=[],w=a.paths,d=0,g=w.length;d<g;d++)for(b=w[d],x=b.edges,f=0,m=x.length;f<m;f++)l=x[f],k=l[t.edges.source],C=l[t.edges.target],n.indexOf(k[t.id.value])<0&&(a.nodes.push(k),n.push(k[t.id.value])),n.indexOf(C[t.id.value])<0&&(a.nodes.push(C),n.push(C[t.id.value]));for(h=o(a.nodes,t.id.value,i,t),_=[],p=0,v=h.length;p<v;p++)c=h[p],s=e.filter(function(e){return e[t.id.value]===c}),s[0]?_.push(s[0]):(y={d3plus:{}},y[t.id.value]=c,_.push(y));return _},a.nesting=!1,a.requirements=[function(t){return{status:2===t.focus.value.length,text:t.format.locale.value.method.focus+" x 2"}},"edges"],a.scale=1,a.shapes=["circle","square","donut"],a.tooltip="static",e.exports=a},{"../../core/fetch/value.coffee":69,"../../network/shortestPath.coffee":170,"../../util/uniques.coffee":213}],328:[function(t,e,n){var i,r,o,a;i=t("../../array/comparator.coffee"),r=t("../../core/data/threshold.js"),o=t("../../core/data/group.coffee"),a=function(t){var e,n,r,a,s,l,u,c,h;for(u=d3.layout.pie().value(function(t){return t.value}).sort(function(e,n){return t.order.value?i(e.d3plus,n.d3plus,[t.order.value],t.order.sort.value,[],t):t.id.nesting.length>1?i(e.d3plus,n.d3plus,t.id.nesting.concat([t.size.value]),void 0,[],t):i(e.d3plus,n.d3plus,[t.size.value],"desc",[],t)}),n=o(t,t.data.viz,[]),l=u(n),h=[],c=d3.min([t.width.viz,t.height.viz])/2-2*t.labels.padding,r=0,s=l.length;r<s;r++)e=l[r],a=e.data.d3plus,a.d3plus.startAngle=e.startAngle,a.d3plus.endAngle=e.endAngle,a.d3plus.r=c,a.d3plus.x=t.width.viz/2,a.d3plus.y=t.height.viz/2,a.d3plus.share=(e.endAngle-e.startAngle)/(2*Math.PI),h.push(a);return h},a.filter=r,a.requirements=["data","size"],a.shapes=["arc"],a.threshold=function(t){return 1600/(t.width.viz*t.height.viz)},e.exports=a},{"../../array/comparator.coffee":34,"../../core/data/group.coffee":59,"../../core/data/threshold.js":63}],329:[function(t,e,n){var i,r,o,a,s,l,u,c,h,d,f;r=t("../../array/comparator.coffee"),h=t("../../array/sort.coffee"),o=t("../../core/data/threshold.js"),a=t("../../core/fetch/text.js"),s=t("../../core/fetch/value.coffee"),l=t("../../font/sizes.coffee"),u=t("../../geom/offset.coffee"),d=t("../../textwrap/textwrap.coffee"),i=t("../../util/buckets.coffee"),f=t("../../util/uniques.coffee"),c=function(t){var e,n,r,o,c,h,p,g,m,v,y,b,w,x,_,k,C,S,M,T,E,O,A,D,R,P,N,z,L,I,H,j,F,B,W,Y,V,U,q,X,G,$,K,Z,Q,J,tt,et,nt,it,rt,ot,at,st;for(v=t.data.viz,Y=t.depth.value+1,V=t.id.nesting[Y],g=function(){var t,e,n;for(n=[],t=0,e=v.length;t<e;t++)m=v[t],n.push(m[V]);return n}(),ot=function(){var e,n,i;for(i=[],e=0,n=v.length;e<n;e++)m=v[e],i.push(f(v,V,s,t,Y));return i}(),ot=f(d3.merge(ot)).length,o=2*Math.PI/ot,B=d3.min([t.width.viz,t.height.viz])/2,A=0,P=0,N=function(){var e,n,i;for(i=[],e=0,n=g.length;e<n;e++)h=g[e],i.push(a(t,h,Y)[0]);return i}(),N=f(d3.merge(N)),t.labels.value&&(y=u(Math.PI/2,B),tt=u(o+Math.PI/2,B),A=y.x-tt.x-2*t.labels.padding,it={fill:t.x.ticks.font.color,"font-family":t.x.ticks.font.family.value,"font-weight":t.x.ticks.font.weight,"font-size":t.x.ticks.font.size+"px"},et=l(N,it,{mod:function(e){return d().container(d3.select(e)).width(t.height.viz/8).height(A).draw()}}),P=d3.max(et,function(t){return t.width}),B-=P,B-=2*t.labels.padding),F=function(){var e,n,i;for(i=[],e=0,n=g.length;e<n;e++)h=g[e],i.push(function(){var e,n,i;for(i=[],e=0,n=h.length;e<n;e++)m=h[e],i.push(s(t,m,t.size.value));return i}());return i}(),F=d3.max(d3.merge(F)),X=d3.scale.linear().domain([0,F]).range([0,B]),k=function(){var e,n,i;for(i=[],e=0,n=g.length;e<n;e++)h=g[e],i.push(s(t,h,V));return i}(),k=f(d3.merge(k)),_=d3.scale.ordinal().domain(k).range(d3.range(0,k.length)),S=0,z=v.length;S<z;S++)for(m=v[S],m.d3plus.x=t.width.viz/2+t.margin.top,m.d3plus.y=t.height.viz/2+t.margin.left,G=m[V],x=M=0,L=G.length;M<L;x=++M)e=G[x],e.d3plus||(e.d3plus={}),e.d3plus.r=X(s(t,e,t.size.value)),e.d3plus.a=_(s(t,e,V))*o;for(C=1,$=[10,5,4,2],j=0,I=$.length;j<I;j++)if(x=$[j],B/x>=20){C=x;break}for(Z=i([B/C,B],C-1).reverse(),Z.length===C&&Z.shift(),J=t.group.selectAll(".d3plus_radar_rings").data(Z,function(t,e){return e}),Q=function(e){return e.attr("fill",function(e,n){return 0===n?t.axes.background.color:"transparent"}).attr("cx",t.width.viz/2+t.margin.top).attr("cy",t.height.viz/2+t.margin.left).attr("stroke",t.x.grid.value?t.x.grid.color:"transparent")},J.enter().append("circle").attr("class","d3plus_radar_rings").call(Q).attr("r",0),J.transition().duration(t.draw.timing).call(Q).attr("r",function(t){return t}),J.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),D=d3.scale.ordinal().domain(N).range(d3.range(0,N.length)),E=[],W=0,H=N.length;W<H;W++)T=N[W],n=o*D(T)-Math.PI/2,e=n*(180/Math.PI),e<-90||e>90?(e-=180,c=-(B+2*t.labels.padding+P),r="end"):(c=B+2*t.labels.padding,r="start"),rt=n<0||n>Math.PI,K=n<Math.PI/2,q=B,t.labels.value&&(q+=t.labels.padding),U=u(n,q),at=U.x,st=U.y,K||(at-=P),rt&&(st-=A),p=[0,Math.PI].indexOf(o*D(T))>=0,p&&(at-=P/2),E.push({text:T,angle:e,x:c,anchor:r,offset:U});return O=t.group.selectAll("g.d3plus_radar_label_group").data([0]),O.enter().append("g").attr("class","d3plus_radar_label_group").attr("transform","translate("+t.width.viz/2+","+t.height.viz/2+")"),O.transition().duration(t.draw.timing).attr("transform","translate("+t.width.viz/2+","+t.height.viz/2+")"),nt=O.selectAll(".d3plus_radar_labels").data(t.labels.value?E:[],function(t,e){return e}),R=function(t){return t.attr(it).each(function(t,e){return d().container(d3.select(this)).height(A).width(P).align(t.anchor).text(t.text).padding(0).valign("middle").x(t.x).y(-A/2).draw()}).attr("transform",function(t){var e;return e=d3.select(this).attr("transform")||"",e.length&&(e=e.split(")").slice(-3).join(")")),"rotate("+t.angle+")"+e})},nt.call(R),nt.enter().append("text").attr("class","d3plus_radar_labels").attr("opacity",0).call(R).transition().duration(t.draw.timing).attr("opacity",1),nt.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),b=t.group.selectAll(".d3plus_radar_lines").data(E,function(t,e){return e}),w=function(e){return e.attr("stroke",t.x.grid.color).attr("x1",t.width.viz/2+t.margin.left).attr("y1",t.height.viz/2+t.margin.top)},b.enter().append("line").attr("class","d3plus_radar_lines").call(w).attr("x2",t.width.viz/2+t.margin.left).attr("y2",t.height.viz/2+t.margin.top),b.transition().duration(t.draw.timing).call(w).attr("x2",function(e){return t.width.viz/2+t.margin.left+e.offset.x}).attr("y2",function(e){return t.height.viz/2+t.margin.top+e.offset.y}),b.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),t.mouse.viz={click:!1},v},c.requirements=["data","size"],c.shapes=["radial"],e.exports=c},{"../../array/comparator.coffee":34,"../../array/sort.coffee":36,"../../core/data/threshold.js":63,"../../core/fetch/text.js":68,"../../core/fetch/value.coffee":69,"../../font/sizes.coffee":104,"../../geom/offset.coffee":163,"../../textwrap/textwrap.coffee":203,"../../util/buckets.coffee":207,"../../util/uniques.coffee":213}],330:[function(t,e,n){var i=t("../../array/sort.coffee"),r=t("../../client/pointer.coffee"),o=t("../../core/fetch/value.coffee"),s=t("../../core/fetch/color.coffee"),l=t("../../color/legible.coffee"),u=t("../../tooltip/remove.coffee"),c=t("../../network/smallestGap.coffee"),h=t("../../color/text.coffee"),d=t("../../util/uniques.coffee"),f=function(t){var e=d3.min([t.height.viz,t.width.viz])/2,n=t.small||!t.labels.value?(e-2*t.labels.padding)/2:e/3,f=t.small||!t.labels.value?1.4*n:n,p=2*n,g=[],m=[],v=t.data.viz.filter(function(e){return e[t.id.value]===t.focus.value[0]})[0];v||(v={d3plus:{}},v[t.id.value]=t.focus.value[0]),v.d3plus.x=t.width.viz/2,v.d3plus.y=t.height.viz/2,v.d3plus.r=.65*f;var y=[],b=[t.focus.value[0]];t.edges.connections(t.focus.value[0],t.id.value).forEach(function(e){var n=e[t.edges.source][t.id.value]==t.focus.value[0]?e[t.edges.target]:e[t.edges.source],i=t.data.viz.filter(function(e){return e[t.id.value]===n[t.id.value]})[0];i||(i={d3plus:{}},i[t.id.value]=n[t.id.value]),i.d3plus.edges=t.edges.connections(i[t.id.value],t.id.value).filter(function(e){return e[t.edges.source][t.id.value]!=t.focus.value[0]&&e[t.edges.target][t.id.value]!=t.focus.value[0]}),i.d3plus.edge=e,b.push(i[t.id.value]),y.push(i)});var w=t.order.value||t.color.value||t.size.value||t.id.value;y.sort(function(e,n){var r=e.d3plus.edges.length-n.d3plus.edges.length;return r?r:i([e,n],w,t.order.sort.value,t.color.value||[],t)}),"number"==typeof t.edges.limit.value?y=y.slice(0,t.edges.limit.value):"function"==typeof t.edges.limit.value&&(y=t.edges.limit.value(y));var x=[],_=0;y.forEach(function(e){var n=e[t.id.value];e.d3plus.edges=e.d3plus.edges.filter(function(e){var i=e[t.edges.source][t.id.value],r=e[t.edges.target][t.id.value];return b.indexOf(i)<0&&r==n||b.indexOf(r)<0&&i==n}),_+=e.d3plus.edges.length||1,e.d3plus.edges.forEach(function(e){var i=e[t.edges.source],r=e[t.edges.target],o=r[t.id.value]==n?i:r;
b.push(o[t.id.value])})}),i(y,w,t.order.sort.value,t.color.value||[],t);var k=0,C=2*Math.PI,S=0;y.forEach(function(e,n){var r=e.d3plus.edges.length||1,o=C/_*r;0==n&&(S=s,k-=o/2);var s=k+o/2;s-=C/4,e.d3plus.radians=s,e.d3plus.x=t.width.viz/2+f*Math.cos(s),e.d3plus.y=t.height.viz/2+f*Math.sin(s),k+=o,e.d3plus.edges.sort(function(n,r){var n=n[t.edges.source][t.id.value]==e[t.id.value]?n[t.edges.target]:n[t.edges.source],r=r[t.edges.source][t.id.value]==e[t.id.value]?r[t.edges.target]:r[t.edges.source];return i([n,r],w,t.order.sort.value,t.color.value||[],t)}),e.d3plus.edges.forEach(function(n,i){var o=n[t.edges.source][t.id.value]==e[t.id.value]?n[t.edges.target]:n[t.edges.source],l=C/_,u=t.data.viz.filter(function(e){return e[t.id.value]===o[t.id.value]})[0];u||(u={d3plus:{}},u[t.id.value]=o[t.id.value]),a=s-l*r/2+l/2+l*i,u.d3plus.radians=a,u.d3plus.x=t.width.viz/2+p*Math.cos(a),u.d3plus.y=t.height.viz/2+p*Math.sin(a),x.push(u)})});var M=c(y,{accessor:function(t){return[t.d3plus.x,t.d3plus.y]}}),T=c(x,{accessor:function(t){return[t.d3plus.x,t.d3plus.y]}});if(M||(M=n/2),T||(T=n/4),M/2-4<8)var E=d3.min([M/2,8]);else var E=M/2-4;if(T/2-4<4)var O=d3.min([T/2,4]);else var O=T/2-4;O>n/10&&(O=n/10),O>E&&O>10&&(O=.75*E),E>1.5*O&&(E=1.5*O),E=Math.floor(E),O=Math.floor(O);var A=d(y,t.id.value,o,t);A=A.concat(d(x,t.id.value,o,t)),A.push(t.focus.value[0]);var D=t.data.viz.filter(function(e){return A.indexOf(e[t.id.value])>=0});if(t.size.value){var R=d3.extent(D,function(e){return o(t,e,t.size.value)});R[0]==R[1]&&(R[0]=0);var e=d3.scale.linear().domain(R).rangeRound([3,d3.min([E,O])]),P=o(t,v,t.size.value);v.d3plus.r=e(P)}else{var e=d3.scale.linear().domain([1,2]).rangeRound([E,O]);t.edges.label&&(v.d3plus.r=1.5*e(1))}x.forEach(function(n){n.d3plus.ring=2;var i=t.size.value?o(t,n,t.size.value):2;n.d3plus.r=e(i)}),y.forEach(function(n){n.d3plus.ring=1;var i=t.size.value?o(t,n,t.size.value):1;n.d3plus.r=e(i)}),m=[v].concat(y).concat(x),y.forEach(function(e,i){var r=[t.edges.source,t.edges.target],o=e.d3plus.edge;r.forEach(function(e){o[e]=m.filter(function(n){return n[t.id.value]==o[e][t.id.value]})[0]}),delete o.d3plus,g.push(o),t.edges.connections(e[t.id.value],t.id.value).forEach(function(i){var r=i[t.edges.source][t.id.value]==e[t.id.value]?i[t.edges.target]:i[t.edges.source];if(r[t.id.value]!=v[t.id.value]){var o=x.filter(function(e){return e[t.id.value]==r[t.id.value]})[0];if(o);else{o=y.filter(function(e){return e[t.id.value]==r[t.id.value]})[0]}if(o){i.d3plus={spline:!0,translate:{x:t.width.viz/2,y:t.height.viz/2}};var a=[t.edges.source,t.edges.target];a.forEach(function(r,a){i[r]=m.filter(function(e){return e[t.id.value]==i[r][t.id.value]})[0],void 0===i[r].d3plus.edges&&(i[r].d3plus.edges={});var s=0===a?i[t.edges.target][t.id.value]:i[t.edges.source][t.id.value];i[r][t.id.value]==e[t.id.value]?i[r].d3plus.edges[s]={angle:e.d3plus.radians+Math.PI,radius:n/2}:i[r].d3plus.edges[s]={angle:o.d3plus.radians,radius:n/2}}),g.push(i)}}})});var N=!1;return t.background.value&&["transparent","none"].indexOf(t.background.value)<0&&d3.hsl(t.background.value).l<.5&&(N=h(t.background.value)),m.forEach(function(e){if(!t.small&&t.labels.value)if(e[t.id.value]!=t.focus.value[0]){e.d3plus.rotate=e.d3plus.radians*(180/Math.PI);var i=e.d3plus.rotate,r=n-3*t.labels.padding-e.d3plus.r;if(i<-90||i>90){i-=180;var o=-(e.d3plus.r+r/2+t.labels.padding),a="end"}else var o=e.d3plus.r+r/2+t.labels.padding,a="start";var u=y.indexOf(e)>=0,c=1==e.d3plus.ring?M:T;e.d3plus.label={x:o,y:0,w:r,h:c,angle:i,anchor:a,valign:"center",color:N||l(s(t,e)),resize:[8,t.labels.font.size],background:u,mouse:!0}}else if(t.size.value||t.edges.label){var c=f-2*e.d3plus.r-2*t.labels.padding;e.d3plus.label={x:0,y:e.d3plus.r+c/2,w:f,h:c,color:N||l(s(t,e)),resize:[10,40],background:!0,mouse:!0}}else delete e.d3plus.rotate,delete e.d3plus.label;else delete e.d3plus.rotate,delete e.d3plus.label}),t.mouse.viz={},t.mouse.viz[r.click]=function(e){if(e[t.id.value]!=t.focus.value[0]){u(t.type.value);var n=t.focus.value[0];t.history.states.push(function(){t.self.focus(n).draw()}),t.self.focus(e[t.id.value]).draw()}},{edges:g,nodes:m,data:D}};f.filter=function(t,e){var n=t.edges.connections(t.focus.value[0],t.id.value,!0),i=[];n.forEach(function(e){i=i.concat(t.edges.connections(e[t.id.value],t.id.value,!0))});var r=n.concat(i),a=d(r,t.id.value,o,t),s=[];return a.forEach(function(n){var i=e.filter(function(e){return e[t.id.value]==n})[0];if(i)s.push(i);else{var r={d3plus:{}};r[t.id.value]=n,s.push(r)}}),s},f.nesting=!1,f.scale=1,f.shapes=["circle","square","donut"],f.requirements=["edges","focus"],f.tooltip="static",e.exports=f},{"../../array/sort.coffee":36,"../../client/pointer.coffee":40,"../../color/legible.coffee":46,"../../color/text.coffee":52,"../../core/fetch/color.coffee":65,"../../core/fetch/value.coffee":69,"../../network/smallestGap.coffee":171,"../../tooltip/remove.coffee":206,"../../util/uniques.coffee":213}],331:[function(t,e,n){var i,r,o,a,s;i=t("./sankey.js"),r=t("../../client/pointer.coffee"),o=t("../../tooltip/remove.coffee"),s=t("../../util/uniques.coffee"),a=function(t){var e,n,a,s,l,u,c,h,d,f,p,g,m,v,y;for(s=t.focus.value[0],g=2*t.data.stroke.width,y=t.size.value.constructor===Number?t.size.value:20,a=t.edges.connections(s,t.id.value).filter(function(e){return e[t.edges.source][t.id.value]!==s||e[t.edges.target][t.id.value]!==s}),p=[],m=[],a=a.map(function(e){var n,i;return e[t.edges.target][t.id.value]===s?(n={id:"left_"+e[t.edges.source][t.id.value],dupe:"left",data:e[t.edges.source],value:e[t.edges.strength.value]},i=e[t.edges.target]):(n=e[t.edges.source],i={id:"right_"+e[t.edges.target][t.id.value],dupe:"right",data:e[t.edges.target],value:e[t.edges.strength.value]}),m.indexOf(n.id)<0&&p.push(n),m.indexOf(i.id)<0&&p.push(i),m.push(n.id),m.push(i.id),{source:n,target:i,value:e[t.edges.strength.value]||1}}),c=i().nodeWidth(y).nodePadding(t.data.padding.value).size([t.width.viz-2*g,t.height.viz-2*g]).nodes(p).links(a).layout(2),v=[],l=0,h=p.length;l<h;l++)f=p[l],e=f.data||f,e={id:e[t.id.value]},e.d3plus={x:f.x+f.dx/2+g,y:f.y+f.dy/2+g,width:f.dx,height:f.dy,suffix:f.dupe},e.id!==s&&(e[t.edges.strength.value]=f.value),v.push(e);for(t.edges.path=c.link(),u=0,d=a.length;u<d;u++)n=a[u],n.d3plus={x:g,y:g};return t.mouse.viz={},t.mouse.viz[r.click]=function(e){var n;if(e[t.id.value]!==t.focus.value[0])return o(t.type.value),n=t.focus.value[0],t.history.states.push(function(){return t.self.focus(n).draw()}),t.self.focus(e[t.id.value]).draw()},{nodes:v,edges:a}},a.requirements=["edges","focus","nodes"],a.shapes=["square"],e.exports=a},{"../../client/pointer.coffee":40,"../../tooltip/remove.coffee":206,"../../util/uniques.coffee":213,"./sankey.js":332}],332:[function(t,e,n){e.exports=function(){function t(){f.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),p.forEach(function(t){var e=t.source,n=t.target;"number"==typeof e&&(e=t.source=f[t.source]),"number"==typeof n&&(n=t.target=f[t.target]),e.sourceLinks.push(t),n.targetLinks.push(t)})}function e(){f.forEach(function(t){t.value=Math.max(d3.sum(t.sourceLinks,l),d3.sum(t.targetLinks,l))})}function n(){for(var t,e=f,n=0;e.length;)t=[],e.forEach(function(e){e.x=n,e.dx=c,e.sourceLinks.forEach(function(e){t.indexOf(e.target)<0&&t.push(e.target)})}),e=t,++n;i(n),r((d[0]-c)/(n-1))}function i(t){f.forEach(function(e){e.sourceLinks.length||(e.x=t-1)})}function r(t){f.forEach(function(e){e.x*=t})}function o(t){function e(){var t=d3.min(a,function(t){return(d[1]-(t.length-1)*h)/d3.sum(t,l)});a.forEach(function(e){e.forEach(function(e,n){e.y=n,e.dy=e.value*t})}),p.forEach(function(e){e.dy=e.value*t})}function n(t){function e(t){return s(t.source)*t.value}a.forEach(function(n,i){n.forEach(function(n){if(n.targetLinks.length){var i=d3.sum(n.targetLinks,e)/d3.sum(n.targetLinks,l);n.y+=(i-s(n))*t}})})}function i(t){function e(t){return s(t.target)*t.value}a.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var i=d3.sum(n.sourceLinks,e)/d3.sum(n.sourceLinks,l);n.y+=(i-s(n))*t}})})}function r(){a.forEach(function(t){var e,n,i,r=0,a=t.length;for(t.sort(o),i=0;i<a;++i)e=t[i],n=r-e.y,n>0&&(e.y+=n),r=e.y+e.dy+h;if(n=r-h-d[1],n>0)for(r=e.y-=n,i=a-2;i>=0;--i)e=t[i],n=e.y+e.dy+h-r,n>0&&(e.y-=n),r=e.y})}function o(t,e){return t.y-e.y}var a=d3.nest().key(function(t){return t.x}).sortKeys(d3.ascending).entries(f).map(function(t){return t.values});e(),r();for(var u=1;t>0;--t)i(u*=.99),r(),n(u),r()}function a(){function t(t,e){return t.source.y-e.source.y}function e(t,e){return t.target.y-e.target.y}f.forEach(function(n){n.sourceLinks.sort(e),n.targetLinks.sort(t)}),f.forEach(function(t){var e=0,n=0;t.sourceLinks.forEach(function(t){t.sy=e,e+=t.dy}),t.targetLinks.forEach(function(t){t.ty=n,n+=t.dy})})}function s(t){return t.y+t.dy/2}function l(t){return t.value}var u={},c=24,h=8,d=[1,1],f=[],p=[];return u.nodeWidth=function(t){return arguments.length?(c=+t,u):c},u.nodePadding=function(t){return arguments.length?(h=+t,u):h},u.nodes=function(t){return arguments.length?(f=t,u):f},u.links=function(t){return arguments.length?(p=t,u):p},u.size=function(t){return arguments.length?(d=t,u):d},u.layout=function(i){return t(),e(),n(),o(i),a(),u},u.relayout=function(){return a(),u},u.link=function(){function t(t){var n=t.source.x+t.source.dx,i=t.target.x,r=d3.interpolateNumber(n,i),o=r(e),a=r(1-e),s=t.source.y+t.sy+t.dy/2,l=t.target.y+t.ty+t.dy/2;return"M"+n+","+s+"C"+o+","+s+" "+a+","+l+" "+i+","+l}var e=.5;return t.curvature=function(n){return arguments.length?(e=+n,t):e},t},u}},{}],333:[function(t,e,n){var i,r,o,a,s,l;i=t("../../core/fetch/value.coffee"),r=t("./helpers/graph/draw.coffee"),o=t("../../core/console/print.coffee"),s=t("../../array/sort.coffee"),l=t("./helpers/graph/dataTicks.coffee"),a=function(t){var e,n,o,a,u;if(r(t,{buffer:"size",mouse:!0}),n=t.x.domain.viz.concat(t.y.domain.viz),n.indexOf(void 0)>=0)return[];for(u=t.data.viz,o=0,a=u.length;o<a;o++)e=u[o],e.d3plus.x=t.x.scale.viz(i(t,e,t.x.value)),e.d3plus.x+=t.axes.margin.viz.left,e.d3plus.y=t.y.scale.viz(i(t,e,t.y.value)),e.d3plus.y+=t.axes.margin.viz.top,"number"!=typeof t.size.value&&t.size.value?e.d3plus.r=t.axes.scale(i(t,e,t.size.value)):e.d3plus.r=t.axes.scale(0);return l(t),s(t.data.viz,t.order.value||t.size.value||t.id.value,"desc"===t.order.sort.value?"asc":"desc",t.color.value||[],t)},a.fill=!0,a.requirements=["data","x","y"],a.scale=1.1,a.setup=function(t){if(t.time.value&&!t.axes.discrete&&(t.time.value===t.x.value&&t.self.x({scale:"discrete"}),t.time.value===t.y.value))return t.self.y({scale:"discrete"})},a.shapes=["circle","square","donut"],a.tooltip="static",e.exports=a},{"../../array/sort.coffee":36,"../../core/console/print.coffee":54,"../../core/fetch/value.coffee":69,"./helpers/graph/dataTicks.coffee":316,"./helpers/graph/draw.coffee":317}],334:[function(t,e,n){var i=t("../../core/fetch/value.coffee"),r=t("../../util/uniques.coffee"),o=t("../../util/copy.coffee"),a=t("../../color/random.coffee"),s=function(t){var e=r(t.data.viz,t.id.value,i,t),n=r(t.cols.value);n.indexOf("label")<0&&t.cols.index.value&&n.unshift("label");var s=t.height.viz/(e.length+1),l=t.width.viz/n.length;t.group.selectAll("rect").data([0]).enter().append("rect").attr("class","background").attr("height",t.height.viz).attr("width",t.width.viz).style("fill",t.color.missing);var u=t.group.selectAll("line.horiz").data(t.data.viz);u.enter().append("line").attr("class","horiz"),u.attr("x1",0).attr("y1",function(t,e){return s*e+s}).attr("x2",t.width.viz).attr("y2",function(t,e){return s*e+s}).style("fill","#fff").style("stroke","#fff"),u.exit().remove();var c=t.group.selectAll("line.vert").data(n);c.enter().append("line").attr("class","vert"),c.attr("x1",function(t,e){return l*e+l}).attr("y1",0).attr("x2",function(t,e){return l*e+l}).attr("y2",t.height.viz).style("fill","#fff").style("stroke","#fff"),c.exit().remove();var h=[],d={};return n.forEach(function(e,n){var i={d3plus:{x:l*n+l/2,y:s/2,width:l,height:s,id:"d3p_header_"+e.toString().replace(/ /g,"_"),shape:"square",color:"#fff",text:t.format.value(e)}};if(e==t.id.value&&(i.d3plus.color="#fff"),"label"==e&&(i.d3plus.label=!1,i.d3plus.color="#fff",i.d3plus.stroke="#fff"),h.push(i),"number"==t.data.keys[e]){var r=d3.extent(t.data.viz,function(t){return t[e]});r[0]==r[1]&&(r=[r[0]-1,r[1]]),d[e]=d3.scale.linear().domain(r).range([t.color.missing,a(e)])}else"boolean"==t.data.keys[e]&&(d[e]=function(n){return n?a(e):t.color.missing})}),t.data.viz.forEach(function(e,i){i+=1,n.forEach(function(n,r){var a=o(e);a.d3plus.id="d3p_"+a[t.id.value].toString().replace(/ /g,"_")+"_"+n,a.d3plus.x=l*r+l/2,a.d3plus.y=s*i+s/2,a.d3plus.width=l,a.d3plus.height=s,"label"==n&&(a.d3plus.shape="square",a.d3plus.color="#fff",h.push(a)),d3.keys(e).indexOf(n)>=0&&n in e&&(d[n]&&(a.d3plus.color=d[n](a[n])),a.d3plus.text=t.format.value(a[n]),"boolean"==t.data.keys[n]?a.d3plus.label=!1:"string"==t.data.keys[n]&&(a.d3plus.color=t.color.missing,a.d3plus.stroke="#fff",a.d3plus.shape="square"),h.push(a))})}),h};s.shapes=["check","cross","diamond","square","triangle","triangle_up","triangle_down"],s.requirements=["data","cols"],e.exports=s},{"../../color/random.coffee":49,"../../core/fetch/value.coffee":69,"../../util/copy.coffee":210,"../../util/uniques.coffee":213}],335:[function(t,e,n){var i,r,o,a;i=t("../../core/data/threshold.js"),r=t("../../core/data/group.coffee"),o=t("../../object/merge.coffee"),a=function(t){var e,n,i,a,s,l,u;if(i=r(t,t.data.viz),n=d3.layout.treemap().mode(t.type.mode.value).round(!0).size([t.width.viz,t.height.viz]).children(function(t){return t.values}).padding(t.data.padding.value).sort(function(t,e){var n;return n=t.value-e.value,0===n?t.id<e.id:n}).nodes({name:"root",values:i}).filter(function(t){return!t.values&&t.area}),n.length){for(u=n[0];u.parent;)u=u.parent;for(l=[],a=0,s=n.length;a<s;a++)e=n[a],e.d3plus.d3plus=o(e.d3plus.d3plus,{x:e.x+e.dx/2,y:e.y+e.dy/2,width:e.dx,height:e.dy,share:e.value/u.value}),l.push(e.d3plus)}return l},a.filter=i,a.modes=["squarify","slice","dice","slice-dice"],a.requirements=["data","size"],a.shapes=["square"],a.threshold=function(t){return 1600/(t.width.viz*t.height.viz)},e.exports=a},{"../../core/data/group.coffee":59,"../../core/data/threshold.js":63,"../../object/merge.coffee":174}],336:[function(t,e,n){var i,r,o,a,s,l,u;i=t("../core/methods/attach.coffee"),r=t("./methods/helpers/axis.coffee"),a=t("./helpers/ui/message.js"),s=t("./helpers/drawSteps.js"),l=t("../core/console/print.coffee"),o=t("./helpers/container.coffee"),u=t("../object/validate.coffee"),e.exports=function(){var e;return e={g:{apps:{}},types:{area:t("./types/area.coffee"),bar:t("./types/bar.coffee"),bubbles:t("./types/bubbles.coffee"),box:t("./types/box.coffee"),chart:t("./types/deprecated/chart.coffee"),geo_map:t("./types/geo_map.coffee"),line:t("./types/line.coffee"),network:t("./types/network.js"),paths:t("./types/paths.coffee"),pie:t("./types/pie.coffee"),radar:t("./types/radar.coffee"),rings:t("./types/rings.js"),sankey:t("./types/sankey.coffee"),scatter:t("./types/scatter.coffee"),stacked:t("./types/area.coffee"),table:t("./types/table.js"),tree_map:t("./types/tree_map.coffee")}},e.self=function(t){return t.each(function(){var t,n,i,r,u,c,h;e.draw.frozen=!0,e.error.internal=null,"timing"in e.draw||(e.draw.timing=e.timing.transitions),e.error.value&&(e.draw.timing=0),o(e),c=e.width.value<=e.width.small,u=e.height.value<=e.height.small,e.small=c||u,e.width.viz=e.width.value,e.height.viz=e.height.value,t=!1,n=function(){h.length?r():e.dev.value&&(l.groupEnd(),l.timeEnd("total draw time"),l.log("\n"))},i=function(t,i){i=i||"function",t[i]instanceof Array?t[i].forEach(function(t){t(e,n)}):"function"==typeof t[i]&&t[i](e,n),t.wait||n()},r=function(){var r,o,s,u;u=h.shift(),s=e.g.message&&t===u.message,o=!("check"in u)||u.check,"function"==typeof o&&(o=o(e)),o?s?i(u):(e.dev.value&&(t!==!1&&l.groupEnd(),l.group(u.message)),"string"==typeof e.messages.value?(t=e.messages.value,r=e.messages.value):(t=u.message,r=e.format.value(u.message)),e.draw.update?(a(e,r),e.error.value?i(u):setTimeout(function(){return i(u)},10)):i(u)):"otherwise"in u?e.error.value?i(u,"otherwise"):setTimeout(function(){return i(u,"otherwise")},10):n()},e.messages.style.backup=e.group&&"1"===e.group.attr("opacity")?"small":"large",h=s(e),r()}),e.self},i(e,{active:t("./methods/active.coffee"),aggs:t("./methods/aggs.coffee"),attrs:t("./methods/attrs.coffee"),axes:t("./methods/axes.coffee"),background:t("./methods/background.coffee"),"class":t("./methods/class.coffee"),color:t("./methods/color.coffee"),cols:t("./methods/cols.js"),config:t("./methods/config.coffee"),container:t("./methods/container.coffee"),coords:t("./methods/coords.coffee"),csv:t("./methods/csv.coffee"),data:t("./methods/data.coffee"),depth:t("./methods/depth.coffee"),descs:t("./methods/descs.coffee"),dev:t("./methods/dev.coffee"),draw:t("./methods/draw.js"),edges:t("./methods/edges.js"),error:t("./methods/error.coffee"),focus:t("./methods/focus.coffee"),font:t("./methods/font.coffee"),footer:t("./methods/footer.coffee"),format:t("./methods/format.coffee"),height:t("./methods/height.coffee"),history:t("./methods/history.coffee"),icon:t("./methods/icon.coffee"),id:t("./methods/id.coffee"),labels:t("./methods/labels.coffee"),legend:t("./methods/legend.coffee"),links:t("./methods/links.coffee"),margin:t("./methods/margin.coffee"),messages:t("./methods/messages.coffee"),mouse:t("./methods/mouse.coffee"),nodes:t("./methods/nodes.coffee"),order:t("./methods/order.coffee"),resize:t("./methods/resize.coffee"),shape:t("./methods/shape.coffee"),size:t("./methods/size.coffee"),style:t("./methods/style.coffee"),temp:t("./methods/temp.coffee"),text:t("./methods/text.coffee"),time:t("./methods/time.coffee"),timeline:t("./methods/timeline.coffee"),timing:t("./methods/timing.coffee"),title:t("./methods/title.coffee"),tooltip:t("./methods/tooltip.coffee"),total:t("./methods/total.coffee"),type:t("./methods/type.coffee"),ui:t("./methods/ui.coffee"),width:t("./methods/width.coffee"),x:r("x"),x2:r("x2"),y:r("y"),y2:r("y2"),zoom:t("./methods/zoom.js")}),e.self}},{"../core/console/print.coffee":54,"../core/methods/attach.coffee":82,"../object/validate.coffee":175,"./helpers/container.coffee":214,"./helpers/drawSteps.js":215,"./helpers/ui/message.js":249,"./methods/active.coffee":258,"./methods/aggs.coffee":259,"./methods/attrs.coffee":260,"./methods/axes.coffee":261,"./methods/background.coffee":262,"./methods/class.coffee":263,"./methods/color.coffee":264,"./methods/cols.js":265,"./methods/config.coffee":266,"./methods/container.coffee":267,"./methods/coords.coffee":268,"./methods/csv.coffee":269,"./methods/data.coffee":270,"./methods/depth.coffee":271,"./methods/descs.coffee":272,"./methods/dev.coffee":273,"./methods/draw.js":274,"./methods/edges.js":275,"./methods/error.coffee":276,"./methods/focus.coffee":277,"./methods/font.coffee":278,"./methods/footer.coffee":279,"./methods/format.coffee":280,"./methods/height.coffee":281,"./methods/helpers/axis.coffee":282,"./methods/history.coffee":283,"./methods/icon.coffee":284,"./methods/id.coffee":285,"./methods/labels.coffee":286,"./methods/legend.coffee":287,"./methods/links.coffee":288,"./methods/margin.coffee":289,"./methods/messages.coffee":290,"./methods/mouse.coffee":291,"./methods/nodes.coffee":292,"./methods/order.coffee":293,"./methods/resize.coffee":294,"./methods/shape.coffee":295,"./methods/size.coffee":296,"./methods/style.coffee":297,"./methods/temp.coffee":298,"./methods/text.coffee":299,"./methods/time.coffee":300,"./methods/timeline.coffee":301,"./methods/timing.coffee":302,"./methods/title.coffee":303,"./methods/tooltip.coffee":304,"./methods/total.coffee":305,"./methods/type.coffee":306,"./methods/ui.coffee":307,"./methods/width.coffee":308,"./methods/zoom.js":309,"./types/area.coffee":310,"./types/bar.coffee":311,"./types/box.coffee":312,"./types/bubbles.coffee":313,"./types/deprecated/chart.coffee":314,"./types/geo_map.coffee":315,"./types/line.coffee":325,"./types/network.js":326,"./types/paths.coffee":327,"./types/pie.coffee":328,"./types/radar.coffee":329,"./types/rings.js":330,"./types/sankey.coffee":331,"./types/scatter.coffee":333,"./types/table.js":334,"./types/tree_map.coffee":335}]},{},[166,165]),function(t,e){if("function"==typeof define&&define.amd)define(["d3"],e);else if("object"==typeof module&&module.exports){var n=require("d3");module.exports=e(n)}else t.d3.tip=e(t.d3)}(this,function(t){return function(){function e(t){_=p(t),k=_.createSVGPoint(),document.body.appendChild(x)}function n(){return"n"}function i(){return[0,0]}function r(){return" "}function o(){var t=m();return{top:t.n.y-x.offsetHeight,left:t.n.x-x.offsetWidth/2}}function a(){var t=m();return{top:t.s.y,left:t.s.x-x.offsetWidth/2}}function s(){var t=m();return{top:t.e.y-x.offsetHeight/2,left:t.e.x}}function l(){var t=m();return{top:t.w.y-x.offsetHeight/2,left:t.w.x-x.offsetWidth}}function u(){var t=m();return{top:t.nw.y-x.offsetHeight,left:t.nw.x-x.offsetWidth}}function c(){var t=m();return{top:t.ne.y-x.offsetHeight,left:t.ne.x}}function h(){var t=m();return{top:t.sw.y,left:t.sw.x-x.offsetWidth}}function d(){var t=m();return{top:t.se.y,left:t.e.x}}function f(){var e=t.select(document.createElement("div"));return e.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),e.node()}function p(t){return t=t.node(),"svg"===t.tagName.toLowerCase()?t:t.ownerSVGElement}function g(){return null===x&&(x=f(),document.body.appendChild(x)),t.select(x)}function m(){for(var e=C||t.event.target;"undefined"==typeof e.getScreenCTM&&"undefined"===e.parentNode;)e=e.parentNode;var n={},i=e.getScreenCTM(),r=e.getBBox(),o=r.width,a=r.height,s=r.x,l=r.y;return k.x=s,k.y=l,n.nw=k.matrixTransform(i),k.x+=o,n.ne=k.matrixTransform(i),k.y+=a,n.se=k.matrixTransform(i),k.x-=o,n.sw=k.matrixTransform(i),k.y-=a/2,n.w=k.matrixTransform(i),k.x+=o,n.e=k.matrixTransform(i),k.x-=o/2,k.y-=a/2,n.n=k.matrixTransform(i),k.y+=a,n.s=k.matrixTransform(i),n}function v(t){return"function"==typeof t?t:function(){return t}}var y=n,b=i,w=r,x=f(),_=null,k=null,C=null;e.show=function(){var t=Array.prototype.slice.call(arguments);t[t.length-1]instanceof SVGElement&&(C=t.pop());var n,i=w.apply(this,t),r=b.apply(this,t),o=y.apply(this,t),a=g(),s=M.length,l=document.documentElement.scrollTop||document.body.scrollTop,u=document.documentElement.scrollLeft||document.body.scrollLeft;for(a.html(i).style("opacity",1).style("pointer-events","all");s--;)a.classed(M[s],!1);return n=S.get(o).apply(this),a.classed(o,!0).style("top",n.top+r[0]+l+"px").style("left",n.left+r[1]+u+"px"),e},e.hide=function(){var t=g();return t.style("opacity",0).style("pointer-events","none"),e},e.attr=function(n,i){if(arguments.length<2&&"string"==typeof n)return g().attr(n);var r=Array.prototype.slice.call(arguments);return t.selection.prototype.attr.apply(g(),r),e},e.style=function(n,i){if(arguments.length<2&&"string"==typeof n)return g().style(n);var r=Array.prototype.slice.call(arguments);return t.selection.prototype.style.apply(g(),r),e},e.direction=function(t){return arguments.length?(y=null==t?t:v(t),e):y},e.offset=function(t){return arguments.length?(b=null==t?t:v(t),e):b},e.html=function(t){return arguments.length?(w=null==t?t:v(t),e):w},e.destroy=function(){return x&&(g().remove(),x=null),e};var S=t.map({n:o,s:a,e:s,w:l,nw:u,ne:c,sw:h,se:d}),M=S.keys();return e}});